(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{1239:function(e,t){var r;/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(i){"use strict";var n=Math.cosh||function(e){return 1e-9>Math.abs(e)?1-e:(Math.exp(e)+Math.exp(-e))*.5},o=Math.sinh||function(e){return 1e-9>Math.abs(e)?e:(Math.exp(e)-Math.exp(-e))*.5},s=function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)},a=function(e,t){var r=Math.abs(e),i=Math.abs(t);return r<3e3&&i<3e3?Math.sqrt(r*r+i*i):(r<i?(r=i,i=e/t):i=t/e,r*Math.sqrt(1+i*i))},u=function(){throw SyntaxError("Invalid Param")};function l(e,t){var r=Math.abs(e),i=Math.abs(t);return 0===e?Math.log(i):0===t?Math.log(r):r<3e3&&i<3e3?.5*Math.log(e*e+t*t):.5*Math.log((e/=2)*e+(t/=2)*t)+Math.LN2}var c=function(e,t){var r={re:0,im:0};if(null==e)r.re=r.im=0;else if(void 0!==t)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return h.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return h.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else 2===e.length?(r.re=e[0],r.im=e[1]):u();break;case"string":r.im=r.re=0;var i=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),n=1,o=0;null===i&&u();for(var s=0;s<i.length;s++){var a=i[s];" "===a||"	"===a||"\n"===a||("+"===a?n++:"-"===a?o++:("i"===a||"I"===a?(n+o===0&&u()," "===i[s+1]||isNaN(i[s+1])?r.im+=parseFloat((o%2?"-":"")+"1"):(r.im+=parseFloat((o%2?"-":"")+i[s+1]),s++)):((n+o===0||isNaN(a))&&u(),"i"===i[s+1]||"I"===i[s+1]?(r.im+=parseFloat((o%2?"-":"")+a),s++):r.re+=parseFloat((o%2?"-":"")+a)),n=o=0))}n+o>0&&u();break;case"number":r.im=0,r.re=e;break;default:u()}return isNaN(r.re)||isNaN(r.im),r};function h(e,t){if(!(this instanceof h))return new h(e,t);var r=c(e,t);this.re=r.re,this.im=r.im}h.prototype={re:0,im:0,sign:function(){var e=this.abs();return new h(this.re/e,this.im/e)},add:function(e,t){var r=new h(e,t);return this.isInfinite()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:new h(this.re+r.re,this.im+r.im)},sub:function(e,t){var r=new h(e,t);return this.isInfinite()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:new h(this.re-r.re,this.im-r.im)},mul:function(e,t){var r=new h(e,t);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:0===r.im&&0===this.im?new h(this.re*r.re,0):new h(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){var r,i,n=new h(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return h.NAN;if(this.isInfinite()||n.isZero())return h.INFINITY;if(this.isZero()||n.isInfinite())return h.ZERO;e=this.re,t=this.im;var o=n.re,s=n.im;return 0===s?new h(e/o,t/o):Math.abs(o)<Math.abs(s)?(i=o/s,r=o*i+s,new h((e*i+t)/r,(t*i-e)/r)):(i=s/o,r=s*i+o,new h((e+t*i)/r,(t-e*i)/r))},pow:function(e,t){var r=new h(e,t);if(e=this.re,t=this.im,r.isZero())return h.ONE;if(0===r.im){if(0===t&&e>0)return new h(Math.pow(e,r.re),0);if(0===e)switch((r.re%4+4)%4){case 0:return new h(Math.pow(t,r.re),0);case 1:return new h(0,Math.pow(t,r.re));case 2:return new h(-Math.pow(t,r.re),0);case 3:return new h(0,-Math.pow(t,r.re))}}if(0===e&&0===t&&r.re>0&&r.im>=0)return h.ZERO;var i=Math.atan2(t,e),n=l(e,t);return new h((e=Math.exp(r.re*n-r.im*i))*Math.cos(t=r.im*n+r.re*i),e*Math.sin(t))},sqrt:function(){var e,t,r=this.re,i=this.im,n=this.abs();if(r>=0){if(0===i)return new h(Math.sqrt(r),0);e=.5*Math.sqrt(2*(n+r))}else e=Math.abs(i)/Math.sqrt(2*(n-r));return t=r<=0?.5*Math.sqrt(2*(n-r)):Math.abs(i)/Math.sqrt(2*(n+r)),new h(e,i<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new h(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new h(Math.expm1(e)*Math.cos(t)+s(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new h(l(e,t),Math.atan2(t,e))},abs:function(){return a(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new h(Math.sin(e)*n(t),Math.cos(e)*o(t))},cos:function(){var e=this.re,t=this.im;return new h(Math.cos(e)*n(t),-Math.sin(e)*o(t))},tan:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)+n(t);return new h(Math.sin(e)/r,o(t)/r)},cot:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)-n(t);return new h(-Math.sin(e)/r,o(t)/r)},sec:function(){var e=this.re,t=this.im,r=.5*n(2*t)+.5*Math.cos(2*e);return new h(Math.cos(e)*n(t)/r,Math.sin(e)*o(t)/r)},csc:function(){var e=this.re,t=this.im,r=.5*n(2*t)-.5*Math.cos(2*e);return new h(Math.sin(e)*n(t)/r,-Math.cos(e)*o(t)/r)},asin:function(){var e=this.re,t=this.im,r=new h(t*t-e*e+1,-2*e*t).sqrt(),i=new h(r.re-t,r.im+e).log();return new h(i.im,-i.re)},acos:function(){var e=this.re,t=this.im,r=new h(t*t-e*e+1,-2*e*t).sqrt(),i=new h(r.re-t,r.im+e).log();return new h(Math.PI/2-i.im,i.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new h(0,1/0);if(-1===t)return new h(0,-1/0)}var r=e*e+(1-t)*(1-t),i=new h((1-t*t-e*e)/r,-2*e/r).log();return new h(-.5*i.im,.5*i.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new h(Math.atan2(1,e),0);var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).atan():new h(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new h(0,1/0);var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).acos():new h(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new h(Math.PI/2,1/0);var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).asin():new h(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new h(o(e)*Math.cos(t),n(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new h(n(e)*Math.cos(t),o(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,r=n(e)+Math.cos(t);return new h(o(e)/r,Math.sin(t)/r)},coth:function(){var e=2*this.re,t=2*this.im,r=n(e)-Math.cos(t);return new h(o(e)/r,-Math.sin(t)/r)},csch:function(){var e=this.re,t=this.im,r=Math.cos(2*t)-n(2*e);return new h(-2*o(e)*Math.cos(t)/r,2*n(e)*Math.sin(t)/r)},sech:function(){var e=this.re,t=this.im,r=Math.cos(2*t)+n(2*e);return new h(2*n(e)*Math.cos(t)/r,-2*o(e)*Math.sin(t)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{var t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,r=1-e,i=1+e,n=r*r+t*t,o=0!==n?new h((i*r-t*t)/n,(t*r+i*t)/n):new h(-1!==e?e/0:0,0!==t?t/0:0),s=o.re;return o.re=l(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,e>1&&0===t&&(o.im=-o.im),o},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new h(0,Math.PI/2);var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).atanh():new h(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new h(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).asinh():new h(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return h.INFINITY;var r=e*e+t*t;return 0!==r?new h(e/r,-t/r).acosh():new h(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return h.INFINITY;if(this.isInfinite())return h.ZERO;var e=this.re,t=this.im,r=e*e+t*t;return new h(e/r,-t/r)},conjugate:function(){return new h(this.re,-this.im)},neg:function(){return new h(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new h(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new h(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new h(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var r=new h(e,t);return Math.abs(r.re-this.re)<=h.EPSILON&&Math.abs(r.im-this.im)<=h.EPSILON},clone:function(){return new h(this.re,this.im)},toString:function(){var e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<h.EPSILON&&(e=0),Math.abs(t)<h.EPSILON&&(t=0),0===t)?r+e:(0!==e?(r+=e+" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),1!==t&&(r+=t),r+"i")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},h.ZERO=new h(0,0),h.ONE=new h(1,0),h.I=new h(0,1),h.PI=new h(Math.PI,0),h.E=new h(Math.E,0),h.INFINITY=new h(1/0,1/0),h.NAN=new h(NaN,NaN),h.EPSILON=1e-15,void 0!==(r=(function(){return h}).apply(t,[]))&&(e.exports=r)}(0)},6114:function(e){"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},r={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},i={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"};e.exports=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.preserveFormatting,s=n.escapeMapFn,a=String(e),u="",l=(void 0===s?function(e,r){return t({},e,r)}:s)(t({},r),void 0!==o&&o?t({},i):{}),c=Object.keys(l);a;)!function(){var e=!1;c.forEach(function(t,r){!e&&a.length>=t.length&&a.slice(0,t.length)===t&&(u+=l[c[r]],a=a.slice(t.length,a.length),e=!0)}),e||(u+=a.slice(0,1),a=a.slice(1,a.length))}();return u}},7852:function(e){"use strict";e.exports=function e(t,r){var i,n,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,l=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(s,"")||"",d=c(r).replace(s,"")||"",p=h.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=d.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(h.match(u),16)||1!==p.length&&h.match(a)&&Date.parse(h),v=parseInt(d.match(u),16)||m&&d.match(a)&&Date.parse(d)||null;if(v){if(m<v)return -1;if(m>v)return 1}for(var g=0,b=Math.max(p.length,f.length);g<b;g++){if(i=!(p[g]||"").match(l)&&parseFloat(p[g])||p[g]||0,n=!(f[g]||"").match(l)&&parseFloat(f[g])||f[g]||0,isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return -1;if(i>n)return 1}return 0}},2697:function(e,t,r){"use strict";var i=r(7901),n=r(1013);i.Z.Composition=function(e){var t,r=this,i=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],o=function(e){return function(){var t;for(t in r.elements)r.elements.hasOwnProperty(t)&&n.Z.exists(r.elements[t][e])&&r.elements[t][e].apply(r.elements[t],arguments);return r}};for(t=0;t<i.length;t++)this[i[t]]=o(i[t]);for(t in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},e)e.hasOwnProperty(t)&&this.add(t,e[t]);this.dump=!0,this.subs={}},i.Z.extend(i.Z.Composition.prototype,{add:function(e,t){return!!(!n.Z.exists(this[e])&&n.Z.exists(t))&&(n.Z.exists(t.id)?this.elements[t.id]=t:this.elements[e]=t,n.Z.exists(t.name)&&(this.elementsByName[t.name]=t),t.on("attribute:name",this.nameListener,this),this.objectsList.push(t),this[e]=t,this.methodMap[e]=t,!0)},remove:function(e){var t,r=!1;for(t in this.elements)if(this.elements.hasOwnProperty(t)&&this.elements[t].id===this[e].id){r=!0;break}return r&&(delete this.elements[this[e].id],delete this[e]),r},nameListener:function(e,t,r){delete this.elementsByName[e],this.elementsByName[t]=r},select:function(e){return n.Z.exists(i.Z.Board)?i.Z.Board.prototype.select.call(this,e):new i.Z.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var e,t={};for(e in this.subs)this.subs.hasOwnProperty(e)&&(t[e]=this.subs[e].visProp);return this.attr}}),t.Z=i.Z.Composition},2840:function(e,t,r){"use strict";var i,n=r(7901),o="1.7.0";i={version:o,licenseText:"JSXGraph v"+o+" Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8},n.Z.extendConstants(n.Z,i),t.Z=i},9401:function(e,t,r){"use strict";var i=r(7901),n=r(2840),o=r(6638),s=r(1013),a=r(4204);i.Z.Coords=function(e,t,r,i){this.board=r,this.usrCoords=[],this.scrCoords=[],this.emitter=!s.Z.exists(i)||i,this.emitter&&o.Z.eventify(this),this.setCoordinates(e,t,!1,!0)},i.Z.extend(i.Z.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>a.Z.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(e){var t=Math.round,r=this.board,i=this.usrCoords,n=r.origin.scrCoords;!0===e?(this.scrCoords[0]=t(i[0]),this.scrCoords[1]=t(i[0]*n[1]+i[1]*r.unitX),this.scrCoords[2]=t(i[0]*n[2]-i[2]*r.unitY)):(this.scrCoords[0]=i[0],this.scrCoords[1]=i[0]*n[1]+i[1]*r.unitX,this.scrCoords[2]=i[0]*n[2]-i[2]*r.unitY)},screen2usr:function(){var e=this.board.origin.scrCoords,t=this.scrCoords,r=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(t[1]-e[1])/r.unitX,this.usrCoords[2]=(e[2]-t[2])/r.unitY},distance:function(e,t){var r,i,o=this.usrCoords,s=this.scrCoords;return e!==n.Z.COORDS_BY_USER?(r=t.scrCoords,a.Z.hypot(s[1]-r[1],s[2]-r[2])):(r=t.usrCoords,(i=o[0]-r[0])*i>a.Z.eps*a.Z.eps)?Number.POSITIVE_INFINITY:a.Z.hypot(o[1]-r[1],o[2]-r[2])},setCoordinates:function(e,t,r,i){var o=this.usrCoords,s=this.scrCoords,a=[o[0],o[1],o[2]],u=[s[0],s[1],s[2]];return e===n.Z.COORDS_BY_USER?(2===t.length?(o[0]=1,o[1]=t[0],o[2]=t[1]):(o[0]=t[0],o[1]=t[1],o[2]=t[2],this.normalizeUsrCoords()),this.usr2screen(r)):(2===t.length?(s[1]=t[0],s[2]=t[1]):(s[1]=t[1],s[2]=t[2]),this.screen2usr()),this.emitter&&!i&&(u[1]!==s[1]||u[2]!==s[2])&&this.triggerEventHandlers(["update"],[a,u]),this},copy:function(e,t){return void 0===t&&(t=0),this[e].slice(t)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>a.Z.eps},__evt__update:function(e,t){},__evt:function(){}}),t.Z=i.Z.Coords},7158:function(e,t,r){"use strict";var i=r(7901),n=r(4204),o=r(7895),s=r(6692),a=r(4401),u=r(9401),l=r(2840),c=r(1013);i.Z.CoordsElement=function(e,t){var r;for(c.Z.exists(e)||(e=[1,0,0]),r=0;r<e.length;++r)e[r]=parseFloat(e[r]);this.coords=new u.Z(l.Z.COORDS_BY_USER,e,this.board),this.initialCoords=new u.Z(l.Z.COORDS_BY_USER,e,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=c.Z.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),c.Z.exists(this.element)&&this.addAnchor(e,t),this.isDraggable=!0},i.Z.extend(i.Z.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(e){return this.needsUpdate&&(c.Z.exists(e)||(e=!1),c.Z.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===l.Z.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(e=!1),e?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(e)),this},updateGlider:function(){var e,t,r,i,s,a,h,d,p,f,m,v,g,b,y,x,C,Z,_,w=2*Math.PI,E=!1,N=this.slideObject,S=[];if(this.needsUpdateFromParent=!1,N.elementClass===l.Z.OBJECT_CLASS_CIRCLE)c.Z.evaluate(this.visProp.isgeonext)&&(w=1),g=o.Z.projectPointToCircle(this,N,this.board),b=o.Z.rad([N.center.X()+1,N.center.Y()],N.center,this)/w;else if(N.elementClass===l.Z.OBJECT_CLASS_LINE){if(this.onPolygon){if(r=N.point1.coords.usrCoords,Math.abs(t=(i=N.point2.coords.usrCoords)[e=1]-r[e])<n.Z.eps&&(t=i[e=2]-r[e]),a=(o.Z.projectPointToLine(this,N,this.board).usrCoords[e]-r[e])/t,s=N.parentPolygon,a<0){for(e=0;e<s.borders.length;e++)if(N===s.borders[e]){N=s.borders[(e-1+s.borders.length)%s.borders.length];break}}else if(a>1){for(e=0;e<s.borders.length;e++)if(N===s.borders[e]){N=s.borders[(e+1+s.borders.length)%s.borders.length];break}}N.id!==this.slideObject.id&&(this.slideObject=N)}r=N.point1.coords,i=N.point2.coords,(t=r.distance(l.Z.COORDS_BY_USER,i))<n.Z.eps?(g=r,E=!0,b=0):(g=o.Z.projectPointToLine(this,N,this.board),r=r.usrCoords.slice(0),Math.abs((i=i.usrCoords.slice(0))[0])<n.Z.eps?(Math.abs(t=i[e=1])<n.Z.eps&&(t=i[e=2]),b=((t=(g.usrCoords[e]-r[e])/t)>=0?1:-1)*(t=Math.abs(t))/(t+1)):Math.abs(r[0])<n.Z.eps?(Math.abs(t=r[e=1])<n.Z.eps&&(t=r[e=2]),b=(t=(g.usrCoords[e]-i[e])/t)<0?(1-2*t)/(1-t):1/(t+1)):(Math.abs(t=i[e=1]-r[e])<n.Z.eps&&(t=i[e=2]-r[e]),b=(g.usrCoords[e]-r[e])/t)),null!==(x=this.findClosestSnapValue(b))?(b=(c.Z.evaluate(this.visProp.snapvalues)[x]-this._smin)/(this._smax-this._smin),this.update(!0)):(y=c.Z.evaluate(this.visProp.snapwidth),c.Z.evaluate(y)>0&&Math.abs(this._smax-this._smin)>=n.Z.eps&&(b=(Math.round(((b=Math.max(Math.min(b,1),0))*(this._smax-this._smin)+this._smin)/y)*y-this._smin)/(this._smax-this._smin),this.update(!0))),r=N.point1.coords,!c.Z.evaluate(N.visProp.straightfirst)&&Math.abs(r.usrCoords[0])>n.Z.eps&&b<0&&(g=r,E=!0,b=0),i=N.point2.coords,!c.Z.evaluate(N.visProp.straightlast)&&Math.abs(i.usrCoords[0])>n.Z.eps&&b>1&&(g=i,E=!0,b=1)}else if(N.type===l.Z.OBJECT_TYPE_TURTLE)this.updateConstraint(),g=(C=o.Z.projectPointToTurtle(this,N,this.board))[0],b=C[1];else if(N.elementClass===l.Z.OBJECT_CLASS_CURVE){if(N.type===l.Z.OBJECT_TYPE_ARC||N.type===l.Z.OBJECT_TYPE_SECTOR)g=o.Z.projectPointToCircle(this,N,this.board),h=o.Z.rad(N.radiuspoint,N.center,this),d=0,p=o.Z.rad(N.radiuspoint,N.center,N.anglepoint),b=h,("minor"===(y=c.Z.evaluate(N.visProp.selection))&&p>Math.PI||"major"===y&&p<Math.PI)&&(d=p,p=2*Math.PI),(h<d||h>p)&&(b=p,(h<d&&h>.5*d||h>p&&h>.5*p+Math.PI)&&(b=d),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),w=p-d,this.visProp.isgeonext&&(w=1),Math.abs(w)>n.Z.eps&&(b/=w);else if(this.updateConstraint(),N.transformations.length>0){for(_=!1,(C=N.getTransformationSource())[0]&&(_=C[0],S.push(N),S.push(C[1]));C[0]&&c.Z.exists(C[1]._transformationSource);)C=C[1].getTransformationSource(),S.push(C[1]);if(Z=this.coords.usrCoords,_){for(e=0;e<S.length;e++)S[e].updateTransformMatrix(),v=n.Z.inverse(S[e].transformMat),Z=n.Z.matVecMult(v,Z);for(f=new u.Z(l.Z.COORDS_BY_USER,Z,this.board).usrCoords,Z=(m=o.Z.projectCoordsToCurve(f[1],f[2],this.position||0,S[S.length-1],this.board))[0].usrCoords,e=S.length-2;e>=0;e--)Z=n.Z.matVecMult(S[e].transformMat,Z);m[0]=new u.Z(l.Z.COORDS_BY_USER,Z,this.board)}else N.updateTransformMatrix(),v=n.Z.inverse(N.transformMat),Z=n.Z.matVecMult(v,Z),f=new u.Z(l.Z.COORDS_BY_USER,Z,this.board).usrCoords,m=o.Z.projectCoordsToCurve(f[1],f[2],this.position||0,N,this.board);g=m[0],b=m[1]}else g=(C=o.Z.projectPointToCurve(this,N,this.board))[0],b=C[1]}else c.Z.isPoint(N)&&(g=o.Z.projectPointToPoint(this,N,this.board),b=this.position);this.coords.setCoordinates(l.Z.COORDS_BY_USER,g.usrCoords,E),this.position=b},findClosestSnapValue:function(e){var t,r,i,o,s=null;if(i=c.Z.evaluate(this.visProp.snapvalues),o=c.Z.evaluate(this.visProp.snapvaluedistance),c.Z.isArray(i)&&Math.abs(this._smax-this._smin)>=n.Z.eps&&o>0)for(t=0;t<i.length;t++)(r=Math.abs(e*(this._smax-this._smin)+this._smin-i[t]))<o&&(o=r,s=t);return s},updateGliderFromParent:function(){var e,t,r,i,s,a,h,d,p,f,m,v,g=this.slideObject,b=[],y=2*Math.PI;if(!this.needsUpdateFromParent){this.needsUpdateFromParent=!0;return}if(g.elementClass===l.Z.OBJECT_CLASS_CIRCLE)r=g.Radius(),c.Z.evaluate(this.visProp.isgeonext)&&(y=1),s=[g.center.X()+r*Math.cos(this.position*y),g.center.Y()+r*Math.sin(this.position*y)];else if(g.elementClass===l.Z.OBJECT_CLASS_LINE)e=g.point1.coords.usrCoords,t=g.point2.coords.usrCoords,0===e[0]&&0===e[1]&&0===e[2]||0===t[0]&&0===t[1]&&0===t[2]?s=[0,0,0]:Math.abs(t[0])<n.Z.eps?(i=Math.min(Math.abs(this.position),1-n.Z.eps),i/=1-i,this.position<0&&(i=-i),s=[e[0]+i*t[0],e[1]+i*t[1],e[2]+i*t[2]]):Math.abs(e[0])<n.Z.eps?(i=(i=Math.min(i=Math.max(this.position,n.Z.eps),2-n.Z.eps))>1?(i-1)/(i-2):(1-i)/i,s=[t[0]+i*e[0],t[1]+i*e[1],t[2]+i*e[2]]):(i=this.position,s=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1]),e[2]+i*(t[2]-e[2])]);else if(g.type===l.Z.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(l.Z.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),this.updateConstraint(),s=o.Z.projectPointToTurtle(this,g,this.board)[0].usrCoords;else if(g.elementClass===l.Z.OBJECT_CLASS_CURVE){for(d=!1,(a=g.getTransformationSource())[0]&&(d=a[0],b.push(g),b.push(a[1]));a[0]&&c.Z.exists(a[1]._transformationSource);)a=a[1].getTransformationSource(),b.push(a[1]);if(d?this.coords.setCoordinates(l.Z.COORDS_BY_USER,[b[b.length-1].Z(this.position),b[b.length-1].X(this.position),b[b.length-1].Y(this.position)]):this.coords.setCoordinates(l.Z.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),g.type===l.Z.OBJECT_TYPE_ARC||g.type===l.Z.OBJECT_TYPE_SECTOR)p=o.Z.rad([g.center.X()+1,g.center.Y()],g.center,g.radiuspoint),f=0,v=o.Z.rad(g.radiuspoint,g.center,g.anglepoint),("minor"===g.visProp.selection&&v>Math.PI||"major"===g.visProp.selection&&v<Math.PI)&&(f=v,v=2*Math.PI),y=v-f,c.Z.evaluate(this.visProp.isgeonext)&&(y=1),((m=this.position*y)<f||m>v)&&(((m=v)<f&&m>.5*f||m>v&&m>.5*v+Math.PI)&&(m=f),this.position=m,Math.abs(y)>n.Z.eps&&(this.position/=y)),r=g.Radius(),s=[g.center.X()+r*Math.cos(this.position*y+p),g.center.Y()+r*Math.sin(this.position*y+p)];else if(this.updateConstraint(),d)for(s=o.Z.projectPointToCurve(this,b[b.length-1],this.board)[0].usrCoords,h=b.length-2;h>=0;h--)s=new u.Z(l.Z.COORDS_BY_USER,n.Z.matVecMult(b[h].transformMat,s),this.board).usrCoords;else s=o.Z.projectPointToCurve(this,g,this.board)[0].usrCoords}else c.Z.isPoint(g)&&(s=o.Z.projectPointToPoint(this,g,this.board).usrCoords);this.coords.setCoordinates(l.Z.COORDS_BY_USER,s,!1)},updateRendererGeneric:function(e){return this.needsUpdate&&this.board.renderer&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>n.Z.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[e](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(e){return e?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(e){return this.isReal&&e.isReal?this.coords.distance(l.Z.COORDS_BY_USER,e.coords):NaN},snapToGrid:function(e){return this.handleSnapToGrid(e)},handleSnapToPoints:function(e){var t,r,i,n,s,a,u,h,d=0,p=1/0,f=null,m=c.Z.evaluate(this.visProp.ignoredsnaptopoints),v=!1;if(n=this.board.objectsList.length,m&&(u=m.length),c.Z.evaluate(this.visProp.snaptopoints)||e){for(t=0,s=c.Z.evaluate(this.visProp.attractorunit),a=c.Z.evaluate(this.visProp.attractordistance);t<n;t++){if(r=this.board.objectsList[t],m){for(h=0,v=!1;h<u;h++)if(r===this.board.select(m[h])){v=!0;break}if(v)continue}c.Z.isPoint(r)&&r!==this&&r.visPropCalc.visible&&(i=o.Z.projectPointToPoint(this,r,this.board),(d="screen"===s?i.distance(l.Z.COORDS_BY_SCREEN,this.coords):i.distance(l.Z.COORDS_BY_USER,this.coords))<a&&d<p&&(p=d,f=i))}null!==f&&this.coords.setCoordinates(l.Z.COORDS_BY_USER,f.usrCoords)}return this},snapToPoints:function(e){return this.handleSnapToPoints(e)},handleAttractors:function(){var e,t,r,i,n=0,s=c.Z.evaluate(this.visProp.attractorunit),a=c.Z.evaluate(this.visProp.attractordistance),h=c.Z.evaluate(this.visProp.snatchdistance),d=c.Z.evaluate(this.visProp.attractors),p=d.length;if(0!==a){for(e=0;e<p;e++)if(t=this.board.select(d[e]),c.Z.exists(t)&&t!==this){if(c.Z.isPoint(t)?r=o.Z.projectPointToPoint(this,t,this.board):t.elementClass===l.Z.OBJECT_CLASS_LINE?(i=o.Z.projectCoordsToSegment(this.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords),r=!c.Z.evaluate(t.visProp.straightfirst)&&i[1]<0?t.point1.coords:!c.Z.evaluate(t.visProp.straightlast)&&i[1]>1?t.point2.coords:new u.Z(l.Z.COORDS_BY_USER,i[0],this.board)):t.elementClass===l.Z.OBJECT_CLASS_CIRCLE?r=o.Z.projectPointToCircle(this,t,this.board):t.elementClass===l.Z.OBJECT_CLASS_CURVE?r=o.Z.projectPointToCurve(this,t,this.board)[0]:t.type===l.Z.OBJECT_TYPE_TURTLE?r=o.Z.projectPointToTurtle(this,t,this.board)[0]:t.type===l.Z.OBJECT_TYPE_POLYGON&&(r=new u.Z(l.Z.COORDS_BY_USER,o.Z.projectCoordsToPolygon(this.coords.usrCoords,t),this.board)),(n="screen"===s?r.distance(l.Z.COORDS_BY_SCREEN,this.coords):r.distance(l.Z.COORDS_BY_USER,this.coords))<a){this.type===l.Z.OBJECT_TYPE_GLIDER&&(t===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===t)||this.makeGlider(t);break}n>=h&&(t===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===t)&&this.popSlideObject()}return this}},setPositionDirectly:function(e,t){var r,i,o,s,h=this.coords;if(this.relativeCoords)return i=new u.Z(e,t,this.board),c.Z.evaluate(this.visProp.islabel)?(o=a.Z.subtract(i.scrCoords,h.scrCoords),this.relativeCoords.scrCoords[1]+=o[1],this.relativeCoords.scrCoords[2]+=o[2]):(o=a.Z.subtract(i.usrCoords,h.usrCoords),this.relativeCoords.usrCoords[1]+=o[1],this.relativeCoords.usrCoords[2]+=o[2]),this;for(this.coords.setCoordinates(e,t),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),r=this.transformations.length-1;r>=0;r--)e===l.Z.COORDS_BY_SCREEN?s=new u.Z(e,t,this.board).usrCoords:(2===t.length&&(t=[1].concat(t)),s=t),this.initialCoords.setCoordinates(l.Z.COORDS_BY_USER,n.Z.matVecMult(n.Z.inverse(this.transformations[r].matrix),s));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===l.Z.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(e,t){var r;return t=new u.Z(e,t,this.board),r=this.board.create("transform",t.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(r):this.addTransform(this,r),this.prepareUpdate().update(),this},setPosition:function(e,t){return this.setPositionDirectly(e,t)},setGliderPosition:function(e){return this.type===l.Z.OBJECT_TYPE_GLIDER&&(this.position=e,this.board.update()),this},makeGlider:function(e){var t,r,n,o=this.board.select(e),s=!1;if(o.type===l.Z.OBJECT_TYPE_POLYGON){for(r=0,t=Number.MAX_VALUE;r<o.borders.length;r++)(n=i.Z.Math.Geometry.distPointLine(this.coords.usrCoords,o.borders[r].stdform))<t&&(t=n,e=o.borders[r]);o=this.board.select(e),s=!0}if(c.Z.exists(o)){if(o.type===l.Z.OBJECT_TYPE_TICKS)throw Error("JSXGraph: gliders on ticks are not possible.")}else throw Error("JSXGraph: slide object undefined.");return this.slideObject=this.board.select(e),this.slideObjects.push(this.slideObject),this.addParents(e),this.type=l.Z.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=s,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===l.Z.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===l.Z.OBJECT_CLASS_TEXT?this.elType="text":this.type===l.Z.OBJECT_TYPE_IMAGE?this.elType="image":this.type===l.Z.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var e,t;if(this.type!==l.Z.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===l.Z.OBJECT_CLASS_POINT&&(this.type=l.Z.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(e in this.board.objects)this.board.objects.hasOwnProperty(e)&&(t=this.board.objects[e]).descendants&&(delete t.descendants[this.id],delete t.childElements[this.id],this.hasLabel&&(delete t.descendants[this.label.id],delete t.childElements[this.label.id]));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===l.Z.OBJECT_CLASS_POINT?(this.type=l.Z.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===l.Z.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===l.Z.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(e){var t,r,i=[],n=["X","Y"],o=function(e){return function(){return e}},s=function(e){return function(){return e.Value()}};for(this.elementClass===l.Z.OBJECT_CLASS_POINT&&(this.type=l.Z.OBJECT_TYPE_CAS),this.isDraggable=!1,t=0;t<e.length;t++)r=e[t],c.Z.isString(r)?(i[t]=this.board.jc.snippet(r,!0,null,!0),this.addParentsFromJCFunctions([i[t]]),2===e.length&&(this[n[t]+"jc"]=e[t])):c.Z.isFunction(r)?i[t]=r:c.Z.isNumber(r)?i[t]=o(r):c.Z.isObject(r)&&c.Z.isFunction(r.Value)&&(i[t]=s(r)),i[t].origin=r;return 1===e.length?this.updateConstraint=function(){var e=i[0]();return c.Z.isArray(e)?this.coords.setCoordinates(l.Z.COORDS_BY_USER,e):this.coords=e,this}:2===e.length?(this.XEval=i[0],this.YEval=i[1],this.addParents([i[0].origin,i[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(l.Z.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=i[0],this.XEval=i[1],this.YEval=i[2],this.addParents([i[0].origin,i[1].origin,i[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(l.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),!this.board.isSuspendedUpdate&&(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(e,t){t?this.relativeCoords=new u.Z(l.Z.COORDS_BY_SCREEN,e.slice(0,2),this.board):this.relativeCoords=new u.Z(l.Z.COORDS_BY_USER,e,this.board),this.element.addChild(this),t&&this.addParents(this.element),this.XEval=function(){var e,t;return c.Z.evaluate(this.visProp.islabel)?(e=parseFloat(c.Z.evaluate(this.visProp.offset)[0]),t=this.element.getLabelAnchor(),new u.Z(l.Z.COORDS_BY_SCREEN,[e+this.relativeCoords.scrCoords[1]+t.scrCoords[1],0],this.board).usrCoords[1]):(t=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+t.usrCoords[1])},this.YEval=function(){var e,t;return c.Z.evaluate(this.visProp.islabel)?(e=-parseFloat(c.Z.evaluate(this.visProp.offset)[1]),t=this.element.getLabelAnchor(),new u.Z(l.Z.COORDS_BY_SCREEN,[0,e+this.relativeCoords.scrCoords[2]+t.scrCoords[2]],this.board).usrCoords[2]):(t=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+t.usrCoords[2])},this.ZEval=c.Z.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(l.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(e){var t;if(0===this.transformations.length)return this;for(t=0;t<this.transformations.length;t++)this.transformations[t].update();return this},addTransform:function(e,t){var r,i=c.Z.isArray(t)?t:[t],n=i.length;for(0===this.transformations.length&&(this.baseElement=e),r=0;r<n;r++)this.transformations.push(i[r]);return this},startAnimation:function(e,t,r){var i=c.Z.evaluate(e),n=c.Z.evaluate(t),o=this;return r=c.Z.evaluate(r)||250,this.type!==l.Z.OBJECT_TYPE_GLIDER||c.Z.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){o._anim(i,n)},r),c.Z.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return c.Z.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(e,t,r){r=r||{};var i,n,o,a,u,h=[],d=[],p=t/this.board.attr.animationdelay,f=function(t,r){return function(){return e[t][r]}};if(c.Z.isArray(e)){for(i=0,o=e.length;i<o;i++)c.Z.isPoint(e[i])?d[i]=e[i]:d[i]={elementClass:l.Z.OBJECT_CLASS_POINT,X:f(i,0),Y:f(i,1)};if(0===(t=t||0))return this.setPosition(l.Z.COORDS_BY_USER,[d[d.length-1].X(),d[d.length-1].Y()]),this.board.update(this);if(!c.Z.exists(r.interpolate)||r.interpolate)for(i=0,n=s.Z.Neville(d);i<p;i++)h[i]=[],h[i][0]=n[0]((p-i)/p*n[3]()),h[i][1]=n[1]((p-i)/p*n[3]());else{for(i=0,o=e.length-1;i<p;++i)a=Math.floor(i/p*o),u=i/p*o-a,h[i]=[],h[i][0]=(1-u)*d[a].X()+u*d[a+1].X(),h[i][1]=(1-u)*d[a].Y()+u*d[a+1].Y();h.push([d[o].X(),d[o].Y()]),h.reverse()}this.animationPath=h}else c.Z.isFunction(e)&&(this.animationPath=e,this.animationStart=new Date().getTime());return this.animationCallback=r.callback,this.board.addAnimation(this),this},moveTo:function(e,t,r){r=r||{},e=new u.Z(l.Z.COORDS_BY_USER,e,this.board);var i,o=Math.ceil(t/this.board.attr.animationdelay),s=[],a=this.coords.usrCoords[1],h=this.coords.usrCoords[2],d=e.usrCoords[1]-a,p=e.usrCoords[2]-h,f=function(e){return r.effect&&"<>"===r.effect?Math.pow(Math.sin(e/o*Math.PI/2),2):e/o};if(!c.Z.exists(t)||0===t||Math.abs(e.usrCoords[0]-this.coords.usrCoords[0])>n.Z.eps)return this.setPosition(l.Z.COORDS_BY_USER,e.usrCoords),this.board.update(this);if(!c.Z.exists(r.callback)&&Math.abs(d)<n.Z.eps&&Math.abs(p)<n.Z.eps)return this;for(i=o;i>=0;i--)s[o-i]=[e.usrCoords[0],a+d*f(i),h+p*f(i)];return this.animationPath=s,this.animationCallback=r.callback,this.board.addAnimation(this),this},visit:function(e,t,r){e=new u.Z(l.Z.COORDS_BY_USER,e,this.board);var i,n,o,s=this.board.attr.animationdelay,a=[],h=this.coords.usrCoords[1],d=this.coords.usrCoords[2],p=e.usrCoords[1]-h,f=e.usrCoords[2]-d,m=function(e){var t=e<o/2?2*e/o:2*(o-e)/o;return r.effect&&"<>"===r.effect?Math.pow(Math.sin(t*Math.PI/2),2):t};for(c.Z.isNumber(r)?r={repeat:r}:(r=r||{},c.Z.exists(r.repeat)||(r.repeat=1)),o=Math.ceil(t/(s*r.repeat)),n=0;n<r.repeat;n++)for(i=o;i>=0;i--)a[n*(o+1)+o-i]=[e.usrCoords[0],h+p*m(i),d+f*m(i)];return this.animationPath=a,this.animationCallback=r.callback,this.board.addAnimation(this),this},_anim:function(e,t){var r,i,n,s,a,u,c,h,d;return this.intervalCount+=1,this.intervalCount>t&&(this.intervalCount=0),this.slideObject.elementClass===l.Z.OBJECT_CLASS_LINE?(c=this.slideObject.point1.coords.scrCoords,r=Math.round(((h=this.slideObject.point2.coords.scrCoords)[1]-c[1])*this.intervalCount/t),i=Math.round((h[2]-c[2])*this.intervalCount/t),e>0?s=this.slideObject.point1:(s=this.slideObject.point2,r*=-1,i*=-1),this.coords.setCoordinates(l.Z.COORDS_BY_SCREEN,[s.coords.scrCoords[1]+r,s.coords.scrCoords[2]+i])):this.slideObject.elementClass===l.Z.OBJECT_CLASS_CURVE?(a=e>0?Math.round(this.intervalCount/t*this.board.canvasWidth):Math.round((t-this.intervalCount)/t*this.board.canvasWidth),this.coords.setCoordinates(l.Z.COORDS_BY_SCREEN,[a,0]),d=o.Z.projectPointToCurve(this,this.slideObject,this.board),this.coords=d[0],this.position=d[1]):this.slideObject.elementClass===l.Z.OBJECT_CLASS_CIRCLE&&(n=2*Math.PI,e<0?n*=this.intervalCount/t:n*=(t-this.intervalCount)/t,u=this.slideObject.Radius(),this.coords.setCoordinates(l.Z.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+u*Math.cos(n),this.slideObject.center.coords.usrCoords[2]+u*Math.sin(n)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var e=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(e=this.parents),this.type===l.Z.OBJECT_TYPE_GLIDER&&(e=[this.X(),this.Y(),this.slideObject.id]),e}}),i.Z.CoordsElement.create=function(e,t,r,i,n,o){var s,a,u=!1;for(a=0;a<r.length;a++)(c.Z.isFunction(r[a])||c.Z.isString(r[a]))&&(u=!0);if(u)(s=new e(t,[0,0],i,n,o)).addConstraint(r);else if(c.Z.isNumber(r[0])&&c.Z.isNumber(r[1]))s=new e(t,r,i,n,o),c.Z.exists(i.slideobject)?s.makeGlider(i.slideobject):s.baseElement=s,s.isDraggable=!0;else{if(!(c.Z.isObject(r[0])&&c.Z.isTransformationOrArray(r[1])))return!1;(s=new e(t,[0,0],i,n,o)).addTransform(r[0],r[1]),s.isDraggable=!1}return s.handleSnapToGrid(),s.handleSnapToPoints(),s.handleAttractors(),s.addParents(r),s},t.Z=i.Z.CoordsElement},3154:function(e,t,r){"use strict";var i=r(7901),n=r(2840),o=r(9401),s=r(4204),a=r(4401),u=r(9399),l=r(6638),c=r(2141),h=r(1013);i.Z.GeometryElement=function(e,t,r,i){var o,s,a;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},l.Z.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(s in this.board=e,this.type=r,this._org_type=r,this.elementClass=i||n.Z.OBJECT_CLASS_OTHER,this.id=t.id,o=t.name,h.Z.exists(o)||(o=this.board.generateName(this)),""!==o&&(this.board.elementsByName[o]=this),this.name=o,this.needsRegularUpdate=t.needsregularupdate,h.Z.clearVisPropOld(this),a=this.resolveShortcuts(t))a.hasOwnProperty(s)&&this._set(s,a[s]);this.visProp.draft=a.draft&&a.draft.draft}},i.Z.extend(i.Z.GeometryElement.prototype,{addChild:function(e){var t,r;for(t in this.childElements[e.id]=e,this.addDescendants(e),e.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(t))for(r in this.descendants[t].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(r)&&(this.descendants[t].ancestors[this.ancestors[r].id]=this.ancestors[r]);for(t in this.ancestors)if(this.ancestors.hasOwnProperty(t))for(r in this.descendants)this.descendants.hasOwnProperty(r)&&(this.ancestors[t].descendants[this.descendants[r].id]=this.descendants[r]);return this},addDescendants:function(e){var t;for(t in this.descendants[e.id]=e,e.childElements)e.childElements.hasOwnProperty(t)&&this.addDescendants(e.childElements[t]);return this},addParents:function(e){var t,r,i;for(t=0,i=h.Z.isArray(e)?e:arguments,r=i.length;t<r;++t)h.Z.exists(i[t])&&(h.Z.isId(this.board,i[t])?this.parents.push(i[t]):h.Z.exists(i[t].id)&&this.parents.push(i[t].id));this.parents=h.Z.uniqueArray(this.parents)},setParents:function(e){this.parents=[],this.addParents(e)},addParentsFromJCFunctions:function(e){var t,r,i;for(t=0;t<e.length;t++)for(r in e[t].deps)i=e[t].deps[r],this.addParents(i),i.addChild(this);return this},removeChild:function(e){return delete this.childElements[e.id],this.removeDescendants(e),delete e.ancestors[this.id],this},removeDescendants:function(e){var t;for(t in delete this.descendants[e.id],e.childElements)e.childElements.hasOwnProperty(t)&&this.removeDescendants(e.childElements[t]);return this},countChildren:function(){var e,t,r=0;for(e in t=this.childElements)t.hasOwnProperty(e)&&0>e.indexOf("Label")&&r++;return r},getName:function(){return this.name},addTransform:function(e){return this},draggable:function(){return this.isDraggable&&!h.Z.evaluate(this.visProp.fixed)&&this.type!==n.Z.OBJECT_TYPE_GLIDER},setPosition:function(e,t){var r,i,o,s,a=[];if(!h.Z.exists(this.parents))return this;for(i=0,o=this.parents.length;i<o;++i)if(r=this.board.select(this.parents[i]),h.Z.isPoint(r)){if(!r.draggable())return this;a.push(r)}for(3===t.length&&(t=t.slice(1)),s=this.board.create("transform",t,{type:"translate"}),(o=a.length)>0?s.applyOnce(a):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(s):this.addTransform(s),i=0;i<o;++i)a[i].type===n.Z.OBJECT_TYPE_GLIDER&&a[i].updateGlider();return this},setPositionDirectly:function(e,t,r){var i=new o.Z(e,t,this.board,!1),s=new o.Z(e,r,this.board,!1),u=a.Z.subtract(i.usrCoords,s.usrCoords);return this.setPosition(n.Z.COORDS_BY_USER,u),this},generatePolynomial:function(){return[]},animate:function(e,t,r){r=r||{};var i,n,o,s=Math.ceil(t/this.board.attr.animationdelay),a=this,u=function(e,t,r,i){var n,u;if(e=parseFloat(e),t=parseFloat(t),!(isNaN(e)||isNaN(t)))for(o=0,u=(t-e)/s,a.animationData[r]=[];o<s;o++)n=e+(o+1)*u,a.animationData[r][s-o-1]=i?Math.floor(n):n};for(i in this.animationData={},e)if(e.hasOwnProperty(i))switch(n=i.toLowerCase()){case"strokecolor":case"fillcolor":!function(e,t,r){var i,n,u,l,h;for(o=0,i=c.Z.rgb2hsv(e),u=((n=c.Z.rgb2hsv(t))[0]-i[0])/s,l=(n[1]-i[1])/s,h=(n[2]-i[2])/s,a.animationData[r]=[];o<s;o++)a.animationData[r][s-o-1]=c.Z.hsv2rgb(i[0]+(o+1)*u,i[1]+(o+1)*l,i[2]+(o+1)*h)}(this.visProp[n],e[i],n);break;case"size":if(!h.Z.isPoint(this))break;u(this.visProp[n],e[i],n,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":u(this.visProp[n],e[i],n,!1)}return this.animationCallback=r.callback,this.board.addAnimation(this),this},update:function(){return h.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(e){return this.prepareUpdate().update().updateVisibility(e).updateRenderer()},setDisplayRendNode:function(e){var t,r,i,n,o;if(void 0===e&&(e=this.visPropCalc.visible),e===this.visPropOld.visible)return this;for(this.board.renderer.display(this,e),r=this.inherits.length,i=0;i<r;i++)if(o=this.inherits[i],h.Z.isArray(o))for(t=0,n=o.length;t<n;t++)h.Z.exists(o[t])&&h.Z.exists(o[t].rendNode)&&"inherit"===h.Z.evaluate(o[t].visProp.visible)&&o[t].setDisplayRendNode(e);else h.Z.exists(o)&&h.Z.exists(o.rendNode)&&"inherit"===h.Z.evaluate(o.visProp.visible)&&o.setDisplayRendNode(e);return this.hasLabel&&h.Z.exists(this.label)&&h.Z.exists(this.label.rendNode)&&"inherit"===h.Z.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(e),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(e){var t,r,i,n,o,s;if(this.needsUpdate){for(void 0!==e?this.visPropCalc.visible=e:(s=h.Z.evaluate(this.visProp.visible),h.Z.exists(this.hiddenByParent)&&this.hiddenByParent&&(s=!1),"inherit"!==s&&(this.visPropCalc.visible=s)),r=this.inherits.length,i=0;i<r;i++)if(o=this.inherits[i],h.Z.isArray(o))for(t=0,n=o.length;t<n;t++)h.Z.exists(o[t])&&"inherit"===h.Z.evaluate(o[t].visProp.visible)&&o[t].prepareUpdate().updateVisibility(this.visPropCalc.visible);else h.Z.exists(o)&&"inherit"===h.Z.evaluate(o.visProp.visible)&&o.prepareUpdate().updateVisibility(this.visPropCalc.visible);h.Z.exists(this.label)&&h.Z.exists(this.label.visProp)&&h.Z.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(e,t){var r;if(e=e.toLocaleLowerCase(),this.visProp.hasOwnProperty(e)&&e.indexOf("color")>=0&&h.Z.isString(t)&&9===t.length&&"#"===t.charAt(0))t=c.Z.rgba2rgbo(t),this.visProp[e]=t[0],this.visProp[e.replace("color","opacity")]=t[1];else if(null!==t&&h.Z.isObject(t)&&!h.Z.exists(t.id)&&!h.Z.exists(t.name))for(r in this.visProp[e]={},t)t.hasOwnProperty(r)&&(this.visProp[e][r.toLocaleLowerCase()]=t[r]);else this.visProp[e]=t},resolveShortcuts:function(e){var t,r,i,n=["traceattributes","traceAttributes"];for(t in u.Z.shortcuts)if(u.Z.shortcuts.hasOwnProperty(t)){if(h.Z.exists(e[t]))for(r=0;r<u.Z.shortcuts[t].length;r++)h.Z.exists(e[u.Z.shortcuts[t][r]])||(e[u.Z.shortcuts[t][r]]=e[t]);for(i=0;i<n.length;i++)h.Z.isObject(e[n[i]])&&(e[n[i]]=this.resolveShortcuts(e[n[i]]))}return e},setLabel:function(e){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(e)},setLabelText:function(e){return h.Z.exists(this.label)&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(e)),this},setName:function(e){e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(e),this.setAttribute({name:e})},setProperty:function(){i.Z.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(e){var t,r,o,s,a,u,l,d,p,f={};for(t=0;t<arguments.length;t++)u=arguments[t],h.Z.isString(u)?(d=u.split(":"),f[h.Z.trim(d[0])]=h.Z.trim(d[1])):h.Z.isArray(u)?f[u[0]]=u[1]:i.Z.extend(f,u);for(t in f=this.resolveShortcuts(f))if(f.hasOwnProperty(t)){if(s=t.replace(/\s+/g,"").toLowerCase(),a=f[t],h.Z.isObject(a)&&h.Z.exists(this.visProp[s])){if(this.visProp[s]=h.Z.merge(this.visProp[s],a),this.type===n.Z.OBJECT_TYPE_TICKS&&h.Z.exists(this.labels))for(r=0,o=this.labels.length;r<o;r++)this.labels[r].setAttribute(a);else if(h.Z.exists(this[s])){if(h.Z.isArray(this[s]))for(r=0;r<this[s].length;r++)this[s][r].setAttribute(a);else this[s].setAttribute(a)}continue}switch(p=this.visProp[s],s){case"name":p=this.name,delete this.board.elementsByName[this.name],this.name=a,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===a||!1===a),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":l=(a=c.Z.rgba2rgbo(a))[1],a=a[0],0===l&&h.Z.exists(this.label)&&this.hasLabel&&this.label.hideElement(),h.Z.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=a,this.board.renderer.setObjectStrokeColor(this.label,a,l)),this.elementClass===n.Z.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=a,this.visProp.strokeopacity=l,this.board.renderer.setObjectStrokeColor(this,a,l));break;case"infoboxtext":h.Z.isString(a)?this.infoboxText=a:this.infoboxText=!1;break;case"visible":"false"===a?this.visProp.visible=!1:"true"===a?this.visProp.visible=!0:this.visProp.visible=a,this.setDisplayRendNode(h.Z.evaluate(this.visProp.visible)),h.Z.evaluate(this.visProp.visible)&&h.Z.exists(this.updateSize)&&this.updateSize();break;case"face":h.Z.isPoint(this)&&(this.visProp.face=a,this.board.renderer.changePointStyle(this));break;case"trace":"false"===a||!1===a?(this.clearTrace(),this.visProp.trace=!1):"pause"===a?this.visProp.trace=!1:this.visProp.trace=!0;break;case"gradient":this.visProp.gradient=a,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":a=c.Z.rgba2rgbo(a),this.visProp.gradientsecondcolor=a[0],this.visProp.gradientsecondopacity=a[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=a,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=a,h.Z.evaluate(a)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=a;break;case"radius":(this.type===n.Z.OBJECT_TYPE_ANGLE||this.type===n.Z.OBJECT_TYPE_SECTOR)&&this.setRadius(a);break;case"rotate":(this.elementClass===n.Z.OBJECT_CLASS_TEXT&&"internal"===h.Z.evaluate(this.visProp.display)||this.type===n.Z.OBJECT_TYPE_IMAGE)&&this.addRotation(a);break;case"generatelabelvalue":this.type===n.Z.OBJECT_TYPE_TICKS&&h.Z.isFunction(a)&&(this.generateLabelValue=a);break;case"onpolygon":this.type===n.Z.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!a);break;case"disabled":h.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!a);break;case"checked":h.Z.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!a);break;case"maxlength":h.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!a);break;case"layer":this.board.renderer.setLayer(this,h.Z.evaluate(a)),this._set(s,a);break;case"tabindex":h.Z.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",a),this._set(s,a));break;default:h.Z.exists(this.visProp[s])&&(!i.Z.Validator[s]||i.Z.Validator[s]&&i.Z.Validator[s](a)||i.Z.Validator[s]&&h.Z.isFunction(a)&&i.Z.Validator[s](a()))&&(a=(!a.toLowerCase||"false"!==a.toLowerCase())&&a,this._set(s,a))}this.triggerEventHandlers(["attribute:"+s],[p,a,this])}return this.triggerEventHandlers(["attribute"],[f,this]),h.Z.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){i.Z.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(e){var t;switch(e=e.toLowerCase()){case"needsregularupdate":t=this.needsRegularUpdate;break;case"labelcolor":t=this.label.visProp.strokecolor;break;case"infoboxtext":t=this.infoboxText;break;case"withlabel":t=this.hasLabel;break;default:t=this.visProp[e]}return t},setDash:function(e){return this.setAttribute({dash:e}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new o.Z(n.Z.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new o.Z(n.Z.COORDS_BY_USER,[0,0],this.board)},setArrow:function(e,t){return this.visProp.firstarrow=e,this.visProp.lastarrow=t,t&&(this.type=n.Z.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var e=h.Z.evaluate(this.visProp.gradient);("linear"===e||"radial"===e)&&this.board.renderer.setGradient(this)},createLabel:function(){var e,t=this;return i.Z.elements.text?((e=h.Z.deepCopy(this.visProp.label,null)).id=this.id+"Label",e.isLabel=!0,e.anchor=this,e.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=i.Z.elements.text(this.board,[0,0,function(){return h.Z.isFunction(t.name)?t.name():t.name}],e),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):i.Z.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(e){return e=h.Z.def(e,!1),h.Z.evaluate(this.visProp.highlight)&&(!this.highlighted||e)&&(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var e;for(e in this.traces)this.traces.hasOwnProperty(e)&&this.board.renderer.remove(this.traces[e]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=s.Z.normalize(this.stdform),this},toJSON:function(){var e,t,r=['{"name":',this.name];for(t in r.push(', "id":'+this.id),e=[],this.visProp)this.visProp.hasOwnProperty(t)&&h.Z.exists(this.visProp[t])&&e.push('"'+t+'":'+this.visProp[t]);return r.push(', "visProp":{'+e.toString()+"}"),r.push("}"),r.join("")},addRotation:function(e){var t,r,i,o,s,a=this;return(this.elementClass===n.Z.OBJECT_CLASS_TEXT||this.type===n.Z.OBJECT_TYPE_IMAGE)&&0!==e&&(t=this.board.create("transform",[function(){return-a.X()},function(){return-a.Y()}],{type:"translate"}),r=this.board.create("transform",[function(){return a.X()},function(){return a.Y()}],{type:"translate"}),i=this.board.create("transform",[function(){return a.board.unitX/a.board.unitY},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[function(){return a.board.unitY/a.board.unitX},function(){return 1}],{type:"scale"}),s=this.board.create("transform",[function(){return h.Z.evaluate(e)*Math.PI/180}],{type:"rotate"}),t.bindTo(this),i.bindTo(this),s.bindTo(this),o.bindTo(this),r.bindTo(this)),this},highlightStrokeColor:function(e){return i.Z.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:e}),this},strokeColor:function(e){return i.Z.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:e}),this},strokeWidth:function(e){return i.Z.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:e}),this},fillColor:function(e){return i.Z.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:e}),this},highlightFillColor:function(e){return i.Z.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:e}),this},labelColor:function(e){return i.Z.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:e}),this},dash:function(e){return i.Z.deprecated("dash()","setAttribute()"),this.setAttribute({dash:e}),this},visible:function(e){return i.Z.deprecated("visible()","setAttribute()"),this.setAttribute({visible:e}),this},shadow:function(e){return i.Z.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:e}),this},getType:function(){return this.elType},getParents:function(){return h.Z.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var e,t=h.Z.deepCopy(this.visProp),r=[],i=r.length;for(e=0,t.id=this.id,t.name=this.name;e<i;e++)delete t[r[e]];return t},hasPoint:function(e,t){return!1},addTicks:function(e){return""!==e.id&&h.Z.exists(e.id)||(e.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(e),this.ticks.push(e),e.id},removeAllTicks:function(){var e;if(h.Z.exists(this.ticks)){for(e=this.ticks.length-1;e>=0;e--)this.removeTicks(this.ticks[e]);this.ticks=[],this.board.update()}},removeTicks:function(e){var t,r;if(h.Z.exists(this.defaultTicks)&&this.defaultTicks===e&&(this.defaultTicks=null),h.Z.exists(this.ticks)){for(t=this.ticks.length-1;t>=0;t--)if(this.ticks[t]===e){if(this.board.removeObject(this.ticks[t]),this.ticks[t].ticks)for(r=0;r<this.ticks[t].ticks.length;r++)h.Z.exists(this.ticks[t].labels[r])&&this.board.removeObject(this.ticks[t].labels[r]);delete this.ticks[t];break}}},getSnapSizes:function(){var e,t,r;return e=h.Z.evaluate(this.visProp.snapsizex),t=h.Z.evaluate(this.visProp.snapsizey),e<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(e=(r=this.board.defaultAxes.x.defaultTicks).ticksDelta*(h.Z.evaluate(r.visProp.minorticks)+1)),t<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(t=(r=this.board.defaultAxes.y.defaultTicks).ticksDelta*(h.Z.evaluate(r.visProp.minorticks)+1)),[e,t]},handleSnapToGrid:function(e,t){var r,o,s,a,u,l,c,d,p,f,m,v=h.Z.evaluate(this.visProp.attracttogrid),g=h.Z.evaluate(this.visProp.attractorunit),b=h.Z.evaluate(this.visProp.attractordistance);return!h.Z.exists(this.coords)||h.Z.evaluate(this.visProp.fixed)||(h.Z.evaluate(this.visProp.snaptogrid)||v||!0===e)&&(r=this.coords.usrCoords[1],o=this.coords.usrCoords[2],f=(p=this.getSnapSizes())[0],m=p[1],f>0&&m>0&&(d=this.board.getBoundingBox(),s=Math.round(r/f)*f,a=Math.round(o/m)*m,u=new i.Z.Coords(n.Z.COORDS_BY_USER,[s,a],this.board),(!v||u.distance("screen"===g?n.Z.COORDS_BY_SCREEN:n.Z.COORDS_BY_USER,this.coords)<b)&&(r=s,o=a,!t&&(l=Math.min(d[0],d[2]),c=Math.max(d[0],d[2]),r<l&&r>l-f?r+=f:r>c&&r<c+f&&(r-=f),l=Math.min(d[1],d[3]),c=Math.max(d[1],d[3]),o<l&&o>l-m?o+=m:o>c&&o<c+m&&(o-=m)),this.coords.setCoordinates(n.Z.COORDS_BY_USER,[r,o])))),this},getBoundingBox:function(){var e,t,r,i,o,s=[1/0,1/0,-1/0,-1/0];if(this.type===n.Z.OBJECT_TYPE_POLYGON){if((t=this.vertices.length-1)<=0)return s;for(e=0;e<t;e++)r=this.vertices[e].X(),s[0]=r<s[0]?r:s[0],s[2]=r>s[2]?r:s[2],r=this.vertices[e].Y(),s[1]=r<s[1]?r:s[1],s[3]=r>s[3]?r:s[3]}else if(this.elementClass===n.Z.OBJECT_CLASS_CIRCLE)i=this.center.X(),o=this.center.Y(),s=[i-this.radius,o+this.radius,i+this.radius,o-this.radius];else if(this.elementClass===n.Z.OBJECT_CLASS_CURVE){if(0===(t=this.vertices.length))return s;for(e=0;e<t;e++)r=this.points[e].coords.usrCoords[1],s[0]=r<s[0]?r:s[0],s[2]=r>s[2]?r:s[2],r=this.points[e].coords.usrCoords[1],s[1]=r<s[1]?r:s[1],s[3]=r>s[3]?r:s[3]}return s},addEvent:i.Z.shortcut(i.Z.GeometryElement.prototype,"on"),removeEvent:i.Z.shortcut(i.Z.GeometryElement.prototype,"off"),formatNumberLocale:function(e,t){var r,i,n,o={},s={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(h.Z.exists(Intl)&&this.useLocale()){for(n in r=h.Z.evaluate(this.visProp.intl.locale)||h.Z.evaluate(this.board.attr.intl.locale),i=h.Z.evaluate(this.visProp.intl.options)||{})i.hasOwnProperty(n)&&(s.hasOwnProperty(n)?o[s[n]]=h.Z.evaluate(i[n]):o[n]=h.Z.evaluate(i[n]));return n="maximumfractiondigits",h.Z.exists(i[n])||(o[s[n]]=t),Intl.NumberFormat(r,o).format(e)}return e},useLocale:function(){var e;return!!(h.Z.exists(this.visProp.intl)&&h.Z.exists(this.visProp.intl.enabled))&&(!0===(e=h.Z.evaluate(this.visProp.intl.enabled))||"inherit"===e&&!0===h.Z.evaluate(this.board.attr.intl.enabled))},__evt__over:function(e){},__evt__mouseover:function(e){},__evt__out:function(e){},__evt__mouseout:function(e){},__evt__move:function(e){},__evt__mousemove:function(e){},__evt__drag:function(e){},__evt__mousedrag:function(e){},__evt__pendrag:function(e){},__evt__touchdrag:function(e){},__evt__keydrag:function(e){},__evt__down:function(e){},__evt__mousedown:function(e){},__evt__pendown:function(e){},__evt__touchdown:function(e){},__evt__up:function(e){},__evt__mouseup:function(e){},__evt__penup:function(e){},__evt__touchup:function(e){},__evt__attribute:function(e,t){},__evt__attribute_:function(e,t,r){},__evt:function(){}}),t.Z=i.Z.GeometryElement},58:function(e,t,r){"use strict";var i=r(7901),n=r(2840),o=r(3154),s=r(2137),a=r(4735),u=r(1013),l=r(4204),c=r(7158),h={HTMLSliderInputEventHandler:function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()}};i.Z.Text=function(e,t,r,i){var o;this.constructor(e,r,n.Z.OBJECT_TYPE_TEXT,n.Z.OBJECT_CLASS_TEXT),this.element=this.board.select(r.anchor),this.coordsConstructor(t,u.Z.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),o=this.visProp.visible,this.visProp.visible=!0,this.setText(i),this.visProp.visible=o,u.Z.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=u.Z.deepCopy(this.methodMap,{setText:"setTextJessieCode"})},i.Z.Text.prototype=new o.Z,u.Z.copyPrototypeMethods(i.Z.Text,c.Z,"coordsConstructor"),i.Z.extend(i.Z.Text.prototype,{hasPoint:function(e,t){var r,i,n,o,s,a,c,h;return(u.Z.isObject(u.Z.evaluate(this.visProp.precision))?(c=this.board._inputDevice,h=u.Z.evaluate(this.visProp.precision[c])):h=this.board.options.precision.hasPoint,this.transformations.length>0&&(e=(r=l.Z.matVecMult(l.Z.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,e,t]))[1],t=r[2]),i=(r="right"===(s=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===s?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],n=(o="top"===(a=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===a?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===u.Z.evaluate(this.visProp.dragarea))?e>=r-h&&e<i+h&&t>=n-h&&t<=o+h:t>=n-h&&t<=o+h&&(e>=r-h&&e<=r+2*h||e>=i-2*h&&e<=i+h)},_createFctUpdateText:function(e){var t,r,i,n,o,s,a=u.Z.evaluate(this.visProp.parse),l=u.Z.evaluate(this.visProp.usemathjax),c=u.Z.evaluate(this.visProp.usekatex),h=!1;if(this.orgText=e,u.Z.isFunction(e))this.updateText=function(){n=e().toString(),!a||l||c?this.plaintext=n:this.plaintext=this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(n,!1)))};else if(u.Z.isNumber(e)?(i=u.Z.evaluate(this.visProp.digits),this.useLocale()?this.content=this.formatNumberLocale(e,i):this.content=u.Z.toFixed(e,i)):u.Z.isString(e)&&a?(u.Z.evaluate(this.visProp.useasciimathml)?this.content="'`"+e+"`'":l||c?(this.content=this.valueTagToJessieCode(e),u.Z.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(e)),h=!0):this.content=e,h){if(u.Z.isArray(this.content)){for(o=0,s=this;o<this.content.length;o++)if('"'!==this.content[o][0])for(r in this.content[o]=this.board.jc.snippet(this.content[o],!0,"",!1),this.content[o].deps)this.addParents(this.content[o].deps[r]),this.content[o].deps[r].addChild(this);t=function(){var e,t,r=u.Z.evaluate(s.visProp.digits),i="";for(e=0;e<s.content.length;e++)u.Z.isFunction(s.content[e])?(t=s.content[e](),t=s.useLocale()?s.formatNumberLocale(t,r):u.Z.toFixed(t,r)):'"'===(t=s.content[e]).at(0)&&'"'===t.at(-1)&&(t=t.slice(1,-1)),i+=t;return i}}else for(r in(t=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(t.deps[r]),t.deps[r].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(t())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(e){return this._createFctUpdateText(e),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(e){var t;return this.visProp.castext=e,t=u.Z.isFunction(e)?function(){return u.Z.sanitizeHTML(e())}:u.Z.isNumber(e)?e:u.Z.sanitizeHTML(e),this._setText(t)},setText:function(e){return this._setText(e)},updateSize:function(){var e,t,r,i=u.Z.evaluate(this.visProp.display);return a.Z.isBrowser&&"no"!==this.board.renderer.type&&(r=this.rendNode,"html"===i||"vml"===this.board.renderer.type?u.Z.exists(r.offsetWidth)?(t=this,window.setTimeout(function(){t.size=[r.offsetWidth,r.offsetHeight],t.needsUpdate=!0,t.updateRenderer()},0)):this.size=this.crudeSizeEstimate():"internal"===i&&("svg"===this.board.renderer.type?(t=this,window.setTimeout(function(){try{e=r.getBBox(),t.size=[e.width,e.height],t.needsUpdate=!0,t.updateRenderer()}catch(e){}},0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate()))),this},crudeSizeEstimate:function(){var e=parseFloat(u.Z.evaluate(this.visProp.fontsize));return[e*this.plaintext.length*.45,.9*e]},utf8_decode:function(e){return e.replace(/&#x(\w+);/g,function(e,t){return String.fromCharCode(parseInt(t,16))})},replaceSub:function(e){if(!e.indexOf)return e;for(var t,r=e.indexOf("_{");r>=0;)(t=(e=e.slice(0,r)+e.slice(r).replace(/_\{/,"<sub>")).indexOf("}",r+4))>=0&&(e=e.slice(0,t)+e.slice(t).replace(/\}/,"</sub>")),r=e.indexOf("_{");for(r=e.indexOf("_");r>=0;)r=(e=e.slice(0,r)+e.slice(r).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return e},replaceSup:function(e){if(!e.indexOf)return e;for(var t,r=e.indexOf("^{");r>=0;)(t=(e=e.slice(0,r)+e.slice(r).replace(/\^\{/,"<sup>")).indexOf("}",r+4))>=0&&(e=e.slice(0,t)+e.slice(t).replace(/\}/,"</sup>")),r=e.indexOf("^{");for(r=e.indexOf("^");r>=0;)r=(e=e.slice(0,r)+e.slice(r).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return e},getSize:function(){return this.size},setCoords:function(e,t){var r,i,o;return u.Z.isArray(e)&&e.length>1&&(t=e[1],e=e[0]),u.Z.evaluate(this.visProp.islabel)&&u.Z.exists(this.element)?(i=(e-(r=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,o=-(t-r.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(n.Z.COORDS_BY_SCREEN,[i,o])):this.coords.setCoordinates(n.Z.COORDS_BY_USER,[e,t]),this.fullUpdate(),this},update:function(e){return this.needsUpdate&&(this.updateCoords(e),this.updateText(),"internal"===u.Z.evaluate(this.visProp.display)&&u.Z.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize()),this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return u.Z.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(e){return e.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(e,t,r){var i,n,o,a,l='""';if(o=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),a=e.indexOf("</value>"),o>=0)for(;o>=0;)l+=' + "'+this.replaceSub(this.replaceSup(e.slice(0,o)))+'"',n=(n=e.slice(o+7,a)).replace(/\s+/g,""),!0===t&&(n=this.expandShortMath(n)),0>(i=(i=(i=r?n:s.Z.geonext2JS(n,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")&&u.Z.isNumber(u.Z.bind(this.board.jc.snippet(i,!0,"",!1),this)())?l+="+("+i+").toFixed("+u.Z.evaluate(this.visProp.digits)+")":l+="+("+i+")",o=(e=e.slice(a+8)).indexOf("<value>"),a=e.indexOf("</value>");return l+=' + "'+this.replaceSub(this.replaceSup(e))+'"',l=(l=(l=this.convertGeonextAndSketchometry2CSS(l)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(e){var t,r,i,n,o=[];if(i=(e=(e=(e=(e=(e=e||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),n=e.indexOf("</value>"),i>=0)for(;i>=0;)o.push('"'+this.escapeTicks(e.slice(0,i))+'"'),r=(r=e.slice(i+7,n)).replace(/\s+/g,""),t=(t=r=this.expandShortMath(r)).replace(/\\"/g,"'").replace(/\\'/g,"'"),o.push("("+t+")"),i=(e=e.slice(n+8)).indexOf("<value>"),n=e.indexOf("</value>");for(o.push('"'+this.escapeTicks(e)+'"'),i=0;i<o.length;i++)o[i]=o[i].replace(/&amp;/g,"&");return o},poorMansTeX:function(e){var t,r;if(u.Z.isArray(e)){for(t=0,r=[];t<e.length;t++)r.push(this.poorMansTeX(e[t]));return r}return e=e.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(e)),!0)},escapeTicks:function(e){return e.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(e){return e.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(e){return u.Z.isString(e)&&(e=(e=(e=(e=e.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),e},convertSketchometry2CSS:function(e,t){var r='<span class="sketcho sketcho-inherit sketcho-',i='"></span>';return u.Z.isString(e)&&(t&&(r=this.escapeTicks(r),i=this.escapeTicks(i)),e=(e=e.replace(/(<|&lt;)sketchofont(>|&gt;)/g,r)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,i)),e},convertGeonextAndSketchometry2CSS:function(e,t){return e=this.convertGeonext2CSS(e),e=this.convertSketchometry2CSS(e,t)},notifyParents:function(e){var t,r=null;e=(e=e.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do null!==(r=(t=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(e))&&(s.Z.findDependencies(this,r[1],this.board),e=(e=e.slice(r.index)).replace(t,""));while(null!==r);return this},getParents:function(){var e;return e=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(e=this.parents),e},bounds:function(){var e=this.coords.usrCoords;return u.Z.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[e[1],e[2]+this.size[1]/this.board.unitY,e[1]+this.size[0]/this.board.unitX,e[2]]},getAnchorX:function(){var e=u.Z.evaluate(this.visProp.anchorx);if("auto"===e)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return e},getAnchorY:function(){var e=u.Z.evaluate(this.visProp.anchory);if("auto"===e)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return e},getNumberOfConflicts:function(e,t,r,i){var n,o,s,a,u=0;for(n=0,a=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=(r+i)*.25,s=this.board.objectsList.length;n<s;n++)(o=this.board.objectsList[n]).visPropCalc.visible&&"axis"!==o.elType&&"ticks"!==o.elType&&o!==this.board.infobox&&o!==this&&o.hasPoint(e,t)&&u++;return this.board.options.precision.hasPoint=a,u},setAutoPosition:function(){var e,t,r,i,n,o,s,a,l,c,h,d,p,f,m,v,g,b=this.size[0],y=this.size[1],x={conflicts:1/0,angle:0,r:0},C=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!u.Z.evaluate(this.visProp.islabel)||!this.element||(h=u.Z.evaluate(this.visProp.offset),r=(n=this.element.getLabelAnchor()).scrCoords[1],i=n.scrCoords[2],f=h[0],m=h[1],0===(c=this.getNumberOfConflicts(r+f,i-m,b,y))))return this;for(d=u.Z.evaluate(this.visProp.autopositionmindistance),a=u.Z.evaluate(this.visProp.autopositionmaxdistance),l=.2*d,o=Math.atan2(m,f),x.conflicts=c,x.angle=o,x.r=d;x.conflicts>0&&d<=a;){for(p=1,s=o+C;p<12&&x.conflicts>0&&(v=Math.cos(s),g=Math.sin(s),e=r+d*v,t=i-d*g,(c=this.getNumberOfConflicts(e,t,b,y))<x.conflicts&&(x.conflicts=c,x.angle=s,x.r=d),0!==x.conflicts);p++)s+=C;d+=l}return d=x.r,v=Math.cos(x.angle),g=Math.sin(x.angle),this.visProp.offset=[d*v,d*g],v<-.2?this.visProp.anchorx="right":v>.2?this.visProp.anchorx="left":this.visProp.anchorx="middle",this}}),i.Z.createText=function(e,t,r){var n,o=u.Z.copyAttributes(r,e.options,"text"),s=t.slice(0,-1),a=t[t.length-1];if(o.anchor=o.parent||o.anchor,!(n=c.Z.create(i.Z.Text,e,s,o,a)))throw Error("JSXGraph: Can't create text with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==o.rotate&&n.addRotation(o.rotate),n},i.Z.registerElement("text",i.Z.createText),i.Z.createHTMLSlider=function(e,t,r){var n,o,s=u.Z.copyAttributes(r,e.options,"htmlslider");if(2!==t.length||2!==t[0].length||3!==t[1].length)throw Error("JSXGraph: Can't create htmlslider with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");s.anchor=s.parent||s.anchor,s.fixed=s.fixed||!0,o=[t[0][0],t[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(n=i.Z.createText(e,o,s)).type=u.Z.OBJECT_TYPE_HTMLSLIDER,n.rendNodeForm=n.rendNode.childNodes[0],n.rendNodeRange=n.rendNodeForm.childNodes[0],n.rendNodeRange.min=t[1][0],n.rendNodeRange.max=t[1][2],n.rendNodeRange.step=s.step,n.rendNodeRange.value=t[1][1],n.rendNodeLabel=n.rendNodeForm.childNodes[1],n.rendNodeLabel.id=n.rendNode.id+"_label",s.withlabel&&(n.rendNodeLabel.innerHTML=n.name+"="),n.rendNodeOut=n.rendNodeForm.childNodes[2],n.rendNodeOut.value=t[1][1];try{n.rendNodeForm.id=n.rendNode.id+"_form",n.rendNodeRange.id=n.rendNode.id+"_range",n.rendNodeOut.id=n.rendNode.id+"_out"}catch(e){i.Z.debug(e)}return n.rendNodeRange.style.width=s.widthrange+"px",n.rendNodeRange.style.verticalAlign="middle",n.rendNodeOut.style.width=s.widthout+"px",n._val=t[1][1],i.Z.supportsVML()?a.Z.addEvent(n.rendNodeForm,"change",h.HTMLSliderInputEventHandler,n):a.Z.addEvent(n.rendNodeForm,"input",h.HTMLSliderInputEventHandler,n),n.Value=function(){return this._val},n},i.Z.registerElement("htmlslider",i.Z.createHTMLSlider),t.Z=i.Z.Text},6205:function(e,t,r){"use strict";r.d(t,{kC:function(){return er},ZP:function(){return ei}});var i,n=r(7901),o=r(4735),s=r(2840),a=r(1013);n.Z.XML={cleanWhitespace:function(e){for(var t=e.firstChild;a.Z.exists(t);)3!==t.nodeType||/\S/.test(t.nodeValue)?1===t.nodeType&&this.cleanWhitespace(t):e.removeChild(t),t=t.nextSibling},parse:function(e){var t;return t=new("function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(e){var t;return"function"==typeof ActiveXObject&&(t=new ActiveXObject("MSXML.DomDocument")).loadXML(e),t}})().parseFromString(e,"text/xml"),this.cleanWhitespace(t),t}},n.Z.XML,r(6638),r(2285);var u=r(4204);u.Z.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(e,t){var r,i,n,o;return(e=Math.abs(e),t<0&&(e=-e),n=this.MINV*Math.floor(this.M*e+.5),o=e-n,r=n*n,i=2*n*o+o*o,t<0&&(r=-r,i=-i),r+i>this.MAXLOG)?1/0:r=Math.exp(r)*Math.exp(i)},polevl:function(e,t,r){var i,n;if(a.Z.exists(t.reduce))return t.reduce(function(t,r){return t*e+r},0);for(n=0,i=0;n<=r;n++)i=i*e+t[n];return i},p1evl:function(e,t,r){var i,n;if(a.Z.exists(t.reduce))return t.reduce(function(t,r){return t*e+r},1);for(n=0,i=1;n<r;n++)i=i*e+t[n];return i},ndtr:function(e){var t,r,i;return(i=Math.abs(t=e*this.SQRTH))<1?r=.5+.5*this.erf(t):(r=.5*this.erfce(i)*Math.sqrt(i=this.expx2(e,-1)),t>0&&(r=1-r)),r},_underflow:function(e){return(console.log("erfc","UNDERFLOW"),e<0)?2:0},erfc:function(e){var t,r,i,n,o;return(i=e<0?-e:e)<1?1-this.erf(e):(o=-e*e)<-this.MAXLOG?this._underflow(e):(o=this.expx2(e,-1),i<8?(t=this.polevl(i,this.P,8),r=this.p1evl(i,this.Q,8)):(t=this.polevl(i,this.R,5),r=this.p1evl(i,this.S,6)),n=o*t/r,e<0&&(n=2-n),0===n)?this._underflow(e):n},erfce:function(e){var t,r;return e<8?(t=this.polevl(e,this.P,8),r=this.p1evl(e,this.Q,8)):(t=this.polevl(e,this.R,5),r=this.p1evl(e,this.S,6)),t/r},erf:function(e){var t;return Math.abs(e)>1?1-this.erfc(e):(t=e*e,e*this.polevl(t,this.T,4)/this.p1evl(t,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,30158155350823543e-20,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,32801446468212774e-20,28924786474538068e-22,6790194080099813e-24],ndtri:function(e){var t,r,i,n,o,s;return e<=0?-1/0:e>=1?1/0:(s=1,(r=e)>.8646647167633873&&(r=1-r,s=0),r>.1353352832366127)?(r-=.5,n=r*r,t=(r+n*this.polevl(n,this.P0,4)/this.p1evl(n,this.Q0,8)*r)*this.s2pi):(o=(t=Math.sqrt(-2*Math.log(r)))-Math.log(t)/t,i=1/t,t=o-(t<8?i*this.polevl(i,this.P1,8)/this.p1evl(i,this.Q1,8):i*this.polevl(i,this.P2,8)/this.p1evl(i,this.Q2,8)),0!==s&&(t=-t),t)},erfi:function(e){return this.ndtri((e+1)*.5)*this.SQRTH}},u.Z.ProbFuncs;var l=r(9641);u.Z.Extrapolate={upper:15,infty:1e4,wynnEps:function(e,t,r){var i,n,o,s,a;if(r[t]=e,0===t)a=e;else{for(o=0,i=t;i>0;i--)n=o,o=r[i-1],1e-15>=Math.abs(s=r[i]-o)?r[i-1]=1e20:r[i-1]=1*n+1/s;a=r[t%2]}return a},aitken:function(e,t,r){var i,n,o,s,a,u;if(r[t]=e,t<2)i=e;else{for(a=1,s=t/2;a<=s;a++)1e-15>Math.abs(n=r[(u=t-2*a)+2]-2*r[u+1]+r[u])?r[u]=1e20:(o=r[u]-r[u+1],r[u]-=o*o/n);i=r[t%2]}return i},brezinski:function(e,t,r){var i,n,o,s,a,u,l,c;if(r[t]=e,t<3)i=e;else{for(l=1,u=t/3,c=t;l<=u;l++)c-=3,o=r[c+1]-r[c],s=r[c+2]-r[c+1],1e-15>Math.abs(n=(a=r[c+3]-r[c+2])*(s-o)-o*(a-s))?r[c]=1e20:r[c]=r[c+1]-o*s*(a-s)/n;i=r[t%3]}return i},iteration:function(e,t,r,i,n){var o,s,a,u=NaN,l=[],c="finite",h=t;for(o=1,n=n||0;o<=this.upper;o++){if(s=r(e+(h=0===n?t/(o+1):.5*h),!0),isNaN(a=this[i](s,o-1,l))){c="NaN";break}if(0!==s&&a/s>this.infty){u=a,c="infinite";break}if(1e-7>Math.abs(a-u))break;u=a}return[u,c,1-(o-1)/this.upper]},levin:function(e,t,r,i,n,o){var s,a,u,l;if(l=1/(i+t),n[t]=e/r,o[t]=1/r,t>0&&(n[t-1]=n[t]-n[t-1],o[t-1]=o[t]-o[t-1],t>1))for(s=2,u=(i+t-1)*l;s<=t;s++)a=(i+t-s)*Math.pow(u,s-2)*l,n[t-s]=n[t-s+1]-a*n[t-s],o[t-s]=o[t-s+1]-a*o[t-s],l*=u;return 1e-15>Math.abs(o[0])?1e20:n[0]/o[0]},iteration_levin:function(e,t,r,i){var n,o,s,a,u,l,c,h=NaN,d=[],p=[],f="finite",m=t;for(n=1,i=i||0,a=r(e+t,!0);n<=this.upper;n++){if(c="u"==(1>Math.abs(u=(o=r(e+(m=0===i?t/(n+1):.5*m),!0))-a)?"u":"t")?(1+n)*u:u,a=o,l=(s=this.levin(o,n-1,c,1,d,p))-h,isNaN(s)){f="NaN";break}if(0!==o&&s/o>this.infty){h=s,f="infinite";break}if(1e-7>Math.abs(l))break;h=s}return[h,f,1-(n-1)/this.upper]},limit:function(e,t,r){return this.iteration_levin(e,t,r,0)}};var c=u.Z.Extrapolate,h=r(7895);u.Z.Quadtree=function(e,t,r){t=t||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=t.capacity||10,this.config.pointType=t.pointType||"coords",this.points=[],this.xlb=e[0],this.xub=e[2],this.ylb=e[3],this.yub=e[1],this.parent=r||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},a.Z.extend(u.Z.Quadtree.prototype,{contains:function(e,t){return this.xlb<e&&e<=this.xub&&this.ylb<t&&t<=this.yub},insert:function(e){switch(this.config.pointType){case"coords":if(!this.contains(e.usrCoords[1],e.usrCoords[2]))return!1;break;case"object":if(!this.contains(e.x,e.y))return!1}return this.points.length<this.config.capacity&&null===this.northWest?(this.points.push(e),!0):(null===this.northWest&&this.subdivide(),!!(this.northWest.insert(e)||this.northEast.insert(e)||this.southEast.insert(e))||!!this.southWest.insert(e))},subdivide:function(){var e=this.xlb+(this.xub-this.xlb)*.5,t=this.ylb+(this.yub-this.ylb)*.5;this.northWest=new u.Z.Quadtree([this.xlb,this.yub,e,t],this.config,this),this.northEast=new u.Z.Quadtree([e,this.yub,this.xub,t],this.config,this),this.southEast=new u.Z.Quadtree([this.xlb,t,e,this.ylb],this.config,this),this.southWest=new u.Z.Quadtree([e,t,this.xub,this.ylb],this.config,this)},_query:function(e,t){var r;if(this.contains(e,t)){if(null===this.northWest)return this;if((r=this.northWest._query(e,t))||(r=this.northEast._query(e,t))||(r=this.southEast._query(e,t))||(r=this.southWest._query(e,t)))return r}return!1},query:function(e,t){var r,i;return a.Z.exists(t)?(r=e,i=t):(r=e.usrCoords[1],i=e.usrCoords[2]),this._query(r,i)},hasPoint:function(e,t,r){var i,n,o;if(this.contains(e,t)){switch(o=this.points.length,this.config.pointType){case"coords":for(n=0;n<o;n++)if(h.Z.distance([e,t],this.points[n].usrCoords.slice(1),2)<r)return!0;break;case"object":for(n=0;n<o;n++)if(h.Z.distance([e,t],[this.points[n].x,this.points[n].y],2)<r)return!0}if(null===this.northWest)return!1;if((i=this.northWest.hasPoint(e,t,r))||(i=this.northEast.hasPoint(e,t,r))||(i=this.southEast.hasPoint(e,t,r))||(i=this.southWest.hasPoint(e,t,r)))return i}return!1},getAllPoints:function(){var e=[];return this.getAllPointsRecursive(e),e},getAllPointsRecursive(e){Array.prototype.push.apply(e,this.points.slice()),null!==this.northWest&&(this.northWest.getAllPointsRecursive(e),this.northEast.getAllPointsRecursive(e),this.southEast.getAllPointsRecursive(e),this.southWest.getAllPointsRecursive(e))}});var d=u.Z.Quadtree;u.Z.BoxQuadtree=function(e,t,r){var i,n,o,s;e--,this.depth=e,this.capacity=t,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,r&&(i=r[0],n=r[1],o=r[2],s=r[3],this.cx=(i+o)*.5,this.cy=(n+s)*.5,this.bbox=[i,n,o,s])},a.Z.extend(u.Z.BoxQuadtree.prototype,{insert:function(e){var t,r,i,n,o,s,a,u,l,c,h,d=[],p=[],f=[],m=[];if(null===this.bbox){for(t=0,r=e.length,i=s=1/0,o=n=-1/0;t<e.length;t++)i=(a=e[t]).xlb<i?a.xlb:i,n=a.yub>n?a.yub:n,o=a.xub>o?a.xub:o,s=a.ylb<s?a.ylb:s;this.cx=(i+o)*.5,this.cy=(n+s)*.5,this.bbox=[i,n,o,s]}else i=this.bbox[0],n=this.bbox[1],o=this.bbox[2],s=this.bbox[3];if(0===this.depth||this.items.length+e.length<this.capacity)return this.items=this.items.concat(e),this;for(t=0,r=e.length;t<r;t++)u=(a=e[t]).xlb<=this.cx&&a.yub>this.cy,c=a.xlb<=this.cx&&a.ylb<=this.cy,l=a.xub>this.cx&&a.yub>this.cy,h=a.xub>this.cx&&a.ylb<=this.cy,u&&l&&h&&c?this.items.push(a):(u&&d.push(a),c&&f.push(a),l&&p.push(a),h&&m.push(a));return this.subdivide(d,f,p,m,i,n,o,s),this},insertItem:function(e){var t,r,i,n,o,s,a,u,l=[],c=[],h=[],d=[];return(null===this.bbox?(t=n=1/0,i=r=-1/0,t=e.xlb<t?e.xlb:t,r=e.yub>r?e.yub:r,i=e.xub>i?e.xub:i,n=e.ylb<n?e.ylb:n,this.cx=(t+i)*.5,this.cy=(r+n)*.5,this.bbox=[t,r,i,n]):(t=this.bbox[0],r=this.bbox[1],i=this.bbox[2],n=this.bbox[3]),0===this.depth||this.items.length+1<this.capacity)?this.items.push(e):(o=e.xlb<=this.cx&&e.yub>this.cy,a=e.xlb<=this.cx&&e.ylb<=this.cy,s=e.xub>this.cx&&e.yub>this.cy,u=e.xub>this.cx&&e.ylb<=this.cy,o&&s&&u&&a?this.items.push(e):(o&&l.push(e),a&&h.push(e),s&&c.push(e),u&&d.push(e)),this.subdivide(l,h,c,d,t,r,i,n)),this},subdivide:function(e,t,r,i,n,o,s,a){return e.length>0&&(null===this.northWest&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[n,o,this.cx,this.cy])),this.northWest.insert(e)),t.length>0&&(null===this.southWest&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[n,this.cy,this.cx,a])),this.southWest.insert(t)),r.length>0&&(null===this.northEast&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,o,s,this.cy])),this.northEast.insert(r)),i.length>0&&(null===this.southEast&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,s,a])),this.southEast.insert(i)),this},find:function(e){var t,r,i,n=[];for(r=0,i=this.items.length;r<i;r++)t=this.items[r],e[2]>=t.xlb&&e[0]<=t.xub&&e[3]<=t.yub&&e[1]>=t.ylb&&n.push(this.items[r]);return null!==this.northWest&&e[0]<=this.cx&e[1]>=this.cy&&(n=n.concat(this.northWest.find(e))),null!==this.southWest&&e[0]<=this.cx&e[3]<=this.cy&&(n=n.concat(this.southWest.find(e))),null!==this.northEast&&e[2]>=this.cx&e[1]>=this.cy&&(n=n.concat(this.northEast.find(e))),null!==this.southEast&&e[2]>=this.cx&e[3]<=this.cy&&(n=n.concat(this.southEast.find(e))),n},analyzeTree:function(){var e,t={number_items:this.items.length,depth:1};return null!==this.northWest&&(e=this.northWest.analyzeTree(),t.number_items+=e.number_items,t.depth=Math.max(t.depth,1+e.depth)),null!==this.southWest&&(e=this.southWest.analyzeTree(),t.number_items+=e.number_items,t.depth=Math.max(t.depth,1+e.depth)),null!==this.northEast&&(e=this.northEast.analyzeTree(),t.number_items+=e.number_items,t.depth=Math.max(t.depth,1+e.depth)),null!==this.southEast&&(e=this.southEast.analyzeTree(),t.number_items+=e.number_items,t.depth=Math.max(t.depth,1+e.depth)),t},plot:function(){var e,t=[],r=[];return t.push(this.bbox[0]),r.push(this.bbox[3]),t.push(this.bbox[2]),r.push(this.bbox[3]),t.push(this.bbox[2]),r.push(this.bbox[1]),t.push(this.bbox[0]),r.push(this.bbox[1]),t.push(this.bbox[0]),r.push(this.bbox[3]),t.push(NaN),r.push(NaN),null!==this.northWest&&(e=this.northWest.plot(),t=t.concat(e[0]),r=r.concat(e[1])),null!==this.northEast&&(e=this.northEast.plot(),t=t.concat(e[0]),r=r.concat(e[1])),null!==this.southEast&&(e=this.southEast.plot(),t=t.concat(e[0]),r=r.concat(e[1])),null!==this.southWest&&(e=this.southWest.plot(),t=t.concat(e[0]),r=r.concat(e[1])),[t,r]}});var p=u.Z.BoxQuadtree,f=r(6692);n.Z.Math.Nlp={arr:function(e){return new Float64Array(e)},arr2:function(e,t){for(var r=0,i=Array(e);r<e;)i[r]=this.arr(t),r++;return i},arraycopy:function(e,t,r,i,n){for(var o=0;o<n;)r[o+i]=e[o+t],o++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(e,t,r,i,n,o,s,a,u){var l,c=this.arr(t+1),h=this;return this.lastNumberOfEvaluations=0,u&&console.log("Experimental feature 'testForRoundingErrors' is activated."),c[0]=0,this.arraycopy(i,0,c,1,t),l=this.cobylb(function(t,r,i,n){var o,s,a=h.arr(t);return h.lastNumberOfEvaluations=h.lastNumberOfEvaluations+1,h.arraycopy(i,1,a,0,t),o=h.arr(r),s=e(t,r,a,o),h.arraycopy(o,0,n,1,r),s},t,r,r+2,c,n,o,s,a,u),this.arraycopy(c,1,i,0,t),l},cobylb:function(e,t,r,i,n,o,s,a,u,l){var c,h,d,p,f,m,v,g,b,y,x,C,Z,_,w,E,N,S,A,P,D,M,O,T,B,F,R,k,L,I=-1,j=0,z=0,U=t+1,Y=r+1,X=o,J=0,q=!1,G=!1,H=0,V=0,W=0,$=this.arr(1+i),Q=this.arr2(1+t,1+U),K=this.arr2(1+t,1+t),ee=this.arr2(1+i,1+U),et=this.arr2(1+t,1+Y),er=this.arr(1+t),ei=this.arr(1+t),en=this.arr(1+t),eo=this.arr(1+t),es=this.arr(1+t);for(a>=2&&console.log("The initial value of RHO is "+X+" and PARMU is set to zero."),g=0,m=1/X,h=1;h<=t;++h)Q[h][U]=n[h],Q[h][h]=X,K[h][h]=m;b=U,y=!1;e:for(;;){if(g>=u&&g>0){I=this.MaxIterationsReached;break}for(++g,j=e(t,r,n,$),z=0,p=1;p<=r;++p)z=Math.max(z,-$[p]);if((g===a-1||3===a)&&this.PrintIterationResult(g,j,z,n,t,a),$[Y]=j,$[i]=z,x=!0,!y){for(h=1,x=!1;h<=i;++h)ee[h][b]=$[h];if(g<=U){if(b<=t){if(ee[Y][U]<=j)n[b]=Q[b][U];else{for(p=1,Q[b][U]=n[b];p<=i;++p)ee[p][b]=ee[p][U],ee[p][U]=$[p];for(p=1;p<=b;++p){for(Q[b][p]=-X,m=0,h=p;h<=b;++h)m-=K[h][p];K[b][p]=m}}}if(g<=t){b=g,n[b]+=X;continue}}y=!0}t:for(;;){do{if(!x){for(d=1,C=ee[Y][U]+J*ee[i][U],Z=U;d<=t;++d)(m=ee[Y][d]+J*ee[i][d])<C?(Z=d,C=m):m===C&&0===J&&ee[i][d]<ee[i][Z]&&(Z=d);if(Z<=t){for(h=1;h<=i;++h)m=ee[h][U],ee[h][U]=ee[h][Z],ee[h][Z]=m;for(h=1;h<=t;++h){for(m=Q[h][Z],Q[h][Z]=0,Q[h][U]+=m,v=0,p=1;p<=t;++p)Q[h][p]-=m,v-=K[p][h];K[Z][h]=v}}if(_=0,l)for(h=1;h<=t;++h)for(d=1;d<=t;++d)_=Math.max(_,Math.abs(m=this.DOT_PRODUCT_ROW_COL(K,h,Q,d,1,t)-(h===d?1:0)));if(_>.1){I=this.DivergingRoundingErrors;break e}for(p=1;p<=Y;++p){for(d=1,$[p]=-ee[p][U];d<=t;++d)es[d]=ee[p][d]+$[p];for(h=1;h<=t;++h)et[h][p]=(p===Y?-1:1)*this.DOT_PRODUCT_ROW_COL(es,-1,K,h,1,t)}for(d=1,q=!0,H=.25*X,w=2.1*X;d<=t;++d){for(p=1,E=0,N=0;p<=t;++p)E+=K[d][p]*K[d][p],N+=Q[p][d]*Q[p][d];er[d]=1/Math.sqrt(E),ei[d]=Math.sqrt(N),(er[d]<H||ei[d]>w)&&(q=!1)}if(!y&&!q){for(d=1,b=0,m=w;d<=t;++d)ei[d]>m&&(b=d,m=ei[d]);if(0===b)for(d=1;d<=t;++d)er[d]<m&&(b=d,m=er[d]);for(p=1,m=.5*X*er[b];p<=t;++p)eo[p]=m*K[b][p];for(p=1,S=0,A=0,c=0;p<=Y;++p)c=this.DOT_PRODUCT_ROW_COL(eo,-1,et,p,1,t),p<Y&&(S=Math.max(S,-c-(m=ee[p][U])),A=Math.max(A,c-m));for(h=1,P=J*(S-A)>2*c?-1:1,m=0;h<=t;++h)eo[h]=P*eo[h],Q[h][b]=eo[h],m+=K[b][h]*eo[h];for(p=1;p<=t;++p)K[b][p]/=m;for(d=1;d<=t;++d){if(d!==b)for(p=1,m=this.DOT_PRODUCT_ROW_COL(K,d,eo,-1,1,t);p<=t;++p)K[d][p]-=m*K[b][p];n[d]=Q[d][U]+eo[d]}continue e}if(!(G=this.trstlp(t,r,et,$,X,eo))){for(p=1,m=0;p<=t;++p)m+=eo[p]*eo[p];if(m<.25*X*X){y=!0;break}}for(p=1,c=0,D=0,$[Y]=0;p<=Y;++p)c=$[p]-this.DOT_PRODUCT_ROW_COL(eo,-1,et,p,1,t),p<Y&&(D=Math.max(D,c));if(J<1.5*(M=(V=ee[i][U]-D)>0?c/V:0)){for(J=2*M,a>=2&&console.log("Increase in PARMU to "+J),O=ee[Y][U]+J*ee[i][U],d=1;d<=t;++d)if((m=ee[Y][d]+J*ee[i][d])<O||m===O&&0===J&&ee[i][d]<ee[i][U])continue t}for(p=1,W=J*V-c;p<=t;++p)n[p]=Q[p][U]+eo[p];y=!0;continue e}for(x=!1,T=ee[Y][U]+J*ee[i][U]-(j+J*z),0===J&&j===ee[Y][U]&&(W=V,T=ee[i][U]-z),B=T<=0?1:0,b=0,d=1;d<=t;++d)(m=Math.abs(this.DOT_PRODUCT_ROW_COL(K,d,eo,-1,1,t)))>B&&(b=d,B=m),en[d]=m*er[d];for(d=1,F=1.1*X,f=0;d<=t;++d)if(en[d]>=H||en[d]>=er[d]){if(m=ei[d],T>0){for(p=1,m=0;p<=t;++p)m+=Math.pow(eo[p]-Q[p][d],2);m=Math.sqrt(m)}m>F&&(f=d,F=m)}if(f>0&&(b=f),0!==b){for(h=1,m=0;h<=t;++h)Q[h][b]=eo[h],m+=K[b][h]*eo[h];for(p=1;p<=t;++p)K[b][p]/=m;for(d=1;d<=t;++d)if(d!==b)for(p=1,m=this.DOT_PRODUCT_ROW_COL(K,d,eo,-1,1,t);p<=t;++p)K[d][p]-=m*K[b][p];for(p=1;p<=i;++p)ee[p][b]=$[p];if(T>0&&T>=.1*W)continue t}}while(!1);if(!q){y=!1;continue}if(X<=s){I=this.Normal;break e}if(R=0,k=0,(X*=.5)<=1.5*s&&(X=s),J>0){for(p=1,L=0;p<=Y;++p){for(h=1,k=R=ee[p][U];h<=t;++h)R=Math.min(R,ee[p][h]),k=Math.max(k,ee[p][h]);p<=r&&R<.5*k&&(m=Math.max(k,0)-R,L=L<=0?m:Math.min(L,m))}0===L?J=0:k-R<J*L&&(J=(k-R)/L)}a>=2&&console.log("Reduction in RHO to "+X+"  and PARMU = "+J),2===a&&this.PrintIterationResult(g,ee[Y][U],ee[i][U],this.COL(Q,U),t,a)}}switch(I){case this.Normal:if(a>=1&&console.log("%nNormal return from subroutine COBYLA%n"),G)return a>=1&&this.PrintIterationResult(g,j,z,n,t,a),I;break;case this.MaxIterationsReached:a>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:a>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(p=1;p<=t;++p)n[p]=Q[p][U];return j=ee[Y][U],z=ee[i][U],a>=1&&this.PrintIterationResult(g,j,z,n,t,a),I},trstlp:function(e,t,r,i,n,o){var s,a,l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_,w,E,N,S,A,P,D,M,O,T,B,F,R,k,L,I,j,z=0,U=0,Y=0,X=this.arr2(1+e,1+e),J=this.arr(2+t),q=this.arr(2+t),G=this.arr(1+e),H=this.arr(1+e),V=this.arr(2+t),W=this.arr(2+t),$=t,Q=0;for(l=1;l<=e;++l)X[l][l]=1,o[l]=0;if(s=0,a=0,t>=1){for(c=1;c<=t;++c)i[c]>a&&(a=i[c],s=c);for(c=1;c<=t;++c)W[c]=c,q[c]=a-i[c]}h=!0;do r:for(;;){(!h||h&&0===a)&&(s=$=t+1,W[$]=$,q[$]=0),h=!1,d=0,p=0,f=0,m=0;do{if(v=$===t?a:-this.DOT_PRODUCT_ROW_COL(o,-1,r,$,1,e),0===p||v<d?(d=v,U=Q,p=3):Q>U?(U=Q,p=3):--p,0===p)break r;if(g=0,s<=Q){if(s<Q){b=W[s],y=q[s],c=s;do{for(l=1,Z=W[C=c+1],_=this.DOT_PRODUCT(this.PART(this.COL(X,c),1,e),this.PART(this.COL(r,Z),1,e)),z=u.Z.hypot(_,J[C]),w=J[C]/z,E=_/z,J[C]=w*J[c],J[c]=z;l<=e;++l)z=w*X[l][C]+E*X[l][c],X[l][C]=w*X[l][c]-E*X[l][C],X[l][c]=z;W[c]=Z,q[c]=q[C],c=C}while(c<Q);W[c]=b,q[c]=y}if(--Q,$>t)for(c=1,z=1/J[Q];c<=e;++c)G[c]=z*X[c][Q];else for(c=1,z=this.DOT_PRODUCT_ROW_COL(G,-1,X,Q+1,1,e);c<=e;++c)G[c]-=z*X[c][Q+1]}else{for(c=1,Z=W[s];c<=e;++c)H[c]=r[c][Z];for(N=0,c=e;c>Q;){for(l=1,_=0,S=0;l<=e;++l)_+=z=X[l][c]*H[l],S+=Math.abs(z);if(A=S+.1*Math.abs(_),P=S+.2*Math.abs(_),(S>=A||A>=P)&&(_=0),0===N)N=_;else for(l=1,C=c+1,z=u.Z.hypot(_,N),w=_/z,E=N/z,N=z;l<=e;++l)z=w*X[l][c]+E*X[l][C],X[l][C]=w*X[l][C]-E*X[l][c],X[l][c]=z;--c}if(0===N){g=-1,c=Q;do{for(l=1,D=0,M=0;l<=e;++l)D+=z=X[l][c]*H[l],M+=Math.abs(z);if(A=M+.1*Math.abs(D),P=M+.2*Math.abs(D),M<A&&A<P){if((z=D/J[c])>0&&W[c]<=t&&(j=q[c]/z,(g<0||j<g)&&(g=j)),c>=2)for(l=1,O=W[c];l<=e;++l)H[l]-=z*r[l][O];V[c]=z}else V[c]=0}while(--c>0);if(g<0)break r;for(c=1;c<=Q;++c)q[c]=Math.max(0,q[c]-g*V[c]);if(s<Q){b=W[s],y=q[s],c=s;do{for(l=1,O=W[C=c+1],_=this.DOT_PRODUCT(this.PART(this.COL(X,c),1,e),this.PART(this.COL(r,O),1,e)),z=u.Z.hypot(_,J[C]),w=J[C]/z,E=_/z,J[C]=w*J[c],J[c]=z;l<=e;++l)z=w*X[l][C]+E*X[l][c],X[l][C]=w*X[l][c]-E*X[l][C],X[l][c]=z;W[c]=O,q[c]=q[C],c=C}while(c<Q);W[c]=b,q[c]=y}if(0===(z=this.DOT_PRODUCT(this.PART(this.COL(X,Q),1,e),this.PART(this.COL(r,Z),1,e))))break r;J[Q]=z,q[s]=0,q[Q]=g}else J[++Q]=N,q[s]=q[Q],q[Q]=0;if(W[s]=W[Q],W[Q]=Z,$>t&&Z!==$){for(l=1,c=Q-1,_=this.DOT_PRODUCT(this.PART(this.COL(X,c),1,e),this.PART(this.COL(r,Z),1,e)),z=u.Z.hypot(_,J[Q]),w=J[Q]/z,E=_/z,J[Q]=w*J[c],J[c]=z;l<=e;++l)z=w*X[l][Q]+E*X[l][c],X[l][Q]=w*X[l][c]-E*X[l][Q],X[l][c]=z;W[Q]=W[c],W[c]=Z,z=q[c],q[c]=q[Q],q[Q]=z}if($>t)for(c=1,z=1/J[Q];c<=e;++c)G[c]=z*X[c][Q];else for(c=1,Z=W[Q],z=(this.DOT_PRODUCT_ROW_COL(G,-1,r,Z,1,e)-1)/J[Q];c<=e;++c)G[c]-=z*X[c][Q]}for(l=1,T=n*n,F=0,B=0;l<=e;++l)Math.abs(o[l])>=1e-6*n&&(T-=o[l]*o[l]),F+=o[l]*G[l],B+=G[l]*G[l];if(T<=0)break r;if(Math.abs(F)>=1e-6*(z=Math.sqrt(B*T))&&(z=Math.sqrt(B*T+F*F)),f=m=T/(z+F),$===t){if(A=f+.1*a,P=f+.2*a,f>=A||A>=P)break;f=Math.min(f,a)}for(c=1;c<=e;++c)H[c]=o[c]+f*G[c];if($===t)for(c=1,Y=a,a=0;c<=Q;++c)a=Math.max(a,z=i[Z=W[c]]-this.DOT_PRODUCT_ROW_COL(H,-1,r,Z,1,e));c=Q;do{for(l=1,R=0,k=0;l<=e;++l)R+=z=X[l][c]*H[l],k+=Math.abs(z);if(A=k+.1*Math.abs(R),P=k+.2*Math.abs(R),(k>=A||A>=P)&&(R=0),V[c]=R/J[c],c>=2)for(l=1,Z=W[c];l<=e;++l)H[l]-=V[c]*r[l][Z]}while(c-- >=2);for($>t&&(V[Q]=Math.max(0,V[Q])),c=1;c<=e;++c)H[c]=o[c]+f*G[c];if($>Q)for(c=L=Q+1;c<=$;++c){for(l=1,x=a-i[Z=W[c]],I=a+Math.abs(i[Z]);l<=e;++l)x+=z=r[l][Z]*H[l],I+=Math.abs(z);A=I+.1*Math.abs(x),P=I+.2*Math.abs(x),(I>=A||A>=P)&&(x=0),V[c]=x}for(c=1,g=1,s=0;c<=$;++c)V[c]<0&&(z=q[c]/(q[c]-V[c]))<g&&(g=z,s=c);for(c=1,z=1-g;c<=e;++c)o[c]=z*o[c]+g*H[c];for(c=1;c<=$;++c)q[c]=Math.max(0,z*q[c]+g*V[c]);$===t&&(a=Y+g*(a-Y))}while(s>0);if(f===m)return!0}while($===t);return!1},PrintIterationResult:function(e,t,r,i,n,o){o>1&&console.log("NFVALS = "+e+"  F = "+t+"  MAXCV = "+r),o>1&&console.log("X = "+this.PART(i,1,n))},ROW:function(e,t){return e[t].slice()},COL:function(e,t){var r,i=e.length,n=[];for(r=0;r<i;++r)n[r]=e[r][t];return n},PART:function(e,t,r){return e.slice(t,r+1)},FORMAT:function(e){return e.join(",")},DOT_PRODUCT:function(e,t){var r,i=0,n=e.length;for(r=0;r<n;++r)i+=e[r]*t[r];return i},DOT_PRODUCT_ROW_COL:function(e,t,r,i,n,o){var s,a=0;if(-1===t)for(s=n;s<=o;++s)a+=e[s]*r[s][i];else if(-1===i)for(s=n;s<=o;++s)a+=e[t][s]*r[s];else for(s=n;s<=o;++s)a+=e[t][s]*r[s][i];return a}},n.Z.Math.Nlp;var m=r(9401),v=r(4401);u.Z.Plot={checkReal:function(e){var t,r,i=!1,n=e.length;for(t=0;t<n;t++)if(!isNaN((r=e[t].usrCoords)[1])&&!isNaN(r[2])&&Math.abs(r[0])>u.Z.eps){i=!0;break}return i},updateParametricCurveNaive:function(e,t,r,i){var n,o,a=!1,u=(r-t)/i;for(n=0;n<i;n++)o=t+n*u,e.points[n].setCoordinates(s.Z.COORDS_BY_USER,[e.X(o,a),e.Y(o,a)],!1),e.points[n]._t=o,a=!0;return e},isSegmentOutside:function(e,t,r,i,n){return t<0&&i<0||t>n.canvasHeight&&i>n.canvasHeight||e<0&&r<0||e>n.canvasWidth&&r>n.canvasWidth},isDistOK:function(e,t,r,i){return Math.abs(e)<r&&Math.abs(t)<i&&!isNaN(e+t)},isSegmentDefined:function(e,t,r,i){return!(isNaN(e+t)&&isNaN(r+i))},updateParametricCurveOld:function(e,t,r){var i,o,a,l,c,h,d,p,f,v,g,b=!1,y=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1),x=[],C=[],Z=[],_=[],w=!1,E=0;for(n.Z.deprecated("Curve.updateParametricCurveOld()"),e.board.updateQuality===e.board.BOARD_QUALITY_LOW?(f=15,v=10,g=10):(f=21,v=.7,g=.7),_[0]=r-t,i=1;i<f;i++)_[i]=.5*_[i-1];i=1,x[0]=1,C[0]=0,o=t,y.setCoordinates(s.Z.COORDS_BY_USER,[e.X(o,b),e.Y(o,b)],!1),b=!0,c=y.scrCoords[1],h=y.scrCoords[2],o=r,y.setCoordinates(s.Z.COORDS_BY_USER,[e.X(o,b),e.Y(o,b)],!1),a=y.scrCoords[1],l=y.scrCoords[2],Z[0]=[a,l],d=1,p=0,e.points=[],e.points[E++]=new m.Z(s.Z.COORDS_BY_SCREEN,[c,h],e.board,!1);do{for(w=this.isDistOK(a-c,l-h,v,g)||this.isSegmentOutside(c,h,a,l,e.board);p<f&&(!w||p<6)&&(p<=7||this.isSegmentDefined(c,h,a,l));)x[d]=i,C[d]=p,Z[d]=[a,l],d+=1,o=t+(i=2*i-1)*_[++p],y.setCoordinates(s.Z.COORDS_BY_USER,[e.X(o,b),e.Y(o,b)],!1,!0),a=y.scrCoords[1],l=y.scrCoords[2],w=this.isDistOK(a-c,l-h,v,g)||this.isSegmentOutside(c,h,a,l,e.board);E>1&&.015>function(e,t,r){var i,n=r[1]-e[1],o=r[2]-e[2],s=t[0]-e[1],a=t[1]-e[2],l=s*s+a*a;return l>=u.Z.eps&&(i=(n*s+o*a)/l)>0&&(i<=1?(n-=i*s,o-=i*a):(n-=s,o-=a)),u.Z.hypot(n,o)}(e.points[E-2].scrCoords,[a,l],e.points[E-1].scrCoords)&&(E-=1),e.points[E]=new m.Z(s.Z.COORDS_BY_SCREEN,[a,l],e.board,!1),e.points[E]._t=o,E+=1,c=a,h=l,d-=1,a=Z[d][0],l=Z[d][1],p=C[d]+1,i=2*x[d]}while(d>0&&E<5e5);return e.numberPoints=e.points.length,e},_insertPoint_v2:function(e,t,r){var i=!isNaN(this._lastCrds[1]+this._lastCrds[2]),n=!isNaN(t.scrCoords[1]+t.scrCoords[2]),o=e.board.canvasWidth,s=e.board.canvasHeight;(!(n=n&&t.scrCoords[1]>-500&&t.scrCoords[2]>-500&&t.scrCoords[1]<o+500&&t.scrCoords[2]<s+500)&&i||n&&(!i||Math.abs(t.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(t.scrCoords[2]-this._lastCrds[2])>.7))&&(t._t=r,e.points.push(t),this._lastCrds=t.copy("scrCoords"))},neighborhood_isNaN_v2:function(e,t){var r,i,n=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1);return r=t+u.Z.eps,n.setCoordinates(s.Z.COORDS_BY_USER,[e.X(r,!0),e.Y(r,!0)],!1),!!(isNaN((i=n.usrCoords)[1]+i[2])||(r=t-u.Z.eps,n.setCoordinates(s.Z.COORDS_BY_USER,[e.X(r,!0),e.Y(r,!0)],!1),isNaN((i=n.usrCoords)[1]+i[2])))},_borderCase:function(e,t,r,i,n,o,a,u){var l,c,h,d,p,f,v=null,g=!1;if(u<=1){if(c=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1),isNaN(t[1]+t[2])&&!isNaN(i[1]+i[2])&&!this.neighborhood_isNaN_v2(e,n)||isNaN(r[1]+r[2])&&!isNaN(i[1]+i[2])&&!this.neighborhood_isNaN_v2(e,o)||isNaN(i[1]+i[2])&&(!isNaN(t[1]+t[2])||!isNaN(r[1]+r[2]))&&!this.neighborhood_isNaN_v2(e,a))return!1;d=0;do{if(isNaN(t[1]+t[2])&&!isNaN(i[1]+i[2]))p=n,f=a;else if(isNaN(r[1]+r[2])&&!isNaN(i[1]+i[2]))p=o,f=a;else if(isNaN(i[1]+i[2])&&!isNaN(r[1]+r[2]))p=a,f=o;else{if(!isNaN(i[1]+i[2])||isNaN(t[1]+t[2]))return!1;p=a,f=n}l=.5*(p+f),c.setCoordinates(s.Z.COORDS_BY_USER,[e.X(l,!0),e.Y(l,!0)],!1),(g=isNaN((h=c.usrCoords)[1]+h[2]))?p=l:f=l,++d}while(g&&d<30);if(d<30&&(v=h.slice(),i=h.slice(),f=l),null!==v)return this._insertPoint_v2(e,new m.Z(s.Z.COORDS_BY_USER,v,e.board,!1)),!0}return!1},_plotRecursive_v2:function(e,t,r,i,n,o,a){var u,l,c,h,d,p=0,f=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1);return e.numberPoints>65536?void 0:(o<this.nanLevel&&this._isUndefined(e,t,r,i,n)||o<this.nanLevel&&this._isOutside(t,r,i,n,e.board)||(u=(r+n)*.5,f.setCoordinates(s.Z.COORDS_BY_USER,[e.X(u,!0),e.Y(u,!0)],!1),l=f.scrCoords,this._borderCase(e,t,i,l,r,n,u,o)||(c=this._triangleDists(t,i,l),h=o<this.smoothLevel&&c[3]<a,d=o<=this.jumpLevel&&(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))||o<this.jumpLevel&&(c[2]>.99*c[0]||c[1]>.99*c[0]||c[0]===1/0||c[1]===1/0||c[2]===1/0),o<this.smoothLevel+2&&c[0]<.5*(c[1]+c[2])&&(p=0,h=!1),--o,d?this._insertPoint_v2(e,new m.Z(s.Z.COORDS_BY_SCREEN,[NaN,NaN],e.board,!1),u):o<=p||h?this._insertPoint_v2(e,f,u):(this._plotRecursive_v2(e,t,r,l,u,o,a),isNaN(f.scrCoords[1]+f.scrCoords[2])||this._insertPoint_v2(e,f,u),this._plotRecursive_v2(e,l,u,i,n,o,a)))),this)},updateParametricCurve_v2:function(e,t,r){var i,n,o,u,l,c,h,d,p,f=!1,v=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1),g=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1);return e.board.updateQuality===e.board.BOARD_QUALITY_LOW?(l=a.Z.evaluate(e.visProp.recursiondepthlow)||13,c=2,this.smoothLevel=l-6,this.jumpLevel=3):(l=a.Z.evaluate(e.visProp.recursiondepthhigh)||17,c=2,this.smoothLevel=l-9,this.jumpLevel=2),this.nanLevel=l-4,e.points=[],"x"===this.xterm?(h=((d=e.board.getBoundingBox())[2]-d[0])*.3,i=Math.max(t,d[0]-h),n=Math.min(r,d[2]+h)):(i=t,n=r),v.setCoordinates(s.Z.COORDS_BY_USER,[e.X(i,f),e.Y(i,f)],!1),f=!0,g.setCoordinates(s.Z.COORDS_BY_USER,[e.X(n,f),e.Y(n,f)],!1),p=this._findStartPoint(e,v.scrCoords,i,g.scrCoords,n),v.setCoordinates(s.Z.COORDS_BY_SCREEN,p[0],!1),i=p[1],p=this._findStartPoint(e,g.scrCoords,n,v.scrCoords,i),g.setCoordinates(s.Z.COORDS_BY_SCREEN,p[0],!1),n=p[1],this._visibleArea=[i,n],o=v.copy("scrCoords"),u=g.copy("scrCoords"),v._t=i,e.points.push(v),this._lastCrds=v.copy("scrCoords"),this._plotRecursive_v2(e,o,i,u,n,l,c),g._t=n,e.points.push(g),e.numberPoints=e.points.length,e},_insertLimesPoint:function(e,t,r,i,n){var o,a,l;(Math.abs(this._lastUsrCrds[1])!==1/0||Math.abs(n.left_x)!==1/0)&&(Math.abs(this._lastUsrCrds[2])!==1/0||Math.abs(n.left_y)!==1/0)&&((o=new m.Z(s.Z.COORDS_BY_USER,[n.left_x,n.left_y],e.board))._t=r,e.points.push(o),!isNaN(n.left_x)&&!isNaN(n.left_y)&&!isNaN(n.right_x)&&!isNaN(n.right_y)&&(Math.abs(n.left_x-n.right_x)>u.Z.eps||Math.abs(n.left_y-n.right_y)>u.Z.eps)&&((a=new m.Z(s.Z.COORDS_BY_SCREEN,t,e.board))._t=r,e.points.push(a)),(l=new m.Z(s.Z.COORDS_BY_USER,[n.right_x,n.right_y],e.board))._t=r,e.points.push(l),this._lastScrCrds=l.copy("scrCoords"),this._lastUsrCrds=l.copy("usrCoords"))},_insertPoint:function(e,t,r,i,n){var o,u=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),l=!isNaN(t[1]+t[2]),c=e.board.canvasWidth,h=e.board.canvasHeight;if(a.Z.exists(n)){this._insertLimesPoint(e,t,r,i,n);return}l=l&&t[1]>-500&&t[2]>-500&&t[1]<c+500&&t[2]<h+500,!u&&!l||l&&u&&.8>Math.abs(t[1]-this._lastScrCrds[1])&&.8>Math.abs(t[2]-this._lastScrCrds[2])||Math.abs(t[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(t[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((o=new m.Z(s.Z.COORDS_BY_SCREEN,t,e.board))._t=r,e.points.push(o),this._lastScrCrds=o.copy("scrCoords"),this._lastUsrCrds=o.copy("usrCoords"))},_triangleDists:function(e,t,r){var i,n;return i=[e[0]*t[0],(e[1]+t[1])*.5,(e[2]+t[2])*.5],n=h.Z.distance(e,t,3),[n,h.Z.distance(e,r,3),h.Z.distance(r,t,3),h.Z.distance(r,i,3)]},_isUndefined:function(e,t,r,i,n){var o,a,u;if(!isNaN(t[1]+t[2])||!isNaN(i[1]+i[2]))return!1;for(a=0,u=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1);a<20;++a)if(o=r+Math.random()*(n-r),u.setCoordinates(s.Z.COORDS_BY_USER,[e.X(o,!0),e.Y(o,!0)],!1),!isNaN(u.scrCoords[0]+u.scrCoords[1]+u.scrCoords[2]))return!1;return!0},_isOutside:function(e,t,r,i,n){var o=n.canvasWidth,s=n.canvasHeight;return!!(e[1]<-500&&r[1]<-500||e[2]<-500&&r[2]<-500||e[1]>o+500&&r[1]>o+500||e[2]>s+500&&r[2]>s+500)},_isOutsidePoint:function(e,t){var r=t.canvasWidth,i=t.canvasHeight;return!!(e[1]<-500||e[2]<-500||e[1]>r+500||e[2]>i+500)},_findStartPoint:function(e,t,r,i,n){return[t,r]},_getBorderPos:function(e,t,r,i,n,o,a){var l,c,h,d,p,f;if(c=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1),d=0,isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2]))f=t,p=i;else if(isNaN(a[1]+a[2])&&!isNaN(n[1]+n[2]))f=o,p=i;else if(isNaN(n[1]+n[2])&&!isNaN(a[1]+a[2]))f=i,p=o;else{if(!isNaN(n[1]+n[2])||isNaN(r[1]+r[2]))return!1;f=i,p=t}do l=.5*(p+f),c.setCoordinates(s.Z.COORDS_BY_USER,[e.X(l,!0),e.Y(l,!0)],!1),isNaN((h=c.usrCoords)[1]+h[2])?f=l:p=l,++d;while(d<30&&Math.abs(p-f)>u.Z.eps);return l},_getCuspPos:function(e,t,r){var i=[e.X(t,!0),e.Y(t,!0)],n=[e.X(r,!0),e.Y(r,!0)];return f.Z.fminbr(function(t){var r=[e.X(t,!0),e.Y(t,!0)];return-(u.Z.hypot(i[0]-r[0],i[1]-r[1])+u.Z.hypot(n[0]-r[0],n[1]-r[1]))},[t,r],e)},_getJumpPos:function(e,t,r){return f.Z.fminbr(function(t){var r=u.Z.eps*u.Z.eps,i=[e.X(t,!0),e.Y(t,!0)],n=[e.X(t+r,!0),e.Y(t+r,!0)];return-Math.abs((n[1]-i[1])/(n[0]-i[0]))},[t,r],e)},_getLimits:function(e,t){var r,i,n,o,s,a=2/(e.maxX()-e.minX());return i=(r=c.limit(t,-a,e.X))[0],"infinite"===r[1]&&(i=1/0*Math.sign(i)),o=(r=c.limit(t,-a,e.Y))[0],"infinite"===r[1]&&(o=1/0*Math.sign(o)),n=(r=c.limit(t,a,e.X))[0],"infinite"===r[1]&&(n=1/0*Math.sign(n)),s=(r=c.limit(t,a,e.Y))[0],"infinite"===r[1]&&(s=1/0*Math.sign(s)),{left_x:i,left_y:o,right_x:n,right_y:s,t:t}},_getLimes:function(e,t,r,i,n,o,s,a,u){var l;return"border"===a?l=this._getBorderPos(e,t,r,i,n,o,s):"cusp"===a?l=this._getCuspPos(e,t,o):"jump"===a&&(l=this._getJumpPos(e,t,o)),this._getLimits(e,l)},_plotNonRecursive:function(e,t,r,i,n,o){var s,a,u,l,c,h,d,p,f,m,v,g=null,b=!1,y="",x=[],C=0;for(p=e.board.origin.scrCoords,x[C++]=[t,r,i,n,o,1/0];C>0;){if(t=(v=x[--C])[0],r=v[1],i=v[2],n=v[3],f=v[4],m=v[5],b=!1,y="",g=null,e.points.length>65536)return;f<this.nanLevel&&(this._isUndefined(e,t,r,i,n)||this._isOutside(t,r,i,n,e.board))||(s=(r+n)*.5,h=e.X(s,!0),d=e.Y(s,!0),a=[1,p[1]+h*e.board.unitX,p[2]-d*e.board.unitY],u=this._triangleDists(t,i,a),l=isNaN(t[1]+t[2]),c=isNaN(i[1]+i[2]),l&&!c||!l&&c?y="border":u[0]>.66*m||u[0]<this.cusp_threshold*(u[1]+u[2])||u[1]>5*u[2]||u[2]>5*u[1]?y="cusp":(u[2]>this.jump_threshold*u[0]||u[1]>this.jump_threshold*u[0]||u[0]===1/0||u[1]===1/0||u[2]===1/0)&&(y="jump"),b=""===y&&f<this.smoothLevel&&u[3]<this.smooth_threshold,f<this.testLevel&&!b&&(""===y?b=!0:g=this._getLimes(e,r,t,s,a,n,i,y,f)),null!==g?(a=[1,NaN,NaN],this._insertPoint(e,a,s,f,g)):f<=0||b?this._insertPoint(e,a,s,f,null):(x[C++]=[a,s,i,n,f-1,u[0]],x[C++]=[t,r,a,s,f-1,u[0]]))}return this},updateParametricCurve_v3:function(e,t,r){var i,n,o,u,l,c,h,d,p=!1,f=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1),v=new m.Z(s.Z.COORDS_BY_USER,[0,0],e.board,!1);return l=e.board.updateQuality===e.board.BOARD_QUALITY_LOW?a.Z.evaluate(e.visProp.recursiondepthlow)||14:a.Z.evaluate(e.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=l-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,e.points=[],"x"===e.xterm?(c=((h=e.board.getBoundingBox())[2]-h[0])*.3,i=Math.max(t,h[0]-c),n=Math.min(r,h[2]+c)):(i=t,n=r),f.setCoordinates(s.Z.COORDS_BY_USER,[e.X(i,p),e.Y(i,p)],!1),p=!0,v.setCoordinates(s.Z.COORDS_BY_USER,[e.X(n,p),e.Y(n,p)],!1),d=this._findStartPoint(e,f.scrCoords,i,v.scrCoords,n),f.setCoordinates(s.Z.COORDS_BY_SCREEN,d[0],!1),i=d[1],d=this._findStartPoint(e,v.scrCoords,n,f.scrCoords,i),v.setCoordinates(s.Z.COORDS_BY_SCREEN,d[0],!1),n=d[1],this._visibleArea=[i,n],o=f.copy("scrCoords"),u=v.copy("scrCoords"),f._t=i,e.points.push(f),this._lastScrCrds=f.copy("scrCoords"),this._lastUsrCrds=f.copy("usrCoords"),this._plotNonRecursive(e,o,i,u,n,l),v._t=n,e.points.push(v),e.numberPoints=e.points.length,e},_criticalInterval:function(e,t,r){var i,n,o,s,a,u,l,c=!1,h=-1/0,d=!1,p=!1,f=0,m=[],g=[],b=[];for(l=v.Z.abs(e),(s=v.Z.median(l))<1e-7?(s=1e-7,d=!0):s*=this.criticalThreshold,i=0;i<t;i++)l[i]>s?(b.push({i:i,v:e[i],group:f}),h=i,c||(c=!0)):c&&i>h+4&&(b.length>0&&m.push(b.slice(0)),b=[],c=!1,f++);for(c&&b.length>1&&m.push(b.slice(0)),d&&0===m.length&&(p=!0),n=0;n<m.length;n++)if(g[n]="point",!((o=m[n].length)<64)){for(i=1,u=0,a=Math.sign(m[n][0].v);i<o;i++)Math.sign(m[n][i].v)!==a&&(u++,a=Math.sign(m[n][i].v));6*u>o&&(g[n]="interval")}return{smooth:p,groups:m,types:g}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(e,t,r,i){var n,o,s,a,u,l,c=[],h=0,d=0,p=0,f=!1,m=!1;for(n=0,s=(r-t)/i,c[h]=new this.Component,l=c[h],o=t;n<=i;n++,o+=s)a=e.X(o,m),u=e.Y(o,m),isNaN(a)||isNaN(u)?++p>1&&f&&(l.right_isNaN=!0,l.right_t=o-s,l.len=d,f=!1,c[++h]=new this.Component,l=c[h],p=0):(!f&&(f=!0,d=0,p>0&&(l.left_t=o-s,l.left_isNaN=!0)),p=0,l.t_values[d]=o,l.x_values[d]=a,l.y_values[d]=u,d++),0===n&&(m=!0);return f?l.len=d:c.pop(),c},getPointType:function(e,t,r,i,n,o,s){var a=n[0],u=o[0],l=i.length,c={idx:t,t:r,x:a[t],y:u[t],type:"other"};return t<5?(c.type="borderleft",c.idx=0,c.t=i[0],c.x=a[0],c.y=u[0]):t>s-6&&(c.type="borderright",c.idx=l-1,c.t=i[l-1],c.x=a[l-1],c.y=u[l-1]),c},newtonApprox:function(e,t,r,i,n){var o,s=0;for(o=i;o>0;o--)s=(s+n[o][e])*(t-(o-1)*r)/o;return s+n[0][e]},thiele:function(e,t,r,i,n){var o,s=0;for(o=n;o>1;o--)s=(e-r[i+o])/(t[o][i+1]-t[o-2][i+1]+s);return t[0][i+1]+(e-r[i+1])/(t[1][i+1]+s)},differenceMethodExperiments:function(e,t){var r,i,n,o,s,a,u,l,c,h,d,p=e.t_values,f=e.x_values,m=e.y_values,v=[],g=[],b=[],y=[],x=[],C=[],Z=[],_=[],w=0,E=[];for(s=p[1]-p[0],x.push([]),C.push([]),Z.push([]),_.push([]),n=m.length,r=0;r<n;r++)x[0][r]=f[r],C[0][r]=m[r],Z[0][r]=f[r],_[0][r]=m[r];for(x.push([]),C.push([]),Z.push([]),_.push([]),a=s,n=m.length-1,r=0;r<n;r++)v[r]=f[r+1]-f[r],g[r]=m[r+1]-m[r],b[r]=v[r],y[r]=g[r],x[1][r]=v[r],C[1][r]=g[r],Z[1][r]=a/v[r],_[1][r]=a/g[r];for(n--,o=Math.min(8,m.length-1),i=1;i<o;i++){for(x.push([]),C.push([]),Z.push([]),_.push([]),a*=s,r=0;r<n;r++)v[r]=v[r+1]-v[r],g[r]=g[r+1]-g[r],x[i+1][r]=v[r],C[i+1][r]=g[r],Z[i+1][r]=a/(Z[i][r+1]-Z[i][r])+Z[i-1][r+1],_[i+1][r]=a/(_[i][r+1]-_[i][r])+_[i-1][r+1];if(!1===(d=this._criticalPoints(g,n,i))){console.log("Polynomial of degree",i),d=[];break}if(d.length>0&&++w>1&&i%2==0)break;n--}for(r=0;r<d.length;r++){for(c=0,l=-1/0;c<d[r].length;c++)(h=Math.abs(d[r][c].v))>l&&(l=h,u=c);u=Math.floor(d[r][u].i+i/2),E.push(this.getPointType(t,u,p,f,m,b,y,n+1))}return[E,x,C,Z,_]},getCenterOfCriticalInterval:function(e,t,r){var i,n,o,s,a,u=0,l=0,c=r[1]-r[0],h=[];for(n=0,i=-1/0,h=[];n<e.length;n++)(s=Math.abs(e[n].v))>i?(h=[n],i=s,o=n):i===s&&h.push(n);if(h.length>0&&(o=Math.floor(a=h.reduce(function(e,t){return e+t},0)/h.length),a+=e[0].i),i<1/0){for(n=0;n<e.length;n++)u+=Math.abs(e[n].v)*e[n].i,l+=Math.abs(e[n].v);a=u/l}return a+=t/2,[e[o].i+t/2,a,r[Math.floor(a)]+c*(a-Math.floor(a))]},differenceMethod:function(e,t){var r,i,n,o,s,a,u,l,c,h,d=e.t_values,p=e.x_values,f=e.y_values,m=[],v=[],g=0,b=-1,y=-1,x=[],C=[];for(n=f.length,m.push(new Float64Array(p)),v.push(new Float64Array(f)),o=Math.min(12,--n),i=0;i<o&&(m.push(new Float64Array(n)),v.push(new Float64Array(n)),m[i+1]=m[i].map(function(e,t,r){return r[t+1]-e}),v[i+1]=v[i].map(function(e,t,r){return r[t+1]-e}),!0===(l=this._criticalInterval(v[i+1],n,i)).smooth&&(y=i,x=[]),u=this._criticalInterval(m[i+1],n,i),-1===b&&!0===u.smooth&&(b=i),!(y>=0));i++){if(l.groups.length>0&&++g>2&&(i+1)%2==0){x=l.groups,h=l.types;break}n--}for(r=0;r<x.length;r++)"interval"!==h[r]&&(a=this.getCenterOfCriticalInterval(x[r],i+1,d),s=l[0],s=Math.floor(a[1]),c=a[2],C.push(this.getPointType(t,s,c,d,m,v,n+1)));return[C,m,v,b,y]},_insertPoint_v4:function(e,t,r,i){var n,o,a,u=null;e.points.length>0&&(u=e.points[e.points.length-1].scrCoords),n=new m.Z(s.Z.COORDS_BY_USER,t,e.board),null!==u&&(o=n.scrCoords[1]-u[1])*o+(a=n.scrCoords[2]-u[2])*a<.8*.8||(n._t=r,e.points.push(n))},getInterval:function(e,t,r){var i,o;return l.Z.disable(),i=l.Z.Interval(t,r),e.board.mathLib=l.Z,e.board.mathLibJXG=l.Z,e.X(i,!0),o=e.Y(i,!0),e.board.mathLib=Math,e.board.mathLibJXG=n.Z.Math,o},sign:function(e){return e<0?-1:e>0?1:0},handleBorder:function(e,t,r,i,n){var o,s,u,l,c,h,d,p,f,m,v,g,b=r.idx;if(g=t.t_values[1]-t.t_values[0],"borderleft"===r.type?u=(s=o=t.left_isNaN?t.left_t:r.t-g)+g:"borderright"===r.type?s=(u=o=t.right_isNaN?t.right_t:r.t+g)-g:console.log("No bordercase!!!"),0!==(m=this.findComponents(e,s,u,32)).length){for("borderleft"===r.type&&(s=m[0].left_t,u=m[0].t_values[0],g=m[0].t_values[1]-m[0].t_values[0],o=s=null===s?u-g:s,l=this.getInterval(e,s,u),a.Z.isObject(l)&&(d=l.lo,p=l.hi,c=e.X(o,!0),h=n[1][b]<0?p:d,this._insertPoint_v4(e,[1,c,h],o))),v=m[0].t_values.length,f=0;f<v;f++)o=m[0].t_values[f],c=m[0].x_values[f],h=m[0].y_values[f],this._insertPoint_v4(e,[1,c,h],o);"borderright"===r.type&&(s=m[0].t_values[v-1],u=m[0].right_t,g=m[0].t_values[1]-m[0].t_values[0],o=u=null===u?s+g:u,l=this.getInterval(e,s,u),a.Z.isObject(l)&&(d=l.lo,p=l.hi,c=e.X(o,!0),h=n[1][b]>0?p:d,this._insertPoint_v4(e,[1,c,h],o)))}},_seconditeration_v4:function(e,t,r,i,n){var o,s,a,u,l,c,h,d,p,f,m,v,g;for(h=0,s=t.t_values[r.idx-2],a=t.t_values[r.idx+2],l=this.findComponents(e,s,a,64);h<l.length;h++){for(p=0,c=l[h],d=(u=this.differenceMethod(c,e))[0],f=u[1],m=u[2],v=0;p<=d.length;p++){for(g=p===d.length?c.len:d[p].idx,o=v;o<g;o++)isNaN(c.x_values[o])||isNaN(c.y_values[o])||this._insertPoint_v4(e,[1,c.x_values[o],c.y_values[o]],c.t_values[o]);p<d.length&&(this.handleSingularity(e,c,d[p],f,m),v=d[p].idx+1)}g=c.len,h<l.length-1&&this._insertPoint_v4(e,[1,NaN,NaN],c.right_t)}return this},_recurse_v4:function(e,t,r,i,n,o,s,a){var l,c,h=(t+r)*.5,d=e.X(h,!0),p=e.Y(h,!0);if(0===a){this._insertPoint_v4(e,[1,NaN,NaN],h);return}l=(d-i)*e.board.unitX,c=(p-n)*e.board.unitY,u.Z.hypot(l,c)>2?this._recurse_v4(e,t,h,i,n,d,p,a-1):this._insertPoint_v4(e,[1,d,p],h),l=(d-o)*e.board.unitX,c=(p-s)*e.board.unitY,u.Z.hypot(l,c)>2?this._recurse_v4(e,h,r,d,p,o,s,a-1):this._insertPoint_v4(e,[1,d,p],h)},handleSingularity:function(e,t,r,i,n){var o,s,u,l,c,h,d,p,f,m,v,g=r.idx;console.log("HandleSingularity at t =",o=r.t),s=t.t_values[g-5],u=t.t_values[g+5],l=this.getInterval(e,s,u),a.Z.isObject(l)?(p=l.lo,f=l.hi):n[0][g-1]<n[0][g+1]?(p=n[0][g-1],f=n[0][g+1]):(p=n[0][g+1],f=n[0][g-1]),d=e.X(o,!0),console.log(":::",m=(n[0][g-3]-n[0][g-5])/(t.t_values[g-3]-t.t_values[g-5]),v=(n[0][g+3]-n[0][g+5])/(t.t_values[g+3]-t.t_values[g+5])),m<-100?(this._insertPoint_v4(e,[1,d,p],o,!0),v<=100&&this._insertPoint_v4(e,[1,NaN,NaN],o)):m>100?(this._insertPoint_v4(e,[1,d,f],o),v>=-100&&this._insertPoint_v4(e,[1,NaN,NaN],o)):(p===-1/0&&(this._insertPoint_v4(e,[1,d,p],o,!0),this._insertPoint_v4(e,[1,NaN,NaN],o)),f===1/0&&(this._insertPoint_v4(e,[1,NaN,NaN],o),this._insertPoint_v4(e,[1,d,f],o,!0)),r.t<t.t_values[g]?(c=g-1,h=g):(c=g,h=g+1),s=t.t_values[c],u=t.t_values[h],this._recurse_v4(e,s,u,i[0][c],n[0][c],i[0][h],n[0][h],10)),v<-100?this._insertPoint_v4(e,[1,d,f],o):v>100&&this._insertPoint_v4(e,[1,d,p],o)},steps:1021,criticalThreshold:1e3,plot_v4:function(e,t,r,i){var n,o,s,u,l,c,h,d,p,m,v,g,b,y,x,C=(r-t)/i,Z=function(t){return e.Y(t,!0)},_=function(t){return-e.Y(t,!0)},w=.5*C;for(u=0,s=this.findComponents(e,t,r,i);u<s.length;u++){for(l=s[u],c=(p=this.differenceMethod(l,e))[0],m=p[1],v=p[2],p[3],p[4],(0===c.length||"borderleft"!==c[0].type)&&c.unshift({idx:0,t:l.t_values[0],x:l.x_values[0],y:l.y_values[0],type:"borderleft"}),"borderright"!==c[c.length-1].type&&(o=l.t_values.length,c.push({idx:o-1,t:l.t_values[o-1],x:l.x_values[o-1],y:l.y_values[o-1],type:"borderright"})),d=0,h=0;h<=c.length;h++){for(o=h===c.length?l.len:c[h].idx-1,n=d;n<o-2;n++)this._insertPoint_v4(e,[1,l.x_values[n],l.y_values[n]],l.t_values[n]),n>=d+3&&n<o-3&&v.length>3&&Math.abs(v[2][n])>.2*Math.abs(v[0][n])&&(g=l.t_values[n],w=.25*C,x=this.getInterval(e,g,g+C),a.Z.isObject(x)?v[2][n]>0?this._insertPoint_v4(e,[1,g+w,x.lo],g+w):this._insertPoint_v4(e,[1,g+C-w,x.hi],g+C-w):(b=f.Z.fminbr(Z,[g,g+C]))<(y=f.Z.fminbr(_,[g,g+C]))?(this._insertPoint_v4(e,[1,e.X(b,!0),e.Y(b,!0)],b),this._insertPoint_v4(e,[1,e.X(y,!0),e.Y(y,!0)],y)):(this._insertPoint_v4(e,[1,e.X(y,!0),e.Y(y,!0)],y),this._insertPoint_v4(e,[1,e.X(b,!0),e.Y(b,!0)],b)));h<c.length&&(n=c[h].idx,"borderleft"===c[h].type||"borderright"===c[h].type?this.handleBorder(e,l,c[h],m,v):this._seconditeration_v4(e,l,c[h],m,v),d=c[h].idx+1+1)}o=l.len,u<s.length-1&&this._insertPoint_v4(e,[1,NaN,NaN],l.right_t)}},updateParametricCurve_v4:function(e,t,r){var i,n,o,s;"x"===e.xterm?(o=((s=e.board.getBoundingBox())[2]-s[0])*.3,i=Math.max(t,s[0]-o),n=Math.min(r,s[2]+o)):(i=t,n=r),e.points=[],this.plot_v4(e,i,n,this.steps),e.numberPoints=e.points.length},updateParametricCurve:function(e,t,r){return this.updateParametricCurve_v2(e,t,r)}};var g=u.Z.Plot;u.Z.ImplicitPlot=function(e,t,r,i,n){var o={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:u.Z.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=a.Z.merge(o,t),this.f=r,this.dfx=null,this.dfy=null,a.Z.isFunction(i)?this.dfx=i:this.dfx=function(e,t){var r=u.Z.eps*u.Z.eps;return(this.f(e+r,t)-this.f(e-r,t))*.5/r},a.Z.isFunction(n)?this.dfy=n:this.dfy=function(e,t){var r=u.Z.eps*u.Z.eps;return(this.f(e,t+r)-this.f(e,t-r))*.5/r},this.bbox=e,this.qdt=new p(20,5,e),this.components=[]},a.Z.extend(u.Z.ImplicitPlot.prototype,{plot:function(){var e,t,r,i,n,o,s,a=[],l=[],c=[],h=0,d=this,p=function(t){return d.f(e,t)},f=function(t){return-d.f(e,t)},m=function(e){return d.f(e,t)},v=function(e){return-d.f(e,t)};for(r=Math.min(this.bbox[0],this.bbox[2])-u.Z.eps,i=Math.max(this.bbox[0],this.bbox[2]),n=Math.min(this.bbox[1],this.bbox[3])+u.Z.eps,o=Math.max(this.bbox[1],this.bbox[3]),s=this.config.resolution_out/this.config.unitX*(1+u.Z.eps),e=r;e<i;e+=s)!1!==(c=this.searchLine(p,f,e,[n,o],"vertical",h,a,l))&&(a=c[0],l=c[1],h=c[2]);for(s=this.config.resolution_out/this.config.unitY*(1+u.Z.eps),t=n;t<o;t+=s)!1!==(c=this.searchLine(m,v,t,[r,i],"horizontal",h,a,l))&&(a=c[0],l=c[1],h=c[2]);return[a,l,h]},searchLine:function(e,t,r,i,n,o,s,a){var l,c,h,d,p,m,v,g,b,y,x,C,Z,_=this.config.tol_u0,w=i[0],E=i[1];if(l=f.Z.fminbr(e,[w,E]),d=e(l),p=e(c=f.Z.fminbr(t,[w,E])),d<_&&p>-_){if(l=Math.min(m=l,c),c=Math.max(m,c),h=f.Z.fzero(e,[l,c]),Math.abs(e(h))>Math.max((p-d)*u.Z.eps,.001))return!1;if("vertical"===n?(g=[1,r,h],Z=this.config.resolution_in/this.config.unitY):(g=[1,h,r],Z=this.config.resolution_in/this.config.unitX),Z*=1+u.Z.eps,this.curveContainsPoint(g,s,a,2*Z,this.config.qdt_box));else if((x=this.traceComponent(g,1)).length>0){for(o>0&&(s.push(NaN),a.push(NaN)),C=s.length,y=x[0].length,b=1;b<y;b++)this.qdt.insertItem({xlb:Math.min(x[0][b-1],x[0][b]),xub:Math.max(x[0][b-1],x[0][b]),ylb:Math.min(x[1][b-1],x[1][b]),yub:Math.max(x[1][b-1],x[1][b]),idx1:C+b-1,idx2:C+b,comp:o});o++,s=s.concat(x[0]),a=a.concat(x[1])}return(v=h-.01*Z)-w>Z&&!1!==(x=this.searchLine(e,t,r,[w,v],n,o,s,a))&&(s=x[0],a=x[1],o=x[2]),E-(v=h+.01*Z)>Z&&!1!==(x=this.searchLine(e,t,r,[v,E],n,o,s,a))&&(s=x[0],a=x[1],o=x[2]),[s,a,o]}return!1},curveContainsPoint:function(e,t,r,i,n){var o,s,a,u=e[1],l=e[2];for(o=0,s=(a=this.qdt.find([u-n,l+n,u+n,l-n])).length;o<s;o++)if(h.Z.distPointSegment(e,[1,t[a[o].idx1],r[a[o].idx1]],[1,t[a[o].idx2],r[a[o].idx2]])<i)return!0;return!1},traceComponent:function(e){var t=[],r=[],i=[];return 0===(i=this.tracing(e,1)).length||(t=i[0],r=i[1]),i[2]||0===(i=this.tracing(e,-1)).length||(t=i[0].reverse().concat(t.slice(1)),r=i[1].reverse().concat(r.slice(1))),t.length<6&&(t.push(t[t.length-1]),r.push(r[r.length-1])),[t,r]},tracing:function(e,t){var r,i,n,o,s,a,l,c,d,p,f,m,v,g,b,y,x,C=[],Z=[],_=[],w=0,E=0,N=!1,S=!1,A=!1,P=this.config.kappa_0,D=this.config.delta_0,M=this.config.alpha_0,O=this.config.h_initial,T=this.config.max_steps,B=t,F=[],R=[],k=[];if(C=e.slice(1),F.push(C[0]),R.push(C[1]),!1===(r=this.tangent(C)))return[];this.dfx(C[0],C[1]),this.dfy(C[0],C[1]);do{if(!1===(r=this.tangent(C))){C=Z.slice(),F.push(C[0]),R.push(C[1]);break}if(1===F.length)n=r.slice();else if(2===F.length)k.push(F.length-1);else if(S&&F.length>2&&!A){if(h.Z.distPointSegment([1,C[0],C[1]],[1,F[0],R[0]],[1,F[1],R[1]])<this.config.loop_dist*O&&u.Z.innerProduct(r,n,2)>this.config.loop_dir){C=e.slice(1),F.push(C[0]),R.push(C[1]),N=!0;break}if(this.config.loop_detection){for(y=0,g=F.length-1,b=Math.floor(u.Z.log2(g));y<=b&&!(h.Z.distPointSegment([1,C[0],C[1]],[1,F[k[y]-1],R[k[y]-1]],[1,F[k[y]],R[k[y]]])<this.config.loop_dist*O&&(i=this.tangent([F[k[y]],R[k[y]]]),u.Z.innerProduct(r,i,2)>this.config.loop_dir));y++);if(y<=b){N=!0;break}for(y=0,b=1,x=0;y<100&&(g+1)%b==0;y++)b*=2,x++;k[x]=g}}Z[0]=C[0]+O*B*r[0],Z[1]=C[1]+O*B*r[1],E=0;do d=(o=[this.dfx(Z[0],Z[1]),this.dfy(Z[0],Z[1])])[0]*o[0]+o[1]*o[1],s=this.f(Z[0],Z[1])/d,_[0]=Z[0]-o[0]*s,_[1]=Z[1]-o[1]*s,0===E?l=Math.abs(s)*Math.sqrt(d):1===E&&(c=Math.abs(s)*Math.sqrt(d)),Z[0]=_[0],Z[1]=_[1],E++;while(E<20&&Math.abs(this.f(Z[0],Z[1]))>this.config.tol_newton);if(f=l,p=E>1?c/l:0,i=this.tangent(Z),m=Math.acos(a=Math.max(-1,Math.min(1,a=u.Z.innerProduct(r,i,2)))),A=!1,h.Z.distance(C,Z,2)<this.config.tol_progress){C=Z.slice(),F.push(C[0]),R.push(C[1]);break}if(a<0){if(O>this.config.h_critical);else if(A=!0,this.isBifurcation(C,this.config.tol_cusp))B*=-1,m=0;else{C=Z.slice(),F.push(C[0]),R.push(C[1]);break}}if(!A&&(isNaN(v=Math.max(Math.sqrt(p/P),Math.sqrt(f/D),m/M))&&(v=1),O/=v=Math.max(Math.min(v,2),.5),O=Math.min(this.config.h_max,O),v>=2)){if(++w>=3*T)break;S=!1;continue}C=Z.slice(),F.push(C[0]),R.push(C[1]),S=!0,w++}while(w<T&&C[0]>=this.bbox[0]&&C[1]<=this.bbox[1]&&C[0]<=this.bbox[2]&&C[1]>=this.bbox[3]);return[F,R,N]},isBifurcation:function(e,t){var r,i,n,o,s,a,l,c,h,d,p=u.Z.eps*u.Z.eps*100;return r=e[0],i=e[1],n=.5*(this.dfx(r+p,i)-this.dfx(r-p,i))/p,o=.5*(this.dfx(r,i+p)-this.dfx(r,i-p))/p,s=.5*(this.dfy(r+p,i)-this.dfy(r-p,i))/p,d=(l=n+(a=.5*(this.dfy(r,i+p)-this.dfy(r,i-p))/p))*l-4*(n*a-o*s),c=.5*(l+Math.sqrt(d)),h=.5*(l-Math.sqrt(d)),!!(Math.abs(c)>t&&Math.abs(h)>t)},handleCriticalPoint:function(e,t,r,i){var n,o=Math.atan2(i*t[1],i*t[0]);return n=f.Z.root(function(t){var i=e[0]+r*Math.cos(t),n=e[1]+r*Math.sin(t);return this.f(i,n)},o),[e[0]+r*Math.cos(n),e[1]+r*Math.sin(n)]},updateA:function(e,t,r){var i,n,o=[r[0]-t[0],r[1]-t[1]],s=this.f(r[0],r[1])-this.f(t[0],t[1]);return n=o[0]*o[0]+o[1]*o[1],i=(s-(e[0]*o[0]+e[1]*o[1]))/n,e[0]+=i*o[0],e[1]+=i*o[1],e},tangent_A:function(e){var t=[-e[1],e[0]],r=u.Z.norm(t,2);return u.Z.eps,[t[0]/r,t[1]/r]},tangent:function(e){var t=[-this.dfy(e[0],e[1]),this.dfx(e[0],e[1])],r=u.Z.norm(t,2);return!(r<u.Z.eps*u.Z.eps)&&[t[0]/r,t[1]/r]}}),u.Z.ImplicitPlot,u.Z.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(e){var t,r,i,n,o,s,a,u,l,c,h,d,p,f,m;a=e[0];do{if(!a)break;s=a.next,a.rtype>this.MP_EXPLICIT&&(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)<this.EPS_SQ&&(a.rtype=this.MP_EXPLICIT,a.ltype===this.MP_OPEN&&(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)),s.ltype=this.MP_EXPLICIT,s.rtype===this.MP_OPEN&&(s.rtype=this.MP_CURL,s.set_right_curl(this.UNITY)),a.rx=a.x,s.lx=a.x,a.ry=a.y,s.ly=a.y),a=s}while(a!==e[0]);for(r=e[0];r.ltype===this.MP_OPEN&&r.rtype===this.MP_OPEN;)if((r=r.next)===e[0]){r.ltype=this.MP_END_CYCLE;break}for(a=r;a;){if(s=a.next,a.rtype>=this.MP_GIVEN){for(;s.ltype===this.MP_OPEN&&s.rtype===this.MP_OPEN;)s=s.next;for(i=0,u=a,o=e.length,d=[],p=[],f=[],m=[null];c=u.next,d.push(c.x-u.x),p.push(c.y-u.y),f.push(this.mp_pyth_add(d[i],p[i])),i>0&&(h=p[i-1]/f[i-1],l=d[i-1]/f[i-1],m.push(Math.atan2(p[i]*l-d[i]*h,d[i]*l+p[i]*h))),i++,(u=c)===s&&(o=i),!(i>=o)||u.ltype===this.MP_END_CYCLE;);i===o?m.push(0):m.push(m[1]),s.ltype===this.MP_OPEN&&((n=s.rx-s.x)*n+(t=s.ry-s.y)*t<this.EPS_SQ?(s.ltype=this.MP_CURL,s.set_left_curl(this.UNITY)):(s.ltype=this.MP_GIVEN,s.set_left_given(Math.atan2(t,n)))),a.rtype===this.MP_OPEN&&a.ltype===this.MP_EXPLICIT&&((n=a.x-a.lx)*n+(t=a.y-a.ly)*t<this.EPS_SQ?(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)):(a.rtype=this.MP_GIVEN,a.set_right_given(Math.atan2(t,n)))),this.mp_solve_choices(a,s,o,d,p,f,m)}else a.rtype===this.MP_ENDPOINT&&(a.rx=a.x,a.ry=a.y,s.lx=s.x,s.ly=s.y);if((a=s)===r)break}},mp_solve_choices:function(e,t,r,i,n,o,s){var a,u,l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_,w,E,N,S,A,P,D,M,O;for(M=0,v=Array(h=o.length+1),m=Array(h),l=Array(h),C=Array(h);M<h;M++)C[M]=l[M]=m[M]=v[M]=0;for(p=0,f=e,b=0;;){if(y=f.next,0===p){if(f.rtype===this.MP_GIVEN){if(y.ltype===this.MP_GIVEN){a=Math.atan2(n[0],i[0]),N=(E=this.mp_n_sin_cos(e.right_given()-a))[0],S=E[1],P=(A=this.mp_n_sin_cos(t.left_given()-a))[0],D=A[1],this.mp_set_controls(e,t,i[0],n[0],S,N,-D,P);return}l[0]=f.right_given()-Math.atan2(n[0],i[0]),l[0]=this.reduce_angle(l[0]),v[0]=0,m[0]=0}else if(f.rtype===this.MP_CURL){if(y.ltype===this.MP_CURL){e.rtype=this.MP_EXPLICIT,t.ltype=this.MP_EXPLICIT,g=Math.abs(t.left_tension()),Z=Math.abs(e.right_tension()),x=this.UNITY/(3*Z),e.rx=e.x+i[0]*x,e.ry=e.y+n[0]*x,x=this.UNITY/(3*g),t.lx=t.x-i[0]*x,t.ly=t.y-n[0]*x;return}w=f.right_curl(),g=Math.abs(y.left_tension()),Z=Math.abs(f.right_tension()),v[0]=this.mp_curl_ratio(w,Z,g),l[0]=-s[1]*v[0],m[0]=0}else f.rtype===this.MP_OPEN&&(v[0]=0,l[0]=0,m[0]=this.FRACTION_ONE)}else if(f.ltype===this.MP_END_CYCLE||f.ltype===this.MP_OPEN){if(a=this.UNITY/(3*Math.abs(b.right_tension())-this.UNITY),_=o[p]*(this.FRACTION_THREE-this.UNITY/Math.abs(b.right_tension())),c=this.UNITY/(3*Math.abs(y.left_tension())-this.UNITY),d=o[p-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(y.left_tension())),_*=w=this.FRACTION_ONE-v[p-1]*a,(g=Math.abs(f.left_tension()))<(Z=Math.abs(f.right_tension()))?_*=Math.pow(g/Z,2):g>Z&&(d*=Math.pow(Z/g,2)),x=d/(d+_),v[p]=x*c,u=-s[p+1]*v[p],b.rtype===this.MP_CURL?(m[p]=0,l[p]=u-s[1]*(this.FRACTION_ONE-x)):(x=(this.FRACTION_ONE-x)/w,u-=s[p]*x,x*=a,l[p]=u-l[p-1]*x,m[p]=-m[p-1]*x),f.ltype===this.MP_END_CYCLE){for(a=0,c=this.FRACTION_ONE;0==(p-=1)&&(p=r),a=l[p]-a*v[p],c=m[p]-c*v[p],p!==r;);for(a/=this.FRACTION_ONE-c,C[r]=a,l[0]=a,O=1;O<r;O++)l[O]=l[O]+a*m[O];break}}else{if(f.ltype===this.MP_CURL){w=f.left_curl(),g=Math.abs(f.left_tension()),Z=Math.abs(b.right_tension()),x=this.mp_curl_ratio(w,g,Z),C[r]=-(l[r-1]*x)/(this.FRACTION_ONE-x*v[r-1]);break}if(f.ltype===this.MP_GIVEN){C[r]=f.left_given()-Math.atan2(n[r-1],i[r-1]),C[r]=this.reduce_angle(C[r]);break}}b=f,f=y,p+=1}for(p=r-1;p>-1;p--)C[p]=l[p]-C[p+1]*v[p];for(f=e,p=0;y=f.next,N=(E=this.mp_n_sin_cos(C[p]))[0],S=E[1],P=(A=this.mp_n_sin_cos(-s[p+1]-C[p+1]))[0],D=A[1],this.mp_set_controls(f,y,i[p],n[p],S,N,D,P),p++,f=y,p!==r;);},mp_n_sin_cos:function(e){return[Math.cos(e),Math.sin(e)]},mp_set_controls:function(e,t,r,i,n,o,s,a){var u,l,c,h,d;c=Math.abs(t.left_tension()),u=Math.abs(e.right_tension()),d=this.mp_velocity(n,o,s,a,u),l=this.mp_velocity(s,a,n,o,c),(0>e.right_tension()||0>t.left_tension())&&(n>=0&&s>=0||n<=0&&s<=0)&&(h=Math.abs(n)*a+Math.abs(s)*o)>0&&(h*=1.00024414062,0>e.right_tension()&&0>this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,d,h)&&(d=Math.abs(s)/h),0>t.left_tension()&&0>this.mp_ab_vs_cd(Math.abs(n),this.FRACTION_ONE,l,h)&&(l=Math.abs(n)/h)),e.rx=e.x+(r*o-i*n)*d,e.ry=e.y+(i*o+r*n)*d,t.lx=t.x-(r*a+i*s)*l,t.ly=t.y-(i*a-r*s)*l,e.rtype=this.MP_EXPLICIT,t.ltype=this.MP_EXPLICIT},mp_pyth_add:function(e,t){return u.Z.hypot(e,t)},mp_curl_ratio:function(e,t,r){var i=1/t,n=1/r;return Math.min(4,((3-i)*i*i*e+n*n*n)/(i*i*i*e+(3-n)*n*n))},mp_ab_vs_cd:function(e,t,r,i){return e*t==r*i?0:e*t>r*i?1:-1},mp_velocity:function(e,t,r,i,n){return Math.min(4,(2+Math.sqrt(2)*(e-r/16)*(r-e/16)*(t-i))/(1.5*n*(2+(Math.sqrt(5)-1)*t+(3-Math.sqrt(5))*i)))},reduce_angle:function(e){return Math.abs(e)>this.ONE_EIGHTY_DEG&&(e>0?e-=this.THREE_SIXTY_DEG:e+=this.THREE_SIXTY_DEG),e},makeknots:function(e,t){var r,i,n=[];for(r=0,i=e.length;r<i;r++)n.push({x:e[r][0],y:e[r][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:t,ry:t,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(e){this.rx=e||0},set_left_curl:function(e){this.lx=e||0}});for(r=0,i=n.length;r<i;r++)n[r].next=n[r+1]||n[r],n[r].set_right_given=n[r].set_right_curl,n[r].set_left_given=n[r].set_left_curl,n[r].right_given=n[r].right_curl,n[r].left_given=n[r].left_curl;return n[i-1].next=n[0],n},curve:function(e,t){var r,i,n,o,s,u,l=!1,c=[],h=[];for(o in s=1,(t=t||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(s=a.Z.evaluate(t.tension)),i=(r=this.makeknots(e,s)).length,a.Z.exists(t.isClosed)&&a.Z.evaluate(t.isClosed)&&(l=!0),l||(r[0].ltype=this.MP_ENDPOINT,r[0].rtype=this.MP_CURL,r[i-1].rtype=this.MP_ENDPOINT,r[i-1].ltype=this.MP_CURL),t)if(t.hasOwnProperty(o)){if(isNaN(n=parseInt(o,10))||n<0||n>=i)continue;u=t[n],a.Z.exists(u.type)&&"curl"===u.type&&(s=a.Z.evaluate(u.curl),0===n?(r[n].rtype=this.MP_CURL,r[n].set_right_curl(s)):n===i-1?(r[n].ltype=this.MP_CURL,r[n].set_left_curl(s)):(r[n].ltype=this.MP_CURL,r[n].rtype=this.MP_CURL,r[n].lx=s,r[n].rx=s)),a.Z.exists(u.direction)&&(s=a.Z.evaluate(u.direction),a.Z.isArray(s)?(!1!==s[0]&&(r[n].lx=s[0]*Math.PI/180,r[n].ltype=this.MP_GIVEN),!1!==s[1]&&(r[n].rx=s[1]*Math.PI/180,r[n].rtype=this.MP_GIVEN)):(r[n].lx=s*Math.PI/180,r[n].rx=s*Math.PI/180,r[n].ltype=r[n].rtype=this.MP_GIVEN)),a.Z.exists(u.tension)&&(s=a.Z.evaluate(u.tension),a.Z.isArray(s)?(!1!==s[0]&&(r[n].ly=a.Z.evaluate(s[0])),!1!==s[1]&&(r[n].ry=a.Z.evaluate(s[1]))):(r[n].ly=s,r[n].ry=s))}for(this.make_choices(r),n=0;n<i-1;n++)c.push(r[n].x),c.push(r[n].rx),c.push(r[n+1].lx),h.push(r[n].y),h.push(r[n].ry),h.push(r[n+1].ly);return c.push(r[i-1].x),h.push(r[i-1].y),l&&(c.push(r[i-1].rx),h.push(r[i-1].ry),c.push(r[0].lx),h.push(r[0].ly),c.push(r[0].x),h.push(r[0].y)),[c,h]}},u.Z.Metapost;var b=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];n.Z.Util=n.Z.Util||{},n.Z.Util.Unzip=function(e){var t,r,i,o,s=[],a=0,u=[],l=Array(32768),c=0,h=!1,d=e.length,p=0,f=1,m=Array(288),v=Array(32),g=0,w=null,E=0,N=Array(17),S=[];function A(){return p<d?e[p++]:-1}function P(){var e;try{e=1&f,f>>=1,0===f&&(f=A(),e=1&f,f=f>>1|128)}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return e}function D(e){var t=0,r=e;try{for(;r--;)t=t<<1|P();e&&(t=b[t]>>8-e)}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return t}function M(e){l[c++]=e,s.push(String.fromCharCode(e)),32768===c&&(c=0)}function O(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function T(){for(;;){if(N[E]>=o)return -1;if(i[N[E]]===E)return N[E]++;N[E]++}}function B(e,t,r,n){var s;for(s=0,w=e,g=0,i=r,o=t;s<17;s++)N[s]=0;return(E=0,function e(){var t,r=w[g];if(17===E)return -1;if(g++,E++,(t=T())>=0)r.b0=t;else if(r.b0=32768,e())return -1;if((t=T())>=0)r.b1=t,r.jump=null;else if(r.b1=32768,r.jump=w[g],r.jumppos=g,e())return -1;return E--,0}())?-1:0}function F(e){for(var t,r,i=0,n=e[0];;)if(P()){if(!(32768&n.b1))return n.b1;for(r=0,n=n.jump,t=e.length;r<t;r++)if(e[r]===n){i=r;break}}else{if(!(32768&n.b0))return n.b0;n=e[++i]}}function R(){var e,t,r,i,o,s,a,u,h,d,p,g,w,E;do if(e=P(),0===(t=D(2)))for(f=1,((h=A()|A()<<8)^~(A()|A()<<8))&65535&&n.Z.debug("BlockLen checksum mismatch\n");h--;)M(A());else if(1===t)for(;;)if((i=b[D(7)]>>1)>23?(i=i<<1|P())>199?(i-=128,i=i<<1|P()):(i-=48)>143&&(i+=136):i+=256,i<256)M(i);else if(256===i)break;else for(i-=257,u=D(x[i])+y[i],d=(Z[i=b[D(5)]>>3]>8?D(8)|D(Z[i]-8)<<8:D(Z[i]))+C[i],i=0;i<u;i++)M(l[c-d&32767]);else if(2===t){for(i=0,s=Array(320),g=257+D(5),w=1+D(5),E=4+D(4);i<19;i++)s[i]=0;for(i=0;i<E;i++)s[_[i]]=D(3);for(r=0,u=v.length;r<u;r++)v[r]=new O;if(B(v,19,s,0))return c=0,1;for(p=g+w,r=0;r<p;)if((i=F(v))<16)s[r++]=i;else if(16===i){if(r+(i=3+D(2))>p)return c=0,1;for(o=r?s[r-1]:0;i--;)s[r++]=o}else{if(r+(i=17===i?3+D(3):11+D(7))>p)return c=0,1;for(;i--;)s[r++]=0}for(r=0,u=m.length;r<u;r++)m[r]=new O;if(B(m,g,s,0))return c=0,1;for(r=0,u=m.length;r<u;r++)v[r]=new O;for(a=[],r=g;r<s.length;r++)a[r-g]=s[r];if(B(v,w,a,0))return c=0,1;for(;;)if((i=F(m))>=256){if(0==(i-=256))break;for(i-=1,u=D(x[i])+y[i],d=(Z[i=F(v)]>8?D(8)|D(Z[i]-8)<<8:D(Z[i]))+C[i];u--;)M(l[c-d&32767])}else M(i)}while(!e);return c=0,f=1,0}function k(){var e,i,n,o,l,c=[];try{if(s=[],h=!1,c[0]=A(),c[1]=A(),120===c[0]&&218===c[1]&&(R(),u[a]=[s.join(""),"geonext.gxt"],a++),31===c[0]&&139===c[1]&&(L(),u[a]=[s.join(""),"file"],a++),80===c[0]&&75===c[1]){if(h=!0,c[2]=A(),c[3]=A(),3===c[2]&&4===c[3]){for(c[0]=A(),c[1]=A(),t=A()|A()<<8,l=A()|A()<<8,A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),o=A()|A()<<8,n=A()|A()<<8,e=0,S=[];o--;)i=A(),"/"===i|":"===i?e=0:e<255&&(S[e++]=String.fromCharCode(i));for(r||(r=S),e=0;e<n;)i=A(),e++;if(8===l&&(R(),u[a]=[,,],u[a][0]=s.join(""),u[a][1]=S.join(""),a++),L())return!1}return!0}}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return!1}function L(){var e,r,i=[];if(8&t&&(i[0]=A(),i[1]=A(),i[2]=A(),i[3]=A(),80===i[0]&&75===i[1]&&7===i[2]&&8===i[3]?(A(),A(),A(),A()):(i[0],i[1],i[2],i[3]),A(),A(),A(),A(),A(),A(),A(),A()),h&&k())return!1;if(i[0]=A(),8!==i[0])return!0;if(t=A(),A(),A(),A(),A(),A(),A(),4&t)for(e=0,i[0]=A(),i[2]=A(),E=i[0]+256*i[1];e<E;e++)A();if(8&t)for(e=0,S=[],r=A();r;)("7"===r||":"===r)&&(e=0),e<255&&(S[e++]=r),r=A();if(16&t)for(r=A();r;)r=A();return 2&t&&(A(),A()),R(),A(),A(),A(),A(),A(),A(),A(),A(),h&&k(),!1}N[0]=0,n.Z.Util.Unzip.prototype.unzipFile=function(e){var t;for(this.unzip(),t=0;t<u.length;t++)if(u[t][1]===e)return u[t][0];return""},n.Z.Util.Unzip.prototype.unzip=function(){return k(),u}};var w=n.Z.Util,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];n.Z.Util=n.Z.Util||{},n.Z.Util.UTF8={encode:function(e){var t,r,i="",n=e.length;if(e=e.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(e));for(t=0;t<n;t++)(r=e.charCodeAt(t))<128?i+=String.fromCharCode(r):r>127&&r<2048?i+=String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):i+=String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128);return i},decode:function(e){var t,r,i,n=0,o=0,s=0,a=[],u=e.length,l=[];for(t=0;t<u;t++)i=E[r=e.charCodeAt(t)],o=0!==s?63&r|o<<6:255>>i&r,0===(s=E[256+s+i])&&(o>65535?a.push(55232+(o>>10),56320+(1023&o)):a.push(o),++n%1e4==0&&(l.push(String.fromCharCode.apply(null,a)),a=[]));return l.push(String.fromCharCode.apply(null,a)),l.join("")},asciiCharCodeAt:function(e,t){var r=e.charCodeAt(t);if(r>255)switch(r){case 8364:r=128;break;case 8218:r=130;break;case 402:r=131;break;case 8222:r=132;break;case 8230:r=133;break;case 8224:r=134;break;case 8225:r=135;break;case 710:r=136;break;case 8240:r=137;break;case 352:r=138;break;case 8249:r=139;break;case 338:r=140;break;case 381:r=142;break;case 8216:r=145;break;case 8217:r=146;break;case 8220:r=147;break;case 8221:r=148;break;case 8226:r=149;break;case 8211:r=150;break;case 8212:r=151;break;case 732:r=152;break;case 8482:r=153;break;case 353:r=154;break;case 8250:r=155;break;case 339:r=156;break;case 382:r=158;break;case 376:r=159}return r}};var N=n.Z.Util.UTF8,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n.Z.Util=n.Z.Util||{},n.Z.Util.Base64={_getByte:function(e,t){return 255&e.charCodeAt(t)},_getIndex:function(e,t){return S.indexOf(e.charAt(t))},encode:function(e){var t,r,i,n,o,s=[];for(t=0,n=(i=(o=N.encode(e)).length)%3;t<i-n;t+=3)r=this._getByte(o,t)<<16|this._getByte(o,t+1)<<8|this._getByte(o,t+2),s.push(S.charAt(r>>18),S.charAt(r>>12&63),S.charAt(r>>6&63),S.charAt(63&r));switch(n){case 1:r=this._getByte(o,i-1),s.push(S.charAt(r>>2),S.charAt(r<<4&63),"=","=");break;case 2:r=this._getByte(o,i-2)<<8|this._getByte(o,i-1),s.push(S.charAt(r>>10),S.charAt(r>>4&63),S.charAt(r<<2&63),"=")}return s.join("")},decode:function(e,t){var r,i,n,o,s,a,u=[],l=[];if((n=(r=e.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for("="===r.charAt(n-1)&&(o=1,"="===r.charAt(n-2)&&(o=2),n-=4),i=0;i<n;i+=4)s=this._getIndex(r,i)<<18|this._getIndex(r,i+1)<<12|this._getIndex(r,i+2)<<6|this._getIndex(r,i+3),l.push(s>>16,s>>8&255,255&s),i%1e4==0&&(u.push(String.fromCharCode.apply(null,l)),l=[]);switch(o){case 1:s=this._getIndex(r,n)<<12|this._getIndex(r,n+1)<<6|this._getIndex(r,n+2),l.push(s>>10,s>>2&255);break;case 2:s=this._getIndex(r,i)<<6|this._getIndex(r,i+1),l.push(s>>4)}return u.push(String.fromCharCode.apply(null,l)),a=u.join(""),t&&(a=N.decode(a)),a},decodeAsArray:function(e){var t,r=this.decode(e),i=[],n=r.length;for(t=0;t<n;t++)i[t]=r.charCodeAt(t);return i}};var A=n.Z.Util.Base64;n.Z.Server={modules:{},runningCalls:{},handleError:function(e){n.Z.debug("error occured, server says: "+e.message)},callServer:function(e,t,r,i){var o,s,u,l,c,h;i=i||!1,c=a.Z.toJSON(r);do l=e+Math.floor(4096*Math.random());while(a.Z.exists(this.runningCalls[l]));return this.runningCalls[l]={action:e},a.Z.exists(r.module)&&(this.runningCalls[l].module=r.module),o=n.Z.serverBase+"JXGServer.py",s="action="+escape(e)+"&id="+l+"&dataJSON="+escape(A.encode(c)),this.cbp=function(e){var r,i,n,o,s,u,l;if(r=new w.Unzip(A.decodeAsArray(e)).unzip(),a.Z.isArray(r)&&r.length>0&&(r=r[0][0]),a.Z.exists(r)){if("error"===(i=window.JSON&&window.JSON.parse?window.JSON.parse(r):Function("return "+r)()).type)this.handleError(i);else if("response"===i.type){for(u=0,s=i.id;u<i.fields.length;u++)Function((n=i.fields[u]).namespace+("object"==typeof Function("return "+n.namespace)()?".":".prototype.")+n.name+" = "+n.value)();for(u=0;u<i.handler.length;u++){for(l=0,n=i.handler[u],o=[];l<n.parameters.length;l++)o[l]='"'+n.parameters[l]+'": '+n.parameters[l];Function("if(typeof JXG.Server.modules."+this.runningCalls[s].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[s].module+" = {};"+("JXG.Server.modules."+this.runningCalls[s].module+"."+n.name+"_cb = ")+n.callback+";"+("JXG.Server.modules."+this.runningCalls[s].module+"."+n.name+" = function ("+n.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[s].module+"."+n.name+"_cb;var __JXGSERVER_PAR__ = {"+o.join(",")+', "module": "'+this.runningCalls[s].module+'", "handler": "')+n.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};')()}delete this.runningCalls[s],t(i.data)}}},this.cb=n.Z.bind(this.cbp,this),window.XMLHttpRequest?(u=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):u=new ActiveXObject("Microsoft.XMLHTTP"),!!u&&(u.open("POST",o,!i),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i||(u.onreadystatechange=(h=this.cb,function(){return 4===u.readyState&&200===u.status&&(h(u.responseText),!0)})),u.send(s),!!i)&&(this.cb(u.responseText),!0)},loadModule_cb:function(e){var t;for(t=0;t<e.length;t++)n.Z.debug(e[t].name+": "+e[t].value)},loadModule:function(e){return n.Z.Server.callServer("load",n.Z.Server.loadModule_cb,{module:e},!0)}},n.Z.Server.load=n.Z.Server.loadModule;var P=n.Z.Server;u.Z.Symbolic={generateSymbolicCoordinatesPartial:function(e,t,r,i){var n,o,s,u=t.ancestors,l=0,c=function(e){return"underscore"===i?r+"_{"+e+"}":"brace"===i?r+"["+e+"]":r+e};for(o in e.listOfFreePoints=[],e.listOfDependantPoints=[],u)if(u.hasOwnProperty(o)&&(n=0,a.Z.isPoint(u[o]))){for(s in u[o].ancestors)u[o].ancestors.hasOwnProperty(s)&&n++;0===n?(u[o].symbolic.x=u[o].coords.usrCoords[1],u[o].symbolic.y=u[o].coords.usrCoords[2],e.listOfFreePoints.push(u[o])):(l+=1,u[o].symbolic.x=c(l),l+=1,u[o].symbolic.y=c(l),e.listOfDependantPoints.push(u[o]))}return a.Z.isPoint(t)&&(t.symbolic.x="x",t.symbolic.y="y"),l},clearSymbolicCoordinates:function(e){var t=function(e){var t,r=e&&e.length||0;for(t=0;t<r;t++)a.Z.isPoint(e[t])&&(e[t].symbolic.x="",e[t].symbolic.y="")};t(e.listOfFreePoints),t(e.listOfDependantPoints),delete e.listOfFreePoints,delete e.listOfDependantPoints},generatePolynomials:function(e,t,r){var i,n,o,s,u=t.ancestors,l=[],c=[];for(i in r&&this.generateSymbolicCoordinatesPartial(e,t,"u","brace"),u[t.id]=t,u)if(u.hasOwnProperty(i)&&(s=0,l=[],a.Z.isPoint(u[i]))){for(n in u[i].ancestors)u[i].ancestors.hasOwnProperty(n)&&s++;if(s>0)for(o=0,l=u[i].generatePolynomial();o<l.length;o++)c.push(l[o])}return r&&this.clearSymbolicCoordinates(e),c},geometricLocusByGroebnerBase:function(e,t){var r,n,o,l,c,d,p,f,v,g,b,y,x=e.options.locus,C={},Z=this.generateSymbolicCoordinatesPartial(e,t,"u","brace"),_=new m.Z(s.Z.COORDS_BY_USR,[0,0],e),w=new m.Z(s.Z.COORDS_BY_USR,[e.canvasWidth,e.canvasHeight],e),E=1,N=0,S=0,A=0;if(P.modules.geoloci===i&&P.loadModule("geoloci"),P.modules.geoloci===i)throw Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(d=_.usrCoords[1],p=w.usrCoords[1],f=w.usrCoords[2],v=_.usrCoords[2],x.translateToOrigin&&e.listOfFreePoints.length>0){for(c=0,N=(o=x.toOrigin!==i&&null!==x.toOrigin&&a.Z.isInArray(e.listOfFreePoints,x.toOrigin.id)?x.toOrigin:e.listOfFreePoints[0]).symbolic.x,S=o.symbolic.y;c<e.listOfFreePoints.length;c++)e.listOfFreePoints[c].symbolic.x-=N,e.listOfFreePoints[c].symbolic.y-=S;if(d-=N,p-=N,f-=S,v-=S,x.translateTo10&&e.listOfFreePoints.length>1){for(c=0,l=x.to10!==i&&null!==x.to10&&x.to10.id!==x.toOrigin.id&&a.Z.isInArray(e.listOfFreePoints,x.to10.id)?x.to10:e.listOfFreePoints[0].id===o.id?e.listOfFreePoints[1]:e.listOfFreePoints[0],g=Math.cos(-(A=h.Z.rad([1,0],[0,0],[l.symbolic.x,l.symbolic.y]))),b=Math.sin(-A);c<e.listOfFreePoints.length;c++)y=e.listOfFreePoints[c].symbolic.x,e.listOfFreePoints[c].symbolic.x=g*e.listOfFreePoints[c].symbolic.x-b*e.listOfFreePoints[c].symbolic.y,e.listOfFreePoints[c].symbolic.y=b*y+g*e.listOfFreePoints[c].symbolic.y;if(l.symbolic.y=0,y=d,d=g*d-b*f,f=b*y+g*f,y=p,p=g*p-b*v,v=b*y+g*v,x.stretch&&Math.abs(l.symbolic.x)>u.Z.eps){for(c=0,E=l.symbolic.x;c<e.listOfFreePoints.length;c++)e.listOfFreePoints[c].symbolic.x/=E,e.listOfFreePoints[c].symbolic.y/=E;for(c=0;c<e.objectsList.length;c++)e.objectsList[c].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&"pointRadius"===e.objectsList[c].method&&(C[c]=e.objectsList[c].radius,e.objectsList[c].radius/=E);d/=E,p/=E,f/=E,v/=E,l.symbolic.x=1}}for(c=0;c<e.listOfFreePoints.length;c++)Math.abs(y=e.listOfFreePoints[c].symbolic.x)<u.Z.eps&&(e.listOfFreePoints[c].symbolic.x=0),Math.abs(y-Math.round(y))<u.Z.eps&&(e.listOfFreePoints[c].symbolic.x=Math.round(y)),Math.abs(y=e.listOfFreePoints[c].symbolic.y)<u.Z.eps&&(e.listOfFreePoints[c].symbolic.y=0),Math.abs(y-Math.round(y))<u.Z.eps&&(e.listOfFreePoints[c].symbolic.y=Math.round(y))}for(c in r=this.generatePolynomials(e,t).join(","),this.cbp=function(e){n=e},this.cb=a.Z.bind(this.cbp,this),P.modules.geoloci.lociCoCoA(d,p,f,v,Z,r,E,A,N,S,this.cb,!0),this.clearSymbolicCoordinates(e),C)C.hasOwnProperty(c)&&(e.objects[c].radius=C[c]);return n}};var D=u.Z.Symbolic;u.Z.Clip={_isSeparator:function(e){return isNaN(e.coords.usrCoords[1])&&isNaN(e.coords.usrCoords[2])},makeDoublyLinkedList:function(e){var t,r=null,i=[],n=e.length;if(n>0)for(t=0;t<n;t++){if(this._isSeparator(e[t])){e[t]._next=e[(t+1)%n],e[t]._prev=e[(n+t-1)%n];continue}null===r&&(r=t,i.push(r)),this._isSeparator(e[(t+1)%n])||t===n-1?(e[t]._next=e[r],e[r]._prev=e[t],e[t]._end=!0,r=null):(e[t]._next=e[(t+1)%n],e[r]._prev=e[t]),this._isSeparator(e[(n+t-1)%n])||(e[t]._prev=e[(n+t-1)%n])}return i},Vertex:function(e,t,r,i,n,o){this.pos=t,this.intersection=!0,this.coords=e,this.elementClass=s.Z.OBJECT_CLASS_POINT,this.data={alpha:r,path:i,pathname:n,done:!1,type:o,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(e,t,r){var i=e.length,n=u.Z.eps*u.Z.eps;i>0&&Math.abs(e[i-1].coords.usrCoords[0]-t.usrCoords[0])<n&&Math.abs(e[i-1].coords.usrCoords[1]-t.usrCoords[1])<n&&Math.abs(e[i-1].coords.usrCoords[2]-t.usrCoords[2])<n||e.push({pos:r,intersection:!1,coords:t,elementClass:s.Z.OBJECT_CLASS_POINT})},sortIntersections:function(e){var t,r,i,n,o,s,a=[],u=e.length;for(t=0;t<u;t++)if(e[t].sort(function(e,t){return e.data.alpha>t.data.alpha?1:-1}),e[t].length>0){for(o=e[t].length-1,s=(n=(i=e[t][0]).data.path[i.pos])._next,t===u-1&&(n._end=!1),0===i.data.alpha&&"T"===i.data.type?(n.intersection=!0,n.data=i.data,n.neighbour=i.neighbour,n.neighbour.neighbour=n,n.entry_exit=!1,e[t][0]=n):(i._prev=n,i._prev._next=i),r=1;r<=o;r++)(i=e[t][r])._prev=e[t][r-1],i._prev._next=i;(i=e[t][o])._next=s,i._next._prev=i,t===u-1&&(i._end=!0),a=a.concat(e[t])}return a},_inbetween:function(e,t,r){var i,n=u.Z.eps*u.Z.eps,o=r[1]-t[1],s=r[2]-t[2],a=e[1]-t[1],l=e[2]-t[2];return 0===o&&0===s&&0===a&&0===l||(Math.abs(i=Math.abs(a)<n&&Math.abs(o)<n?l/s:a/o)<n&&(i=0),i)},_print_array:function(e){var t,r;for(t=0;t<e.length;t++)try{r="",e[t]._end&&(r=" end"),console.log(t,e[t].coords.usrCoords,e[t].data.type,"	","prev",e[t]._prev.coords.usrCoords,"next",e[t]._next.coords.usrCoords+r)}catch(r){console.log(t,e[t].coords.usrCoords)}},_print_list:function(e){for(var t,r=0;r<100&&(t=e.data?e.data.alpha:"-",console.log("	",e.coords.usrCoords,"\n		is:",e.intersection,"end:",e._end,t,"\n		-:",e._prev.coords.usrCoords,"\n		+:",e._next.coords.usrCoords,"\n		n:",e.intersection?e.neighbour.coords.usrCoords:"-"),!e._end);)e=e._next,r++},_noOverlap:function(e,t,r,i){var n,o,s,a,l,c=Math.sqrt(u.Z.eps),h=!1;for(n=0;n<3;n++)if(o=Math.min(e[n],t[n]),s=Math.max(e[n],t[n]),a=Math.min(r[n],i[n]),l=Math.max(r[n],i[n]),s<a-c||o>l+c){h=!0;break}return h},findIntersections:function(e,t,r){var i,n,o,a,l,c,d,p,f,v,g,b,y,x=[],C=100*u.Z.eps,Z=e.length,_=t.length,w=[],E=[],N=[],S=[],A=!1,P=!1;for(n=0;n<_;n++)S.push([]);for(i=0;i<Z;i++){if(N.push([]),this._isSeparator(e[i])||this._isSeparator(e[(i+1)%Z])){A=!0;continue}if(A&&i===Z-1)break;for(n=0,a=e[i].coords.usrCoords,l=e[(i+1)%Z].coords.usrCoords;n<_;n++){if(this._isSeparator(t[n])||this._isSeparator(t[(n+1)%_])){P=!0;continue}if(P&&n===_-1)break;if(c=t[n].coords.usrCoords,d=t[(n+1)%_].coords.usrCoords,!this._noOverlap(a,l,c,d)&&(x=h.Z.meetSegmentSegment(a,l,c,d),p=h.Z.distance(a,l,3),f=h.Z.distance(c,d,3),x[1]*p>-C&&x[1]<1-C/p&&x[2]*f>-C&&x[2]<1-C/f||x[1]===1/0&&x[2]===1/0&&u.Z.norm(x[0],3)<C)){if(o=new m.Z(s.Z.COORDS_BY_USER,x[0],r),g="X",Math.abs(x[1])*p<C||Math.abs(x[2])*f<C)g="T",Math.abs(x[1])*p<C&&(x[1]=0),Math.abs(x[2])*f<C&&(x[2]=0),o=0===x[1]?new m.Z(s.Z.COORDS_BY_USER,a,r):new m.Z(s.Z.COORDS_BY_USER,c,r);else if(x[1]===1/0&&x[2]===1/0&&u.Z.norm(x[0],3)<C){(v=this._inbetween(a,c,d))>=0&&v<1&&(g="T",o=new m.Z(s.Z.COORDS_BY_USER,a,r),x[1]=0,x[2]=v,b=new this.Vertex(o,i,x[1],e,"S",g),y=new this.Vertex(o,n,x[2],t,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y)),v=this._inbetween(c,a,l),h.Z.distance(a,c,3)>C&&v>=0&&v<1&&(g="T",o=new m.Z(s.Z.COORDS_BY_USER,c,r),x[1]=v,x[2]=0,b=new this.Vertex(o,i,x[1],e,"S",g),y=new this.Vertex(o,n,x[2],t,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y));continue}b=new this.Vertex(o,i,x[1],e,"S",g),y=new this.Vertex(o,n,x[2],t,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y)}}}for(w=this.sortIntersections(N),i=0;i<w.length;i++)w[i].data.idx=i,w[i].neighbour.data.idx=i;return[w,this.sortIntersections(S)]},_getPosition:function(e,t,r,i){var n=h.Z.det3p(e,t,r),o=h.Z.det3p(e,r,i);return h.Z.det3p(t,r,i)>=0?n>=0&&o>=0?"left":"right":n>=0||o>=0?"left":"right"},_classifyDegenerateIntersections:function(e){var t,r,i,n,o,s,l,c,d,p,f,m,v,g;for(d=h.Z.det3p,l=0,e._tours=0;;){if(e.intersection&&"T"===e.data.type&&(t=e._next.coords.usrCoords,r=e._prev.coords.usrCoords,h.Z.distance(e.coords.usrCoords,t,3)<u.Z.eps&&(t=e._next._next.coords.usrCoords),h.Z.distance(e.coords.usrCoords,r,3)<u.Z.eps&&(r=e._prev._prev.coords.usrCoords),n=(o=e.neighbour)._prev.coords.usrCoords,i=o._next.coords.usrCoords,h.Z.distance(o.coords.usrCoords,i,3)<u.Z.eps&&(i=o._next._next.coords.usrCoords),h.Z.distance(o.coords.usrCoords,n,3)<u.Z.eps&&(n=o._prev._prev.coords.usrCoords),f=d(e.coords.usrCoords,r,n),m=d(e.coords.usrCoords,t,i),v=d(e.coords.usrCoords,r,i),g=d(e.coords.usrCoords,t,n),0===f&&0===m&&0===v&&0===g&&(e.coords.usrCoords[1]*=1+Math.random()*u.Z.eps,e.coords.usrCoords[2]*=1+Math.random()*u.Z.eps,o.coords.usrCoords[1]=e.coords.usrCoords[1],o.coords.usrCoords[2]=e.coords.usrCoords[2],f=d(e.coords.usrCoords,r,n),m=d(e.coords.usrCoords,t,i),v=d(e.coords.usrCoords,r,i),g=d(e.coords.usrCoords,t,n)),p=!1,0===f?0>h.Z.affineRatio(e.coords.usrCoords,r,n)&&(p=!0):0===m?0>h.Z.affineRatio(e.coords.usrCoords,t,i)&&(p=!0):0===v?h.Z.affineRatio(e.coords.usrCoords,r,i)>0&&(p=!0):0===g&&h.Z.affineRatio(e.coords.usrCoords,t,n)>0&&(p=!0),p&&(c=n,n=i,i=c,c=f,f=v,v=c,c=m,m=g,g=c),a.Z.exists(e.delayedStatus)||(e.delayedStatus=[]),0===f&&0===m?e.delayedStatus=["on","on"]:0===f?(s=this._getPosition(t,n,o.coords.usrCoords,i),e.delayedStatus=["on",s]):0===m?(s=this._getPosition(r,n,o.coords.usrCoords,i),e.delayedStatus=[s,"on"]):0===e.delayedStatus.length&&(this._getPosition(r,n,o.coords.usrCoords,i)!==this._getPosition(t,n,o.coords.usrCoords,i)?e.data.type="X":e.data.type="B")),a.Z.exists(e._tours)&&e._tours++,e._tours>3||e._end||l>1e3){l>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),a.Z.exists(e._tours)&&delete e._tours;break}e.intersection&&l++,e=e._next}},_handleIntersectionChains:function(e){for(var t,r=0,i="Null",n=!1,o=!1;!0===e.intersection&&("T"===e.data.type&&("on"!==e.delayedStatus[0]&&"on"===e.delayedStatus[1]?(n=!0,t=e,i=e.delayedStatus[0]):n&&"on"===e.delayedStatus[0]&&"on"===e.delayedStatus[1]?e.data.type="B":n&&"on"===e.delayedStatus[0]&&"on"!==e.delayedStatus[1]&&(n=!1,i===e.delayedStatus[1]?(t.data.type="DB",e.data.type="DB"):(t.data.type="DX",e.data.type="DX"))),r++),e._end&&(o=!0),!o||n;){if(r>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}e=e._next}},_handleFullyDegenerateCase:function(e,t,r){var i,n,o,a,l,c,d,p,f,v,g,b,y,x,C=[e,t];for(o=0;o<2;o++){for(p=0,v=(i=C[o]).length,x=!0;p<v;p++)if(!i[p].intersection){x=!1;break}if(x)for(p=0,g=(n=C[(o+1)%2]).length;p<v;p++){for(f=0,l=i[p].coords.usrCoords,c=i[p]._next.coords.usrCoords,a=[(l[0]+c[0])*.5,(l[1]+c[1])*.5,(l[2]+c[2])*.5],b=!1;f<g;f++)if(Math.abs(h.Z.det3p(n[f].coords.usrCoords,n[(f+1)%g].coords.usrCoords,a))<u.Z.eps){b=!0;break}if(!b){d={pos:p,intersection:!1,coords:new m.Z(s.Z.COORDS_BY_USER,a,r),elementClass:s.Z.OBJECT_CLASS_POINT},y=i[p]._next,i[p]._next=d,d._prev=i[p],d._next=y,y._prev=d,i[p]._end&&(i[p]._end=!1,d._end=!0);break}}}},_getStatus:function(e,t){for(var r;e.intersection&&!e._end;)e=e._next;return r=0===h.Z.windingNumber(e.coords.usrCoords,t)?"entry":"exit",[e,r]},markEntryExit:function(e,t,r){var i,n,o,s,u,l,c,h=null,d=0;for(u=0,l=r.length;u<l;u++)for(c=r[u],this._classifyDegenerateIntersections(e[c]),this._handleIntersectionChains(e[c]),n=(s=this._getStatus(e[c],t))[0],i=s[1],n._starter=!0,o=0,h=null,d=0;!0===n.intersection&&("X"===n.data.type&&1===d&&(h.entry_exit=i,"exit"===i&&(h.data.type="X"),d=2),("X"===n.data.type||"DB"===n.data.type)&&(n.entry_exit=i,i="entry"===i?"exit":"entry"),"DX"===n.data.type&&(0===d?(h=n,d=1):1===d?(n.entry_exit=i,h.entry_exit=i,"exit"===i?h.data.type="X":n.data.type="X",i="entry"===i?"exit":"entry",h=null,d=0):2===d&&(n.entry_exit=i,n.data.type="X",i="entry"===i?"exit":"entry",h=null,d=0))),n=n._next,!a.Z.exists(n._starter)&&!(o>1e4);)o++},_stayOnPath:function(e,t){var r=!0;return e.intersection&&"B"!==e.data.type&&(r=t===e.entry_exit),r},_addVertex:function(e,t,r){return(isNaN(t.coords.usrCoords[1])||isNaN(t.coords.usrCoords[2])||e.push(t),t.intersection&&t.data.done)?(r&&console.log("Add last intersection point",t.coords.usrCoords,"on",t.data.pathname,t.entry_exit,t.data.type),!0):(t.intersection&&(t.data.done=!0,r&&console.log("Add intersection point",t.coords.usrCoords,"on",t.data.pathname,t.entry_exit,t.data.type)),!1)},tracing:function(e,t,r){for(var i,n,o,s,a=0,u=0,l=[],c=!1;u<t.length&&a<1e4;){if((o=t[u]).data.done||"X"!==o.data.type){u++;continue}l.length>0&&l.push([NaN,NaN]),s=o.data.idx,i=e,c=this._addVertex(l,o,!1),n=o.entry_exit;do{if(c)break;if("intersection"===r&&"entry"===o.entry_exit||"union"===r&&"exit"===o.entry_exit||"difference"===r&&i===e==("exit"===o.entry_exit)){do if(o=o._next,c=this._addVertex(l,o,!1))break;while(this._stayOnPath(o,n));a++}else{do if(o=o._prev,c=this._addVertex(l,o,!1))break;while(this._stayOnPath(o,n));a++}if(c)break;if(!o.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",a),[[0],[0]];if((o=o.neighbour).data.done)break;o.data.done=!0,n=o.entry_exit,i=o.data.path}while(o.data.idx!==s&&a<1e4);a>=1e4&&console.log("Tracing: stopping an infinite loop!",a),u++}return this._getCoordsArrays(l,!1)},isEmptyCase:function(e,t,r){return"intersection"===r&&(0===e.length||0===t.length)||"union"===r&&0===e.length&&0===t.length||"difference"===r&&0===e.length},_getCoordsArrays:function(e,t){var r,i=[],n=[],o=e.length;for(r=0;r<o;r++)e[r].coords?(i.push(e[r].coords.usrCoords[1]),n.push(e[r].coords.usrCoords[2])):(i.push(e[r][0]),n.push(e[r][1]));return t&&o>0&&(e[0].coords?(i.push(e[0].coords.usrCoords[1]),n.push(e[0].coords.usrCoords[2])):(i.push(e[0][0]),n.push(e[0][1]))),[i,n]},handleEmptyIntersection:function(e,t,r){var i,n,o=!1,s=[];if(0===e.length)return s="union"===r?t:[],this._getCoordsArrays(s,!0);if(0===t.length)return s="intersection"===r?[]:e,this._getCoordsArrays(s,!0);if(e.length>0)for(i=e[0];i.intersection&&!(i=i._next)._end;);if(t.length>0)for(n=t[0];n.intersection&&!(n=n._next)._end;);return 0===h.Z.windingNumber(i.coords.usrCoords,t)?0!==h.Z.windingNumber(n.coords.usrCoords,e)?("union"===r?(s=s.concat(e)).push(e[0]):"difference"===r&&((s=s.concat(e)).push(e[0]),h.Z.signedPolygon(e)*h.Z.signedPolygon(t)>0&&s.reverse(),s.push([NaN,NaN])),("difference"===r||"intersection"===r)&&((s=s.concat(t)).push(t[0]),o=!1)):"difference"===r?(s=s.concat(e),o=!0):"union"===r&&((s=s.concat(e)).push(e[0]),s.push([NaN,NaN]),(s=s.concat(t)).push(t[0])):"intersection"===r?(s=s.concat(e),o=!0):"union"===r&&(s=s.concat(t)).push(t[0]),this._getCoordsArrays(s,o)},_countCrossingIntersections:function(e){var t,r=e.length,i=0;for(t=0;t<r;t++)"X"===e[t].data.type&&i++;return i},_getPath:function(e,t){var r,i,n,o,u,l,c,d=[];if(e.elementClass===s.Z.OBJECT_CLASS_CURVE&&(e.type===s.Z.OBJECT_TYPE_ARC||e.type===s.Z.OBJECT_TYPE_SECTOR)){for(c=Math.floor(180*(u=h.Z.rad(e.radiuspoint,e.center,e.anglepoint))/Math.PI),n=e.Radius(),o=u/c,l=Math.atan2(e.radiuspoint.coords.usrCoords[2]-e.center.coords.usrCoords[2],e.radiuspoint.coords.usrCoords[1]-e.center.coords.usrCoords[1]),e.type===s.Z.OBJECT_TYPE_SECTOR&&this._addToList(d,e.center.coords,0),r=0;r<=c;r++)this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,[e.center.coords.usrCoords[0],e.center.coords.usrCoords[1]+Math.cos(r*o+l)*n,e.center.coords.usrCoords[2]+Math.sin(r*o+l)*n],t),r+1);e.type===s.Z.OBJECT_TYPE_SECTOR&&this._addToList(d,e.center.coords,c+2)}else if(e.elementClass===s.Z.OBJECT_CLASS_CURVE&&a.Z.exists(e.points))for(r=0,i=e.numberPoints;r<i;r++)this._addToList(d,e.points[r],r);else if(e.type===s.Z.OBJECT_TYPE_POLYGON)for(r=0;r<e.vertices.length;r++)this._addToList(d,e.vertices[r].coords,r);else if(e.elementClass===s.Z.OBJECT_CLASS_CIRCLE)for(r=0,c=359,n=e.Radius(),o=2*Math.PI/c;r<=c;r++)this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,[e.center.coords.usrCoords[0],e.center.coords.usrCoords[1]+Math.cos(r*o)*n,e.center.coords.usrCoords[2]+Math.sin(r*o)*n],t),r);else if(a.Z.isArray(e))for(r=0,i=e.length;r<i;r++)a.Z.exists(e[r].coords)?this._addToList(d,e[r].coords,r):a.Z.isArray(e[r])?this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,e[r],t),r):a.Z.exists(e[r].usrCoords)&&this._addToList(d,e[r],r);return d},greinerHormann:function(e,t,r,i){var n,o,s,a=[],l=[],c=[];return((n=(a=this._getPath(e,i)).length)>0&&h.Z.distance(a[0].coords.usrCoords,a[n-1].coords.usrCoords,3)<u.Z.eps&&a.pop(),(n=(l=this._getPath(t,i)).length)>0&&h.Z.distance(l[0].coords.usrCoords,l[n-1].coords.usrCoords,3)<u.Z.eps*u.Z.eps&&l.pop(),this.isEmptyCase(a,l,r))?[[],[]]:(o=this.makeDoublyLinkedList(a),s=this.makeDoublyLinkedList(l),c=this.findIntersections(a,l,i)[0],this._handleFullyDegenerateCase(a,l,i),this.markEntryExit(a,l,o),this.markEntryExit(l,a,s),0===this._countCrossingIntersections(c))?this.handleEmptyIntersection(a,l,r):this.tracing(a,c,r)},union:function(e,t,r){return this.greinerHormann(e,t,"union",r)},intersection:function(e,t,r){return this.greinerHormann(e,t,"intersection",r)},difference:function(e,t,r){return this.greinerHormann(e,t,"difference",r)}},n.Z.extend(u.Z.Clip,{}),u.Z.Clip,u.Z.Poly={},u.Z.Poly.Ring=function(e){this.vars=e},n.Z.extend(u.Z.Poly.Ring.prototype,{}),u.Z.Poly.Monomial=function(e,t,r){var i;if(!a.Z.exists(e))throw Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(a.Z.isArray(r)||(r=[]),i=(r=r.slice(0,e.vars.length)).length;i<e.vars.length;i++)r.push(0);this.ring=e,this.coefficient=t||0,this.exponents=a.Z.deepCopy(r)},n.Z.extend(u.Z.Poly.Monomial.prototype,{copy:function(){return new u.Z.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var e,t=[];for(e=0;e<this.ring.vars.length;e++)t.push(this.ring.vars[e]+"^"+this.exponents[e]);return this.coefficient+"*"+t.join("*")}}),u.Z.Poly.Polynomial=function(e,t){var r;if(!a.Z.exists(e))throw Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");r=a.Z.exists(t)&&a.Z.isString(t)?void 0:[],this.ring=e,this.monomials=r},n.Z.extend(u.Z.Poly.Polynomial.prototype,{findSignature:function(e){var t;for(t=0;t<this.monomials.length;t++)if(a.Z.cmpArrays(this.monomials[t].exponents,e))return t;return -1},addSubMonomial:function(e,t){var r;(r=this.findSignature(e.exponents))>-1?this.monomials[r].coefficient+=t*e.coefficient:(e.coefficient*=t,this.monomials.push(e))},add:function(e){var t;if(a.Z.exists(e)&&e.ring===this.ring){if(a.Z.isArray(e.exponents))this.addSubMonomial(e,1);else for(t=0;t<e.monomials.length;t++)this.addSubMonomial(e.monomials[t],1)}else throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.")},sub:function(e){var t;if(a.Z.exists(e)&&e.ring===this.ring){if(a.Z.isArray(e.exponents))this.addSubMonomial(e,-1);else for(t=0;t<e.monomials.length;t++)this.addSubMonomial(e.monomials[t],-1)}else throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.")},copy:function(){var e,t;for(e=0,t=new u.Z.Poly.Polynomial(this.ring);e<this.monomials.length;e++)t.monomials.push(this.monomials[e].copy());return t},print:function(){var e,t=[];for(e=0;e<this.monomials.length;e++)t.push("("+this.monomials[e].print()+")");return t.join("+")}}),u.Z.Poly,r(2971);var M=r(9399);n.Z.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},n.Z.extend(n.Z.AbstractRenderer.prototype,{_updateVisual:function(e,t,r){(r||this.enhancedRendering)&&(t=t||{},this.setObjectViewport(e),this.setObjectTransition(e),a.Z.evaluate(e.visProp.draft)?this.setDraft(e):(t.stroke||(e.highlighted?(this.setObjectStrokeColor(e,e.visProp.highlightstrokecolor,e.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(e,e.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(e,e.visProp.strokecolor,e.visProp.strokeopacity),this.setObjectStrokeWidth(e,e.visProp.strokewidth))),t.fill||(e.highlighted?this.setObjectFillColor(e,e.visProp.highlightfillcolor,e.visProp.highlightfillopacity):this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity)),t.dash||this.setDashStyle(e,e.visProp),t.shadow||this.setShadow(e),t.tabindex||this.setTabindex(e)))},_getHighlighted:function(e){var t=!1;return a.Z.exists(e.board)&&a.Z.exists(e.board.highlightedObjects)||(t=!0),!t&&a.Z.exists(e.board.highlightedObjects[e.id])?"highlight":""},drawPoint:function(e){var t,r=M.Z.normalizePointFace(a.Z.evaluate(e.visProp.face));t="o"===r?"ellipse":"[]"===r?"rect":"path",e.rendNode=this.appendChildPrim(this.createPrim(t,e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,t),this._updateVisual(e,{dash:!0,shadow:!0},!0),this.updatePoint(e)},updatePoint:function(e){var t,r=a.Z.evaluate(e.visProp.size),i=M.Z.normalizePointFace(a.Z.evaluate(e.visProp.face)),n=a.Z.evaluate(e.visProp.sizeunit),o=a.Z.evaluate(e.visProp.zoom);isNaN(e.coords.scrCoords[2]+e.coords.scrCoords[1])||("user"===n&&(r*=Math.sqrt(Math.abs(e.board.unitX*e.board.unitY))),r*=e.board&&o?Math.sqrt(e.board.zoomX*e.board.zoomY):1,t=0===r?0:r+1,"o"===i?this.updateEllipsePrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2],t,t):"[]"===i?this.updateRectPrim(e.rendNode,e.coords.scrCoords[1]-r,e.coords.scrCoords[2]-r,2*r,2*r):this.updatePathPrim(e.rendNode,this.updatePathStringPoint(e,r,i),e.board),this._updateVisual(e,{dash:!1,shadow:!1}),this.setShadow(e))},changePointStyle:function(e){var t=this.getElementById(e.id);a.Z.exists(t)&&this.remove(t),this.drawPoint(e),a.Z.clearVisPropOld(e),e.visPropCalc.visible||this.display(e,!1),a.Z.evaluate(e.visProp.draft)&&this.setDraft(e)},drawLine:function(e){e.rendNode=this.appendChildPrim(this.createPrim("line",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"lines"),this.updateLine(e)},updateLine:function(e){this._updateVisual(e),this.updatePathWithArrowHeads(e),this.setLineCap(e)},drawCurve:function(e){e.rendNode=this.appendChildPrim(this.createPrim("path",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"path"),this.updateCurve(e)},updateCurve:function(e){this._updateVisual(e),this.updatePathWithArrowHeads(e),this.setLineCap(e)},updatePathWithArrowHeads:function(e,t){var r,i,n=e.visProp;r=t&&n.highlightstrokewidth?Math.max(a.Z.evaluate(n.highlightstrokewidth),a.Z.evaluate(n.strokewidth)):a.Z.evaluate(n.strokewidth),i=this.getArrowHeadData(e,r,t?"highlight":""),this.makeArrows(e,i),e.elementClass===s.Z.OBJECT_CLASS_LINE?this.updateLineWithEndings(e,i):e.elementClass===s.Z.OBJECT_CLASS_CURVE&&this.updatePath(e),this.setArrowSize(e,i)},getArrowHeadData:function(e,t,r){var i,n,o,l,c=u.Z.eps,h=0,d=0,p=0,f=0,m=a.Z.evaluate(e.visProp.firstarrow),v=a.Z.evaluate(e.visProp.lastarrow);return(m||v)&&(i=a.Z.exists(m.type)?a.Z.evaluate(m.type):e.elementClass===s.Z.OBJECT_CLASS_LINE?1:7,n=a.Z.exists(v.type)?a.Z.evaluate(v.type):e.elementClass===s.Z.OBJECT_CLASS_LINE?1:7,m&&(l=6,a.Z.exists(m.size)&&(l=a.Z.evaluate(m.size)),""!==r&&a.Z.exists(m[r+"size"])&&(l=a.Z.evaluate(m[r+"size"])),o=t*l,2===i?(o*=.5,c+=t*l):3===i?(o=t*l/3,c+=t):4===i||5===i||6===i?(o=t*l/1.5,c+=t*l):7===i?(o=0,l=10,c+=t):c+=t*l,h+=o,p=l),v&&(l=6,a.Z.exists(v.size)&&(l=a.Z.evaluate(v.size)),""!==r&&a.Z.exists(v[r+"size"])&&(l=a.Z.evaluate(v[r+"size"])),o=t*l,2===n?(o*=.5,c+=t*l):3===n?(o=t*l/3,c+=t):4===n||5===n||6===n?(o=t*l/1.5,c+=t*l):7===n?(o=0,l=10,c+=t):c+=t*l,d+=o,f=l)),e.visPropCalc.typeFirst=i,e.visPropCalc.typeLast=n,{evFirst:m,evLast:v,typeFirst:i,typeLast:n,offFirst:h,offLast:d,sizeFirst:p,sizeLast:f,showFirst:1,showLast:1,minLen:c,strokeWidth:t}},updateLineWithEndings:function(e,t){var r,i,n=null;return r=new m.Z(s.Z.COORDS_BY_USER,e.point1.coords.usrCoords,e.board),i=new m.Z(s.Z.COORDS_BY_USER,e.point2.coords.usrCoords,e.board),n=a.Z.evaluate(e.visProp.margin),h.Z.calcStraight(e,r,i,n),this.handleTouchpoints(e,r,i,t),this.getPositionArrowHead(e,r,i,t),this.updateLinePrim(e.rendNode,r.scrCoords[1],r.scrCoords[2],i.scrCoords[1],i.scrCoords[2],e.board),this},updatePath:function(e){return a.Z.evaluate(e.visProp.handdrawing)?this.updatePathPrim(e.rendNode,this.updatePathStringBezierPrim(e),e.board):this.updatePathPrim(e.rendNode,this.updatePathStringPrim(e),e.board),this},getPositionArrowHead:function(e,t,r,i){var n,o,a,u,l;return(i.evFirst||i.evLast)&&(o=a=u=l=0,n=t.distance(s.Z.COORDS_BY_SCREEN,r),i.evFirst&&"vml"!==e.board.renderer.type&&(n>=i.minLen?(o=(r.scrCoords[1]-t.scrCoords[1])*i.offFirst/n,a=(r.scrCoords[2]-t.scrCoords[2])*i.offFirst/n):i.showFirst=0),i.evLast&&"vml"!==e.board.renderer.type&&(n>=i.minLen?(u=(r.scrCoords[1]-t.scrCoords[1])*i.offLast/n,l=(r.scrCoords[2]-t.scrCoords[2])*i.offLast/n):i.showLast=0),t.setCoordinates(s.Z.COORDS_BY_SCREEN,[t.scrCoords[1]+o,t.scrCoords[2]+a],!1,!0),r.setCoordinates(s.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-u,r.scrCoords[2]-l],!1,!0)),this},handleTouchpoints:function(e,t,r,i){var n,o,u,l,c,h,d;return(i.evFirst||i.evLast)&&(u=l=c=h=d=0,n=a.Z.evaluate(e.point1.visProp.size)+a.Z.evaluate(e.point1.visProp.strokewidth),o=a.Z.evaluate(e.point2.visProp.size)+a.Z.evaluate(e.point2.visProp.strokewidth),i.evFirst&&a.Z.evaluate(e.visProp.touchfirstpoint)&&a.Z.evaluate(e.point1.visProp.visible)&&(u=t.distance(s.Z.COORDS_BY_SCREEN,r),l=(r.scrCoords[1]-t.scrCoords[1])*n/u,c=(r.scrCoords[2]-t.scrCoords[2])*n/u),i.evLast&&a.Z.evaluate(e.visProp.touchlastpoint)&&a.Z.evaluate(e.point2.visProp.visible)&&(u=t.distance(s.Z.COORDS_BY_SCREEN,r),h=(r.scrCoords[1]-t.scrCoords[1])*o/u,d=(r.scrCoords[2]-t.scrCoords[2])*o/u),t.setCoordinates(s.Z.COORDS_BY_SCREEN,[t.scrCoords[1]+l,t.scrCoords[2]+c],!1,!0),r.setCoordinates(s.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-h,r.scrCoords[2]-d],!1,!0)),this},setArrowSize:function(e,t){return t.evFirst&&this._setArrowWidth(e.rendNodeTriangleStart,t.showFirst*t.strokeWidth,e.rendNode,t.sizeFirst),t.evLast&&this._setArrowWidth(e.rendNodeTriangleEnd,t.showLast*t.strokeWidth,e.rendNode,t.sizeLast),this},setLineCap:function(e){},drawTicks:function(e){e.rendNode=this.appendChildPrim(this.createPrim("path",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"path")},updateTicks:function(e){},drawEllipse:function(e){e.rendNode=this.appendChildPrim(this.createPrim("ellipse",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"ellipse"),this.updateEllipse(e)},updateEllipse:function(e){this._updateVisual(e);var t=e.Radius();Math.abs(e.center.coords.usrCoords[0])>u.Z.eps&&!isNaN(t+e.center.coords.scrCoords[1]+e.center.coords.scrCoords[2])&&t*e.board.unitX<2e6&&this.updateEllipsePrim(e.rendNode,e.center.coords.scrCoords[1],e.center.coords.scrCoords[2],t*e.board.unitX,t*e.board.unitY),this.setLineCap(e)},drawPolygon:function(e){e.rendNode=this.appendChildPrim(this.createPrim("polygon",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"polygon"),this.updatePolygon(e)},updatePolygon:function(e){this._updateVisual(e,{stroke:!0,dash:!0}),this.updatePolygonPrim(e.rendNode,e)},displayCopyright:function(e,t){},drawInternalText:function(e){},updateInternalText:function(e){},drawText:function(e){var t,r,i,n;"html"===a.Z.evaluate(e.visProp.display)&&o.Z.isBrowser&&"no"!==this.type?((t=this.container.ownerDocument.createElement("div")).style.position="absolute",t.className=a.Z.evaluate(e.visProp.cssclass),i=a.Z.evaluate(e.visProp.layer),a.Z.exists(i)||(i=0),r=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),t.style.zIndex=r+i,this.container.appendChild(t),t.setAttribute("id",this.container.id+"_"+e.id)):t=this.drawInternalText(e),e.rendNode=t,e.htmlStr="",e.visProp.islabel&&a.Z.exists(e.visProp.anchor)?(n=a.Z.evaluate(e.visProp.anchor.visProp.visible),e.prepareUpdate().updateVisibility(n)):e.prepareUpdate().updateVisibility(),this.updateText(e)},updateText:function(e){var t,r,i,o,s,u,l,c,h,d,p,f=e.plaintext;if(e.visPropCalc.visible){if(this.updateTextStyle(e,!1),"html"===a.Z.evaluate(e.visProp.display)&&"no"!==this.type){if(isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(r=1e6>Math.abs(r=e.coords.scrCoords[1])?r:1e6,"right"===(s=e.getAnchorX())?(t=e.board.canvasWidth-r,d="right"):"middle"===s?(t=r-.5*e.size[0],d="center"):(t=r,d="left"),e.visPropOld.left!==s+t&&("right"===s?(e.rendNode.style.right=t+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=t+"px",e.rendNode.style.right="auto"),e.visPropOld.left=s+t),r=1e6>Math.abs(r=e.coords.scrCoords[2]+this.vOffsetText)?r:1e6,"bottom"===(u=e.getAnchorY())?(t=e.board.canvasHeight-r,p="bottom"):"middle"===u?(t=r-.5*e.size[1],p="center"):(t=r,p="top"),e.visPropOld.top===u+t||("bottom"===u?(e.rendNode.style.top="auto",e.rendNode.style.bottom=t+"px"):(e.rendNode.style.bottom="auto",e.rendNode.style.top=t+"px"),e.visPropOld.top=u+t)),e.htmlStr!==f){try{e.type===a.Z.OBJECT_TYPE_BUTTON?e.rendNodeButton.innerHTML=f:e.type===a.Z.OBJECT_TYPE_CHECKBOX||e.type===a.Z.OBJECT_TYPE_INPUT?e.rendNodeLabel.innerHTML=f:e.rendNode.innerHTML=f}catch(t){i=e.rendNode.parentNode,e.rendNode.parentNode.removeChild(e.rendNode),e.rendNode.innerHTML=f,i.appendChild(e.rendNode)}if(e.htmlStr=f,a.Z.evaluate(e.visProp.usemathjax))try{MathJax.typeset?(MathJax.typeset([e.rendNode]),console.log(e.id,e.rendNode)):MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.rendNode])}catch(e){n.Z.debug("MathJax (not yet) loaded")}else if(a.Z.evaluate(e.visProp.usekatex))try{(o=0===e.rendNode.innerHTML.indexOf("<span")&&e.rendNode.innerHTML.indexOf("<label")>0&&(e.rendNode.innerHTML.indexOf("<checkbox")>0||e.rendNode.innerHTML.indexOf("<input")>0)?e.rendNodeLabel:0===e.rendNode.innerHTML.indexOf("<button")?e.rendNodeButton:e.rendNode)&&katex.render(f,o,{macros:a.Z.evaluate(e.visProp.katexmacros),throwOnError:!1})}catch(e){n.Z.debug("KaTeX not loaded (yet)")}else if(a.Z.evaluate(e.visProp.useasciimathml))try{AMprocessNode(e.rendNode,!1)}catch(e){n.Z.debug("AsciiMathML not loaded (yet)")}}0!==(l=a.Z.evaluate(e.visProp.rotate))&&(l*=Math.PI/180,c=Math.cos(l),h=Math.sin(l),e.rendNode.style.transform="matrix("+[c,-1*h,h,c,0,0].join(",")+")",e.rendNode.style["transform-origin"]=d+" "+p),this.transformImage(e,e.transformations)}else this.updateInternalText(e)}},_css2js:function(e){var t,r,i,n=[],o=a.Z.trim(e).replace(/;$/,"").split(";");for(t=0,r=o.length;t<r;++t)""!==a.Z.trim(o[t])&&(i=o[t].split(":"),n.push({key:a.Z.trim(i[0].replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})),val:a.Z.trim(i[1])}));return n},updateTextStyle:function(e,t){var r,i,n,s,u,l,c,h,d,p=e.visProp,f=o.Z.isBrowser?p.display:"internal",m=["rendNode","rendNodeTag","rendNodeLabel"],v=m.length,g=a.Z.evaluate(p.fontunit),b=["cssdefaultstyle","cssstyle"],y=b.length;if(t?(n=p.highlightstrokecolor,i=p.highlightstrokeopacity,s=p.highlightcssclass):(n=p.strokecolor,i=p.strokeopacity,s=p.cssclass),"no"!==this.type&&("html"===f||"canvas"!==this.type)){for(h=0;h<y;h++)if(""!==(d=a.Z.evaluate(p[(t?"highlight":"")+b[h]]))&&e.visPropOld[b[h]]!==d){for(u=0,l=this._css2js(d);u<v;u++)if(a.Z.exists(e[m[u]]))for(c in l)l.hasOwnProperty(c)&&(e[m[u]].style[l[c].key]=l[c].val);e.visPropOld[b[h]]=d}if(r=a.Z.evaluate(p.fontsize),e.visPropOld.fontsize!==r){e.needsSizeUpdate=!0;try{for(u=0;u<v;u++)a.Z.exists(e[m[u]])&&(e[m[u]].style.fontSize=r+g)}catch(t){for(u=0;u<v;u++)a.Z.exists(e[m[u]])&&(e[m[u]].style.fontSize=r)}e.visPropOld.fontsize=r}}return this.setTabindex(e),this.setObjectTransition(e),"html"===f&&"no"!==this.type?(this.setObjectViewport(e,!0),e.visPropOld.cssclass!==s&&(e.rendNode.className=s,e.visPropOld.cssclass=s,e.needsSizeUpdate=!0),this.setObjectStrokeColor(e,n,i)):this.updateInternalTextStyle(e,n,i),this},updateInternalTextStyle:function(e,t,r){this.setObjectStrokeColor(e,t,r)},drawImage:function(e){},updateImage:function(e){this.updateRectPrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),this.updateImageURL(e),this.transformImage(e,e.transformations),this._updateVisual(e,{stroke:!0,dash:!0},!0)},joinTransforms:function(e,t){var r,i=e.board.origin.scrCoords[1],n=e.board.origin.scrCoords[2],o=e.board.unitX,s=e.board.unitY,a=t.length,l=[[1,0,0],[-i/o,1/o,0],[n/s,0,-1/s]];for(r=0;r<a;r++)l=u.Z.matMatMult(t[r].matrix,l);return u.Z.matMatMult([[1,0,0],[i,o,0],[n,0,-s]],l)},transformImage:function(e,t){},updateImageURL:function(e){},updateImageStyle:function(e,t){e.rendNode.className=a.Z.evaluate(t?e.visProp.highlightcssclass:e.visProp.cssclass)},drawForeignObject:function(e){},updateForeignObject:function(e){},appendChildPrim:function(e,t){},appendNodesToElement:function(e,t){},createPrim:function(e,t){return null},remove:function(e){},makeArrows:function(e,t){},_setArrowWidth:function(e,t,r){},updateEllipsePrim:function(e,t,r,i,n){},updateLinePrim:function(e,t,r,i,n,o){},updatePathPrim:function(e,t,r){},updatePathStringPoint:function(e,t,r){},updatePathStringPrim:function(e){},updatePathStringBezierPrim:function(e){},updatePolygonPrim:function(e,t){},updateRectPrim:function(e,t,r,i,n){},setPropertyPrim:function(e,t,r){},setTabindex:function(e){var t;e.board.attr.keyboard.enabled&&a.Z.exists(e.rendNode)&&(t=a.Z.evaluate(e.visProp.tabindex),(!e.visPropCalc.visible||a.Z.evaluate(e.visProp.fixed))&&(t=null),t!==e.visPropOld.tabindex&&(e.rendNode.setAttribute("tabindex",t),e.visPropOld.tabindex=t))},display:function(e,t){e&&(e.visPropOld.visible=t)},show:function(e){},hide:function(e){},setBuffering:function(e,t){},setDashStyle:function(e){},setDraft:function(e){if(a.Z.evaluate(e.visProp.draft)){var t=e.board.options.elements.draft.color,r=e.board.options.elements.draft.opacity;this.setObjectViewport(e),this.setObjectTransition(e),e.type===s.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(e,t,r):(e.elementClass===s.Z.OBJECT_CLASS_POINT?this.setObjectFillColor(e,t,r):this.setObjectFillColor(e,"none",0),this.setObjectStrokeColor(e,t,r),this.setObjectStrokeWidth(e,e.board.options.elements.draft.strokeWidth))}},removeDraft:function(e){this.setObjectViewport(e),this.setObjectTransition(e),e.type===s.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity):(e.type===s.Z.OBJECT_CLASS_POINT&&this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity),this.setObjectStrokeColor(e,e.visProp.strokecolor,e.visProp.strokeopacity),this.setObjectStrokeWidth(e,e.visProp.strokewidth))},setGradient:function(e){},updateGradient:function(e){},setObjectTransition:function(e,t){},setObjectViewport:function(e,t){},setObjectFillColor:function(e,t,r){},setObjectStrokeColor:function(e,t,r){},setObjectStrokeWidth:function(e,t){},setShadow:function(e){},highlight:function(e,t){var r,i,n,o=e.visProp;if(this.setObjectViewport(e),this.setObjectTransition(e),!o.draft){if(e.type===s.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(e,o.highlightfillcolor,o.highlightfillopacity),i=a.Z.evaluate(o.highlightbystrokewidth),r=0;r<e.borders.length;r++)this.highlight(e.borders[r],!i);else e.elementClass===s.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(e,!0):(e.type===s.Z.OBJECT_TYPE_IMAGE?this.updateImageStyle(e,!0):this.setObjectStrokeColor(e,o.highlightstrokecolor,o.highlightstrokeopacity),this.setObjectFillColor(e,o.highlightfillcolor,o.highlightfillopacity));o.highlightstrokewidth&&!t&&(n=Math.max(a.Z.evaluate(o.highlightstrokewidth),a.Z.evaluate(o.strokewidth)),this.setObjectStrokeWidth(e,n),(e.elementClass===s.Z.OBJECT_CLASS_LINE||e.elementClass===s.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(e,!0))}return this},noHighlight:function(e){var t,r,i=e.visProp;if(this.setObjectViewport(e),this.setObjectTransition(e),!a.Z.evaluate(e.visProp.draft)){if(e.type===s.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(e,i.fillcolor,i.fillopacity),t=0;t<e.borders.length;t++)this.noHighlight(e.borders[t]);else e.elementClass===s.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(e,!1):(e.type===s.Z.OBJECT_TYPE_IMAGE?this.updateImageStyle(e,!1):this.setObjectStrokeColor(e,i.strokecolor,i.strokeopacity),this.setObjectFillColor(e,i.fillcolor,i.fillopacity));r=a.Z.evaluate(i.strokewidth),this.setObjectStrokeWidth(e,r),(e.elementClass===s.Z.OBJECT_CLASS_LINE||e.elementClass===s.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(e,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(e,t){var r,i,n=function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},s=function(t,s,u,l){var c;u=u||"",(c=r.createElement("span")).innerHTML=t,c.style.paddingLeft="7px",c.style.paddingRight="7px",void 0!==c.classList&&(c.classList.add("JXG_navigation_button"),c.classList.add("JXG_navigation_button_"+l)),c.setAttribute("id",u+"_navigation_"+l),i.appendChild(c),o.Z.addEvent(c,"click",function(t){return a.Z.bind(s,e)(),!1},e),o.Z.addEvent(c,"pointerup",n,e),o.Z.addEvent(c,"pointerdown",n,e),o.Z.addEvent(c,"pointerleave",n,e),o.Z.addEvent(c,"mouseup",n,e),o.Z.addEvent(c,"mousedown",n,e),o.Z.addEvent(c,"touchend",n,e),o.Z.addEvent(c,"touchstart",n,e)};o.Z.isBrowser&&"no"!==this.type&&((i=(r=e.containerObj.ownerDocument).createElement("div")).setAttribute("id",e.container+"_navigationbar"),i.style.color=t.strokecolor,i.style.backgroundColor=t.fillcolor,i.style.padding=t.padding,i.style.position=t.position,i.style.fontSize=t.fontsize,i.style.cursor=t.cursor,i.style.zIndex=t.zindex,e.containerObj.appendChild(i),i.style.right=t.right,i.style.bottom=t.bottom,void 0!==i.classList&&i.classList.add("JXG_navigation"),e.attr.showfullscreen&&s(e.attr.fullscreen.symbol,function(){e.toFullscreen(e.attr.fullscreen.id)},e.container,"fullscreen"),e.attr.showscreenshot&&s(e.attr.screenshot.symbol,function(){window.setTimeout(function(){e.renderer.screenshot(e,"",!1)},330)},e.container,"screenshot"),e.attr.showreload&&s("↻",function(){e.reload()},e.container,"reload"),e.attr.showcleartraces&&s("⊗",function(){e.clearTraces()},e.container,"cleartraces"),e.attr.shownavigation&&(e.attr.showzoom&&(s("–",e.zoomOut,e.container,"out"),s("o",e.zoom100,e.container,"100"),s("+",e.zoomIn,e.container,"in")),s("←",e.clickLeftArrow,e.container,"left"),s("↓",e.clickUpArrow,e.container,"down"),s("↑",e.clickDownArrow,e.container,"up"),s("→",e.clickRightArrow,e.container,"right")))},getElementById:function(e){var t;return a.Z.exists(this.container)?(t=this.container.id+"_"+e,a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(t=CSS.escape(t)),this.container.querySelector("#"+t)):""},removeToInsertLater:function(e){var t=e.parentNode,r=e.nextSibling;if(null!==t)return t.removeChild(e),function(){r?t.insertBefore(e,r):t.appendChild(e)}},resize:function(e,t){},createTouchpoints:function(e){},showTouchpoint:function(e){},hideTouchpoint:function(e){},updateTouchpoint:function(e,t){},dumpToDataURI:function(e){},dumpToCanvas:function(e,t,r,i){},screenshot:function(e){},setLayer:function(e,t){}});var O=n.Z.AbstractRenderer;n.Z.FileReader={handleRemoteFile:function(e,t,r,i,o,s){var u=!1;try{u=new XMLHttpRequest,"raw"===r.toLowerCase()?u.overrideMimeType("text/plain; charset="+o):u.overrideMimeType("text/xml; charset="+o)}catch(e){try{u=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{u=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){u=!1}}}if(!u){n.Z.debug("AJAX not activated!");return}u.open("GET",e,i),"raw"===r.toLowerCase()?this.cbp=function(){var e=u;4===e.readyState&&t(e.responseText)}:this.cbp=function(){var e=u,i="";4===e.readyState&&(i=a.Z.exists(e.responseStream)&&("PK"===e.responseText.slice(0,2)||31===N.asciiCharCodeAt(e.responseText.slice(0,1),0))?A.decode(jxgBinFileReader(e)):e.responseText,this.parseString(i,t,r,s))},this.cb=a.Z.bind(this.cbp,this),u.onreadystatechange=this.cb;try{u.send(null)}catch(t){throw Error("JSXGraph: A problem occurred while trying to read remote file '"+e+"'.")}},handleLocalFile:function(e,t,r,i,n,o){a.Z.exists(i)||(i=!0),"raw"===r.toLowerCase()?this.cbp=function(e){t(e.target.result)}:this.cbp=function(e){var i=e.target.result;this.parseString(i,t,r,o)},this.cb=a.Z.bind(this.cbp,this);var s=new FileReader;s.onload=this.cb,"raw"===r.toLowerCase()?s.readAsText(e):s.readAsText(e,n)},parseFileContent:function(e,t,r,i,n,o){a.Z.isString(e)||void 0===FileReader?this.handleRemoteFile(e,t,r,i,n,o):this.handleLocalFile(e,t,r,i,n,o)},parseString:function(e,t,r,i){var o;if(r=r.toLowerCase(),o=n.Z.readers[r],a.Z.exists(o))new o(t,e).read();else if("jessiecode"===r);else throw Error("JSXGraph: There is no reader available for '"+r+"'.");a.Z.isFunction(i)&&i(t)}},!o.Z.isMetroApp()&&o.Z.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n</script>\n');var T=n.Z.FileReader,B=r(2137),F=r(2004),R=r(2141);n.Z.SVGRenderer=function(e,t){var r;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=e,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(t.width,t.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(e,t,r,i,n,o){var s,u,l,c,h,d=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return d.setAttributeNS(null,"id",e),d.setAttributeNS(null,"width","300%"),d.setAttributeNS(null,"height","300%"),d.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(s=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),s.setAttributeNS(null,"result","offOut"),s.setAttributeNS(null,"dx",o[0]),s.setAttributeNS(null,"dy",o[1]),d.appendChild(s),(u=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),u.setAttributeNS(null,"result","colorOut"),u.setAttributeNS(null,"type","matrix"),"none"===t||!a.Z.isArray(t)||t.length<3?u.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+r+" 0"):(t[0]/=255,t[1]/=255,t[2]/=255,h=i+" 0 0 0 "+t[0]+"  0 "+i+" 0 0 "+t[1]+"  0 0 "+i+" 0 "+t[2]+"  0 0 0 "+r+" 0",u.setAttributeNS(null,"values",h)),d.appendChild(u),(l=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),l.setAttributeNS(null,"result","blurOut"),l.setAttributeNS(null,"stdDeviation",n),d.appendChild(l),(c=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),c.setAttributeNS(null,"in2","blurOut"),c.setAttributeNS(null,"mode","normal"),d.appendChild(c),d},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var e=Array.prototype.slice.call(arguments).join("");return a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(e=CSS.escape(e)),e},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],r=0;r<M.Z.layer.numlayers;r++)this.layer[r]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[r]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch(e){this.supportsForeignObject=!1}},n.Z.SVGRenderer.prototype=new O,n.Z.extend(n.Z.SVGRenderer.prototype,{_createArrowHead:function(e,t,r){var i,n,o,u,l=e.id+"Triangle";return a.Z.exists(t)&&(l+=t),a.Z.exists(r)&&(l+=r),(i=this.createPrim("marker",l)).setAttributeNS(null,"stroke",a.Z.evaluate(e.visProp.strokecolor)),i.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(e.visProp.strokeopacity)),i.setAttributeNS(null,"fill",a.Z.evaluate(e.visProp.strokecolor)),i.setAttributeNS(null,"fill-opacity",a.Z.evaluate(e.visProp.strokeopacity)),i.setAttributeNS(null,"stroke-width",0),i.setAttributeNS(null,"orient","auto"),i.setAttributeNS(null,"markerUnits","strokeWidth"),n=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),u=5,"Start"===t?(o=0,2===r?n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===r?n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===r?(u=3.31,n.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===r?(u=3.28,n.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===r?(u=2.84,n.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===r?(u=5.2,n.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),e.elementClass===s.Z.OBJECT_CLASS_LINE&&(o=2===r?4.9:3===r?3.3:4===r||5===r||6===r?6.66:7===r?0:10)):(o=10,2===r?n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===r?(o=3.3,n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===r?(u=3.31,n.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===r?(u=3.28,n.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===r?(u=2.84,n.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===r?(u=5.2,n.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),e.elementClass===s.Z.OBJECT_CLASS_LINE&&(o=2===r?5.1:3===r?.02:4===r||5===r||6===r?3.33:7===r?10:.05)),7===r&&(i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"stroke-width",1)),i.setAttributeNS(null,"refY",u),i.setAttributeNS(null,"refX",o),i.appendChild(n),i},_setArrowColor:function(e,t,r,i,n){e&&(a.Z.isString(t)&&(7!==n?this._setAttribute(function(){e.setAttributeNS(null,"stroke",t),e.setAttributeNS(null,"fill",t),e.setAttributeNS(null,"stroke-opacity",r),e.setAttributeNS(null,"fill-opacity",r)},i.visPropOld.fillcolor):this._setAttribute(function(){e.setAttributeNS(null,"fill","none"),e.setAttributeNS(null,"stroke",t),e.setAttributeNS(null,"stroke-opacity",r)},i.visPropOld.fillcolor)),this.isIE&&i.rendNode.parentNode.insertBefore(i.rendNode,i.rendNode))},_setArrowWidth:function(e,t,r,i){var n;e&&(n=t*i,e.setAttributeNS(null,"viewBox","0 0 "+10*t+" "+10*t),e.setAttributeNS(null,"markerHeight",n),e.setAttributeNS(null,"markerWidth",n),e.setAttributeNS(null,"display","inherit"),this.isIE&&r.parentNode.insertBefore(r,r))},updateTicks:function(e){var t,r,i,n,o,s,u,l,c="",h=e.ticks.length,d=!0;for(t=0;t<h;t++){for(o=(i=e.ticks[t])[0],s=i[1],u=o.length,l=" M "+o[0]+" "+s[0],a.Z.isNumber(o[0])||(d=!1),r=1;d&&r<u;++r)a.Z.isNumber(o[r])?l+=" L "+o[r]+" "+s[r]:d=!1;d&&(c+=l)}n=e.rendNode,a.Z.exists(n)||(n=this.createPrim("path",e.id),this.appendChildPrim(n,a.Z.evaluate(e.visProp.layer)),e.rendNode=n),n.setAttributeNS(null,"stroke",a.Z.evaluate(e.visProp.strokecolor)),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(e.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",a.Z.evaluate(e.visProp.strokewidth)),this.updatePathPrim(n,c,e.board),this.setObjectViewport(e)},displayCopyright:function(e,t){var r,i=this.createPrim("text","licenseText");i.setAttributeNS(null,"x","20px"),i.setAttributeNS(null,"y",2+t+"px"),i.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+t+"px; fill:#356AA0;  opacity:0.3;"),r=this.container.ownerDocument.createTextNode(e),i.appendChild(r),this.appendChildPrim(i,0)},drawInternalText:function(e){var t=this.createPrim("text",e.id);return t.style.whiteSpace="nowrap",e.rendNodeText=this.container.ownerDocument.createTextNode(""),t.appendChild(e.rendNodeText),this.appendChildPrim(t,a.Z.evaluate(e.visProp.layer)),t},updateInternalText:function(e){var t,r=e.plaintext,i=e.getAnchorX(),n=e.getAnchorY();e.rendNode.getAttributeNS(null,"class")!==e.visProp.cssclass&&(e.rendNode.setAttributeNS(null,"class",a.Z.evaluate(e.visProp.cssclass)),e.needsSizeUpdate=!0),isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(t=e.coords.scrCoords[1],e.visPropOld.left!==i+t&&(e.rendNode.setAttributeNS(null,"x",t+"px"),"left"===i?e.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===i?e.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===i&&e.rendNode.setAttributeNS(null,"text-anchor","middle"),e.visPropOld.left=i+t),t=e.coords.scrCoords[2],e.visPropOld.top===n+t||(e.rendNode.setAttributeNS(null,"y",t+.5*this.vOffsetText+"px"),"bottom"===n?e.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===n?e.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===n&&e.rendNode.setAttributeNS(null,"dy","0.6ex"),e.visPropOld.top=n+t)),e.htmlStr!==r&&(e.rendNodeText.data=r,e.htmlStr=r),this.transformImage(e,e.transformations)},updateInternalTextStyle:function(e,t,r,i){this.setObjectViewport(e),this.setObjectFillColor(e,t,r)},drawImage:function(e){var t=this.createPrim("image",e.id);t.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(t,a.Z.evaluate(e.visProp.layer)),e.rendNode=t,this.updateImage(e)},transformImage:function(e,t){var r,i,n,o,u=e.rendNode,l="";if(t.length>0&&-1===(r=[(i=this.joinTransforms(e,t))[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0]].join(",")).indexOf("NaN")){if(l+=" matrix("+r+") ",e.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===e.visProp.display){switch(u.style.transform=l,n=-e.coords.scrCoords[1],o=-e.coords.scrCoords[2],a.Z.evaluate(e.visProp.anchorx)){case"right":n+=e.size[0];break;case"middle":n+=.5*e.size[0]}switch(a.Z.evaluate(e.visProp.anchory)){case"bottom":o+=e.size[1];break;case"middle":o+=.5*e.size[1]}u.style["transform-origin"]=n+"px "+o+"px"}else u.setAttributeNS(null,"transform",l)}},updateImageURL:function(e){var t=a.Z.evaluate(e.url);return e._src!==t&&(e.imgIsLoaded=!1,e.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",t),e._src=t,!0)},updateImageStyle:function(e,t){var r=a.Z.evaluate(t?e.visProp.highlightcssclass:e.visProp.cssclass);e.rendNode.setAttributeNS(null,"class",r)},drawForeignObject:function(e){e.rendNode=this.appendChildPrim(this.createPrim("foreignObject",e.id),a.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"foreignObject"),this.updateForeignObject(e)},updateForeignObject:function(e){e._useUserSize?e.rendNode.style.overflow="hidden":e.rendNode.style.overflow="visible",this.updateRectPrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),e.rendNode.innerHTML=e.content,this._updateVisual(e,{stroke:!0,dash:!0},!0)},appendChildPrim:function(e,t){return a.Z.exists(t)?t>=M.Z.layer.numlayers&&(t=M.Z.layer.numlayers-1):t=0,this.layer[t].appendChild(e),e},createPrim:function(e,t){var r=this.container.ownerDocument.createElementNS(this.svgNamespace,e);return r.setAttributeNS(null,"id",this.uniqName(t)),r.style.position="absolute","path"===e&&(r.setAttributeNS(null,"stroke-linecap","round"),r.setAttributeNS(null,"stroke-linejoin","round"),r.setAttributeNS(null,"fill-rule","evenodd")),r},remove:function(e){a.Z.exists(e)&&a.Z.exists(e.parentNode)&&e.parentNode.removeChild(e)},setLayer:function(e,t){a.Z.exists(t)?t>=M.Z.layer.numlayers&&(t=M.Z.layer.numlayers-1):t=0,this.layer[t].appendChild(e.rendNode)},makeArrows:function(e,t){var r,i,n=t.evFirst,o=t.evLast;if(this.isIE&&e.visPropCalc.visible&&(n||o)){e.rendNode.parentNode.insertBefore(e.rendNode,e.rendNode);return}r=e.rendNodeTriangleStart,n?(i=this.toStr(this.container.id,"_",e.id,"TriangleStart",t.typeFirst),a.Z.exists(r)&&r.id===i||(null===(r=this.container.ownerDocument.getElementById(i))&&(r=this._createArrowHead(e,"Start",t.typeFirst),this.defs.appendChild(r)),e.rendNodeTriangleStart=r,e.rendNode.setAttributeNS(null,"marker-start",this.toURL(i)))):a.Z.exists(r)&&this.remove(r),r=e.rendNodeTriangleEnd,o?(i=this.toStr(this.container.id,"_",e.id,"TriangleEnd",t.typeLast),a.Z.exists(r)&&r.id===i||(null===(r=this.container.ownerDocument.getElementById(i))&&(r=this._createArrowHead(e,"End",t.typeLast),this.defs.appendChild(r)),e.rendNodeTriangleEnd=r,e.rendNode.setAttributeNS(null,"marker-end",this.toURL(i)))):a.Z.exists(r)&&this.remove(r)},updateEllipsePrim:function(e,t,r,i,n){var o=1e6;t=Math.abs(t)<(o=2e5)?t:o*t/Math.abs(t),r=Math.abs(r)<o?r:o*r/Math.abs(r),i=Math.abs(i)<o?i:o*i/Math.abs(i),n=Math.abs(n)<o?n:o*n/Math.abs(n),e.setAttributeNS(null,"cx",t),e.setAttributeNS(null,"cy",r),e.setAttributeNS(null,"rx",Math.abs(i)),e.setAttributeNS(null,"ry",Math.abs(n))},updateLinePrim:function(e,t,r,i,n){var o=1e6;o=2e5,isNaN(t+r+i+n)||(t=Math.abs(t)<o?t:o*t/Math.abs(t),r=Math.abs(r)<o?r:o*r/Math.abs(r),i=Math.abs(i)<o?i:o*i/Math.abs(i),n=Math.abs(n)<o?n:o*n/Math.abs(n),e.setAttributeNS(null,"x1",t),e.setAttributeNS(null,"y1",r),e.setAttributeNS(null,"x2",i),e.setAttributeNS(null,"y2",n))},updatePathPrim:function(e,t){""===t&&(t="M 0 0"),e.setAttributeNS(null,"d",t)},updatePathStringPoint:function(e,t,r){var i="",n=e.coords.scrCoords,o=t*Math.sqrt(3)*.5,s=.5*t;return"x"===r?i=" M "+(n[1]-t)+" "+(n[2]-t)+" L "+(n[1]+t)+" "+(n[2]+t)+" M "+(n[1]+t)+" "+(n[2]-t)+" L "+(n[1]-t)+" "+(n[2]+t):"+"===r?i=" M "+(n[1]-t)+" "+n[2]+" L "+(n[1]+t)+" "+n[2]+" M "+n[1]+" "+(n[2]-t)+" L "+n[1]+" "+(n[2]+t):"|"===r?i=" M "+n[1]+" "+(n[2]-t)+" L "+n[1]+" "+(n[2]+t):"-"===r?i=" M "+(n[1]-t)+" "+n[2]+" L "+(n[1]+t)+" "+n[2]:"<>"===r||"<<>>"===r?("<<>>"===r&&(t*=1.41),i=" M "+(n[1]-t)+" "+n[2]+" L "+n[1]+" "+(n[2]+t)+" L "+(n[1]+t)+" "+n[2]+" L "+n[1]+" "+(n[2]-t)+" Z "):"^"===r?i=" M "+n[1]+" "+(n[2]-t)+" L "+(n[1]-o)+" "+(n[2]+s)+" L "+(n[1]+o)+" "+(n[2]+s)+" Z ":"v"===r?i=" M "+n[1]+" "+(n[2]+t)+" L "+(n[1]-o)+" "+(n[2]-s)+" L "+(n[1]+o)+" "+(n[2]-s)+" Z ":">"===r?i=" M "+(n[1]+t)+" "+n[2]+" L "+(n[1]-s)+" "+(n[2]-o)+" L "+(n[1]-s)+" "+(n[2]+o)+" Z ":"<"===r&&(i=" M "+(n[1]-t)+" "+n[2]+" L "+(n[1]+s)+" "+(n[2]-o)+" L "+(n[1]+s)+" "+(n[2]+o)+" Z "),i},updatePathStringPrim:function(e){var t,r,i,n=" M ",o="";if(e.numberPoints<=0)return"";if(i=Math.min(e.points.length,e.numberPoints),1===e.bezierDegree)for(t=0;t<i;t++)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?n=" M ":(r[1]=Math.max(Math.min(r[1],5e3),-5e3),r[2]=Math.max(Math.min(r[2],5e3),-5e3),o+=n+r[1]+" "+r[2],n=" L ");else if(3===e.bezierDegree)for(t=0;t<i;)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?n=" M ":(o+=n+r[1]+" "+r[2]," C "===n&&(t+=1,o+=" "+(r=e.points[t].scrCoords)[1]+" "+r[2],t+=1,o+=" "+(r=e.points[t].scrCoords)[1]+" "+r[2]),n=" C "),t+=1;return o},updatePathStringBezierPrim:function(e){var t,r,i,n,o,s,u,l=" M ",c="",h=a.Z.evaluate(e.visProp.strokewidth),d="plot"!==a.Z.evaluate(e.visProp.curvetype);if(e.numberPoints<=0)return"";for(d&&e.board.options.curve.RDPsmoothing&&(e.points=f.Z.RamerDouglasPeucker(e.points,.5)),u=Math.min(e.points.length,e.numberPoints),r=1;r<3;r++)for(t=0,l=" M ";t<u;t++)isNaN((n=e.points[t].scrCoords)[1])||isNaN(n[2])?l=" M ":(n[1]=Math.max(Math.min(n[1],5e3),-5e3),n[2]=Math.max(Math.min(n[2],5e3),-5e3)," M "===l?c+=l+n[1]+" "+n[2]:(i=2*r,c+=[l,o+(n[1]-o)*.333+h*(i*Math.random()-r)," ",s+(n[2]-s)*.333+h*(i*Math.random()-r)," ",o+(n[1]-o)*.666+h*(i*Math.random()-r)," ",s+(n[2]-s)*.666+h*(i*Math.random()-r)," ",n[1]," ",n[2]].join("")),l=" C ",o=n[1],s=n[2]);return c},updatePolygonPrim:function(e,t){var r,i,n="",o=t.vertices.length;for(e.setAttributeNS(null,"stroke","none"),e.setAttributeNS(null,"fill-rule","evenodd"),"polygonalchain"===t.elType&&o++,r=0;r<o-1;r++){if(t.vertices[r].isReal)n=n+(i=t.vertices[r].coords.scrCoords)[1]+","+i[2];else{e.setAttributeNS(null,"points","");return}r<o-2&&(n+=" ")}-1===n.indexOf("NaN")&&e.setAttributeNS(null,"points",n)},updateRectPrim:function(e,t,r,i,n){e.setAttributeNS(null,"x",t),e.setAttributeNS(null,"y",r),e.setAttributeNS(null,"width",i),e.setAttributeNS(null,"height",n)},setPropertyPrim:function(e,t,r){"stroked"!==t&&e.setAttributeNS(null,t,r)},display:function(e,t){var r;e&&e.rendNode&&(e.visPropOld.visible=t,r=e.rendNode,t?(r.setAttributeNS(null,"display","inline"),r.style.visibility="inherit"):(r.setAttributeNS(null,"display","none"),r.style.visibility="hidden"))},show:function(e){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(e,!0)},hide:function(e){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(e,!1)},setBuffering:function(e,t){e.rendNode.setAttribute("buffered-rendering",t)},setDashStyle:function(e){var t=a.Z.evaluate(e.visProp.dash),r=a.Z.evaluate(e.visProp.dashscale)?.5*a.Z.evaluate(e.visProp.strokewidth):1,i=e.rendNode;t>0?i.setAttributeNS(null,"stroke-dasharray",this.dashArray[t-1].map(function(e){return e*r}).join(",")):i.hasAttributeNS(null,"stroke-dasharray")&&i.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(e){var t,r,i,n=e.rendNode,o=a.Z.evaluate(e.visProp.gradient);"linear"===o||"radial"===o?(t=this.createPrim(o+"Gradient",e.id+"_gradient"),r=this.createPrim("stop",e.id+"_gradient1"),i=this.createPrim("stop",e.id+"_gradient2"),t.appendChild(r),t.appendChild(i),this.defs.appendChild(t),n.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+e.id+"_gradient")),e.gradNode1=r,e.gradNode2=i,e.gradNode=t):n.removeAttributeNS(null,"style")},updateGradientAngle:function(e,t){var r=1,i=Math.cos(t),n=Math.sin(t);Math.abs(i)>Math.abs(n)?r/=Math.abs(i):r/=Math.abs(n),i>=0?(e.setAttributeNS(null,"x1",0),e.setAttributeNS(null,"x2",i*r)):(e.setAttributeNS(null,"x1",-i*r),e.setAttributeNS(null,"x2",0)),n>=0?(e.setAttributeNS(null,"y1",0),e.setAttributeNS(null,"y2",n*r)):(e.setAttributeNS(null,"y1",-n*r),e.setAttributeNS(null,"y2",0))},updateGradientCircle:function(e,t,r,i,n,o,s){e.setAttributeNS(null,"cx",100*t+"%"),e.setAttributeNS(null,"cy",100*r+"%"),e.setAttributeNS(null,"r",100*i+"%"),e.setAttributeNS(null,"fx",100*n+"%"),e.setAttributeNS(null,"fy",100*o+"%"),e.setAttributeNS(null,"fr",100*s+"%")},updateGradient:function(e){var t,r,i=e.gradNode1,n=e.gradNode2,o=a.Z.evaluate(e.visProp.gradient);a.Z.exists(i)&&a.Z.exists(n)&&(r=(r=a.Z.evaluate(e.visProp.fillopacity))>0?r:0,t=a.Z.evaluate(e.visProp.fillcolor),i.setAttributeNS(null,"style","stop-color:"+t+";stop-opacity:"+r),n.setAttributeNS(null,"style","stop-color:"+a.Z.evaluate(e.visProp.gradientsecondcolor)+";stop-opacity:"+a.Z.evaluate(e.visProp.gradientsecondopacity)),i.setAttributeNS(null,"offset",100*a.Z.evaluate(e.visProp.gradientstartoffset)+"%"),n.setAttributeNS(null,"offset",100*a.Z.evaluate(e.visProp.gradientendoffset)+"%"),"linear"===o?this.updateGradientAngle(e.gradNode,a.Z.evaluate(e.visProp.gradientangle)):"radial"===o&&this.updateGradientCircle(e.gradNode,a.Z.evaluate(e.visProp.gradientcx),a.Z.evaluate(e.visProp.gradientcy),a.Z.evaluate(e.visProp.gradientr),a.Z.evaluate(e.visProp.gradientfx),a.Z.evaluate(e.visProp.gradientfy),a.Z.evaluate(e.visProp.gradientfr)))},setObjectTransition:function(e,t){var r,i,n,o=[],s=0,u=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===t&&(t=a.Z.evaluate(e.visProp.transitionduration)),r=a.Z.evaluate(e.visProp.transitionproperties),t!==e.visPropOld.transitionduration||r!==e.visPropOld.transitionproperties){for(a.Z.exists(r)&&(s=r.length),n=0;n<s;n++)o.push(r[n]+" "+t+"ms");for(n=0,i=o.join(", "),s=u.length;n<s;++n)e[u[n]]&&(e[u[n]].style.transition=i);e.visPropOld.transitionduration=t,e.visPropOld.transitionproperties=r}},setObjectViewport:function(e,t){var r,i,n,o,s,u,l,c,h=a.Z.evaluate(e.visProp.viewport),d=0,p=["rendNode"];for("inherit"===h&&(h=a.Z.evaluate(e.board.attr.viewport)),t&&(n=e.rendNode.getBoundingClientRect(),o=this.container.getBoundingClientRect(),u=parseFloat(h[1]),l=parseFloat(h[2]),c=parseFloat(h[3]),s=parseFloat(h[0]),a.Z.isString(h[1])&&h[1].indexOf("%")>0&&(u=o.height*u/100),a.Z.isString(h[2])&&h[2].indexOf("%")>0&&(l=o.width*l/100),a.Z.isString(h[3])&&h[3].indexOf("%")>0&&(c=o.height*c/100),a.Z.isString(h[0])&&h[0].indexOf("%")>0&&(s=o.width*s/100),u=parseFloat(o.top)-parseFloat(n.top)+u,l=parseFloat(n.right)-parseFloat(o.right)+l,c=parseFloat(n.bottom)-parseFloat(o.bottom)+c,h=[s=parseFloat(o.left)-parseFloat(n.left)+s,u,l,c]),r=["number"==typeof h[1]?h[1]+"px":h[1],"number"==typeof h[2]?h[2]+"px":h[2],"number"==typeof h[3]?h[3]+"px":h[3],"number"==typeof h[0]?h[0]+"px":h[0]].join(" "),d=p.length,i=0;i<d;++i)e[p[i]]&&(t?e[p[i]].style.clipPath="inset("+r+")":e[p[i]].setAttributeNS(null,"clip-path","view-box inset("+r+")"))},_setAttribute:function(e,t){""===t?e():window.setTimeout(e,1)},setObjectFillColor:function(e,t,r,i){var o,s,u,l,c=a.Z.evaluate(t),h=a.Z.evaluate(r),d=a.Z.evaluate(e.visProp.gradient);h=h>0?h:0,(e.visPropOld.fillcolor!==c||e.visPropOld.fillopacity!==h||null!==d)&&(a.Z.exists(c)&&!1!==c&&(9!==c.length?(s=c,l=h):(s=(u=R.Z.rgba2rgbo(c))[0],l=h*u[1]),o=void 0===i?e.rendNode:i,"none"!==s&&this._setAttribute(function(){o.setAttributeNS(null,"fill",s)},e.visPropOld.fillcolor),e.type===n.Z.OBJECT_TYPE_IMAGE?this._setAttribute(function(){o.setAttributeNS(null,"opacity",l)},e.visPropOld.fillopacity):("none"===s?(l=0,o.setAttributeNS(null,"pointer-events","visibleStroke")):o.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){o.setAttributeNS(null,"fill-opacity",l)},e.visPropOld.fillopacity)),("linear"===d||"radial"===d)&&this.updateGradient(e)),e.visPropOld.fillcolor=c,e.visPropOld.fillopacity=h)},setObjectStrokeColor:function(e,t,r){var i,n,o,u,l=a.Z.evaluate(t),c=a.Z.evaluate(r);c=c>0?c:0,(e.visPropOld.strokecolor!==l||e.visPropOld.strokeopacity!==c)&&(a.Z.exists(l)&&!1!==l&&(9!==l.length?(i=l,o=c):(i=(n=R.Z.rgba2rgbo(l))[0],o=c*n[1]),u=e.rendNode,e.elementClass===s.Z.OBJECT_CLASS_TEXT?"html"===a.Z.evaluate(e.visProp.display)?this._setAttribute(function(){u.style.color=i,u.style.opacity=o},e.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"style","fill:"+i),u.setAttributeNS(null,"style","fill-opacity:"+o)},e.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"stroke",i),u.setAttributeNS(null,"stroke-opacity",o)},e.visPropOld.strokecolor),(e.elementClass===s.Z.OBJECT_CLASS_CURVE||e.elementClass===s.Z.OBJECT_CLASS_LINE)&&(a.Z.evaluate(e.visProp.firstarrow)&&this._setArrowColor(e.rendNodeTriangleStart,i,o,e,e.visPropCalc.typeFirst),a.Z.evaluate(e.visProp.lastarrow)&&this._setArrowColor(e.rendNodeTriangleEnd,i,o,e,e.visPropCalc.typeLast))),e.visPropOld.strokecolor=l,e.visPropOld.strokeopacity=c)},setObjectStrokeWidth:function(e,t){var r,i=a.Z.evaluate(t);isNaN(i)||e.visPropOld.strokewidth===i||(r=e.rendNode,this.setPropertyPrim(r,"stroked","true"),a.Z.exists(i)&&this.setPropertyPrim(r,"stroke-width",i+"px"),e.visPropOld.strokewidth=i)},setLineCap:function(e){var t=a.Z.evaluate(e.visProp.linecap);void 0!==t&&""!==t&&e.visPropOld.linecap!==t&&a.Z.exists(e.rendNode)&&(this.setPropertyPrim(e.rendNode,"stroke-linecap",t),e.visPropOld.linecap=t)},setShadow:function(e){var t,r,i,o,s,u,l,c,h=a.Z.evaluate(e.visProp.shadow),d=!0,p=!1;(t=JSON.stringify(h))!==e.visPropOld.shadow&&("boolean"==typeof h?(d=!0,p=h,r="none",i=3,o=.1,s=[5,5],u=1):a.Z.evaluate(h.enabled)?(d=!1,p=!0,r=n.Z.rgbParser(a.Z.evaluate(h.color)),i=a.Z.evaluate(h.blur),o=a.Z.evaluate(h.blend),s=a.Z.evaluate(h.offset),u=a.Z.evaluate(h.opacity)):p=!1,a.Z.exists(e.rendNode)&&(p?d?e.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((c=this.container.ownerDocument.getElementById(l))&&this.defs.removeChild(c),l=e.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(l,r,u,o,i,s)),e.rendNode.setAttributeNS(null,"filter",this.toURL(l))):e.rendNode.removeAttributeNS(null,"filter")),e.visPropOld.shadow=t)},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(e,t){this.svgRoot.setAttribute("width",parseFloat(e)),this.svgRoot.setAttribute("height",parseFloat(t))},createTouchpoints:function(e){var t,r,i,n;for(t=0,this.touchpoints=[];t<e;t++)r="touchpoint1_"+t,n=this.createPrim("path",r),this.appendChildPrim(n,19),n.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"display","none"),i="touchpoint2_"+t,n=this.createPrim("ellipse",i),this.appendChildPrim(n,19),this.updateEllipsePrim(n,0,0,0,0),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"fill","#ffffff"),n.setAttributeNS(null,"fill-opacity",0),n.setAttributeNS(null,"display","none")},showTouchpoint:function(e){this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(this.touchpoints[2*e].setAttributeNS(null,"display","inline"),this.touchpoints[2*e+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(e){this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(this.touchpoints[2*e].setAttributeNS(null,"display","none"),this.touchpoints[2*e+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(e,t){var r,i;this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(r=t[0],i=t[1],this.touchpoints[2*e].setAttributeNS(null,"d","M "+(r-37)+" "+i+" L "+(r+37)+" "+i+" M "+r+" "+(i-37)+" L "+r+" "+(i+37)),this.updateEllipsePrim(this.touchpoints[2*e+1],t[0],t[1],25,25))},_getValuesOfDOMElements:function(e){var t=[];if(1===e.nodeType)for(e=e.firstChild;e;)void 0!==e.id&&void 0!==e.value&&t.push([e.id,e.value]),t=t.concat(this._getValuesOfDOMElements(e)),e=e.nextSibling;return t},_getDataUri:function(e,t){var r=new Image;r.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0),t(e.toDataURL("image/png")),e.remove()},r.src=e},_getImgDataURL:function(e){var t,r,i,n,o,s;if((r=(t=e.getElementsByTagName("image")).length)>0)for(s=0,i=document.createElement("canvas");s<r;s++){t[s].setAttribute("crossorigin","anonymous"),n=i.getContext("2d"),i.width=t[s].getAttribute("width"),i.height=t[s].getAttribute("height");try{n.drawImage(t[s],0,0,i.width,i.height),o=i.toDataURL(),t[s].setAttribute("xlink:href",o)}catch(e){console.log("CORS problem! Image can not be used",e)}}return!0},dumpToDataURI:function(e){var t,r,i,n=this.svgRoot,o=window.btoa||A.encode,s=[];if(this.container.hasChildNodes()&&a.Z.exists(this.foreignObjLayer)&&!e)for(this.foreignObjLayer.setAttribute("display","inline");n.nextSibling;)s=s.concat(this._getValuesOfDOMElements(n.nextSibling)),this.foreignObjLayer.appendChild(n.nextSibling);if(this._getImgDataURL(n),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),t=new XMLSerializer().serializeToString(n),!0!==e)for(r=0,i=s.length;r<i;r++)t=t.replace('id="'+s[r][0]+'"','id="'+s[r][0]+'" value="'+s[r][1]+'"');if((t.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(t=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),t=(t=t.replace(/&nbsp;/g," ")).replace(/url\(&quot;(.*)&quot;\)/g,"url($1)"),a.Z.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+o(unescape(encodeURIComponent(t)))},dumpToCanvas:function(e,t,r,i){var n,o,s,a;return((s=this.container.ownerDocument.getElementById(e)).width=s.width,a=s.getContext("2d"),void 0!==t&&void 0!==r&&(s.style.width=parseFloat(t)+"px",s.style.height=parseFloat(r)+"px",s.setAttribute("width",parseFloat(t)),s.setAttribute("height",parseFloat(r))),o=new Image,n=this.dumpToDataURI(i),o.src=n,"Promise"in window)?new Promise(function(e,i){try{o.onload=function(){a.drawImage(o,0,0,t,r),e()}}catch(e){i(e)}}):(o.onload=function(){window.setTimeout(function(){try{a.drawImage(o,0,0,t,r)}catch(e){console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(e,t,r){var i,n,o,s,u,l,c,h,d,p,f,m,v=this.container.ownerDocument,g=this.container.parentNode,b=e.attr.screenshot,y=!1;return"no"===this.type||(c=b.scale*this.container.getBoundingClientRect().width,h=b.scale*this.container.getBoundingClientRect().height,void 0===t||""===t?(y=!0,(s=new Image).style.width=c+"px",s.style.height=h+"px"):(y=!1,s=v.getElementById(t)),y&&((i=v.createElement("div")).style.cssText=b.css,i.style.width=c+"px",i.style.height=h+"px",i.style.zIndex=this.container.style.zIndex+120,i.style.position="absolute",i.style.top=this.container.offsetTop+"px",i.style.left=this.container.offsetLeft+"px"),n=v.createElement("canvas"),o=Math.random().toString(36).slice(2,7),n.setAttribute("id",o),n.setAttribute("width",c),n.setAttribute("height",h),n.style.width=c+"px",n.style.height=c+"px",n.style.display="none",g.appendChild(n),y&&(u=v.createElement("span"),l=v.createTextNode("✖"),u.style.cssText=b.cssButton,u.appendChild(l),u.onclick=function(){i.parentNode.removeChild(i)},i.appendChild(s),i.appendChild(u),g.insertBefore(i,this.container.nextSibling)),d=v.getElementById(this.uniqName("navigationbar")),a.Z.exists(d)&&(p=d.style.display,d.style.display="none",f=this.removeToInsertLater(d)),m=function(){s.src=n.toDataURL("image/png"),g.removeChild(n)},"Promise"in window?this.dumpToCanvas(o,c,h,r).then(m):(this.dumpToCanvas(o,c,h,r),window.setTimeout(m,200)),a.Z.exists(d)&&(d.style.display=p,f())),this}});var k=n.Z.SVGRenderer;n.Z.VMLRenderer=function(e){this.type="vml",this.container=e,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,a.Z.exists(n.Z.vmlStylesheet)||(e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),n.Z.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),n.Z.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{e.ownerDocument.namespaces.jxgvml||e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(t){return e.ownerDocument.createElement("<jxgvml:"+t+' class="jxgvml">')}}catch(t){this.createNode=function(t){return e.ownerDocument.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},n.Z.VMLRenderer.prototype=new O,n.Z.extend(n.Z.VMLRenderer.prototype,{_setAttr:function(e,t,r,i){try{8===this.container.ownerDocument.documentMode?e[t]=r:e.setAttribute(t,r,i)}catch(e){n.Z.debug("_setAttr: "+t+" "+r+"<br>\n")}},updateTicks:function(e){var t,r,i,n,o,s=this.resolution,u=[];for(t=0,r=e.ticks.length;t<r;t++)n=(i=e.ticks[t])[0],o=i[1],a.Z.isNumber(n[0])&&a.Z.isNumber(n[1])&&u.push(" m "+Math.round(s*n[0])+", "+Math.round(s*o[0])+" l "+Math.round(s*n[1])+", "+Math.round(s*o[1])+" ");a.Z.exists(e.rendNode)||(e.rendNode=this.createPrim("path",e.id),this.appendChildPrim(e.rendNode,a.Z.evaluate(e.visProp.layer))),this._setAttr(e.rendNode,"stroked","true"),this._setAttr(e.rendNode,"strokecolor",a.Z.evaluate(e.visProp.strokecolor),1),this._setAttr(e.rendNode,"strokeweight",a.Z.evaluate(e.visProp.strokewidth)),this._setAttr(e.rendNodeStroke,"opacity",100*a.Z.evaluate(e.visProp.strokeopacity)+"%"),this.updatePathPrim(e.rendNode,u,e.board)},displayCopyright:function(e,t){var r,i;(r=this.createNode("textbox")).style.position="absolute",this._setAttr(r,"id",this.container.id+"_licenseText"),r.style.left=20,r.style.top=2,r.style.fontSize=t,r.style.color="#356AA0",r.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(r,"opacity","30%"),r.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",i=this.container.ownerDocument.createTextNode(e),r.appendChild(i),this.appendChildPrim(r,0)},drawInternalText:function(e){var t;return(t=this.createNode("textbox")).style.position="absolute",e.rendNodeText=this.container.ownerDocument.createTextNode(""),t.appendChild(e.rendNodeText),this.appendChildPrim(t,9),t.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t},updateInternalText:function(e){var t,r,i,n,o,s,a=e.plaintext,l=this.joinTransforms(e,e.transformations),c=[0,0],h=e.rendNode,d=[],p=e.getAnchorX(),f=e.getAnchorY();if(!isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])){for("right"===p?c[0]=1:"middle"===p&&(c[0]=.5),"bottom"===f?c[1]=1:"middle"===f&&(c[1]=.5),d[0]=u.Z.matVecMult(l,[1,e.coords.scrCoords[1]-c[0]*e.size[0],e.coords.scrCoords[2]+(1-c[1])*e.size[1]+this.vOffsetText]),d[0][1]/=d[0][0],d[0][2]/=d[0][0],d[1]=u.Z.matVecMult(l,[1,e.coords.scrCoords[1]+(1-c[0])*e.size[0],e.coords.scrCoords[2]+(1-c[1])*e.size[1]+this.vOffsetText]),d[1][1]/=d[1][0],d[1][2]/=d[1][0],d[2]=u.Z.matVecMult(l,[1,e.coords.scrCoords[1]+(1-c[0])*e.size[0],e.coords.scrCoords[2]-c[1]*e.size[1]+this.vOffsetText]),d[2][1]/=d[2][0],d[2][2]/=d[2][0],d[3]=u.Z.matVecMult(l,[1,e.coords.scrCoords[1]-c[0]*e.size[0],e.coords.scrCoords[2]-c[1]*e.size[1]+this.vOffsetText]),d[3][1]/=d[3][0],d[3][2]/=d[3][0],r=d[0][1],n=d[0][1],i=d[0][2],o=d[0][2],s=1;s<4;s++)r=Math.max(r,d[s][1]),n=Math.min(n,d[s][1]),i=Math.max(i,d[s][2]),o=Math.min(o,d[s][2]);t=1===c[0]?Math.floor(e.board.canvasWidth-r):Math.floor(n),e.visPropOld.left!==p+t&&(1===c[0]?(e.rendNode.style.right=t+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=t+"px",e.rendNode.style.right="auto"),e.visPropOld.left=p+t),t=1===c[1]?Math.floor(e.board.canvasHeight-i):Math.floor(o),e.visPropOld.top!==f+t&&(1===c[1]?(e.rendNode.style.bottom=t+"px",e.rendNode.style.top="auto"):(e.rendNode.style.top=t+"px",e.rendNode.style.bottom="auto"),e.visPropOld.top=f+t)}e.htmlStr!==a&&(e.rendNodeText.data=a,e.htmlStr=a),h.filters.item(0).M11=l[1][1],h.filters.item(0).M12=l[1][2],h.filters.item(0).M21=l[2][1],h.filters.item(0).M22=l[2][2],h.filters.item(0).enabled=!0},drawImage:function(e){var t;(t=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(t,"id",this.container.id+"_"+e.id),this.container.appendChild(t),this.appendChildPrim(t,a.Z.evaluate(e.visProp.layer)),t.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e.rendNode=t,this.updateImage(e)},transformImage:function(e,t){var r,i,n,o,s,a,l=e.rendNode,c=[];if(t.length>0){for(r=this.joinTransforms(e,t),c[0]=u.Z.matVecMult(r,e.coords.scrCoords),c[0][1]/=c[0][0],c[0][2]/=c[0][0],c[1]=u.Z.matVecMult(r,[1,e.coords.scrCoords[1]+e.size[0],e.coords.scrCoords[2]]),c[1][1]/=c[1][0],c[1][2]/=c[1][0],c[2]=u.Z.matVecMult(r,[1,e.coords.scrCoords[1]+e.size[0],e.coords.scrCoords[2]-e.size[1]]),c[2][1]/=c[2][0],c[2][2]/=c[2][0],c[3]=u.Z.matVecMult(r,[1,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1]]),c[3][1]/=c[3][0],c[3][2]/=c[3][0],i=c[0][1],o=c[0][1],n=c[0][2],s=c[0][2],a=1;a<4;a++)i=Math.max(i,c[a][1]),o=Math.min(o,c[a][1]),n=Math.max(n,c[a][2]),s=Math.min(s,c[a][2]);l.style.left=Math.floor(o)+"px",l.style.top=Math.floor(s)+"px",l.filters.item(0).M11=r[1][1],l.filters.item(0).M12=r[1][2],l.filters.item(0).M21=r[2][1],l.filters.item(0).M22=r[2][2],l.filters.item(0).enabled=!0}},updateImageURL:function(e){var t=a.Z.evaluate(e.url);this._setAttr(e.rendNode,"src",t)},appendChildPrim:function(e,t){return a.Z.exists(t)||(t=0),e.style.zIndex=t,this.container.appendChild(e),e},appendNodesToElement:function(e,t){("shape"===t||"path"===t||"polygon"===t)&&(e.rendNodePath=this.getElementById(e.id+"_path")),e.rendNodeFill=this.getElementById(e.id+"_fill"),e.rendNodeStroke=this.getElementById(e.id+"_stroke"),e.rendNodeShadow=this.getElementById(e.id+"_shadow"),e.rendNode=this.getElementById(e.id)},createPrim:function(e,t){var r,i,n=this.createNode("fill"),o=this.createNode("stroke"),s=this.createNode("shadow");return this._setAttr(n,"id",this.container.id+"_"+t+"_fill"),this._setAttr(o,"id",this.container.id+"_"+t+"_stroke"),this._setAttr(s,"id",this.container.id+"_"+t+"_shadow"),"circle"===e||"ellipse"===e?((r=this.createNode("oval")).appendChild(n),r.appendChild(o),r.appendChild(s)):"polygon"===e||"path"===e||"shape"===e||"line"===e?((r=this.createNode("shape")).appendChild(n),r.appendChild(o),r.appendChild(s),i=this.createNode("path"),this._setAttr(i,"id",this.container.id+"_"+t+"_path"),r.appendChild(i)):((r=this.createNode(e)).appendChild(n),r.appendChild(o),r.appendChild(s)),r.style.position="absolute",r.style.left="0px",r.style.top="0px",this._setAttr(r,"id",this.container.id+"_"+t),r},remove:function(e){a.Z.exists(e)&&e.removeNode(!0)},makeArrows:function(e){var t,r=a.Z.evaluate(e.visProp.firstarrow),i=a.Z.evaluate(e.visProp.lastarrow);(e.visPropOld.firstarrow!==r||e.visPropOld.lastarrow!==i)&&(r?(t=e.rendNodeStroke,this._setAttr(t,"startarrow","block"),this._setAttr(t,"startarrowlength","long")):(t=e.rendNodeStroke,a.Z.exists(t)&&this._setAttr(t,"startarrow","none")),i?(t=e.rendNodeStroke,this._setAttr(t,"id",this.container.id+"_"+e.id+"stroke"),this._setAttr(t,"endarrow","block"),this._setAttr(t,"endarrowlength","long")):(t=e.rendNodeStroke,a.Z.exists(t)&&this._setAttr(t,"endarrow","none")),e.visPropOld.firstarrow=r,e.visPropOld.lastarrow=i)},updateEllipsePrim:function(e,t,r,i,n){e.style.left=Math.floor(t-i)+"px",e.style.top=Math.floor(r-n)+"px",e.style.width=Math.floor(2*Math.abs(i))+"px",e.style.height=Math.floor(2*Math.abs(n))+"px"},updateLinePrim:function(e,t,r,i,n,o){var s=this.resolution;isNaN(t+r+i+n)||this.updatePathPrim(e,["m ",Math.floor(s*t),", ",Math.floor(s*r)," l ",Math.floor(s*i),", ",Math.floor(s*n)],o)},updatePathPrim:function(e,t,r){var i=r.canvasWidth,n=r.canvasHeight;t.length<=0&&(t=["m 0,0"]),e.style.width=i,e.style.height=n,this._setAttr(e,"coordsize",[Math.floor(this.resolution*i),Math.floor(this.resolution*n)].join(",")),this._setAttr(e,"path",t.join(""))},updatePathStringPoint:function(e,t,r){var i=[],n=Math.round,o=e.coords.scrCoords,s=t*Math.sqrt(3)*.5,a=.5*t,u=this.resolution;return"x"===r?i.push([" m ",n(u*(o[1]-t)),", ",n(u*(o[2]-t))," l ",n(u*(o[1]+t)),", ",n(u*(o[2]+t))," m ",n(u*(o[1]+t)),", ",n(u*(o[2]-t))," l ",n(u*(o[1]-t)),", ",n(u*(o[2]+t))].join("")):"+"===r?i.push([" m ",n(u*(o[1]-t)),", ",n(u*o[2])," l ",n(u*(o[1]+t)),", ",n(u*o[2])," m ",n(u*o[1]),", ",n(u*(o[2]-t))," l ",n(u*o[1]),", ",n(u*(o[2]+t))].join("")):"<>"===r||"<<>>"===r?("<<>>"===r&&(t*=1.41),i.push([" m ",n(u*(o[1]-t)),", ",n(u*o[2])," l ",n(u*o[1]),", ",n(u*(o[2]+t))," l ",n(u*(o[1]+t)),", ",n(u*o[2])," l ",n(u*o[1]),", ",n(u*(o[2]-t))," x e "].join(""))):"^"===r?i.push([" m ",n(u*o[1]),", ",n(u*(o[2]-t))," l ",n(u*(o[1]-s)),", ",n(u*(o[2]+a))," l ",n(u*(o[1]+s)),", ",n(u*(o[2]+a))," x e "].join("")):"v"===r?i.push([" m ",n(u*o[1]),", ",n(u*(o[2]+t))," l ",n(u*(o[1]-s)),", ",n(u*(o[2]-a))," l ",n(u*(o[1]+s)),", ",n(u*(o[2]-a))," x e "].join("")):">"===r?i.push([" m ",n(u*(o[1]+t)),", ",n(u*o[2])," l ",n(u*(o[1]-a)),", ",n(u*(o[2]-s))," l ",n(u*(o[1]-a)),", ",n(u*(o[2]+s))," l ",n(u*(o[1]+t)),", ",n(u*o[2])].join("")):"<"===r&&i.push([" m ",n(u*(o[1]-t)),", ",n(u*o[2])," l ",n(u*(o[1]+a)),", ",n(u*(o[2]-s))," l ",n(u*(o[1]+a)),", ",n(u*(o[2]+s))," x e "].join("")),i},updatePathStringPrim:function(e){var t,r,i=[],n=this.resolution,o=Math.round,s=" m ",a=Math.min(e.numberPoints,8192);if(e.numberPoints<=0)return"";if(a=Math.min(a,e.points.length),1===e.bezierDegree)for(t=0;t<a;t++)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?s=" m ":(r[1]>2e4?r[1]=2e4:r[1]<-2e4&&(r[1]=-2e4),r[2]>2e4?r[2]=2e4:r[2]<-2e4&&(r[2]=-2e4),i.push([s,o(n*r[1]),", ",o(n*r[2])].join("")),s=" l ");else if(3===e.bezierDegree)for(t=0;t<a;)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?s=" m ":(i.push([s,o(n*r[1]),", ",o(n*r[2])].join(""))," c "===s&&(t+=1,i.push([" ",o(n*(r=e.points[t].scrCoords)[1]),", ",o(n*r[2])].join("")),t+=1,i.push([" ",o(n*(r=e.points[t].scrCoords)[1]),", ",o(n*r[2])].join(""))),s=" c "),t+=1;return i.push(" e"),i},updatePathStringBezierPrim:function(e){var t,r,i,n,o,s,u=[],l=a.Z.evaluate(e.visProp.strokewidth),c=this.resolution,h=Math.round,d=" m ",p="plot"!==a.Z.evaluate(e.visProp.curvetype),m=Math.min(e.numberPoints,8192);if(e.numberPoints<=0)return"";for(p&&e.board.options.curve.RDPsmoothing&&(e.points=f.Z.RamerDouglasPeucker(e.points,1)),m=Math.min(m,e.points.length),r=1;r<3;r++)for(t=0,d=" m ";t<m;t++)isNaN((n=e.points[t].scrCoords)[1])||isNaN(n[2])?d=" m ":(n[1]>2e4?n[1]=2e4:n[1]<-2e4&&(n[1]=-2e4),n[2]>2e4?n[2]=2e4:n[2]<-2e4&&(n[2]=-2e4)," m "===d?u.push([d,h(c*n[1])," ",h(c*n[2])].join("")):(i=2*r,u.push([d,h(c*(o+(n[1]-o)*.333+l*(i*Math.random()-r)))," ",h(c*(s+(n[2]-s)*.333+l*(i*Math.random()-r)))," ",h(c*(o+(n[1]-o)*.666+l*(i*Math.random()-r)))," ",h(c*(s+(n[2]-s)*.666+l*(i*Math.random()-r)))," ",h(c*n[1])," ",h(c*n[2])].join(""))),d=" c ",o=n[1],s=n[2]);return u.push(" e"),u},updatePolygonPrim:function(e,t){var r,i,n=t.vertices.length,o=this.resolution,s=[];if(this._setAttr(e,"stroked","false"),!isNaN((i=t.vertices[0].coords.scrCoords)[1]+i[2])){for(s.push(["m ",Math.floor(o*i[1]),",",Math.floor(o*i[2])," l "].join("")),r=1;r<n-1;r++){if(t.vertices[r].isReal){if(isNaN((i=t.vertices[r].coords.scrCoords)[1]+i[2]))return;s.push(Math.floor(o*i[1])+","+Math.floor(o*i[2]))}else{this.updatePathPrim(e,"",t.board);return}r<n-2&&s.push(", ")}s.push(" x e"),this.updatePathPrim(e,s,t.board)}},updateRectPrim:function(e,t,r,i,n){e.style.left=Math.floor(t)+"px",e.style.top=Math.floor(r)+"px",i>=0&&(e.style.width=i+"px"),n>=0&&(e.style.height=n+"px")},setPropertyPrim:function(e,t,r){var i,n="";switch(t){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle"}""!==n&&(i=a.Z.evaluate(r),this._setAttr(e,n,i))},display:function(e,t){e&&e.rendNode&&(e.visPropOld.visible=t,t?e.rendNode.style.visibility="inherit":e.rendNode.style.visibility="hidden")},show:function(e){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="inherit")},hide:function(e){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="hidden")},setDashStyle:function(e,t){var r;t.dash>=0&&(r=e.rendNodeStroke,this._setAttr(r,"dashstyle",this.dashArray[t.dash]))},setGradient:function(e){var t=e.rendNodeFill,r=a.Z.evaluate(e.visProp.gradient);"linear"===r?(this._setAttr(t,"type","gradient"),this._setAttr(t,"color2",a.Z.evaluate(e.visProp.gradientsecondcolor)),this._setAttr(t,"opacity2",a.Z.evaluate(e.visProp.gradientsecondopacity)),this._setAttr(t,"angle",a.Z.evaluate(e.visProp.gradientangle))):"radial"===r?(this._setAttr(t,"type","gradientradial"),this._setAttr(t,"color2",a.Z.evaluate(e.visProp.gradientsecondcolor)),this._setAttr(t,"opacity2",a.Z.evaluate(e.visProp.gradientsecondopacity)),this._setAttr(t,"focusposition",100*a.Z.evaluate(e.visProp.gradientpositionx)+"%,"+100*a.Z.evaluate(e.visProp.gradientpositiony)+"%"),this._setAttr(t,"focussize","0,0")):this._setAttr(t,"type","solid")},setObjectFillColor:function(e,t,r){var i,n,o,u=a.Z.evaluate(t),l=a.Z.evaluate(r),c=e.rendNode;l=l>0?l:0,(e.visPropOld.fillcolor!==u||e.visPropOld.fillopacity!==l)&&(a.Z.exists(u)&&!1!==u&&(9!==u.length?(i=u,o=l):(i=(n=R.Z.rgba2rgbo(u))[0],o=l*n[1]),"none"===i||!1===i?this._setAttr(e.rendNode,"filled","false"):(this._setAttr(e.rendNode,"filled","true"),this._setAttr(e.rendNode,"fillcolor",i),a.Z.exists(o)&&e.rendNodeFill&&this._setAttr(e.rendNodeFill,"opacity",100*o+"%")),e.type===s.Z.OBJECT_TYPE_IMAGE&&c.filters.length>1&&(c.filters.item(1).opacity=Math.round(100*o),c.filters.item(1).enabled=!0)),e.visPropOld.fillcolor=u,e.visPropOld.fillopacity=l)},setObjectStrokeColor:function(e,t,r){var i,n,o,u,l=a.Z.evaluate(t),c=a.Z.evaluate(r),h=e.rendNode;c=c>0?c:0,(e.visPropOld.strokecolor!==l||e.visPropOld.strokeopacity!==c)&&(a.Z.exists(l)&&!1!==l&&(9!==l.length?(i=l,o=c):(i=(n=t.rgba2rgbo(l))[0],o=c*n[1]),e.elementClass===s.Z.OBJECT_CLASS_TEXT?(h.filters.length>1&&(h.filters.item(1).opacity=Math.round(100*o),h.filters.item(1).enabled=!0),h.style.color=i):(!1!==i&&(this._setAttr(h,"stroked","true"),this._setAttr(h,"strokecolor",i)),u=e.rendNodeStroke,a.Z.exists(o)&&e.type!==s.Z.OBJECT_TYPE_IMAGE&&this._setAttr(u,"opacity",100*o+"%"))),e.visPropOld.strokecolor=l,e.visPropOld.strokeopacity=c)},setObjectStrokeWidth:function(e,t){var r,i=a.Z.evaluate(t);isNaN(i)||e.visPropOld.strokewidth===i||(r=e.rendNode,this.setPropertyPrim(r,"stroked","true"),a.Z.exists(i)&&(this.setPropertyPrim(r,"stroke-width",i),0===i&&a.Z.exists(e.rendNodeStroke)&&this._setAttr(r,"stroked","false")),e.visPropOld.strokewidth=i)},setShadow:function(e){var t=e.rendNodeShadow,r=a.Z.evaluate(e.visProp.shadow);t&&e.visPropOld.shadow!==r&&(r?(this._setAttr(t,"On","True"),this._setAttr(t,"Offset","3pt,3pt"),this._setAttr(t,"Opacity","60%"),this._setAttr(t,"Color","#aaaaaa")):this._setAttr(t,"On","False"),e.visPropOld.shadow=r)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});var L=n.Z.VMLRenderer,I="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");n.Z.Util=n.Z.Util||{},n.Z.Util.genUUID=function(e){var t,r,i=[],n=0;for(""!==(e=e||"")&&"-"!==e.slice(e.length-1)&&(e+="-"),r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=I[19===r?3&t|8:t]);return e+i.join("")};var j=n.Z.Util;n.Z.CanvasRenderer=function(e,t){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=j.genUUID(),this.canvasNamespace=null,o.Z.isBrowser)this.container=e,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',t.width,'px" height="',t.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(o.Z.isNode())try{this.canvasRoot=n.Z.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch(e){throw Error('JXG.createCanvas not available.\nInstall the npm package `canvas`\nand call:\n    import { createCanvas } from "canvas";\n    JXG.createCanvas = createCanvas;\n')}},n.Z.CanvasRenderer.prototype=new O,n.Z.extend(n.Z.CanvasRenderer.prototype,{_drawPolygon:function(e,t,r){var i,n=e.length,o=this.context;if(n>0){if(r&&(o.lineWidth=0),o.beginPath(),o.moveTo(e[0][0],e[0][1]),1===t)for(i=1;i<n;i++)o.lineTo(e[i][0],e[i][1]);else for(i=1;i<n;i+=3)o.bezierCurveTo(e[i][0],e[i][1],e[i+1][0],e[i+1][1],e[i+2][0],e[i+2][1]);r?(o.lineTo(e[0][0],e[0][1]),o.closePath(),o.fill("evenodd")):o.stroke()}},_fill:function(e){var t=this.context;t.save(),this._setColor(e,"fill")&&t.fill("evenodd"),t.restore()},_rotatePoint:function(e,t,r){return[t*Math.cos(e)-r*Math.sin(e),t*Math.sin(e)+r*Math.cos(e)]},_rotateShape:function(e,t){var r,i=[],n=e.length;if(n<=0)return e;for(r=0;r<n;r++)i.push(this._rotatePoint(t,e[r][0],e[r][1]));return i},updateGradientAngle:function(e,t){var r,i,n,o,a,u,l,c,h,d,p,f,v=1,g=Math.cos(-t),b=Math.sin(-t),y=e.getBoundingBox();return Math.abs(g)>Math.abs(b)?v/=Math.abs(g):v/=Math.abs(b),g>=0?(n=0,o=g*v):(n=-g*v,o=0),b>=0?(a=0,u=b*v):(a=-b*v,u=0),r=new m.Z(s.Z.COORDS_BY_USER,[y[0],y[1]],e.board),p=(i=new m.Z(s.Z.COORDS_BY_USER,[y[2],y[3]],e.board)).scrCoords[1]-r.scrCoords[1],f=i.scrCoords[2]-r.scrCoords[2],l=r.scrCoords[1]+p*n,h=r.scrCoords[2]+f*a,c=r.scrCoords[1]+p*o,d=r.scrCoords[2]+f*u,this.context.createLinearGradient(l,h,c,d)},updateGradientCircle:function(e,t,r,i,n,o,a){var u,l,c,h,d,p,f,v,g=e.getBoundingBox();return u=new m.Z(s.Z.COORDS_BY_USER,[g[0],g[1]],e.board),f=(l=new m.Z(s.Z.COORDS_BY_USER,[g[2],g[3]],e.board)).scrCoords[1]-u.scrCoords[1],v=u.scrCoords[2]-l.scrCoords[2],c=u.scrCoords[1]+f*t,h=l.scrCoords[2]+v*r,d=u.scrCoords[1]+f*n,p=l.scrCoords[2]+v*o,this.context.createRadialGradient(d,p,a*(f+v)*.5,c,h,i*(f+v)*.5)},updateGradient:function(e){var t,r,i=a.Z.evaluate(e.visProp.gradient);return t=a.Z.evaluate(e.visProp.fillcolor),"linear"===i?r=this.updateGradientAngle(e,a.Z.evaluate(e.visProp.gradientangle)):"radial"===i&&(r=this.updateGradientCircle(e,a.Z.evaluate(e.visProp.gradientcx),a.Z.evaluate(e.visProp.gradientcy),a.Z.evaluate(e.visProp.gradientr),a.Z.evaluate(e.visProp.gradientfx),a.Z.evaluate(e.visProp.gradientfy),a.Z.evaluate(e.visProp.gradientfr))),r.addColorStop(a.Z.evaluate(e.visProp.gradientstartoffset),t),r.addColorStop(a.Z.evaluate(e.visProp.gradientendoffset),a.Z.evaluate(e.visProp.gradientsecondcolor)),r},_setColor:function(e,t,r){var i,n,o,s,u,l,c,h,d=!0,p=e.visProp;return(t=t||"stroke",r=r||t,i=this._getHighlighted(e),"linear"===(h=a.Z.evaluate(e.visProp.gradient))||"radial"===h)?this.context[r+"Style"]=this.updateGradient(e):("none"!==(o=a.Z.evaluate(p[i+t+"color"]))&&!1!==o?(l=(l=a.Z.evaluate(p[i+t+"opacity"]))>0?l:0,9!==o.length?(u=o,c=l):(u=(s=R.Z.rgba2rgbo(o))[0],c=l*s[1]),this.context.globalAlpha=c,this.context[r+"Style"]=u):d=!1,n=parseFloat(a.Z.evaluate(p[i+"strokewidth"])),"stroke"!==t||isNaN(n)||(0===n?this.context.globalAlpha=0:this.context.lineWidth=n),"stroke"===t&&void 0!==p.linecap&&""!==p.linecap&&(this.context.lineCap=p.linecap)),d},_stroke:function(e){var t=this.context,r=a.Z.evaluate(e.visProp.dash),i=a.Z.evaluate(e.visProp.dashscale)?.5*a.Z.evaluate(e.visProp.strokewidth):1;t.save(),r>0?t.setLineDash&&t.setLineDash(this.dashArray[r-1].map(function(e){return e*i})):this.context.lineDashArray=[],this._setColor(e,"stroke")&&t.stroke(),t.restore()},_translateShape:function(e,t,r){var i,n=[],o=e.length;if(o<=0)return e;for(i=0;i<o;i++)n.push([e[i][0]+t,e[i][1]+r]);return n},drawPoint:function(e){var t=a.Z.evaluate(e.visProp.face),r=a.Z.evaluate(e.visProp.size),i=e.coords.scrCoords,n=r*Math.sqrt(3)*.5,o=.5*r,s=parseFloat(a.Z.evaluate(e.visProp.strokewidth))/2,u=this.context;if(e.visPropCalc.visible)switch(t){case"cross":case"x":u.beginPath(),u.moveTo(i[1]-r,i[2]-r),u.lineTo(i[1]+r,i[2]+r),u.moveTo(i[1]+r,i[2]-r),u.lineTo(i[1]-r,i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(e);break;case"circle":case"o":u.beginPath(),u.arc(i[1],i[2],r+1+s,0,2*Math.PI,!1),u.closePath(),this._fill(e),this._stroke(e);break;case"square":case"[]":if(r<=0)break;u.save(),this._setColor(e,"stroke","fill")&&u.fillRect(i[1]-r-s,i[2]-r-s,2*r+3*s,2*r+3*s),u.restore(),u.save(),this._setColor(e,"fill"),u.fillRect(i[1]-r+s,i[2]-r+s,2*r-s,2*r-s),u.restore();break;case"plus":case"+":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+r,i[2]),u.moveTo(i[1],i[2]-r),u.lineTo(i[1],i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(e);break;case"divide":case"|":u.beginPath(),u.moveTo(i[1],i[2]-r),u.lineTo(i[1],i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(e);break;case"minus":case"-":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+r,i[2]),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(e);break;case"diamond2":case"<<>>":r*=1.41;case"diamond":case"<>":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1],i[2]+r),u.lineTo(i[1]+r,i[2]),u.lineTo(i[1],i[2]-r),u.closePath(),this._fill(e),this._stroke(e);break;case"triangleup":case"A":case"a":case"^":u.beginPath(),u.moveTo(i[1],i[2]-r),u.lineTo(i[1]-n,i[2]+o),u.lineTo(i[1]+n,i[2]+o),u.closePath(),this._fill(e),this._stroke(e);break;case"triangledown":case"v":u.beginPath(),u.moveTo(i[1],i[2]+r),u.lineTo(i[1]-n,i[2]-o),u.lineTo(i[1]+n,i[2]-o),u.closePath(),this._fill(e),this._stroke(e);break;case"triangleleft":case"<":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+o,i[2]-n),u.lineTo(i[1]+o,i[2]+n),u.closePath(),this._fill(e),this._stroke(e);break;case"triangleright":case">":u.beginPath(),u.moveTo(i[1]+r,i[2]),u.lineTo(i[1]-o,i[2]-n),u.lineTo(i[1]-o,i[2]+n),u.closePath(),this._fill(e),this._stroke(e)}},updatePoint:function(e){this.drawPoint(e)},drawArrows:function(e,t,r,i,n){var o,u,l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_,w,E,N,S=this.context,A=6,P=1,D=1,M=1,O=n.evFirst,T=n.evLast;if("none"!==a.Z.evaluate(e.visProp.strokecolor)&&(O||T)){if(e.elementClass===s.Z.OBJECT_CLASS_LINE)o=t.scrCoords[1],u=t.scrCoords[2],l=r.scrCoords[1],E=N=Math.atan2((c=r.scrCoords[2])-u,l-o);else{if(o=e.points[0].scrCoords[1],u=e.points[0].scrCoords[2],(w=e.points.length-1)<1)return;l=e.points[e.points.length-1].scrCoords[1],c=e.points[e.points.length-1].scrCoords[2],x=e.points[1].scrCoords[1]-e.points[0].scrCoords[1],C=e.points[1].scrCoords[2]-e.points[0].scrCoords[2],Z=e.points[w].scrCoords[1]-e.points[w-1].scrCoords[1],_=e.points[w].scrCoords[2]-e.points[w-1].scrCoords[2],O&&(E=Math.atan2(C,x)),T&&(N=Math.atan2(_,Z))}if(h=a.Z.evaluate(e.visProp[i+"strokewidth"]),O){if(d=h*(A=n.sizeFirst),m=P=n.typeFirst,2===P)f=[[d,-(.5*d)],[0,0],[d,.5*d],[.5*d,0]];else if(3===P)f=[[d/3,-(.5*d)],[0,-(.5*d)],[0,.5*d],[d/3,.5*d]];else if(4===P)for(d/=10,D=3,y=(f=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,b=0;b<y;b++)f[b][0]*=-d,f[b][1]*=d,f[b][0]+=10*d,f[b][1]-=3.31*d;else if(5===P)for(d/=10,D=3,y=(f=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,b=0;b<y;b++)f[b][0]*=-d,f[b][1]*=d,f[b][0]+=10*d,f[b][1]-=3.28*d;else if(6===P)for(d/=10,D=3,y=(f=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,b=0;b<y;b++)f[b][0]*=-d,f[b][1]*=d,f[b][0]+=10*d,f[b][1]-=2.84*d;else if(7===P)for(b=0,d=h,D=3,y=(f=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length;b<y;b++)f[b][0]*=-d,f[b][1]*=d,f[b][0]+=10*d,f[b][1]-=5.2*d;else f=[[d,-(.5*d)],[0,0],[d,.5*d]]}if(T){if(d=h*(A=n.sizeLast),v=P=n.typeLast,2===P)p=[[-d,-(.5*d)],[0,0],[-d,.5*d],[-(.5*d),0]];else if(3===P)p=[[-d/3,-(.5*d)],[0,-(.5*d)],[0,.5*d],[-d/3,.5*d]];else if(4===P)for(d/=10,M=3,y=(p=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,b=0;b<y;b++)p[b][0]*=d,p[b][1]*=d,p[b][0]-=10*d,p[b][1]-=3.31*d;else if(5===P)for(d/=10,M=3,y=(p=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,b=0;b<y;b++)p[b][0]*=d,p[b][1]*=d,p[b][0]-=10*d,p[b][1]-=3.28*d;else if(6===P)for(d/=10,M=3,y=(p=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,b=0;b<y;b++)p[b][0]*=d,p[b][1]*=d,p[b][0]-=10*d,p[b][1]-=2.84*d;else if(7===P)for(b=0,d=h,M=3,y=(p=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length;b<y;b++)p[b][0]*=d,p[b][1]*=d,p[b][0]-=10*d,p[b][1]-=5.2*d;else p=[[-d,-(.5*d)],[0,0],[-d,.5*d]]}S.save(),this._setColor(e,"stroke","fill")&&(this._setColor(e,"stroke"),O&&(g=7!==m,this._drawPolygon(this._translateShape(this._rotateShape(f,E),o,u),D,g)),T&&(g=7!==v,this._drawPolygon(this._translateShape(this._rotateShape(p,N),l,c),M,g))),S.restore()}},drawLine:function(e){var t,r,i,n,o,u=new m.Z(s.Z.COORDS_BY_USER,e.point1.coords.usrCoords,e.board),l=new m.Z(s.Z.COORDS_BY_USER,e.point2.coords.usrCoords,e.board),c=null;e.visPropCalc.visible&&(i=this._getHighlighted(e),n=a.Z.evaluate(e.visProp[i+"strokewidth"]),((o=this.getArrowHeadData(e,n,i)).evFirst||o.evLast)&&(c=-4),h.Z.calcStraight(e,u,l,c),this.handleTouchpoints(e,u,l,o),t=new m.Z(s.Z.COORDS_BY_USER,u.usrCoords,e.board),r=new m.Z(s.Z.COORDS_BY_USER,l.usrCoords,e.board),this.getPositionArrowHead(e,u,l,o),this.context.beginPath(),this.context.moveTo(u.scrCoords[1],u.scrCoords[2]),this.context.lineTo(l.scrCoords[1],l.scrCoords[2]),this._stroke(e),(o.evFirst||o.evLast)&&this.drawArrows(e,t,r,i,o))},updateLine:function(e){this.drawLine(e)},drawTicks:function(){},updateTicks:function(e){var t,r,i,n,o,s,a=e.ticks.length,u=this.context;for(u.beginPath(),t=0;t<a;t++)for(i=(r=e.ticks[t])[0],n=r[1],o=i.length,u.moveTo(i[0],n[0]),s=1;s<o;++s)u.lineTo(i[s],n[s]);u.lineCap="round",this._stroke(e)},drawCurve:function(e){var t,r,i;a.Z.evaluate(e.visProp.handdrawing)?this.updatePathStringBezierPrim(e):this.updatePathStringPrim(e),e.numberPoints>1&&(t=this._getHighlighted(e),r=a.Z.evaluate(e.visProp[t+"strokewidth"]),((i=this.getArrowHeadData(e,r,t)).evFirst||i.evLast)&&this.drawArrows(e,null,null,t,i))},updateCurve:function(e){this.drawCurve(e)},drawEllipse:function(e){var t=e.center.coords.scrCoords[1],r=e.center.coords.scrCoords[2],i=e.board.unitX,n=e.board.unitY,o=2*e.Radius(),s=2*e.Radius(),a=o*i,u=s*n,l=t-a/2,c=r-u/2,h=a/2*.5522848,d=u/2*.5522848,p=l+a,f=c+u,m=l+a/2,v=c+u/2,g=this.context;o>0&&s>0&&!isNaN(t+r)&&(g.beginPath(),g.moveTo(l,v),g.bezierCurveTo(l,v-d,m-h,c,m,c),g.bezierCurveTo(m+h,c,p,v-d,p,v),g.bezierCurveTo(p,v+d,m+h,f,m,f),g.bezierCurveTo(m-h,f,l,v+d,l,v),g.closePath(),this._fill(e),this._stroke(e))},updateEllipse:function(e){return this.drawEllipse(e)},displayCopyright:function(e,t){var r=this.context;r.save(),r.font=t+"px Arial",r.fillStyle="#aaa",r.lineWidth=.5,r.fillText(e,10,2+t),r.restore()},drawInternalText:function(e){var t=a.Z.evaluate(e.visProp.fontsize),r=a.Z.evaluate(e.visProp.fontunit),i=e.getAnchorX(),n=e.getAnchorY(),o=this.context;return o.save(),this._setColor(e,"stroke","fill")&&!isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])&&(o.font=(t>0?t:0)+r+" Arial",this.transformImage(e,e.transformations),"left"===i?o.textAlign="left":"right"===i?o.textAlign="right":"middle"===i&&(o.textAlign="center"),"bottom"===n?o.textBaseline="bottom":"top"===n?o.textBaseline="top":"middle"===n&&(o.textBaseline="middle"),o.fillText(e.plaintext,e.coords.scrCoords[1],e.coords.scrCoords[2])),o.restore(),null},updateInternalText:function(e){this.drawInternalText(e)},setObjectStrokeColor:function(e,t,r){var i,n,o,u,l=a.Z.evaluate(t),c=a.Z.evaluate(r);c=c>0?c:0,(e.visPropOld.strokecolor!==l||e.visPropOld.strokeopacity!==c)&&(a.Z.exists(l)&&!1!==l&&(9!==l.length?(i=l,o=c):(i=(n=R.Z.rgba2rgbo(l))[0],o=c*n[1]),u=e.rendNode,e.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(e.visProp.display)&&(u.style.color=i,u.style.opacity=o)),e.visPropOld.strokecolor=l,e.visPropOld.strokeopacity=c)},drawImage:function(e){e.rendNode=new Image,e._src="",this.updateImage(e)},updateImage:function(e){var t=this.context,r=a.Z.evaluate(e.visProp.fillopacity),i=a.Z.bind(function(){e.imgIsLoaded=!0,e.size[0]<=0||e.size[1]<=0||(t.save(),t.globalAlpha=r,this.transformImage(e,e.transformations),t.drawImage(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),t.restore())},this);this.updateImageURL(e)?e.rendNode.onload=i:e.imgIsLoaded&&i()},transformImage:function(e,t){var r,i,n,o,l,c=t.length,h=this.context;if(c>0){if(r=this.joinTransforms(e,t),e.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===e.visProp.display){if(-1===(i=" matrix("+[r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0]].join(",")+") ").indexOf("NaN")){switch((l=e.rendNode).style.transform=i,n=-e.coords.scrCoords[1],o=-e.coords.scrCoords[2],a.Z.evaluate(e.visProp.anchorx)){case"right":n+=e.size[0];break;case"middle":n+=.5*e.size[0]}switch(a.Z.evaluate(e.visProp.anchory)){case"bottom":o+=e.size[1];break;case"middle":o+=.5*e.size[1]}l.style["transform-origin"]=n+"px "+o+"px"}}else Math.abs(f.Z.det(r))>=u.Z.eps&&h.transform(r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0])}},updateImageURL:function(e){var t;return t=a.Z.evaluate(e.url),e._src!==t&&(e.imgIsLoaded=!1,e.rendNode.src=t,e._src=t,!0)},remove:function(e){a.Z.exists(e)&&a.Z.exists(e.parentNode)&&e.parentNode.removeChild(e)},updatePathStringPrim:function(e){var t,r,i,n,o,s="M",a=this.context;if(!(e.numberPoints<=0)){if(o=Math.min(e.points.length,e.numberPoints),a.beginPath(),1===e.bezierDegree)for(t=0;t<o;t++)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?s="M":(r[1]>5e3?r[1]=5e3:r[1]<-5e3&&(r[1]=-5e3),r[2]>5e3?r[2]=5e3:r[2]<-5e3&&(r[2]=-5e3),"M"===s?a.moveTo(r[1],r[2]):a.lineTo(r[1],r[2]),s="L");else if(3===e.bezierDegree)for(t=0;t<o;)isNaN((r=e.points[t].scrCoords)[1])||isNaN(r[2])?s="M":("M"===s?a.moveTo(r[1],r[2]):(t+=1,i=e.points[t].scrCoords,t+=1,n=e.points[t].scrCoords,a.bezierCurveTo(r[1],r[2],i[1],i[2],n[1],n[2])),s="C"),t+=1;a.lineCap="round",this._fill(e),this._stroke(e)}},updatePathStringBezierPrim:function(e){var t,r,i,n,o,s,u,l="M",c=a.Z.evaluate(e.visProp.strokewidth),h="plot"!==a.Z.evaluate(e.visProp.curvetype),d=this.context;if(!(e.numberPoints<=0)){for(h&&e.board.options.curve.RDPsmoothing&&(e.points=f.Z.RamerDouglasPeucker(e.points,.5)),u=Math.min(e.points.length,e.numberPoints),d.beginPath(),r=1;r<3;r++)for(t=0,l="M";t<u;t++)isNaN((n=e.points[t].scrCoords)[1])||isNaN(n[2])?l="M":(n[1]>5e3?n[1]=5e3:n[1]<-5e3&&(n[1]=-5e3),n[2]>5e3?n[2]=5e3:n[2]<-5e3&&(n[2]=-5e3),"M"===l?d.moveTo(n[1],n[2]):(i=2*r,d.bezierCurveTo(o+(n[1]-o)*.333+c*(i*Math.random()-r),s+(n[2]-s)*.333+c*(i*Math.random()-r),o+(n[1]-o)*.666+c*(i*Math.random()-r),s+(n[2]-s)*.666+c*(i*Math.random()-r),n[1],n[2])),l="C",o=n[1],s=n[2]);d.lineCap="round",this._fill(e),this._stroke(e)}},updatePolygonPrim:function(e,t){var r,i,n,o=t.vertices.length,s=this.context,a=!0;if(!(o<=0)&&t.visPropCalc.visible){for("polygonalchain"===t.elType&&o++,s.beginPath(),i=0;!t.vertices[i].isReal&&i<o-1;)i++,a=!1;for(r=t.vertices[i].coords.scrCoords,s.moveTo(r[1],r[2]),n=i;n<o-1;n++)t.vertices[n].isReal||(a=!1),r=t.vertices[n].coords.scrCoords,s.lineTo(r[1],r[2]);s.closePath(),a&&this._fill(t)}},display:function(e,t){e&&e.rendNode&&(e.visPropOld.visible=t,t?e.rendNode.style.visibility="inherit":e.rendNode.style.visibility="hidden")},show:function(e){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),a.Z.exists(e.rendNode)&&(e.rendNode.style.visibility="inherit")},hide:function(e){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),a.Z.exists(e.rendNode)&&(e.rendNode.style.visibility="hidden")},setGradient:function(e){},setShadow:function(e){e.visPropOld.shadow!==e.visProp.shadow&&(e.visPropOld.shadow=e.visProp.shadow)},highlight:function(e){return e.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(e.visProp.display)?this.updateTextStyle(e,!0):(e.board.prepareUpdate(),e.board.renderer.suspendRedraw(e.board),e.board.updateRenderer(),e.board.renderer.unsuspendRedraw()),this},noHighlight:function(e){return e.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(e.visProp.display)?this.updateTextStyle(e,!1):(e.board.prepareUpdate(),e.board.renderer.suspendRedraw(e.board),e.board.updateRenderer(),e.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(e){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),e&&e.attr.showcopyright&&this.displayCopyright(n.Z.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(e,t){this.container?(this.canvasRoot.style.width=parseFloat(e)+"px",this.canvasRoot.style.height=parseFloat(t)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(e)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(t)+"px")):(this.canvasRoot.width=2*parseFloat(e),this.canvasRoot.height=2*parseFloat(t)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});var z=n.Z.CanvasRenderer;n.Z.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},n.Z.extend(n.Z.NoRenderer.prototype,{drawPoint:function(e){},updatePoint:function(e){},changePointStyle:function(e){},drawLine:function(e){},updateLine:function(e){},drawTicks:function(e){},updateTicks:function(e){},drawCurve:function(e){},updateCurve:function(e){},drawEllipse:function(e){},updateEllipse:function(e){},drawPolygon:function(e){},updatePolygon:function(e){},displayCopyright:function(e,t){},drawInternalText:function(e){},updateInternalText:function(e){},drawText:function(e){},updateText:function(e){},updateTextStyle:function(e,t){},updateInternalTextStyle:function(e,t,r){},drawImage:function(e){},updateImage:function(e){},transformImage:function(e,t){},updateImageURL:function(e){},appendChildPrim:function(e,t){},appendNodesToElement:function(e,t){},createPrim:function(e,t){return null},remove:function(e){},makeArrows:function(e){},updateEllipsePrim:function(e,t,r,i,n){},updateLinePrim:function(e,t,r,i,n,o){},updatePathPrim:function(e,t,r){},updatePathStringPoint:function(e,t,r){},updatePathStringPrim:function(e){},updatePathStringBezierPrim:function(e){},updatePolygonPrim:function(e,t){},updateRectPrim:function(e,t,r,i,n){},setPropertyPrim:function(e,t,r){},display:function(e,t){e&&(e.visPropOld.visible=t)},show:function(e){},hide:function(e){},setBuffering:function(e,t){},setDashStyle:function(e){},setDraft:function(e){},removeDraft:function(e){},setGradient:function(e){},updateGradient:function(e){},setObjectTransition:function(e,t){},setObjectFillColor:function(e,t,r){},setObjectStrokeColor:function(e,t,r){},setObjectStrokeWidth:function(e,t){},setShadow:function(e){},highlight:function(e){},noHighlight:function(e){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(e){},getElementById:function(e){return null},resize:function(e,t){},removeToInsertLater:function(){return function(){}}}),n.Z.NoRenderer.prototype=new O;var U=n.Z.NoRenderer;n.Z.JSXGraph={rendererType:(M.Z.board.renderer="no",o.Z.supportsVML()&&(M.Z.board.renderer="vml",document.onmousemove=function(){var e;return document.body&&(e=document.body.scrollLeft+document.body.scrollTop),e}),o.Z.supportsCanvas()&&(M.Z.board.renderer="canvas"),o.Z.supportsSVG()&&(M.Z.board.renderer="svg"),o.Z.isNode()&&o.Z.supportsCanvas()&&(M.Z.board.renderer="canvas"),(o.Z.isNode()||"no"===M.Z.renderer)&&(M.Z.text.display="internal",M.Z.infobox.display="internal"),M.Z.board.renderer),initRenderer:function(e,t,r,i){var n;if(a.Z.exists(r)&&!1!==r||"object"!=typeof document||(r=document),"object"==typeof r&&null!==e)for(n=a.Z.isString(e)?r.getElementById(e):e;n.firstChild;)n.removeChild(n.firstChild);else n=e;return(void 0===i||"auto"===i)&&(i=this.rendererType),"svg"===i?new k(n,t):"vml"===i?new L(n):"canvas"===i?new z(n,t):new U},_setAttributes:function(e,t){var r,i,n=a.Z.copyAttributes(e,t,"board"),o=["drag","fullscreen","intl","keyboard","logging","navbar","pan","resize","screenshot","selection","zoom"],s=o.length;for(r=0;r<s;r++)n[i=o[r]]=a.Z.copyAttributes(n,t,"board",i);return n.movetarget=e.moveTarget||e.movetarget||t.board.moveTarget,n},_fillBoard:function(e,t,r){e.initInfobox(t.infobox),e.maxboundingbox=t.maxboundingbox,e.resizeContainer(r.width,r.height,!0,!0),e._createSelectionPolygon(t),e.renderer.drawNavigationBar(e,t.navbar),n.Z.boards[e.id]=e},_setARIA:function(e,t){var r,i,n,s,u,l,c=t.document;if("object"!=typeof c){if(!o.Z.isBrowser)return;c=document}r=(i=a.Z.isString(e)?c.getElementById(e):e).ownerDocument,s=i.parentNode,u=e+"_ARIAlabel",l=e+"_ARIAdescription",(n=r.createElement("div")).innerHTML=t.title,n.setAttribute("id",u),n.style.display="none",s.insertBefore(n,i),(n=r.createElement("div")).innerHTML=t.description,n.setAttribute("id",l),n.style.display="none",s.insertBefore(n,i),i.setAttribute("aria-labelledby",u),i.setAttribute("aria-describedby",l)},_removeARIANodes:function(e){var t,r,i;"object"==typeof(i=e.document||document)&&(r=e.containerObj.getAttribute("aria-labelledby"),(t=i.getElementById(r))&&t.parentNode&&t.parentNode.removeChild(t),r=e.containerObj.getAttribute("aria-describedby"),(t=i.getElementById(r))&&t.parentNode&&t.parentNode.removeChild(t))},initBoard:function(e,t){var r,i,s,l,c,h,d,p,f,m,v,g,b,y,x,C=0,Z=0,_={};return"default"!==(t=t||{}).theme&&a.Z.exists(n.Z.themes[t.theme])&&(_=n.Z.themes[t.theme]),y=a.Z.deepCopy(M.Z,_,!0),m=this._setAttributes(t,y),p=o.Z.getDimensions(e,m.document),m.unitx||m.unity?(r=a.Z.def(m.originx,150),i=a.Z.def(m.originy,150),s=a.Z.def(m.unitx,50),l=a.Z.def(m.unity,50)):((f=m.boundingbox)[0]<m.maxboundingbox[0]&&(f[0]=m.maxboundingbox[0]),f[1]>m.maxboundingbox[1]&&(f[1]=m.maxboundingbox[1]),f[2]>m.maxboundingbox[2]&&(f[2]=m.maxboundingbox[2]),f[3]<m.maxboundingbox[3]&&(f[3]=m.maxboundingbox[3]),c=Math.max(parseInt(p.width,10),u.Z.eps),h=Math.max(parseInt(p.height,10),u.Z.eps),a.Z.exists(f)&&m.keepaspectratio?Math.abs(s=c/(f[2]-f[0]))<Math.abs(l=h/(f[1]-f[3]))?Z=(h/(l=Math.abs(s)*l/Math.abs(l))-(f[1]-f[3]))*.5:C=(c/(s=Math.abs(l)*s/Math.abs(s))-(f[2]-f[0]))*.5:(s=c/(f[2]-f[0]),l=h/(f[1]-f[3])),r=-s*(f[0]-C),i=l*(f[1]+Z)),d=this.initRenderer(e,p,m.document,m.renderer),this._setARIA(e,m),(x=new F.Z(e,d,m.id,[r,i],m.zoomx,m.zoomy,s,l,p.width,p.height,m)).keepaspectratio=m.keepaspectratio,this._fillBoard(x,m,p),x.suspendUpdate(),(m=x.attr).axis&&(v="object"==typeof m.axis?m.axis:{},g=a.Z.deepCopy(y.board.defaultaxes.x,v),b=a.Z.deepCopy(y.board.defaultaxes.y,v),m.defaultaxes.x&&(g=a.Z.deepCopy(g,m.defaultaxes.x)),m.defaultaxes.y&&(b=a.Z.deepCopy(b,m.defaultaxes.y)),x.defaultAxes={},x.defaultAxes.x=x.create("axis",[[0,0],[1,0]],g),x.defaultAxes.y=x.create("axis",[[0,0],[0,1]],b)),m.grid&&x.create("grid",[],"object"==typeof m.grid?m.grid:{}),x.unsuspendUpdate(),x},loadBoardFromFile:function(e,t,r,i,n){var s,a,u,l,c;return i=i||{},s=this._setAttributes(i),l=o.Z.getDimensions(e,s.document),a=this.initRenderer(e,l,s.document,s.renderer),this._setARIA(e,s),u=new F.Z(e,a,"",[150,150],1,1,50,50,l.width,l.height,s),this._fillBoard(u,s,l),c=s.encoding||"iso-8859-1",T.parseFileContent(t,u,r,!0,c,n),u},loadBoardFromString:function(e,t,r,i,n){var s,a,u,l;return i=i||{},s=this._setAttributes(i),l=o.Z.getDimensions(e,s.document),a=this.initRenderer(e,l,s.document,s.renderer),this._setARIA(e,s),u=new F.Z(e,a,"",[150,150],1,1,50,50,l.width,l.height,s),this._fillBoard(u,s,l),T.parseString(t,u,r,!0,n),u},freeBoard:function(e){var t;for(t in"string"==typeof e&&(e=n.Z.boards[e]),this._removeARIANodes(e),e.removeEventHandlers(),e.suspendUpdate(),e.objects)e.objects.hasOwnProperty(t)&&e.objects[t].remove();for(;e.containerObj.firstChild;)e.containerObj.removeChild(e.containerObj.firstChild);for(t in e.objects)e.objects.hasOwnProperty(t)&&delete e.objects[t];delete e.renderer,e.jc.creator.clearCache(),delete e.jc,delete n.Z.boards[e.id]},registerElement:function(e,t){n.Z.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),n.Z.registerElement(e,t)}},o.Z.isBrowser&&"object"==typeof document&&o.Z.addEvent(window,"load",function(){var e,t,r,i,o,s,u,l,c,h,d,p,f,m,v,g,b,y,x=!1,C=document.getElementsByTagName("script"),Z=function(e,t,r){var i=n.Z.JSXGraph.initBoard(o,{boundingbox:r,keepaspectratio:!0,grid:v,axis:m,showReload:!0});if(t.toLowerCase().indexOf("script")>-1)i.construct(e);else try{i.jc.parse(e)}catch(e){n.Z.debug(e)}return i},_=function(e,t,r,i){return function(){var o;n.Z.JSXGraph.freeBoard(e),(o=Z(t,r,i)).reload=_(o,t,r,i)}};for(t=0;t<C.length;t++)if(e=C[t].getAttribute("type",!1),a.Z.exists(e)&&("text/jessiescript"===e.toLowerCase()||"jessiescript"===e.toLowerCase()||"text/jessiecode"===e.toLowerCase()||"jessiecode"===e.toLowerCase())){if(p=C[t].getAttribute("class",!1)||"",l=C[t].getAttribute("width",!1)||"",c=C[t].getAttribute("height",!1)||"",h=C[t].getAttribute("maxwidth",!1)||"100%",d=C[t].getAttribute("aspectratio",!1)||"1/1",f=C[t].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",o=C[t].getAttribute("container",!1),b=C[t].getAttribute("src",!1),4!==(f=f.split(",")).length)f=[-5,5,5,-5];else for(r=0;r<f.length;r++)f[r]=parseFloat(f[r]);if(m=a.Z.str2Bool(C[t].getAttribute("axis",!1)||"false"),v=a.Z.str2Bool(C[t].getAttribute("grid",!1)||"false"),a.Z.exists(o))i=document.getElementById(o);else{o="jessiescript_autgen_jxg_"+t,(i=document.createElement("div")).setAttribute("id",o),u=(""!==l?"width:"+l+";":"")+(""!==c?"height:"+c+";":"")+(""!==h?"max-width:"+h+";":"")+(""!==d?"aspect-ratio:"+d+";":""),i.setAttribute("style",u),i.setAttribute("class","jxgbox "+p);try{document.body.insertBefore(i,C[t])}catch(e){"object"==typeof jQuery&&jQuery(i).insertBefore(C[t])}}g="",a.Z.exists(b)?(x=!0,(y=new XMLHttpRequest).open("GET",b),y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("load",function(){if(this.status<400)(s=Z(g=this.responseText+"\n"+g,e,f)).reload=_(s,g,e,f);else throw Error("\nJSXGraph: failed to load file",b,":",this.responseText)}),y.addEventListener("error",function(e){throw Error("\nJSXGraph: failed to load file",b,":",e)}),y.send()):x=!1,document.getElementById(o)?(g=(g=C[t].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),C[t].innerHTML=g,x||((s=Z(g,e,f)).reload=_(s,g,e,f))):n.Z.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),n.Z.JSXGraph;var Y=r(3154),X=r(7158);n.Z.Point=function(e,t,r){this.constructor(e,r,s.Z.OBJECT_TYPE_POINT,s.Z.OBJECT_CLASS_POINT),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},n.Z.Point.prototype=new Y.Z,a.Z.copyPrototypeMethods(n.Z.Point,X.Z,"coordsConstructor"),n.Z.extend(n.Z.Point.prototype,{hasPoint:function(e,t){var r,i,n,o=this.coords.scrCoords,s=a.Z.evaluate(this.visProp.sizeunit);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(n=this.board._inputDevice,i=a.Z.evaluate(this.visProp.precision[n])):i=this.board.options.precision.hasPoint,r=parseFloat(a.Z.evaluate(this.visProp.size)),"user"===s&&(r*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(r+=.5*parseFloat(a.Z.evaluate(this.visProp.strokewidth)))<i&&(r=i),Math.abs(o[1]-e)<r+2&&Math.abs(o[2]-t)<r+2},update:function(e){return this.needsUpdate&&(this.updateCoords(e),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0)),this},updateTransform:function(e){var t,r;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(t=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(s.Z.COORDS_BY_USER,t)):t=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(s.Z.COORDS_BY_USER,t),r=1;r<this.transformations.length;r++)this.coords.setCoordinates(s.Z.COORDS_BY_USER,this.transformations[r].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(e,t,r,i){var n;e=this.board.select(e),t=this.board.select(t),n=h.Z.intersectionFunction(this.board,e,t,r,i,this.visProp.alwaysintersect),this.addConstraint([n]);try{e.addChild(this),t.addChild(this)}catch(r){throw Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e+"' and '"+typeof t+"'.")}this.type=s.Z.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[e.id,t.id,r,i],this.generatePolynomial=function(){var r=e.generatePolynomial(this),i=t.generatePolynomial(this);return 0===r.length||0===i.length?[]:[r[0],i[0]]},this.prepareUpdate().update()},setStyle:function(e){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][e],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][e],this.board.renderer.changePointStyle(this),this},normalizeFace:function(e){return n.Z.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),M.Z.normalizePointFace(e)},face:function(e){n.Z.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:e})},size:function(e){n.Z.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:e})},isOn:function(e,t){var r,i;if(t=t||u.Z.eps,a.Z.isPoint(e))return this.Dist(e)<t;if(e.elementClass===s.Z.OBJECT_CLASS_LINE){if("segment"!==e.elType||a.Z.evaluate(this.visProp.alwaysintersect))return h.Z.distPointLine(this.coords.usrCoords,e.stdform)<t;if((r=n.Z.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords))[1]>=0&&r[1]<=1&&h.Z.distPointLine(this.coords.usrCoords,e.stdform)<t)return!0}else if(e.elementClass===s.Z.OBJECT_CLASS_CIRCLE)return a.Z.evaluate(e.visProp.hasinnerpoints)?this.Dist(e.center)<e.Radius()+t:Math.abs(this.Dist(e.center)-e.Radius())<t;else if(e.elementClass===s.Z.OBJECT_CLASS_CURVE)return i=h.Z.projectPointToCurve(this,e,this.board)[0],h.Z.distance(this.coords.usrCoords,i.usrCoords,3)<t;else if(e.type===s.Z.OBJECT_TYPE_POLYGON)return!!(a.Z.evaluate(e.visProp.hasinnerpoints)&&e.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],n.Z.COORDS_BY_USER))||(r=h.Z.projectCoordsToPolygon(this.coords.usrCoords,e),h.Z.distance(this.coords.usrCoords,r,3)<t);else if(e.type===s.Z.OBJECT_TYPE_TURTLE)return i=h.Z.projectPointToTurtle(this,e,this.board),h.Z.distance(this.coords.usrCoords,i.usrCoords,3)<t;return!1},cloneToBackground:function(){var e={};return e.id=this.id+"T"+this.numTraces,this.numTraces+=1,e.coords=this.coords,e.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.elementClass=s.Z.OBJECT_CLASS_POINT,e.board=this.board,a.Z.clearVisPropOld(e),e.visPropCalc={visible:a.Z.evaluate(e.visProp.visible)},this.board.renderer.drawPoint(e),this.traces[e.id]=e.rendNode,this}}),n.Z.createPoint=function(e,t,r){var i,o;if(o=a.Z.copyAttributes(r,e.options,"point"),!(i=X.Z.create(n.Z.Point,e,t,o)))throw Error("JSXGraph: Can't create point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return i},n.Z.createGlider=function(e,t,r){var i,n,o=a.Z.copyAttributes(r,e.options,"glider");return n=1===t.length?[0,0]:t.slice(0,2),(i=e.create("point",n,o)).makeGlider(t[t.length-1]),i},n.Z.createIntersectionPoint=function(e,t,r){var i,n,o,u,l,c,d=a.Z.copyAttributes(r,e.options,"intersection");t.push(0,0),n=e.select(t[0]),o=e.select(t[1]),l=t[2]||0,c=t[3]||0,i=e.create("point",[0,0,0],d),u=h.Z.intersectionFunction(e,n,o,l,c,i.visProp.alwaysintersect),i.addConstraint([u]);try{n.addChild(i),o.addChild(i)}catch(e){throw Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.")}return i.type=s.Z.OBJECT_TYPE_INTERSECTION,i.elType="intersection",i.setParents([n.id,o.id]),i.intersectionNumbers=[l,c],i.getParents=function(){return this.parents.concat(this.intersectionNumbers)},i.generatePolynomial=function(){var e=n.generatePolynomial(i),t=o.generatePolynomial(i);return 0===e.length||0===t.length?[]:[e[0],t[0]]},i},n.Z.createOtherIntersectionPoint=function(e,t,r){var i,n,o,l;if(3!==t.length||!a.Z.isPoint(t[2])||t[0].elementClass!==s.Z.OBJECT_CLASS_LINE&&t[0].elementClass!==s.Z.OBJECT_CLASS_CIRCLE||t[1].elementClass!==s.Z.OBJECT_CLASS_LINE&&t[1].elementClass!==s.Z.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof t[0]+"',  '"+typeof t[1]+"'and  '"+typeof t[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return n=e.select(t[0]),o=e.select(t[1]),l=e.select(t[2]),(i=e.create("point",[function(){var e=h.Z.meet(n.stdform,o.stdform,0,n.board);return Math.abs(l.X()-e.usrCoords[1])>u.Z.eps||Math.abs(l.Y()-e.usrCoords[2])>u.Z.eps||Math.abs(l.Z()-e.usrCoords[0])>u.Z.eps?e:h.Z.meet(n.stdform,o.stdform,1,n.board)}],r)).type=s.Z.OBJECT_TYPE_INTERSECTION,i.elType="otherintersection",i.setParents([n.id,o.id,l]),n.addChild(i),o.addChild(i),i.generatePolynomial=function(){var e=n.generatePolynomial(i),t=o.generatePolynomial(i);return 0===e.length||0===t.length?[]:[e[0],t[0]]},i},n.Z.createPolePoint=function(e,t,r){var i,o,a,u,l,c,h;if(t.length>1&&(u=t[0].type===s.Z.OBJECT_TYPE_CONIC||t[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE,l=t[1].type===s.Z.OBJECT_TYPE_CONIC||t[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE,c=t[0].elementClass===s.Z.OBJECT_CLASS_LINE,h=t[1].elementClass===s.Z.OBJECT_CLASS_LINE),2!==t.length||!(u&&h||c&&l))throw Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return h?(o=e.select(t[0]),a=e.select(t[1])):(o=e.select(t[1]),a=e.select(t[0])),(i=e.create("point",[function(){var e=o.quadraticform,t=a.stdform.slice(0,3);return[n.Z.Math.Numerics.det([t,e[1],e[2]]),n.Z.Math.Numerics.det([e[0],t,e[2]]),n.Z.Math.Numerics.det([e[0],e[1],t])]}],r)).elType="polepoint",i.setParents([o.id,a.id]),o.addChild(i),a.addChild(i),i},n.Z.registerElement("point",n.Z.createPoint),n.Z.registerElement("glider",n.Z.createGlider),n.Z.registerElement("intersection",n.Z.createIntersectionPoint),n.Z.registerElement("otherintersection",n.Z.createOtherIntersectionPoint),n.Z.registerElement("polepoint",n.Z.createPolePoint);var J=n.Z.Point;n.Z.Line=function(e,t,r,i){this.constructor(e,i,s.Z.OBJECT_TYPE_LINE,s.Z.OBJECT_CLASS_LINE),this.point1=this.board.select(t),this.point2=this.board.select(r),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=n.Z.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",Slope:"Slope",L:"L",length:"L",setFixedLength:"setFixedLength"})},n.Z.Line.prototype=new Y.Z,n.Z.extend(n.Z.Line.prototype,{hasPoint:function(e,t){var r,i,n,o,l,c,d,p,f,v=[],g=[1,e,t],b=a.Z.evaluate(this.visProp.strokewidth);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(f=this.board._inputDevice,p=a.Z.evaluate(this.visProp.precision[f])):p=this.board.options.precision.hasPoint,p+=.5*b,v[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,v[1]=this.stdform[1]/this.board.unitX,v[2]=-(this.stdform[2]/this.board.unitY),!isNaN(r=h.Z.distPointLine(g,v))&&!(r>p)&&(!!(a.Z.evaluate(this.visProp.straightfirst)&&a.Z.evaluate(this.visProp.straightlast))||(n=this.point1.coords,o=this.point2.coords,i=[0,v[1],v[2]],i=u.Z.crossProduct(i,g),i=u.Z.crossProduct(i,v),i[1]/=i[0],i[2]/=i[0],i[0]=1,i=new m.Z(s.Z.COORDS_BY_SCREEN,i.slice(1),this.board).usrCoords,l=n.distance(s.Z.COORDS_BY_USER,o),n=n.usrCoords.slice(0),o=o.usrCoords.slice(0),l<u.Z.eps?c=0:(l===Number.POSITIVE_INFINITY&&(l=1/u.Z.eps,Math.abs(o[0])<u.Z.eps?(l/=h.Z.distance([0,0,0],o),o=[1,n[1]+o[1]*l,n[2]+o[2]*l]):(l/=h.Z.distance([0,0,0],n),n=[1,o[1]+n[1]*l,o[2]+n[2]*l])),Math.abs(l=o[d=1]-n[d])<u.Z.eps&&(l=o[d=2]-n[d]),c=(i[d]-n[d])/l),(!!a.Z.evaluate(this.visProp.straightfirst)||!(c<0))&&!(!a.Z.evaluate(this.visProp.straightlast)&&c>1)))},update:function(){var e;return this.needsUpdate&&(this.constrained&&(a.Z.isFunction(this.funps)?(e=this.funps())&&e.length&&2===e.length&&(this.point1=e[0],this.point2=e[1]):(a.Z.isFunction(this.funp1)&&(e=this.funp1(),a.Z.isPoint(e)?this.point1=e:e&&e.length&&2===e.length&&this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,e)),a.Z.isFunction(this.funp2)&&(e=this.funp2(),a.Z.isPoint(e)?this.point2=e:e&&e.length&&2===e.length&&this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,e)))),this.updateSegmentFixedLength(),this.updateStdform(),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0)),this},updateSegmentFixedLength:function(){var e,t,r,i,n,o,l,c;return this.hasFixedLength&&(e=this.point1.Dist(this.point2),t=Math.abs(this.fixedLength()),r=this.fixedLengthOldCoords[0].distance(s.Z.COORDS_BY_USER,this.point1.coords),i=this.fixedLengthOldCoords[1].distance(s.Z.COORDS_BY_USER,this.point2.coords),(r>u.Z.eps||i>u.Z.eps||e!==t)&&(n=this.point1.isDraggable&&this.point1.type!==s.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point1.visProp.fixed),o=this.point2.isDraggable&&this.point2.type!==s.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point2.visProp.fixed),e>u.Z.eps?r>i&&o||r<=i&&o&&!n?(this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*t/e,this.point1.Y()+(this.point2.Y()-this.point1.Y())*t/e]),this.point2.fullUpdate()):(r<=i&&n||r>i&&n&&!o)&&(this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*t/e,this.point2.Y()+(this.point1.Y()-this.point2.Y())*t/e]),this.point1.fullUpdate()):(l=Math.random()-.5,c=Math.random()-.5,e=u.Z.hypot(l,c),o?(this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point1.X()+l*t/e,this.point1.Y()+c*t/e]),this.point2.fullUpdate()):n&&(this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point2.X()+l*t/e,this.point2.Y()+c*t/e]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(s.Z.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(s.Z.COORDS_BY_USER,this.point2.coords.usrCoords))),this},updateStdform:function(){var e=u.Z.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=e[0],this.stdform[1]=e[1],this.stdform[2]=e[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&u.Z.innerProduct(this.stdform,this.stdform,3)>=u.Z.eps*u.Z.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},generatePolynomial:function(e){var t=this.point1.symbolic.x,r=this.point1.symbolic.y,i=this.point2.symbolic.x,n=this.point2.symbolic.y,o=e.symbolic.x,s=e.symbolic.y;return[["(",r,")*(",o,")-(",r,")*(",i,")+(",s,")*(",i,")-(",t,")*(",s,")+(",t,")*(",n,")-(",o,")*(",n,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=u.Z.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=u.Z.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(e,t){return this.visProp.straightfirst=e,this.visProp.straightlast=t,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new m.Z(s.Z.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(e){a.Z.exists(this.label)&&(this.label.relativeCoords=new m.Z(s.Z.COORDS_BY_SCREEN,[e[0],-e[1]],this.board))},getLabelAnchor:function(){var e,t,r=0,i=new m.Z(s.Z.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),n=new m.Z(s.Z.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),o=a.Z.evaluate(this.visProp.straightfirst),l=a.Z.evaluate(this.visProp.straightlast);if((o||l)&&h.Z.calcStraight(this,i,n,0),i=i.scrCoords,n=n.scrCoords,!a.Z.exists(this.label))return new m.Z(s.Z.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(a.Z.evaluate(this.label.visProp.position)){case"last":e=n[1],t=n[2];break;case"first":e=i[1],t=i[2];break;case"lft":case"llft":case"ulft":i[1]<=n[1]?(e=i[1],t=i[2]):(e=n[1],t=n[2]);break;case"rt":case"lrt":case"urt":i[1]>n[1]?(e=i[1],t=i[2]):(e=n[1],t=n[2]);break;default:e=.5*(i[1]+n[1]),t=.5*(i[2]+n[2])}return(o||l)&&(a.Z.exists(this.label)&&(r=a.Z.evaluate(this.label.visProp.fontsize)),Math.abs(e)<u.Z.eps?e=r:this.board.canvasWidth+u.Z.eps>e&&e>this.board.canvasWidth-r-u.Z.eps&&(e=this.board.canvasWidth-r),u.Z.eps+r>t&&t>-u.Z.eps?t=r:this.board.canvasHeight+u.Z.eps>t&&t>this.board.canvasHeight-r-u.Z.eps&&(t=this.board.canvasHeight-r)),new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board)},cloneToBackground:function(){var e,t,r,i={};return i.id=this.id+"T"+this.numTraces,i.elementClass=s.Z.OBJECT_CLASS_LINE,this.numTraces++,i.point1=this.point1,i.point2=this.point2,i.stdform=this.stdform,i.board=this.board,i.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),i.visProp.layer=this.board.options.layer.trace,a.Z.clearVisPropOld(i),i.visPropCalc={visible:a.Z.evaluate(i.visProp.visible)},t=this.getSlope(),e=this.getRise(),i.getSlope=function(){return t},i.getRise=function(){return e},r=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(i),this.board.renderer.enhancedRendering=r,this.traces[i.id]=i.rendNode,this},addTransform:function(e){var t,r=a.Z.isArray(e)?e:[e],i=r.length;for(t=0;t<i;t++)this.point1.transformations.push(r[t]),this.point2.transformations.push(r[t]);return this},snapToGrid:function(e){var t,r,i,n,o,u,l,c;return a.Z.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):a.Z.exists(e)&&(l=a.Z.evaluate(this.visProp.snapsizex),c=a.Z.evaluate(this.visProp.snapsizey),o=(t=new m.Z(s.Z.COORDS_BY_SCREEN,[e.Xprev,e.Yprev],this.board)).usrCoords[1],u=t.usrCoords[2],l<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(l=(n=this.board.defaultAxes.x.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),c<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(c=(n=this.board.defaultAxes.y.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),l>0&&c>0&&(r=h.Z.projectPointToLine({coords:t},this,this.board),i=v.Z.subtract([1,Math.round(o/l)*l,Math.round(u/c)*c],r.usrCoords),this.board.create("transform",i.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var e=a.Z.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(e),this.point2.handleSnapToPoints(e)),this},X:function(e){var t=this.stdform[2];return(1-Math.abs(e=(e-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1])-e*t},Y:function(e){var t=this.stdform[1];return(1-Math.abs(e=(e-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2])+e*t},Z:function(e){return(1-Math.abs(e=(e-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0])},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(e){return this.hasFixedLength&&(this.fixedLength=a.Z.createFunction(e,this.board),this.board.update()),this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var e=this.point1.coords.usrCoords,t=this.point2.coords.usrCoords;return[Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[1],t[1]),Math.min(e[2],t[2])]},remove:function(){this.removeAllTicks(),Y.Z.prototype.remove.call(this)}}),n.Z.createLine=function(e,t,r){var i,o,s,u,l,c,h,d=[],p=!1,f=!1;if(2===t.length){if(c=a.Z.copyAttributes(r,e.options,"line","point1"),a.Z.isArray(t[0])&&t[0].length>1)s=e.create("point",t[0],c);else if(a.Z.isString(t[0])||a.Z.isPoint(t[0]))s=e.select(t[0]);else if(a.Z.isFunction(t[0])&&a.Z.isPoint(t[0]()))s=t[0](),f=!0;else if(a.Z.isFunction(t[0])&&t[0]().length&&t[0]().length>=2)s=n.Z.createPoint(e,t[0](),c),f=!0;else if(a.Z.isObject(t[0])&&a.Z.isTransformationOrArray(t[1]))p=!0,s=e.create("point",[t[0].point1,t[1]],c);else throw Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");if(c=a.Z.copyAttributes(r,e.options,"line","point2"),p)u=e.create("point",[t[0].point2,t[1]],c);else if(a.Z.isArray(t[1])&&t[1].length>1)u=e.create("point",t[1],c);else if(a.Z.isString(t[1])||a.Z.isPoint(t[1]))u=e.select(t[1]);else if(a.Z.isFunction(t[1])&&a.Z.isPoint(t[1]()))u=t[1](),f=!0;else if(a.Z.isFunction(t[1])&&t[1]().length&&t[1]().length>=2)u=n.Z.createPoint(e,t[1](),c),f=!0;else throw Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");c=a.Z.copyAttributes(r,e.options,"line"),o=new n.Z.Line(e,s,u,c),f?(o.constrained=!0,o.funp1=t[0],o.funp2=t[1]):p||(o.isDraggable=!0),o.setParents([s.id,u.id])}else if(3===t.length){for(l=0,h=!0;l<3;l++)if(a.Z.isNumber(t[l]))d[l]=a.Z.createFunction(t[l]);else if(a.Z.isFunction(t[l]))d[l]=t[l],h=!1;else throw Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");c=a.Z.copyAttributes(r,e.options,"line","point1"),s=h?e.create("point",[d[2]()*d[2]()+d[1]()*d[1](),d[2]()-d[1]()*d[0]()+d[2](),-d[1]()-d[2]()*d[0]()-d[1]()],c):e.create("point",[function(){return(d[2]()*d[2]()+d[1]()*d[1]())*.5},function(){return(d[2]()-d[1]()*d[0]()+d[2]())*.5},function(){return(-d[1]()-d[2]()*d[0]()-d[1]())*.5}],c),c=a.Z.copyAttributes(r,e.options,"line","point2"),u=h?e.create("point",[d[2]()*d[2]()+d[1]()*d[1](),-d[1]()*d[0]()+d[2](),-d[2]()*d[0]()-d[1]()],c):e.create("point",[function(){return d[2]()*d[2]()+d[1]()*d[1]()},function(){return-d[1]()*d[0]()+d[2]()},function(){return-d[2]()*d[0]()-d[1]()}],c),s.prepareUpdate().update(),u.prepareUpdate().update(),c=a.Z.copyAttributes(r,e.options,"line"),(o=new n.Z.Line(e,s,u,c)).isDraggable=h,o.setParents([s,u])}else if(1===t.length&&a.Z.isFunction(t[0])&&2===t[0]().length&&a.Z.isPoint(t[0]()[0])&&a.Z.isPoint(t[0]()[1]))i=t[0](),c=a.Z.copyAttributes(r,e.options,"line"),(o=new n.Z.Line(e,i[0],i[1],c)).constrained=!0,o.funps=t[0],o.setParents(i);else if(1===t.length&&a.Z.isFunction(t[0])&&3===t[0]().length&&a.Z.isNumber(t[0]()[0])&&a.Z.isNumber(t[0]()[1])&&a.Z.isNumber(t[0]()[2]))i=t[0],c=a.Z.copyAttributes(r,e.options,"line","point1"),s=e.create("point",[function(){var e=i();return[(e[2]*e[2]+e[1]*e[1])*.5,(e[2]-e[1]*e[0]+e[2])*.5,(-e[1]-e[2]*e[0]-e[1])*.5]}],c),c=a.Z.copyAttributes(r,e.options,"line","point2"),u=e.create("point",[function(){var e=i();return[e[2]*e[2]+e[1]*e[1],-e[1]*e[0]+e[2],-e[2]*e[0]-e[1]]}],c),c=a.Z.copyAttributes(r,e.options,"line"),(o=new n.Z.Line(e,s,u,c)).constrained=!0,o.funps=t[0],o.setParents([s,u]);else throw Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");return o},n.Z.registerElement("line",n.Z.createLine),n.Z.createSegment=function(e,t,r){var i,n;if(r.straightFirst=!1,r.straightLast=!1,n=a.Z.copyAttributes(r,e.options,"segment"),i=e.create("line",t.slice(0,2),n),3===t.length){if(i.hasFixedLength=!0,a.Z.isNumber(t[2]))i.fixedLength=function(){return t[2]};else if(a.Z.isFunction(t[2]))i.fixedLength=a.Z.createFunction(t[2],this.board);else throw Error("JSXGraph: Can't create segment with third parent type '"+typeof t[2]+"'.\nPossible third parent types: number or function");i.getParents=function(){return this.parents.concat(this.fixedLength())},i.fixedLengthOldCoords=[],i.fixedLengthOldCoords[0]=new m.Z(s.Z.COORDS_BY_USER,i.point1.coords.usrCoords.slice(1,3),e),i.fixedLengthOldCoords[1]=new m.Z(s.Z.COORDS_BY_USER,i.point2.coords.usrCoords.slice(1,3),e)}return i.elType="segment",i},n.Z.registerElement("segment",n.Z.createSegment),n.Z.createArrow=function(e,t,r){var i,n;return r.straightFirst=!1,r.straightLast=!1,n=a.Z.copyAttributes(r,e.options,"arrow"),(i=e.create("line",t,n)).type=s.Z.OBJECT_TYPE_VECTOR,i.elType="arrow",i},n.Z.registerElement("arrow",n.Z.createArrow),n.Z.createAxis=function(e,t,r){var i,n,o,u,l;i=a.Z.copyAttributes(r,e.options,"axis");try{o=e.create("line",t,i)}catch(e){throw Error("JSXGraph: Can't create axis with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]")}for(u in o.type=s.Z.OBJECT_TYPE_AXIS,o.isDraggable=!1,o.point1.isDraggable=!1,o.point2.isDraggable=!1,o.ancestors)o.ancestors.hasOwnProperty(u)&&(o.ancestors[u].type=s.Z.OBJECT_TYPE_AXISPOINT);return n=a.Z.copyAttributes(r,e.options,"axis","ticks"),l=a.Z.exists(n.ticksdistance)?n.ticksdistance:a.Z.isArray(n.ticks)?n.ticks:1,o.defaultTicks=e.create("ticks",[o,l],n),o.defaultTicks.dump=!1,o.elType="axis",o.subs={ticks:o.defaultTicks},o.inherits.push(o.defaultTicks),o},n.Z.registerElement("axis",n.Z.createAxis),n.Z.createTangent=function(e,t,r){var i,n,o,l,c,h,d;if(1===t.length)n=(i=t[0]).slideObject;else if(2===t.length){if(a.Z.isPoint(t[0]))i=t[0],n=t[1];else if(a.Z.isPoint(t[1]))n=t[0],i=t[1];else throw Error("JSXGraph: Can't create tangent with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]")}else throw Error("JSXGraph: Can't create tangent with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(h=a.Z.copyAttributes(r,e.options,"tangent"),n.elementClass===s.Z.OBJECT_CLASS_LINE?(c=e.create("line",[n.point1,n.point2],h)).glider=i:n.elementClass===s.Z.OBJECT_CLASS_CURVE&&n.type!==s.Z.OBJECT_TYPE_CONIC?("plot"!==a.Z.evaluate(n.visProp.curvetype)?c=e.create("line",[function(){var e=n.X,t=n.Y;return-i.X()*f.Z.D(t)(i.position)+i.Y()*f.Z.D(e)(i.position)},function(){return f.Z.D(n.Y)(i.position)},function(){return-f.Z.D(n.X)(i.position)}],h):(d=function(e,t,r){var n,o,s,a,l,c,h,d,p,f,m,v,g=Math.floor(e);if(1===t.bezierDegree)g===t.numberPoints-1&&g--;else{if(3!==t.bezierDegree)return 0;g=3*Math.floor(e*((v="sector"===t.elType?(m=t.points.slice(3,t.numberPoints-3)).length:(m=t.points).length)-1)/3),s=(e*(v-1)-g)/3,g>=v-1&&(g=v-4,s=1)}if(g<0)return 1;switch(1===t.bezierDegree?(n=t.points[g].usrCoords,o=t.points[g+1].usrCoords):(a=m[g].usrCoords,l=m[g+1].usrCoords,c=m[g+2].usrCoords,h=m[g+3].usrCoords,d=(1-s)*(1-s)*(l[1]-a[1])+2*(1-s)*s*(c[1]-l[1])+s*s*(h[1]-c[1]),p=(1-s)*(1-s)*(l[2]-a[2])+2*(1-s)*s*(c[2]-l[2])+s*s*(h[2]-c[2]),f=u.Z.hypot(d,p),d/=f,p/=f,o=[1,(n=i.coords.usrCoords)[1]+d,n[2]+p]),r){case 0:return n[2]*o[1]-n[1]*o[2];case 1:return o[2]-n[2];case 2:return n[1]-o[1]}return 0},c=e.create("line",[function(){return d(i.position,n,0)},function(){return d(i.position,n,1)},function(){return d(i.position,n,2)}],h)),i.addChild(c),c.glider=i):n.type===s.Z.OBJECT_TYPE_TURTLE?(c=e.create("line",[function(){var e=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((l=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(e<l.numberPoints)break;e-=l.numberPoints}return(e===l.numberPoints-1&&e--,e<0)?1:l.Y(e)*l.X(e+1)-l.X(e)*l.Y(e+1)},function(){var e=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((l=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(e<l.numberPoints)break;e-=l.numberPoints}return(e===l.numberPoints-1&&e--,e<0)?0:l.Y(e+1)-l.Y(e)},function(){var e=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((l=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(e<l.numberPoints)break;e-=l.numberPoints}return(e===l.numberPoints-1&&e--,e<0)?0:l.X(e)-l.X(e+1)}],h),i.addChild(c),c.glider=i):(n.elementClass===s.Z.OBJECT_CLASS_CIRCLE||n.type===s.Z.OBJECT_TYPE_CONIC)&&(c=e.create("line",[function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[0]},function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[1]},function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[2]}],h),i.addChild(c),c.glider=i),!a.Z.exists(c))throw Error("JSXGraph: Couldn't create tangent with the given parents.");return c.elType="tangent",c.type=s.Z.OBJECT_TYPE_TANGENT,c.setParents(t),c},n.Z.createRadicalAxis=function(e,t,r){var i,n,o;if(2!==t.length||t[0].elementClass!==s.Z.OBJECT_CLASS_CIRCLE||t[1].elementClass!==s.Z.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [circle,circle]");return n=e.select(t[0]),o=e.select(t[1]),(i=e.create("line",[function(){var e=n.stdform,t=o.stdform;return u.Z.matVecMult(u.Z.transpose([e.slice(0,3),t.slice(0,3)]),[t[3],-e[3]])}],r)).elType="radicalaxis",i.setParents([n.id,o.id]),n.addChild(i),o.addChild(i),i},n.Z.createPolarLine=function(e,t,r){var i,n,o,u,l,c,h;if(t.length>1&&(u=t[0].type===s.Z.OBJECT_TYPE_CONIC||t[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE,l=t[1].type===s.Z.OBJECT_TYPE_CONIC||t[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE,c=a.Z.isPoint(t[0]),h=a.Z.isPoint(t[1])),2!==t.length||!(u&&h||c&&l))throw Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return h?(n=e.select(t[0]),o=e.select(t[1])):(n=e.select(t[1]),o=e.select(t[0])),(i=e.create("tangent",[n,o],r)).elType="polarline",i},n.Z.registerElement("tangent",n.Z.createTangent),n.Z.registerElement("polar",n.Z.createTangent),n.Z.registerElement("radicalaxis",n.Z.createRadicalAxis),n.Z.registerElement("polarline",n.Z.createPolarLine),n.Z.Line,n.Z.Group=function(e,t,r,i,n){var o,u,l,c;for(this.board=e,this.objects={},o=this.board.numObjects,this.board.numObjects+=1,""!==t&&a.Z.exists(t)?this.id=t:this.id=this.board.id+"Group"+o,this.board.groups[this.id]=this,this.type=s.Z.OBJECT_TYPE_POINT,this.elementClass=s.Z.OBJECT_CLASS_POINT,""!==r&&a.Z.exists(r)?this.name=r:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=n.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],u=a.Z.isArray(i)?i:Array.prototype.slice.call(arguments,3),l=0;l<u.length;l++)c=this.board.select(u[l]),!a.Z.evaluate(c.visProp.fixed)&&a.Z.exists(c.coords)&&this.addPoint(c);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},n.Z.extend(n.Z.Group.prototype,{ungroup:function(){var e,t,r;for(e in this.objects)this.objects.hasOwnProperty(e)&&(t=this.objects[e].point,a.Z.isArray(t.groups)&&(r=a.Z.indexOf(t.groups,this.id))>=0&&delete t.groups[r]);return this.objects={},this},addParents:function(e){var t,r,i;for(t=0,i=a.Z.isArray(e)?e:arguments,r=i.length;t<r;++t)a.Z.isId(this.board,i[t])?this.parents.push(i[t]):a.Z.exists(i[t].id)&&this.parents.push(i[t].id);this.parents=a.Z.uniqueArray(this.parents)},setParents:function(e){return this.parents=[],this.addParents(e),this},getParents:function(){return a.Z.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(e){var t;""!==e&&a.Z.exists(this.objects[e])&&(t=this.objects[e].point,this.coords[t.id]={usrCoords:t.coords.usrCoords.slice(0)})},update:function(){var e,t,r,i,n,o,s,l,c,d,p=null;if(!this.needsUpdate)return this;if("nothing"===(e=this._update_find_drag_type()).action)return this._updateCoordsCache(e.id),this;if(p=this.objects[e.id].point,"translation"===e.action)c=[p.coords.usrCoords[1]-this.coords[e.id].usrCoords[1],p.coords.usrCoords[2]-this.coords[e.id].usrCoords[2]];else if("rotation"===e.action||"scaling"===e.action){if(r="rotation"===e.action?"rotationCenter":"scaleCenter",a.Z.isPoint(this[r]))d=this[r].coords.usrCoords.slice(1);else if("centroid"===this[r])d=this._update_centroid_center();else if(a.Z.isArray(this[r]))d=this[r];else{if(!a.Z.isFunction(this[r]))return this;d=this[r]()}if("rotation"===e.action)l=h.Z.rad(this.coords[e.id].usrCoords.slice(1),d,this.objects[e.id].point),(c=this.board.create("transform",[l,d[0],d[1]],{type:"rotate"})).update();else{if("scaling"!==e.action||Math.abs(n=h.Z.distance(this.coords[e.id].usrCoords.slice(1),d))<u.Z.eps)return this;n=h.Z.distance(p.coords.usrCoords.slice(1),d)/n,o=this.scaleDirections[e.id].indexOf("x")>=0?n:1,s=this.scaleDirections[e.id].indexOf("y")>=0?n:1,(c=this.board.create("transform",[1,0,0,d[0]*(1-o),o,0,d[1]*(1-s),0,s],{type:"generic"})).update()}}for(t in this._update_apply_transformation(e,c),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(t))for(i in this.objects[t].descendants)this.objects[t].descendants.hasOwnProperty(i)&&(this.objects[t].descendants.needsUpdate=this.objects[t].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(t in this.board.updateElements(e),this.objects)this.objects.hasOwnProperty(t)&&this._updateCoordsCache(t);return this},_update_find_drag_type:function(){var e,t,r,i="nothing",n=[];for(e in this.objects)this.objects.hasOwnProperty(e)&&(t=this.objects[e].point).coords.distance(s.Z.COORDS_BY_USER,this.coords[e])>u.Z.eps&&n.push(t.id);return 0===n.length?{action:i,id:"",changed:n}:(r=n[0],t=this.objects[r].point,n.length>1?i="translation":a.Z.isInArray(this.rotationPoints,t)&&a.Z.exists(this.rotationCenter)?i="rotation":a.Z.isInArray(this.scalePoints,t)&&a.Z.exists(this.scaleCenter)?i="scaling":a.Z.isInArray(this.translationPoints,t)&&(i="translation"),{action:i,id:r,changed:n})},_update_centroid_center:function(){var e,t,r;for(r in e=[0,0],t=0,this.coords)this.coords.hasOwnProperty(r)&&(e[0]+=this.coords[r].usrCoords[1],e[1]+=this.coords[r].usrCoords[2],++t);return t>0&&(e[0]/=t,e[1]/=t),e},_update_apply_transformation:function(e,t){var r,i;for(r in this.objects)this.objects.hasOwnProperty(r)&&(a.Z.exists(this.board.objects[r])?(i=this.objects[r].point).id!==e.id?"translation"===e.action?a.Z.isInArray(e.changed,i.id)||i.coords.setCoordinates(s.Z.COORDS_BY_USER,[this.coords[r].usrCoords[1]+t[0],this.coords[r].usrCoords[2]+t[1]]):("rotation"===e.action||"scaling"===e.action)&&t.applyOnce([i]):("rotation"===e.action||"scaling"===e.action)&&i.coords.setCoordinates(s.Z.COORDS_BY_USER,u.Z.matVecMult(t.matrix,this.coords[i.id].usrCoords)):delete this.objects[r])},addPoint:function(e){return this.objects[e.id]={point:this.board.select(e)},this._updateCoordsCache(e.id),this.translationPoints.push(e),e.groups.push(this.id),e.groups=a.Z.uniqueArray(e.groups),this},addPoints:function(e){var t;for(t=0;t<e.length;t++)this.addPoint(e[t]);return this},addGroup:function(e){var t;for(t in e.objects)e.objects.hasOwnProperty(t)&&this.addPoint(e.objects[t].point);return this},removePoint:function(e){return delete this.objects[e.id],this},setRotationCenter:function(e){return this.rotationCenter=e,this},setRotationPoints:function(e){return this._setActionPoints("rotation",e)},addRotationPoint:function(e){return this._addActionPoint("rotation",e)},removeRotationPoint:function(e){return this._removeActionPoint("rotation",e)},setTranslationPoints:function(e){return this._setActionPoints("translation",e)},addTranslationPoint:function(e){return this._addActionPoint("translation",e)},removeTranslationPoint:function(e){return this._removeActionPoint("translation",e)},setScaleCenter:function(e){return this.scaleCenter=e,this},setScalePoints:function(e,t){var r,i,n;for(i=0,r=a.Z.isArray(e)?e:arguments,n=r.length;i<n;++i)this.scaleDirections[this.board.select(r[i]).id]=t||"xy";return this._setActionPoints("scale",e)},addScalePoint:function(e,t){return this._addActionPoint("scale",e),this.scaleDirections[this.board.select(e).id]=t||"xy",this},removeScalePoint:function(e){return this._removeActionPoint("scale",e)},_setActionPoints:function(e,t){var r,i,n;for(i=0,r=a.Z.isArray(t)?t:arguments,n=r.length,this[e+"Points"]=[];i<n;++i)this._addActionPoint(e,r[i]);return this},_addActionPoint:function(e,t){return this[e+"Points"].push(this.board.select(t)),this},_removeActionPoint:function(e,t){var r=this[e+"Points"].indexOf(this.board.select(t));return r>-1&&this[e+"Points"].splice(r,1),this},setProperty:function(){n.Z.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var e;for(e in this.objects)this.objects.hasOwnProperty(e)&&this.objects[e].point.setAttribute.apply(this.objects[e].point,arguments);return this}}),n.Z.createGroup=function(e,t,r){var i=a.Z.copyAttributes(r,e.options,"group"),o=new n.Z.Group(e,i.id,i.name,t,i);return o.elType="group",o.setParents(t),o},n.Z.registerElement("group",n.Z.createGroup),n.Z.Group,n.Z.Circle=function(e,t,r,i,n){this.constructor(e,n,s.Z.OBJECT_TYPE_CIRCLE,s.Z.OBJECT_CLASS_CIRCLE),this.method=t,this.midpoint=this.board.select(r),this.center=this.board.select(r),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===t?(this.point2=e.select(i),this.radius=this.Radius()):"pointRadius"===t?(this.gxtterm=i,this.updateRadius=a.Z.createFunction(i,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):"pointLine"===t?(this.line=e.select(i),this.radius=this.line.point1.coords.distance(s.Z.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===t&&(this.circle=e.select(i),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),a.Z.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===t?this.notifyParents(i):"pointLine"===t?this.line.addChild(this):"pointCircle"===t?this.circle.addChild(this):"twoPoints"===t&&(a.Z.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=a.Z.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})},n.Z.Circle.prototype=new Y.Z,n.Z.extend(n.Z.Circle.prototype,{hasPoint:function(e,t){var r,i,n,o,l,c=this.center.coords.usrCoords,h=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board),d=this.Radius();return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(i=this.board._inputDevice,r=a.Z.evaluate(this.visProp.precision[i])):r=this.board.options.precision.hasPoint,n=c[1]-h.usrCoords[1],o=c[2]-h.usrCoords[2],l=u.Z.hypot(n,o),r+=.5*a.Z.evaluate(this.visProp.strokewidth),r/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),a.Z.evaluate(this.visProp.hasinnerpoints))?l<d+r:Math.abs(l-d)<r},generatePolynomial:function(e){var t=this.center.symbolic.x,r=this.center.symbolic.y,i=e.symbolic.x,n=e.symbolic.y,o=this.generateRadiusSquared();return""===o?[]:["(("+i+")-("+t+"))^2 + (("+n+")-("+r+"))^2 - ("+o+")"]},generateRadiusSquared:function(){var e,t,r,i,n="";return"twoPoints"===this.method?(e=this.center.symbolic.x,t=this.center.symbolic.y,n="(("+(r=this.point2.symbolic.x)+")-("+e+"))^2 + (("+(i=this.point2.symbolic.y)+")-("+t+"))^2"):"pointRadius"===this.method?a.Z.isNumber(this.radius)&&(n=(this.radius*this.radius).toString()):"pointLine"===this.method?(r=this.line.point1.symbolic.x,i=this.line.point1.symbolic.y,n="(("+r+")-("+this.line.point2.symbolic.x+"))^2 + (("+i+")-("+this.line.point2.symbolic.y+"))^2"):"pointCircle"===this.method&&(n=this.circle.Radius()),n},update:function(){var e,t,r,i,n;if(this.needsUpdate)for(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(s.Z.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),r=this.center.coords.usrCoords[0],e=this.center.coords.usrCoords[1]/r,t=this.center.coords.usrCoords[2]/r,r/=r,i=this.Radius(),n=0,this.numberPoints=13,this.dataX=[e+i,e+i,e+.551915024494*i,e,e-.551915024494*i,e-i,e-i,e-i,e-.551915024494*i,e,e+.551915024494*i,e+i,e+i],this.dataY=[t,t+.551915024494*i,t+i,t+i,t+i,t+.551915024494*i,t,t-.551915024494*i,t-i,t-i,t-i,t-.551915024494*i,t],this.bezierDegree=3;n<this.numberPoints;n++)this.points[n]=new m.Z(s.Z.COORDS_BY_USER,[this.dataX[n],this.dataY[n]],this.board);return this},updateQuadraticform:function(){var e=this.center,t=e.X(),r=e.Y(),i=this.Radius();this.quadraticform=[[t*t+r*r-i*i,-t,-r],[-t,1,0],[-r,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=a.Z.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},notifyParents:function(e){a.Z.isString(e)&&B.Z.findDependencies(this,e,this.board)},setRadius:function(e){return this.updateRadius=a.Z.createFunction(e,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(e){return a.Z.exists(e)?(this.setRadius(e),this.Radius()):"twoPoints"===this.method?a.Z.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||a.Z.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return n.Z.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var e,t,r=this.Radius(),i=this.center.coords.usrCoords;switch(a.Z.evaluate(this.visProp.label.position)){case"lft":e=i[1]-r,t=i[2];break;case"llft":e=i[1]-.7071067811865*r,t=i[2]-.7071067811865*r;break;case"rt":e=i[1]+r,t=i[2];break;case"lrt":e=i[1]+.7071067811865*r,t=i[2]-.7071067811865*r;break;case"urt":e=i[1]+.7071067811865*r,t=i[2]+.7071067811865*r;break;case"top":e=i[1],t=i[2]+r;break;case"bot":e=i[1],t=i[2]-r;break;default:e=i[1]-.7071067811865*r,t=i[2]+.7071067811865*r}return new m.Z(s.Z.COORDS_BY_USER,[e,t],this.board)},cloneToBackground:function(){var e,t=this.Radius(),r={id:this.id+"T"+this.numTraces,elementClass:s.Z.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return t},getRadius:function(){return t},board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return r.visProp.layer=this.board.options.layer.trace,this.numTraces++,a.Z.clearVisPropOld(r),r.visPropCalc={visible:a.Z.evaluate(r.visProp.visible)},e=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(r),this.board.renderer.enhancedRendering=e,this.traces[r.id]=r.rendNode,this},addTransform:function(e){var t,r=a.Z.isArray(e)?e:[e],i=r.length;for(t=0;t<i;t++)this.center.transformations.push(r[t]),"twoPoints"===this.method&&this.point2.transformations.push(r[t]);return this},snapToGrid:function(){var e=a.Z.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(e,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(e,!0),this},snapToPoints:function(){var e=a.Z.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(e),"twoPoints"===this.method&&this.point2.handleSnapToPoints(e),this},X:function(e){return this.Radius()*Math.cos(2*e*Math.PI)+this.center.coords.usrCoords[1]},Y:function(e){return this.Radius()*Math.sin(2*e*Math.PI)+this.center.coords.usrCoords[2]},Z:function(e){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var e=this.Radius();return e*e*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var e=this.center.coords.usrCoords,t=this.Radius();return[e[1]-t,e[2]+t,e[1]+t,e[2]-t]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),n.Z.createCircle=function(e,t,r){var i,o,u,l,c,h=["center","point2"];if(o=[],c=e.select(t[0]),a.Z.isObject(c)&&c.elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isTransformationOrArray(t[1]))return l=a.Z.copyAttributes(r,e.options,"circle"),(i=n.Z.createEllipse(e,[c.center,c.center,function(){return 2*c.Radius()}],l)).addTransform(t[1]),i;for(u=0;u<t.length;u++)if(a.Z.isPointType(e,t[u])){if(!1===(o=t.length<3?o.concat(a.Z.providePoints(e,[t[u]],r,"circle",[h[u]])):o.concat(a.Z.providePoints(e,[t[u]],r,"point")))[o.length-1])throw Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else o.push(t[u]);if(l=a.Z.copyAttributes(r,e.options,"circle"),2===o.length&&a.Z.isPoint(o[0])&&a.Z.isPoint(o[1]))i=new n.Z.Circle(e,"twoPoints",o[0],o[1],l);else if((a.Z.isNumber(o[0])||a.Z.isFunction(o[0])||a.Z.isString(o[0]))&&a.Z.isPoint(o[1]))i=new n.Z.Circle(e,"pointRadius",o[1],o[0],l);else if((a.Z.isNumber(o[1])||a.Z.isFunction(o[1])||a.Z.isString(o[1]))&&a.Z.isPoint(o[0]))i=new n.Z.Circle(e,"pointRadius",o[0],o[1],l);else if(o[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(o[1]))i=new n.Z.Circle(e,"pointCircle",o[1],o[0],l);else if(o[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(o[0]))i=new n.Z.Circle(e,"pointCircle",o[0],o[1],l);else if(o[0].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(o[1]))i=new n.Z.Circle(e,"pointLine",o[1],o[0],l);else if(o[1].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(o[0]))i=new n.Z.Circle(e,"pointLine",o[0],o[1],l);else if(3===t.length&&a.Z.isPoint(o[0])&&a.Z.isPoint(o[1])&&a.Z.isPoint(o[2])){if(n.Z.elements.circumcircle)i=n.Z.elements.circumcircle(e,o,l);else throw Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).")}else throw Error("JSXGraph: Can't create circle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");for(i.isDraggable=!0,i.setParents(o),i.elType="circle",u=0;u<o.length;u++)a.Z.isPoint(o[u])&&i.inherits.push(o[u]);return i},n.Z.registerElement("circle",n.Z.createCircle);var q=n.Z.Circle;n.Z.createEllipse=function(e,t,r){var i,n,o,u,l,c,h,d=[],p=a.Z.copyAttributes(r,e.options,"conic","foci"),f=a.Z.copyAttributes(r,e.options,"conic","center"),v=a.Z.copyAttributes(r,e.options,"conic");for(c=0;c<2;c++)if(t[c].length>1)d[c]=e.create("point",t[c],p);else if(a.Z.isPoint(t[c]))d[c]=e.select(t[c]);else if(a.Z.isFunction(t[c])&&a.Z.isPoint(t[c]()))d[c]=t[c]();else if(a.Z.isString(t[c]))d[c]=e.select(t[c]);else throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");if(a.Z.isNumber(t[2]))l=a.Z.createFunction(t[2],e);else if(a.Z.isFunction(t[2])&&a.Z.isNumber(t[2]()))l=t[2];else{if(a.Z.isPoint(t[2]))u=e.select(t[2]);else if(t[2].length>1)u=e.create("point",t[2],p);else if(a.Z.isFunction(t[2])&&a.Z.isPoint(t[2]()))u=t[2]();else if(a.Z.isString(t[2]))u=e.select(t[2]);else throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");l=function(){return u.Dist(d[0])+u.Dist(d[1])}}for(a.Z.exists(t[4])||(t[4]=2*Math.PI),a.Z.exists(t[3])||(t[3]=0),o=e.create("point",[function(){return(d[0].X()+d[1].X())*.5},function(){return(d[0].Y()+d[1].Y())*.5}],f),(n=e.create("curve",[function(e){return 0},function(e){return 0},t[3],t[4]],v)).majorAxis=l,h=n.hasPoint,i=function(e,t){var r,i,o,s,a,u,c,h,p;t||(i=(r=l())*r,o=d[0].X(),s=d[0].Y(),a=d[1].X(),u=d[1].Y(),c=o-a,h=s-u,p=(i-o*o-s*s+a*a+u*u)/(2*r),n.quadraticform=[[p*p-a*a-u*u,p*c/r+a,p*h/r+u],[p*c/r+a,c*c/i-1,c*h/i],[p*h/r+u,c*h/i,h*h/i-1]])},n.X=function(e,t){var r=l(),n=d[1].Dist(d[0]),o=.5*(n*n-r*r)/(n*Math.cos(e)-r),s=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return t||i(e,t),d[0].X()+Math.cos(s+e)*o},n.Y=function(e,t){var r=l(),i=d[1].Dist(d[0]),n=.5*(i*i-r*r)/(i*Math.cos(e)-r),o=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return d[0].Y()+Math.sin(o+e)*n},n.midpoint=n.center=o,n.type=s.Z.OBJECT_TYPE_CONIC,n.subs={center:n.center},n.inherits.push(n.center,d[0],d[1]),a.Z.isPoint(u)&&n.inherits.push(u),n.hasPoint=function(e,t){var r,i,n,o;return a.Z.evaluate(this.visProp.hasinnerpoints)?(r=d[0].coords,i=d[1].coords,n=this.majorAxis(),(o=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board)).distance(s.Z.COORDS_BY_USER,r)+o.distance(s.Z.COORDS_BY_USER,i)<=n):h.apply(this,arguments)},o.addChild(n),c=0;c<2;c++)a.Z.isPoint(d[c])&&d[c].addChild(n);return a.Z.isPoint(u)&&u.addChild(n),n.setParents(t),n},n.Z.createHyperbola=function(e,t,r){var i,n,o,u,l,c,h=[],d=a.Z.copyAttributes(r,e.options,"conic","foci"),p=a.Z.copyAttributes(r,e.options,"conic","center"),f=a.Z.copyAttributes(r,e.options,"conic");for(c=0;c<2;c++)if(t[c].length>1)h[c]=e.create("point",t[c],d);else if(a.Z.isPoint(t[c]))h[c]=e.select(t[c]);else if(a.Z.isFunction(t[c])&&a.Z.isPoint(t[c]()))h[c]=t[c]();else if(a.Z.isString(t[c]))h[c]=e.select(t[c]);else throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");if(a.Z.isNumber(t[2]))l=a.Z.createFunction(t[2],e);else if(a.Z.isFunction(t[2])&&a.Z.isNumber(t[2]()))l=t[2];else{if(a.Z.isPoint(t[2]))u=e.select(t[2]);else if(t[2].length>1)u=e.create("point",t[2],d);else if(a.Z.isFunction(t[2])&&a.Z.isPoint(t[2]()))u=t[2]();else if(a.Z.isString(t[2]))u=e.select(t[2]);else throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");l=function(){return u.Dist(h[0])-u.Dist(h[1])}}for(a.Z.exists(t[4])||(t[4]=1.0001*Math.PI),a.Z.exists(t[3])||(t[3]=-1.0001*Math.PI),o=e.create("point",[function(){return(h[0].X()+h[1].X())*.5},function(){return(h[0].Y()+h[1].Y())*.5}],p),(n=e.create("curve",[function(e){return 0},function(e){return 0},t[3],t[4]],f)).majorAxis=l,i=function(e,t){var r,i,o,s,a,u,c,d,p;t||(i=(r=l())*r,o=h[0].X(),s=h[0].Y(),a=h[1].X(),u=h[1].Y(),c=o-a,d=s-u,p=(i-o*o-s*s+a*a+u*u)/(2*r),n.quadraticform=[[p*p-a*a-u*u,p*c/r+a,p*d/r+u],[p*c/r+a,c*c/i-1,c*d/i],[p*d/r+u,c*d/i,d*d/i-1]])},n.X=function(e,t){var r=l(),n=h[1].Dist(h[0]),o=.5*(n*n-r*r)/(n*Math.cos(e)+r),s=Math.atan2(h[1].Y()-h[0].Y(),h[1].X()-h[0].X());return t||i(e,t),h[0].X()+Math.cos(s+e)*o},n.Y=function(e,t){var r=l(),i=h[1].Dist(h[0]),n=.5*(i*i-r*r)/(i*Math.cos(e)+r),o=Math.atan2(h[1].Y()-h[0].Y(),h[1].X()-h[0].X());return h[0].Y()+Math.sin(o+e)*n},n.midpoint=n.center=o,n.subs={center:n.center},n.inherits.push(n.center,h[0],h[1]),a.Z.isPoint(u)&&n.inherits.push(u),n.type=s.Z.OBJECT_TYPE_CONIC,o.addChild(n),c=0;c<2;c++)a.Z.isPoint(h[c])&&h[c].addChild(n);return a.Z.isPoint(u)&&u.addChild(n),n.setParents(t),n},n.Z.createParabola=function(e,t,r){var i,n,o,u,l=t[0],c=t[1],d=a.Z.copyAttributes(r,e.options,"conic","foci"),p=a.Z.copyAttributes(r,e.options,"conic","center"),f=a.Z.copyAttributes(r,e.options,"conic");if(t[0].length>1)l=e.create("point",t[0],d);else if(a.Z.isPoint(t[0]))l=e.select(t[0]);else if(a.Z.isFunction(t[0])&&a.Z.isPoint(t[0]()))l=t[0]();else if(a.Z.isString(t[0]))l=e.select(t[0]);else throw Error("JSXGraph: Can't create Parabola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");return a.Z.isArray(c)&&2===c.length&&(u=a.Z.copyAttributes(r,e.options,"conic","line"),c=e.create("line",c,u)),a.Z.exists(t[3])||(t[3]=2*Math.PI),a.Z.exists(t[2])||(t[2]=0),o=e.create("point",[function(){return h.Z.projectPointToLine(l,c,e).usrCoords}],p),(n=e.create("curve",[function(e){return 0},function(e){return 0},t[2],t[3]],f)).midpoint=n.center=o,n.subs={center:n.center},n.inherits.push(n.center),i=function(e,t){var r,i,o,s,a,u;t||(r=c.stdform[1],i=c.stdform[2],o=c.stdform[0],s=r*r+i*i,a=l.X(),u=l.Y(),n.quadraticform=[[o*o-s*(a*a+u*u),o*r+s*a,o*i+s*u],[o*r+s*a,-i*i,r*i],[o*i+s*u,r*i,-r*r]])},n.X=function(e,t){var r,n=c.getAngle(),o=h.Z.distPointLine(l.coords.usrCoords,c.stdform),s=c.point1.coords.usrCoords,a=c.point2.coords.usrCoords,u=l.coords.usrCoords;return 0===s[0]?s=[1,a[1]+c.stdform[2],a[2]-c.stdform[1]]:0===a[0]&&(a=[1,s[1]+c.stdform[2],s[2]-c.stdform[1]]),r=((a[1]-s[1])*(u[2]-s[2])-(a[2]-s[2])*(u[1]-s[1])>=0?1:-1)*o/(1-Math.sin(e)),t||i(e,t),l.X()+Math.cos(e+n)*r},n.Y=function(e,t){var r,i=c.getAngle(),n=h.Z.distPointLine(l.coords.usrCoords,c.stdform),o=c.point1.coords.usrCoords,s=c.point2.coords.usrCoords,a=l.coords.usrCoords;return 0===o[0]?o=[1,s[1]+c.stdform[2],s[2]-c.stdform[1]]:0===s[0]&&(s=[1,o[1]+c.stdform[2],o[2]-c.stdform[1]]),r=((s[1]-o[1])*(a[2]-o[2])-(s[2]-o[2])*(a[1]-o[1])>=0?1:-1)*n/(1-Math.sin(e)),l.Y()+Math.sin(e+i)*r},n.type=s.Z.OBJECT_TYPE_CONIC,o.addChild(n),a.Z.isPoint(l)&&(l.addChild(n),n.inherits.push(l)),c.addChild(n),n.setParents(t),n},n.Z.createConic=function(e,t,r){var i,n,o,l,c,h,d,p,m,v,g,b,y=[[1,0,0],[0,1,0],[0,0,1]],x=[[1,0,0],[0,1,0],[0,0,1]],C=[],Z=[],_=a.Z.copyAttributes(r,e.options,"conic","point"),w=a.Z.copyAttributes(r,e.options,"conic","center"),E=a.Z.copyAttributes(r,e.options,"conic");if(5===t.length)b=!0;else if(6===t.length)b=!1;else throw Error("JSXGraph: Can't create generic Conic with "+t.length+" parameters.");if(b)for(v=0;v<5;v++)if(t[v].length>1)C[v]=e.create("point",t[v],_);else if(a.Z.isPoint(t[v]))C[v]=e.select(t[v]);else if(a.Z.isFunction(t[v])&&a.Z.isPoint(t[v]()))C[v]=t[v]();else if(a.Z.isString(t[v]))C[v]=e.select(t[v]);else throw Error("JSXGraph: Can't create Conic section with parent types '"+typeof t[v]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");else(g=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=a.Z.isFunction(t[2])?function(){return t[2]()}:function(){return t[2]},g[0][1]=a.Z.isFunction(t[4])?function(){return t[4]()}:function(){return t[4]},g[0][2]=a.Z.isFunction(t[5])?function(){return t[5]()}:function(){return t[5]},g[1][1]=a.Z.isFunction(t[0])?function(){return t[0]()}:function(){return t[0]},g[1][2]=a.Z.isFunction(t[3])?function(){return t[3]()}:function(){return t[3]},g[2][2]=a.Z.isFunction(t[1])?function(){return t[1]()}:function(){return t[1]};if(c=function(e){var t,r;for(t=0;t<3;t++)for(r=t;r<3;r++)e[t][r]+=e[r][t];for(t=0;t<3;t++)for(r=0;r<t;r++)e[t][r]=e[r][t];return e},l=function(e,t){var r,i,n=[[0,0,0],[0,0,0],[0,0,0]];for(r=0;r<3;r++)for(i=0;i<3;i++)n[r][i]=e[r]*t[i];return c(n)},o=function(e,t,r){var i,n,o,s,a,l=[[0,0,0],[0,0,0],[0,0,0]];for(i=0,a=u.Z.matVecMult(t,r),o=u.Z.innerProduct(r,a),a=u.Z.matVecMult(e,r),s=u.Z.innerProduct(r,a);i<3;i++)for(n=0;n<3;n++)l[i][n]=o*e[i][n]-s*t[i][n];return l},n=e.create("curve",[function(e){return 0},function(e){return 0},0,2*Math.PI],E),i=function(e,t){var r,i,s;if(!t){if(b){for(r=0;r<5;r++)Z[r]=C[r].coords.usrCoords;x=o(l(u.Z.crossProduct(Z[0],Z[1]),u.Z.crossProduct(Z[2],Z[3])),l(u.Z.crossProduct(Z[0],Z[2]),u.Z.crossProduct(Z[1],Z[3])),Z[4])}else for(r=0;r<3;r++)for(i=r;i<3;i++)x[r][i]=g[r][i](),i>r&&(x[i][r]=x[r][i]);n.quadraticform=x,(h=f.Z.Jacobi(x))[0][0][0]<0&&(h[0][0][0]*=-1,h[0][1][1]*=-1,h[0][2][2]*=-1),y=h[1],m=Math.sqrt(Math.abs(h[0][0][0])),d=Math.sqrt(Math.abs(h[0][1][1])),p=Math.sqrt(Math.abs(h[0][2][2]))}return h[0][1][1]<=0&&h[0][2][2]<=0?s=u.Z.matVecMult(y,[1/m,Math.cos(e)/d,Math.sin(e)/p]):h[0][1][1]<=0&&h[0][2][2]>0?s=u.Z.matVecMult(y,[Math.cos(e)/m,1/d,Math.sin(e)/p]):h[0][2][2]<0&&(s=u.Z.matVecMult(y,[Math.sin(e)/m,Math.cos(e)/d,1/p])),a.Z.exists(s)?(s[1]/=s[0],s[2]/=s[0],s[0]=1):s=[1,NaN,NaN],s},n.X=function(e,t){return i(e,t)[1]},n.Y=function(e,t){return i(e,t)[2]},n.midpoint=e.create("point",[function(){var e=n.quadraticform;return[e[1][1]*e[2][2]-e[1][2]*e[1][2],e[1][2]*e[0][2]-e[2][2]*e[0][1],e[0][1]*e[1][2]-e[1][1]*e[0][2]]}],w),n.type=s.Z.OBJECT_TYPE_CONIC,n.center=n.midpoint,n.subs={center:n.center},n.inherits.push(n.center),n.inherits=n.inherits.concat(C),b){for(v=0;v<5;v++)a.Z.isPoint(C[v])&&C[v].addChild(n);n.setParents(t)}return n.addChild(n.center),n},n.Z.registerElement("ellipse",n.Z.createEllipse),n.Z.registerElement("hyperbola",n.Z.createHyperbola),n.Z.registerElement("parabola",n.Z.createParabola),n.Z.registerElement("conic",n.Z.createConic),n.Z.Polygon=function(e,t,r){this.constructor(e,r,s.Z.OBJECT_TYPE_POLYGON,s.Z.OBJECT_CLASS_AREA);var i,o,u,l,c,h=a.Z.copyAttributes(r,e.options,"polygon","borders");for(i=0,this.withLines=r.withlines,this.attr_line=h,this.vertices=[];i<t.length;i++)this.vertices[i]=this.board.select(t[i]),this.vertices[i]._is_new&&(delete this.vertices[i]._is_new,this.vertices[i]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(l=0,u=this.vertices.length-1;l<u;l++)i=(l+1)%u,h.id=h.ids&&h.ids[i],h.name=h.names&&h.names[i],h.strokecolor=a.Z.isArray(h.colors)&&h.colors[i%h.colors.length]||h.strokecolor,h.visible=a.Z.exists(r.borders.visible)?r.borders.visible:r.visible,!1===h.strokecolor&&(h.strokecolor="none"),(o=e.create("segment",[this.vertices[i],this.vertices[i+1]],h)).dump=!1,this.borders[i]=o,o.parentPolygon=this,this.addChild(o);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),i=0;i<this.vertices.length-1;i++)c=this.board.select(this.vertices[i]),a.Z.exists(c._is_new_pol)?(this.addChild(c),delete c._is_new_pol):c.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=n.Z.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},n.Z.Polygon.prototype=new Y.Z,n.Z.extend(n.Z.Polygon.prototype,{pnpoly:function(e,t,r){return h.Z.pnpoly(e,t,this.vertices,r)},hasPoint:function(e,t){var r,i;if(a.Z.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(e,t))return!0;for(r=0,i=this.borders.length;r<i;r++)if(this.borders[r].hasPoint(e,t))return!0;return!1},updateRenderer:function(){var e,t;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(e=0,t=this.vertices.length-("polygonalchain"===this.elType?0:1),this.isReal=!0;e<t;++e)if(!this.vertices[e].isReal){this.isReal=!1;break}if(!this.isReal)for(e in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(e)&&this.childElements[e].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var e,t,r,i,n;if(0===this.vertices.length)return new m.Z(s.Z.COORDS_BY_USER,[1,0,0],this.board);for(n=0,e=this.vertices[0].X(),t=this.vertices[0].Y(),r=e,i=t;n<this.vertices.length;n++)this.vertices[n].X()<e&&(e=this.vertices[n].X()),this.vertices[n].X()>r&&(r=this.vertices[n].X()),this.vertices[n].Y()>t&&(t=this.vertices[n].Y()),this.vertices[n].Y()<i&&(i=this.vertices[n].Y());return new m.Z(s.Z.COORDS_BY_USER,[(e+r)*.5,(t+i)*.5],this.board)},getLabelAnchor:n.Z.shortcut(n.Z.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var e,t={};return t.id=this.id+"T"+this.numTraces,this.numTraces++,t.vertices=this.vertices,t.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.board=this.board,a.Z.clearVisPropOld(t),t.visPropCalc={visible:a.Z.evaluate(t.visProp.visible)},e=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(t),this.board.renderer.enhancedRendering=e,this.traces[t.id]=t.rendNode,this},hideElement:function(e){var t;if(n.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!e)for(t=0;t<this.borders.length;t++)this.borders[t].hideElement();this.hasLabel&&a.Z.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(e){var t;if(n.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!e)for(t=0;t<this.borders.length;t++)this.borders[t].showElement().updateRenderer();return a.Z.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(h.Z.signedPolygon(this.vertices,!0))},Perimeter:function(){var e,t=this.vertices.length,r=0;for(e=1;e<t;++e)r+=this.vertices[e].Dist(this.vertices[e-1]);return r},L:function(){return this.Perimeter()},boundingBox:function(){var e,t,r=[0,0,0,0],i=this.vertices.length-1;if(0===i)return r;for(e=1,r[0]=this.vertices[0].X(),r[2]=r[0],r[1]=this.vertices[0].Y(),r[3]=r[1];e<i;++e)(t=this.vertices[e].X())<r[0]?r[0]=t:t>r[2]&&(r[2]=t),(t=this.vertices[e].Y())>r[1]?r[1]=t:t<r[3]&&(r[3]=t);return r},bounds:function(){return this.boundingBox()},remove:function(){var e;for(e=0;e<this.borders.length;e++)this.board.removeObject(this.borders[e]);Y.Z.prototype.remove.call(this)},findPoint:function(e){var t;if(!a.Z.isPoint(e))return -1;for(t=0;t<this.vertices.length;t++)if(this.vertices[t].id===e.id)return t;return -1},addPoints:function(e){var t,r=Array.prototype.slice.call(arguments);return t="polygonalchain"===this.elType?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[t].concat(r))},insertPoints:function(e,t){var r,i,n,o,s;if(0==arguments.length||(n=this.vertices.length-1,"polygon"===this.elType&&n--,e<-1||e>n))return this;for(r=1,i=arguments.length-1;r<i+1;r++)s=a.Z.providePoints(this.board,[arguments[r]],{},"polygon",["vertices"])[0],s._is_new&&(this.addChild(s),delete s._is_new),this.vertices.splice(e+r,0,s);if(this.withLines)for(o=e+1,"polygon"===this.elType?e<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[e].point2=this.vertices[o]:e>=0&&(e<this.borders.length?this.borders[e].point2=this.vertices[o]:o=e),r=o;r<o+i;r++)this.borders.splice(r,0,this.board.create("segment",[this.vertices[r],this.vertices[r+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(e){var t,r,i,n,o=[],s=[],u=[],l=[];for("polygon"===this.elType&&(n=this.vertices.pop()),t=0;t<arguments.length;t++)i=arguments[t],a.Z.isPoint(i)&&(i=this.findPoint(i)),a.Z.isNumber(i)&&i>-1&&i<this.vertices.length&&-1===a.Z.indexOf(u,i)&&u.push(i);if(0===u.length)return"polygon"===this.elType&&this.vertices.push(n),this;for(t=0;t<u.length;t++)this.vertices[u[t]].removeChild(this);for(u=u.sort(),o=this.vertices.slice(),s=this.borders.slice(),this.withLines&&l.push([u[u.length-1]]),t=u.length-1;t>-1;t--)o[u[t]]=-1,this.withLines&&u.length>1&&u[t]-1>u[t-1]&&(l[l.length-1][1]=u[t],l.push([u[t-1]]));for(this.withLines&&(l[l.length-1][1]=u[0]),this.vertices=[],t=0;t<o.length;t++)a.Z.isPoint(o[t])&&this.vertices.push(o[t]);if("polygon"===this.elType&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(t=0;t<l.length;t++){for(r=l[t][1]-1;r<l[t][0]+1;r++)r<0?"polygon"===this.elType&&(this.board.removeObject(this.borders[s.length-1]),s[s.length-1]=-1):r<s.length&&(this.board.removeObject(this.borders[r]),s[r]=-1);0!==l[t][1]&&l[t][0]!==o.length-1&&(s[l[t][0]-1]=this.board.create("segment",[o[l[t][1]-1],o[l[t][0]+1]],this.attr_line))}for(t=0,this.borders=[];t<s.length;t++)-1!==s[t]&&this.borders.push(s[t]);"polygon"===this.elType&&this.vertices.length>2&&(l[0][1]===this.vertices.length-1||0===l[l.length-1][1])&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var e,t=Y.Z.prototype.getAttributes.call(this);if(this.withLines)for(e=0,t.lines=t.lines||{},t.lines.ids=[],t.lines.colors=[];e<this.borders.length;e++)t.lines.ids.push(this.borders[e].id),t.lines.colors.push(this.borders[e].visProp.strokecolor);return t},snapToGrid:function(){var e,t;for(e=0,t=!!a.Z.evaluate(this.visProp.snaptogrid);e<this.vertices.length;e++)this.vertices[e].handleSnapToGrid(t,!0)},setPositionDirectly:function(e,t,r){var i,n,o,s=new m.Z(e,t,this.board),a=new m.Z(e,r,this.board);for(n=0,o=this.vertices.length-1;n<o;n++)if(!this.vertices[n].draggable())return this;return i=v.Z.subtract(s.usrCoords,a.usrCoords),this.board.create("transform",i.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(e){var t,r,i,o,s,a,u,l=n.Z.Math.Geometry.sortVertices(this.vertices),c=n.Z.Math.Geometry.sortVertices(e.vertices),h=l.length-1,d=c.length-1,p=[],f=function(e,t,r){return(t[1]-e[1])*(r[2]-e[2])-(t[2]-e[2])*(r[1]-e[1])>=0};for(i=0;i<d;i++)p.push(c[i]);for(i=0;i<h;i++)for(o=0,t=(r=p.slice(0)).length,p=[],s=r[t-1];o<t;o++)a=r[o],f(l[i],l[i+1],a)?(f(l[i],l[i+1],s)||(u=n.Z.Math.Geometry.meetSegmentSegment(s,a,l[i],l[i+1]),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[0][0]=1,p.push(u[0])),p.push(a)):f(l[i],l[i+1],s)&&(u=n.Z.Math.Geometry.meetSegmentSegment(s,a,l[i],l[i+1]),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[0][0]=1,p.push(u[0])),s=a;return p},intersect:function(e){return this.sutherlandHodgman(e)}}),n.Z.createPolygon=function(e,t,r){var i,o,u,l,c,h,d=[],p=!1;if(c=a.Z.copyAttributes(r,e.options,"polygon"),null===(l=e.select(t[0]))&&(l=t[0]),a.Z.isObject(l)&&l.type===s.Z.OBJECT_TYPE_POLYGON&&a.Z.isTransformationOrArray(t[1]))for(o=0,p=!0,u=l.vertices.length-1,h=a.Z.copyAttributes(r,e.options,"polygon","vertices");o<u;o++)h.withlabel&&(h.name=""===l.vertices[o].name?"":l.vertices[o].name+"'"),d.push(e.create("point",[l.vertices[o],t[1]],h));else if(!1===(d=a.Z.providePoints(e,t,r,"polygon",["vertices"])))throw Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(c=a.Z.copyAttributes(r,e.options,"polygon"),(i=new n.Z.Polygon(e,d,c)).isDraggable=!0,p)for(i.prepareUpdate().update().updateVisibility().updateRenderer(),u=l.vertices.length-1,o=0;o<u;o++)d[o].prepareUpdate().update().updateVisibility().updateRenderer();return i},n.Z.createRegularPolygon=function(e,t,r){var i,n,o,u,l,c,h,d=[];if(l=t.length,o=t[l-1],a.Z.isNumber(o)&&(3!==t.length||o<3))throw Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(a.Z.isNumber(e.select(o))?(l--,c=!1):(o=l,c=!0),!1===(d=a.Z.providePoints(e,t.slice(0,l),r,"regularpolygon",["vertices"])))throw Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(n=2,h=a.Z.copyAttributes(r,e.options,"regularpolygon","vertices");n<o;n++)u=e.create("transform",[Math.PI*(2-(o-2)/o),d[n-1]],{type:"rotate"}),c?(d[n].addTransform(d[n-2],u),d[n].fullUpdate()):(a.Z.isArray(h.ids)&&h.ids.length>=o-2&&(h.id=h.ids[n-2]),d[n]=e.create("point",[d[n-2],u],h),d[n].type=s.Z.OBJECT_TYPE_CAS,d[n].isDraggable=!0,d[n].visProp.fixed=!1);return h=a.Z.copyAttributes(r,e.options,"regularpolygon"),(i=e.create("polygon",d,h)).elType="regularpolygon",i},n.Z.createPolygonalChain=function(e,t,r){var i,n;return i=a.Z.copyAttributes(r,e.options,"polygonalchain"),(n=e.create("polygon",t,i)).elType="polygonalchain",n.vertices.pop(),e.removeObject(n.borders[n.borders.length-1]),n.borders.pop(),n},n.Z.createParallelogram=function(e,t,r){var i,n,o,s,u=[];if(!1===(u=a.Z.providePoints(e,t,r,"polygon",["vertices"]))||u.length<3)throw Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return s=a.Z.copyAttributes(r,e.options,"parallelogram",["parallelpoint"]),n=e.create("parallelpoint",u,s),o=a.Z.copyAttributes(r,e.options,"parallelogram"),(i=e.create("polygon",[u[0],u[1],n,u[2]],o)).parallelPoint=n,i.isDraggable=!0,n.isDraggable=!0,n.visProp.fixed=!1,i},n.Z.registerElement("polygon",n.Z.createPolygon),n.Z.registerElement("regularpolygon",n.Z.createRegularPolygon),n.Z.registerElement("polygonalchain",n.Z.createPolygonalChain),n.Z.registerElement("parallelogram",n.Z.createParallelogram);var G=n.Z.Polygon;n.Z.Curve=function(e,t,r){this.constructor(e,r,s.Z.OBJECT_TYPE_CURVE,s.Z.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,a.Z.exists(t[0])?this.varname=t[0]:this.varname="x",this.xterm=t[1],this.yterm=t[2],this.generateTerm(this.varname,this.xterm,this.yterm,t[3],t[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),a.Z.isString(this.xterm)&&this.notifyParents(this.xterm),a.Z.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=a.Z.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},n.Z.Curve.prototype=new Y.Z,n.Z.extend(n.Z.Curve.prototype,{minX:function(){return"polar"===a.Z.evaluate(this.visProp.curvetype)?0:new m.Z(s.Z.COORDS_BY_SCREEN,[-(.1*this.board.canvasWidth),0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===a.Z.evaluate(this.visProp.curvetype)?2*Math.PI:new m.Z(s.Z.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(e){return NaN},Y:function(e){return NaN},Z:function(e){return 1},hasPoint:function(e,t,r){var i,n,o,l,c,d,p,f,v,g,b,y,x,C,Z,_,w=[],E=a.Z.evaluate(this.visProp.numberpointslow),N=(this.maxX()-this.minX())/E,S=1/0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(y=this.board._inputDevice,b=a.Z.evaluate(this.visProp.precision[y])):b=this.board.options.precision.hasPoint,e=(d=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board,!1)).usrCoords[1],t=d.usrCoords[2],1===this.bezierDegree&&a.Z.evaluate(this.visProp.hasinnerpoints)&&0!==h.Z.windingNumber([1,e,t],this.points,!0))return!0;if(b+=.5*a.Z.evaluate(this.visProp.strokewidth),b*=b,x=this.board.unitX*this.board.unitX,C=this.board.unitY*this.board.unitY,_=this.minX(),this.maxX(),a.Z.exists(this._visibleArea)&&(_=this._visibleArea[0],N=(this._visibleArea[1]-_)/E),"parameter"===(Z=a.Z.evaluate(this.visProp.curvetype))||"polar"===Z)for(this.transformations.length>0&&(this.updateTransformMatrix(),f=u.Z.inverse(this.transformMat),e=(n=u.Z.matVecMult(f,[1,e,t]))[1],t=n[2]),o=0,i=_;o<E;o++){if((S=(e-(l=this.X(i,!0)))*(e-l)*x+(t-(c=this.Y(i,!0)))*(t-c)*C)<=b)return!0;i+=N}else if("plot"===Z||"functiongraph"===Z){for((!a.Z.exists(r)||r<0)&&(r=0),a.Z.exists(this.qdt)&&a.Z.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?p=(v=(g=this.qdt.query(new m.Z(s.Z.COORDS_BY_USER,[e,t],this.board))).points).length:(v=this.points,p=this.numberPoints-1),o=r;o<p;o++)if(3===this.bezierDegree?w=h.Z.projectCoordsToBeziersegment([1,e,t],this,o):g?(v[o].prev&&(w=h.Z.projectCoordsToSegment([1,e,t],v[o].prev.usrCoords,v[o].usrCoords)),v[o].next&&v[o+1]!==v[o].next&&(w=h.Z.projectCoordsToSegment([1,e,t],v[o].usrCoords,v[o].next.usrCoords))):w=h.Z.projectCoordsToSegment([1,e,t],v[o].usrCoords,v[o+1].usrCoords),w[1]>=0&&w[1]<=1&&(e-w[0][1])*(e-w[0][1])*x+(t-w[0][2])*(t-w[0][2])*C<=b)return!0;return!1}return S<b},allocatePoints:function(){var e,t;if(t=this.numberPoints,this.points.length<this.numberPoints)for(e=this.points.length;e<t;e++)this.points[e]=new m.Z(s.Z.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=g.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},updateDataArray:function(){},updateCurve:function(){var e,t,r,i,n,o,u=this.visProp.plotversion,l=!1;if(this.updateTransformMatrix(),this.updateDataArray(),t=this.minX(),r=this.maxX(),a.Z.exists(this.dataX))for(this.numberPoints=this.dataX.length,e=this.numberPoints,this.allocatePoints(),o=0;o<e;o++)i=o,a.Z.exists(this.dataY)?(n=o,this.points[o].setCoordinates(s.Z.COORDS_BY_USER,[this.dataX[o],this.dataY[o]],!1)):(n=this.X(i),this.points[o].setCoordinates(s.Z.COORDS_BY_USER,[this.dataX[o],this.Y(n,l)],!1)),this.points[o]._t=o,l=!0;else if(a.Z.evaluate(this.visProp.doadvancedplot)?1===u||a.Z.evaluate(this.visProp.doadvancedplotold)?g.updateParametricCurveOld(this,t,r):2===u?g.updateParametricCurve_v2(this,t,r):3===u?g.updateParametricCurve_v3(this,t,r):4===u?g.updateParametricCurve_v4(this,t,r):g.updateParametricCurve_v2(this,t,r):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh):this.numberPoints=a.Z.evaluate(this.visProp.numberpointslow),this.allocatePoints(),g.updateParametricCurveNaive(this,t,r,this.numberPoints)),e=this.numberPoints,a.Z.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(o=0,this.qdt=new d(this.board.getBoundingBox());o<this.points.length;o++)this.qdt.insert(this.points[o]),o>0&&(this.points[o].prev=this.points[o-1]),o<e-1&&(this.points[o].next=this.points[o+1]);for("plot"!==a.Z.evaluate(this.visProp.curvetype)&&a.Z.evaluate(this.visProp.rdpsmoothing)&&(this.points=f.Z.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),e=this.numberPoints,o=0;o<e;o++)this.updateTransform(this.points[o]);return this},updateTransformMatrix:function(){var e,t,r=this.transformations.length;for(t=0,this.transformMat=[[1,0,0],[0,1,0],[0,0,1]];t<r;t++)(e=this.transformations[t]).update(),this.transformMat=u.Z.matMatMult(e.matrix,this.transformMat);return this},updateTransform:function(e){var t;return this.transformations.length>0&&(t=u.Z.matVecMult(this.transformMat,e.usrCoords),e.setCoordinates(s.Z.COORDS_BY_USER,t,!1,!0)),e},addTransform:function(e){var t,r=a.Z.isArray(e)?e:[e],i=r.length;for(t=0;t<i;t++)this.transformations.push(r[t]);return this},interpolationFunctionFromArray:function(e){var t="data"+e,r=this;return function(e,i){var n,o,s,u,l=r[t],c=l.length,h=[];if(isNaN(e))return NaN;if(e<0)return a.Z.isFunction(l[0])?l[0]():l[0];if(3===r.bezierDegree){if(e>=(c-1)/3)return a.Z.isFunction(l[l.length-1])?l[l.length-1]():l[l.length-1];for(o=0,n=3*Math.floor(e),u=1-(s=e%1);o<4;o++)a.Z.isFunction(l[n+o])?h[o]=l[n+o]():h[o]=l[n+o];return u*u*(u*h[0]+3*s*h[1])+(3*u*h[2]+s*h[3])*s*s}if((n=e>c-2?c-2:parseInt(Math.floor(e),10))===e)return a.Z.isFunction(l[n])?l[n]():l[n];for(o=0;o<2;o++)a.Z.isFunction(l[n+o])?h[o]=l[n+o]():h[o]=l[n+o];return h[0]+(h[1]-h[0])*(e-n)}},generateTerm:function(e,t,r,i,n){var o,s;a.Z.isArray(t)?(this.dataX=t,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot"):(this.X=a.Z.createFunction(t,this.board,e),a.Z.isString(t)?this.visProp.curvetype="functiongraph":(a.Z.isFunction(t)||a.Z.isNumber(t))&&(this.visProp.curvetype="parameter")),this.isDraggable=!0,a.Z.isArray(r)?(this.dataY=r,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=a.Z.createFunction(r,this.board,e),a.Z.isFunction(t)&&a.Z.isArray(r)&&(o=a.Z.createFunction(r[0],this.board,""),s=a.Z.createFunction(r[1],this.board,""),this.X=function(e){return t(e)*Math.cos(e)+o()},this.X.deps=o.deps,this.Y=function(e){return t(e)*Math.sin(e)+s()},this.Y.deps=s.deps,this.visProp.curvetype="polar"),a.Z.exists(i)?this.minX=a.Z.createFunction(i,this.board,""):delete this.minX,a.Z.exists(n)?this.maxX=a.Z.createFunction(n,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(e){var t,r,i,n=!1;for(t in i={xterm:1,yterm:1})if(i.hasOwnProperty(t)&&this.hasOwnProperty(t)&&this[t].origin)for(r in n=!0,this[t].origin.deps)this[t].origin.deps.hasOwnProperty(r)&&this[t].origin.deps[r].addChild(this);n||B.Z.findDependencies(this,e,this.board)},getLabelAnchor:function(){var e,t,r,i=.05*this.board.canvasWidth,n=.05*this.board.canvasHeight,o=.95*this.board.canvasWidth,u=.95*this.board.canvasHeight;switch(a.Z.evaluate(this.visProp.label.position)){case"ulft":t=i,r=n;break;case"llft":t=i,r=u;break;case"rt":t=o,r=.5*u;break;case"lrt":t=o,r=u;break;case"urt":t=o,r=n;break;case"top":t=.5*o,r=n;break;case"bot":t=.5*o,r=u;break;default:t=i,r=.5*u}return e=new m.Z(s.Z.COORDS_BY_SCREEN,[t,r],this.board,!1),h.Z.projectCoordsToCurve(e.usrCoords[1],e.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var e,t={id:this.id+"T"+this.numTraces,elementClass:s.Z.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return t.visProp.layer=this.board.options.layer.trace,t.visProp.curvetype=this.visProp.curvetype,this.numTraces++,a.Z.clearVisPropOld(t),t.visPropCalc={visible:a.Z.evaluate(t.visProp.visible)},e=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(t),this.board.renderer.enhancedRendering=e,this.traces[t.id]=t.rendNode,this},bounds:function(){var e,t,r,i=1/0,n=-1/0,o=1/0,s=-1/0,u=this.points.length;if(3===this.bezierDegree){for(e=0;e<u;e++)this.points[e].X=a.Z.bind(function(){return this.usrCoords[1]},this.points[e]),this.points[e].Y=a.Z.bind(function(){return this.usrCoords[2]},this.points[e]);return r=(t=f.Z.bezier(this.points))[3](),i=f.Z.fminbr(function(e){return t[0](e)},[0,r]),n=f.Z.fminbr(function(e){return-t[0](e)},[0,r]),o=f.Z.fminbr(function(e){return t[1](e)},[0,r]),s=f.Z.fminbr(function(e){return-t[1](e)},[0,r]),i=t[0](i),n=t[0](n),o=t[1](o),[i,s=t[1](s),n,o]}for(e=0;e<u;e++)i>this.points[e].usrCoords[1]&&(i=this.points[e].usrCoords[1]),n<this.points[e].usrCoords[1]&&(n=this.points[e].usrCoords[1]),o>this.points[e].usrCoords[2]&&(o=this.points[e].usrCoords[2]),s<this.points[e].usrCoords[2]&&(s=this.points[e].usrCoords[2]);return[i,s,n,o]},getParents:function(){var e=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(e=this.parents),e},moveTo:function(e){var t,r=[];return this.points.length>0&&!a.Z.evaluate(this.visProp.fixed)&&(t=this.points[0],r=3===e.length?[e[0]-t.usrCoords[0],e[1]-t.usrCoords[1],e[2]-t.usrCoords[2]]:[e[0]-t.usrCoords[1],e[1]-t.usrCoords[2]],this.setPosition(s.Z.COORDS_BY_USER,r)),this},getTransformationSource:function(){var e,t;return a.Z.exists(this._transformationSource)&&(t=this._transformationSource).elementClass===s.Z.OBJECT_CLASS_CURVE&&(e=!0),[e,t]},pnpoly:function(e,t,r){var i,n,o,a,u,l,c=this.points,h=!1;for(r===s.Z.COORDS_BY_USER?(a=(l=new m.Z(s.Z.COORDS_BY_USER,[e,t],this.board)).scrCoords[1],u=l.scrCoords[2]):(a=e,u=t),i=0,n=(o=this.points.length)-2;i<o-1;n=i++)c[i].scrCoords[2]>u!=c[n].scrCoords[2]>u&&a<(c[n].scrCoords[1]-c[i].scrCoords[1])*(u-c[i].scrCoords[2])/(c[n].scrCoords[2]-c[i].scrCoords[2])+c[i].scrCoords[1]&&(h=!h);return h}}),n.Z.createCurve=function(e,t,r){var i,o,u=a.Z.copyAttributes(r,e.options,"curve");return(i=e.select(t[0],!0),a.Z.isTransformationOrArray(t[1])&&a.Z.isObject(i)&&(i.type===s.Z.OBJECT_TYPE_CURVE||i.type===s.Z.OBJECT_TYPE_ANGLE||i.type===s.Z.OBJECT_TYPE_ARC||i.type===s.Z.OBJECT_TYPE_CONIC||i.type===s.Z.OBJECT_TYPE_SECTOR))?(i.type===s.Z.OBJECT_TYPE_SECTOR?u=a.Z.copyAttributes(r,e.options,"sector"):i.type===s.Z.OBJECT_TYPE_ARC?u=a.Z.copyAttributes(r,e.options,"arc"):i.type===s.Z.OBJECT_TYPE_ANGLE?(a.Z.exists(r.withLabel)||(r.withLabel=!1),u=a.Z.copyAttributes(r,e.options,"angle")):u=a.Z.copyAttributes(r,e.options,"curve"),u=a.Z.copyAttributes(u,e.options,"curve"),(o=new n.Z.Curve(e,["x",[],[]],u)).updateDataArray=function(){var e,t=i.numberPoints;for(e=0,this.bezierDegree=i.bezierDegree,this.dataX=[],this.dataY=[];e<t;e++)this.dataX.push(i.points[e].usrCoords[1]),this.dataY.push(i.points[e].usrCoords[2]);return this},o.addTransform(t[1]),i.addChild(o),o.setParents([i]),o._transformationSource=i,o):(u=a.Z.copyAttributes(r,e.options,"curve"),new n.Z.Curve(e,["x"].concat(t),u))},n.Z.registerElement("curve",n.Z.createCurve),n.Z.createFunctiongraph=function(e,t,r){var i,o=["x","x"].concat(t);return i=a.Z.copyAttributes(r,e.options,"functiongraph"),(i=a.Z.copyAttributes(i,e.options,"curve")).curvetype="functiongraph",new n.Z.Curve(e,o,i)},n.Z.registerElement("functiongraph",n.Z.createFunctiongraph),n.Z.registerElement("plot",n.Z.createFunctiongraph),n.Z.createSpline=function(e,t,r){var i,o,s,u,l;return(r=a.Z.copyAttributes(r,e.options,"curve")).curvetype="functiongraph",u=[],l=[],o=[function(e,r){var i,n,o;if(!r){if(u=[],l=[],2===t.length&&a.Z.isArray(t[0])&&a.Z.isArray(t[1])&&t[0].length===t[1].length)for(i=0;i<t[0].length;i++)a.Z.isFunction(t[0][i])?u.push(t[0][i]()):u.push(t[0][i]),a.Z.isFunction(t[1][i])?l.push(t[1][i]()):l.push(t[1][i]);else for(i=0;i<t.length;i++)if(a.Z.isPoint(t[i]))u.push(t[i].X()),l.push(t[i].Y());else if(a.Z.isArray(t[i])&&2===t[i].length)for(n=0;n<t.length;n++)a.Z.isFunction(t[n][0])?u.push(t[n][0]()):u.push(t[n][0]),a.Z.isFunction(t[n][1])?l.push(t[n][1]()):l.push(t[n][1]);else a.Z.isFunction(t[i])&&2===t[i]().length&&(o=t[i](),u.push(o[0]),l.push(o[1]));s=f.Z.splineDef(u,l)}return f.Z.splineEval(e,u,l,s)},function(){return u[0]},function(){return u[u.length-1]}],(i=new n.Z.Curve(e,["x","x",o[0],o[1],o[2]],r)).setParents(t),i.elType="spline",i},n.Z.registerElement("spline",n.Z.createSpline),n.Z.createCardinalSpline=function(e,t,r){var i,o,s,l,c,h,d,p,m,v,g="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!a.Z.exists(t[0])||!a.Z.isArray(t[0]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+g);if(!a.Z.exists(t[1])||!a.Z.isNumber(t[1])&&!a.Z.isFunction(t[1]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+g);if(!a.Z.exists(t[2])||!a.Z.isString(t[2]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+g);if(r=a.Z.copyAttributes(r,e.options,"curve"),(r=a.Z.copyAttributes(r,e.options,"cardinalspline")).curvetype="parameter",h=t[0],d=[],!r.isarrayofcoordinates&&2===h.length&&a.Z.isArray(h[0])&&a.Z.isArray(h[1])&&h[0].length===h[1].length)for(p=0;p<h[0].length;p++)d[p]=[],a.Z.isFunction(h[0][p])?d[p].push(h[0][p]()):d[p].push(h[0][p]),a.Z.isFunction(h[1][p])?d[p].push(h[1][p]()):d[p].push(h[1][p]);else for(p=0;p<h.length;p++)a.Z.isString(h[p])?d.push(e.select(h[p])):a.Z.isPoint(h[p])?d.push(h[p]):a.Z.isArray(h[p])&&2===h[p].length?(d[p]=[],a.Z.isFunction(h[p][0])?d[p].push(h[p][0]()):d[p].push(h[p][0]),a.Z.isFunction(h[p][1])?d[p].push(h[p][1]()):d[p].push(h[p][1])):a.Z.isFunction(h[p])&&2===h[p]().length&&d.push(t[p]());if(!0===r.createpoints)s=a.Z.providePoints(e,d,r,"cardinalspline",["points"]);else for(p=0,s=[],o=function(e){return{X:function(){return d[e][0]},Y:function(){return d[e][1]},Dist:function(e){var t=this.X()-e.X(),r=this.Y()-e.Y();return u.Z.hypot(t,r)}}};p<d.length;p++)a.Z.isPoint(d[p])?s.push(d[p]):s.push(o(p));for(l=t[1],c=t[2],v=["x"].concat(f.Z.CardinalSpline(s,l,c)),i=new n.Z.Curve(e,v,r),m=s.length,i.setParents(s),p=0;p<m;p++)h=s[p],a.Z.isPoint(h)&&(a.Z.exists(h._is_new)?(i.addChild(h),delete h._is_new):h.addChild(i));return i.elType="cardinalspline",i},n.Z.registerElement("cardinalspline",n.Z.createCardinalSpline),n.Z.createMetapostSpline=function(e,t,r){var i,o,s,u,l,c,h,d,p="\nPossible parent types: [points:array, controls:object";if(!a.Z.exists(t[0])||!a.Z.isArray(t[0]))throw Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+p);if(!a.Z.exists(t[1])||!a.Z.isObject(t[1]))throw Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+p);if(r=a.Z.copyAttributes(r,e.options,"curve"),(r=a.Z.copyAttributes(r,e.options,"metapostspline")).curvetype="parameter",l=t[0],c=[],!r.isarrayofcoordinates&&2===l.length&&a.Z.isArray(l[0])&&a.Z.isArray(l[1])&&l[0].length===l[1].length)for(h=0;h<l[0].length;h++)c[h]=[],a.Z.isFunction(l[0][h])?c[h].push(l[0][h]()):c[h].push(l[0][h]),a.Z.isFunction(l[1][h])?c[h].push(l[1][h]()):c[h].push(l[1][h]);else for(h=0;h<l.length;h++)a.Z.isString(l[h])?c.push(e.select(l[h])):a.Z.isPoint(l[h])?c.push(l[h]):a.Z.isArray(l[h])&&2===l[h].length?(c[h]=[],a.Z.isFunction(l[h][0])?c[h].push(l[h][0]()):c[h].push(l[h][0]),a.Z.isFunction(l[h][1])?c[h].push(l[h][1]()):c[h].push(l[h][1])):a.Z.isFunction(l[h])&&2===l[h]().length&&c.push(t[h]());if(!0===r.createpoints)s=a.Z.providePoints(e,c,r,"metapostspline",["points"]);else for(h=0,s=[],o=function(e){return{X:function(){return c[e][0]},Y:function(){return c[e][1]}}};h<c.length;h++)a.Z.isPoint(c[h])?s.push(c[h]):s.push(o);for(u=t[1],(i=new n.Z.Curve(e,["t",[],[],0,l.length-1],r)).updateDataArray=function(){var e,t,r=s.length,i=[];for(t=0;t<r;t++)i.push([s[t].X(),s[t].Y()]);e=n.Z.Math.Metapost.curve(i,u),this.dataX=e[0],this.dataY=e[1]},i.bezierDegree=3,d=s.length,i.setParents(s),h=0;h<d;h++)a.Z.isPoint(s[h])&&s[h].addChild(i);return i.elType="metapostspline",i},n.Z.registerElement("metapostspline",n.Z.createMetapostSpline),n.Z.createRiemannsum=function(e,t,r){var i,n,o,s,u,l;if((l=a.Z.copyAttributes(r,e.options,"riemannsum")).curvetype="plot",o=t[0],i=a.Z.createFunction(t[1],e,""),!a.Z.exists(i))throw Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(n=a.Z.createFunction(t[2],e,""),!a.Z.exists(n))throw Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return s=[[0],[0]].concat(t.slice(3)),(u=e.create("curve",s,l)).sum=0,u.Value=function(){return this.sum},u.updateDataArray=function(){var e=f.Z.riemann(o,i(),n(),this.minX(),this.maxX());this.dataX=e[0],this.dataY=e[1],this.sum=e[2]},u.addParentsFromJCFunctions([i,n]),u},n.Z.registerElement("riemannsum",n.Z.createRiemannsum),n.Z.createTracecurve=function(e,t,r){var i,n,o,u;if(2!==t.length)throw Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(n=e.select(t[0]),o=e.select(t[1]),n.type!==s.Z.OBJECT_TYPE_GLIDER||!a.Z.isPoint(o))throw Error("JSXGraph: Can't create trace curve with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider, point]");return(u=a.Z.copyAttributes(r,e.options,"tracecurve")).curvetype="plot",(i=e.create("curve",[[0],[0]],u)).updateDataArray=function(){var e,t,r,i,a,l,c,h,d,p=u.numberpoints,f=n.position,m=n.slideObject,v=m.minX();for(t=(m.maxX()-v)/p,this.dataX=[],this.dataY=[],m.elementClass!==s.Z.OBJECT_CLASS_CURVE&&p++,e=0;e<p;e++){for(i in r=v+e*t,l=m.X(r)/m.Z(r),c=m.Y(r)/m.Z(r),n.setPositionDirectly(s.Z.COORDS_BY_USER,[l,c]),h=!1,this.board.objects)if(this.board.objects.hasOwnProperty(i)&&((a=this.board.objects[i])===n&&(h=!0),h&&a.needsRegularUpdate&&(d=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=d,a===o)))break;this.dataX[e]=o.X(),this.dataY[e]=o.Y()}for(i in n.position=f,h=!1,this.board.objects)if(this.board.objects.hasOwnProperty(i)&&((a=this.board.objects[i])===n&&(h=!0),h&&a.needsRegularUpdate&&(d=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=d,a===o)))break},i},n.Z.registerElement("tracecurve",n.Z.createTracecurve),n.Z.createStepfunction=function(e,t,r){var i,n;if(2!==t.length)throw Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return n=a.Z.copyAttributes(r,e.options,"stepfunction"),(i=e.create("curve",t,n)).updateDataArray=function(){var e,t=0,r=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==r)for(this.dataX[t]=this.xterm[0],this.dataY[t]=this.yterm[0],++t,e=1;e<r;++e)this.dataX[t]=this.xterm[e],this.dataY[t]=this.dataY[t-1],++t,this.dataX[t]=this.xterm[e],this.dataY[t]=this.yterm[e],++t},i},n.Z.registerElement("stepfunction",n.Z.createStepfunction),n.Z.createDerivative=function(e,t,r){var i,n,o,u,l;if(1!==t.length&&t[0].class!==s.Z.OBJECT_CLASS_CURVE)throw Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return l=a.Z.copyAttributes(r,e.options,"curve"),n=t[0],o=f.Z.D(n.X),u=f.Z.D(n.Y),(i=e.create("curve",[function(e){return n.X(e)},function(e){return u(e)/o(e)},n.minX(),n.maxX()],l)).setParents(n),i},n.Z.registerElement("derivative",n.Z.createDerivative),n.Z.createCurveIntersection=function(e,t,r){var i;if(2!==t.length)throw Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return(i=e.create("curve",[[],[]],r)).updateDataArray=function(){var e=n.Z.Math.Clip.intersection(t[0],t[1],this.board);this.dataX=e[0],this.dataY=e[1]},i},n.Z.createCurveUnion=function(e,t,r){var i;if(2!==t.length)throw Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return(i=e.create("curve",[[],[]],r)).updateDataArray=function(){var e=n.Z.Math.Clip.union(t[0],t[1],this.board);this.dataX=e[0],this.dataY=e[1]},i},n.Z.createCurveDifference=function(e,t,r){var i;if(2!==t.length)throw Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return(i=e.create("curve",[[],[]],r)).updateDataArray=function(){var e=n.Z.Math.Clip.difference(t[0],t[1],this.board);this.dataX=e[0],this.dataY=e[1]},i},n.Z.registerElement("curvedifference",n.Z.createCurveDifference),n.Z.registerElement("curveintersection",n.Z.createCurveIntersection),n.Z.registerElement("curveunion",n.Z.createCurveUnion),n.Z.createBoxPlot=function(e,t,r){var i,n,o,s=a.Z.copyAttributes(r,e.options,"boxplot");if(3!==t.length)throw Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(t[0].length<5)throw Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to contain at least 5 quantiles.");for(n=0,i=e.create("curve",[[],[]],s),o=t[0].length,i.Q=[];n<o;n++)i.Q[n]=a.Z.createFunction(t[0][n],e);return i.x=a.Z.createFunction(t[1],e),i.w=a.Z.createFunction(t[2],e),i.updateDataArray=function(){var e,t,r,i,n,o,s,u,l;s=a.Z.evaluate(this.visProp.smallwidth),u=a.Z.evaluate(this.visProp.dir),r=(l=this.x())-.5*this.w(),i=l-.5*this.w()*s,n=l+.5*this.w(),o=l+.5*this.w()*s,e=[l,i,o,l,l,r,r,n,n,l,NaN,r,n,NaN,l,l,i,o,l],t=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===u?(this.dataX=e,this.dataY=t):(this.dataX=t,this.dataY=e)},i.addParentsFromJCFunctions([i.Q,i.x,i.w]),i},n.Z.registerElement("boxplot",n.Z.createBoxPlot),n.Z.createImplicitCurve=function(e,t,r){var i,o;if(1!==t.length&&3!==t.length)throw Error("JSXGraph: Can't create curve implicitCurve with given parent'\nPossible parent types: [f] or [f, dfx, dfy]\nwith functions f, dfx, dfy");return o=a.Z.copyAttributes(r,e.options,"implicitcurve"),(i=e.create("curve",[[],[]],o)).f=a.Z.createFunction(t[0],e,"x, y"),i.dfx=a.Z.createFunction(t[1],e,"x, y"),i.dfy=a.Z.createFunction(t[2],e,"x, y"),i.updateDataArray=function(){var e,t,r=this.board.getBoundingBox(),i=[],o=a.Z.evaluate(this.visProp.margin);r[0]-=o,r[1]+=o,r[2]+=o,r[3]-=o,t={resolution_out:Math.max(.01,a.Z.evaluate(this.visProp.resolution_outer)),resolution_in:Math.max(.01,a.Z.evaluate(this.visProp.resolution_inner)),max_steps:a.Z.evaluate(this.visProp.max_steps),alpha_0:a.Z.evaluate(this.visProp.alpha_0),tol_u0:a.Z.evaluate(this.visProp.tol_u0),tol_newton:a.Z.evaluate(this.visProp.tol_newton),tol_cusp:a.Z.evaluate(this.visProp.tol_cusp),tol_progress:a.Z.evaluate(this.visProp.tol_progress),qdt_box:a.Z.evaluate(this.visProp.qdt_box),kappa_0:a.Z.evaluate(this.visProp.kappa_0),delta_0:a.Z.evaluate(this.visProp.delta_0),h_initial:a.Z.evaluate(this.visProp.h_initial),h_critical:a.Z.evaluate(this.visProp.h_critical),h_max:a.Z.evaluate(this.visProp.h_max),loop_dist:a.Z.evaluate(this.visProp.loop_dist),loop_dir:a.Z.evaluate(this.visProp.loop_dir),loop_detection:a.Z.evaluate(this.visProp.loop_detection),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],e=new n.Z.Math.ImplicitPlot(r,t,this.f,this.dfx,this.dfy),this.qdt=e.qdt,i=e.plot(),this.dataX=i[0],this.dataY=i[1]},i.elType="implicitcurve",i},n.Z.registerElement("implicitcurve",n.Z.createImplicitCurve),n.Z.Curve,n.Z.createArc=function(e,t,r){var i,o,l;if(!1===(l=a.Z.providePoints(e,t,r,"arc",["center","radiuspoint","anglepoint"]))||l.length<3)throw Error("JSXGraph: Can't create Arc with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return o=a.Z.copyAttributes(r,e.options,"arc"),(i=e.create("curve",[[0],[0]],o)).elType="arc",i.setParents(l),i.type=s.Z.OBJECT_TYPE_ARC,i.center=l[0],i.radiuspoint=l[1],i.point2=i.radiuspoint,i.anglepoint=l[2],i.point3=i.anglepoint,a.Z.exists(i.center._is_new)?(i.addChild(i.center),delete i.center._is_new):i.center.addChild(i),a.Z.exists(i.radiuspoint._is_new)?(i.addChild(i.radiuspoint),delete i.radiuspoint._is_new):i.radiuspoint.addChild(i),a.Z.exists(i.anglepoint._is_new)?(i.addChild(i.anglepoint),delete i.anglepoint._is_new):i.anglepoint.addChild(i),i.useDirection=o.usedirection,i.updateDataArray=function(){var e,t,r,i,n,o=1,s=this.radiuspoint,u=this.center,c=this.anglepoint,d=a.Z.evaluate(this.visProp.selection);t=h.Z.rad(s,u,c),("minor"===d&&t>Math.PI||"major"===d&&t<Math.PI)&&(o=-1),this.useDirection&&(r=l[1].coords.usrCoords,i=l[3].coords.usrCoords,n=l[2].coords.usrCoords,(r[1]-n[1])*(r[2]-i[2])-(r[2]-n[2])*(r[1]-i[1])<0?(this.radiuspoint=l[1],this.anglepoint=l[2]):(this.radiuspoint=l[2],this.anglepoint=l[1])),s=s.coords.usrCoords,u=u.coords.usrCoords,c=c.coords.usrCoords,e=h.Z.bezierArc(s,u,c,!1,o),this.dataX=e[0],this.dataY=e[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},i.Radius=function(){return this.radiuspoint.Dist(this.center)},i.getRadius=function(){return n.Z.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},i.Value=function(e,t){var r;return t=t||h.Z.rad(this.radiuspoint,this.center,this.anglepoint),""===(e=(e=e||"length").toLocaleLowerCase())||0===e.indexOf("len")?r=t*this.Radius():0===e.indexOf("rad")?r=t:0===e.indexOf("deg")?r=180*t/Math.PI:0===e.indexOf("sem")?r=t/Math.PI:0===e.indexOf("cir")&&(r=.5*t/Math.PI),r},i.L=function(){return this.Value("length")},i.hasPoint=function(e,t){var r,i,n,o,l,c,d=this.Radius();return a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(e,t):(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(c=this.board._inputDevice,l=a.Z.evaluate(this.visProp.precision[c])):l=this.board.options.precision.hasPoint,l/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),r=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),n=u.Z.inverse(this.transformMat),o=u.Z.matVecMult(n,r.usrCoords),r=new m.Z(s.Z.COORDS_BY_USER,o,this.board)),(i=Math.abs(this.center.coords.distance(s.Z.COORDS_BY_USER,r)-d)<l)&&(i=h.Z.coordsOnArc(this,r)),i)},i.hasPointSector=function(e,t){var r=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board),i=this.Radius(),n=this.center.coords.distance(s.Z.COORDS_BY_USER,r)<i;return n&&(n=h.Z.coordsOnArc(this,r)),n},i.getTextAnchor=function(){return this.center.coords},i.getLabelAnchor=function(){var e,t,r,i,n,o=h.Z.rad(this.radiuspoint,this.center,this.anglepoint),l=10/this.board.unitX,c=10/this.board.unitY,d=this.point2.coords.usrCoords,p=this.center.coords.usrCoords,f=d[1]-p[1],v=d[2]-p[2],g=a.Z.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&o>Math.PI||"major"===g&&o<Math.PI)&&(o=-(2*Math.PI-o)),r=(e=new m.Z(s.Z.COORDS_BY_USER,[p[1]+Math.cos(.5*o)*f-Math.sin(.5*o)*v,p[2]+Math.sin(.5*o)*f+Math.cos(.5*o)*v],this.board)).usrCoords[1]-p[1],i=e.usrCoords[2]-p[2],n=u.Z.hypot(r,i),r=r*(n+l)/n,i=i*(n+c)/n,t=[p[1]+r,p[2]+i],b.position=h.Z.calcLabelQuadrant(h.Z.rad([1,0],[0,0],t)),new m.Z(s.Z.COORDS_BY_USER,t,this.board)},i.updateQuadraticform=q.prototype.updateQuadraticform,i.updateStdform=q.prototype.updateStdform,i.methodMap=n.Z.deepCopy(i.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),i.prepareUpdate().update(),i},n.Z.registerElement("arc",n.Z.createArc),n.Z.createSemicircle=function(e,t,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(e,t,r,"point"))||2!==s.length)throw Error("JSXGraph: Can't create Semicircle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point]");return o=a.Z.copyAttributes(r,e.options,"semicircle","center"),(n=e.create("midpoint",s,o)).dump=!1,o=a.Z.copyAttributes(r,e.options,"semicircle"),(i=e.create("arc",[n,s[1],s[0]],o)).elType="semicircle",i.setParents([s[0].id,s[1].id]),i.subs={midpoint:n},i.inherits.push(n),i.midpoint=i.center=n,i},n.Z.registerElement("semicircle",n.Z.createSemicircle),n.Z.createCircumcircleArc=function(e,t,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(e,t,r,"point"))||3!==s.length)throw Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");return o=a.Z.copyAttributes(r,e.options,"circumcirclearc","center"),(n=e.create("circumcenter",s,o)).dump=!1,(o=a.Z.copyAttributes(r,e.options,"circumcirclearc")).usedirection=!0,(i=e.create("arc",[n,s[0],s[2],s[1]],o)).elType="circumcirclearc",i.setParents([s[0].id,s[1].id,s[2].id]),i.subs={center:n},i.inherits.push(n),i.center=n,i},n.Z.registerElement("circumcirclearc",n.Z.createCircumcircleArc),n.Z.createMinorArc=function(e,t,r){return r.selection="minor",n.Z.createArc(e,t,r)},n.Z.registerElement("minorarc",n.Z.createMinorArc),n.Z.createMajorArc=function(e,t,r){return r.selection="major",n.Z.createArc(e,t,r)},n.Z.registerElement("majorarc",n.Z.createMajorArc),n.Z.createSector=function(e,t,r){var i,o,l,c,d,p,f="invalid";if(t[0].elementClass===s.Z.OBJECT_CLASS_LINE&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(t[2])||a.Z.isNumber(t[2]))&&(a.Z.isArray(t[3])||a.Z.isNumber(t[3]))&&(a.Z.isNumber(t[4])||a.Z.isFunction(t[4])||a.Z.isString(t[4])))f="2lines";else{if(!1===(p=a.Z.providePoints(e,t,r,"sector",["center","radiusPoint","anglePoint"])))throw Error("JSXGraph: Can't create Sector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");f="3points"}if(o=a.Z.copyAttributes(r,e.options,"sector"),(i=e.create("curve",[[0],[0]],o)).type=s.Z.OBJECT_TYPE_SECTOR,i.elType="sector",i.autoRadius=function(){var e=20/i.board.unitX,t=1/0,r=50/i.board.unitX;return a.Z.isPoint(i.center)&&(t=.3333*i.center.Dist(i.point2)),Math.max(e,Math.min(t,r))},"2lines"===f)i.Radius=function(){var e=a.Z.evaluate(t[4]);return"auto"===e?this.autoRadius():e},i.line1=e.select(t[0]),i.line2=e.select(t[1]),i.line1.addChild(i),i.line2.addChild(i),i.setParents(t),i.point1={visProp:{}},i.point2={visProp:{}},i.point3={visProp:{}},c=h.Z.meetLineLine(i.line1.stdform,i.line2.stdform,0,e),a.Z.isArray(t[2])?(2===t[2].length&&(t[2]=[1].concat(t[2])),d=h.Z.projectPointToLine({coords:{usrCoords:t[2]}},i.line1,e),d=v.Z.subtract(d.usrCoords,c.usrCoords),i.direction1=u.Z.innerProduct(d,[0,i.line1.stdform[2],-i.line1.stdform[1]],3)>=0?1:-1):i.direction1=t[2]>=0?1:-1,a.Z.isArray(t[3])?(2===t[3].length&&(t[3]=[1].concat(t[3])),d=h.Z.projectPointToLine({coords:{usrCoords:t[3]}},i.line2,e),d=v.Z.subtract(d.usrCoords,c.usrCoords),i.direction2=u.Z.innerProduct(d,[0,i.line2.stdform[2],-i.line2.stdform[1]],3)>=0?1:-1):i.direction2=t[3]>=0?1:-1,i.updateDataArray=function(){var e,t,r,n,o=[0,0,0],a=[0,0,0],l=[0,0,0];if(t=this.line1,r=this.line2,Math.abs((a=u.Z.crossProduct(t.stdform,r.stdform))[0])>u.Z.eps*u.Z.eps&&(a[1]/=a[0],a[2]/=a[0],a[0]/=a[0]),e=this.direction1*this.Radius(),o=v.Z.add(a,[0,e*t.stdform[2],-e*t.stdform[1]]),e=this.direction2*this.Radius(),l=v.Z.add(a,[0,e*r.stdform[2],-e*r.stdform[1]]),this.point2.coords=new m.Z(s.Z.COORDS_BY_USER,o,i.board),this.point1.coords=new m.Z(s.Z.COORDS_BY_USER,a,i.board),this.point3.coords=new m.Z(s.Z.COORDS_BY_USER,l,i.board),Math.abs(o[0])<u.Z.eps||Math.abs(a[0])<u.Z.eps||Math.abs(l[0])<u.Z.eps){this.dataX=[NaN],this.dataY=[NaN];return}n=h.Z.bezierArc(o,a,l,!0,1),this.dataX=n[0],this.dataY=n[1],this.bezierDegree=3};else if("3points"===f){for(l=0,i.point1=p[0],i.point2=p[1],i.point3=p[2];l<3;l++)a.Z.exists(p[l]._is_new)?(i.addChild(p[l]),delete p[l]._is_new):p[l].addChild(i);i.useDirection=r.usedirection,i.setParents(p),a.Z.exists(p[3])&&(i.point4=p[3],i.point4.addChild(i)),i.methodMap=n.Z.deepCopy(i.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),i.updateDataArray=function(){var e,t,r,i,n,o=this.point2,s=this.point1,u=this.point3,l=1,c=a.Z.evaluate(this.visProp.selection);if(!o.isReal||!s.isReal||!u.isReal){this.dataX=[NaN],this.dataY=[NaN];return}n=h.Z.rad(o,s,u),("minor"===c&&n>Math.PI||"major"===c&&n<Math.PI)&&(l=-1),this.useDirection&&a.Z.exists(this.point4)&&(t=this.point2.coords.usrCoords,r=this.point4.coords.usrCoords,i=this.point3.coords.usrCoords,(t[1]-i[1])*(t[2]-r[2])-(t[2]-i[2])*(t[1]-r[1])>=0&&(u=this.point2,o=this.point3)),o=o.coords.usrCoords,s=s.coords.usrCoords,u=u.coords.usrCoords,e=h.Z.bezierArc(o,s,u,!0,l),this.dataX=e[0],this.dataY=e[1],this.bezierDegree=3},i.Radius=function(){return this.point2.Dist(this.point1)}}return i.center=i.point1,i.radiuspoint=i.point2,i.anglepoint=i.point3,o=a.Z.copyAttributes(r,e.options,"arc"),(o=a.Z.copyAttributes(o,e.options,"sector","arc")).withLabel=!1,o.name+="_arc","2lines"===f?(i.updateDataArray(),i.arc=e.create("arc",[function(){return i.point1.coords.usrCoords},function(){var e=i.point2.coords.distance(s.Z.COORDS_BY_USER,i.point1.coords);return 0===e?[i.point1.coords.usrCoords[1],i.point1.coords.usrCoords[2]]:[i.point1.coords.usrCoords[1]+i.Radius()*(i.point2.coords.usrCoords[1]-i.point1.coords.usrCoords[1])/e,i.point1.coords.usrCoords[2]+i.Radius()*(i.point2.coords.usrCoords[2]-i.point1.coords.usrCoords[2])/e]},function(){return i.point3.coords.usrCoords}],o)):i.arc=e.create("arc",[i.point1,function(){var e=i.point2.Dist(i.point1);return 0===e?[i.point1.X(),i.point1.Y()]:[i.point1.X()+i.Radius()*(i.point2.X()-i.point1.X())/e,i.point1.Y()+i.Radius()*(i.point2.Y()-i.point1.Y())/e]},i.point3],o),i.addChild(i.arc),i.hasPointCurve=function(e,t){var r,i,n,o,u,l,c=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board),d=this.Radius(),p=this.center.coords.distance(s.Z.COORDS_BY_USER,c),f=a.Z.evaluate(this.visProp.selection);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(u=this.board._inputDevice,o=a.Z.evaluate(this.visProp.precision[u])):o=this.board.options.precision.hasPoint,o/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(l=Math.abs(p-d)<o)&&(r=h.Z.rad(this.point2,this.center,c.usrCoords.slice(1)),i=0,n=h.Z.rad(this.point2,this.center,this.point3),("minor"===f&&n>Math.PI||"major"===f&&n<Math.PI)&&(i=n,n=2*Math.PI),(r<i||r>n)&&(l=!1)),l},i.hasPointSector=function(e,t){var r,i,n,o=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board),u=this.Radius(),l=this.point1.coords.distance(s.Z.COORDS_BY_USER,o)<u,c=a.Z.evaluate(this.visProp.selection);return l&&(r=h.Z.rad(this.radiuspoint,this.center,o.usrCoords.slice(1)),i=0,n=h.Z.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===c&&n>Math.PI||"major"===c&&n<Math.PI)&&(i=n,n=2*Math.PI),(r<i||r>n)&&(l=!1)),l},i.hasPoint=function(e,t){return a.Z.evaluate(this.visProp.highlightonsector)||a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(e,t):this.hasPointCurve(e,t)},i.getTextAnchor=function(){return this.point1.coords},i.getLabelAnchor=function(){var e,t,r,i,n,o=h.Z.rad(this.point2,this.point1,this.point3),l=13/this.board.unitX,c=13/this.board.unitY,d=this.point2.coords.usrCoords,p=this.point1.coords.usrCoords,f=d[1]-p[1],v=d[2]-p[2],g=a.Z.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&o>Math.PI||"major"===g&&o<Math.PI)&&(o=-(2*Math.PI-o)),r=(e=new m.Z(s.Z.COORDS_BY_USER,[p[1]+Math.cos(.5*o)*f-Math.sin(.5*o)*v,p[2]+Math.sin(.5*o)*f+Math.cos(.5*o)*v],this.board)).usrCoords[1]-p[1],i=e.usrCoords[2]-p[2],n=u.Z.hypot(r,i),r=r*(n+l)/n,i=i*(n+c)/n,t=[p[1]+r,p[2]+i],b.position=h.Z.calcLabelQuadrant(h.Z.rad([1,0],[0,0],t)),new m.Z(s.Z.COORDS_BY_USER,t,this.board)},i.setRadius=function(e){var t=a.Z.evaluate(e);"undefined"!=("auto"===e||"auto"===t?"auto":a.Z.isNumber(e)?"number":a.Z.isFunction(e)&&!a.Z.isString(t)?"function":"undefined")&&(this.visProp.radius=e),i.Radius=function(){var t=a.Z.evaluate(e);return"auto"===t?this.autoRadius():t}},i.getRadius=function(){return n.Z.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},i.Value=function(e){return this.arc.Value(e)},i.L=function(){return this.arc.L()},i.Area=function(){var e=this.Radius();return .5*e*e*this.Value("radians")},i.Perimeter=function(){return this.L()+2*this.Radius()},"3points"===f&&(i.setPositionDirectly=function(e,t,r){var n,o=new m.Z(e,t,this.board),s=new m.Z(e,r,this.board);return i.point1.draggable()&&i.point2.draggable()&&i.point3.draggable()&&(n=v.Z.subtract(o.usrCoords,s.usrCoords),this.board.create("transform",n.slice(1),{type:"translate"}).applyOnce([i.point1,i.point2,i.point3])),this}),i.methodMap=n.Z.deepCopy(i.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),i},n.Z.registerElement("sector",n.Z.createSector),n.Z.createCircumcircleSector=function(e,t,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(e,t,r,"point")))throw Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");return(n=e.create("circumcenter",s.slice(0,3),o)).dump=!1,o=a.Z.copyAttributes(r,e.options,"circumcirclesector"),(i=e.create("sector",[n,s[0],s[2],s[1]],o)).elType="circumcirclesector",i.setParents(s),i.center=n,i.subs={center:n},i},n.Z.registerElement("circumcirclesector",n.Z.createCircumcircleSector),n.Z.createMinorSector=function(e,t,r){return r.selection="minor",n.Z.createSector(e,t,r)},n.Z.registerElement("minorsector",n.Z.createMinorSector),n.Z.createMajorSector=function(e,t,r){return r.selection="major",n.Z.createSector(e,t,r)},n.Z.registerElement("majorsector",n.Z.createMajorSector),n.Z.createAngle=function(e,t,r){var i,n,o,l,c,d,p="invalid";if(t[0].elementClass===s.Z.OBJECT_CLASS_LINE&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(t[2])||a.Z.isNumber(t[2]))&&(a.Z.isArray(t[3])||a.Z.isNumber(t[3])))p="2lines";else{if(o={name:""},!1===(d=a.Z.providePoints(e,t,o,"point")))throw Error("JSXGraph: Can't create angle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");p="3points"}if(o=a.Z.copyAttributes(r,e.options,"angle"),a.Z.exists(o.name)&&""!==o.name||(o.name=e.generateName({type:s.Z.OBJECT_TYPE_ANGLE})),n=a.Z.exists(o.radius)?o.radius:0,e.suspendUpdate(),"2lines"===p?(t.push(n),(i=e.create("sector",t,o)).updateDataArraySector=i.updateDataArray,i.setAngle=function(e){},i.free=function(e){}):((i=e.create("sector",[d[1],d[0],d[2]],o)).arc.visProp.priv=!0,i.point=i.point2=i.radiuspoint=d[0],i.pointsquare=i.point3=i.anglepoint=d[2],i.Radius=function(){var e=a.Z.evaluate(n);return"auto"===e?i.autoRadius():e},i.updateDataArraySector=function(){var e,t,r=this.point2,i=this.point1,n=this.point3,o=this.Radius(),s=i.Dist(r),u=1,l=a.Z.evaluate(this.visProp.selection);t=h.Z.rad(r,i,n),("minor"===l&&t>Math.PI||"major"===l&&t<Math.PI)&&(u=-1),r=r.coords.usrCoords,i=i.coords.usrCoords,n=n.coords.usrCoords,r=[1,i[1]+(r[1]-i[1])*o/s,i[2]+(r[2]-i[2])*o/s],n=[1,i[1]+(n[1]-i[1])*o/s,i[2]+(n[2]-i[2])*o/s],e=h.Z.bezierArc(r,i,n,!0,u),this.dataX=e[0],this.dataY=e[1],this.bezierDegree=3},i.setAngle=function(e){var t,r,i,n=this.anglepoint,o=this.radiuspoint;return n.draggable()&&(t=this.board.create("transform",[e,this.center],{type:"rotate"}),n.addTransform(o,t),t.update(),n.moveTo(u.Z.matVecMult(t.matrix,o.coords.usrCoords)),i=a.Z.isFunction(e)?function(){return 2*Math.PI-e()}:function(){return 2*Math.PI-e},r=this.board.create("transform",[i,this.center],{type:"rotate"}),n.coords.on("update",function(){r.update(),o.moveTo(u.Z.matVecMult(r.matrix,n.coords.usrCoords))}),n.setParents(o)),this},i.free=function(){var e=this.anglepoint;return e.transformations.length>0&&(e.transformations.pop(),e.isDraggable=!0,e.parents=[],e.coords.off("update")),this},i.setParents(d)),a.Z.exists(i.visProp.text)&&i.label.setText(a.Z.evaluate(i.visProp.text)),i.elType="angle",i.type=s.Z.OBJECT_TYPE_ANGLE,i.subs={},i.updateDataArraySquare=function(){var e,t,r,i,n,o,s,a,l=this.Radius();"2lines"===p&&this.updateDataArraySector(),e=this.point2,t=this.point1,r=this.point3,e=e.coords.usrCoords,t=t.coords.usrCoords,r=r.coords.usrCoords,i=h.Z.distance(e,t,3),n=h.Z.distance(r,t,3),e=[1,t[1]+(e[1]-t[1])*l/i,t[2]+(e[2]-t[2])*l/i],r=[1,t[1]+(r[1]-t[1])*l/n,t[2]+(r[2]-t[2])*l/n],o=u.Z.crossProduct(r,t),s=[-e[1]*o[1]-e[2]*o[2],e[0]*o[1],e[0]*o[2]],o=u.Z.crossProduct(e,t),a=[-r[1]*o[1]-r[2]*o[2],r[0]*o[1],r[0]*o[2]],o=u.Z.crossProduct(s,a),o[1]/=o[0],o[2]/=o[0],this.dataX=[t[1],e[1],o[1],r[1],t[1]],this.dataY=[t[2],e[2],o[2],r[2],t[2]],this.bezierDegree=1},i.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},i.updateDataArray=function(){var e=a.Z.evaluate(this.visProp.type),t=h.Z.trueAngle(this.point2,this.point1,this.point3),r=a.Z.evaluate(this.visProp.selection);("minor"===r&&t>180||"major"===r&&t<180)&&(t=360-t),Math.abs(t-90)<a.Z.evaluate(this.visProp.orthosensitivity)+u.Z.eps&&(e=a.Z.evaluate(this.visProp.orthotype)),"none"===e?this.updateDataArrayNone():"square"===e?this.updateDataArraySquare():"sector"===e?this.updateDataArraySector():"sectordot"!==e||(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==e&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},l=a.Z.copyAttributes(r,e.options,"angle","dot"),i.dot=e.create("point",[function(){var e,t,r,n,o,s,l,c,d;return a.Z.exists(i.dot)&&!i.dot.visProp.visible?[0,0]:(e=i.point2.coords.usrCoords,t=i.point1.coords.usrCoords,r=i.Radius(),n=h.Z.distance(e,t,3),o=h.Z.rad(i.point2,i.point1,i.point3),("minor"===(d=a.Z.evaluate(i.visProp.selection))&&o>Math.PI||"major"===d&&o<Math.PI)&&(o=-(2*Math.PI-o)),o*=.5,s=Math.cos(o),l=Math.sin(o),e=[1,t[1]+(e[1]-t[1])*r/n,t[2]+(e[2]-t[2])*r/n],c=[[1,0,0],[t[1]-.5*t[1]*s+.5*t[2]*l,.5*s,-(.5*l)],[t[2]-.5*t[1]*l-.5*t[2]*s,.5*l,.5*s]],u.Z.matVecMult(c,e))}],l),i.dot.dump=!1,i.subs.dot=i.dot,"2lines"===p)for(c=0;c<2;c++)e.select(t[c]).addChild(i.dot);else for(c=0;c<3;c++)e.select(d[c]).addChild(i.dot);return e.unsuspendUpdate(),i.Value=function(e){return""===(e=e||"radians")&&(e="radians"),i.arc.Value(e)},i.getLabelAnchor=function(){var e,t,r,n,o,l,c,d,p,f=12,v=a.Z.evaluate(i.visProp.selection),g=this.label?this.label.visProp:this.visProp.label;return a.Z.exists(this.label)&&a.Z.exists(this.label.visProp.fontsize)&&(f=a.Z.evaluate(this.label.visProp.fontsize)),f/=this.board.unitX,t=i.point2.coords.usrCoords,r=i.point1.coords.usrCoords,n=i.Radius(),o=h.Z.distance(t,r,3),l=h.Z.rad(i.point2,i.point1,i.point3),("minor"===v&&l>Math.PI||"major"===v&&l<Math.PI)&&(l=-(2*Math.PI-l)),l*=.5,c=Math.cos(l),d=Math.sin(l),t=[1,r[1]+(t[1]-r[1])*n/o,r[2]+(t[2]-r[2])*n/o],p=[[1,0,0],[r[1]-.5*r[1]*c+.5*r[2]*d,.5*c,-(.5*d)],[r[2]-.5*r[1]*d-.5*r[2]*c,.5*d,.5*c]],e=u.Z.matVecMult(p,t),e[1]/=e[0],e[2]/=e[0],e[0]/=e[0],o=h.Z.distance(e,r,3),e=[e[0],r[1]+(e[1]-r[1])*(n+f)/o,r[2]+(e[2]-r[2])*(n+f)/o],g.position=h.Z.calcLabelQuadrant(h.Z.rad([1,0],[0,0],e)),new m.Z(s.Z.COORDS_BY_USER,e,this.board)},i.methodMap=a.Z.deepCopy(i.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),i},n.Z.registerElement("angle",n.Z.createAngle),n.Z.createNonreflexAngle=function(e,t,r){var i;return r.selection="minor",r=a.Z.copyAttributes(r,e.options,"nonreflexangle"),(i=n.Z.createAngle(e,t,r)).Value=function(e){var t=h.Z.rad(this.point2,this.point1,this.point3);return""===(e=e||"radians")&&(e="radians"),t=t<Math.PI?t:2*Math.PI-t,this.arc.Value(e,t)},i},n.Z.registerElement("nonreflexangle",n.Z.createNonreflexAngle),n.Z.createReflexAngle=function(e,t,r){var i;return r.selection="major",r=a.Z.copyAttributes(r,e.options,"reflexangle"),(i=n.Z.createAngle(e,t,r)).Value=function(e){var t=h.Z.rad(this.point2,this.point1,this.point3);return""===(e=e||"radians")&&(e="radians"),t=t>=Math.PI?t:2*Math.PI-t,this.arc.Value(e,t)},i},n.Z.registerElement("reflexangle",n.Z.createReflexAngle);var H=r(2697);n.Z.createOrthogonalProjection=function(e,t,r){var i,n,o,u;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),a.Z.isPointType(e,t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(e,[t[0]],r,"point")[0],i=t[1];else if(a.Z.isPointType(e,t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(e,[t[1]],r,"point")[0],i=t[0];else throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");return u=a.Z.copyAttributes(r,e.options,"orthogonalprojection"),o=e.create("point",[function(){return h.Z.projectPointToLine(n,i,e)}],u),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),i.addChild(o),o.elType="orthogonalprojection",o.setParents([n.id,o.id]),o.update(),o.generatePolynomial=function(){var e=i.point1.symbolic.x,t=i.point1.symbolic.y,r=i.point2.symbolic.x,s=i.point2.symbolic.y,a=n.symbolic.x,u=n.symbolic.y,l=o.symbolic.x,c=o.symbolic.y;return["("+t+")*("+l+")-("+t+")*("+r+")+("+c+")*("+r+")-("+e+")*("+c+")+("+e+")*("+s+")-("+l+")*("+s+")","("+u+")*("+t+")-("+u+")*("+s+")-("+c+")*("+t+")+("+c+")*("+s+")+("+a+")*("+e+")-("+a+")*("+r+")-("+l+")*("+e+")+("+l+")*("+r+")"]},o},n.Z.createPerpendicular=function(e,t,r){var i,o,u,l;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),a.Z.isPointType(e,t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=t[1],i=a.Z.providePoints(e,[t[0]],r,"point")[0];else if(a.Z.isPointType(e,t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=t[0],i=a.Z.providePoints(e,[t[1]],r,"point")[0];else throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point]");return l=a.Z.copyAttributes(r,e.options,"perpendicular"),(u=n.Z.createLine(e,[function(){return o.stdform[2]*i.X()-o.stdform[1]*i.Y()},function(){return-o.stdform[2]*i.Z()},function(){return o.stdform[1]*i.Z()}],l)).elType="perpendicular",u.setParents([o.id,i.id]),a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),o.addChild(u),u},n.Z.createPerpendicularPoint=function(e,t,r){var i,n,o;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),a.Z.isPointType(e,t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(e,[t[0]],r,"point")[0],i=t[1];else if(a.Z.isPointType(e,t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(e,[t[1]],r,"point")[0],i=t[0];else throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");return o=e.create("point",[function(){return h.Z.perpendicular(i,n,e)[0]}],r),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),i.addChild(o),o.elType="perpendicularpoint",o.setParents([n.id,i.id]),o.update(),o.generatePolynomial=function(){var e=i.point1.symbolic.x,t=i.point1.symbolic.y,r=i.point2.symbolic.x,s=i.point2.symbolic.y,a=n.symbolic.x,u=n.symbolic.y,l=o.symbolic.x,c=o.symbolic.y;return["("+t+")*("+l+")-("+t+")*("+r+")+("+c+")*("+r+")-("+e+")*("+c+")+("+e+")*("+s+")-("+l+")*("+s+")","("+u+")*("+t+")-("+u+")*("+s+")-("+c+")*("+t+")+("+c+")*("+s+")+("+a+")*("+e+")-("+a+")*("+r+")-("+l+")*("+e+")+("+l+")*("+r+")"]},o},n.Z.createPerpendicularSegment=function(e,t,r){var i,o,u,l,c;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),a.Z.isPointType(e,t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=t[1],i=a.Z.providePoints(e,[t[0]],r,"point")[0];else if(a.Z.isPointType(e,t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=t[0],i=a.Z.providePoints(e,[t[1]],r,"point")[0];else throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point]");return c=a.Z.copyAttributes(r,e.options,"perpendicularsegment","point"),(l=n.Z.createPerpendicularPoint(e,[o,i],c)).dump=!1,a.Z.exists(r.layer)||(r.layer=e.options.layer.line),c=a.Z.copyAttributes(r,e.options,"perpendicularsegment"),(u=n.Z.createLine(e,[function(){return h.Z.perpendicular(o,i,e)[1]?[l,i]:[i,l]}],c)).point=l,a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),o.addChild(u),u.elType="perpendicularsegment",u.setParents([i.id,o.id]),u.subs={point:l},u.inherits.push(l),u},n.Z.createMidpoint=function(e,t,r){var i,n,o,l,c;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);if(2===t.length&&a.Z.isPointType(e,t[0])&&a.Z.isPointType(e,t[1]))i=(t=a.Z.providePoints(e,t,r,"point"))[0],n=t[1];else if(1===t.length&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)i=t[0].point1,n=t[0].point2;else throw Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");return c=a.Z.copyAttributes(r,e.options,"midpoint"),o=e.create("point",[function(){var e=i.coords.usrCoords[1]+n.coords.usrCoords[1];return isNaN(e)||Math.abs(i.coords.usrCoords[0])<u.Z.eps||Math.abs(n.coords.usrCoords[0])<u.Z.eps?NaN:.5*e},function(){var e=i.coords.usrCoords[2]+n.coords.usrCoords[2];return isNaN(e)||Math.abs(i.coords.usrCoords[0])<u.Z.eps||Math.abs(n.coords.usrCoords[0])<u.Z.eps?NaN:.5*e}],c),a.Z.exists(i._is_new)?(o.addChild(i),delete i._is_new):i.addChild(o),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),o.elType="midpoint",o.setParents([i.id,n.id]),o.prepareUpdate().update(),o.generatePolynomial=function(){var e=i.symbolic.x,t=i.symbolic.y,r=n.symbolic.x,s=n.symbolic.y,a=o.symbolic.x,u=o.symbolic.y;return["("+t+")*("+a+")-("+t+")*("+r+")+("+u+")*("+r+")-("+e+")*("+u+")+("+e+")*("+s+")-("+a+")*("+s+")","("+e+")^2 - 2*("+e+")*("+a+")+("+t+")^2-2*("+t+")*("+u+")-("+r+")^2+2*("+r+")*("+a+")-("+s+")^2+2*("+s+")*("+u+")"]},o},n.Z.createParallelPoint=function(e,t,r){var i,n,o,u,l,c;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);if(3===t.length&&a.Z.isPointType(e,t[0])&&a.Z.isPointType(e,t[1])&&a.Z.isPointType(e,t[2]))i=(t=a.Z.providePoints(e,t,r,"point"))[0],n=t[1],o=t[2];else if(a.Z.isPointType(e,t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=a.Z.providePoints(e,[t[0]],r,"point")[0],i=t[1].point1,n=t[1].point2;else if(a.Z.isPointType(e,t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=a.Z.providePoints(e,[t[1]],r,"point")[0],i=t[0].point1,n=t[0].point2;else throw Error("JSXGraph: Can't create parallel point with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [line,point], [point,point,point]");return c=a.Z.copyAttributes(r,e.options,"parallelpoint"),u=e.create("point",[function(){return o.coords.usrCoords[1]+n.coords.usrCoords[1]-i.coords.usrCoords[1]},function(){return o.coords.usrCoords[2]+n.coords.usrCoords[2]-i.coords.usrCoords[2]}],c),a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),a.Z.exists(n._is_new)?(u.addChild(n),delete n._is_new):n.addChild(u),a.Z.exists(o._is_new)?(u.addChild(o),delete o._is_new):o.addChild(u),u.elType="parallelpoint",u.setParents([i.id,n.id,o.id]),u.prepareUpdate().update(),u.generatePolynomial=function(){var e=i.symbolic.x,t=i.symbolic.y,r=n.symbolic.x,s=n.symbolic.y,a=o.symbolic.x,l=o.symbolic.y,c=u.symbolic.x,h=u.symbolic.y;return["("+s+")*("+c+")-("+s+")*("+a+")-("+t+")*("+c+")+("+t+")*("+a+")-("+h+")*("+r+")+("+h+")*("+e+")+("+l+")*("+r+")-("+l+")*("+e+")","("+h+")*("+e+")-("+h+")*("+a+")-("+s+")*("+e+")+("+s+")*("+a+")-("+c+")*("+t+")+("+c+")*("+l+")+("+r+")*("+t+")-("+r+")*("+l+")"]},u},n.Z.createParallel=function(e,t,r){var i,n,o,s,l,c,h=1;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);return i=null,3===t.length?(i=(t=a.Z.providePoints(e,t,r,"point"))[2],h=0):a.Z.isPointType(e,t[0])?(i=a.Z.providePoints(e,[t[0]],r,"point")[0],s=function(){return t[1].stdform}):a.Z.isPointType(e,t[1])&&(i=a.Z.providePoints(e,[t[1]],r,"point")[0],s=function(){return t[0].stdform}),a.Z.exists(r.layer)||(r.layer=e.options.layer.line),c=a.Z.copyAttributes(r,e.options,"parallel","point"),(n=1===h?e.create("point",[function(){return u.Z.crossProduct([1,0,0],s())}],c):e.create("parallelpoint",t,c)).isDraggable=!0,c=a.Z.copyAttributes(r,e.options,"parallel"),(o=e.create("line",[i,n],c)).elType="parallel",o.subs={point:n},o.inherits.push(n),o.setParents([t[0].id,t[1].id]),3===t.length&&o.addParents(t[2].id),o.point=n,o},n.Z.createArrowParallel=function(e,t,r){var i,o;try{return(o=a.Z.copyAttributes(r,e.options,"arrowparallel")).firstArrow=!1,o.lastArrow=!0,(i=n.Z.createParallel(e,t,o).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",i}catch(e){throw Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},n.Z.createNormal=function(e,t,r){var i,n,o,l,c,h,d,p,m;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);if(1===t.length)n=(i=t[0]).slideObject;else if(2===t.length){if(a.Z.isPointType(e,t[0]))i=a.Z.providePoints(e,[t[0]],r,"point")[0],n=t[1];else if(a.Z.isPointType(e,t[1]))n=t[0],i=a.Z.providePoints(e,[t[1]],r,"point")[0];else throw Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]")}else throw Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(d=a.Z.copyAttributes(r,e.options,"normal"),n.elementClass===s.Z.OBJECT_CLASS_LINE)m=a.Z.copyAttributes(r,e.options,"normal","point"),(p=e.create("point",[function(){var e=u.Z.crossProduct([1,0,0],n.stdform);return[e[0],-e[2],e[1]]}],m)).isDraggable=!0,(o=e.create("line",[i,p],d)).point=p,o.subs={point:p},o.inherits.push(p);else if(n.elementClass===s.Z.OBJECT_CLASS_CIRCLE)o=e.create("line",[n.midpoint,i],d);else if(n.elementClass===s.Z.OBJECT_CLASS_CURVE)"plot"!==a.Z.evaluate(n.visProp.curvetype)?(c=n.X,h=n.Y,o=e.create("line",[function(){return-i.X()*f.Z.D(c)(i.position)-i.Y()*f.Z.D(h)(i.position)},function(){return f.Z.D(c)(i.position)},function(){return f.Z.D(h)(i.position)}],d)):o=e.create("line",[function(){var e,t,r,o,s,a,l,c,h,d,p=Math.floor(i.position),f=i.position-p;if(1===n.bezierdegree)p===n.numberPoints-1&&(p-=1,f=1);else{if(3!==n.bezierDegree)return 0;p=3*Math.floor(i.position*(n.numberPoints-1)/3),r=(i.position*(n.numberPoints-1)-p)/3,p>=n.numberPoints-1&&(p=n.numberPoints-4,r=1)}return p<0?1:1===n.bezierDegree?(n.Y(p)+f*(n.Y(p+1)-n.Y(p)))*(n.Y(p)-n.Y(p+1))-(n.X(p)+f*(n.X(p+1)-n.X(p)))*(n.X(p+1)-n.X(p)):(o=n.points[p].usrCoords,s=n.points[p+1].usrCoords,a=n.points[p+2].usrCoords,l=n.points[p+3].usrCoords,c=(1-r)*(1-r)*(s[1]-o[1])+2*(1-r)*r*(a[1]-s[1])+r*r*(l[1]-a[1]),h=(1-r)*(1-r)*(s[2]-o[2])+2*(1-r)*r*(a[2]-s[2])+r*r*(l[2]-a[2]),d=u.Z.hypot(c,h),c/=d,h/=d,t=[1,(e=i.coords.usrCoords)[1]-h,e[2]+c],e[2]*t[1]-e[1]*t[2])},function(){var e,t,r,o,s,a,l,c,h,d=Math.floor(i.position);if(1===n.bezierdegree)d===n.numberPoints-1&&(d-=1);else{if(3!==n.bezierDegree)return 0;d=3*Math.floor(i.position*(n.numberPoints-1)/3),t=(i.position*(n.numberPoints-1)-d)/3,d>=n.numberPoints-1&&(d=n.numberPoints-4,t=1)}return d<0?0:1===n.bezierDegree?n.X(d+1)-n.X(d):(r=n.points[d].usrCoords,o=n.points[d+1].usrCoords,s=n.points[d+2].usrCoords,a=n.points[d+3].usrCoords,l=(1-t)*(1-t)*(o[1]-r[1])+2*(1-t)*t*(s[1]-o[1])+t*t*(a[1]-s[1]),c=(1-t)*(1-t)*(o[2]-r[2])+2*(1-t)*t*(s[2]-o[2])+t*t*(a[2]-s[2]),h=u.Z.hypot(l,c),l/=h,c/=h,(e=i.coords.usrCoords)[1],e[2]+l-e[2])},function(){var e,t,r,o,s,a,l,c,h,d,p=Math.floor(i.position);if(1===n.bezierdegree)p===n.numberPoints-1&&(p-=1);else{if(3!==n.bezierDegree)return 0;p=3*Math.floor(i.position*(n.numberPoints-1)/3),r=(i.position*(n.numberPoints-1)-p)/3,p>=n.numberPoints-1&&(p=n.numberPoints-4,r=1)}return p<0?0:1===n.bezierDegree?n.Y(p+1)-n.Y(p):(o=n.points[p].usrCoords,s=n.points[p+1].usrCoords,a=n.points[p+2].usrCoords,l=n.points[p+3].usrCoords,c=(1-r)*(1-r)*(s[1]-o[1])+2*(1-r)*r*(a[1]-s[1])+r*r*(l[1]-a[1]),h=(1-r)*(1-r)*(s[2]-o[2])+2*(1-r)*r*(a[2]-s[2])+r*r*(l[2]-a[2]),d=u.Z.hypot(c,h),c/=d,h/=d,t=[1,(e=i.coords.usrCoords)[1]-h,e[2]+c],e[1]-t[1])}],d);else if(n.type===s.Z.OBJECT_TYPE_TURTLE)o=e.create("line",[function(){var e,t,r=Math.floor(i.position),o=i.position-r;for(t=0;t<n.objects.length;t++)if((e=n.objects[t]).type===s.Z.OBJECT_TYPE_CURVE){if(r<e.numberPoints)break;r-=e.numberPoints}return(r===e.numberPoints-1&&(r-=1,o=1),r<0)?1:(e.Y(r)+o*(e.Y(r+1)-e.Y(r)))*(e.Y(r)-e.Y(r+1))-(e.X(r)+o*(e.X(r+1)-e.X(r)))*(e.X(r+1)-e.X(r))},function(){var e,t,r=Math.floor(i.position);for(t=0;t<n.objects.length;t++)if((e=n.objects[t]).type===s.Z.OBJECT_TYPE_CURVE){if(r<e.numberPoints)break;r-=e.numberPoints}return(r===e.numberPoints-1&&(r-=1),r<0)?0:e.X(r+1)-e.X(r)},function(){var e,t,r=Math.floor(i.position);for(t=0;t<n.objects.length;t++)if((e=n.objects[t]).type===s.Z.OBJECT_TYPE_CURVE){if(r<e.numberPoints)break;r-=e.numberPoints}return(r===e.numberPoints-1&&(r-=1),r<0)?0:e.Y(r+1)-e.Y(r)}],d);else throw Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");return o.elType="normal",o.setParents(t),a.Z.exists(i._is_new)?(o.addChild(i),delete i._is_new):i.addChild(o),n.addChild(o),o},n.Z.createBisector=function(e,t,r){var i,o,s,u;if(t=a.Z.providePoints(e,t,r,"point"),a.Z.isPoint(t[0])&&a.Z.isPoint(t[1])&&a.Z.isPoint(t[2])){for(s=0,(u=a.Z.copyAttributes(r,e.options,"bisector","point")).snapToGrid=!1,(i=e.create("point",[function(){return h.Z.angleBisector(t[0],t[1],t[2],e)}],u)).dump=!1;s<3;s++)a.Z.exists(t[s]._is_new)?(i.addChild(t[s]),delete t[s]._is_new):t[s].addChild(i);return a.Z.exists(r.layer)||(r.layer=e.options.layer.line),u=a.Z.copyAttributes(r,e.options,"bisector"),(o=n.Z.createLine(e,[t[1],i],u)).point=i,o.elType="bisector",o.setParents(t),o.subs={point:i},o.inherits.push(i),o}throw Error("JSXGraph: Can't create angle bisector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point]")},n.Z.createAngularBisectorsOfTwoLines=function(e,t,r){var i,n,o,l,c=e.select(t[0]),h=e.select(t[1]);if(c.elementClass!==s.Z.OBJECT_CLASS_LINE||h.elementClass!==s.Z.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,line]");return a.Z.exists(r.layer)||(r.layer=e.options.layer.line),o=a.Z.copyAttributes(r,e.options,"bisectorlines","line1"),i=e.create("line",[function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[0]/e-h.stdform[0]/t},function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[1]/e-h.stdform[1]/t},function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[2]/e-h.stdform[2]/t}],o),a.Z.exists(r.layer)||(r.layer=e.options.layer.line),o=a.Z.copyAttributes(r,e.options,"bisectorlines","line2"),n=e.create("line",[function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[0]/e+h.stdform[0]/t},function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[1]/e+h.stdform[1]/t},function(){var e=u.Z.hypot(c.stdform[1],c.stdform[2]),t=u.Z.hypot(h.stdform[1],h.stdform[2]);return c.stdform[2]/e+h.stdform[2]/t}],o),l=new H.Z({line1:i,line2:n}),i.dump=!1,n.dump=!1,l.elType="bisectorlines",l.setParents([c.id,h.id]),l.subs={line1:i,line2:n},l},n.Z.createCircumcenter=function(e,t,r){var i,o,s,u,l;if(t=a.Z.providePoints(e,t,r,"point"),a.Z.isPoint(t[0])&&a.Z.isPoint(t[1])&&a.Z.isPoint(t[2])){for(o=0,s=t[0],u=t[1],l=t[2],i=n.Z.createPoint(e,[function(){return h.Z.circumcenter(s,u,l,e)}],r);o<3;o++)a.Z.exists(t[o]._is_new)?(i.addChild(t[o]),delete t[o]._is_new):t[o].addChild(i);return i.elType="circumcenter",i.setParents(t),i.generatePolynomial=function(){var e=s.symbolic.x,t=s.symbolic.y,r=u.symbolic.x,n=u.symbolic.y,o=l.symbolic.x,a=l.symbolic.y,c=i.symbolic.x,h=i.symbolic.y;return[["((",c,")-(",e,"))^2+((",h,")-(",t,"))^2-((",c,")-(",r,"))^2-((",h,")-(",n,"))^2"].join(""),["((",c,")-(",e,"))^2+((",h,")-(",t,"))^2-((",c,")-(",o,"))^2-((",h,")-(",a,"))^2"].join("")]},i}throw Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")},n.Z.createIncenter=function(e,t,r){var i,n,o,l,c;if((t=a.Z.providePoints(e,t,r,"point")).length>=3&&a.Z.isPoint(t[0])&&a.Z.isPoint(t[1])&&a.Z.isPoint(t[2])){for(c=0,n=t[0],o=t[1],l=t[2],i=e.create("point",[function(){var t,r,i;return t=u.Z.hypot(o.X()-l.X(),o.Y()-l.Y()),r=u.Z.hypot(n.X()-l.X(),n.Y()-l.Y()),i=u.Z.hypot(o.X()-n.X(),o.Y()-n.Y()),new m.Z(s.Z.COORDS_BY_USER,[(t*n.X()+r*o.X()+i*l.X())/(t+r+i),(t*n.Y()+r*o.Y()+i*l.Y())/(t+r+i)],e)}],r);c<3;c++)a.Z.exists(t[c]._is_new)?(i.addChild(t[c]),delete t[c]._is_new):t[c].addChild(i);i.elType="incenter",i.setParents(t)}else throw Error("JSXGraph: Can't create incenter with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");return i},n.Z.createCircumcircle=function(e,t,r){var i,o,s,u;if(!1===(t=a.Z.providePoints(e,t,r,"point")))throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");try{for(s=a.Z.copyAttributes(r,e.options,"circumcircle","center"),(i=n.Z.createCircumcenter(e,t,s)).dump=!1,a.Z.exists(r.layer)||(r.layer=e.options.layer.circle),s=a.Z.copyAttributes(r,e.options,"circumcircle"),(o=n.Z.createCircle(e,[i,t[0]],s)).elType="circumcircle",o.setParents(t),o.subs={center:i},o.inherits.push(o),u=0;u<3;u++)a.Z.exists(t[u]._is_new)?(o.addChild(t[u]),delete t[u]._is_new):t[u].addChild(o)}catch(e){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")}return o},n.Z.createIncircle=function(e,t,r){var i,o,s,l;if(!1===(t=a.Z.providePoints(e,t,r,"point")))throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");try{for(l=a.Z.copyAttributes(r,e.options,"incircle","center"),(o=n.Z.createIncenter(e,t,l)).dump=!1,a.Z.exists(r.layer)||(r.layer=e.options.layer.circle),l=a.Z.copyAttributes(r,e.options,"incircle"),(s=n.Z.createCircle(e,[o,function(){var e=u.Z.hypot(t[1].X()-t[2].X(),t[1].Y()-t[2].Y()),r=u.Z.hypot(t[0].X()-t[2].X(),t[0].Y()-t[2].Y()),i=u.Z.hypot(t[1].X()-t[0].X(),t[1].Y()-t[0].Y()),n=(e+r+i)/2;return Math.sqrt((n-e)*(n-r)*(n-i)/n)}],l)).elType="incircle",s.setParents(t),i=0;i<3;i++)a.Z.exists(t[i]._is_new)?(s.addChild(t[i]),delete t[i]._is_new):t[i].addChild(s);s.center=o,s.subs={center:s.center},s.inherits.push(o)}catch(e){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")}return s},n.Z.createReflection=function(e,t,r){var i,o,u,l,c,h,d,p,f="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(h=0;h<t.length;++h)t[h]=e.select(t[h]);if(d=a.Z.copyAttributes(r,e.options,"reflection"),a.Z.isPoint(t[0]))o=a.Z.providePoints(e,[t[0]],p)[0];else if(t[0].elementClass===s.Z.OBJECT_CLASS_CURVE||t[0].elementClass===s.Z.OBJECT_CLASS_LINE||t[0].type===s.Z.OBJECT_TYPE_POLYGON||t[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE)o=t[0];else throw Error("JSXGraph: Can't create reflection element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);if(t[1].elementClass===s.Z.OBJECT_CLASS_LINE)i=t[1];else throw Error("JSXGraph: Can't create reflected element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);if(c=n.Z.createTransform(e,[i],{type:"reflect"}),a.Z.isPoint(o))u=n.Z.createPoint(e,[o,c],d);else if(o.elementClass===s.Z.OBJECT_CLASS_CURVE)u=n.Z.createCurve(e,[o,c],d);else if(o.elementClass===s.Z.OBJECT_CLASS_LINE)u=n.Z.createLine(e,[o,c],d);else if(o.type===s.Z.OBJECT_TYPE_POLYGON)u=n.Z.createPolygon(e,[o,c],d);else if(o.elementClass===s.Z.OBJECT_CLASS_CIRCLE)"euclidean"===d.type.toLowerCase()?(p=a.Z.copyAttributes(r,e.options,"reflection","center"),(l=n.Z.createPoint(e,[o.center,c],p)).prepareUpdate().update().updateVisibility(a.Z.evaluate(l.visProp.visible)).updateRenderer(),u=n.Z.createCircle(e,[l,function(){return o.Radius()}],d)):u=n.Z.createCircle(e,[o,c],d);else throw Error("JSXGraph: Can't create reflected element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);return a.Z.exists(o._is_new)&&(u.addChild(o),delete o._is_new),i.addChild(u),u.elType="reflection",u.addParents(i),u.prepareUpdate().update(),a.Z.isPoint(u)&&(u.generatePolynomial=function(){var e=i.point1.symbolic.x,t=i.point1.symbolic.y,r=i.point2.symbolic.x,n=i.point2.symbolic.y,s=o.symbolic.x,a=o.symbolic.y,l=u.symbolic.x,c=u.symbolic.y;return[["((",c,")-(",a,"))*((",t,")-(",n,"))+((",e,")-(",r,"))*((",l,")-(",s,"))"].join(""),["((",l,")-(",e,"))^2+((",c,")-(",t,"))^2-((",s,")-(",e,"))^2-((",a,")-(",t,"))^2"].join("")]}),u},n.Z.createMirrorElement=function(e,t,r){var i,o,u,l,c,h,d,p,f="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(o=0;o<t.length;++o)t[o]=e.select(t[o]);if(d=a.Z.copyAttributes(r,e.options,"mirrorelement"),a.Z.isPoint(t[0]))i=a.Z.providePoints(e,[t[0]],d)[0];else if(t[0].elementClass===s.Z.OBJECT_CLASS_CURVE||t[0].elementClass===s.Z.OBJECT_CLASS_LINE||t[0].type===s.Z.OBJECT_TYPE_POLYGON||t[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE)i=t[0];else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);if(a.Z.isPoint(t[1]))p=a.Z.copyAttributes(r,e.options,"mirrorelement","point"),u=a.Z.providePoints(e,[t[1]],p)[0];else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);if(h=n.Z.createTransform(e,[Math.PI,u],{type:"rotate"}),a.Z.isPoint(i))l=n.Z.createPoint(e,[i,h],d);else if(i.elementClass===s.Z.OBJECT_CLASS_CURVE)l=n.Z.createCurve(e,[i,h],d);else if(i.elementClass===s.Z.OBJECT_CLASS_LINE)l=n.Z.createLine(e,[i,h],d);else if(i.type===s.Z.OBJECT_TYPE_POLYGON)l=n.Z.createPolygon(e,[i,h],d);else if(i.elementClass===s.Z.OBJECT_CLASS_CIRCLE)"euclidean"===d.type.toLowerCase()?(p=a.Z.copyAttributes(r,e.options,"mirrorelement","center"),(c=n.Z.createPoint(e,[i.center,h],p)).prepareUpdate().update().updateVisibility(a.Z.evaluate(c.visProp.visible)).updateRenderer(),l=n.Z.createCircle(e,[c,function(){return i.Radius()}],d)):l=n.Z.createCircle(e,[i,h],d);else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+f);return a.Z.exists(i._is_new)&&(l.addChild(i),delete i._is_new),u.addChild(l),l.elType="mirrorelement",l.addParents(u),l.prepareUpdate().update(),l},n.Z.createMirrorPoint=function(e,t,r){var i=n.Z.createMirrorElement(e,t,r);return i.elType="mirrorpoint",i},n.Z.createIntegral=function(e,t,r){var i,o,u,l,c,h,d,p,v,g,b,y,x,C,Z=null;if(a.Z.isArray(t[0])&&t[1].elementClass===s.Z.OBJECT_CLASS_CURVE)i=t[0],o=t[1];else if(a.Z.isArray(t[1])&&t[0].elementClass===s.Z.OBJECT_CLASS_CURVE)i=t[1],o=t[0];else throw Error("JSXGraph: Can't create integral with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");return(u=a.Z.copyAttributes(r,e.options,"integral")).withLabel=!1,C=e.create("curve",[[0],[0]],u),l=i[0],c=i[1],a.Z.isFunction(l)?(h=l,d=function(){return o.Y(h())},l=h()):(h=l,d=o.Y(l)),a.Z.isFunction(c)?(p=c,v=function(){return o.Y(p())},c=p()):(p=c,v=o.Y(c)),u=a.Z.copyAttributes(r,e.options,"integral","curveLeft"),g=e.create("glider",[h,d,o],u),a.Z.isFunction(h)&&g.hideElement(),u=a.Z.copyAttributes(r,e.options,"integral","baseLeft"),b=e.create("point",[function(){return"y"===a.Z.evaluate(C.visProp.axis)?0:g.X()},function(){return"y"===a.Z.evaluate(C.visProp.axis)?g.Y():0}],u),u=a.Z.copyAttributes(r,e.options,"integral","curveRight"),y=e.create("glider",[p,v,o],u),a.Z.isFunction(p)&&y.hideElement(),u=a.Z.copyAttributes(r,e.options,"integral","baseRight"),x=e.create("point",[function(){return"y"===a.Z.evaluate(C.visProp.axis)?0:y.X()},function(){return"y"===a.Z.evaluate(C.visProp.axis)?y.Y():0}],u),!1!==(u=a.Z.copyAttributes(r,e.options,"integral")).withlabel&&"y"!==u.axis&&(u=a.Z.copyAttributes(r,e.options,"integral","label"),u=a.Z.copyAttributes(u,e.options,"label"),(Z=e.create("text",[function(){var e=new m.Z(s.Z.COORDS_BY_SCREEN,[a.Z.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),t=this.board.getBoundingBox(),r=(t[2]-t[0])*.1,i=y.X();return i<t[0]?i=t[0]+r:i>t[2]&&(i=t[2]-r),i+e.usrCoords[1]},function(){var e=new m.Z(s.Z.COORDS_BY_SCREEN,[0,a.Z.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),t=this.board.getBoundingBox(),r=(t[1]-t[3])*.1,i=y.Y();return i>t[1]?i=t[1]-r:i<t[3]&&(i=t[3]+r),i+e.usrCoords[2]},""],u)).setText(function(){var e=f.Z.NewtonCotes([b.X(),x.X()],o.Y),t=a.Z.evaluate(Z.visProp.digits);return"&int; = "+(Z.useLocale()?Z.formatNumberLocale(e,t):a.Z.toFixed(e,t))}),Z.dump=!1,g.addChild(Z),y.addChild(Z)),g.dump=!1,b.dump=!1,y.dump=!1,x.dump=!1,C.elType="integral",C.setParents([o.id,i]),C.subs={curveLeft:g,baseLeft:b,curveRight:y,baseRight:x},C.inherits.push(g,b,y,x),u.withLabel&&(C.subs.label=Z,C.inherits.push(Z)),C.Value=function(){return f.Z.I([b.X(),x.X()],o.Y)},C.updateDataArray=function(){var e,t,r,i,n,s,u,l,c;if("y"===a.Z.evaluate(this.visProp.axis)){for(g.Y()<y.Y()?(s=g.X(),l=g.Y(),u=y.X(),c=y.Y()):(s=y.X(),l=y.Y(),u=g.X(),c=g.Y()),i=Math.min(s,u),n=Math.max(s,u),e=[0,s],t=[l,l],r=0;r<o.numberPoints;r++)l<=o.points[r].usrCoords[2]&&i<=o.points[r].usrCoords[1]&&o.points[r].usrCoords[2]<=c&&o.points[r].usrCoords[1]<=n&&(e.push(o.points[r].usrCoords[1]),t.push(o.points[r].usrCoords[2]));e.push(u),t.push(c),e.push(0),t.push(c),e.push(0),t.push(l)}else{for(b.X()<x.X()?(i=b.X(),n=x.X()):(i=x.X(),n=b.X()),e=[i,i],t=[0,o.Y(i)],r=0;r<o.numberPoints;r++)i<=o.points[r].usrCoords[1]&&o.points[r].usrCoords[1]<=n&&(e.push(o.points[r].usrCoords[1]),t.push(o.points[r].usrCoords[2]));e.push(n),t.push(o.Y(n)),e.push(n),t.push(0),e.push(i),t.push(0)}this.dataX=e,this.dataY=t},g.addChild(C),y.addChild(C),b.addChild(C),x.addChild(C),C.baseLeft=b,C.baseRight=x,C.curveLeft=g,C.curveRight=y,C.methodMap=n.Z.deepCopy(C.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),C.label=Z,C},n.Z.createGrid=function(e,t,r){var i,n;return n=a.Z.copyAttributes(r,e.options,"grid"),(i=e.create("curve",[[null],[null]],n)).elType="grid",i.type=s.Z.OBJECT_TYPE_GRID,i.updateDataArray=function(){var t,r,n,o,u,l,c=a.Z.evaluate(this.visProp.gridx),h=a.Z.evaluate(this.visProp.gridy);for(u=a.Z.isArray(this.visProp.topleft)?new m.Z(a.Z.evaluate(this.visProp.tltype)||s.Z.COORDS_BY_USER,this.visProp.topleft,e):new m.Z(s.Z.COORDS_BY_SCREEN,[0,0],e),l=a.Z.isArray(this.visProp.bottomright)?new m.Z(a.Z.evaluate(this.visProp.brtype)||s.Z.COORDS_BY_USER,this.visProp.bottomright,e):new m.Z(s.Z.COORDS_BY_SCREEN,[e.canvasWidth,e.canvasHeight],e),e.options.grid.hasGrid=!0,i.dataX=[],i.dataY=[],t=Math.floor(u.usrCoords[2]/h)*h,r=Math.ceil(l.usrCoords[2]/h)*h,u.usrCoords[2]<l.usrCoords[2]&&(t=Math.ceil(l.usrCoords[2]/h)*h,r=Math.floor(u.usrCoords[2]/h)*h),o=!(!isFinite(t)||!isFinite(r)||Math.abs(r)>Math.abs(5e3*h)),n=t;o&&n>r-h;n-=h)i.dataX.push(u.usrCoords[1],l.usrCoords[1],NaN),i.dataY.push(n,n,NaN);for(t=Math.ceil(u.usrCoords[1]/c)*c,r=Math.floor(l.usrCoords[1]/c)*c,u.usrCoords[1]>l.usrCoords[1]&&(t=Math.floor(l.usrCoords[1]/c)*c,r=Math.ceil(u.usrCoords[1]/c)*c),o=!(!isFinite(t)||!isFinite(r)||Math.abs(r)>Math.abs(5e3*c)),n=t;o&&n<r+c;n+=c)i.dataX.push(n,n,NaN),i.dataY.push(u.usrCoords[2],l.usrCoords[2],NaN)},i.hasPoint=function(){return!1},e.grids.push(i),i},n.Z.createInequality=function(e,t,r){var i,n,o;if(o=a.Z.copyAttributes(r,e.options,"inequality"),t[0].elementClass===s.Z.OBJECT_CLASS_LINE)(n=e.create("curve",[[],[]],o)).hasPoint=function(){return!1},n.updateDataArray=function(){var r,i,n,o=e.getBoundingBox(),l=a.Z.evaluate(this.visProp.inverse),c=1.5*Math.max(o[2]-o[0],o[1]-o[3]),d={coords:{usrCoords:[1,(o[0]+o[2])*.5,l?o[1]:o[3]]}},p=t[0].stdform.slice(1);n=1.5*Math.max(h.Z.perpendicular(t[0],d,e)[0].distance(s.Z.COORDS_BY_USER,d.coords),c)*(l?-1:1),d={coords:{usrCoords:[1,(o[0]+o[2])*.5,(o[1]+o[3])*.5]}},r=[1,(d=Math.abs(u.Z.innerProduct(d.coords.usrCoords,t[0].stdform,3))>=u.Z.eps?h.Z.perpendicular(t[0],d,e)[0].usrCoords:d.coords.usrCoords)[1]+p[1]*c,d[2]-p[0]*c],i=[1,d[1]-p[1]*c,d[2]+p[0]*c],this.dataX=[r[1],r[1]+p[0]*n,i[1]+p[0]*n,i[1],r[1]],this.dataY=[r[2],r[2]+p[1]*n,i[2]+p[1]*n,i[2],r[2]]};else if(t[0].elementClass===s.Z.OBJECT_CLASS_CURVE&&"functiongraph"===t[0].visProp.curvetype)(n=e.create("curve",[[],[]],o)).updateDataArray=function(){var e,r,i,n,o,s,u,l,c,h=this.board.getBoundingBox(),d=[],p=t[0].minX(),f=t[0].maxX(),m=(h[1]-h[3])*.3;if(e=a.Z.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(n=t[0].points.length))for(h[1]+=m,h[3]-=m,i=-1;i<n-1;){for(o=i+1,r=n;o<n;o++)if(t[0].points[o].isReal()){r=o;break}if(r>=n)break;for(o=r,i=n-1;o<n-1;o++)if(!t[0].points[o+1].isReal()){i=o;break}for(l=t[0].points[r].usrCoords[1],c=t[0].points[i].usrCoords[1],s=h[0]<p?p:h[0],u=h[2]>f?f:h[2],s=0===r?s:Math.max(s,l),u=i===n-1?u:Math.min(u,c),s=0===r?p:l,u=i===n-1?f:c,(d=[]).push([1,s,h[e]]),d.push([1,s,t[0].points[r].usrCoords[2]]),o=r;o<=i;o++)d.push(t[0].points[o].usrCoords);for(d.push([1,u,t[0].points[i].usrCoords[2]]),d.push([1,u,h[e]]),d.push(d[0]),o=0;o<d.length;o++)this.dataX.push(d[o][1]),this.dataY.push(d[o][2]);i<n-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},n.hasPoint=function(){return!1};else if(i=a.Z.createFunction(t[0]),n.addParentsFromJCFunctions([i]),!a.Z.exists(i))throw Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return n.addParents(t[0]),n},n.Z.registerElement("arrowparallel",n.Z.createArrowParallel),n.Z.registerElement("bisector",n.Z.createBisector),n.Z.registerElement("bisectorlines",n.Z.createAngularBisectorsOfTwoLines),n.Z.registerElement("msector",n.Z.createMsector),n.Z.registerElement("circumcircle",n.Z.createCircumcircle),n.Z.registerElement("circumcirclemidpoint",n.Z.createCircumcenter),n.Z.registerElement("circumcenter",n.Z.createCircumcenter),n.Z.registerElement("incenter",n.Z.createIncenter),n.Z.registerElement("incircle",n.Z.createIncircle),n.Z.registerElement("integral",n.Z.createIntegral),n.Z.registerElement("midpoint",n.Z.createMidpoint),n.Z.registerElement("mirrorelement",n.Z.createMirrorElement),n.Z.registerElement("mirrorpoint",n.Z.createMirrorPoint),n.Z.registerElement("normal",n.Z.createNormal),n.Z.registerElement("orthogonalprojection",n.Z.createOrthogonalProjection),n.Z.registerElement("parallel",n.Z.createParallel),n.Z.registerElement("parallelpoint",n.Z.createParallelPoint),n.Z.registerElement("perpendicular",n.Z.createPerpendicular),n.Z.registerElement("perpendicularpoint",n.Z.createPerpendicularPoint),n.Z.registerElement("perpendicularsegment",n.Z.createPerpendicularSegment),n.Z.registerElement("reflection",n.Z.createReflection),n.Z.registerElement("grid",n.Z.createGrid),n.Z.registerElement("inequality",n.Z.createInequality),n.Z.createLocus=function(e,t,r){var i,n;if(a.Z.isArray(t)&&1===t.length&&a.Z.isPoint(t[0]))n=t[0];else throw Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return(i=e.create("curve",[[null],[null]],r)).dontCallServer=!1,i.elType="locus",i.setParents([n.id]),i.updateDataArray=function(){var t,r,o;i.board.mode>0||(t=D.generatePolynomials(e,n,!0).join("|"))===i.spe||(i.spe=t,r=function(e,t,r,n){i.dataX=e,i.dataY=t,i.eq=r,i.ctime=n,i.generatePolynomial=function(e){var t,i="("+e.symbolic.x+")",n="("+e.symbolic.y+")",o=[];for(t=0;t<r.length;t++)o[t]=r[t].replace(/\*\*/g,"^").replace(/x/g,i).replace(/y/g,n);return o}},o=D.geometricLocusByGroebnerBase(e,n,r),r(o.datax,o.datay,o.polynomial,o.exectime))},i},n.Z.registerElement("locus",n.Z.createLocus),r(58),n.Z.Image=function(e,t,r,i,o){this.constructor(e,r,s.Z.OBJECT_TYPE_IMAGE,s.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this.W=a.Z.createFunction(o[0],this.board,""),this.H=a.Z.createFunction(o[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*e.unitX),Math.abs(this.usrSize[1]*e.unitY)],this.url=i,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=n.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},n.Z.Image.prototype=new Y.Z,a.Z.copyPrototypeMethods(n.Z.Image,X.Z,"coordsConstructor"),n.Z.extend(n.Z.Image.prototype,{hasPoint:function(e,t){var r,i,n,o,l,c,h,d,p,f=this.transformations.length;return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,l=a.Z.evaluate(this.visProp.precision[o])):l=this.board.options.precision.hasPoint,0===f)?(r=e-this.coords.scrCoords[1],i=this.coords.scrCoords[2]-t,r>=-(n=l)&&r-this.size[0]<=n&&i>=-n&&i-this.size[1]<=n):(h=[(c=(c=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board)).usrCoords)[0]-this.span[0][0],c[1]-this.span[0][1],c[2]-this.span[0][2]],!!(0<=(d=(p=u.Z.innerProduct)(h,this.span[1]))&&d<=p(this.span[1],this.span[1])&&0<=(d=p(h,this.span[2]))&&d<=p(this.span[2],this.span[2])))},update:function(e){return this.needsUpdate&&(this.updateCoords(e),this.updateSize(),this.updateSpan()),this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var e,t,r=this.transformations.length,i=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(e=0,i[0]=[this.Z(),this.X(),this.Y()],i[1]=[this.Z(),this.X()+this.W(),this.Y()],i[2]=[this.Z(),this.X(),this.Y()+this.H()];e<r;e++)for(t=0;t<3;t++)i[t]=u.Z.matVecMult(this.transformations[e].matrix,i[t]);for(t=0;t<3;t++)i[t][1]/=i[t][0],i[t][2]/=i[t][0],i[t][0]/=i[t][0];for(t=1;t<3;t++)i[t][0]-=i[0][0],i[t][1]-=i[0][1],i[t][2]-=i[0][2];this.span=i}return this},addTransform:function(e){var t;if(a.Z.isArray(e))for(t=0;t<e.length;t++)this.transformations.push(e[t]);else this.transformations.push(e);return this},getParents:function(){var e=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(e=this.parents),e},setSize:function(e,t){return this.W=a.Z.createFunction(e,this.board,""),this.H=a.Z.createFunction(t,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),n.Z.createImage=function(e,t,r){var i,o,s=t[0],u=t[1],l=t[2];if(i=a.Z.copyAttributes(r,e.options,"image"),!(o=X.Z.create(n.Z.Image,e,u,i,s,l)))throw Error("JSXGraph: Can't create image with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==i.rotate&&o.addRotation(i.rotate),o},n.Z.registerElement("image",n.Z.createImage),n.Z.Image,n.Z.createSlider=function(e,t,r){var i,n,o,l,c,h,d,p,f,v,g,b,y,x,C,Z,_,w,E,N,S,A,P;return _=(P=a.Z.copyAttributes(r,e.options,"slider")).withticks,Z=P.withlabel,N=P.snapwidth,w=P.snapvalues,E=P.snapvaluedistance,P=a.Z.copyAttributes(r,e.options,"slider","point1"),d=e.create("point",t[0],P),P=a.Z.copyAttributes(r,e.options,"slider","point2"),p=e.create("point",t[1],P),P=a.Z.copyAttributes(r,e.options,"slider","baseline"),(v=e.create("segment",[d,p],P)).updateStdform(),i=d.coords.usrCoords.slice(1),n=p.coords.usrCoords.slice(1),o=t[2][0],l=t[2][1],h=(c=t[2][2])-o,A=-1===(S=a.Z.evaluate(N))?l:Math.round(l/S)*S,x=i[0]+(n[0]-i[0])*(A-o)/(c-o),C=i[1]+(n[1]-i[1])*(A-o)/(c-o),(P=a.Z.copyAttributes(r,e.options,"slider")).withLabel=!1,(f=e.create("glider",[x,C,v],P)).setAttribute({snapwidth:N,snapvalues:w,snapvaluedistance:E}),P=a.Z.copyAttributes(r,e.options,"slider","highline"),g=e.create("segment",[d,f],P),f.Value=function(){var e=this._smax-this._smin,t=a.Z.evaluate(this.visProp.snapwidth);return -1===t?this.position*e+this._smin:Math.round((this.position*e+this._smin)/t)*t},f.methodMap=a.Z.deepCopy(f.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),f._smax=c,f._smin=o,f.setMax=function(e){return this._smax=e,this},f.setValue=function(e){var t=this._smax-this._smin;return Math.abs(t)>u.Z.eps?this.position=(e-this._smin)/t:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},f.setMin=function(e){return this._smin=e,this},Z&&(P=a.Z.copyAttributes(r,e.options,"slider","label"),y=e.create("text",[function(){return(p.X()-d.X())*.05+p.X()},function(){return(p.Y()-d.Y())*.05+p.Y()},function(){var e,t=a.Z.evaluate(f.visProp.digits),r=a.Z.evaluate(f.visProp.suffixlabel),i=a.Z.evaluate(f.visProp.unitlabel),n=a.Z.evaluate(f.visProp.postlabel);return 2===t&&2!==a.Z.evaluate(f.visProp.precision)&&(t=a.Z.evaluate(f.visProp.precision)),e=null!==r?r:f.name&&""!==f.name?f.name+" = ":"",f.useLocale()?e+=f.formatNumberLocale(f.Value(),t):e+=a.Z.toFixed(f.Value(),t),null!==i&&(e+=i),null!==n&&(e+=n),e}],P),f.label=y,f.visProp.withlabel=!0,f.hasLabel=!0),f.point1=d,f.point2=p,f.baseline=v,f.highline=g,_&&(P=a.Z.copyAttributes(r,e.options,"slider","ticks"),a.Z.exists(P.generatelabeltext)||(P.generateLabelText=function(e,t,r){var i=f.point1.Dist(f.point2),n=f._smin,o=f._smax,s=this.getDistanceFromZero(t,e)*(o-n)/i+n;return i<u.Z.eps||Math.abs(s)<u.Z.eps?"0":this.formatLabelText(s)}),b=e.create("ticks",[f.baseline,f.point1.Dist(d)/2,function(e){var t=f.point1.Dist(f.point2),r=f.point1.coords.distance(s.Z.COORDS_BY_USER,e);return t<u.Z.eps?0:r/t*h+o}],P),f.ticks=b),f.remove=function(){Z&&e.removeObject(y),e.removeObject(g),e.removeObject(v),e.removeObject(p),e.removeObject(d),J.prototype.remove.call(f)},d.dump=!1,p.dump=!1,v.dump=!1,g.dump=!1,Z&&(y.dump=!1),f.elType="slider",f.parents=t,f.subs={point1:d,point2:p,baseLine:v,highLine:g},f.inherits.push(d,p,v,g),_&&(b.dump=!1,f.subs.ticks=b,f.inherits.push(b)),f.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},f.baseline.on("up",function(e){var t,r;a.Z.evaluate(f.visProp.moveonup)&&!a.Z.evaluate(f.visProp.fixed)&&(t=v.board.getMousePosition(e,0),r=new m.Z(s.Z.COORDS_BY_SCREEN,t,this.board),f.moveTo([r.usrCoords[1],r.usrCoords[2]]),f.triggerEventHandlers(["drag"],[e]))}),f.prepareUpdate().update(),!e.isSuspendedUpdate&&(f.updateVisibility().updateRenderer(),f.baseline.updateVisibility().updateRenderer(),f.highline.updateVisibility().updateRenderer(),_&&f.ticks.updateVisibility().updateRenderer()),f},n.Z.registerElement("slider",n.Z.createSlider),n.Z.PrefixParser={parse:function(e,t){var r,i,n,o,s,l;if(a.Z.isNumber(e)||a.Z.isString(e))return e;if(!a.Z.isArray(e)||e.length<2)throw Error("prefixParser.parse: term is not an array, number or string");if(r=e[0],n=e.length,"execute"===t){if(a.Z.isInArray(["+","-","*","/"],r))for(i=2,o=this.parse(e[1],t);i<n;i++)switch(l=this.parse(e[i],t),r){case"+":o+=l;break;case"-":o-=l;break;case"*":o*=l;break;case"/":o/=l}else if("exec"===r){for(i=2,s=e[1],l=[];i<n;i++)l.push(this.parse(e[i],t));if(a.Z.exists(Math[s]))o=Math[s].apply(this,l);else if(a.Z.exists(u.Z[s]))o=u.Z[s].apply(this,l);else throw Error("PrefixParser.parse: "+s+" is not allowed")}else{if("V"===(s=e[0])&&(s="Value"),!a.Z.exists(e[1][s]))throw Error("PrefixParser.parse: "+s+" is not a method of "+e[1]);for(i=2,l=[];i<n;i++)l.push(this.parse(e[i],t));o=e[1][s].apply(e[1],l)}}return o},dimension:function(e){var t,r,i,n,o,u,l,c;if(a.Z.isNumber(e))return 0;if(!a.Z.isArray(e)||e.length<2)throw Error("PrefixParser.dimension: term is not an array");if(t=e[0],i=e.length,a.Z.isInArray(["+","-","*","/"],t))for(r=2,n=this.dimension(e[1]);r<i;r++)switch(l=this.dimension(e[r]),t){case"+":case"-":l!==n&&(n=NaN);break;case"*":n+=l;break;case"/":n-=l}else if("exec"===t)e[2].type===a.Z.OBJECT_TYPE_MEASUREMENT?(n=e[2].Dimension(),a.Z.exists(e[2].visProp.dim)&&null!==(u=a.Z.evaluate(e[2].visProp.dim))&&(n=u)):n=0;else switch(o=e[0]){case"L":case"Length":case"Perimeter":case"Radius":case"R":n=1;break;case"Area":case"A":n=2;break;default:e[1].type===a.Z.OBJECT_TYPE_MEASUREMENT?(n=e[1].Dimension(),a.Z.exists(e[1].visProp.dim)&&null!==(u=a.Z.evaluate(e[1].visProp.dim))&&(n=u)):(n=0,("Value"===o||"V"===o)&&[s.Z.OBJECT_TYPE_ARC,s.Z.OBJECT_TYPE_SECTOR,s.Z.OBJECT_TYPE_ANGLE].indexOf(e[1].type)>=0&&(c="",3===e.length&&a.Z.isString(e[2])&&(c=e[2].toLowerCase()),n=""===c?e[1].type===s.Z.OBJECT_TYPE_ANGLE?0:1:0===c.indexOf("len")?1:0))}return n},toPrefix:function(e){var t,r,i,n;if(a.Z.isNumber(e))return e;if(!a.Z.isArray(e)||e.length<2)throw Error("PrefixParser.toPrefix: term is not an array");for(r=1,t=e[0],i=e.length,n=[t];r<i;r++)a.Z.isInArray(["+","-","*","/"],t)?n.push(this.toPrefix(e[r])):"V"===t&&e[r].type===a.Z.OBJECT_TYPE_MEASUREMENT?n=e[r].toPrefix():"exec"===t?1===r?n.push(e[r]):n.push(this.toPrefix(e[r])):n=[t,e[r].id];return n},getParents:function(e){var t,r,i,n;if(a.Z.isNumber(e))return[];if(!a.Z.isArray(e)||e.length<2)throw Error("PrefixParser.getParents: term is not an array");for(r=1,t=e[0],i=e.length,n=[];r<i;r++)a.Z.isInArray(["+","-","*","/"],t)?n=n.concat(this.getParents(e[r])):"V"===t&&e[r].type===a.Z.OBJECT_TYPE_MEASUREMENT?n=n.concat(e[r].getParents()):"exec"===t?r>1&&(n=n.concat(this.getParents(e[r]))):n.push(e[r]);return n}};var V=n.Z.PrefixParser;n.Z.createTapemeasure=function(e,t,r){var i,o,s,u,l,c,h,d,p,f;return i=t[0],o=t[1],s=a.Z.copyAttributes(r,e.options,"tapemeasure","point1"),h=e.create("point",i,s),s=a.Z.copyAttributes(r,e.options,"tapemeasure","point2"),d=e.create("point",o,s),h.setAttribute({ignoredSnapToPoints:[d]}),d.setAttribute({ignoredSnapToPoints:[h]}),u=(s=a.Z.copyAttributes(r,e.options,"tapemeasure")).withticks,l=s.withlabel,2===s.digits&&2!==s.precision&&s.precision,l&&(s.withlabel=!0),c=e.create("segment",[h,d],s),l&&(p=r.name&&""!==r.name?r.name+" = ":"",c.label.setText(function(){var e=a.Z.evaluate(c.label.visProp.digits);return c.label.useLocale()?p+c.label.formatNumberLocale(h.Dist(d),e):p+a.Z.toFixed(h.Dist(d),e)})),u&&(s=a.Z.copyAttributes(r,e.options,"tapemeasure","ticks"),f=e.create("ticks",[c,.1],s),c.inherits.push(f)),c.remove=function(){u&&c.removeTicks(f),e.removeObject(d),e.removeObject(h),Y.Z.prototype.remove.call(this)},c.Value=function(){return h.Dist(d)},h.dump=!1,d.dump=!1,c.elType="tapemeasure",c.getParents=function(){return[[h.X(),h.Y()],[d.X(),d.Y()]]},c.subs={point1:h,point2:d},u&&(f.dump=!1),c.methodMap=n.Z.deepCopy(c.methodMap,{Value:"Value"}),c.prepareUpdate().update(),e.isSuspendedUpdate||(c.updateVisibility().updateRenderer(),c.point1.updateVisibility().updateRenderer(),c.point2.updateVisibility().updateRenderer()),c},n.Z.registerElement("tapemeasure",n.Z.createTapemeasure),n.Z.createMeasurement=function(e,t,r){var i,n,o,s,u,l;for(n=a.Z.copyAttributes(r,e.options,"measurement"),o=t[0],s=t[1],u=t[2],(i=e.create("text",[o,s,""],n)).type=a.Z.OBJECT_TYPE_MEASUREMENT,i.elType="measurement",i.Value=function(){return V.parse(u,"execute")},i.Dimension=function(){var e=a.Z.evaluate(i.visProp.dim);return null!==e?e:V.dimension(u)},i.toInfix=function(e){return V.toInfix(u,e)},i.toPrefix=function(){return V.toPrefix(u)},i.getParents=function(){return V.getParents(u)},i.addParents(i.getParents()),l=0;l<i.parents.length;l++)e.select(i.parents[l]).addChild(i);return i.setText(function(){var e="",t="",r=i.Dimension(),n="",o=a.Z.evaluate(i.visProp.units),s=i.Value();return(a.Z.isNumber(s)&&(s=s.toFixed(a.Z.evaluate(i.visProp.digits))),a.Z.evaluate(i.visProp.showprefix)&&(e=a.Z.evaluate(i.visProp.prefix)),a.Z.evaluate(i.visProp.showsuffix)&&(t=a.Z.evaluate(i.visProp.suffix)),a.Z.isString(r))?e+s+t:isNaN(r)?e+"NaN"+t:(a.Z.isObject(o)&&a.Z.exists(o[r])?n=a.Z.evaluate(o[r]):a.Z.isObject(o)&&a.Z.exists(o["dim"+r])?n=a.Z.evaluate(o["dim"+r]):(n=a.Z.evaluate(i.visProp.baseunit),0===r?n="":r>1&&""!==n&&(n=n+"^{"+r+"}")),""!==n&&(n=" "+n),e+s+n+t)}),i.methodMap=a.Z.deepCopy(i.methodMap,{Value:"Value",Dimension:"Dimension",toPrefix:"toPrefix",getParents:"getParents"}),i},n.Z.registerElement("measurement",n.Z.createMeasurement),n.Z.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},n.Z.extend(n.Z.DataSource.prototype,{loadFromArray:function(e,t,r){var i,n,o;if(a.Z.isArray(t)&&(this.columnHeaders=t,t=!1),a.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],t&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),a.Z.exists(e)){for(i=0,this.data=[];i<e.length;i++)for(n=0,this.data[i]=[];n<e[i].length;n++)parseFloat(o=e[i][n]).toString()===o?this.data[i][n]=parseFloat(o):"-"!==o?this.data[i][n]=o:this.data[i][n]=NaN;if(t&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(i=0,this.rowHeaders=[];i<this.data.length;i++)this.rowHeaders.push(this.data[i][0]),this.data[i]=this.data[i].slice(1)}return this},loadFromTable:function(e,t,r){var i,n,o,s,u;if(a.Z.isArray(t)&&(this.columnHeaders=t,t=!1),a.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],t&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),e=document.getElementById(e),a.Z.exists(e)){for(n=0,i=e.getElementsByTagName("tr"),this.data=[];n<i.length;n++)for(o=0,s=i[n].getElementsByTagName("td"),this.data[n]=[];o<s.length;o++)parseFloat(u=s[o].innerHTML).toString()===u?this.data[n][o]=parseFloat(u):"-"!==u?this.data[n][o]=u:this.data[n][o]=NaN;if(t&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(n=0,this.rowHeaders=[];n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},addColumn:function(e,t,r){throw Error("not implemented")},addRow:function(e,t,r){throw Error("not implemented")},getColumn:function(e){var t,r=[];if(a.Z.isString(e)){for(t=0;t<this.columnHeaders.length;t++)if(e===this.columnHeaders[t]){e=t;break}}for(t=0;t<this.data.length;t++)this.data[t].length>e&&(r[t]=parseFloat(this.data[t][e]));return r},getRow:function(e){var t,r;if(a.Z.isString(e)){for(r=0;r<this.rowHeaders.length;r++)if(e===this.rowHeaders[r]){e=r;break}}for(r=0,t=[];r<this.data[e].length;r++)t[r]=this.data[e][r];return t}});var W=n.Z.DataSource;n.Z.Chart=function(e,t,r){var i,n,o,s,u,l;if(this.constructor(e,r),!a.Z.isArray(t)||0===t.length)throw Error("JSXGraph: Can't create a chart without data");if(this.elements=[],a.Z.isNumber(t[0]))for(o=0,n=t,i=[];o<n.length;o++)i[o]=o+1;else if(1===t.length&&a.Z.isArray(t[0]))for(o=0,n=t[0],i=[],l=a.Z.evaluate(n).length;o<l;o++)i[o]=o+1;else 2===t.length&&(l=Math.min(t[0].length,t[1].length),i=t[0].slice(0,l),n=t[1].slice(0,l));if(a.Z.isArray(n)&&0===n.length)throw Error("JSXGraph: Can't create charts without data.");for(o=0,u=r.chartstyle.replace(/ /g,"").split(",");o<u.length;o++){switch(u[o]){case"bar":s=this.drawBar(e,i,n,r);break;case"line":s=this.drawLine(e,i,n,r);break;case"fit":s=this.drawFit(e,i,n,r);break;case"spline":s=this.drawSpline(e,i,n,r);break;case"pie":s=this.drawPie(e,n,r);break;case"point":s=this.drawPoints(e,i,n,r);break;case"radar":s=this.drawRadar(e,t,r)}this.elements.push(s)}return this.id=this.board.setId(this,"Chart"),this.elements},n.Z.Chart.prototype=new Y.Z,n.Z.extend(n.Z.Chart.prototype,{drawLine:function(e,t,r,i){return i.fillcolor="none",i.highlightfillcolor="none",e.create("curve",[t,r],i)},drawSpline:function(e,t,r,i){return i.fillColor="none",i.highlightfillcolor="none",e.create("spline",[t,r],i)},drawFit:function(e,t,r,i){var n=i.degree;return n=Math.max(parseInt(n,10),1)||1,i.fillcolor="none",i.highlightfillcolor="none",e.create("functiongraph",[f.Z.regressionPolynomial(n,t,r)],i)},drawBar:function(e,t,r,i){var n,o,s,u,l,c,h,d,p,f,m=[],v=[],g=function(e,r){return function(){return t[e]()-r*s}},b={fixed:!0,withLabel:!1,visible:!1,name:""};if((p=a.Z.copyAttributes(i,e.options,"chart"))&&p.width)s=p.width;else{if(t.length<=1)s=1;else for(n=1,s=t[1]-t[0];n<t.length-1;n++)s=t[n+1]-t[n]<s?t[n+1]-t[n]:s;s*=.8}for(n=0,f=a.Z.copyAttributes(i,e.options,"chart","label");n<t.length;n++)a.Z.isFunction(t[n])?(u=g(n,-.5),l=g(n,0),c=g(n,.5)):(u=t[n]-.5*s,l=t[n],c=t[n]+.5*s),h=a.Z.isFunction(r[n])?r[n]():r[n],h=r[n],"horizontal"===p.dir?(v[0]=e.create("point",[0,u],b),v[1]=e.create("point",[h,u],b),v[2]=e.create("point",[h,c],b),v[3]=e.create("point",[0,c],b),a.Z.exists(p.labels)&&a.Z.exists(p.labels[n])&&(f.anchorY="middle",(o=e.create("text",[h,l,p.labels[n]],f)).visProp.anchorx=function(e){return function(){return e.X()>=0?"left":"right"}}(o))):(v[0]=e.create("point",[u,0],b),v[1]=e.create("point",[u,h],b),v[2]=e.create("point",[c,h],b),v[3]=e.create("point",[c,0],b),a.Z.exists(p.labels)&&a.Z.exists(p.labels[n])&&(f.anchorX="middle",(o=e.create("text",[l,h,p.labels[n]],f)).visProp.anchory=function(e){return function(){return e.Y()>=0?"bottom":"top"}}(o))),a.Z.isArray(p.colors)&&(d=p.colors,p.fillcolor=d[n%d.length]),m[n]=e.create("polygon",v,p),a.Z.exists(p.labels)&&a.Z.exists(p.labels[n])&&(m[n].text=o);return m},drawPoints:function(e,t,r,i){var n,o=[],s=i.infoboxarray;for(n=0,i.fixed=!0,i.name="";n<t.length;n++)i.infoboxtext=!!s&&s[n%s.length],o[n]=e.create("point",[t[n],r[n]],i);return o},drawPie:function(e,t,r){var i,n,o=[],u=[],l=(v.Z.sum(t),r.colors),c=r.highlightcolors,h=r.labels,d=r.radius||4,p=d,f=r.center||[0,0],g=f[0],b=f[1],y=function(e,r,i){return function(){var n,o,s,u=0;for(o=0;o<=e;o++)u+=parseFloat(a.Z.evaluate(t[o]));for(n=u,o=e+1;o<t.length;o++)n+=parseFloat(a.Z.evaluate(t[o]));return s=0!==n?2*Math.PI*u/n:0,p()*Math[r](s)+i}},x=function(e,t){var r=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],i=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];a.Z.exists(this.label)&&(this.label.rendNode.style.fontSize=t*a.Z.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new m.Z(s.Z.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+r*e,this.point1.coords.usrCoords[2]+i*e],this.board),this.fullUpdate()},C=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),x.call(this,1.1,2))},Z=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),x.call(this,.9090909,1))},_={fixed:!0,withLabel:!1,visible:!1,name:""};if(!a.Z.isArray(h))for(i=0,h=[];i<t.length;i++)h[i]="";for(a.Z.isFunction(d)||(p=function(){return d}),r.highlightonsector=r.highlightonsector||!1,r.straightfirst=!1,r.straightlast=!1,n=e.create("point",[g,b],_),o[0]=e.create("point",[function(){return p()+g},function(){return b}],_),i=0;i<t.length;i++)o[i+1]=e.create("point",[y(i,"cos",g),y(i,"sin",b)],_),r.name=h[i],r.withlabel=""!==r.name,r.fillcolor=l&&l[i%l.length],r.labelcolor=l&&l[i%l.length],r.highlightfillcolor=c&&c[i%c.length],u[i]=e.create("sector",[n,o[i],o[i+1]],r),r.highlightonsector&&(u[i].hasPoint=u[i].hasPointSector),r.highlightbysize&&(u[i].highlight=C,u[i].noHighlight=Z);return{sectors:u,points:o,midpoint:n}},drawRadar:function(e,t,r){var i,o,u,l,c,h,d,p,f,v,g,b,y,x,C,Z,_,w,E,N,S,A,P,D,M,O,T,B,F,R,k,L,I,j,z,U,Y,X,J,q,G,H,V=t.length,W=function(){var e,t,r,i,n=a.Z.evaluate(this.visProp.label.offset).slice(0);return e=this.point1.X(),t=this.point2.X(),r=this.point1.Y(),i=this.point2.Y(),t<e&&(n[0]=-n[0]),i<r&&(n[1]=-n[1]),this.setLabelRelativeCoords(n),new m.Z(s.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},$=function(t,r){var i,n,o;return i=e.create("transform",[-(C[r]-y[r]),0],{type:"translate"}),n=e.create("transform",[E/(Z[r]+x[r]-(C[r]-y[r])),1],{type:"scale"}),i.melt(n),o=e.create("transform",[t],{type:"rotate"}),i.melt(o),i};if(V<=0)throw Error("JSXGraph radar chart: no data");if(u=r.paramarray,!a.Z.exists(u))throw Error("JSXGraph radar chart: need paramArray attribute");if((l=u.length)<=1)throw Error("JSXGraph radar chart: need more than one param in paramArray");for(i=0;i<V;i++)if(l!==t[i].length)throw Error("JSXGraph radar chart: use data length equal to number of params ("+t[i].length+" != "+l+")");for(o=0,c=[],h=[];o<l;o++)c[o]=t[0][o],h[o]=c[o];for(i=1;i<V;i++)for(o=0;o<l;o++)t[i][o]>c[o]&&(c[o]=t[i][o]),t[i][o]<h[o]&&(h[o]=t[i][o]);for(i=0,d=[],p=[];i<V;i++)d[i]="",p[i]=[];for(i=0,f=[],v=[],g=r.startshiftratio||0,b=r.endshiftratio||0;i<l;i++)f[i]=(c[i]-h[i])*g,v[i]=(c[i]-h[i])*b;if(y=r.startshiftarray||f,x=r.endshiftarray||v,C=r.startarray||h,a.Z.exists(r.start))for(i=0;i<l;i++)C[i]=r.start;if(Z=r.endarray||c,a.Z.exists(r.end))for(i=0;i<l;i++)Z[i]=r.end;if(y.length!==l)throw Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(x.length!==l)throw Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(C.length!==l)throw Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(Z.length!==l)throw Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(_=r.labelarray||d,w=r.colors,r.highlightcolors,E=r.radius||10,G=r.strokewidth||1,a.Z.exists(r.highlightonsector)||(r.highlightonsector=!1),N={name:r.name,id:r.id,strokewidth:G,polystrokewidth:r.polystrokewidth||G,strokecolor:r.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:r.fillColor||"#FFFF88",fillopacity:r.fillOpacity||.4,highlightfillcolor:r.highlightFillColor||"#FF7400",highlightstrokecolor:r.highlightStrokeColor||"black",gradient:r.gradient||"none"},A=(S=r.center||[0,0])[0],P=S[1],D=e.create("point",[A,P],{name:"",fixed:!0,withlabel:!1,visible:!1}),M=Math.PI/2-Math.PI/l,O=M=r.startangle||0,T=[],B=[],i=0;i<l;i++)for(O+=2*Math.PI/l,R=E*Math.cos(O)+A,k=E*Math.sin(O)+P,T[i]=e.create("point",[R,k],{name:"",fixed:!0,withlabel:!1,visible:!1}),B[i]=e.create("line",[D,T[i]],{name:u[i],strokeColor:N.strokecolor,strokeWidth:N.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:N.highlightstrokecolor}),B[i].getLabelAnchor=W,F=$(O,i),o=0;o<t.length;o++)H=t[o][i],p[o][i]=e.create("point",[H,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),p[o][i].addTransform(p[o][i],F);for(i=0,L=[];i<V;i++)for(o=0,N.labelcolor=w&&w[i%w.length],N.strokecolor=w&&w[i%w.length],N.fillcolor=w&&w[i%w.length],L[i]=e.create("polygon",p[i],{withLines:!0,withLabel:!1,fillColor:N.fillcolor,fillOpacity:N.fillopacity,highlightFillColor:N.highlightfillcolor});o<l;o++)L[i].borders[o].setAttribute("strokecolor:"+w[i%w.length]),L[i].borders[o].setAttribute("strokewidth:"+N.polystrokewidth);switch(r.legendposition||"none"){case"right":j=r.legendleftoffset||2,z=r.legendtopoffset||1,this.legend=e.create("legend",[A+E+j,P+E-z],{labels:_,colors:w});break;case"none":break;default:n.Z.debug("Unknown legend position")}if(I=[],r.showcircles){for(i=0,U=[];i<6;i++)U[i]=20*i;if(U[0]="0",(X=(Y=r.circlelabelarray||U).length)<2)throw Error("JSXGraph radar chart: too less circles in circleLabelArray");for(i=0,J=[],F=$(M+Math.PI/l,0),N.fillcolor="none",N.highlightfillcolor="none",N.strokecolor=r.strokecolor||"black",N.strokewidth=r.circlestrokewidth||.5,N.layer=0,q=(Z[0]-C[0])/(X-1);i<X;i++)J[i]=e.create("point",[C[0]+i*q,0],{name:Y[i],size:0,fixed:!0,withLabel:!0,visible:!0}),J[i].addTransform(J[i],F),I[i]=e.create("circle",[D,J[i]],N)}return this.rendNode=L[0].rendNode,{circles:I,lines:B,points:p,midpoint:D,polygons:L}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),n.Z.createChart=function(e,t,r){var i,s,u,l,c,h,d,p,f,m,v,g,b,y,x,C,Z=[],_=o.Z.isBrowser?e.document.getElementById(t[0]):null;if(1===t.length&&a.Z.isString(t[0])){if(a.Z.exists(_)){if(f=a.Z.copyAttributes(r,e.options,"chart"),i=(_=new W().loadFromTable(t[0],f.withheaders,f.withheaders)).data,c=_.columnHeaders,s=_.rowHeaders,m=f.width,v=f.name,g=f.strokecolor,b=f.fillcolor,y=f.highlightstrokecolor,x=f.highlightfillcolor,e.suspendUpdate(),C=i.length,p=[],f.rows&&a.Z.isArray(f.rows)){for(u=0;u<C;u++)for(l=0;l<f.rows.length;l++)if(f.rows[l]===u||f.withheaders&&f.rows[l]===s[u]){p.push(i[u]);break}}else p=i;for(u=0,C=p.length;u<C;u++){if(d=[],f.chartstyle&&-1!==f.chartstyle.indexOf("bar")){for(h=m||.8,d.push(1-h/2+(u+.5)*h/C),l=1;l<p[u].length;l++)d.push(d[l-1]+1);f.width=h/C}v&&v.length===C?f.name=v[u]:f.withheaders&&(f.name=c[u]),g&&g.length===C?f.strokecolor=g[u]:f.strokecolor=R.Z.hsv2rgb((u+1)/C*360,.9,.6),b&&b.length===C?f.fillcolor=b[u]:f.fillcolor=R.Z.hsv2rgb((u+1)/C*360,.9,1),y&&y.length===C?f.highlightstrokecolor=y[u]:f.highlightstrokecolor=R.Z.hsv2rgb((u+1)/C*360,.9,1),x&&x.length===C?f.highlightfillcolor=x[u]:f.highlightfillcolor=R.Z.hsv2rgb((u+1)/C*360,.9,.6),f.chartstyle&&-1!==f.chartstyle.indexOf("bar")?Z.push(new n.Z.Chart(e,[d,p[u]],f)):Z.push(new n.Z.Chart(e,[p[u]],f))}e.unsuspendUpdate()}return Z}return f=a.Z.copyAttributes(r,e.options,"chart"),new n.Z.Chart(e,t,f)},n.Z.registerElement("chart",n.Z.createChart),n.Z.Legend=function(e,t,r){var i;if(this.constructor(),i=a.Z.copyAttributes(r,e.options,"legend"),this.board=e,this.coords=new m.Z(s.Z.COORDS_BY_USER,t,this.board),this.myAtts={},this.label_array=i.labelarray||i.labels,this.color_array=i.colorarray||i.colors,this.lines=[],this.myAtts.strokewidth=i.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=i.legendstyle||i.style,"vertical"===this.style)this.drawVerticalLegend(e,i);else throw Error("JSXGraph: Unknown legend style: "+this.style)},n.Z.Legend.prototype=new Y.Z,n.Z.Legend.prototype.drawVerticalLegend=function(e,t){var r,i=t.linelength||1,n=(t.rowheight||20)/this.board.unitY,o=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new m.Z(s.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(r=0;r<this.label_array.length;r++)this.myAtts.name=this.label_array[r],this.myAtts.strokecolor=this.color_array[r%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[r%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[r%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[r]=e.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-r*n],[this.coords.usrCoords[1]+i,this.coords.usrCoords[2]-r*n]],this.myAtts),this.lines[r].getLabelAnchor=o,this.lines[r].prepareUpdate().update().updateVisibility(a.Z.evaluate(this.lines[r].visProp.visible)).updateRenderer()},n.Z.createLegend=function(e,t,r){var i=[0,0];if(a.Z.exists(t)&&2===t.length)i=t;else throw Error("JSXGraph: Legend element needs two numbers as parameters");return new n.Z.Legend(e,i,r)},n.Z.registerElement("legend",n.Z.createLegend),n.Z.Chart,n.Z.Legend,n.Z.Transformation=function(e,t,r){this.elementClass=s.Z.OBJECT_CLASS_OTHER,this.type=s.Z.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=e,this.isNumericMatrix=!1,this.setMatrix(e,t,r),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},n.Z.Transformation.prototype={},n.Z.extend(n.Z.Transformation.prototype,{update:function(){return this},setMatrix:function(e,t,r){var i;for(i=0,this.isNumericMatrix=!0;i<r.length;i++)if("number"!=typeof r[i]){this.isNumericMatrix=!1;break}if("translate"===t){if(2!==r.length)throw Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===t){if(2!==r.length)throw Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===t)r.length<4&&(r[0]=e.select(r[0])),2===r.length&&(r[1]=e.select(r[1])),4===r.length&&(this.evalParam=a.Z.createEvalFunction(e,r,4)),this.update=function(){var e,t,i,n,o,s,a,l;1===r.length?a=r[0].stdform:2===r.length?a=u.Z.crossProduct(r[1].coords.usrCoords,r[0].coords.usrCoords):4===r.length&&(a=u.Z.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),e=a[1],t=a[2],s=(l=[-(i=a[0])*e,-i*t,e*e+t*t])[2],n=l[0]/l[2],o=l[1]/l[2],e=-a[2],t=a[1],this.matrix[1][1]=(e*e-t*t)/s,this.matrix[1][2]=2*e*t/s,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=n*(1-this.matrix[1][1])-o*this.matrix[1][2],this.matrix[2][0]=o*(1-this.matrix[2][2])-n*this.matrix[2][1]};else if("rotate"===t)3===r.length?this.evalParam=a.Z.createEvalFunction(e,r,3):r.length>0&&r.length<=2&&(this.evalParam=a.Z.createEvalFunction(e,r,1),2!==r.length||a.Z.isArray(r[1])||(r[1]=e.select(r[1]))),this.update=function(){var e,t,i=this.evalParam(0),n=Math.cos(i),o=Math.sin(i);this.matrix[1][1]=n,this.matrix[1][2]=-o,this.matrix[2][1]=o,this.matrix[2][2]=n,r.length>1&&(3===r.length?(e=this.evalParam(1),t=this.evalParam(2)):a.Z.isArray(r[1])?(e=r[1][0],t=r[1][1]):(e=r[1].X(),t=r[1].Y()),this.matrix[1][0]=e*(1-n)+t*o,this.matrix[2][0]=t*(1-n)-e*o)};else if("shear"===t){if(2!==r.length)throw Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===t){if(9!==r.length)throw Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=a.Z.createEvalFunction(e,r,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(e,t){return(this.update(),a.Z.exists(t))?u.Z.matVecMult(this.matrix,e.initialCoords.usrCoords):u.Z.matVecMult(this.matrix,e.coords.usrCoords)},applyOnce:function(e){var t,r,i;for(a.Z.isArray(e)||(e=[e]),r=e.length,i=0;i<r;i++)this.update(),t=u.Z.matVecMult(this.matrix,e[i].coords.usrCoords),e[i].coords.setCoordinates(s.Z.COORDS_BY_USER,t)},bindTo:function(e){var t,r;if(a.Z.isArray(e))for(t=0,r=e.length;t<r;t++)e[t].transformations.push(this);else e.transformations.push(this)},setProperty:function(e){n.Z.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(e){},melt:function(e){var t,r,i,n,o,s,a=[];for(t=0,r=e.matrix.length,i=this.matrix[0].length;t<r;t++)a[t]=[];for(this.update(),e.update(),t=0;t<r;t++)for(s=0;s<i;s++){for(n=0,o=0;n<r;n++)o+=e.matrix[t][n]*this.matrix[n][s];a[t][s]=o}return this.update=function(){var e=this.matrix.length,r=this.matrix[0].length;for(t=0;t<e;t++)for(s=0;s<r;s++)this.matrix[t][s]=a[t][s]},this},getParents:function(){var e=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(e=this.parents),e}}),n.Z.createTransform=function(e,t,r){return new n.Z.Transformation(e,r.type,t)},n.Z.registerElement("transform",n.Z.createTransform),n.Z.Transformation,n.Z.Turtle=function(e,t,r){var i,n,o;return this.constructor(e,r,s.Z.OBJECT_TYPE_TURTLE,s.Z.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=e,this.visProp.curveType="plot",this._attributes=a.Z.copyAttributes(this.visProp,e.options,"turtle"),delete this._attributes.id,i=0,n=0,o=90,0!==t.length&&(3===t.length?(i=t[0],n=t[1],o=t[2]):2===t.length?a.Z.isArray(t[0])?(i=t[0][0],n=t[0][1],o=t[1]):(i=t[0],n=t[1]):(i=t[0][0],n=t[0][1])),this.init(i,n,o),this.methodMap=a.Z.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",getPenColor:"getPenColor",getHighlightPenColor:"getHighlightPenColor",getPenSize:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},n.Z.Turtle.prototype=new Y.Z,n.Z.extend(n.Z.Turtle.prototype,{init:function(e,t,r){var i={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/u.Z.hypot(this.board.unitX,this.board.unitY),this.pos=[e,t],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,i),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],i),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-r),this.board.update()},forward:function(e){if(0===e)return this;var t,r=e*Math.cos(this.dir*Math.PI/180),i=e*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((t=this.board.create("transform",[r,i],{type:"translate"})).applyOnce(this.turtle),t.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=r,this.pos[1]+=i,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(e){return this.forward(-e)},right:function(e){return this.dir-=e,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-e*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(e){return this.right(-e)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var e,t;for(e=0;e<this.objects.length;e++)(t=this.objects[e]).type===s.Z.OBJECT_TYPE_CURVE&&(this.board.removeObject(t),this.objects.splice(e,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var e,t,r=this.objects.length;for(e=0;e<r;e++)t=this.objects[e],this.board.removeObject(t);return this.init(0,0,90),this},setPos:function(e,t){return a.Z.isArray(e)?this.pos=e:this.pos=[e,t],this.turtleIsHidden||(this.turtle.setPositionDirectly(s.Z.COORDS_BY_USER,[e,t]),this.turtle2.setPositionDirectly(s.Z.COORDS_BY_USER,[e,t+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",e)),this.objects.push(this.curve),this},setPenColor:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",e)),this.objects.push(this.curve),this},getPenAttribute:function(e){var t=this.objects.length;return a.Z.evaluate(this.objects[4===t?0:t-1].visProp[e])},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",e)),this.objects.push(this.curve),this},setAttribute:function(e){var t,r,i,n=this.objects.length;for(t=0;t<n;t++)(r=this.objects[t]).type===s.Z.OBJECT_TYPE_CURVE&&r.setAttribute(e);return i=this.visProp.id,this.visProp=a.Z.deepCopy(this.curve.visProp),this.visProp.id=i,this._attributes=a.Z.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(e,t){return this._attributes[e.toLowerCase()]=t,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var e=this.stack.pop();return this.pos[0]=e[0],this.pos[1]=e[1],this.dir=e[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(e){var t,r,i,n;return a.Z.isArray(e)?(t=this.pos[0],r=this.pos[1],i=e[0],n=Math.atan2(e[1]-r,i-t),this.right(this.dir-180*n/Math.PI)):a.Z.isNumber(e)&&this.right(this.dir-e),this},moveTo:function(e){var t,r,i;return a.Z.isArray(e)&&(t=e[0]-this.pos[0],r=e[1]-this.pos[1],this.turtleIsHidden||((i=this.board.create("transform",[t,r],{type:"translate"})).applyOnce(this.turtle),i.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=e[0],this.pos[1]=e[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(e){return this.forward(e)},bk:function(e){return this.back(e)},lt:function(e){return this.left(e)},rt:function(e){return this.right(e)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(e,t){var r,i,n,o,a=this.objects.length;for(r=0,i=0;r<a;r++)if((n=this.objects[r]).elementClass===s.Z.OBJECT_CLASS_CURVE){if(i<=e&&e<i+n.numberPoints)return o=e-i,n[t](o);i+=n.numberPoints}return this[t]()},X:function(e){return a.Z.exists(e)?this.evalAt(e,"X"):this.pos[0]},Y:function(e){return a.Z.exists(e)?this.evalAt(e,"Y"):this.pos[1]},Z:function(e){return 1},minX:function(){return 0},maxX:function(){var e,t=this.objects.length,r=0;for(e=0;e<t;e++)this.objects[e].elementClass===s.Z.OBJECT_CLASS_CURVE&&(r+=this.objects[e].numberPoints);return r},hasPoint:function(e,t){var r,i;for(r=0;r<this.objects.length;r++)if((i=this.objects[r]).type===s.Z.OBJECT_TYPE_CURVE&&i.hasPoint(e,t))return!0;return!1}}),n.Z.createTurtle=function(e,t,r){var i;return t=t||[],i=a.Z.copyAttributes(r,e.options,"turtle"),new n.Z.Turtle(e,t,i)},n.Z.registerElement("turtle",n.Z.createTurtle),n.Z.Turtle,n.Z.Ticks=function(e,t,r){if(this.constructor(e.board,r,s.Z.OBJECT_TYPE_TICKS,s.Z.OBJECT_CLASS_OTHER),this.line=e,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],a.Z.isFunction(t))throw this.ticksFunction=t,Error("Function arguments are no longer supported.");a.Z.isArray(t)?this.fixedTicks=t:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},n.Z.Ticks.prototype=new Y.Z,n.Z.extend(n.Z.Ticks.prototype,{hasPoint:function(e,t){var r,i,n,o,l=this.ticks&&this.ticks.length||0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,n=a.Z.evaluate(this.visProp.precision[o])):n=this.board.options.precision.hasPoint,n+=.5*a.Z.evaluate(this.visProp.strokewidth),!a.Z.evaluate(this.line.visProp.scalable)||this.line.elementClass===s.Z.OBJECT_CLASS_CURVE||0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==s.Z.OBJECT_TYPE_AXIS)return!1;for(r=0;r<l;r++)if((i=this.ticks[r])[2]&&!(0===this.line.stdform[1]&&Math.abs(i[0][0]-this.line.point1.coords.scrCoords[1])<u.Z.eps||0===this.line.stdform[2]&&Math.abs(i[1][0]-this.line.point1.coords.scrCoords[2])<u.Z.eps)&&(Math.abs(i[0][0]-i[0][1])>=1||Math.abs(i[1][0]-i[1][1])>=1)){if(0===this.line.stdform[1]){if(Math.abs(t-this.line.point1.coords.scrCoords[2])<2*n&&i[0][0]-n<e&&e<i[0][1]+n)return!0}else if(0===this.line.stdform[2]&&Math.abs(e-this.line.point1.coords.scrCoords[1])<2*n&&i[1][0]-n<t&&t<i[1][1]+n)return!0}return!1},setPositionDirectly:function(e,t,r){var i,n,o=new m.Z(e,t,this.board),l=new m.Z(e,r,this.board),c=this.board.getBoundingBox();return this.line.type===s.Z.OBJECT_TYPE_AXIS&&a.Z.evaluate(this.line.visProp.scalable)&&(Math.abs(this.line.stdform[1])<u.Z.eps&&Math.abs(o.usrCoords[1]*l.usrCoords[1])>u.Z.eps?(i=l.usrCoords[1]/o.usrCoords[1],c[0]*=i,c[2]*=i,this.board.setBoundingBox(c,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<u.Z.eps&&Math.abs(o.usrCoords[2]*l.usrCoords[2])>u.Z.eps&&(n=l.usrCoords[2]/o.usrCoords[2],c[3]*=n,c[1]*=n,this.board.setBoundingBox(c,this.board.keepaspectratio,"update"))),this},calculateTicksCoordinates:function(){var e,t,r,i;if(!(this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<u.Z.eps&&Math.abs(this.dy)<u.Z.eps)))return e=this.getZeroCoordinates(),t=this.line.elementClass===s.Z.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(e,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},"polar"===a.Z.evaluate(this.visProp.type)&&(i=this.board.getBoundingBox(),r=Math.max(u.Z.hypot(i[0],i[1]),u.Z.hypot(i[2],i[3])),t.upper=r),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(e,t):this.generateFixedTicks(e,t),this},setTicksSizeVariables:function(e){var t,r,i,n,o=.5*a.Z.evaluate(this.visProp.majorheight),s=.5*a.Z.evaluate(this.visProp.minorheight);a.Z.exists(e)?(r=this.line.minX(),i=this.line.maxX(),(n=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):u.Z.relDif(e,r)<u.Z.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):u.Z.relDif(e,i)<u.Z.eps?(this.dxMaj=this.line.points[n-2].usrCoords[2]-this.line.points[n-1].usrCoords[2],this.dyMaj=this.line.points[n-1].usrCoords[1]-this.line.points[n-2].usrCoords[1]):(this.dxMaj=-f.Z.D(this.line.Y)(e),this.dyMaj=f.Z.D(this.line.X)(e))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,t=u.Z.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=o/t*this.board.unitX,this.dyMaj*=o/t*this.board.unitY,this.dxMin*=s/t*this.board.unitX,this.dyMin*=s/t*this.board.unitY,this.minStyle=0>a.Z.evaluate(this.visProp.minorheight)?"infinite":"finite",this.majStyle=0>a.Z.evaluate(this.visProp.majorheight)?"infinite":"finite"},getZeroCoordinates:function(){var e,t,r,i,n,o,u,l,c=a.Z.evaluate(this.visProp.anchor);return this.line.elementClass===s.Z.OBJECT_CLASS_LINE?this.line.type===s.Z.OBJECT_TYPE_AXIS?h.Z.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(r=this.line.point1.coords.usrCoords[0],e=this.line.point1.coords.usrCoords[1],t=this.line.point1.coords.usrCoords[2],o=this.line.point2.coords.usrCoords[0],i=this.line.point2.coords.usrCoords[1],n=this.line.point2.coords.usrCoords[2],"right"===c)?this.line.point2.coords:"middle"===c?new m.Z(s.Z.COORDS_BY_USER,[(r+o)*.5,(e+i)*.5,(t+n)*.5],this.board):a.Z.isNumber(c)?new m.Z(s.Z.COORDS_BY_USER,[r+(o-r)*c,e+(i-e)*c,t+(n-t)*c],this.board):this.line.point1.coords:(u=this.line.minX(),l=this.line.maxX(),"right"===c?l:"middle"===c?(u+l)*.5:a.Z.isNumber(c)?u*(1-c)+l*c:u)},getLowerAndUpperBounds:function(e,t){var r,i,n,o,l,c,d,p,f,v,g,b,y,x,C,Z,_=10*u.Z.eps,w=a.Z.evaluate(this.line.visProp.straightfirst),E=a.Z.evaluate(this.line.visProp.straightlast),N=a.Z.evaluate(this.visProp.includeboundaries);return this.line.elementClass===s.Z.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(l=new m.Z(s.Z.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),c=new m.Z(s.Z.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),d=Math.abs(l.usrCoords[0])>=u.Z.eps&&l.scrCoords[1]>=0&&l.scrCoords[1]<=this.board.canvasWidth&&l.scrCoords[2]>=0&&l.scrCoords[2]<=this.board.canvasHeight,p=Math.abs(c.usrCoords[0])>=u.Z.eps&&c.scrCoords[1]>=0&&c.scrCoords[1]<=this.board.canvasWidth&&c.scrCoords[2]>=0&&c.scrCoords[2]<=this.board.canvasHeight,a.Z.exists(t)&&"ticksdistance"===t?(h.Z.calcStraight(this.line,l,c,0),C=this.getDistanceFromZero(e,l),Z=this.getDistanceFromZero(e,c),h.Z.calcStraight(this.line,l,c,a.Z.evaluate(this.line.visProp.margin)),C=this.getDistanceFromZero(e,l)-C,Z=this.getDistanceFromZero(e,c).m2):h.Z.calcLineDelimitingPoints(this.line,l,c),(b=((b=Math.atan2(this.line.point2.Y()-this.line.point1.Y(),this.line.point2.X()-this.line.point1.X()))+2*Math.PI)%(2*Math.PI))>.5*Math.PI&&b<3*Math.PI*.5&&(l.usrCoords[1]*=-1,c.usrCoords[1]*=-1,l.usr2screen(),c.usr2screen()),b>Math.PI&&b<2*Math.PI&&(l.usrCoords[2]*=-1,c.usrCoords[2]*=-1,l.usr2screen(),c.usr2screen()),n=a.Z.evaluate(this.line.visProp.firstarrow),o=a.Z.evaluate(this.line.visProp.lastarrow),y=this.getDistanceFromZero(e,l),x=this.getDistanceFromZero(e,c),(n||o)&&(g=this.board.renderer.getArrowHeadData(this.line,a.Z.evaluate(this.line.visProp.strokewidth),""),this.board.renderer.getPositionArrowHead(this.line,l,c,g)),f=this.getDistanceFromZero(e,l),v=this.getDistanceFromZero(e,c),y=f-y,x=f-x,f<v?(r=f,i=v,w||!d||N||(r+=_),E||!p||N||(i-=_)):v<f?(r=v,i=f,E||!p||N||(r+=_),w||!d||N||(i-=_)):(r=0,i=0),{lower:r,upper:i,a1:y,a2:x,m1:C,m2:Z})},getDistanceFromZero:function(e,t){var r,i,n,o,a;return r=this.line.point1.coords,i=this.line.point2.coords,a=e.distance(s.Z.COORDS_BY_USER,t),n=[i.usrCoords[0]-r.usrCoords[0],i.usrCoords[1]-r.usrCoords[1],i.usrCoords[2]-r.usrCoords[2]],o=[t.usrCoords[0]-e.usrCoords[0],t.usrCoords[1]-e.usrCoords[1],t.usrCoords[2]-e.usrCoords[2]],0>u.Z.innerProduct(n,o,3)&&(a*=-1),a},generateEquidistantTicks:function(e,t){var r,i,n,o=u.Z.eps,l=a.Z.evaluate(this.visProp.minorticks);if(n=this.getDistanceMajorTicks(),this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(i=this.getXandYdeltas()),n*=a.Z.evaluate(this.visProp.scale),n/=l+1,this.ticksDelta=n,!(n<u.Z.eps)){for(r=0,a.Z.evaluate(this.visProp.drawzero)||(r=n);r<=t.upper+o&&(r>=t.lower-o&&this.processTickPosition(e,r,n,i),r+=n,!(t.upper-r>1e4*n)););for(r=-n;r>=t.lower-o&&(r<=t.upper+o&&this.processTickPosition(e,r,n,i),!((r-=n)-t.lower>1e4*n)););}},getDistanceMajorTicks:function(){var e,t,r,i,n,o,s,l;return a.Z.evaluate(this.visProp.insertticks)?(o=((r=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-r.lower)/6/(n=a.Z.evaluate(this.visProp.scale)),s=a.Z.evaluate(this.visProp.minticksdistance)/n,l=a.Z.evaluate(this.visProp.minorticks),i=this.getXandYdeltas(),i.x*=this.board.unitX,i.y*=this.board.unitY,s/=u.Z.hypot(i.x,i.y),s*=l+1,2*(e=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)))>=s?e*=2:5*e>=s&&(e*=5),5*(t=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)))<o?t*=5:2*t<o&&(t*=2),e=Math.max(e,t)):a.Z.evaluate(this.visProp.ticksdistance)},processTickPosition:function(e,t,r,i){var n,o,u,l,c,h=a.Z.evaluate(this.visProp.ticksperlabel),d=null;this.line.elementClass===s.Z.OBJECT_CLASS_LINE?(n=e.usrCoords[1]+t*i.x,o=e.usrCoords[2]+t*i.y):(n=this.line.X(e+t),o=this.line.Y(e+t)),u=new m.Z(s.Z.COORDS_BY_USER,[n,o],this.board),this.line.elementClass===s.Z.OBJECT_CLASS_CURVE&&(d=e+t,this.setTicksSizeVariables(d)),u.major=Math.round(t/r)%(a.Z.evaluate(this.visProp.minorticks)+1)==0,h||(h=a.Z.evaluate(this.visProp.minorticks)+1),c=Math.round(t/r)%h==0,3===(l=this.createTickPath(u,u.major)).length&&(this.ticks.push(l),c&&a.Z.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(u,e,d),u,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(e,t){var r,i,n,o,l,c,h,d,p=u.Z.eps,f=a.Z.isArray(this.visProp.labels),v=a.Z.evaluate(this.visProp.drawlabels);for(this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(d=this.getXandYdeltas()),n=0;n<this.fixedTicks.length;n++)this.line.elementClass===s.Z.OBJECT_CLASS_LINE?(h=this.fixedTicks[n],l=e.usrCoords[1]+h*d.x,c=e.usrCoords[2]+h*d.y):(h=e+this.fixedTicks[n],l=this.line.X(h),c=this.line.Y(h)),r=new m.Z(s.Z.COORDS_BY_USER,[l,c],this.board),this.line.elementClass===s.Z.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(h),3===(o=this.createTickPath(r,!0)).length&&h>=t.lower-p&&h<=t.upper+p&&(this.ticks.push(o),v&&(f||a.Z.exists(this.visProp.labels[n]))?(i=f?a.Z.evaluate(this.visProp.labels[n]):h,this.labelsData.push(this.generateLabelData(this.generateLabelText(r,e,i),r,n))):this.labelsData.push(null))},getXandYdeltas:function(){var e,t,r=this.line.point1.Dist(this.line.point2);return this.line.type===s.Z.OBJECT_TYPE_AXIS?(e=this.line.point1.coords.usrCoords,t=this.line.point2.coords.usrCoords,(e[1]>t[1]||Math.abs(e[1]-t[1])<u.Z.eps&&e[2]>t[2])&&(e=this.line.point2.coords.usrCoords,t=this.line.point1.coords.usrCoords)):(e=this.line.point1.coords.usrCoords,t=this.line.point2.coords.usrCoords),{x:(t[1]-e[1])/r,y:(t[2]-e[2])/r}},_isInsideCanvas:function(e,t,r){var i=this.board.canvasWidth,n=this.board.canvasHeight;return void 0===r&&(r=0),e[0]>=r&&e[0]<=i-r&&t[0]>=r&&t[0]<=n-r||e[1]>=r&&e[1]<=i-r&&t[1]>=r&&t[1]<=n-r},createTickPath:function(e,t){var r,i,n,o,s,l,c,d,p,f,m,v,g,b,y,x,C,Z=[-2e6,-2e6],_=[-2e6,-2e6];if(r=e.scrCoords,t?(o=this.dxMaj,s=this.dyMaj,p=this.majStyle,y=a.Z.evaluate(this.visProp.majortickendings[0])>0,x=a.Z.evaluate(this.visProp.majortickendings[1])>0):(o=this.dxMin,s=this.dyMin,p=this.minStyle,y=a.Z.evaluate(this.visProp.tickendings[0])>0,x=a.Z.evaluate(this.visProp.tickendings[1])>0),i=[-s*r[1]-o*r[2],s,o],t&&"polar"===a.Z.evaluate(this.visProp.type)){if(v=this.board.getBoundingBox(),b=(g=2*Math.PI)/180,r=e.usrCoords,(m=u.Z.hypot(r[1],r[2]))<Math.max(u.Z.hypot(v[0],v[1]),u.Z.hypot(v[2],v[3]))){for(f=0,Z=[],_=[];f<=g;f+=b)Z.push(this.board.origin.scrCoords[1]+m*Math.cos(f)*this.board.unitX),_.push(this.board.origin.scrCoords[2]+m*Math.sin(f)*this.board.unitY);return[Z,_,t]}}else{if("infinite"===p){if(a.Z.evaluate(this.visProp.ignoreinfinitetickendings)&&(y=x=!0),n=h.Z.meetLineBoard(i,this.board),y&&x)Z[0]=n[0].scrCoords[1],Z[1]=n[1].scrCoords[1],_[0]=n[0].scrCoords[2],_[1]=n[1].scrCoords[2];else if((C=[u.Z.innerProduct(n[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],u.Z.innerProduct(n[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<C[1]&&(n.reverse(),C.reverse()),y){if(C[0]<0)return[];C[1]<0?(Z[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2],Z[1]=r[1],_[1]=r[2]):(Z[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2],Z[1]=n[1].scrCoords[1],_[1]=n[1].scrCoords[2])}else if(x){if(C[1]>0)return[];C[0]>0?(Z[0]=r[1],_[0]=r[2]):(Z[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2]),Z[1]=n[1].scrCoords[1],_[1]=n[1].scrCoords[2]}}else l=Math.cos(d=">"===a.Z.evaluate(this.visProp.face)?Math.PI/4:"<"===a.Z.evaluate(this.visProp.face)?-Math.PI/4:0)*o-Math.sin(d)*s,c=Math.sin(d)*o+Math.cos(d)*s,Z[0]=r[1]+l*y,_[0]=r[2]-c*y,Z[1]=r[1],_[1]=r[2],l=Math.cos(d=-d)*o-Math.sin(d)*s,c=Math.sin(d)*o+Math.cos(d)*s,Z[2]=r[1]-l*x,_[2]=r[2]+c*x;if(this._isInsideCanvas(Z,_))return[Z,_,t]}return[]},formatLabelText:function(e){var t,r,i=a.Z.evaluate(this.visProp.scalesymbol);return a.Z.isNumber(e)?(r=a.Z.evaluate(this.visProp.digits),this.useLocale()?t=this.formatNumberLocale(e,r):((t=(Math.round(1e11*e)/1e11).toString()).length>a.Z.evaluate(this.visProp.maxlabellength)||-1!==t.indexOf("e"))&&(3!==a.Z.evaluate(this.visProp.precision)&&3===r&&(r=a.Z.evaluate(this.visProp.precision)),t=e.toExponential(r).toString()),a.Z.evaluate(this.visProp.beautifulscientificticklabels)&&(t=this.beautifyScientificNotationLabel(t)),t.indexOf(".")>-1&&-1===t.indexOf("e")&&(t=(t=t.replace(/0+$/,"")).replace(/\.$/,""))):t=e.toString(),i.length>0&&("1"===t?t=i:"-1"===t?t="-"+i:"0"!==t&&(t+=i)),a.Z.evaluate(this.visProp.useunicodeminus)&&(t=t.replace(/-/g,"−")),t},beautifyScientificNotationLabel:function(e){return -1===e.indexOf("e")?e:(parseFloat(e.substring(0,e.indexOf("e")))+e.substring(e.indexOf("e"))).replace(/e(.*)$/g,function(e,t){return"•10"+t.replace(/-/g,"⁻").replace(/\+/g,"").replace(/0/g,"⁰").replace(/1/g,"\xb9").replace(/2/g,"\xb2").replace(/3/g,"\xb3").replace(/4/g,"⁴").replace(/5/g,"⁵").replace(/6/g,"⁶").replace(/7/g,"⁷").replace(/8/g,"⁸").replace(/9/g,"⁹")})},generateLabelText:function(e,t,r){var i;if(!a.Z.exists(r)){if(Math.abs(i=this.getDistanceFromZero(t,e))<u.Z.eps)return"0";r=i/a.Z.evaluate(this.visProp.scale)}return this.formatLabelText(r)},generateLabelData:function(e,t,r){var i,n,o;return(o=a.Z.evaluate(this.visProp.label.fontsize),i=[t.scrCoords[1],t.scrCoords[1]],n=[t.scrCoords[2],t.scrCoords[2]],this._isInsideCanvas(i,n,(void 0===o?12:o)*.5))?(i=a.Z.evaluate(this.visProp.label.offset[0]),n=a.Z.evaluate(this.visProp.label.offset[1]),{x:t.usrCoords[1]+i/this.board.unitX,y:t.usrCoords[2]+n/this.board.unitY,t:e,i:r}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1),this},updateRendererLabels:function(){var e,t,r,i,o,s,u,l;for(e=0,r=this.labelsData.length,i=this.labels.length,t=0;e<r;e++)null!==this.labelsData[e]&&(u=this.labelsData[e],t<i?((s=this.labels[t]).setText(u.t),s.setCoords(u.x,u.y),t++):(this.labelCounter+=1,o={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},(o=a.Z.deepCopy(o,this.visProp.label)).id=this.id+u.i+"Label"+this.labelCounter,s=n.Z.createText(this.board,[u.x,u.y,u.t],o),this.addChild(s),s.setParents(this),s.isDraggable=!1,s.dump=!1,this.labels.push(s)),"inherit"===(l=a.Z.evaluate(this.visProp.label.visible))&&(l=this.visPropCalc.visible),s.prepareUpdate().updateVisibility(l).updateRenderer(),s.distanceX=a.Z.evaluate(this.visProp.label.offset[0]),s.distanceY=a.Z.evaluate(this.visProp.label.offset[1]));for(t=r=t;t<i;t++)this.board.renderer.display(this.labels[t],!1),this.labels[t].visProp.visible=this.labels[t].visPropCalc.visible=!1;return this},hideElement:function(){var e;for(n.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)a.Z.exists(this.labels[e])&&this.labels[e].hideElement();return this},showElement:function(){var e;for(n.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)a.Z.exists(this.labels[e])&&this.labels[e].showElement();return this}}),n.Z.createTicks=function(e,t,r){var i,o,u=a.Z.copyAttributes(r,e.options,"ticks");if(o=t.length<2?u.ticksdistance:t[1],t[0].elementClass===s.Z.OBJECT_CLASS_LINE||t[0].elementClass===s.Z.OBJECT_CLASS_CURVE)i=new n.Z.Ticks(t[0],o,u);else throw Error("JSXGraph: Can't create Ticks with parent types '"+typeof t[0]+"'.");return a.Z.isFunction(u.generatelabelvalue)&&(i.generateLabelText=u.generatelabelvalue),a.Z.isFunction(u.generatelabeltext)&&(i.generateLabelText=u.generatelabeltext),i.setParents(t[0]),i.isDraggable=!0,i.fullUpdate(t[0].visPropCalc.visible),i},n.Z.createHatchmark=function(e,t,r){var i,n,o,u,l,c=[],h=a.Z.copyAttributes(r,e.options,"hatch");if(t[0].elementClass!==s.Z.OBJECT_CLASS_LINE&&t[0].elementClass!==s.Z.OBJECT_CLASS_CURVE||"number"!=typeof t[1])throw Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof t[0]+"' and '"+typeof t[1]+" and ''"+typeof t[2]+"'.");for(n=0,o=-(((i=t[1])-1)*(u=h.ticksdistance)*.5);n<i;n++)c[n]=o+n*u;return(l=e.create("ticks",[t[0],c],h)).elType="hatch",t[0].inherits.push(l),l},n.Z.registerElement("ticks",n.Z.createTicks),n.Z.registerElement("hash",n.Z.createHatchmark),n.Z.registerElement("hatch",n.Z.createHatchmark),n.Z.Ticks,r(3156),n.Z.CA=function(e,t,r){this.node=e,this.createNode=t,this.parser=r},n.Z.extend(n.Z.CA.prototype,{findMapNode:function(e,t){var r,i,n;if("op_assign"===t.value&&t.children[0].value===e)return t.children[1];if(t.children){for(r=0,i=t.children.length;r<i;++r)if(null!==(n=this.findMapNode(e,t.children[r])))return n}return null},setMath:function(e){var t,r;if(("node_op"==e.type&&("op_add"==e.value||"op_sub"==e.value||"op_mul"==e.value||"op_div"==e.value||"op_neg"==e.value||"op_execfun"==e.value||"op_exp"==e.value)||"node_var"==e.type||"node_const"==e.type)&&(e.isMath=!0),e.children)for(t=0,r=e.children.length;t<r;++t)this.setMath(e.children[t])},deriveElementary:function(e,t){var r,i=e.children[0].value,n=e.children[1];switch(i){case"abs":r=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))]));break;case"sqrt":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(e.type,e.value,a.Z.deepCopy(e.children[0]),a.Z.deepCopy(e.children[1]))));break;case"sin":r=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n));break;case"cos":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)));break;case"tan":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n)),this.createNode("node_const",2)));break;case"cot":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)),this.createNode("node_const",2))));break;case"exp":r=this.createNode(e.type,e.value,a.Z.deepCopy(e.children[0]),a.Z.deepCopy(e.children[1]));break;case"pow":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",a.Z.deepCopy(e.children[0]),a.Z.deepCopy(e.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(e.children[1][0],t),this.createNode("node_op","op_div",a.Z.deepCopy(e.children[1][1]),a.Z.deepCopy(e.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(e.children[1][1],t),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(e.children[1][0])]))));break;case"log":case"ln":r=this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0]));break;case"log2":case"lb":case"ld":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))]));break;case"acos":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))])));break;case"atan":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;case"acot":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))));break;case"sinh":r=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[a.Z.deepCopy(n[0])]);break;case"cosh":r=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[a.Z.deepCopy(n[0])]);break;case"tanh":r=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[a.Z.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;default:throw r=this.createNode("node_const",0),console.log('Derivative of "'+i+'" not yet implemented'),Error("Error("+this.line+"): ")}return r},derivative:function(e,t){var r;switch(e.type){case"node_op":switch(e.value){case"op_execfun":r="pow"==e.children[0].value?this.deriveElementary(e,t):0===e.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(e,t),this.derivative(e.children[1][0],t));break;case"op_div":r=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(e.children[0],t),a.Z.deepCopy(e.children[1])),this.createNode("node_op","op_mul",a.Z.deepCopy(e.children[0]),this.derivative(e.children[1],t))),this.createNode("node_op","op_mul",a.Z.deepCopy(e.children[1]),a.Z.deepCopy(e.children[1])));break;case"op_mul":r=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(e.children[0]),this.derivative(e.children[1],t)),this.createNode("node_op","op_mul",this.derivative(e.children[0],t),a.Z.deepCopy(e.children[1])));break;case"op_neg":r=this.createNode("node_op","op_neg",this.derivative(e.children[0],t));break;case"op_add":case"op_sub":r=this.createNode("node_op",e.value,this.derivative(e.children[0],t),this.derivative(e.children[1],t));break;case"op_exp":r=this.createNode("node_op","op_mul",a.Z.deepCopy(e),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(e.children[0],t),this.createNode("node_op","op_div",a.Z.deepCopy(e.children[1]),a.Z.deepCopy(e.children[0]))),this.createNode("node_op","op_mul",this.derivative(e.children[1],t),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(e.children[0])]))))}break;case"node_var":r=e.value===t?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":r=this.createNode("node_const",0)}return r},expandDerivatives:function(e,t,r){var i,n,o,s,u,l,c,h,d,p,f,m;if(!e)return 0;for(n=0,this.line=e.line,this.col=e.col,i=e.children.length;n<i;++n)if(e.children[n]&&e.children[n].type)e.children[n]=this.expandDerivatives(e.children[n],e,r);else if(a.Z.isArray(e.children[n]))for(o=0;o<e.children[n].length;++o)e.children[n][o]&&e.children[n][o].type&&(e.children[n][o]=this.expandDerivatives(e.children[n][o],e,r));if("node_op"===e.type&&"op_execfun"===e.value&&e.children[0]&&"D"===e.children[0].value){if(m=!1,"node_var"==e.children[1][0].type&&(h=e.children[1][0].value,null!==(s=this.findMapNode(h,r))&&(m=!0)),m?(p=s.children[0],d=e.children[1].length>=2?e.children[1][1].value:s.children[0][0],u=s.children[1]):(u=e.children[1][0],p=["x"],d=e.children[1].length>=2?e.children[1][1].value:"x"),f=e.children[1].length>=3?e.children[1][2].value:1,c=u,f>=1)for(;f>=1;)c=this.derivative(c,d),c=this.removeTrivialNodes(c),f--;l="node_op"==t.type&&"op_assign"==t.value?this.createNode("node_op","op_map",p,c):c,this.setMath(l),e.type=l.type,e.value=l.value,l.children.length>0&&(e.children[0]=l.children[0]),l.children.length>1&&(e.children[1]=l.children[1])}return e},removeTrivialNodes:function(e){var t,r,i,n,o;if(a.Z.isArray(e))for(t=0,r=e.length;t<r;++t)e[t]=this.removeTrivialNodes(e[t]);if("node_op"!=e.type||!e.children)return e;for(t=0,r=e.children.length;t<r;++t){this.mayNotBeSimplified=!1;do e.children[t]=this.removeTrivialNodes(e.children[t]);while(this.mayNotBeSimplified)}switch(e.value){case"op_map":if(i=e.children[0],"node_var"==(n=e.children[1]).type){for(t=0;t<i.length;++t)if(i[t]==n.value){n.isMath=!0;break}}break;case"op_add":if(i=e.children[0],n=e.children[1],"node_const"==i.type&&0===i.value)return n;if("node_const"==n.type&&0===n.value)return i;if("node_const"==i.type&&"node_const"==n.type)return i.value+=n.value,i;break;case"op_mul":if(i=e.children[0],n=e.children[1],"node_const"==i.type&&1==i.value)return n;if("node_const"==n.type&&1==n.value||"node_const"==i.type&&0===i.value)return i;if("node_const"==n.type&&0===n.value||"node_const"==n.type&&0===n.value)return n;if("node_op"==i.type&&"op_neg"==i.value&&"node_op"==n.type&&"op_neg"==n.value)return e.children=[i.children[0],n.children[0]],this.mayNotBeSimplified=!0,e;if("op_neg"==i.value&&"op_neg"!=n.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_mul",i.children[0],n)],this.mayNotBeSimplified=!0,e;if("op_neg"!=i.value&&"op_neg"==n.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_mul",i,n.children[0])],this.mayNotBeSimplified=!0,e;if("op_div"==i.value&&"node_const"==i.children[0].type&&1==i.children[0].value)return e.type="node_op",e.value="op_div",e.children=[n,i.children[1]],this.mayNotBeSimplified=!0,e;if("op_div"==n.value&&"node_const"==n.children[0].type&&1==n.children[0].value)return e.type="node_op",e.value="op_div",e.children=[i,n.children[1]],this.mayNotBeSimplified=!0,e;if("node_const"!=i.type&&"node_const"==n.type||"node_const"!=i.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_const"==n.children[0].type||"node_op"==i.type&&"op_execfun"!=i.value&&("node_var"==n.type||"node_op"==n.type&&"op_execfun"==n.value)||"node_op"!=i.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_var"==n.children[0].type)return e.children=[n,i],this.mayNotBeSimplified=!0,e;if("node_const"!=i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return o=n.children[0],n.children[0]=i,e.children=[o,n],this.mayNotBeSimplified=!0,e;if("node_const"!=n.type&&"node_op"==i.type&&"op_mul"==i.value&&"node_const"==i.children[0].type)return e.children=[i.children[0],this.createNode("node_op","op_mul",i.children[1],n)],this.mayNotBeSimplified=!0,e;if("node_const"==i.type&&"node_const"==n.type)return i.value*=n.value,i;if("node_const"==i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=i.value,n;if(i.hash=this.parser.compile(i),n.hash=this.parser.compile(n),i.hash===n.hash)return e.value="op_exp",e.children[1]=this.createNode("node_const",2),e;if("node_const"==i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=i.value,n;if("node_op"==n.type&&"op_exp"==n.value&&(i.hash||(i.hash=this.parser.compile(i)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),i.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if("node_op"==i.type&&"op_exp"==i.value&&"node_op"==n.type&&"op_exp"==n.value&&(i.children[0].hash=this.parser.compile(i.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),i.children[0].hash===n.children[0].hash))return i.children[1]=this.createNode("node_op","op_add",i.children[1],n.children[1]),this.mayNotBeSimplified=!0,i;break;case"op_sub":if(i=e.children[0],n=e.children[1],"node_const"==i.type&&0===i.value)return e.value="op_neg",e.children[0]=n,e;if("node_const"==n.type&&0===n.value)return i;if("node_const"==i.type&&"node_const"==n.type&&i.value==n.value||"node_var"==i.type&&"node_var"==n.type&&i.value==n.value)return this.createNode("node_const",0);if("node_const"==i.type&&"node_const"==n.type)return i.value-=n.value,i;if("node_op"==i.type&&"op_mul"==i.value&&"node_op"==n.type&&"op_mul"==n.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),i.children[1].hash===n.children[1].hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",i.children[0],n.children[0]),i.children[1]],this.mayNotBeSimplified=!0,e;if("node_op"==i.type&&"op_mul"==i.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.hash=this.parser.compile(n),i.children[1].hash===n.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",i.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),i.hash=this.parser.compile(i),n.children[1].hash===i.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),n.children[0]),i],this.mayNotBeSimplified=!0,e;break;case"op_neg":if("node_const"==(i=e.children[0]).type&&0===i.value)return i;if("node_op"==i.type&&"op_neg"==i.value)return i.children[0];break;case"op_div":if(i=e.children[0],n=e.children[1],"node_const"==i.type&&"node_const"==n.type&&i.value==n.value&&0!==i.value)return i.value=1,i;if("node_const"==i.type&&0===i.value&&"node_const"==n.type&&0!==n.value)return i.value=0,i;if("node_const"==i.type&&0===i.value&&("node_op"==n.type||"node_var"==n.type))return e.type="node_const",e.value=0,e;if("node_var"==i.type&&"node_var"==n.type&&i.value==n.value)return this.createNode("node_const",1);if("node_const"==i.type&&0!==i.value&&"node_const"==n.type&&0===n.value)return i.value>0?i.value=1/0:i.value=-1/0,i;if("node_op"==i.type&&"op_neg"==i.value&&"node_op"==n.type&&"op_neg"==n.value)return e.children=[i.children[0],n.children[0]],this.mayNotBeSimplified=!0,e;if("op_neg"==i.value&&"op_neg"!=n.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_div",i.children[0],n)],this.mayNotBeSimplified=!0,e;if("op_neg"!=i.value&&"op_neg"==n.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_div",i,n.children[0])],this.mayNotBeSimplified=!0,e;if("node_op"==i.type&&"op_exp"==i.value&&(n.hash||(n.hash=this.parser.compile(n)),i.children[0].hash||(i.children[0].hash=this.parser.compile(i.children[0])),n.hash===i.children[0].hash))return i.children[1]=this.createNode("node_op","op_sub",i.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,i;if("node_const"!=n.type&&"node_op"==i.type&&"op_mul"==i.value&&"node_const"==i.children[0].type)return e.value="op_mul",e.children=[i.children[0],this.createNode("node_op","op_div",i.children[1],n)],this.mayNotBeSimplified=!0,e;if("node_op"==i.type&&"op_exp"==i.value&&"node_op"==n.type&&"op_exp"==n.value&&(i.children[0].hash=this.parser.compile(i.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),i.children[0].hash===n.children[0].hash))return i.children[1]=this.createNode("node_op","op_sub",i.children[1],n.children[1]),this.mayNotBeSimplified=!0,i;break;case"op_exp":if(i=e.children[0],"node_const"==(n=e.children[1]).type&&0===n.value)return n.value=1,n;if("node_const"==n.type&&1==n.value||"node_const"==i.type&&1==i.value||"node_const"==i.type&&0===i.value&&"node_const"==n.type&&0!==n.value)return i;if("node_op"==i.type&&"op_exp"==i.value)return e.children=[i.children[0],this.createNode("node_op","op_mul",i.children[1],n)],e}switch(e.value){case"op_add":if(i=e.children[0],n=e.children[1],"node_const"==i.type&&"node_const"==n.type&&i.value==n.value)return i.value+=n.value,i;if("node_var"==i.type&&"node_var"==n.type&&i.value==n.value){e.children[0]=this.createNode("node_const",2),e.value="op_mul";break}if("node_op"==i.type&&"op_neg"==i.value){e.value="op_sub",e.children[0]=n,e.children[1]=i.children[0],this.mayNotBeSimplified=!0;break}if("node_op"==n.type&&"op_neg"==n.value){e.value="op_sub",e.children[1]=n.children[0],this.mayNotBeSimplified=!0;break}if("node_op"==i.type&&"op_mul"==i.value&&"node_op"==n.type&&"op_mul"==n.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),i.children[1].hash===n.children[1].hash)){e.value="op_mul",e.children=[this.createNode("node_op","op_add",i.children[0],n.children[0]),i.children[1]],this.mayNotBeSimplified=!0;break}if("node_op"==i.type&&"op_mul"==i.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.hash=this.parser.compile(n),i.children[1].hash===n.hash)){e.value="op_mul",e.children=[this.createNode("node_op","op_add",i.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0;break}"node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),i.hash=this.parser.compile(i),n.children[1].hash===i.hash)&&(e.value="op_mul",e.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),n.children[0]),i],this.mayNotBeSimplified=!0);break;case"op_sub":i=e.children[0],"node_op"==(n=e.children[1]).type&&"op_neg"==n.value&&(e.value="op_add",e.children[1]=n.children[0],this.mayNotBeSimplified=!0);break;case"op_execfun":return this.simplifyElementary(e)}return e},simplifyElementary:function(e){var t=e.children[0].value,r=e.children[1];if(0==r.length)return e;switch(t){case"sin":case"tan":("node_const"==r[0].type&&0===r[0].value||"node_var"==r[0].type&&"PI"==r[0].value||"node_op"==r[0].type&&"op_mul"==r[0].value&&"node_const"==r[0].children[0].type&&r[0].children[0].value%1==0&&"node_var"==r[0].children[1].type&&"PI"==r[0].children[1].value)&&(e.type="node_const",e.value=0);break;case"cos":if("node_const"==r[0].type&&0===r[0].value){e.type="node_const",e.value=1;break}"node_var"==r[0].type&&"PI"==r[0].value&&(e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_const",1)]);break;case"exp":"node_const"==r[0].type&&0===r[0].value&&(e.type="node_const",e.value=1);break;case"pow":"node_const"==r[1].type&&0===r[1].value&&(e.type="node_const",e.value=1)}return e}}),n.Z.CA,n.Z.Dump={addMarkers:function(e,t,r){var i,n,o;for(i in a.Z.isArray(t)||(t=[t]),a.Z.isArray(r)||(r=[r]),n=Math.min(t.length,r.length),t.length=n,r.length=n,e.objects)if(e.objects.hasOwnProperty(i))for(o=0;o<n;o++)e.objects[i][t[o]]=r[o]},deleteMarkers:function(e,t){var r,i,n;for(r in a.Z.isArray(t)||(t=[t]),i=t.length,t.length=i,e.objects)if(e.objects.hasOwnProperty(r))for(n=0;n<i;n++)delete e.objects[r][t[n]]},str:function(e){return"string"==typeof e&&"function"!==e.slice(0,7)&&(e='"'+e+'"'),e},minimizeObject:function(e,t){var r,i,o,s={},u=a.Z.deepCopy(e),l=[];for(o=1;o<arguments.length;o++)l.push(arguments[o]);for(s=a.Z.deepCopy(s,n.Z.Options.elements,!0),o=l.length;o>0;o--)s=a.Z.deepCopy(s,l[o-1],!0);for(r in s)s.hasOwnProperty(r)&&(i=r.toLowerCase(),"object"!=typeof s[r]&&s[r]===u[i]&&delete u[i]);return u},prepareAttributes:function(e,t){var r,i;for(i in r=this.minimizeObject(t.getAttributes(),n.Z.Options[t.elType]),t.subs)t.subs.hasOwnProperty(i)&&(r[i]=this.minimizeObject(t.subs[i].getAttributes(),n.Z.Options[t.elType][i],n.Z.Options[t.subs[i].elType]),r[i].id=t.subs[i].id,r[i].name=t.subs[i].name);return r.id=t.id,r.name=t.name,r},setBoundingBox:function(e,t,r){return e.push({obj:r,method:"setBoundingBox",params:[t.getBoundingBox(),t.keepaspectratio]}),e},dump:function(e){var t,r,i,n,o=[],s=[],u=e.objectsList.length;for(this.addMarkers(e,"dumped",!1),t=0;t<u;t++)if(r=e.objectsList[t],i={},!r.dumped&&r.dump){for(i.type=r.getType(),i.parents=r.getParents().slice(),"point"===i.type&&1===i.parents[0]&&(i.parents=i.parents.slice(1)),n=0;n<i.parents.length;n++)a.Z.isString(i.parents[n])&&"'"!==i.parents[n][0]&&'"'!==i.parents[n][0]?i.parents[n]='"'+i.parents[n]+'"':a.Z.isArray(i.parents[n])&&(i.parents[n]="["+i.parents[n].toString()+"]");i.attributes=this.prepareAttributes(e,r),"glider"===i.type&&r.onPolygon&&o.push({obj:r.id,prop:"onPolygon",val:!0}),s.push(i)}return this.deleteMarkers(e,"dumped"),{elements:s,props:o,methods:[]}},arrayToParamStr:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(t.call(this,e[r]));return i.join(", ")},toJCAN:function(e){var t,r,i;switch(typeof e){case"object":if(e){if(r=[],a.Z.isArray(e)){for(t=0;t<e.length;t++)r.push(this.toJCAN(e[t]));return"["+r.join(",")+"]"}for(i in e)e.hasOwnProperty(i)&&r.push(i+": "+this.toJCAN(e[i]));return"<<"+r.join(", ")+">> "}return"null";case"string":return"'"+e.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return e.toString();case"null":return"null"}},toJessie:function(e){var t,r,i,n=this.dump(e),o=[];for(t=0,n.methods=this.setBoundingBox(n.methods,e,"$board"),r=n.elements;t<r.length;t++)r[t].attributes.name.length>0&&o.push("// "+r[t].attributes.name),o.push("s"+t+" = "+r[t].type+"("+r[t].parents.join(", ")+") "+this.toJCAN(r[t].attributes).replace(/\n/,"\\n")+";"),"axis"===r[t].type&&(i=r[t].attributes.id,null===e.objects[i].defaultTicks&&o.push("s"+t+".removeAllTicks();")),o.push("");for(t=0;t<n.methods.length;t++)o.push(n.methods[t].obj+"."+n.methods[t].method+"("+this.arrayToParamStr(n.methods[t].params,this.toJCAN)+");"),o.push("");for(t=0;t<n.props.length;t++)o.push(n.props[t].obj+"."+n.props[t].prop+" = "+this.toJCAN(n.props[t].val)+";"),o.push("");return o.join("\n")},toJavaScript:function(e){var t,r,i,n=this.dump(e),o=[];for(t=0,n.methods=this.setBoundingBox(n.methods,e,"board"),r=n.elements;t<r.length;t++)o.push('board.create("'+r[t].type+'", ['+r[t].parents.join(", ")+"], "+a.Z.toJSON(r[t].attributes)+");"),"axis"===r[t].type&&(i=r[t].attributes.id,null===e.objects[i].defaultTicks&&o.push('board.objects["'+i+'"].removeTicks(board.objects["'+i+'"].defaultTicks);'));for(t=0;t<n.methods.length;t++)o.push(n.methods[t].obj+"."+n.methods[t].method+"("+this.arrayToParamStr(n.methods[t].params,a.Z.toJSON)+");"),o.push("");for(t=0;t<n.props.length;t++)o.push(n.props[t].obj+"."+n.props[t].prop+" = "+a.Z.toJSON(n.props[t].val)+";"),o.push("");return o.join("\n")}},n.Z.Dump,n.Z.createComb=function(e,t,r){var i,o,s,u;if(2===t.length){if(a.Z.isArray(t[0])&&t[0].length>1)u=a.Z.copyAttributes(r,e.options,"comb","point1"),i=e.create("point",t[0],u);else if(a.Z.isString(t[0])||a.Z.isPoint(t[0]))i=e.select(t[0]);else if(a.Z.isFunction(t[0])&&a.Z.isPoint(t[0]()))i=t[0]();else if(a.Z.isFunction(t[0])&&t[0]().length&&t[0]().length>=2)u=a.Z.copyAttributes(r,e.options,"comb","point1"),i=n.Z.createPoint(e,t[0](),u);else throw Error("JSXGraph: Can't create comb with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(a.Z.isArray(t[1])&&t[1].length>1)u=a.Z.copyAttributes(r,e.options,"comb","point2"),o=e.create("point",t[1],u);else if(a.Z.isString(t[1])||a.Z.isPoint(t[1]))o=e.select(t[1]);else if(a.Z.isFunction(t[1])&&a.Z.isPoint(t[1]()))o=t[1]();else if(a.Z.isFunction(t[1])&&t[1]().length&&t[1]().length>=2)u=a.Z.copyAttributes(r,e.options,"comb","point2"),o=n.Z.createPoint(e,t[1](),u);else throw Error("JSXGraph: Can't create comb with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]")}else throw Error("JSXGraph: Can't create comb with parent types "+t.map(function(e){return"'"+typeof e+"'"}).join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");return u=a.Z.copyAttributes(r,e.options,"comb"),(s=e.create("curve",[[0],[0]],u)).updateDataArray=function(){var e,t,r,n,u,l,c,h,d,p,f=0,m=i.Dist(o),v=i,g=o;for(h=a.Z.evaluate(s.visProp.frequency),d=-a.Z.evaluate(s.visProp.angle),p=a.Z.evaluate(s.visProp.width),a.Z.evaluate(s.visProp.reverse)&&(v=o,g=i,d=-d),e=Math.cos(d),t=Math.sin(d),r=(g.X()-v.X())/m,n=(g.Y()-v.Y())/m,e*=p/Math.abs(t),t*=p/Math.abs(t),this.dataX=[],this.dataY=[];f<m;)u=v.X()+r*f,l=v.Y()+n*f,t*=c=Math.min(e,m-f)/Math.abs(e),e*=c,this.dataX.push(u),this.dataY.push(l),this.dataX.push(u+r*e+n*t),this.dataY.push(l-r*t+n*e),this.dataX.push(NaN),this.dataY.push(NaN),f+=h},s},n.Z.registerElement("comb",n.Z.createComb);var $={removeSlopeTriangle:function(){G.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()}};n.Z.createSlopeTriangle=function(e,t,r){var i,o,u,l,c,h,d,p,f,m=!1;if(1===t.length&&t[0].type===s.Z.OBJECT_TYPE_TANGENT)u=(o=t[0]).glider;else if(1===t.length&&t[0].type===s.Z.OBJECT_TYPE_GLIDER)u=t[0],f=a.Z.copyAttributes(r,e.options,"slopetriangle","tangent"),o=e.create("tangent",[u],f),m=!0;else if(2===t.length&&t[0].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(t[1]))o=t[0],u=t[1];else throw Error("JSXGraph: Can't create slope triangle with parent types '"+typeof t[0]+"'.");return f=a.Z.copyAttributes(r,e.options,"slopetriangle","basepoint"),d=e.create("point",[function(){return[u.X()+1,u.Y()]}],f),f=a.Z.copyAttributes(r,e.options,"slopetriangle","baseline"),h=e.create("line",[u,d],f),f=a.Z.copyAttributes(r,e.options,"slopetriangle","glider"),l=e.create("glider",[u.X()+1,u.Y(),h],f),f=a.Z.copyAttributes(r,e.options,"slopetriangle","toppoint"),c=e.create("point",[function(){return[l.X(),l.Y()+(l.X()-u.X())*o.getSlope()]}],f),f=a.Z.copyAttributes(r,e.options,"slopetriangle"),(i=e.create("polygon",[u,l,c],f)).Value=$.Value,i.tangent=o,i._isPrivateTangent=m,i.borders[2].setArrow(!1,!1),f=a.Z.copyAttributes(r,e.options,"slopetriangle","label"),(p=e.create("text",[function(){return l.X()+.1},function(){return(l.Y()+c.Y())*.5},function(){return""}],f))._setText(function(){var e=a.Z.evaluate(p.visProp.digits);return p.useLocale()?p.formatNumberLocale(i.Value(),e):a.Z.toFixed(i.Value(),e)}),p.fullUpdate(),i.glider=l,i.basepoint=d,i.baseline=h,i.toppoint=c,i.label=p,i.subs={glider:l,basePoint:d,baseLine:h,topPoint:c,label:p},i.inherits.push(l,d,h,c,p),i.methodMap=n.Z.deepCopy(i.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),i.remove=$.removeSlopeTriangle,i},n.Z.registerElement("slopetriangle",n.Z.createSlopeTriangle);var Q={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};n.Z.createCheckbox=function(e,t,r){var i,s,u=a.Z.copyAttributes(r,e.options,"checkbox");return s=[t[0],t[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(i=e.create("text",s,u)).type=a.Z.OBJECT_TYPE_CHECKBOX,i.rendNodeCheckbox=i.rendNode.childNodes[0].childNodes[0],i.rendNodeLabel=i.rendNode.childNodes[0].childNodes[1],i.rendNodeTag=i.rendNodeCheckbox,i.rendNodeTag.disabled=!!u.disabled,i.rendNodeCheckbox.id=i.rendNode.id+"_checkbox",i.rendNodeLabel.id=i.rendNode.id+"_label",i.rendNodeLabel.setAttribute("for",i.rendNodeCheckbox.id),i.setText(t[2]),i.visPropOld.fontsize="0px",e.renderer.updateTextStyle(i,!1),i.rendNodeCheckbox.checked=u.checked,i._value=u.checked,i.Value=function(){return this._value},i.update=function(){return this.needsUpdate&&(n.Z.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},o.Z.addEvent(i.rendNodeCheckbox,"change",Q.CheckboxChangeEventHandler,i),i},n.Z.registerElement("checkbox",n.Z.createCheckbox);var K={InputInputEventHandler:function(e){this._value=this.rendNodeInput.value,this.board.update()}};n.Z.createInput=function(e,t,r){var i,s,u=a.Z.copyAttributes(r,e.options,"input");return s=[t[0],t[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+u.maxlength+'" style="width:100%"/></span>'],(i=e.create("text",s,u)).type=a.Z.OBJECT_TYPE_INPUT,i.rendNodeLabel=i.rendNode.childNodes[0].childNodes[0],i.rendNodeInput=i.rendNode.childNodes[0].childNodes[1],i.rendNodeInput.value=t[2],i.rendNodeTag=i.rendNodeInput,i.rendNodeTag.disabled=!!u.disabled,i.rendNodeLabel.id=i.rendNode.id+"_label",i.rendNodeInput.id=i.rendNode.id+"_input",i.setText(t[3]),i._value=t[2],i.update=function(){return this.needsUpdate&&(n.Z.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},i.Value=function(){return this._value},i.set=function(e){return this._value=e,this.rendNodeInput.value=e,this},o.Z.addEvent(i.rendNodeInput,"input",K.InputInputEventHandler,i),o.Z.addEvent(i.rendNodeInput,"mousedown",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),o.Z.addEvent(i.rendNodeInput,"touchstart",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),o.Z.addEvent(i.rendNodeInput,"pointerdown",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),i.visPropOld.fontsize="0px",e.renderer.updateTextStyle(i,!1),i},n.Z.registerElement("input",n.Z.createInput);var ee={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};n.Z.createButton=function(e,t,r){var i,s,u=a.Z.copyAttributes(r,e.options,"button");return s=[t[0],t[1],'<button type="button" style="width:100%;"></button>'],(i=e.create("text",s,u)).type=a.Z.OBJECT_TYPE_BUTTON,i.rendNodeButton=i.rendNode.childNodes[0],i.rendNodeButton.id=i.rendNode.id+"_button",i.rendNodeTag=i.rendNodeButton,i.rendNodeTag.disabled=!!u.disabled,i.setText(t[2]),i.visPropOld.fontsize="0px",e.renderer.updateTextStyle(i,!1),t[3]&&(a.Z.isString(t[3])?(i._jc=new n.Z.JessieCode,i._jc.use(e),i._handler=function(){i._jc.parse(t[3])}):i._handler=t[3]),o.Z.addEvent(i.rendNodeButton,"click",ee.ButtonClickEventHandler,i),o.Z.addEvent(i.rendNodeButton,"mousedown",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),o.Z.addEvent(i.rendNodeButton,"touchstart",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),o.Z.addEvent(i.rendNodeButton,"pointerdown",function(e){a.Z.exists(e.stopPropagation)&&e.stopPropagation()},i),i},n.Z.registerElement("button",n.Z.createButton),n.Z.createVectorField=function(e,t,r){var i,n;if(!(t.length>=3&&(a.Z.isArray(t[0])||a.Z.isFunction(t[0])||a.Z.isString(t[0]))&&a.Z.isArray(t[1])&&3===t[1].length&&a.Z.isArray(t[2])&&3===t[2].length))throw Error("JSXGraph: Can't create vector field with parent types '"+typeof t[0]+"', '"+typeof t[1]+"', '"+typeof t[2]+"'.");return n=a.Z.copyAttributes(r,e.options,"vectorfield"),(i=e.create("curve",[[],[]],n)).elType="vectorfield",i.setF=function(e,t){var r,n;return a.Z.isArray(e)?(r=a.Z.createFunction(e[0],this.board,t),n=a.Z.createFunction(e[1],this.board,t),this.F=function(e,t){return[r(e,t),n(e,t)]}):this.F=a.Z.createFunction(e,i.board,t),this},i.setF(t[0],"x, y"),i.xData=t[1],i.yData=t[2],i.updateDataArray=function(){var t,r,i,n,o,s,u,l,c,h,d,p,f=a.Z.evaluate(this.visProp.scale),m=a.Z.evaluate(this.xData[0]),v=a.Z.evaluate(this.xData[1]),g=(a.Z.evaluate(this.xData[2])-m)/v,b=a.Z.evaluate(this.yData[0]),y=a.Z.evaluate(this.yData[1]),x=(a.Z.evaluate(this.yData[2])-b)/y,C=a.Z.evaluate(this.visProp.arrowhead.enabled);for(C&&(h=(c=a.Z.evaluate(this.visProp.arrowhead.size))/e.unitX,d=c/e.unitY,p=a.Z.evaluate(this.visProp.arrowhead.angle)),this.dataX=[],this.dataY=[],i=0,t=m;i<=v;t+=g,i++)for(n=0,r=b;n<=y;r+=x,n++)o=this.F(t,r),o[0]*=f,o[1]*=f,this.dataX=this.dataX.concat([t,t+o[0],NaN]),this.dataY=this.dataY.concat([r,r+o[1],NaN]),C&&Math.abs(o[0])+Math.abs(o[1])>0&&(u=(s=Math.atan2(o[1],o[0]))+p,l=s-p,this.dataX=this.dataX.concat([t+o[0]-Math.cos(u)*h,t+o[0],t+o[0]-Math.cos(l)*h,NaN]),this.dataY=this.dataY.concat([r+o[1]-Math.sin(u)*d,r+o[1],r+o[1]-Math.sin(l)*d,NaN]))},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("vectorfield",n.Z.createVectorField),n.Z.createSlopeField=function(e,t,r){var i,n,o;if(!(t.length>=3&&(a.Z.isFunction(t[0])||a.Z.isString(t[0]))&&a.Z.isArray(t[1])&&3===t[1].length&&a.Z.isArray(t[2])&&3===t[2].length))throw Error("JSXGraph: Can't create slope field with parent types '"+typeof t[0]+"', '"+typeof t[1]+"', '"+typeof t[2]+"'.");return n=a.Z.createFunction(t[0],e,"x, y"),t[0]=function(e,t){var r=n(e,t),i=Math.sqrt(1+r*r);return[1/i,r/i]},o=a.Z.copyAttributes(r,e.options,"slopefield"),(i=e.create("vectorfield",t,o)).elType="slopefield",i.setF=function(e,t){var r=a.Z.createFunction(e,i.board,t);this.F=function(e,t){var i=r(e,t),n=Math.sqrt(1+i*i);return[1/n,i/n]}},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("slopefield",n.Z.createSlopeField),n.Z.createSmartLabel=function(e,t,r){var i,n,o,u,l,c;if(0===t.length||0>[s.Z.OBJECT_CLASS_POINT,s.Z.OBJECT_CLASS_LINE,s.Z.OBJECT_CLASS_CIRCLE].indexOf(t[0].elementClass)&&0>[s.Z.OBJECT_TYPE_POLYGON,s.Z.OBJECT_TYPE_ANGLE].indexOf(t[0].type))throw Error("JSXGraph: Can't create smartlabel with parent types '"+typeof t[0]+"', '"+typeof t[1]+"'.");return o=t[0],u=t[1]||"",o.elementClass===s.Z.OBJECT_CLASS_POINT?n=a.Z.copyAttributes(r,e.options,"smartlabelpoint"):o.elementClass===s.Z.OBJECT_CLASS_LINE?((n=a.Z.copyAttributes(r,e.options,"smartlabelline")).rotate=function(){return 180*Math.atan(o.getSlope())/Math.PI},n.visible=function(){return!(1.5>o.L())}):o.elementClass===s.Z.OBJECT_CLASS_CIRCLE?(n=a.Z.copyAttributes(r,e.options,"smartlabelcircle")).visible=function(){return!(1.5>o.Radius())}:o.type===s.Z.OBJECT_TYPE_POLYGON?n=a.Z.copyAttributes(r,e.options,"smartlabelpolygon"):o.type===s.Z.OBJECT_TYPE_ANGLE&&((n=a.Z.copyAttributes(r,e.options,"smartlabelangle")).rotate=function(){var e=o.center.coords.usrCoords,t=o.getLabelAnchor().usrCoords,r=180*Math.atan2(t[2]-e[2],t[1]-e[1])/Math.PI;return r>90&&r<270?r+180:r},n.anchorX=function(){var e=o.center.coords.usrCoords,t=o.getLabelAnchor().usrCoords,r=180*Math.atan2(t[2]-e[2],t[1]-e[1])/Math.PI;return r>90&&r<270?"right":"left"}),l=function(e,t,r,i){var n;switch(i){case"length":n=function(){return t.L()};break;case"slope":n=function(){return t.Slope()};break;case"area":n=function(){return t.Area()};break;case"radius":n=function(){return t.Radius()};break;case"perimeter":n=function(){return t.Perimeter()};break;case"rad":n=function(){return t.Value()};break;case"deg":n=function(){return 180*t.Value()/Math.PI};break;default:n=function(){return 0}}return function(){var t,r="",i=a.Z.evaluate(u),o=a.Z.evaluate(e.visProp.digits),s=a.Z.evaluate(e.visProp.unit),l=a.Z.evaluate(e.visProp.prefix),c=a.Z.evaluate(e.visProp.suffix),h=a.Z.evaluate(e.visProp.usemathjax)||a.Z.evaluate(e.visProp.usekatex);return""===i?(t=e.useLocale()?e.formatNumberLocale(n(),o):a.Z.toFixed(n(),o),r=h?["\\(",l,t,"\\,",s,c,"\\)"].join(""):[l,t,s,c].join("")):r=i,r}},o.elementClass===s.Z.OBJECT_CLASS_POINT?(i=e.create("text",[function(){return o.X()},function(){return o.Y()},""],n),c=function(){var e,t,r="",n=a.Z.evaluate(u),s=a.Z.evaluate(i.visProp.digits),l=a.Z.evaluate(i.visProp.unit),c=a.Z.evaluate(i.visProp.prefix),h=a.Z.evaluate(i.visProp.suffix),d=a.Z.evaluate(i.visProp.dir),p=a.Z.evaluate(i.visProp.usemathjax)||a.Z.evaluate(i.visProp.usekatex);return i.useLocale()?(e=i.formatNumberLocale(o.X(),s),t=i.formatNumberLocale(o.Y(),s)):(e=a.Z.toFixed(o.X(),s),t=a.Z.toFixed(o.Y(),s)),""===n?"row"===d?r=p?["\\(",c,e,"\\,",l," / ",t,"\\,",l,h,"\\)"].join(""):[c,e," ",l," / ",t," ",l,h].join(""):0===d.indexOf("col")&&(r=p?["\\(",c,"\\left(\\array{",e,"\\,",l,"\\\\ ",t,"\\,",l,"}\\right)",h,"\\)"].join(""):[c,e," ",l,"<br/>",t," ",l,h].join("")):r=n,r}):o.elementClass===s.Z.OBJECT_CLASS_LINE?"length"===n.measure?c=l(i=e.create("text",[function(){return(o.point1.X()+o.point2.X())*.5},function(){return(o.point1.Y()+o.point2.Y())*.5},""],n),o,"line","length"):"slope"===n.measure&&(c=l(i=e.create("text",[function(){return .25*o.point1.X()+.75*o.point2.X()},function(){return .25*o.point1.Y()+.75*o.point2.Y()},""],n),o,"line","slope")):o.elementClass===s.Z.OBJECT_CLASS_CIRCLE?"radius"===n.measure?c=l(i=e.create("text",[function(){return o.center.X()+.5*o.Radius()},function(){return o.center.Y()},""],n),o,"circle","radius"):"area"===n.measure?c=l(i=e.create("text",[function(){return o.center.X()},function(){return o.center.Y()+.5*o.Radius()},""],n),o,"circle","area"):("circumference"===n.measure||"perimeter"===n.measure)&&(c=l(i=e.create("text",[function(){return o.getLabelAnchor()},""],n),o,"circle","perimeter")):o.type===s.Z.OBJECT_TYPE_POLYGON?"area"===n.measure?c=l(i=e.create("text",[function(){return o.getTextAnchor()},""],n),o,"polygon","area"):"perimeter"===n.measure&&(c=l(i=e.create("text",[function(){var e=o.borders.length-1;return e>=0?[(o.borders[e].point1.X()+o.borders[e].point2.X())*.5,(o.borders[e].point1.Y()+o.borders[e].point2.Y())*.5]:o.getTextAnchor()},""],n),o,"polygon","perimeter")):o.type===s.Z.OBJECT_TYPE_ANGLE&&(c=l(i=e.create("text",[function(){return o.getLabelAnchor()},""],n),o,"angle",n.measure)),a.Z.exists(i)&&(i.setText(c),o.addChild(i),i.setParents([o])),i},n.Z.registerElement("smartlabel",n.Z.createSmartLabel),n.Z.ForeignObject=function(e,t,r,i,o){this.constructor(e,r,s.Z.OBJECT_TYPE_FOREIGNOBJECT,s.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this._useUserSize=!1,this.size=[1,1],a.Z.exists(o)&&o.length>0&&(this._useUserSize=!0,this.W=a.Z.createFunction(o[0],this.board,""),this.H=a.Z.createFunction(o[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=i,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=n.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},n.Z.ForeignObject.prototype=new Y.Z,a.Z.copyPrototypeMethods(n.Z.ForeignObject,X.Z,"coordsConstructor"),n.Z.extend(n.Z.ForeignObject.prototype,{hasPoint:function(e,t){var r,i,n,o,l,c,h,d,p,f=this.transformations.length;return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,l=a.Z.evaluate(this.visProp.precision[o])):l=this.board.options.precision.hasPoint,0===f)?(r=e-this.coords.scrCoords[1],i=this.coords.scrCoords[2]-t,r>=-(n=l)&&r-this.size[0]<=n&&i>=-n&&i-this.size[1]<=n):(h=[(c=(c=new m.Z(s.Z.COORDS_BY_SCREEN,[e,t],this.board)).usrCoords)[0]-this.span[0][0],c[1]-this.span[0][1],c[2]-this.span[0][2]],!!(0<=(d=(p=u.Z.innerProduct)(h,this.span[1]))&&d<=p(this.span[1],this.span[1])&&0<=(d=p(h,this.span[2]))&&d<=p(this.span[2],this.span[2])))},update:function(e){return this.needsUpdate&&(this.updateCoords(e),this.updateSize()),this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var e=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(e=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[e.width,e.height]),this},updateSpan:function(){var e,t,r=this.transformations.length,i=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(e=0,i[0]=[this.Z(),this.X(),this.Y()],i[1]=[this.Z(),this.X()+this.W(),this.Y()],i[2]=[this.Z(),this.X(),this.Y()+this.H()];e<r;e++)for(t=0;t<3;t++)i[t]=u.Z.matVecMult(this.transformations[e].matrix,i[t]);for(t=0;t<3;t++)i[t][1]/=i[t][0],i[t][2]/=i[t][0],i[t][0]/=i[t][0];for(t=1;t<3;t++)i[t][0]-=i[0][0],i[t][1]-=i[0][1],i[t][2]-=i[0][2];this.span=i}return this},addTransform:function(e){var t;if(a.Z.isArray(e))for(t=0;t<e.length;t++)this.transformations.push(e[t]);else this.transformations.push(e);return this},getParents:function(){var e=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(e=this.parents),e},setSize:function(e,t){return this.W=a.Z.createFunction(e,this.board,""),this.H=a.Z.createFunction(t,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),n.Z.createForeignObject=function(e,t,r){var i,o,s=t[0],u=t[1],l=[];if(t.length>=2&&(l=t[2]),i=a.Z.copyAttributes(r,e.options,"foreignobject"),!(o=X.Z.create(n.Z.ForeignObject,e,u,i,s,l)))throw Error("JSXGraph: Can't create foreignObject with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return o},n.Z.registerElement("foreignobject",n.Z.createForeignObject),n.Z.registerElement("fo",n.Z.createForeignObject),n.Z.ForeignObject,n.Z.extend(M.Z,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},view3d:{needsRegularUpdate:!0,projection:"parallel",verticalDrag:{enabled:!0,key:"shift"}}}),n.Z.Options,n.Z.View3D=function(e,t,r){this.constructor(e,r,s.Z.OBJECT_TYPE_VIEW3D,s.Z.OBJECT_CLASS_3D),this.objects={},this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.llftCorner=t[0],this.size=t[1],this.bbox3D=t[2],this.r=-1,this.projectionType="parallel",this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.View3D.prototype=new Y.Z,n.Z.extend(n.Z.View3D.prototype,{create:function(e,t,r){var i=[];return e.indexOf("3d")>0&&i.push(this),this.board.create(e,i.concat(t),r)},select:function(e,t){var r,i,n,o,s=e;if(null===s)return s;if(a.Z.isString(s)&&""!==s)a.Z.exists(this.objects[s])?s=this.objects[s]:a.Z.exists(this.elementsByName[s])&&(s=this.elementsByName[s]);else if(!t&&(a.Z.isFunction(s)||a.Z.isObject(s)&&!a.Z.isFunction(s.setAttribute))){for(n=0,r=a.Z.filterElements(this.objectsList,s),i={},o=r.length;n<o;n++)i[r[n].id]=r[n];s=new H.Z(i)}else a.Z.isObject(s)&&a.Z.exists(s.id)&&!a.Z.exists(this.objects[s.id])&&(s=null);return s},updateParallelProjection:function(){var e,t,r,i,n=[[1,0,0,0],[0,1,0,0],[0,0,1,0]];return r=this.el_slide.Value(),e=this.r,t=this.az_slide.Value(),i=e*Math.sin(r),n[1][1]=e*Math.cos(t),n[1][2]=-e*Math.sin(t),n[2][1]=i*Math.sin(t),n[2][2]=i*Math.cos(t),n[2][3]=Math.cos(r),n},updateCentralProjection:function(){var e,t,r,i,n,o,s,a,l,c,h=1/Math.tan(.5*Math.PI/2),d=[.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[0][0]+this.bbox3D[0][1])],p=[0,0,1],f=[[0,0,0,-1],[0,h,0,0],[0,0,h,0],[-26.666666666666668,0,0,-28/12]];return t=this.az_slide.Value(),e=2*this.el_slide.Value(),t+=3*Math.PI*.5,c=[(l=[12*Math.cos(t)*Math.cos(e),-12*Math.sin(t)*Math.cos(e),12*Math.sin(e)])[0]-d[0],l[1]-d[1],l[2]-d[2]],s=u.Z.norm(c,3),r=[c[0]/s,c[1]/s,c[2]/s],s=u.Z.norm(p,3),o=[p[0]/s,p[1]/s,p[2]/s],i=u.Z.crossProduct(o,r),n=u.Z.crossProduct(r,i),a=[[1,0,0,0],[-(o=u.Z.matVecMult([i,n,r],l))[0],i[0],i[1],i[2]],[-o[1],n[0],n[1],n[2]],[-o[2],r[0],r[1],r[2]]],f=u.Z.matMatMult(f,a)},update:function(){var e,t;return a.Z.exists(this.el_slide)&&a.Z.exists(this.az_slide)&&this.needsUpdate&&((e=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=a.Z.evaluate(this.visProp.projection),"parallel"===this.projectionType)?(t=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],e[1][1]=this.size[0]/(this.bbox3D[0][1]-this.bbox3D[0][0]),e[2][2]=this.size[1]/(this.bbox3D[1][1]-this.bbox3D[1][0]),e[1][0]=this.llftCorner[0]+.5*e[1][1]*(this.bbox3D[0][1]-this.bbox3D[0][0]),e[2][0]=this.llftCorner[1]+.5*e[2][2]*(this.bbox3D[1][1]-this.bbox3D[1][0]),this.matrix3D=this.updateParallelProjection(),this.matrix3D=u.Z.matMatMult(e,u.Z.matMatMult(this.matrix3D,t))):(this.matrix3D=this.updateCentralProjection(),e[1][1]=this.size[0]/.8,e[2][2]=this.size[1]/.8,e[1][0]=this.llftCorner[0]+.5*e[1][1]*.8,e[2][0]=this.llftCorner[1]+.5*e[2][2]*.8,this.viewPortTransform=e)),this},updateRenderer:function(){return this.needsUpdate=!1,this},removeObject:function(e,t){var r;if(a.Z.isArray(e)){for(r=0;r<e.length;r++)this.removeObject(e[r]);return this}if(e=this.select(e),!a.Z.exists(e)||a.Z.isString(e))return this;try{delete this.objects[e.id]}catch(t){n.Z.debug("View3D "+e.id+": Could not be removed: "+t)}return this.board.removeObject(e,t),this},project3DTo2D:function(e,t,r){var i,n;return(i=3==arguments.length?[1,e,t,r]:3===e.length?[1].concat(e):e,n=u.Z.matVecMult(this.matrix3D,i),"parallel"===this.projectionType)?n:(n[1]/=n[0],n[2]/=n[0],n[3]/=n[0],n[0]/=n[0],u.Z.matVecMult(this.viewPortTransform,n.slice(0,3)))},project2DTo3DPlane:function(e,t,r){var i,n,o,s,a=t.slice(1),l=[1,0,0,0];r=r||[1,0,0,0],s=u.Z.norm(a,3),o=u.Z.innerProduct(r.slice(1),a,3)/s,(i=this.matrix3D.slice(0,3)).push([0].concat(a)),n=e.coords.usrCoords.concat([o]);try{1===i[2][3]&&(i[2][1]=i[2][2]=.001*u.Z.eps),l=u.Z.Numerics.Gauss(i,n)}catch(e){l=[0,NaN,NaN,NaN]}return l},project2DTo3DVertical:function(e,t){var r=this.matrix3D[2],i=r[3],n=e.coords.usrCoords[2];return(n-=r[0]*r[0]+r[1]*t[1]+r[2]*t[2],Math.abs(i)<u.Z.eps)?t:t.slice(0,3).concat([n/i])},project3DToCube:function(e){var t=this.bbox3D;return e[1]<t[0][0]&&(e[1]=t[0][0]),e[1]>t[0][1]&&(e[1]=t[0][1]),e[2]<t[1][0]&&(e[2]=t[1][0]),e[2]>t[1][1]&&(e[2]=t[1][1]),e[3]<t[2][0]&&(e[3]=t[2][0]),e[3]>t[2][1]&&(e[3]=t[2][1]),e},intersectionLineCube:function(e,t,r){var i,n,o,s;for(n=0,i=r;n<3;n++)0!==t[n]&&(o=(this.bbox3D[n][0]-e[n])/t[n],s=(this.bbox3D[n][1]-e[n])/t[n],i=r<0?Math.max(i,Math.min(o,s)):Math.min(i,Math.max(o,s)));return i},isInCube:function(e){return e[0]>this.bbox3D[0][0]-u.Z.eps&&e[0]<this.bbox3D[0][1]+u.Z.eps&&e[1]>this.bbox3D[1][0]-u.Z.eps&&e[1]<this.bbox3D[1][1]+u.Z.eps&&e[2]>this.bbox3D[2][0]-u.Z.eps&&e[2]<this.bbox3D[2][1]+u.Z.eps},intersectionPlanePlane:function(e,t,r){var i,n,o,s,a=[[],[]];return r=r||t.d,i=u.Z.Geometry.meet3Planes(e.normal,e.d,t.normal,r,u.Z.crossProduct(e.normal,t.normal),0),n=u.Z.Geometry.meetPlanePlane(e.vec1,e.vec2,t.vec1,t.vec2),o=this.intersectionLineCube(i,n,1/0),s=u.Z.axpy(o,n,i),this.isInCube(s)&&(a[0]=s),o=this.intersectionLineCube(i,n,-1/0),s=u.Z.axpy(o,n,i),this.isInCube(s)&&(a[1]=s),a},getMesh:function(e,t,r){var i,n,o,s,u,l,c,h=[0,0,0],d=t[2],p=r[2],f=[],m=[];for(i=0,l=(a.Z.evaluate(t[1])-a.Z.evaluate(t[0]))/d,c=(a.Z.evaluate(r[1])-a.Z.evaluate(r[0]))/p;i<=d;i++){for(n=0,o=t[0]+l*i;n<=p;n++)s=r[0]+c*n,h=a.Z.isFunction(e)?e(o,s):[e[0](o,s),e[1](o,s),e[2](o,s)],u=this.project3DTo2D(h),f.push(u[1]),m.push(u[2]);f.push(NaN),m.push(NaN)}for(n=0;n<=p;n++){for(i=0,s=r[0]+c*n;i<=d;i++)o=t[0]+l*i,h=a.Z.isFunction(e)?e(o,s):[e[0](o,s),e[1](o,s),e[2](o,s)],u=this.project3DTo2D(h),f.push(u[1]),m.push(u[2]);f.push(NaN),m.push(NaN)}return[f,m]},animateAzimuth:function(){var e=this.az_slide._smin,t=this.az_slide._smax,r=this.az_slide.Value()+.1;this.az_slide.position=(r-e)/(t-e),this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var e=this.board;return!!a.Z.evaluate(this.visProp.verticaldrag.enabled)&&e["_"+a.Z.evaluate(this.visProp.verticaldrag.key)+"Key"]}}),n.Z.createView3D=function(e,t,r){var i,o,s,u,l,c,h=t[0],d=t[1];return o=a.Z.copyAttributes(r,e.options,"view3d"),(i=new n.Z.View3D(e,t,o)).defaultAxes=i.create("axes3d",t,r),s=h[0],u=h[1],l=d[0],c=d[1],i.az_slide=e.create("slider",[[s-1,u-2],[s+l+1,u-2],[0,1,2*Math.PI]],{style:6,name:"az",point1:{frozen:!0},point2:{frozen:!0}}),i.el_slide=e.create("slider",[[s-1,u],[s-1,u+c],[0,.3,Math.PI/2]],{style:6,name:"el",point1:{frozen:!0},point2:{frozen:!0}}),i.board.highlightInfobox=function(e,t,r){var n,o,s,u,l,c,h='<span style="color:black; font-size:200%">⇄ &nbsp;</span>',d=r.board,p=null;for(i.isVerticalDrag()&&(h='<span style="color:black; font-size:200%">⇅ &nbsp;</span>'),o=0;o<r.parents.length&&!(p=d.objects[r.parents[o]]).is3D;o++);if(p){if(u=[1,0,0,p.coords[3]],s=i.project2DTo3DPlane(p.element2D,[1,0,0,1],u),!i.isInCube(s)){i.board.highlightCustomInfobox("",p);return}n=a.Z.evaluate(p.visProp.infoboxdigits),c=i.board.infobox,l="auto"===n?c.useLocale()?[h,"(",c.formatNumberLocale(p.X())," | ",c.formatNumberLocale(p.Y())," | ",c.formatNumberLocale(p.Z()),")"]:[h,"(",a.Z.autoDigits(p.X())," | ",a.Z.autoDigits(p.Y())," | ",a.Z.autoDigits(p.Z()),")"]:c.useLocale()?[h,"(",c.formatNumberLocale(p.X(),n)," | ",c.formatNumberLocale(p.Y(),n)," | ",c.formatNumberLocale(p.Z(),n),")"]:[h,"(",a.Z.toFixed(p.X(),n)," | ",a.Z.toFixed(p.Y(),n)," | ",a.Z.toFixed(p.Z(),n),")"],i.board.highlightCustomInfobox(l.join(""),p)}else i.board.highlightCustomInfobox("("+e+", "+t+")",r)},i.board.update(),i},n.Z.registerElement("view3d",n.Z.createView3D),n.Z.View3D,n.Z.GeometryElement3D=function(e,t){this.elType=t,this.id=this.board.setId(this,t),this.view=e,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,""!==this.name&&(this.view.elementsByName[this.name]=this)},n.Z.extend(n.Z.GeometryElement3D.prototype,{setAttr2D:function(e){return e.name=this.name,e},setAttribute:function(e){var t,r,i,o,s,u={};for(t=0;t<arguments.length;t++)o=arguments[t],a.Z.isString(o)?(s=o.split(":"),u[a.Z.trim(s[0])]=a.Z.trim(s[1])):a.Z.isArray(o)?u[o[0]]=o[1]:n.Z.extend(u,o);for(t in u)if(u.hasOwnProperty(t))switch(r=t.replace(/\s+/g,"").toLowerCase(),i=u[t],r){case"numberpointshigh":case"stepsu":case"stepsv":a.Z.exists(this.visProp[r])&&(!n.Z.Validator[r]||n.Z.Validator[r]&&n.Z.Validator[r](i)||n.Z.Validator[r]&&a.Z.isFunction(i)&&n.Z.Validator[r](i()))&&(i=(!i.toLowerCase||"false"!==i.toLowerCase())&&i,this._set(r,i));break;default:a.Z.exists(this.element2D)&&this.element2D.setAttribute(u)}},getAttribute:function(e){var t;switch(e=e.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":t=this.visProp[e];break;default:a.Z.exists(this.element2D)&&(t=this.element2D.getAttribute(e))}return t},getAttributes:function(){var e,t,r={},i=["numberpointshigh","stepsu","stepsv"],n=i.length;for(a.Z.exists(this.element2D)&&(r=a.Z.merge(this.element2D.getAttributes())),e=0;e<n;e++)t=i[e],a.Z.exists(this.visProp[t])&&(r[t]=this.visProp[t]);return r},remove:function(){}}),n.Z.GeometryElement3D,n.Z.createAxes3D=function(e,t,r){var i,n,o,s,u,l,c,h,d,p,f,m,v,g,b,y,x,C=t[0],Z=["x","y","z"],_="Axis",w=["Rear","Front"],E=[0,0,0],N=[0,0,0],S={};if(a.Z.exists(C.bbox3D))for(i=0;i<Z.length;i++)E[i]=C.bbox3D[i][0],N[i]=C.bbox3D[i][1];else for(i=0;i<Z.length;i++)E[i]=t[1][i],N[i]=t[2][1];for(i=0,c=(l=a.Z.copyAttributes(r,e.options,"axes3d")).axesposition;i<Z.length;i++)b=(h=Z[i])+_,"center"===c?(d=[0,0,0],(p=[0,0,0])[i]=N[i],S[b]=C.create("axis3d",[d,p],l[b.toLowerCase()])):(b+="Border",d=E.slice(),p=N.slice(),2===i?(d[1]=N[1],p[0]=E[0]):(d[i]=N[i],p[2]=E[2]),p[i]=N[i],l[b.toLowerCase()].lastArrow=!1,S[b]=C.create("axis3d",[d,p],l[b.toLowerCase()]),x={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},2===i&&(x.tickEndings=[1,0]),S[b+"Ticks"]=C.create("ticks",[S[b],1],x));for(i=0,S.O=C.create("intersection",[S[Z[0]+_],S[Z[1]+_]],{name:"",visible:!1,withLabel:!1});i<Z.length;i++)for(n=0,s=(i+1)%3,u=(i+2)%3,h=Z[i];n<w.length;n++)(d=[0,0,0])[i]=0===n?E[i]:N[i],m=[0,0,0],(f=[0,0,0])[s]=1,m[u]=1,v=[E[s],N[s]],g=[E[u],N[u]],b=h+"Plane"+w[n],l=a.Z.copyAttributes(r,e.options,"axes3d",b),S[b]=C.create("plane3d",[d,f,m,v,g],l),S[b].elType="axisplane3d";for(i=0;i<Z.length;i++)for(n=0,h=Z[i];n<w.length;n++)for(o=1;o<=2;o++)b=h+"Plane"+w[n]+Z[s=(i+o)%3].toUpperCase()+"Axis",y=h+"Plane"+w[n],p=[0,0,0],(d=[0,0,0])[i]=p[i]=0===n?E[i]:N[i],d[s]=E[s],p[s]=N[s],l=a.Z.copyAttributes(r,e.options,"axes3d",b),S[b]=C.create("axis3d",[d,p],l),S[y].addChild(S[b]),S[y].element2D.inherits.push(S[b]);return S},n.Z.registerElement("axes3d",n.Z.createAxes3D),n.Z.createAxis3D=function(e,t,r){var i,n,o,s,u,l,c,h,d,p,f,m,v,g,b,y=t[0],x=t[1],C=t[2];return v=a.Z.copyAttributes(r.point1,e.options,"axis3d","point1"),g=y.create("point",[(i=x[0],n=x[1],o=x[2],function(){return y.project3DTo2D(i,n,o)[1]}),(s=x[0],u=x[1],l=x[2],function(){return y.project3DTo2D(s,u,l)[2]})],v),v=a.Z.copyAttributes(r.point2,e.options,"axis3d","point2"),b=y.create("point",[(c=C[0],h=C[1],d=C[2],function(){return y.project3DTo2D(c,h,d)[1]}),(p=C[0],f=C[1],m=C[2],function(){return y.project3DTo2D(p,f,m)[2]})],v),v=a.Z.copyAttributes(r,e.options,"axis3d"),y.create("arrow",[g,b],v)},n.Z.registerElement("axis3d",n.Z.createAxis3D),n.Z.createMesh3D=function(e,t,r){var i,o=t[0],s=t[1],u=t[2],l=t[3],c=t[4],h=t[5];return(i=o.create("curve",[[],[]],r)).updateDataArray=function(){var e,t,r,i,d=l[0],p=l[1],f=h[0],m=h[1],v=[0,0,0],g=[0,0,0],b=[0,0,0];if(this.dataX=[],this.dataY=[],a.Z.isFunction(s))b=s().slice(1);else for(i=0;i<3;i++)b[i]=a.Z.evaluate(s[i]);for(i=0;i<3;i++)v[i]=a.Z.evaluate(u[i]),g[i]=a.Z.evaluate(c[i]);for(i=0,e=n.Z.Math.norm(v,3),t=n.Z.Math.norm(g,3);i<3;i++)v[i]/=e,g[i]/=t;r=o.getMesh([function(e,t){return b[0]+e*v[0]+t*g[0]},function(e,t){return b[1]+e*v[1]+t*g[1]},function(e,t){return b[2]+e*v[2]+t*g[2]}],[Math.ceil(d),Math.floor(p),(Math.ceil(p)-Math.floor(d))/1],[Math.ceil(f),Math.floor(m),(Math.ceil(m)-Math.floor(f))/1]),this.dataX=r[0],this.dataY=r[1]},i},n.Z.registerElement("mesh3d",n.Z.createMesh3D),n.Z.Point3D=function(e,t,r,i){this.constructor(e.board,i,s.Z.OBJECT_TYPE_POINT3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(e,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=t,this.slide=r,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=null,this._c2d=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Point3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Point3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Point3D.prototype,{updateCoords:function(){var e;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(e=0,this.coords[0]=1;e<3;e++)a.Z.isFunction(this.F[e])&&(this.coords[e+1]=a.Z.evaluate(this.F[e]));return this},initCoords:function(){var e;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(e=0,this.coords[0]=1;e<3;e++)this.coords[e+1]=a.Z.evaluate(this.F[e]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>u.Z.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(e,t){var r=this.coords;return this.coords.slice(),3===e.length?(r[0]=1,r[1]=e[0],r[2]=e[1],r[3]=e[2]):(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[2],this.normalizeCoords()),this},update:function(e){var t,r;return this.element2D.draggable()&&0!==h.Z.distance(this._c2d,this.element2D.coords.usrCoords)?this.slide?this.projectCoords2Surface():(this.view.isVerticalDrag()?t=this.view.project2DTo3DVertical(this.element2D,this.coords):(r=[1,0,0,this.coords[3]],t=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],r)),0!==t[0]&&(this.coords=this.view.project3DToCube(t))):(this.updateCoords(),this.element2D.coords.setCoordinates(s.Z.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords2Surface:function(){var e,t,r=[0,0],i=this.slide,n=this;null!==i&&(a.Z.exists(this._params)&&(r=this._params.slice()),u.Z.Nlp.FindMinimum(function(e,t,r,o){var s=[1,i.X(r[0],r[1]),i.Y(r[0],r[1]),i.Z(r[0],r[1])],a=n.view.project3DTo2D(s);return o[0]=n.element2D.X()-a[1],o[1]=n.element2D.Y()-a[2],o[0]*o[0]+o[1]*o[1]},2,2,r,5,1e-6,0,200),e=[1,i.X(r[0],r[1]),i.Y(r[0],r[1]),i.Z(r[0],r[1])],t=this.view.project3DTo2D(e),this._params=r,this.coords=e,this.element2D.coords.setCoordinates(s.Z.COORDS_BY_USER,t),this._c2d=t)},__evt__update3D:function(e){}}),n.Z.createPoint3D=function(e,t,r){var i,o,s,u,l,c=t[0];if(s=t.length>2&&a.Z.exists(t[t.length-1].is3D)?t.pop():null,2===t.length)o=t[1];else if(4===t.length)o=t.slice(1);else throw Error("JSXGraph: Can't create point3d with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [[x,y,z]], [x,y,z]");return i=a.Z.copyAttributes(r,e.options,"point3d"),(l=new n.Z.Point3D(c,o,s,i)).initCoords(),u=c.project3DTo2D(l.coords),i=l.setAttr2D(i),l.element2D=c.create("point",u,i),l.addChild(l.element2D),l.inherits.push(l.element2D),l.element2D.setParents(l),l._c2d=l.element2D.coords.usrCoords.slice(),l},n.Z.registerElement("point3d",n.Z.createPoint3D),n.Z.Curve3D=function(e,t,r,i,n,o,u){this.constructor(e.board,u,s.Z.OBJECT_TYPE_CURVE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(e,"curve3d"),this.board.finalizeAdding(this),this.F=t,this.X=r,this.Y=i,this.Z=n,this.dataX=null,this.dataY=null,this.dataZ=null,null!==this.F&&(this.X=function(e){return this.F(e)[0]},this.Y=function(e){return this.F(e)[1]},this.Z=function(e){return this.F(e)[2]}),this.range=o,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Curve3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Curve3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Curve3D.prototype,{updateDataArray2D:function(){var e,t,r,i,n,o,s,u,l,c=a.Z.evaluate(this.visProp.numberpointshigh),h=[0,0,0];if(s=[],u=[],a.Z.exists(this.dataX))for(o=0,c=this.dataX.length;o<c;o++)h=[this.dataX[o],this.dataY[o],this.dataZ[o]],n=this.view.project3DTo2D(h),s.push(n[1]),u.push(n[2]);else if(a.Z.isArray(this.X))for(o=0,c=this.X.length;o<c;o++)h=[this.X[o],this.Y[o],this.Z[o]],n=this.view.project3DTo2D(h),s.push(n[1]),u.push(n[2]);else for(l=0,e=a.Z.evaluate(this.range),t=a.Z.evaluate(e[0]),i=((r=a.Z.evaluate(e[1]))-t)/(c-1),o=t;l<c&&o<=r;l++,o+=i)h=null!==this.F?this.F(o):[this.X(o),this.Y(o),this.Z(o)],n=this.view.project3DTo2D(h),s.push(n[1]),u.push(n[2]);return{X:s,Y:u}},updateDataArray:function(){},update:function(){return this.updateDataArray(),this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createCurve3D=function(e,t,r){var i,o,s,u,l,c,h,d=t[0];return 3===t.length?(i=t[1],l=t[2],o=null,s=null,u=null):(o=t[1],s=t[2],u=t[3],l=t[4],i=null),c=a.Z.copyAttributes(r,e.options,"curve3d"),c=(h=new n.Z.Curve3D(d,i,o,s,u,l,c)).setAttr2D(c),h.element2D=d.create("curve",[[],[]],c),h.element2D.updateDataArray=function(){var e=h.updateDataArray2D();this.dataX=e.X,this.dataY=e.Y},h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),h.element2D.prepareUpdate().update(),e.isSuspendedUpdate||h.element2D.updateVisibility().updateRenderer(),h},n.Z.registerElement("curve3d",n.Z.createCurve3D),n.Z.createVectorfield3D=function(e,t,r){var i,n,o=t[0];if(!(t.length>=5&&(a.Z.isArray(t[1])||a.Z.isFunction(t[0])||a.Z.isString(t[0]))&&a.Z.isArray(t[2])&&3===t[1].length&&a.Z.isArray(t[3])&&3===t[2].length&&a.Z.isArray(t[4])&&3===t[3].length))throw Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof t[0]+"', '"+typeof t[1]+"', '"+typeof t[2]+"'.'"+typeof t[1]+"', ");return n=a.Z.copyAttributes(r,e.options,"vectorfield3d"),(i=o.create("curve3d",[[],[],[]],n)).setF=function(e,t){var r,n,o;return a.Z.isArray(e)?(r=a.Z.createFunction(e[0],this.board,t),n=a.Z.createFunction(e[1],this.board,t),o=a.Z.createFunction(e[2],this.board,t),this.F=function(e,t,i){return[r(e,t,i),n(e,t,i),o(e,t,i)]}):this.F=a.Z.createFunction(e,i.board,t),this},i.setF(t[1],"x, y, z"),i.xData=t[2],i.yData=t[3],i.zData=t[4],i.updateDataArray=function(){var t,r,i,n,o,s,l,c,h,d,p,f,m,v,g,b,y,x=a.Z.evaluate(this.visProp.scale),C=[a.Z.evaluate(this.xData[0]),a.Z.evaluate(this.yData[0]),a.Z.evaluate(this.zData[0])],Z=[a.Z.evaluate(this.xData[1]),a.Z.evaluate(this.yData[1]),a.Z.evaluate(this.zData[1])],_=[a.Z.evaluate(this.xData[2]),a.Z.evaluate(this.yData[2]),a.Z.evaluate(this.zData[2])],w=[(_[0]-C[0])/Z[0],(_[1]-C[1])/Z[1],(_[2]-C[2])/Z[2]],E=a.Z.evaluate(this.visProp.arrowhead.enabled);for(E&&(m=a.Z.evaluate(this.visProp.arrowhead.size),y=a.Z.evaluate(this.visProp.arrowhead.angle),v=m/e.unitX,g=m/e.unitY,b=m/Math.sqrt(e.unitX*e.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],r=0,s=C[0];r<=Z[0];s+=w[0],r++)for(i=0,l=C[1];i<=Z[1];l+=w[1],i++)for(t=0,c=C[2];t<=Z[2];c+=w[2],t++)n=this.F(s,l,c),!((o=u.Z.norm(n))<Number.EPSILON)&&(n[0]*=x,n[1]*=x,n[2]*=x,this.dataX=this.dataX.concat([s,s+n[0],NaN]),this.dataY=this.dataY.concat([l,l+n[1],NaN]),this.dataZ=this.dataZ.concat([c,c+n[2],NaN]),E&&(o*=x,h=Math.atan2(n[1],n[0]),d=(f=Math.asin(n[2]/o))-y,p=f+y,this.dataX=this.dataX.concat([s+n[0]-v*Math.cos(h)*Math.cos(d),s+n[0],s+n[0]-v*Math.cos(h)*Math.cos(p),NaN]),this.dataY=this.dataY.concat([l+n[1]-g*Math.sin(h)*Math.cos(d),l+n[1],l+n[1]-g*Math.sin(h)*Math.cos(p),NaN]),this.dataZ=this.dataZ.concat([c+n[2]-b*Math.sin(p),c+n[2],c+n[2]-b*Math.sin(d),NaN])))},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("vectorfield3D",n.Z.createVectorfield3D),n.Z.Line3D=function(e,t,r,i,n){this.constructor(e.board,n,s.Z.OBJECT_TYPE_LINE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(e,"line3d"),this.board.finalizeAdding(this),this.point=t,this.direction=r,this.range=i||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Line3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Line3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Line3D.prototype,{getPointCoords:function(e){var t,r,i=[],n=[];if(i=[this.point.X(),this.point.Y(),this.point.Z()],a.Z.isFunction(this.direction))n=this.direction();else for(t=1;t<4;t++)n.push(a.Z.evaluate(this.direction[t]));return Math.abs(r=a.Z.evaluate(e))===1/0&&(e=this.view.intersectionLineCube(i,n,r)),[i[0]+n[0]*r,i[1]+n[1]*r,i[2]+n[2]*r]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createLine3D=function(e,t,r){var i,o,s,u,l,c,h,d,p=t[0];return i=a.Z.copyAttributes(r,e.options,"line3d"),a.Z.isPoint3D(t[2])||3===t.length&&(a.Z.isArray(t[2])||a.Z.isFunction(t[2]))?(c=a.Z.providePoints3D(p,[t[1]],r,"line3d",["point1"])[0],h=a.Z.providePoints3D(p,[t[2]],r,"line3d",["point2"])[0],u=function(){return[h.X()-c.X(),h.Y()-c.Y(),h.Z()-c.Z()]},l=[0,1],d=new n.Z.Line3D(p,c,u,l,i)):(s=a.Z.providePoints3D(p,[t[1]],r,"line3d",["point"])[0],a.Z.isFunction(t[2])?u=t[2]:3===t[2].length?u=[1].concat(t[2]):4===t[2].length&&(u=t[2]),l=t[3],o=a.Z.providePoints3D(p,[[0,0,0],[0,0,0]],r,"line3d",["point1","point2"]),d=new n.Z.Line3D(p,s,u,l,i),o[0].F=function(){return d.getPointCoords(a.Z.evaluate(d.range[0]))},o[0].prepareUpdate().update(),c=o[0],o[1].F=function(){return d.getPointCoords(a.Z.evaluate(d.range[1]))},o[1].prepareUpdate().update(),h=o[1]),i=d.setAttr2D(i),d.element2D=p.create("segment",[c.element2D,h.element2D],i),d.addChild(d.element2D),d.inherits.push(d.element2D),d.element2D.setParents(d),d.point1=c,d.point2=h,d.point1._is_new?(d.addChild(d.point1),delete d.point1._is_new):d.point1.addChild(d),d.point2._is_new?(d.addChild(d.point2),delete d.point2._is_new):d.point2.addChild(d),a.Z.exists(s)&&(s._is_new?(d.addChild(s),delete s._is_new):s.addChild(d)),d.update(),d.element2D.prepareUpdate().update().updateRenderer(),d},n.Z.registerElement("line3d",n.Z.createLine3D),n.Z.Plane3D=function(e,t,r,i,n,o,u){this.constructor(e.board,u,s.Z.OBJECT_TYPE_PLANE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(e,"plane3d"),this.board.finalizeAdding(this),this.point=t,this.direction1=r,this.direction2=n,this.range1=i||[-1/0,1/0],this.range2=o||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Plane3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Plane3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Plane3D.prototype,{updateNormal:function(){var e,t;for(e=0;e<3;e++)this.vec1[e]=a.Z.evaluate(this.direction1[e]),this.vec2[e]=a.Z.evaluate(this.direction2[e]);if(this.normal=u.Z.crossProduct(this.vec1,this.vec2),Math.abs(t=u.Z.norm(this.normal))>u.Z.eps)for(e=0;e<3;e++)this.normal[e]/=t;return this.d=u.Z.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var e,t,r,i,n,o,s,l,c,d,p,f,m,v,g=["xPlaneRear","yPlaneRear","zPlaneRear"],b=[],y=[0,0,0],x=[0,0,0],C=[0,0,0],Z=[0,0,0],_=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),"axisplane3d"!==this.elType&&_.defaultAxes&&a.Z.evaluate(this.range1[0])===-1/0&&a.Z.evaluate(this.range1[1])===1/0&&a.Z.evaluate(this.range2[0])===-1/0&&a.Z.evaluate(this.range2[1])===1/0){for(d=0;d<g.length;d++)if(3===(Z=_.intersectionPlanePlane(this,_.defaultAxes[g[d]]))[0].length&&3===Z[1].length||((Z=[0,0,0])[d]=_.bbox3D[d][1],l=u.Z.innerProduct(Z,_.defaultAxes[g[d]].normal,3),3===(Z=_.intersectionPlanePlane(this,_.defaultAxes[g[d]],l))[0].length&&3===Z[1].length)){for(c=0;c<b.length&&!(h.Z.distance(Z[0],b[c][0],3)<u.Z.eps&&h.Z.distance(Z[1],b[c][1],3)<u.Z.eps||h.Z.distance(Z[0],b[c][1],3)<u.Z.eps&&h.Z.distance(Z[1],b[c][0],3)<u.Z.eps);c++);c===b.length&&b.push(Z.slice())}m=0,c=0;do{for(3===(Z=b[m][c]).length&&(n=_.project3DTo2D(Z),this.dataX.push(n[1]),this.dataY.push(n[2])),c=(c+1)%2,Z=b[m][c],v=m,d=0;d<b.length;d++){if(d!==m&&h.Z.distance(Z,b[d][0])<u.Z.eps){m=d,c=0;break}if(d!==m&&h.Z.distance(Z,b[d][1])<u.Z.eps){m=d,c=1;break}}if(m===v){console.log("Error: update plane3d: did not find next",m);break}}while(0!==m);n=_.project3DTo2D(b[0][0]),this.dataX.push(n[1]),this.dataY.push(n[2])}else{for(c=0,e=a.Z.evaluate(this.range1[0]),t=a.Z.evaluate(this.range1[1]),r=a.Z.evaluate(this.range2[0]),i=a.Z.evaluate(this.range2[1]),C=this.point.coords.slice(1),y=this.vec1.slice(),x=this.vec2.slice(),o=u.Z.norm(y,3),s=u.Z.norm(x,3);c<3;c++)y[c]/=o,x[c]/=s;for(d=0;d<4;d++){switch(d){case 0:p=e,f=r;break;case 1:p=t,f=r;break;case 2:p=t,f=i;break;case 3:p=e,f=i}for(c=0;c<3;c++)Z[c]=C[c]+p*y[c]+f*x[c];n=_.project3DTo2D(Z),this.dataX.push(n[1]),this.dataY.push(n[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createPlane3D=function(e,t,r){var i,o,s,u,l=t[0],c=t[2],h=t[3],d=t[4]||[-1/0,1/0],p=t[5]||[-1/0,1/0];return o=a.Z.providePoints3D(l,[t[1]],r,"plane3d",["point"])[0],i=a.Z.copyAttributes(r,e.options,"plane3d"),s=new n.Z.Plane3D(l,o,c,d,h,p,i),o.addChild(s),i=s.setAttr2D(i),s.element2D=l.create("curve",[[],[]],i),s.element2D.updateDataArray=function(){var e=s.updateDataArray();this.dataX=e.X,this.dataY=e.Y},s.addChild(s.element2D),s.inherits.push(s.element2D),s.element2D.setParents(s),i=a.Z.copyAttributes(r.mesh3d,e.options,"mesh3d"),Math.abs(s.range1[0])!==1/0&&Math.abs(s.range1[1])!==1/0&&Math.abs(s.range2[0])!==1/0&&Math.abs(s.range2[1])!==1/0&&(u=l.create("mesh3d",[function(){return o.coords},c,d,h,p],i),s.grid=u,s.addChild(u),s.inherits.push(u),u.setParents(s)),s.element2D.prepareUpdate().update(),e.isSuspendedUpdate||s.element2D.updateVisibility().updateRenderer(),s},n.Z.registerElement("plane3d",n.Z.createPlane3D),n.Z.Surface3D=function(e,t,r,i,n,o,u,l){this.constructor(e.board,l,s.Z.OBJECT_TYPE_SURFACE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(e,"surface3d"),this.board.finalizeAdding(this),this.F=t,this.X=r,this.Y=i,this.Z=n,null!==this.F&&(this.X=function(e,t){return this.F(e,t)[0]},this.Y=function(e,t){return this.F(e,t)[1]},this.Z=function(e,t){return this.F(e,t)[2]}),this.range_u=o,this.range_v=u,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Surface3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Surface3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Surface3D.prototype,{updateDataArray:function(){var e,t,r=a.Z.evaluate(this.visProp.stepsu),i=a.Z.evaluate(this.visProp.stepsv),n=a.Z.evaluate(this.range_u),o=a.Z.evaluate(this.range_v);return e=null!==this.F?this.F:[this.X,this.Y,this.Z],{X:(t=this.view.getMesh(e,n.concat([r]),o.concat([i])))[0],Y:t[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createParametricSurface3D=function(e,t,r){var i,o,s,u,l,c,h,d,p=t[0];return 4===t.length?(i=t[1],l=t[2],c=t[3],o=null,s=null,u=null):(o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],i=null),h=a.Z.copyAttributes(r,e.options,"surface3d"),h=(d=new n.Z.Surface3D(p,i,o,s,u,l,c,h)).setAttr2D(h),d.element2D=p.create("curve",[[],[]],h),d.element2D.updateDataArray=function(){var e=d.updateDataArray();this.dataX=e.X,this.dataY=e.Y},d.addChild(d.element2D),d.inherits.push(d.element2D),d.element2D.setParents(d),d.element2D.prepareUpdate().update(),e.isSuspendedUpdate||d.element2D.updateVisibility().updateRenderer(),d},n.Z.registerElement("parametricsurface3d",n.Z.createParametricSurface3D),n.Z.createFunctiongraph3D=function(e,t,r){var i=t[0],n=t[1],o=t[2],s=t[3];return i.create("parametricsurface3d",[function(e,t){return e},function(e,t){return t},n,o,s],r)},n.Z.registerElement("functiongraph3d",n.Z.createFunctiongraph3D);let et="#000";n.Z.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:et,highlightStrokeColor:et,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:et,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:et}},arc:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75},axis:{},boxplot:{strokeWidth:.75,strokeColor:et,fillColor:et,fillOpacity:.2,highlightStrokeWidth:.75,highlightStrokeColor:et,highlightFillColor:et,highlightFillOpacity:.1},circle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:et,highlightFillColor:"none",highlightStrokeColor:et,center:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},point2:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et}},circumcircle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:et,highlightFillColor:"none",highlightStrokeColor:et,center:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et}},circumcirclearc:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75},circumcirclesector:{strokeColor:et,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:et,strokeWidth:.75},conic:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:et,highlightStrokeColor:et,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75},grid:{strokeWidth:.75},hatch:{strokeColor:et,strokeWidth:.75},incircle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:et,highlightFillColor:"none",highlightStrokeColor:et,center:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},label:{strokeColor:et},line:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75,point1:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},point2:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et}},normal:{strokeColor:et},parallel:{strokeColor:et},perpendicular:{strokeColor:et},perpendicularsegment:{strokeColor:et},point:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},borders:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75}},sector:{strokeColor:et,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et}},slider:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et,baseline:{strokeWidth:.75,strokeColor:et,highlightStrokeColor:et},label:{strokeColor:et},highline:{strokeWidth:2.25,name:"",strokeColor:et,highlightStrokeColor:et},ticks:{strokeColor:et}},slopefield:{strokeWidth:.5625,highlightStrokeWidth:.75,highlightStrokeColor:et,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:et,strokeWidth:.75,highlightStrokeColor:et,highlightStrokeWidth:.75,point1:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},point2:{size:.75,fillColor:et,strokeColor:et,highlightStrokeWidth:3,highlightFillColor:et,highlightStrokeColor:et},ticks:{strokeWidth:.75}},text:{strokeColor:et},tracecurve:{strokeColor:et},turtle:{strokeWidth:.75,strokeColor:et,arrow:{strokeWidth:1.5,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.5625,highlightStrokeWidth:.75,highlightStrokeColor:et,highlightStrokeOpacity:.8}},n.Z.COORDS_BY_SCREEN,n.Z.COORDS_BY_USER,n.Z.Dump,n.Z.Expect,n.Z.JSXGraph,n.Z.Math,n.Z.Options,n.Z.boards,n.Z.elements,n.Z.palette,n.Z.paletteWong,n.Z.Board,n.Z.Chart,n.Z.Circle,n.Z.Complex,n.Z.Composition,n.Z.Coords,n.Z.CoordsElement,n.Z.Curve,n.Z.GeometryElement,n.Z.Group,n.Z.Image,n.Z.JessieCode,n.Z.PrefixParser,n.Z.Line,n.Z.Point,n.Z.Polygon,n.Z.Text,n.Z.Ticks,n.Z.Transformation,n.Z.Turtle,n.Z.View3D,n.Z.LMS2rgb,n.Z.addEvent,n.Z.autoDigits,n.Z.autoHighlight,n.Z.bind;let er=n.Z.capitalize;n.Z.clearVisPropOld,n.Z.clone,n.Z.cloneAndCopy,n.Z.cmpArrays,n.Z.coordsArrayToMatrix,n.Z.copyAttributes,n.Z.createEvalFunction,n.Z.createFunction,n.Z.createHTMLSlider,n.Z.debug,n.Z.debugInt,n.Z.debugLine,n.Z.debugWST,n.Z.deepCopy,n.Z.def,n.Z.deprecated,n.Z.eliminateDuplicates,n.Z.escapeHTML,n.Z.evalSlider,n.Z.evaluate,n.Z.filterElements,n.Z.getBoardByContainerId,n.Z.getCSSTransformMatrix,n.Z.getCSSTransform,n.Z.getDimensions,n.Z.getOffset,n.Z.getPosition,n.Z.getProp,n.Z.hex2rgb,n.Z.hsv2rgb,n.Z.isAndroid,n.Z.isApple,n.Z.isArray,n.Z.isInArray,n.Z.isInObject,n.Z.isMetroApp,n.Z.isMozilla,n.Z.isBoard,n.Z.isName,n.Z.isNode,n.Z.isNumber,n.Z.isObject,n.Z.isPointType,n.Z.isString,n.Z.isTouchDevice,n.Z.isTransformationOrArray,n.Z.isWebWorker,n.Z.isWebkitAndroid,n.Z.isWebkitApple,n.Z.keys,n.Z.merge,n.Z.normalizePointFace,n.Z.providePoints,n.Z.registerElement,n.Z.registerReader,n.Z.removeAllEvents,n.Z.removeElementFromArray,n.Z.removeEvent,n.Z.rgb2LMS,n.Z.rgb2bw,n.Z.rgb2cb,n.Z.rgb2css,n.Z.rgb2hex,n.Z.rgb2hsv,n.Z.rgbParser,n.Z.rgba2rgbo,n.Z.rgbo2rgba,n.Z.sanitizeHTML,n.Z.shortcut,n.Z.str2Bool,n.Z.supportsCanvas,n.Z.supportsPointerEvents,n.Z.supportsSVG,n.Z.supportsVML,n.Z.swap,n.Z.timedChunk,n.Z.toFixed,n.Z.toFullscreen,n.Z.toJSON,n.Z.trim,n.Z.trimNumber,n.Z.truncate,n.Z.unescapeHTML,n.Z.uniqueArray,n.Z.useBlackWhiteOptions,n.Z.useStandardOptions,n.Z.warn,o.Z.isBrowser?window.JXG=n.Z:o.Z.isWebWorker()&&(self.JXG=n.Z);var ei=n.Z},7901:function(e,t){"use strict";var r={};try{"object"!=typeof JXG||JXG.extend||(r=JXG)}catch(e){}r.extend=function(e,t,r,i){var n;for(n in r=r||!1,i=i||!1,t)(!r||r&&t.hasOwnProperty(n))&&(e[i?n.toLowerCase():n]=t[n])},r.defineConstant=function(e,t,i,n){(n=n||!1)&&r.exists(e[t])||Object.defineProperty(e,t,{value:i,writable:!1,enumerable:!0,configurable:!1})},r.extendConstants=function(e,t,r,i){var n,o;for(n in r=r||!1,i=i||!1,t)(!r||r&&t.hasOwnProperty(n))&&(o=i?n.toUpperCase():n,this.defineConstant(e,o,t[n]))},r.extend(r,{boards:{},readers:{},elements:{},registerElement:function(e,t){e=e.toLowerCase(),this.elements[e]=t},registerReader:function(e,t){var r,i;for(r=0;r<t.length;r++)i=t[r].toLowerCase(),"function"!=typeof this.readers[i]&&(this.readers[i]=e)},shortcut:function(e,t){return function(){return e[t].apply(this,arguments)}},getRef:function(e,t){return r.deprecated("JXG.getRef()","Board.select()"),e.select(t)},getReference:function(e,t){return r.deprecated("JXG.getReference()","Board.select()"),e.select(t)},getBoardByContainerId:function(e){var t;for(t in JXG.boards)if(JXG.boards.hasOwnProperty(t)&&JXG.boards[t].container===e)return JXG.boards[t];return null},deprecated:function(e,t){var i=e+" is deprecated.";t&&(i+=" Please use "+t+" instead."),r.warn(i)},warn:function(e){window.console&&console.warn?console.warn("WARNING:",e):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+e+"<br />")},debugInt:function(e){var t,r;for(t=0;t<arguments.length;t++)r=arguments[t],window.console&&console.log?console.log(r):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=r+"<br/>")},debugWST:function(e){var t=Error();r.debugInt.apply(this,arguments),t&&t.stack&&(r.debugInt("stacktrace"),r.debugInt(t.stack.split("\n").slice(1).join("\n")))},debugLine:function(e){var t=Error();r.debugInt.apply(this,arguments),t&&t.stack&&r.debugInt("Called from",t.stack.split("\n").slice(2,3).join("\n"))},debug:function(e){r.debugInt.apply(this,arguments)},themes:{}}),t.Z=r},2971:function(e,t,r){"use strict";var i=r(7901),n=r(1013);i.Z.Complex=function(e,t){this.isComplex=!0,e&&e.isComplex&&(t=e.imaginary,e=e.real),this.real=e||0,this.imaginary=t||0,this.absval=0,this.angle=0},i.Z.extend(i.Z.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(e){return n.Z.isNumber(e)?this.real+=e:(this.real+=e.real,this.imaginary+=e.imaginary),this},sub:function(e){return n.Z.isNumber(e)?this.real-=e:(this.real-=e.real,this.imaginary-=e.imaginary),this},mult:function(e){var t,r;return n.Z.isNumber(e)?(this.real*=e,this.imaginary*=e):(t=this.real,r=this.imaginary,this.real=t*e.real-r*e.imaginary,this.imaginary=t*e.imaginary+r*e.real),this},div:function(e){var t,r,i;if(n.Z.isNumber(e)){if(Math.abs(e)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=e,this.imaginary/=e}else{if(Math.abs(e.real)<Math.eps&&Math.abs(e.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;t=e.real*e.real+e.imaginary*e.imaginary,i=this.real,r=this.imaginary,this.real=(i*e.real+r*e.imaginary)/t,this.imaginary=(r*e.real-i*e.imaginary)/t}return this},conj:function(){return this.imaginary*=-1,this}}),i.Z.C={},i.Z.C.add=function(e,t){var r=new i.Z.Complex(e);return r.add(t),r},i.Z.C.sub=function(e,t){var r=new i.Z.Complex(e);return r.sub(t),r},i.Z.C.mult=function(e,t){var r=new i.Z.Complex(e);return r.mult(t),r},i.Z.C.div=function(e,t){var r=new i.Z.Complex(e);return r.div(t),r},i.Z.C.conj=function(e){var t=new i.Z.Complex(e);return t.conj(),t},i.Z.C.abs=function(e){var t=new i.Z.Complex(e);return t.conj(),t.mult(e),Math.sqrt(t.real)},i.Z.C.copy=function(e){return new i.Z.Complex(e)},i.Z.Complex.C=i.Z.C,t.Z=i.Z.Complex},7895:function(e,t,r){"use strict";var i=r(7901),n=r(2840),o=r(9401),s=r(4204),a=r(6692),u=r(1013),l=r(2285);s.Z.Geometry={},i.Z.extend(s.Z.Geometry,{angle:function(e,t,r){var n,o,s,a,u=[],l=[],c=[];return i.Z.deprecated("Geometry.angle()","Geometry.rad()"),e.coords?(u[0]=e.coords.usrCoords[1],u[1]=e.coords.usrCoords[2]):(u[0]=e[0],u[1]=e[1]),t.coords?(l[0]=t.coords.usrCoords[1],l[1]=t.coords.usrCoords[2]):(l[0]=t[0],l[1]=t[1]),r.coords?(c[0]=r.coords.usrCoords[1],c[1]=r.coords.usrCoords[2]):(c[0]=r[0],c[1]=r[1]),n=u[0]-l[0],o=u[1]-l[1],s=c[0]-l[0],Math.atan2(n*(a=c[1]-l[1])-o*s,n*s+o*a)},trueAngle:function(e,t,r){return 57.29577951308232*this.rad(e,t,r)},rad:function(e,t,r){var i,n,o,s,a,u,l;return e.coords?(i=e.coords.usrCoords[1],n=e.coords.usrCoords[2]):(i=e[0],n=e[1]),t.coords?(o=t.coords.usrCoords[1],s=t.coords.usrCoords[2]):(o=t[0],s=t[1]),r.coords?(a=r.coords.usrCoords[1],u=r.coords.usrCoords[2]):(a=r[0],u=r[1]),(l=Math.atan2(u-s,a-o)-Math.atan2(n-s,i-o))<0&&(l+=6.283185307179586),l},angleBisector:function(e,t,r,i){var s,a,l,c,h,d=e.coords.usrCoords,p=t.coords.usrCoords,f=r.coords.usrCoords;return(u.Z.exists(i)||(i=e.board),0===p[0])?new o.Z(n.Z.COORDS_BY_USER,[1,(d[1]+f[1])*.5,(d[2]+f[2])*.5],i):(c=d[1]-p[1],s=Math.atan2(h=d[2]-p[2],c),c=f[1]-p[1],l=(s+(a=Math.atan2(h=f[2]-p[2],c)))*.5,s>a&&(l+=Math.PI),c=Math.cos(l)+p[1],h=Math.sin(l)+p[2],new o.Z(n.Z.COORDS_BY_USER,[1,c,h],i))},reflection:function(e,t,r){var i,s,a,l,c,h,d=t.coords.usrCoords,p=e.point1.coords.usrCoords,f=e.point2.coords.usrCoords;return u.Z.exists(r)||(r=t.board),l=f[1]-p[1],c=f[2]-p[2],i=d[1]-p[1],h=(l*(d[2]-p[2])-c*i)/(l*l+c*c),s=d[1]+2*h*c,a=d[2]-2*h*l,new o.Z(n.Z.COORDS_BY_USER,[s,a],r)},rotation:function(e,t,r,i){var s,a,l,c,h,d,p=t.coords.usrCoords,f=e.coords.usrCoords;return u.Z.exists(i)||(i=t.board),s=p[1]-f[1],a=p[2]-f[2],h=s*(l=Math.cos(r))-a*(c=Math.sin(r))+f[1],d=s*c+a*l+f[2],new o.Z(n.Z.COORDS_BY_USER,[h,d],i)},perpendicular:function(e,t,r){var i,a,l,c,h,d=e.point1.coords.usrCoords,p=e.point2.coords.usrCoords,f=t.coords.usrCoords;return u.Z.exists(r)||(r=t.board),t===e.point1?(i=d[1]+p[2]-d[2],a=d[2]-p[1]+d[1],Math.abs(h=d[0]*p[0])<s.Z.eps&&(i=p[2],a=-p[1]),c=[h,i,a],l=!0):t===e.point2?(i=p[1]+d[2]-p[2],a=p[2]-d[1]+p[1],Math.abs(h=d[0]*p[0])<s.Z.eps&&(i=d[2],a=-d[1]),c=[h,i,a],l=!1):Math.abs(s.Z.innerProduct(f,e.stdform,3))<s.Z.eps?(i=f[1]+p[2]-f[2],a=f[2]-p[1]+f[1],Math.abs(h=p[0])<s.Z.eps&&(i=p[2],a=-p[1]),l=!0,Math.abs(h)>s.Z.eps&&Math.abs(i-f[1])<s.Z.eps&&Math.abs(a-f[2])<s.Z.eps&&(i=f[1]+d[2]-f[2],a=f[2]-d[1]+f[1],l=!1),c=[h,i,a]):(c=[0,e.stdform[1],e.stdform[2]],c=s.Z.crossProduct(c,f),c=s.Z.crossProduct(c,e.stdform),l=!0),[new o.Z(n.Z.COORDS_BY_USER,c,r),l]},circumcenterMidpoint:function(){i.Z.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(e,t,r,i){var a,l,c,h,d=e.coords.usrCoords,p=t.coords.usrCoords,f=r.coords.usrCoords;return u.Z.exists(i)||(i=e.board),a=[p[0]-d[0],-p[2]+d[2],p[1]-d[1]],l=[(d[0]+p[0])*.5,(d[1]+p[1])*.5,(d[2]+p[2])*.5],c=s.Z.crossProduct(a,l),a=[f[0]-p[0],-f[2]+p[2],f[1]-p[1]],l=[(p[0]+f[0])*.5,(p[1]+f[1])*.5,(p[2]+f[2])*.5],h=s.Z.crossProduct(a,l),new o.Z(n.Z.COORDS_BY_USER,s.Z.crossProduct(c,h),i)},distance:function(e,t,r){var i,n=0;for(r||(r=Math.min(e.length,t.length)),i=0;i<r;i++)n+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(n)},affineDistance:function(e,t,r){var i;return(i=this.distance(e,t,r))>s.Z.eps&&(Math.abs(e[0])<s.Z.eps||Math.abs(t[0])<s.Z.eps)?1/0:i},affineRatio:function(e,t,r){var i;return u.Z.exists(e.usrCoords)&&(e=e.usrCoords),u.Z.exists(t.usrCoords)&&(t=t.usrCoords),u.Z.exists(r.usrCoords)&&(r=r.usrCoords),Math.abs(i=t[1]-e[1])>s.Z.eps?(r[1]-e[1])/i:(r[2]-e[2])/(t[2]-e[2])},sortVertices:function(e){for(var t,r=l.Z.each(e,l.Z.coordsArray),i=r.length,n=null;r[0][0]===r[i-1][0]&&r[0][1]===r[i-1][1]&&r[0][2]===r[i-1][2];)n=r.pop(),i--;return t=r[0],r.sort(function(e,r){return(e[2]===t[2]&&e[1]===t[1]?-1/0:Math.atan2(e[2]-t[2],e[1]-t[1]))-(r[2]===t[2]&&r[1]===t[1]?-1/0:Math.atan2(r[2]-t[2],r[1]-t[1]))}),null!==n&&r.push(n),r},signedTriangle:function(e,t,r){var i=l.Z.coordsArray(e),n=l.Z.coordsArray(t),o=l.Z.coordsArray(r);return .5*((n[1]-i[1])*(o[2]-i[2])-(n[2]-i[2])*(o[1]-i[1]))},signedPolygon:function(e,t){var r,i,n=0,o=l.Z.each(e,l.Z.coordsArray);for(void 0===t&&(t=!0),t?o.unshift(o[o.length-1]):o=this.sortVertices(o),i=o.length,r=1;r<i;r++)n+=o[r-1][1]*o[r][2]-o[r][1]*o[r-1][2];return .5*n},GrahamScan:function(e){var t,r=1,i=l.Z.each(e,l.Z.coordsArray),n=i.length;for(t=2,n=(i=this.sortVertices(i)).length;t<n;t++){for(;0>=this.signedTriangle(i[r-1],i[r],i[t]);){if(r>1)r-=1;else if(t===n-1)break;t+=1}r+=1,i=u.Z.swap(i,r,t)}return i.slice(0,r)},calcStraight:function(e,t,r,i){var o,a,l,c,h,d,p,f,m,v;u.Z.exists(i)||(i=10),d=u.Z.evaluate(e.visProp.straightfirst),p=u.Z.evaluate(e.visProp.straightlast),Math.abs(t.scrCoords[0])<s.Z.eps&&(d=!0),Math.abs(r.scrCoords[0])<s.Z.eps&&(p=!0),!(!d&&!p||((f=[])[0]=e.stdform[0]-e.stdform[1]*e.board.origin.scrCoords[1]/e.board.unitX+e.stdform[2]*e.board.origin.scrCoords[2]/e.board.unitY,f[1]=e.stdform[1]/e.board.unitX,f[2]=-e.stdform[2]/e.board.unitY,isNaN(f[0]+f[1]+f[2])))&&(o=!1,a=!1,o=!d&&Math.abs(t.usrCoords[0])>=s.Z.eps&&t.scrCoords[1]>=0&&t.scrCoords[1]<=e.board.canvasWidth&&t.scrCoords[2]>=0&&t.scrCoords[2]<=e.board.canvasHeight,a=!p&&Math.abs(r.usrCoords[0])>=s.Z.eps&&r.scrCoords[1]>=0&&r.scrCoords[1]<=e.board.canvasWidth&&r.scrCoords[2]>=0&&r.scrCoords[2]<=e.board.canvasHeight,c=(l=this.meetLineBoard(f,e.board,i))[0],h=l[1],(o||a||(d||!p||this.isSameDirection(t,r,c)||this.isSameDirection(t,r,h))&&(!d||p||this.isSameDirection(r,t,c)||this.isSameDirection(r,t,h)))&&(o?a||(v=this.isSameDir(t,r,c,h)?h:c):a?m=this.isSameDir(t,r,c,h)?c:h:this.isSameDir(t,r,c,h)?(m=c,v=h):(v=c,m=h),m&&t.setCoordinates(n.Z.COORDS_BY_USER,m.usrCoords),v&&r.setCoordinates(n.Z.COORDS_BY_USER,v.usrCoords)))},calcLineDelimitingPoints:function(e,t,r){var i,o,a,l,c,h,d,p,f,m=!1,v=!1;c=u.Z.evaluate(e.visProp.straightfirst),h=u.Z.evaluate(e.visProp.straightlast),Math.abs(t.scrCoords[0])<s.Z.eps&&(c=!0),Math.abs(r.scrCoords[0])<s.Z.eps&&(h=!0),(d=[])[0]=e.stdform[0]-e.stdform[1]*e.board.origin.scrCoords[1]/e.board.unitX+e.stdform[2]*e.board.origin.scrCoords[2]/e.board.unitY,d[1]=e.stdform[1]/e.board.unitX,d[2]=-e.stdform[2]/e.board.unitY,!isNaN(d[0]+d[1]+d[2])&&(m=!c,v=!h,o=e.board.getBoundingBox(),e.getSlope()>=0?(a=this.projectPointToLine({coords:{usrCoords:[1,o[2],o[1]]}},e,e.board),l=this.projectPointToLine({coords:{usrCoords:[1,o[0],o[3]]}},e,e.board)):(a=this.projectPointToLine({coords:{usrCoords:[1,o[0],o[1]]}},e,e.board),l=this.projectPointToLine({coords:{usrCoords:[1,o[2],o[3]]}},e,e.board)),!(!m&&!v&&(!c&&!h&&(i=t.distance(n.Z.COORDS_BY_USER,r),Math.abs(t.distance(n.Z.COORDS_BY_USER,a)+a.distance(n.Z.COORDS_BY_USER,r)-i)>s.Z.eps||Math.abs(t.distance(n.Z.COORDS_BY_USER,l)+l.distance(n.Z.COORDS_BY_USER,r)-i)>s.Z.eps)||!c&&h&&!this.isSameDirection(t,r,a)&&!this.isSameDirection(t,r,l)||c&&!h&&!this.isSameDirection(r,t,a)&&!this.isSameDirection(r,t,l)))&&(m?v||(f=this.isSameDir(t,r,a,l)?l:a):v?p=this.isSameDir(t,r,a,l)?a:l:this.isSameDir(t,r,a,l)?(p=a,f=l):(f=a,p=l),p&&t.setCoordinates(n.Z.COORDS_BY_USER,p.usrCoords),f&&r.setCoordinates(n.Z.COORDS_BY_USER,f.usrCoords)))},calcLabelQuadrant:function(e){return e<0&&(e+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((e+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(e,t,r,i){var n=t.usrCoords[1]-e.usrCoords[1],o=t.usrCoords[2]-e.usrCoords[2],a=i.usrCoords[1]-r.usrCoords[1],u=i.usrCoords[2]-r.usrCoords[2];return Math.abs(t.usrCoords[0])<s.Z.eps&&(n=t.usrCoords[1],o=t.usrCoords[2]),Math.abs(e.usrCoords[0])<s.Z.eps&&(n=-e.usrCoords[1],o=-e.usrCoords[2]),n*a+o*u>=0},isSameDirection:function(e,t,r){var i,n,o,a,u=!1;return i=t.usrCoords[1]-e.usrCoords[1],n=t.usrCoords[2]-e.usrCoords[2],o=r.usrCoords[1]-e.usrCoords[1],a=r.usrCoords[2]-e.usrCoords[2],Math.abs(i)<s.Z.eps&&(i=0),Math.abs(n)<s.Z.eps&&(n=0),Math.abs(o)<s.Z.eps&&(o=0),Math.abs(a)<s.Z.eps&&(a=0),i>=0&&o>=0?u=n>=0&&a>=0||n<=0&&a<=0:i<=0&&o<=0&&(u=n>=0&&a>=0||n<=0&&a<=0),u},det3p:function(e,t,r){return(e[1]-r[1])*(t[2]-r[2])-(t[1]-r[1])*(e[2]-r[2])},windingNumber:function(e,t,r){var i,n,o,a,l,c,h=0,d=t.length,p=e[1],f=e[2],m=0;if(0===d)return 0;if((r=r||!1)&&(m=1),isNaN(p)||isNaN(f)||(u.Z.exists(t[0].coords)?(i=t[0].coords,n=t[d-1].coords):(i=t[0],n=t[d-1]),i.usrCoords[1]===p&&i.usrCoords[2]===f))return 1;for(c=0;c<d-m;c++)if(u.Z.exists(t[c].coords)?(n=t[c].coords.usrCoords,o=t[(c+1)%d].coords.usrCoords):(n=t[c].usrCoords,o=t[(c+1)%d].usrCoords),!(0===n[0]||0===o[0]||isNaN(n[1])||isNaN(o[1])||isNaN(n[2])||isNaN(o[2]))){if(o[2]===f){if(o[1]===p)return 1;if(n[2]===f&&o[1]>p==n[1]<p)return 0}if(n[2]<f!=o[2]<f){if(l=2*(o[2]>n[2]?1:0)-1,n[1]>=p){if(o[1]>p)h+=l;else{if(0===(a=this.det3p(n,o,e)))return 0;a>0+s.Z.eps==o[2]>n[2]&&(h+=l)}}else o[1]>p&&(a=this.det3p(n,o,e))>0+s.Z.eps==o[2]>n[2]&&(h+=l)}}return h},pnpoly:function(e,t,r,i){var s,a,l,c,h,d,p,f,m=!1;for(i===n.Z.COORDS_BY_USER?(c=(d=new o.Z(n.Z.COORDS_BY_USER,[e,t],this.board)).scrCoords[1],h=d.scrCoords[2]):(c=e,h=t),s=0,a=(l=r.length)-2;s<l-1;a=s++)p=u.Z.exists(r[s].coords)?r[s].coords:r[s],f=u.Z.exists(r[a].coords)?r[a].coords:r[a],p.scrCoords[2]>h!=f.scrCoords[2]>h&&c<(f.scrCoords[1]-p.scrCoords[1])*(h-p.scrCoords[2])/(f.scrCoords[2]-p.scrCoords[2])+p.scrCoords[1]&&(m=!m);return m},intersectionFunction:function(e,t,r,a,l,c){var h=this,d=!1,p=!1;return d=t.elementClass===n.Z.OBJECT_CLASS_CURVE&&(t.type===n.Z.OBJECT_TYPE_ARC||t.type===n.Z.OBJECT_TYPE_SECTOR),p=r.elementClass===n.Z.OBJECT_CLASS_CURVE&&(r.type===n.Z.OBJECT_TYPE_ARC||r.type===n.Z.OBJECT_TYPE_SECTOR),(t.elementClass===n.Z.OBJECT_CLASS_CURVE||r.elementClass===n.Z.OBJECT_CLASS_CURVE)&&(t.elementClass===n.Z.OBJECT_CLASS_CURVE||t.elementClass===n.Z.OBJECT_CLASS_CIRCLE)&&(r.elementClass===n.Z.OBJECT_CLASS_CURVE||r.elementClass===n.Z.OBJECT_CLASS_CIRCLE)?function(){return h.meetCurveCurve(t,r,a,l,t.board)}:(t.elementClass!==n.Z.OBJECT_CLASS_CURVE||d||r.elementClass!==n.Z.OBJECT_CLASS_LINE)&&(r.elementClass!==n.Z.OBJECT_CLASS_CURVE||p||t.elementClass!==n.Z.OBJECT_CLASS_LINE)?t.type===n.Z.OBJECT_TYPE_POLYGON||r.type===n.Z.OBJECT_TYPE_POLYGON?t.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var e,i=u.Z.evaluate(t.visProp.straightfirst),n=u.Z.evaluate(t.visProp.straightlast),o=u.Z.evaluate(r.visProp.straightfirst),s=u.Z.evaluate(r.visProp.straightlast);return e=!u.Z.evaluate(c)&&(!i||!n||!o||!s),h.meetPolygonLine(r,t,a,t.board,e)}:r.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var e,i=u.Z.evaluate(t.visProp.straightfirst),n=u.Z.evaluate(t.visProp.straightlast),o=u.Z.evaluate(r.visProp.straightfirst),s=u.Z.evaluate(r.visProp.straightlast);return e=!u.Z.evaluate(c)&&(!i||!n||!o||!s),h.meetPolygonLine(t,r,a,t.board,e)}:function(){return h.meetPathPath(t,r,a,t.board)}:t.elementClass===n.Z.OBJECT_CLASS_LINE&&r.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var e,i,s=u.Z.evaluate(t.visProp.straightfirst),l=u.Z.evaluate(t.visProp.straightlast),d=u.Z.evaluate(r.visProp.straightfirst),p=u.Z.evaluate(r.visProp.straightlast);return u.Z.evaluate(c)||s&&l&&d&&p?h.meet(t.stdform,r.stdform,a,t.board):(e=h.meetSegmentSegment(t.point1.coords.usrCoords,t.point2.coords.usrCoords,r.point1.coords.usrCoords,r.point2.coords.usrCoords),i=!s&&e[1]<0||!l&&e[1]>1||!d&&e[2]<0||!p&&e[2]>1?[0,NaN,NaN]:e[0],new o.Z(n.Z.COORDS_BY_USER,i,t.board))}:function(){var e,l,f,m=h.meet(t.stdform,r.stdform,a,t.board),v=!0;return u.Z.evaluate(c)?m:(t.elementClass!==n.Z.OBJECT_CLASS_LINE||(e=u.Z.evaluate(t.visProp.straightfirst),l=u.Z.evaluate(t.visProp.straightlast),e&&l||(f=h.affineRatio(t.point1.coords,t.point2.coords,m),(l||!(f>1+s.Z.eps))&&(e||!(f<0-s.Z.eps)))))&&(r.elementClass!==n.Z.OBJECT_CLASS_LINE||(e=u.Z.evaluate(r.visProp.straightfirst),l=u.Z.evaluate(r.visProp.straightlast),e&&l||(f=h.affineRatio(r.point1.coords,r.point2.coords,m),(l||!(f>1+s.Z.eps))&&(e||!(f<0-s.Z.eps)))))&&(!d||((v=h.coordsOnArc(t,m))&&p&&(v=h.coordsOnArc(r,m)),v))?m:new o.Z(i.Z.COORDS_BY_USER,[0,NaN,NaN],t.board)}:function(){return h.meetCurveLine(t,r,a,t.board,u.Z.evaluate(c))}},coordsOnArc:function(e,t){var r=this.rad(e.radiuspoint,e.center,t.usrCoords.slice(1)),i=0,n=this.rad(e.radiuspoint,e.center,e.anglepoint),o=u.Z.evaluate(e.visProp.selection);return("minor"===o&&n>Math.PI||"major"===o&&n<Math.PI)&&(i=n,n=2*Math.PI),!(r<i)&&!(r>n)},meet:function(e,t,r,i){var n=s.Z.eps;return Math.abs(e[3])<n&&Math.abs(t[3])<n?this.meetLineLine(e,t,r,i):Math.abs(e[3])>=n&&Math.abs(t[3])<n?this.meetLineCircle(t,e,r,i):Math.abs(e[3])<n&&Math.abs(t[3])>=n?this.meetLineCircle(e,t,r,i):this.meetCircleCircle(e,t,r,i)},meetLineBoard:function(e,t,r){var i,a,l,c,h=[];for(u.Z.exists(r)||(r=0),h[0]=s.Z.crossProduct(e,[r,0,1]),h[1]=s.Z.crossProduct(e,[r,1,0]),h[2]=s.Z.crossProduct(e,[-r-t.canvasHeight,0,1]),h[3]=s.Z.crossProduct(e,[-r-t.canvasWidth,1,0]),l=0;l<4;l++)if(Math.abs(h[l][0])>s.Z.eps){for(c=2;c>0;c--)h[l][c]/=h[l][0];h[l][0]=1}return Math.abs(h[1][0])<s.Z.eps?(i=h[0],a=h[2]):Math.abs(h[0][0])<s.Z.eps?(i=h[1],a=h[3]):h[1][2]<0?(i=h[0],a=h[3][2]>t.canvasHeight?h[2]:h[3]):h[1][2]>t.canvasHeight?(i=h[2],a=h[3][2]<0?h[0]:h[3]):(i=h[1],a=h[3][2]<0?h[0]:h[3][2]>t.canvasHeight?h[2]:h[3]),[new o.Z(n.Z.COORDS_BY_SCREEN,i.slice(1),t),new o.Z(n.Z.COORDS_BY_SCREEN,a.slice(1),t)]},meetLineLine:function(e,t,r,i){var a=isNaN(e[5]+t[5])?[0,0,0]:s.Z.crossProduct(e,t);return 1e-14>Math.abs(a[0])&&(a[0]=0),new o.Z(n.Z.COORDS_BY_USER,a,i)},meetLineCircle:function(e,t,r,i){var a,l,c,h,d,p,f,m,v;return t[4]<s.Z.eps?Math.abs(s.Z.innerProduct([1,t[6],t[7]],e,3))<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,t.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[NaN,NaN],i):(c=t[0],l=t.slice(1,3),a=t[3],h=e[0],d=e.slice(1,3),p=l[0]*d[1]-l[1]*d[0],f=a*h*h-(l[0]*d[0]+l[1]*d[1])*h+c,(m=p*p-4*a*f)>-s.Z.eps*s.Z.eps)?(v=[(-p+(m=Math.sqrt(Math.abs(m))))/(2*a),(-p-m)/(2*a)],0===u.Z.evaluate(r)?new o.Z(n.Z.COORDS_BY_USER,[-(-v[0]*d[1])-h*d[0],-v[0]*d[0]-h*d[1]],i):new o.Z(n.Z.COORDS_BY_USER,[-(-v[1]*d[1])-h*d[0],-v[1]*d[0]-h*d[1]],i)):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i)},meetCircleCircle:function(e,t,r,i){var a;return e[4]<s.Z.eps?Math.abs(this.distance(e.slice(6,2),t.slice(6,8))-t[4])<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,e.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i):t[4]<s.Z.eps?Math.abs(this.distance(t.slice(6,2),e.slice(6,8))-e[4])<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,t.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i):(a=[t[3]*e[0]-e[3]*t[0],t[3]*e[1]-e[3]*t[1],t[3]*e[2]-e[3]*t[2],0,1,1/0,1/0,1/0],a=s.Z.normalize(a),this.meetLineCircle(a,e,r,i))},meetCurveCurve:function(e,t,r,i,s,l){var c;return c=u.Z.exists(l)&&"newton"===l?a.Z.generalizedNewton(e,t,u.Z.evaluate(r),i):3===e.bezierDegree||3===t.bezierDegree?this.meetBezierCurveRedBlueSegments(e,t,r):this.meetCurveRedBlueSegments(e,t,r),new o.Z(n.Z.COORDS_BY_USER,c,s)},meetCurveLine:function(e,t,r,i,o){var s,a;return u.Z.exists(i)||(i=e.board),e.elementClass===n.Z.OBJECT_CLASS_CURVE?(s=e,a=t):(s=t,a=e),this.meetCurveLineDiscrete(s,a,r,i,!o)},meetCurveLineContinuous:function(e,t,r,i,u){var l,c,h,d,p,f,m,v,g,b,y,x,C,Z=s.Z.eps,_=s.Z.eps;for(p=(d=this.meetCurveLineDiscrete(e,t,r,i,u)).usrCoords[1],f=d.usrCoords[2],c=function(t){var r,i;return t>e.maxX()||t<e.minX()?1/0:(r=p-e.X(t))*r+(i=f-e.Y(t))*i},h=function(r){var i=t.stdform[0]+t.stdform[1]*e.X(r)+t.stdform[2]*e.Y(r);return i*i},b=0,v=(e.maxX()-e.minX())/50,g=e.minX(),x=1e-4,y=NaN;b<50&&(l=a.Z.root(c,[Math.max(g,e.minX()),Math.min(g+v,e.maxX())]),!((C=Math.abs(c(l)))<=x)||(x=C,y=l,!(x<Z)));b++)g+=v;return l=y,l=a.Z.root(h,[Math.max(l-v,e.minX()),Math.min(l+v,e.maxX())]),m=isNaN(C=h(l))||Math.abs(C)>_?0:1,new o.Z(n.Z.COORDS_BY_USER,[m,e.X(l),e.Y(l)],i)},meetCurveLineDiscrete:function(e,t,r,i,a){var l,c,h,d,p,f,m,v=u.Z.evaluate(r),g=t.point1.coords.usrCoords,b=t.point2.coords.usrCoords,y=0,x=e.numberPoints,C=u.Z.evaluate(t.visProp.straightfirst),Z=u.Z.evaluate(t.visProp.straightlast);for(f=new o.Z(n.Z.COORDS_BY_USER,[0,NaN,NaN],i),0===g[0]?g=[1,b[1]+t.stdform[2],b[2]-t.stdform[1]]:0===b[0]&&(b=[1,g[1]+t.stdform[2],g[2]-t.stdform[1]]),d=e.points[0].usrCoords,l=1;l<x;l+=e.bezierDegree)if(h=d.slice(0),d=e.points[l].usrCoords,this.distance(h,d)>s.Z.eps){for(c=0,m=3===e.bezierDegree?this.meetBeziersegmentBeziersegment([e.points[l-1].usrCoords.slice(1),e.points[l].usrCoords.slice(1),e.points[l+1].usrCoords.slice(1),e.points[l+2].usrCoords.slice(1)],[g.slice(1),b.slice(1)],a):[this.meetSegmentSegment(h,d,g,b)];c<m.length;c++)if(0<=(p=m[c])[1]&&p[1]<=1){if(y===v){if(a&&(!C&&p[2]<0||!Z&&p[2]>1))return f;return new o.Z(n.Z.COORDS_BY_USER,p[0],i)}y+=1}}return f},meetCurveRedBlueSegments:function(e,t,r){var i,n,o,s,a,l,c,h,d,p=u.Z.evaluate(r),f=0,m=t.numberPoints,v=e.numberPoints;if(m<=1||v<=1)return[0,NaN,NaN];for(i=1;i<v;i++)for(n=1,o=e.points[i-1].usrCoords,s=e.points[i].usrCoords,h=Math.min(o[1],s[1]),d=Math.max(o[1],s[1]),l=t.points[0].usrCoords;n<m;n++)if(a=l,l=t.points[n].usrCoords,Math.min(a[1],l[1])<d&&Math.max(a[1],l[1])>h&&(c=this.meetSegmentSegment(o,s,a,l))[1]>=0&&c[2]>=0&&(c[1]<1&&c[2]<1||i===v-1&&1===c[1]||n===m-1&&1===c[2])){if(f===p)return c[0];f++}return[0,NaN,NaN]},meetSegmentSegment:function(e,t,r,i){var n,o,a,u,l=s.Z.crossProduct(e,t),c=s.Z.crossProduct(r,i),h=s.Z.crossProduct(l,c);return Math.abs(h[0])<s.Z.eps?[h,1/0,1/0]:(h[1]/=h[0],h[2]/=h[0],h[0]/=h[0],a=Math.abs(t[1]-t[0]*e[1])<s.Z.eps?2:1,u=e[a]/e[0],n=(h[a]-u)/(0!==t[0]?t[a]/t[0]-u:t[a]),a=Math.abs(i[1]-i[0]*r[1])<s.Z.eps?2:1,u=r[a]/r[0],o=(h[a]-u)/(0!==i[0]?i[a]/i[0]-u:i[a]),[h,n,o])},meetPathPath:function(e,t,r,a){var l,c,h,d,p=u.Z.evaluate(r);return((h=(l=i.Z.Math.Clip._getPath(e,a)).length)>0&&this.distance(l[0].coords.usrCoords,l[h-1].coords.usrCoords,3)<s.Z.eps&&l.pop(),(h=(c=i.Z.Math.Clip._getPath(t,a)).length)>0&&this.distance(c[0].coords.usrCoords,c[h-1].coords.usrCoords,3)<s.Z.eps*s.Z.eps&&c.pop(),r<0||i.Z.Math.Clip.isEmptyCase(l,c,"intersection"))?new o.Z(n.Z.COORDS_BY_USER,[0,0,0],a):(i.Z.Math.Clip.makeDoublyLinkedList(l),i.Z.Math.Clip.makeDoublyLinkedList(c),p<(d=i.Z.Math.Clip.findIntersections(l,c,a)[0]).length)?d[p].coords:new o.Z(n.Z.COORDS_BY_USER,[0,0,0],a)},meetPolygonLine:function(e,t,r,i,s){var a,l,c,h=u.Z.evaluate(r),d=[0,0,0],p=e.borders.length,f=[];for(a=0;a<p;a++)c=e.borders[a],l=this.meetSegmentSegment(c.point1.coords.usrCoords,c.point2.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords),(!s||l[2]>=0&&l[2]<1)&&l[1]>=0&&l[1]<1&&f.push(l[0]);return h>=0&&h<f.length&&(d=f[h]),new o.Z(n.Z.COORDS_BY_USER,d,i)},_bezierSplit:function(e){var t,r,i,n,o,s;return t=[(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],r=[(e[1][0]+e[2][0])*.5,(e[1][1]+e[2][1])*.5],i=[(e[2][0]+e[3][0])*.5,(e[2][1]+e[3][1])*.5],n=[(t[0]+r[0])*.5,(t[1]+r[1])*.5],o=[(r[0]+i[0])*.5,(r[1]+i[1])*.5],s=[(n[0]+o[0])*.5,(n[1]+o[1])*.5],[[e[0],t,n,s],[s,o,i,e[3]]]},_bezierBbox:function(e){var t=[];return 4===e.length?(t[0]=Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),t[1]=Math.max(e[0][1],e[1][1],e[2][1],e[3][1]),t[2]=Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),t[3]=Math.min(e[0][1],e[1][1],e[2][1],e[3][1])):(t[0]=Math.min(e[0][0],e[1][0]),t[1]=Math.max(e[0][1],e[1][1]),t[2]=Math.max(e[0][0],e[1][0]),t[3]=Math.min(e[0][1],e[1][1])),t},_bezierOverlap:function(e,t){return e[2]>=t[0]&&e[0]<=t[2]&&e[1]>=t[3]&&e[3]<=t[1]},_bezierListConcat:function(e,t,r,i){var n,o=u.Z.exists(i),s=0,a=t.length,l=e.length;for(l>0&&a>0&&(1===e[l-1][1]&&0===t[0][1]||o&&1===e[l-1][2]&&0===t[0][2])&&(s=1),n=s;n<a;n++)o&&(t[n][2]*=.5,t[n][2]+=i),t[n][1]*=.5,t[n][1]+=r,e.push(t[n])},_bezierMeetSubdivision:function(e,t,r){var i,n,o,s,a,u,l,c,h,d,p,f,m=[];return(n=this._bezierBbox(t),i=this._bezierBbox(e),this._bezierOverlap(n,i))?r<5?(u=(o=this._bezierSplit(e))[0],l=o[1],s=(o=this._bezierSplit(t))[0],a=o[1],this._bezierListConcat(m,this._bezierMeetSubdivision(u,s,r+1),0,0),this._bezierListConcat(m,this._bezierMeetSubdivision(u,a,r+1),0,.5),this._bezierListConcat(m,this._bezierMeetSubdivision(l,s,r+1),.5,0),this._bezierListConcat(m,this._bezierMeetSubdivision(l,a,r+1),.5,.5),m):(p=[1].concat(e[0]),f=[1].concat(e[3]),h=[1].concat(t[0]),d=[1].concat(t[3]),(c=this.meetSegmentSegment(p,f,h,d))[1]>=0&&c[2]>=0&&c[1]<=1&&c[2]<=1)?[c]:[]:[]},_bezierLineMeetSubdivision:function(e,t,r,i){var n,o,s,a,u,l,c,h,d,p,f=[];return(n=this._bezierBbox(t),o=this._bezierBbox(e),i&&!this._bezierOverlap(o,n))?[]:r<5?(a=(s=this._bezierSplit(e))[0],u=s[1],this._bezierListConcat(f,this._bezierLineMeetSubdivision(a,t,r+1),0),this._bezierListConcat(f,this._bezierLineMeetSubdivision(u,t,r+1),.5),f):(d=[1].concat(e[0]),p=[1].concat(e[3]),c=[1].concat(t[0]),h=[1].concat(t[1]),(l=this.meetSegmentSegment(d,p,c,h))[1]>=0&&l[1]<=1&&(!i||l[2]>=0&&l[2]<=1))?[l]:[]},meetBeziersegmentBeziersegment:function(e,t,r){var i,n,o;for((i=4===e.length&&4===t.length?this._bezierMeetSubdivision(e,t,0):this._bezierLineMeetSubdivision(e,t,0,r)).sort(function(e,t){return(e[1]-t[1])*1e7+(e[2]-t[2])}),n=[],o=0;o<i.length;o++)(0===o||i[o][1]!==i[o-1][1]||i[o][2]!==i[o-1][2])&&n.push(i[o]);return n},meetBezierCurveRedBlueSegments:function(e,t,r){var i,o,a,l,c,h,d,p,f,m,v,g,b,y=u.Z.evaluate(r),x=0,C=0,Z=[];if(t.numberPoints<t.bezierDegree+1||e.numberPoints<e.bezierDegree+1)return[0,NaN,NaN];for(1===e.bezierDegree&&3===t.bezierDegree&&(h=e,e=t,t=h),g=t.numberPoints-t.bezierDegree,b=e.numberPoints-e.bezierDegree,e.type===n.Z.OBJECT_TYPE_SECTOR&&(x=3,b-=3),t.type===n.Z.OBJECT_TYPE_SECTOR&&(C=3,g-=3),o=x;o<b;o+=e.bezierDegree)for(d=[(i=e.points)[o].usrCoords.slice(1),i[o+1].usrCoords.slice(1)],3===e.bezierDegree&&(d[2]=i[o+2].usrCoords.slice(1),d[3]=i[o+3].usrCoords.slice(1)),f=this._bezierBbox(d),a=C;a<g;a+=t.bezierDegree)if(p=[(i=t.points)[a].usrCoords.slice(1),i[a+1].usrCoords.slice(1)],3===t.bezierDegree&&(p[2]=i[a+2].usrCoords.slice(1),p[3]=i[a+3].usrCoords.slice(1)),m=this._bezierBbox(p),this._bezierOverlap(f,m)){if(0===(v=this.meetBeziersegmentBeziersegment(d,p)).length)continue;for(l=0;l<v.length;l++)(c=v[l])[1]<-s.Z.eps||c[1]>1+s.Z.eps||c[2]<-s.Z.eps||c[2]>1+s.Z.eps||Z.push(c);if(Z.length>y)return Z[y][0]}return Z.length>y?Z[y][0]:[0,NaN,NaN]},bezierSegmentEval:function(e,t){var r,i,n,o=1-e;return n=0,i=0+(r=o*o*o)*t[0][0],n+=r*t[0][1],i+=(r=3*e*o*o)*t[1][0],n+=r*t[1][1],i+=(r=3*e*e*o)*t[2][0],n+=r*t[2][1],[1,i+=(r=e*e*e)*t[3][0],n+=r*t[3][1]]},bezierArc:function(e,t,r,i,n){var o,a,u,l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_=.5*Math.PI,w=t[1],E=t[2],N=t[0],S=[],A=[];for(c=this.distance(t,e),w/=N,E/=N,h=this.rad(e.slice(1),t.slice(1),r.slice(1)),-1===n&&(h=2*Math.PI-h),o=e,o[1]/=o[0],o[2]/=o[0],o[0]/=o[0],l=o.slice(0),i?(S=[w,w+.333*(o[1]-w),w+.666*(o[1]-w),o[1]],A=[E,E+.333*(o[2]-E),E+.666*(o[2]-E),o[2]]):(S=[o[1]],A=[o[2]]);h>s.Z.eps;)h>_?(d=_,h-=_):(d=h,h=0),Z=[[1,0,0],[w*(1-(p=Math.cos(n*d)))+E*(f=Math.sin(n*d)),p,-f],[E*(1-p)-w*f,f,p]],l=[(x=s.Z.matVecMult(Z,o))[0]/x[0],x[1]/x[0],x[2]/x[0]],m=o[1]-w,v=o[2]-E,g=l[1]-w,b=l[2]-E,C=s.Z.hypot(m+g,v+b),y=Math.abs(b-v)>s.Z.eps?(m+g)*(c/C-.5)/(b-v)*8/3:(v+b)*(c/C-.5)/(m-g)*8/3,a=[1,o[1]-y*v,o[2]+y*m],u=[1,l[1]+y*b,l[2]-y*g],S=S.concat([a[1],u[1],l[1]]),A=A.concat([a[2],u[2],l[2]]),o=l.slice(0);return i&&(S=S.concat([l[1]+.333*(w-l[1]),l[1]+.666*(w-l[1]),w]),A=A.concat([l[2]+.333*(E-l[2]),l[2]+.666*(E-l[2]),E])),[S,A]},projectPointToCircle:function(e,t,r){var i,a,l,c,h,d=t.center.coords.usrCoords;return u.Z.exists(r)||(r=e.board),u.Z.isPoint(e)?(i=e.coords.distance(n.Z.COORDS_BY_USER,t.center.coords),a=e.coords.usrCoords):(i=e.distance(n.Z.COORDS_BY_USER,t.center.coords),a=e.usrCoords),Math.abs(i)<s.Z.eps&&(i=s.Z.eps),h=t.Radius()/i,l=d[1]+h*(a[1]-d[1]),c=d[2]+h*(a[2]-d[2]),new o.Z(n.Z.COORDS_BY_USER,[l,c],r)},projectPointToLine:function(e,t,r){var i,a=[0,t.stdform[1],t.stdform[2]];return u.Z.exists(r)||(r=u.Z.exists(e.coords)?e.board:t.board),i=u.Z.exists(e.coords)?e.coords.usrCoords:e.usrCoords,a=s.Z.crossProduct(a,i),new o.Z(n.Z.COORDS_BY_USER,s.Z.crossProduct(a,t.stdform),r)},projectCoordsToSegment:function(e,t,r){var i,n=[r[1]-t[1],r[2]-t[2]],o=[e[1]-t[1],e[2]-t[2]];return Math.abs(n[0])<s.Z.eps&&Math.abs(n[1])<s.Z.eps?[t,0]:[[1,(i=s.Z.innerProduct(o,n)/s.Z.innerProduct(n,n))*n[0]+t[1],i*n[1]+t[2]],i]},projectCoordsToBeziersegment:function(e,t,r){var n;return n=i.Z.Math.Numerics.fminbr(function(i){var n=[1,t.X(r+i),t.Y(r+i)];return n[1]-=e[1],n[2]-=e[2],n[1]*n[1]+n[2]*n[2]},[0,1]),[[1,t.X(n+r),t.Y(n+r)],n]},projectPointToCurve:function(e,t,r){u.Z.exists(r)||(r=e.board);var i=e.X(),n=e.Y(),o=e.position||0;return this.projectCoordsToCurve(i,n,o,t,r)},projectCoordsToCurve:function(e,t,r,i,s){var l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_,w,E,N,S,A,P,D,M=Number.POSITIVE_INFINITY;if(u.Z.exists(s)||(s=i.board),"plot"===u.Z.evaluate(i.visProp.curvetype)){if(r=0,p=M,l=0===i.numberPoints?[0,1,1]:[i.Z(0),i.X(0),i.Y(0)],i.numberPoints>1)for(v=[1,e,t],3===i.bezierDegree?d=0:y=[i.Z(0),i.X(0),i.Y(0)],h=0;h<i.numberPoints-1;h++)3===i.bezierDegree?C=this.projectCoordsToBeziersegment(v,i,d):(x=[i.Z(h+1),i.X(h+1),i.Y(h+1)],C=this.projectCoordsToSegment(v,y,x)),m=C[1],g=C[0],0<=m&&m<=1?(f=this.distance(g,v),b=h+m):m<0?(g=y,f=this.distance(y,v),b=h):m>1&&h===i.numberPoints-2&&(g=x,f=this.distance(g,v),b=i.numberPoints-1),f<p&&(p=f,r=b,l=g),3===i.bezierDegree?(d++,h+=2):y=x;c=new o.Z(n.Z.COORDS_BY_USER,l,s)}else{for(h=0,E=(Z=function(r){var n,o;return r<i.minX()||r>i.maxX()?1/0:(n=e-i.X(r))*n+(o=t-i.Y(r))*o})(r),P=i.minX(),N=((D=i.maxX())-P)/50,_=P;h<50;h++)((w=Z(_))<E||E===1/0||isNaN(E))&&(r=_,E=w),_+=N;for(h=0,S=N;h<20&&isNaN(Z(r-S));h++,S*=.5);for(isNaN(Z(r-S))&&(S=0),A=N,h=0;h<20&&isNaN(Z(r+A));h++,A*=.5);isNaN(Z(r+A))&&(A=0),r=(r=(r=a.Z.fminbr(Z,[Math.max(r-S,P),Math.min(r+A,D)]))<P?P:r)>D?D:r,c=new o.Z(n.Z.COORDS_BY_USER,[i.X(r),i.Y(r)],s)}return[i.updateTransform(c),r]},projectCoordsToPolygon:function(e,t){var r,n,o,s,a,u=t.vertices.length,l=1/0;for(r=0;r<u-1;r++)0<=(o=i.Z.Math.Geometry.projectCoordsToSegment(e,t.vertices[r].coords.usrCoords,t.vertices[r+1].coords.usrCoords))[1]&&o[1]<=1?(n=i.Z.Math.Geometry.distance(o[0],e,3),s=o[0]):o[1]<0?(n=i.Z.Math.Geometry.distance(t.vertices[r].coords.usrCoords,e,3),s=t.vertices[r].coords.usrCoords):(n=i.Z.Math.Geometry.distance(t.vertices[r+1].coords.usrCoords,e,3),s=t.vertices[r+1].coords.usrCoords),n<l&&(a=s.slice(0),l=n);return a},projectPointToTurtle:function(e,t,r){var i,s,a,l,c,h,d,p,f,m,v=0,g=0,b=Number.POSITIVE_INFINITY,y=t.objects.length;for(u.Z.exists(r)||(r=e.board),c=0;c<y;c++)(d=t.objects[c]).elementClass===n.Z.OBJECT_CLASS_CURVE&&(i=(f=this.projectPointToCurve(e,d))[0],m=f[1],(h=this.distance(i.usrCoords,e.coords.usrCoords))<b&&(a=i.usrCoords[1],l=i.usrCoords[2],s=m,b=h,p=d,g=v),v+=d.numberPoints);return i=new o.Z(n.Z.COORDS_BY_USER,[a,l],r),[p.updateTransform(i),s+g]},projectPointToPoint:function(e,t){return t.coords},projectPointToBoard:function(e,t){var r,i,n,o=t||e.board,a=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],u=e.coords||e,l=o.getBoundingBox();for(r=0;r<4;r++)(n=a[r])[0]*u.usrCoords[n[1]]<n[0]*l[n[2]]&&((i=s.Z.crossProduct([1,l[n[3]],l[n[4]]],[1,l[n[5]],l[n[6]]]))[3]=0,i=s.Z.normalize(i),u=this.projectPointToLine({coords:u},{stdform:i},o));return u},distPointLine:function(e,t){var r,i=t[1],n=t[2],o=t[0];return Math.abs(i)+Math.abs(n)<s.Z.eps?Number.POSITIVE_INFINITY:(r=i*e[1]+n*e[2]+o,i*=i,n*=n,Math.abs(r)/Math.sqrt(i+n))},distPointSegment:function(e,t,r){var i,n,o,a,u,l,c=s.Z.eps*s.Z.eps;return i=e[1]-t[1],n=e[2]-t[2],i=i===1/0?1e6:i===-1/0?-1e6:i,n=n===1/0?1e6:n===-1/0?-1e6:n,(u=(o=(o=r[1]-t[1])==1/0?1e6:o===-1/0?-1e6:o)*o+(a=(a=r[2]-t[2])==1/0?1e6:a===-1/0?-1e6:a)*a)>c&&((l=(i*o+n*a)/u)<0?l=0:l>1&&(l=1),i-=l*o,n-=l*a),s.Z.hypot(i,n)},reuleauxPolygon:function(e,t){var r,i=2*Math.PI,n=i/t,o=(t-1)/2,a=0,u=function(u,l){return function(c,h){var d=(c%i+i)%i,p=Math.floor(d/n)%t;return(h||(a=e[0].Dist(e[o]),r=s.Z.Geometry.rad([e[0].X()+1,e[0].Y()],e[0],e[o%t])),isNaN(p))?p:(d=.5*d+p*n*.5+r,e[p][u]()+a*Math[l](d))}};return[u("X","cos"),u("Y","sin"),0,i]},meet3Planes:function(e,t,r,i,n,o){var a,u,l,c,h,d=[0,0,0];for(h=0,a=s.Z.crossProduct(n,e),u=s.Z.crossProduct(e,r),l=s.Z.crossProduct(r,n),c=s.Z.innerProduct(e,l,3);h<3;h++)d[h]=(t*l[h]+i*a[h]+o*u[h])/c;return d},meetPlanePlane:function(e,t,r,i){var n,o,a,l=[0,0,0],c=[0,0,0];for(n=0;n<3;n++)l[n]=u.Z.evaluate(e[n]),c[n]=u.Z.evaluate(t[n]);for(n=0,o=s.Z.crossProduct(l,c);n<3;n++)l[n]=u.Z.evaluate(r[n]),c[n]=u.Z.evaluate(i[n]);return a=s.Z.crossProduct(l,c),s.Z.crossProduct(o,a)},project3DTo3DPlane:function(e,t,r){var i,n,o;return r=r||[0,0,0],i=s.Z.norm(t),n=s.Z.innerProduct(e,t,3),o=s.Z.innerProduct(r,t,3),s.Z.axpy(-((n-o)/i),t,e)},getPlaneBounds:function(e,t,r,i,n){var o,s,u,l,c;return e[2]+t[0]!==0?(u=[[e[0],t[0]],[e[1],t[1]]],l=[i-r[0],i-r[1]],o=(c=a.Z.Gauss(u,l))[0],s=c[1],l=[n-r[0],n-r[1]],[o,(c=a.Z.Gauss(u,l))[0],s,c[1]]):null}}),t.Z=s.Z.Geometry},9641:function(e,t,r){"use strict";var i=r(7901),n=r(4204),o=r(1013);i.Z.Math.DoubleBits=function(){var e=new Float64Array(1),t=new Uint32Array(e.buffer);void 0!==Float64Array&&(e[0]=1,1072693248===t[1]?(this.doubleBits=function(r){return e[0]=r,[t[0],t[1]]},this.pack=function(r,i){return t[0]=r,t[1]=i,e[0]},this.lo=function(r){return e[0]=r,t[0]},this.hi=function(r){return e[0]=r,t[1]}):1072693248===t[0]&&(this.doubleBits=function(r){return e[0]=r,[t[1],t[0]]},this.pack=function(r,i){return t[1]=r,t[0]=i,e[0]},this.lo=function(r){return e[0]=r,t[1]},this.hi=function(r){return e[0]=r,t[0]}))},i.Z.extend(i.Z.Math.DoubleBits.prototype,{sign:function(e){return this.hi(e)>>>31},exponent:function(e){return(this.hi(e)<<1>>>21)-1023},fraction:function(e){var t=this.lo(e),r=this.hi(e),i=1048575&r;return 2146435072&r&&(i+=1048576),[t,i]},denormalized:function(e){return!(2146435072&this.hi(e))}});var s=new i.Z.Math.DoubleBits,a=function(e,t){if(void 0!==e&&void 0!==t){if(n.Z.IntervalArithmetic.isInterval(e)){if(!n.Z.IntervalArithmetic.isSingleton(e))throw TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=e.lo}else this.lo=e;if(n.Z.IntervalArithmetic.isInterval(t)){if(!n.Z.IntervalArithmetic.isSingleton(t))throw TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=t.hi}else this.hi=t}else{if(void 0!==e)return Array.isArray(e)?new a(e[0],e[1]):new a(e,e);this.lo=this.hi=0}};i.Z.extend(a.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(e,t){return this.lo=e,this.hi=t,this},bounded:function(e,t){return this.set(n.Z.IntervalArithmetic.prev(e),n.Z.IntervalArithmetic.next(t))},boundedSingleton:function(e){return this.bounded(e,e)},assign:function(e,t){if("number"!=typeof e||"number"!=typeof t)throw TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(e)||isNaN(t)||e>t?this.setEmpty():this.set(e,t)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(e,t){return this.assign(n.Z.IntervalArithmetic.next(e),n.Z.IntervalArithmetic.prev(t))},halfOpenLeft:function(e,t){return this.assign(n.Z.IntervalArithmetic.next(e),t)},halfOpenRight:function(e,t){return this.assign(e,n.Z.IntervalArithmetic.prev(t))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new a().set(this.lo,this.hi)}}),i.Z.Math.IntervalArithmetic={Interval:function(e,t){return new a(e,t)},isInterval:function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.lo&&"number"==typeof e.hi},isSingleton:function(e){return e.lo===e.hi},add:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),new a(this.addLo(e.lo,t.lo),this.addHi(e.hi,t.hi))},sub:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),new a(this.subLo(e.lo,t.hi),this.subHi(e.hi,t.lo))},mul:function(e,t){var r,i,n,s,u;return(o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(e)||this.isEmpty(t))?this.EMPTY.clone():(r=e.lo,i=e.hi,n=t.lo,s=t.hi,u=new a,r<0?i>0?n<0?s>0?(u.lo=Math.min(this.mulLo(r,s),this.mulLo(i,n)),u.hi=Math.max(this.mulHi(r,n),this.mulHi(i,s))):(u.lo=this.mulLo(i,n),u.hi=this.mulHi(r,n)):s>0?(u.lo=this.mulLo(r,s),u.hi=this.mulHi(i,s)):(u.lo=0,u.hi=0):n<0?(s>0?u.lo=this.mulLo(r,s):u.lo=this.mulLo(i,s),u.hi=this.mulHi(r,n)):s>0?(u.lo=this.mulLo(r,s),u.hi=this.mulHi(i,n)):(u.lo=0,u.hi=0):i>0?n<0?s>0?(u.lo=this.mulLo(i,n),u.hi=this.mulHi(i,s)):(u.lo=this.mulLo(i,n),u.hi=this.mulHi(r,s)):s>0?(u.lo=this.mulLo(r,n),u.hi=this.mulHi(i,s)):(u.lo=0,u.hi=0):(u.lo=0,u.hi=0),u)},div:function(e,t){return(o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(e)||this.isEmpty(t))?this.EMPTY.clone():this.zeroIn(t)?0!==t.lo?0!==t.hi?this.divZero(e):this.divNegative(e,t.lo):0!==t.hi?this.divPositive(e,t.hi):this.EMPTY.clone():this.divNonZero(e,t)},positive:function(e){return new a(e.lo,e.hi)},negative:function(e){return o.Z.isNumber(e)?new a(-e):new a(-e.hi,-e.lo)},isEmpty:function(e){return e.lo>e.hi},isWhole:function(e){return e.lo===-1/0&&e.hi===1/0},zeroIn:function(e){return this.hasValue(e,0)},hasValue:function(e,t){return!this.isEmpty(e)&&e.lo<=t&&t<=e.hi},hasInterval:function(e,t){return!!this.isEmpty(e)||!this.isEmpty(t)&&t.lo<=e.lo&&e.hi<=t.hi},intervalsOverlap:function(e,t){return!(this.isEmpty(e)||this.isEmpty(t))&&(e.lo<=t.lo&&t.lo<=e.hi||t.lo<=e.lo&&e.lo<=t.hi)},divNonZero:function(e,t){var r=e.lo,i=e.hi,n=t.lo,o=t.hi,s=new a;return i<0?o<0?(s.lo=this.divLo(i,n),s.hi=this.divHi(r,o)):(s.lo=this.divLo(r,n),s.hi=this.divHi(i,o)):r<0?o<0?(s.lo=this.divLo(i,o),s.hi=this.divHi(r,o)):(s.lo=this.divLo(r,n),s.hi=this.divHi(i,n)):o<0?(s.lo=this.divLo(i,o),s.hi=this.divHi(r,n)):(s.lo=this.divLo(r,o),s.hi=this.divHi(i,n)),s},divPositive:function(e,t){return 0===e.lo&&0===e.hi?e:this.zeroIn(e)?this.WHOLE:e.hi<0?new a(Number.NEGATIVE_INFINITY,this.divHi(e.hi,t)):new a(this.divLo(e.lo,t),Number.POSITIVE_INFINITY)},divNegative:function(e,t){return 0===e.lo&&0===e.hi?e:this.zeroIn(e)?this.WHOLE:e.hi<0?new a(this.divLo(e.hi,t),Number.POSITIVE_INFINITY):new a(Number.NEGATIVE_INFINITY,this.divHi(e.lo,t))},divZero:function(e){return 0===e.lo&&0===e.hi?e:this.WHOLE},fmod:function(e,t){var r,i;return(o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(e)||this.isEmpty(t))?this.EMPTY.clone():(r=e.lo<0?t.lo:t.hi,i=(i=e.lo/r)<0?Math.ceil(i):Math.floor(i),this.sub(e,this.mul(t,new a(i))))},multiplicativeInverse:function(e){return(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e))?this.EMPTY.clone():this.zeroIn(e)?0!==e.lo?0!==e.hi?this.WHOLE:new a(Number.NEGATIVE_INFINITY,this.divHi(1,e.lo)):0!==e.hi?new a(this.divLo(1,e.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new a(this.divLo(1,e.hi),this.divHi(1,e.lo))},pow:function(e,t){var r,i;if(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e))return this.EMPTY.clone();if(this.isInterval(t)){if(!this.isSingleton(t))return this.EMPTY.clone();t=t.lo}return 0===t?0===e.lo&&0===e.hi?this.EMPTY.clone():this.ONE.clone():t<0?this.pow(this.multiplicativeInverse(e),-t):t%1==0?e.hi<0?(r=this.powLo(-e.hi,t),i=this.powHi(-e.lo,t),(1&t)==1)?new a(-i,-r):new a(r,i):e.lo<0?(1&t)==1?new a(-this.powLo(-e.lo,t),this.powHi(e.hi,t)):new a(0,this.powHi(Math.max(-e.lo,e.hi),t)):new a(this.powLo(e.lo,t),this.powHi(e.hi,t)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(e){return o.Z.isNumber(e)&&(e=this.Interval(e)),this.nthRoot(e,2)},nthRoot:function(e,t){var r,i;if(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e)||t<0)return this.EMPTY.clone();if(this.isInterval(t)){if(!this.isSingleton(t))return this.EMPTY.clone();t=t.lo}return(r=1/t,e.hi<0)?t%1==0&&(1&t)==1?new a(-this.powHi(-e.lo,r),-this.powLo(-e.hi,r)):this.EMPTY.clone():e.lo<0?(i=this.powHi(e.hi,r),t%1==0&&(1&t)==1)?new a(-this.powHi(-e.lo,r),i):new a(0,i):new a(this.powLo(e.lo,r),this.powHi(e.hi,r))},exp:function(e){return(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e))?this.EMPTY.clone():new a(this.expLo(e.lo),this.expHi(e.hi))},log:function(e){return(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e))?this.EMPTY.clone():new a(e.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(e.lo),this.logHi(e.hi))},ln:function(e){return this.log(e)},log10:function(e){return this.isEmpty(e)?this.EMPTY.clone():this.div(this.log(e),this.log(new a(10,10)))},log2:function(e){return this.isEmpty(e)?this.EMPTY.clone():this.div(this.log(e),this.log(new a(2,2)))},hull:function(e,t){var r=this.isEmpty(e),i=this.isEmpty(t);return r&&i?this.EMPTY.clone():r?t.clone():i?e.clone():new a(Math.min(e.lo,t.lo),Math.max(e.hi,t.hi))},intersection:function(e,t){var r,i;return this.isEmpty(e)||this.isEmpty(t)?this.EMPTY.clone():(r=Math.max(e.lo,t.lo))<=(i=Math.min(e.hi,t.hi))?new a(r,i):this.EMPTY.clone()},union:function(e,t){if(!this.intervalsOverlap(e,t))throw Error("Interval#unions do not overlap");return new a(Math.min(e.lo,t.lo),Math.max(e.hi,t.hi))},difference:function(e,t){if(this.isEmpty(e)||this.isWhole(t))return this.EMPTY.clone();if(this.intervalsOverlap(e,t)){if(e.lo<t.lo&&t.hi<e.hi)throw Error("Interval.difference: difference creates multiple intervals");return t.lo<=e.lo&&t.hi===1/0||t.hi>=e.hi&&t.lo===-1/0?this.EMPTY.clone():t.lo<=e.lo?new a().halfOpenLeft(t.hi,e.hi):new a().halfOpenRight(e.lo,t.lo)}return e.clone()},width:function(e){return this.isEmpty(e)?0:this.subHi(e.hi,e.lo)},abs:function(e){return(o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(e))?this.EMPTY.clone():e.lo>=0?e.clone():e.hi<=0?this.negative(e):new a(0,Math.max(-e.lo,e.hi))},max:function(e,t){var r=this.isEmpty(e),i=this.isEmpty(t);return r&&i?this.EMPTY.clone():r?t.clone():i?e.clone():new a(Math.max(e.lo,t.lo),Math.max(e.hi,t.hi))},min:function(e,t){var r=this.isEmpty(e),i=this.isEmpty(t);return r&&i?this.EMPTY.clone():r?t.clone():i?e.clone():new a(Math.min(e.lo,t.lo),Math.min(e.hi,t.hi))},onlyInfinity:function(e){return!isFinite(e.lo)&&e.lo===e.hi},_handleNegative:function(e){var t;return e.lo<0&&(e.lo===-1/0?(e.lo=0,e.hi=1/0):(t=Math.ceil(-e.lo/this.piTwiceLow),e.lo+=this.piTwiceLow*t,e.hi+=this.piTwiceLow*t)),e},cos:function(e){var t,r,i,n,o,s,u,l;return this.isEmpty(e)||this.onlyInfinity(e)?this.EMPTY.clone():(t=new a().set(e.lo,e.hi),this._handleNegative(t),r=this.PI_TWICE,i=this.fmod(t,r),this.width(i)>=r.lo)?new a(-1,1):i.lo>=this.piHigh?(n=this.cos(this.sub(i,this.PI)),this.negative(n)):(o=i.lo,s=i.hi,u=this.cosLo(s),l=this.cosHi(o),s<=this.piLow)?new a(u,l):s<=r.lo?new a(-1,Math.max(u,l)):new a(-1,1)},sin:function(e){return this.isEmpty(e)||this.onlyInfinity(e)?this.EMPTY.clone():this.cos(this.sub(e,this.PI_HALF))},tan:function(e){var t,r,i;return this.isEmpty(e)||this.onlyInfinity(e)?this.EMPTY.clone():(t=new a().set(e.lo,e.hi),this._handleNegative(t),i=this.PI,(r=this.fmod(t,i)).lo>=this.piHalfLow&&(r=this.sub(r,i)),r.lo<=-this.piHalfLow||r.hi>=this.piHalfLow)?this.WHOLE.clone():new a(this.tanLo(r.lo),this.tanHi(r.hi))},asin:function(e){return this.isEmpty(e)||e.hi<-1||e.lo>1?this.EMPTY.clone():new a(e.lo<=-1?-this.piHalfHigh:this.asinLo(e.lo),e.hi>=1?this.piHalfHigh:this.asinHi(e.hi))},acos:function(e){return this.isEmpty(e)||e.hi<-1||e.lo>1?this.EMPTY.clone():new a(e.hi>=1?0:this.acosLo(e.hi),e.lo<=-1?this.piHigh:this.acosHi(e.lo))},acot:function(e){return this.isEmpty(e)?this.EMPTY.clone():new a(this.acotLo(e.lo),this.acotHi(e.hi))},atan:function(e){return this.isEmpty(e)?this.EMPTY.clone():new a(this.atanLo(e.lo),this.atanHi(e.hi))},sinh:function(e){return this.isEmpty(e)?this.EMPTY.clone():new a(this.sinhLo(e.lo),this.sinhHi(e.hi))},cosh:function(e){return this.isEmpty(e)?this.EMPTY.clone():e.hi<0?new a(this.coshLo(e.hi),this.coshHi(e.lo)):e.lo>=0?new a(this.coshLo(e.lo),this.coshHi(e.hi)):new a(1,this.coshHi(-e.lo>e.hi?e.lo:e.hi))},tanh:function(e){return this.isEmpty(e)?this.EMPTY.clone():new a(this.tanhLo(e.lo),this.tanhHi(e.hi))},equal:function(e,t){return this.isEmpty(e)?this.isEmpty(t):!this.isEmpty(t)&&e.lo===t.lo&&e.hi===t.hi},notEqual:function(e,t){return this.isEmpty(e)?!this.isEmpty(t):this.isEmpty(t)||e.hi<t.lo||e.lo>t.hi},lt:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),!(this.isEmpty(e)||this.isEmpty(t))&&e.hi<t.lo},gt:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),!(this.isEmpty(e)||this.isEmpty(t))&&e.lo>t.hi},leq:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),!(this.isEmpty(e)||this.isEmpty(t))&&e.hi<=t.lo},geq:function(e,t){return o.Z.isNumber(e)&&(e=this.Interval(e)),o.Z.isNumber(t)&&(t=this.Interval(t)),!(this.isEmpty(e)||this.isEmpty(t))&&e.lo>=t.hi},piLow:(3373259426+273688/2097152)/1073741824,piHigh:(3373259426+273689/2097152)/1073741824,piHalfLow:(3373259426+273688/2097152)/1073741824*.5,piHalfHigh:(3373259426+273689/2097152)/1073741824*.5,piTwiceLow:(3373259426+273688/2097152)/1073741824*2,piTwiceHigh:(3373259426+273689/2097152)/1073741824*2,identity:function(e){return e},_prev:function(e){return e===1/0?e:this.nextafter(e,-1/0)},_next:function(e){return e===-1/0?e:this.nextafter(e,1/0)},prev:function(e){return this._prev(e)},next:function(e){return this._next(e)},toInteger:function(e){return e<0?Math.ceil(e):Math.floor(e)},addLo:function(e,t){return this.prev(e+t)},addHi:function(e,t){return this.next(e+t)},subLo:function(e,t){return this.prev(e-t)},subHi:function(e,t){return this.next(e-t)},mulLo:function(e,t){return this.prev(e*t)},mulHi:function(e,t){return this.next(e*t)},divLo:function(e,t){return this.prev(e/t)},divHi:function(e,t){return this.next(e/t)},intLo:function(e){return this.toInteger(this.prev(e))},intHi:function(e){return this.toInteger(this.next(e))},logLo:function(e){return this.prev(Math.log(e))},logHi:function(e){return this.next(Math.log(e))},expLo:function(e){return this.prev(Math.exp(e))},expHi:function(e){return this.next(Math.exp(e))},sinLo:function(e){return this.prev(Math.sin(e))},sinHi:function(e){return this.next(Math.sin(e))},cosLo:function(e){return this.prev(Math.cos(e))},cosHi:function(e){return this.next(Math.cos(e))},tanLo:function(e){return this.prev(Math.tan(e))},tanHi:function(e){return this.next(Math.tan(e))},asinLo:function(e){return this.prev(Math.asin(e))},asinHi:function(e){return this.next(Math.asin(e))},acosLo:function(e){return this.prev(Math.acos(e))},acosHi:function(e){return this.next(Math.acos(e))},acotLo:function(e){return this.prev(n.Z.acot(e))},acotHi:function(e){return this.next(n.Z.acot(e))},atanLo:function(e){return this.prev(Math.atan(e))},atanHi:function(e){return this.next(Math.atan(e))},sinhLo:function(e){return this.prev(n.Z.sinh(e))},sinhHi:function(e){return this.next(n.Z.sinh(e))},coshLo:function(e){return this.prev(n.Z.cosh(e))},coshHi:function(e){return this.next(n.Z.cosh(e))},tanhLo:function(e){return this.prev(n.Z.tanh(e))},tanhHi:function(e){return this.next(n.Z.tanh(e))},sqrtLo:function(e){return this.prev(Math.sqrt(e))},sqrtHi:function(e){return this.next(Math.sqrt(e))},powLo:function(e,t){var r;if(t%1!=0)return this.prev(Math.pow(e,t));for(r=(1&t)==1?e:1,t>>=1;t>0;)e=this.mulLo(e,e),(1&t)==1&&(r=this.mulLo(e,r)),t>>=1;return r},powHi:function(e,t){var r;if(t%1!=0)return this.next(Math.pow(e,t));for(r=(1&t)==1?e:1,t>>=1;t>0;)e=this.mulHi(e,e),(1&t)==1&&(r=this.mulHi(e,r)),t>>=1;return r},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(e){return this._prev(e)},this.next=function(e){return this._next(e)}},SMALLEST_DENORM:5e-324,UINT_MAX:4294967295,nextafter:function(e,t){var r,i;return isNaN(e)||isNaN(t)?NaN:e===t?e:0===e?t<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(i=s.hi(e),r=s.lo(e),t>e==e>0?r===this.UINT_MAX?(i+=1,r=0):r+=1:0===r?(r=this.UINT_MAX,i-=1):r-=1,s.pack(r,i))}},i.Z.Math.IntervalArithmetic.PI=new a(n.Z.IntervalArithmetic.piLow,n.Z.IntervalArithmetic.piHigh),i.Z.Math.IntervalArithmetic.PI_HALF=new a(n.Z.IntervalArithmetic.piHalfLow,n.Z.IntervalArithmetic.piHalfHigh),i.Z.Math.IntervalArithmetic.PI_TWICE=new a(n.Z.IntervalArithmetic.piTwiceLow,n.Z.IntervalArithmetic.piTwiceHigh),i.Z.Math.IntervalArithmetic.ZERO=new a(0),i.Z.Math.IntervalArithmetic.ONE=new a(1),i.Z.Math.IntervalArithmetic.WHOLE=new a().setWhole(),i.Z.Math.IntervalArithmetic.EMPTY=new a().setEmpty(),t.Z=i.Z.Math.IntervalArithmetic},4204:function(e,t,r){"use strict";var i,n=r(7901),o=r(1013),s=function(e){var t,r;return e.memo||(t={},r=Array.prototype.join,e.memo=function(){var n=r.call(arguments);return t[n]!==i?t[n]:t[n]=e.apply(this,arguments)}),e.memo};n.Z.Math={eps:1e-6,relDif:function(e,t){var r=Math.abs(t);return 0===(r=Math.max(Math.abs(e),r))?0:Math.abs(e-t)/r},mod:function(e,t){return e-Math.floor(e/t)*t},vector:function(e,t){var r,i;for(i=0,t=t||0,r=[];i<e;i++)r[i]=t;return r},matrix:function(e,t,r){var i,n,o;for(n=0,r=r||0,t=t||e,i=[];n<e;n++)for(o=0,i[n]=[];o<t;o++)i[n][o]=r;return i},identity:function(e,t){var r,n;for(t===i&&"number"!=typeof t&&(t=e),r=this.matrix(e,t),n=0;n<Math.min(e,t);n++)r[n][n]=1;return r},frustum:function(e,t,r,i,n,o){var s=this.matrix(4,4);return s[0][0]=2*n/(t-e),s[0][1]=0,s[0][2]=(t+e)/(t-e),s[0][3]=0,s[1][0]=0,s[1][1]=2*n/(i-r),s[1][2]=(i+r)/(i-r),s[1][3]=0,s[2][0]=0,s[2][1]=0,s[2][2]=-(o+n)/(o-n),s[2][3]=-(o*n*2)/(o-n),s[3][0]=0,s[3][1]=0,s[3][2]=-1,s[3][3]=0,s},projection:function(e,t,r,i){var n=r*Math.tan(e/2),o=n*t;return this.frustum(-o,o,-n,n,r,i)},matVecMult:function(e,t){var r,i,n,o=e.length,s=t.length,a=[];if(3===s)for(r=0;r<o;r++)a[r]=e[r][0]*t[0]+e[r][1]*t[1]+e[r][2]*t[2];else for(r=0;r<o;r++){for(n=0,i=0;n<s;n++)i+=e[r][n]*t[n];a[r]=i}return a},matMatMult:function(e,t){var r,i,n,o,s=e.length,a=s>0?t[0].length:0,u=t.length,l=this.matrix(s,a);for(r=0;r<s;r++)for(i=0;i<a;i++){for(o=0,n=0;o<u;o++)n+=e[r][o]*t[o][i];l[r][i]=n}return l},transpose:function(e){var t,r,i,n,o;for(r=0,n=e.length,o=e.length>0?e[0].length:0,t=this.matrix(o,n);r<o;r++)for(i=0;i<n;i++)t[r][i]=e[i][r];return t},inverse:function(e){var t,r,i,n,o,s,a,u=e.length,l=[],c=[],h=[];for(t=0;t<u;t++){for(r=0,l[t]=[];r<u;r++)l[t][r]=e[t][r];c[t]=t}for(r=0;r<u;r++){for(o=Math.abs(l[r][r]),s=r,t=r+1;t<u;t++)Math.abs(l[t][r])>o&&(o=Math.abs(l[t][r]),s=t);if(o<=this.eps)return[];if(s>r){for(i=0;i<u;i++)a=l[r][i],l[r][i]=l[s][i],l[s][i]=a;a=c[r],c[r]=c[s],c[s]=a}for(t=0,n=1/l[r][r];t<u;t++)l[t][r]*=n;for(i=0,l[r][r]=n;i<u;i++)if(i!==r){for(t=0;t<u;t++)t!==r&&(l[t][i]-=l[t][r]*l[r][i]);l[r][i]=-n*l[r][i]}}for(t=0;t<u;t++){for(i=0;i<u;i++)h[c[i]]=l[t][i];for(i=0;i<u;i++)l[t][i]=h[i]}return l},innerProduct:function(e,t,r){var n,s=0;for(r!==i&&o.Z.isNumber(r)||(r=e.length),n=0;n<r;n++)s+=e[n]*t[n];return s},crossProduct:function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},norm:function(e,t){var r,n=0;for(t!==i&&o.Z.isNumber(t)||(t=e.length),r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)},axpy:function(e,t,r){var i,n=t.length,o=[];for(i=0;i<n;i++)o[i]=e*t[i]+r[i];return o},factorial:s(function(e){return e<0?NaN:0===(e=Math.floor(e))||1===e?1:e*this.factorial(e-1)}),binomial:s(function(e,t){var r,i;if(t>e||t<0)return NaN;if(t=Math.round(t),e=Math.round(e),0===t||t===e)return 1;for(i=0,r=1;i<t;i++)r*=e-i,r/=i+1;return r}),cosh:Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))*.5},sinh:Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))*.5},acosh:Math.acosh||function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:Math.asinh||function(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))},cot:function(e){return 1/Math.tan(e)},acot:function(e){return(e>=0?.5:-.5)*Math.PI-Math.atan(e)},nthroot:function(e,t){var r=1/t;return t<=0||Math.floor(t)!==t?NaN:0===e?0:e>0?Math.exp(r*Math.log(e)):t%2==1?-Math.exp(r*Math.log(-e)):NaN},cbrt:Math.cbrt||function(e){return this.nthroot(e,3)},pow:function(e,t){return 0===e?0===t?1:0:Math.floor(t)===t?Math.pow(e,t):e>0?Math.exp(t*Math.log(e)):NaN},ratpow:function(e,t,r){var i;return 0===t?1:0===r?NaN:(i=this.gcd(t,r),this.nthroot(this.pow(e,t/i),r/i))},log10:function(e){return Math.log(e)/Math.log(10)},log2:function(e){return Math.log(e)/Math.log(2)},log:function(e,t){return void 0!==t&&o.Z.isNumber(t)?Math.log(e)/Math.log(t):Math.log(e)},sign:Math.sign||function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},squampow:function(e,t){var r;if(Math.floor(t)===t){for(r=1,t<0&&(e=1/e,t*=-1);0!==t;)1&t&&(r*=e),t>>=1,e*=e;return r}return this.pow(e,t)},gcd:function(e,t){var r;if(e=Math.abs(e),t=Math.abs(t),!(o.Z.isNumber(e)&&o.Z.isNumber(t)))return NaN;for(t>e&&(r=e,e=t,t=r);;){if(0==(e%=t))return t;if(0==(t%=e))return e}},lcm:function(e,t){var r;return o.Z.isNumber(e)&&o.Z.isNumber(t)?0!=(r=e*t)?r/this.gcd(e,t):0:NaN},erf:function(e){return this.ProbFuncs.erf(e)},erfc:function(e){return this.ProbFuncs.erfc(e)},erfi:function(e){return this.ProbFuncs.erfi(e)},ndtr:function(e){return this.ProbFuncs.ndtr(e)},ndtri:function(e){return this.ProbFuncs.ndtri(e)},hypot:function(){var e,t,r,i;for(e=0,t=arguments.length,i=0;e<t;e++)r=arguments[e],i+=r*r;return Math.sqrt(i)},hstep:function(e){return e>0?1:e<0?0:.5},lt:function(e,t){return e<t},leq:function(e,t){return e<=t},gt:function(e,t){return e>t},geq:function(e,t){return e>=t},eq:function(e,t){return e===t},neq:function(e,t){return e!==t},and:function(e,t){return e&&t},not:function(e){return!e},or:function(e,t){return e||t},xor:function(e,t){return(e||t)&&!(e&&t)},normalize:function(e){var t,r,i=2*e[3],n=e[4]/i;return e[5]=n,e[6]=-e[1]/i,e[7]=-e[2]/i,isFinite(n)?Math.abs(n)>=1?(e[0]=(e[6]*e[6]+e[7]*e[7]-n*n)/(2*n),e[1]=-e[6]/n,e[2]=-e[7]/n,e[3]=1/(2*n),e[4]=1):(r=n<=0?-1:1,e[0]=r*(e[6]*e[6]+e[7]*e[7]-n*n)*.5,e[1]=-r*e[6],e[2]=-r*e[7],e[3]=r/2,e[4]=r*n):(t=this.hypot(e[1],e[2]),e[0]/=t,e[1]/=t,e[2]/=t,e[3]=0,e[4]=1),e},toGL:function(e){var t,r,i;if(t="function"==typeof Float32Array?new Float32Array(16):Array(16),4!==e.length&&4!==e[0].length)return t;for(r=0;r<4;r++)for(i=0;i<4;i++)t[r+4*i]=e[r][i];return t},Vieta:function(e){var t,r,i,n=e.length,o=[];for(t=1,o=e.slice();t<n;++t){for(i=o[t],o[t]*=o[t-1],r=t-1;r>=1;--r)o[r]+=o[r-1]*i;o[0]+=i}return o}},t.Z=n.Z.Math},4401:function(e,t,r){"use strict";var i=r(7901),n=r(4204),o=r(1013);n.Z.Statistics={sum:function(e){var t,r=e.length,i=0;for(t=0;t<r;t++)i+=e[t];return i},prod:function(e){var t,r=e.length,i=1;for(t=0;t<r;t++)i*=e[t];return i},mean:function(e){return e.length>0?this.sum(e)/e.length:0},median:function(e){var t,r;return e.length>0?(ArrayBuffer.isView(e)?(t=new Float64Array(e)).sort():(t=e.slice(0)).sort(function(e,t){return e-t}),1&(r=t.length))?t[parseInt(.5*r,10)]:(t[.5*r-1]+t[.5*r])*.5:0},percentile:function(e,t){var r,i,n,s,a,u=[];if(e.length>0){for(ArrayBuffer.isView(e)?(r=new Float64Array(e)).sort():(r=e.slice(0)).sort(function(e,t){return e-t}),i=r.length,s=o.Z.isArray(t)?t:[t],n=0;n<s.length;n++)parseInt(a=i*s[n]*.01,10)===a?u.push((r[a-1]+r[a])*.5):u.push(r[parseInt(a,10)]);return o.Z.isArray(t)?u:u[0]}return 0},variance:function(e){var t,r,i,n=e.length;if(n>1){for(i=0,t=this.mean(e),r=0;i<n;i++)r+=(e[i]-t)*(e[i]-t);return r/(e.length-1)}return 0},sd:function(e){return Math.sqrt(this.variance(e))},weightedMean:function(e,t){if(e.length!==t.length)throw Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return e.length>0?this.mean(this.multiply(e,t)):0},max:function(e){return Math.max.apply(this,e)},min:function(e){return Math.min.apply(this,e)},range:function(e){return[this.min(e),this.max(e)]},abs:function(e){var t,r,i;if(o.Z.isArray(e)){if(e.map)i=e.map(Math.abs);else for(t=0,r=e.length,i=[];t<r;t++)i[t]=Math.abs(e[t])}else i=ArrayBuffer.isView(e)?e.map(Math.abs):Math.abs(e);return i},add:function(e,t){var r,i,n=[];if(e=o.Z.evalSlider(e),t=o.Z.evalSlider(t),o.Z.isArray(e)&&o.Z.isNumber(t))for(r=0,i=e.length;r<i;r++)n[r]=e[r]+t;else if(o.Z.isNumber(e)&&o.Z.isArray(t))for(r=0,i=t.length;r<i;r++)n[r]=e+t[r];else if(o.Z.isArray(e)&&o.Z.isArray(t))for(r=0,i=Math.min(e.length,t.length);r<i;r++)n[r]=e[r]+t[r];else n=e+t;return n},div:function(e,t){var r,i,n=[];if(e=o.Z.evalSlider(e),t=o.Z.evalSlider(t),o.Z.isArray(e)&&o.Z.isNumber(t))for(r=0,i=e.length;r<i;r++)n[r]=e[r]/t;else if(o.Z.isNumber(e)&&o.Z.isArray(t))for(r=0,i=t.length;r<i;r++)n[r]=e/t[r];else if(o.Z.isArray(e)&&o.Z.isArray(t))for(r=0,i=Math.min(e.length,t.length);r<i;r++)n[r]=e[r]/t[r];else n=e/t;return n},divide:function(){i.Z.deprecated("Statistics.divide()","Statistics.div()"),n.Z.Statistics.div.apply(n.Z.Statistics,arguments)},mod:function(e,t,r){var i,s,a=[],u=function(e,t){return e%t};if((r=o.Z.def(r,!1))&&(u=n.Z.mod),e=o.Z.evalSlider(e),t=o.Z.evalSlider(t),o.Z.isArray(e)&&o.Z.isNumber(t))for(i=0,s=e.length;i<s;i++)a[i]=u(e[i],t);else if(o.Z.isNumber(e)&&o.Z.isArray(t))for(i=0,s=t.length;i<s;i++)a[i]=u(e,t[i]);else if(o.Z.isArray(e)&&o.Z.isArray(t))for(i=0,s=Math.min(e.length,t.length);i<s;i++)a[i]=u(e[i],t[i]);else a=u(e,t);return a},multiply:function(e,t){var r,i,n=[];if(e=o.Z.evalSlider(e),t=o.Z.evalSlider(t),o.Z.isArray(e)&&o.Z.isNumber(t))for(r=0,i=e.length;r<i;r++)n[r]=e[r]*t;else if(o.Z.isNumber(e)&&o.Z.isArray(t))for(r=0,i=t.length;r<i;r++)n[r]=e*t[r];else if(o.Z.isArray(e)&&o.Z.isArray(t))for(r=0,i=Math.min(e.length,t.length);r<i;r++)n[r]=e[r]*t[r];else n=e*t;return n},subtract:function(e,t){var r,i,n=[];if(e=o.Z.evalSlider(e),t=o.Z.evalSlider(t),o.Z.isArray(e)&&o.Z.isNumber(t))for(r=0,i=e.length;r<i;r++)n[r]=e[r]-t;else if(o.Z.isNumber(e)&&o.Z.isArray(t))for(r=0,i=t.length;r<i;r++)n[r]=e-t[r];else if(o.Z.isArray(e)&&o.Z.isArray(t))for(r=0,i=Math.min(e.length,t.length);r<i;r++)n[r]=e[r]-t[r];else n=e-t;return n},TheilSenRegression:function(e){var t,r,i=[],o=[],s=[];for(t=0;t<e.length;t++){for(r=0,o.length=0;r<e.length;r++)Math.abs(e[r].usrCoords[1]-e[t].usrCoords[1])>n.Z.eps&&(o[r]=(e[r].usrCoords[2]-e[t].usrCoords[2])/(e[r].usrCoords[1]-e[t].usrCoords[1]));i[t]=this.median(o),s.push(e[t].usrCoords[2]-i[t]*e[t].usrCoords[1])}return[this.median(s),this.median(i),-1]},generateGaussian:function(e,t){var r,i,n;if(this.hasSpare)return this.hasSpare=!1,this.spare*t+e;do n=(r=2*Math.random()-1)*r+(i=2*Math.random()-1)*i;while(n>=1||0===n);return n=Math.sqrt(-2*Math.log(n)/n),this.spare=i*n,this.hasSpare=!0,e+t*r*n}},t.Z=n.Z.Statistics},2137:function(e,t,r){"use strict";var i=r(7901),n=r(2840),o=r(1013);i.Z.GeonextParser={replacePow:function(e){var t,r,i,n,o,s,a,u,l,c,h,d;for(c=(e=e.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),n=-1;c>=0&&c<e.length-1;){if(n===c)throw Error("JSXGraph: Error while parsing expression '"+e+"'");if(n=c,l=e.slice(0,c),h=e.slice(c+1),")"===l.charAt(l.length-1)){for(t=1,r=l.length-2;r>=0&&t>0;)")"===(i=l.charAt(r))?t++:"("===i&&(t-=1),r-=1;if(0===t){for(o="",a=l.substring(0,r+1),u=r;u>=0&&a.slice(u,u+1).match(/([\w.]+)/);)o=RegExp.$1+o,u-=1;o+=l.substring(r+1,l.length),o=o.replace(/([()+*%^\-/\][])/g,"\\$1")}else throw Error("JSXGraph: Missing '(' in expression")}else o="[\\w\\.]+";if(h.match(/^([\w.]*\()/)){for(t=1,r=RegExp.$1.length;r<h.length&&t>0;)")"===(i=h.charAt(r))?t-=1:"("===i&&(t+=1),r+=1;if(0===t)s=(s=h.substring(0,r)).replace(/([()+*%^\-/[\]])/g,"\\$1");else throw Error("JSXGraph: Missing ')' in expression")}else s="[\\w\\.]+";d=RegExp("("+o+")\\^("+s+")"),c=(e=e.replace(d,"pow($1,$2)")).indexOf("^")}return e},replaceIf:function(e){var t,r,i,n,o,s,a,u,l,c="",h=null,d=null,p=null;if((i=e.indexOf("If("))<0)return e;for(e=e.replace(/""/g,"0");i>=0;){for(t=e.slice(0,i),r=e.slice(i+3),o=1,n=0,s=-1,a=-1;n<r.length&&o>0;)")"===(u=r.charAt(n))?o-=1:"("===u?o+=1:","===u&&1===o&&(s<0?s=n:a=n),n+=1;if(l=r.slice(0,n-1),r=r.slice(n),s<0||a<0)return"";h=l.slice(0,s),d=l.slice(s+1,a),p=l.slice(a+1),c+=t+"(("+(h=this.replaceIf(h))+")?("+(d=this.replaceIf(d))+"):("+(p=this.replaceIf(p))+"))",h=null,d=null,i=(e=r).indexOf("If(")}return c+r},replaceNameById:function(e,t,r){var i,n,o,s,a=0,u=["X","Y","L","V"],l=function(e){return r?"$('"+e+"')":e};for(s=0;s<u.length;s++)for(a=e.indexOf(u[s]+"(");a>=0;)a>=0&&(i=e.indexOf(")",a+2))>=0&&(n=(n=e.slice(a+2,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+2)+(r?"$('":"")+l(o.id)+e.slice(i))),i=e.indexOf(")",a+2),a=e.indexOf(u[s]+"(",i);for(a=e.indexOf("Dist(");a>=0;)a>=0&&(i=e.indexOf(",",a+5))>=0&&(n=(n=e.slice(a+5,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+5)+l(o.id)+e.slice(i))),i=e.indexOf(",",a+5),a=e.indexOf(",",i),(i=e.indexOf(")",a+1))>=0&&(n=(n=e.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+1)+l(o.id)+e.slice(i))),i=e.indexOf(")",a+1),a=e.indexOf("Dist(",i);for(s=0,u=["Deg","Rad"];s<u.length;s++)for(a=e.indexOf(u[s]+"(");a>=0;)a>=0&&(i=e.indexOf(",",a+4))>=0&&(n=(n=e.slice(a+4,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+4)+l(o.id)+e.slice(i))),i=e.indexOf(",",a+4),a=e.indexOf(",",i),(i=e.indexOf(",",a+1))>=0&&(n=(n=e.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+1)+l(o.id)+e.slice(i))),i=e.indexOf(",",a+1),a=e.indexOf(",",i),(i=e.indexOf(")",a+1))>=0&&(n=(n=e.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=t.elementsByName[n])&&(e=e.slice(0,a+1)+l(o.id)+e.slice(i))),i=e.indexOf(")",a+1),a=e.indexOf(u[s]+"(",i);return e},replaceIdByObj:function(e){var t=/(X|Y|L)\(([\w_]+)\)/g;return e=e.replace(t,"$('$2').$1()"),t=/(V)\(([\w_]+)\)/g,e=e.replace(t,"$('$2').Value()"),t=/(Dist)\(([\w_]+),([\w_]+)\)/g,e=e.replace(t,"dist($('$2'), $('$3'))"),t=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,e=e.replace(t,"deg($('$2'),$('$3'),$('$4'))"),t=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,e=e.replace(t,"rad($('$1'),$('$2'),$('$3'))"),t=/N\((.+)\)/g,e=e.replace(t,"($1)")},geonext2JS:function(e,t){var r,i,n,o=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],s=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(n=0,i=e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),i=this.replaceNameById(i,t),i=this.replaceIf(i),i=this.replacePow(i),i=this.replaceIdByObj(i);n<o.length;n++)r=RegExp(["(\\W|^)(",o[n],")"].join(""),"ig"),i=i.replace(r,["$1",s[n]].join(""));return(i=(i=(i=(i=i.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(e,t,r){var i,s,a;for(s in o.Z.exists(r)||(r=e.board),i=r.elementsByName)i.hasOwnProperty(s)&&s!==e.name&&(i[s].elementClass===n.Z.OBJECT_CLASS_TEXT?!o.Z.evaluate(i[s].visProp.islabel)&&(a=RegExp("\\(([\\w\\[\\]'_ ]+,)*("+s.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")(,[\\w\\[\\]'_ ]+)*\\)","g"),t.search(a)>=0&&i[s].addChild(e)):(a=RegExp("\\(([\\w\\[\\]'_ ]+,)*("+s.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")(,[\\w\\[\\]'_ ]+)*\\)","g"),t.search(a)>=0&&i[s].addChild(e)))},gxt2jc:function(e,t){var r;return r=e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),r=(r=(r=(r=this.replaceNameById(r,t,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}},t.Z=i.Z.GeonextParser},2141:function(e,t,r){"use strict";var i=r(7901),n=r(1013),o=r(4204),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},a=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];i.Z.rgbParser=function(e,t,r){var i,o,u,l,c,h,d,p,f,m,v=e;if(!n.Z.exists(e))return[];if(n.Z.exists(t)&&n.Z.exists(r)&&(v=[e,t,r]),i=v,m=!1,n.Z.isArray(i)){for(h=0;h<3;h++)m=m||/\./.test(v[h].toString());for(h=0;h<3;h++)m=m&&v[h]>=0&&v[h]<=1;return m?[Math.ceil(255*v[0]),Math.ceil(255*v[1]),Math.ceil(255*v[2])]:v}for("string"==typeof v&&(i=v),"#"===i.charAt(0)&&(i=i.slice(1,7)),i=s[i=i.replace(/ /g,"").toLowerCase()]||i,h=0;h<a.length;h++)u=a[h].re,l=a[h].process,(c=u.exec(i))&&(d=(o=l(c))[0],p=o[1],f=o[2]);return isNaN(d)||isNaN(p)||isNaN(f)?[]:[d=d<0||isNaN(d)?0:d>255?255:d,p=p<0||isNaN(p)?0:p>255?255:p,f=f<0||isNaN(f)?0:f>255?255:f]},i.Z.rgb2css=function(e,t,r){var n;return"rgb("+(n=i.Z.rgbParser(e,t,r))[0]+", "+n[1]+", "+n[2]+")"},i.Z.rgb2hex=function(e,t,r){var n,o,s;return o=(n=i.Z.rgbParser(e,t,r))[1],s=n[2],n=(n=n[0]).toString(16),o=o.toString(16),s=s.toString(16),1===n.length&&(n="0"+n),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),"#"+n+o+s},i.Z.hex2rgb=function(e){return i.Z.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),i.Z.rgb2css(e)},i.Z.hsv2rgb=function(e,t,r){var i,n,s,a,u,l,c,h,d;if(e=(e%360+360)%360,0===t){if(!isNaN(e)&&!(e<o.Z.eps))return"#ffffff";i=r,n=r,s=r}else switch(u=Math.floor(l=(e>=360?0:e)/60),a=l-u,c=r*(1-t),h=r*(1-t*a),d=r*(1-t*(1-a)),u){case 0:i=r,n=d,s=c;break;case 1:i=h,n=r,s=c;break;case 2:i=c,n=r,s=d;break;case 3:i=c,n=h,s=r;break;case 4:i=d,n=c,s=r;break;case 5:i=r,n=c,s=h}return["#",i=2===(i=Math.round(255*i).toString(16)).length?i:1===i.length?"0"+i:"00",n=2===(n=Math.round(255*n).toString(16)).length?n:1===n.length?"0"+n:"00",s=2===(s=Math.round(255*s).toString(16)).length?s:1===s.length?"0"+s:"00"].join("")},i.Z.rgb2hsv=function(e,t,r){var n,o,s,a,u,l,c,h,d,p,f,m;return o=(n=i.Z.rgbParser(e,t,r))[1],s=n[2],a=(n=n[0])/255,u=o/255,l=s/255,f=Math.max(n,o,s),m=Math.min(n,o,s),c=f/255,h=m/255,p=0,c>0&&(p=(c-h)/c),d=1/(c-h),p>0&&(d=f===n?(u-l)*d:f===o?2+(l-a)*d:4+(a-u)*d),(d*=60)<0&&(d+=360),f===m&&(d=0),[d,p,c]},i.Z.rgb2LMS=function(e,t,r){var n,o,s,a,u,l,c,h=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return o=(n=i.Z.rgbParser(e,t,r))[1],s=n[2],n=Math.pow(n=n[0],.476190476),o=Math.pow(o,.476190476),s=Math.pow(s,.476190476),(c=[a=n*h[0][0]+o*h[0][1]+s*h[0][2],u=n*h[1][0]+o*h[1][1]+s*h[1][2],l=n*h[2][0]+o*h[2][1]+s*h[2][2]]).l=a,c.m=u,c.s=l,c},i.Z.LMS2rgb=function(e,t,r){var i,n,o,s,a=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],u=function(e){for(var t=127,r=64;r>0;){if(Math.pow(t,.476190476)>e)t-=r;else{if(Math.pow(t+1,.476190476)>e)return t;t+=r}r/=2}return 254===t&&13.994955247<e?255:t};return i=e*a[0][0]+t*a[0][1]+r*a[0][2],n=e*a[1][0]+t*a[1][1]+r*a[1][2],o=e*a[2][0]+t*a[2][1]+r*a[2][2],(s=[i=u(i),n=u(n),o=u(o)]).r=i,s.g=n,s.b=o,s},i.Z.rgba2rgbo=function(e){var t;return 9===e.length&&"#"===e.charAt(0)?(t=parseInt(e.slice(7,9).toUpperCase(),16)/255,e=e.slice(0,7)):t=1,[e,t]},i.Z.rgbo2rgba=function(e,t){var r;return"none"===e?e:(1===(r=Math.round(255*t).toString(16)).length&&(r="0"+r),e+r)},i.Z.rgb2bw=function(e){var t,r,n,o="0123456789ABCDEF";return"none"===e?e:e="#"+(r=o.charAt((t=Math.floor(.3*(n=i.Z.rgbParser(e))[0]+.59*n[1]+.11*n[2]))>>4&15)+o.charAt(15&t))+r+r},i.Z.rgb2cb=function(e,t){var r,n,o,s,a,u,l,c,h,d,p,f,m,v="0123456789ABCDEF";if("none"===e)return e;switch(n=(a=i.Z.rgb2LMS(e))[0],o=a[1],s=a[2],t=t.toLowerCase()){case"protanopia":l=-.06150039994295001,c=.08277001656812001,h=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,f=.013289415272000003,n=s/o<(m=.6903216543277437)?-(c*o+h*s)/l:-(p*o+f*s)/d;break;case"tritanopia":l=-.00058973116217,c=.007690316482,h=-.01011703519052,d=.025495080838999994,p=-.0422740347,f=.017005316784,s=o/n<(m=.8349489908460004)?-(l*n+c*o)/h:-(d*n+p*o)/f;break;default:l=-.06150039994295001,c=.08277001656812001,h=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,f=.013289415272000003,o=s/n<(m=.5763833686400911)?-(l*n+h*s)/c:-(d*n+f*s)/p}return e="#"+(v.charAt((r=i.Z.LMS2rgb(n,o,s))[0]>>4&15)+v.charAt(15&r[0]))+(v.charAt(r[1]>>4&15)+v.charAt(15&r[1]))+(v.charAt(r[2]>>4&15)+v.charAt(15&r[2]))},i.Z.autoHighlight=function(e){var t=i.Z.rgba2rgbo(e),r=t[0],n=t[1];return"#"===e.charAt(0)?(n<.3?n*=1.8:n*=.4,i.Z.rgbo2rgba(r,n)):e},i.Z.contrast=function(e,t,r,n){var o,s,a,u;return(t=t||"#000000",r=r||"#ffffff",n=n||7,o=i.Z.rgbParser(e),s=i.Z.rgbParser("#000000"),((a=.2126*Math.pow(o[0]/255,2.2)+.7152*Math.pow(o[1]/255,2.2)+.0722*Math.pow(o[2]/255,2.2))>(u=.2126*Math.pow(s[0]/255,2.2)+.7152*Math.pow(s[1]/255,2.2)+.0722*Math.pow(s[2]/255,2.2))?Math.floor((a+.05)/(u+.05)):Math.floor((u+.05)/(a+.05)))-1>n)?t:r},i.Z.setClassicColors=function(){i.Z.Options.elements.strokeColor="blue",i.Z.Options.elements.fillColor="red",i.Z.Options.hatch.strokeColor="blue",i.Z.Options.angle.fillColor="#ff7f00",i.Z.Options.angle.highlightFillColor="#ff7f00",i.Z.Options.angle.strokeColor="#ff7f00",i.Z.Options.angle.label.strokeColor="blue",i.Z.Options.arc.strokeColor="blue",i.Z.Options.circle.center.fillColor="red",i.Z.Options.circle.center.strokeColor="blue",i.Z.Options.circumcircle.strokeColor="blue",i.Z.Options.circumcircle.center.fillColor="red",i.Z.Options.circumcircle.center.strokeColor="blue",i.Z.Options.circumcirclearc.strokeColor="blue",i.Z.Options.circumcirclesector.strokeColor="blue",i.Z.Options.circumcirclesector.fillColor="green",i.Z.Options.circumcirclesector.highlightFillColor="green",i.Z.Options.conic.strokeColor="blue",i.Z.Options.curve.strokeColor="blue",i.Z.Options.incircle.strokeColor="blue",i.Z.Options.incircle.center.fillColor="red",i.Z.Options.incircle.center.strokeColor="blue",i.Z.Options.inequality.fillColor="red",i.Z.Options.integral.fillColor="red",i.Z.Options.integral.curveLeft.color="red",i.Z.Options.integral.curveRight.color="red",i.Z.Options.line.strokeColor="blue",i.Z.Options.point.fillColor="red",i.Z.Options.point.strokeColor="red",i.Z.Options.polygon.fillColor="green",i.Z.Options.polygon.highlightFillColor="green",i.Z.Options.polygon.vertices.strokeColor="red",i.Z.Options.polygon.vertices.fillColor="red",i.Z.Options.regularpolygon.fillColor="green",i.Z.Options.regularpolygon.highlightFillColor="green",i.Z.Options.regularpolygon.vertices.strokeColor="red",i.Z.Options.regularpolygon.vertices.fillColor="red",i.Z.Options.riemannsum.fillColor="yellow",i.Z.Options.sector.fillColor="green",i.Z.Options.sector.highlightFillColor="green",i.Z.Options.semicircle.center.fillColor="red",i.Z.Options.semicircle.center.strokeColor="blue",i.Z.Options.slopetriangle.fillColor="red",i.Z.Options.slopetriangle.highlightFillColor="red",i.Z.Options.turtle.arrow.strokeColor="blue"},i.Z.extend(i.Z,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),i.Z.palette=i.Z.paletteWong,t.Z=i.Z},4735:function(e,t,r){"use strict";var i=r(7901),n=r(1013),o=r(9079);i.Z.extendConstants(i.Z,{touchProperty:"touches"}),i.Z.extend(i.Z,{isTouchEvent:function(e){return i.Z.exists(e[i.Z.touchProperty])},isPointerEvent:function(e){return i.Z.exists(e.pointerId)},isMouseEvent:function(e){return!i.Z.isTouchEvent(e)&&!i.Z.isPointerEvent(e)},getNumberOfTouchPoints:function(e){var t=-1;return i.Z.isTouchEvent(e)&&(t=e[i.Z.touchProperty].length),t},isFirstTouch:function(e){var t=i.Z.getNumberOfTouchPoints(e);return i.Z.isPointerEvent(e)?e.isPrimary:1===t},isBrowser:"object"==typeof document,supportsES6:function(){try{return Function("(a = 0) => a"),!0}catch(e){return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var e=!1;return this.isNode()&&(e=!0),e||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&void 0!==o&&-1!==o.release.name.search(/node|io.js/)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return n.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return n.Z.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return n.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return n.Z.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var e,t,r=3;if("object"!=typeof document)return 0;t=(e=document.createElement("div")).getElementsByTagName("i");do e.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(t[0]);return r>4?r:void 0}(),getDimensions:function(e,t){var r,i,o,s,a,u,l,c,h,d=/\d+(\.\d*)?px/;if(!this.isBrowser||null===e)return{width:500,height:500};if(t=t||document,r=n.Z.isString(e)?t.getElementById(e):e,!n.Z.exists(r))throw Error("\nJSXGraph: HTML container element '"+e+"' not found.");return"none"!==(i=r.style.display)&&null!==i?r.clientWidth>0&&r.clientHeight>0?{width:r.clientWidth,height:r.clientHeight}:{width:d.test((h=window.getComputedStyle?window.getComputedStyle(r):r.style).width)?parseFloat(h.width):0,height:d.test(h.height)?parseFloat(h.height):0}:(s=(o=r.style).visibility,a=o.position,u=o.display,o.visibility="hidden",o.position="absolute",o.display="block",l=r.clientWidth,c=r.clientHeight,o.display=u,o.position=a,o.visibility=s,{width:l,height:c})},addEvent:function(e,t,r,i,o){var s=function(){return r.apply(i,arguments)};s.origin=r,"object"==typeof i&&n.Z.exists(i.BOARD_MODE_NONE)&&(i["x_internal"+t]=i["x_internal"+t]||[],i["x_internal"+t].push(s)),n.Z.exists(e)&&n.Z.exists(e.addEventListener)&&(o=o||!1,e.addEventListener(t,s,o)),n.Z.exists(e)&&n.Z.exists(e.attachEvent)&&e.attachEvent("on"+t,s)},removeEvent:function(e,t,r,o){var s;if(!n.Z.exists(o)){i.Z.debug("no such owner");return}if(!n.Z.exists(o["x_internal"+t])){i.Z.debug("no such type: "+t);return}if(!n.Z.isArray(o["x_internal"+t])){i.Z.debug("owner[x_internal + "+t+"] is not an array");return}if(-1===(s=n.Z.indexOf(o["x_internal"+t],r,"origin"))){i.Z.debug("removeEvent: no such event function in internal list: "+r);return}try{n.Z.exists(e)&&n.Z.exists(e.removeEventListener)&&e.removeEventListener(t,o["x_internal"+t][s],!1),n.Z.exists(e)&&n.Z.exists(e.detachEvent)&&e.detachEvent("on"+t,o["x_internal"+t][s])}catch(e){i.Z.debug("event not registered in browser: ("+t+" -- "+r+")")}o["x_internal"+t].splice(s,1)},removeAllEvents:function(e,t,r){var n;if(r["x_internal"+t]){for(n=r["x_internal"+t].length-1;n>=0;n--)i.Z.removeEvent(e,t,r["x_internal"+t][n].origin,r);r["x_internal"+t].length>0&&i.Z.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(e,t,r){var o,s,a,u=0,l=0;if(e||(e=window.event),r=r||document,a=e[i.Z.touchProperty],n.Z.exists(a)&&0===a.length&&(a=e.changedTouches),n.Z.exists(t)&&n.Z.exists(a)){if(-1===t){for(o=0,s=a.length;o<s;o++)if(a[o]){e=a[o];break}}else e=a[t]}return e.clientX&&(u=e.clientX,l=e.clientY),[u,l]},getOffset:function(e){var t,r=e,i=e,n=r.offsetLeft-r.scrollLeft,o=r.offsetTop-r.scrollTop;for(n=(t=this.getCSSTransform([n,o],r))[0],o=t[1],r=r.offsetParent;r;){for(n+=r.offsetLeft,o+=r.offsetTop,r.offsetParent&&(n+=r.clientLeft-r.scrollLeft,o+=r.clientTop-r.scrollTop),n=(t=this.getCSSTransform([n,o],r))[0],o=t[1],i=i.parentNode;i!==r;)n+=i.clientLeft-i.scrollLeft,o+=i.clientTop-i.scrollTop,n=(t=this.getCSSTransform([n,o],i))[0],o=t[1],i=i.parentNode;r=r.offsetParent}return[n,o]},getStyle:function(e,t){var r,n=e.ownerDocument;return n.defaultView&&n.defaultView.getComputedStyle?r=n.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.currentStyle&&i.Z.ieVersion>=9?r=e.currentStyle[t]:e.style&&(t=t.replace(/-([a-z]|[0-9])/gi,function(e,t){return t.toUpperCase()}),r=e.style[t]),r},getProp:function(e,t){var r=parseInt(this.getStyle(e,t),10);return isNaN(r)?0:r},getCSSTransform:function(e,t){var r,i,o,s,a,u,l,c=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(r=0,a=c.length,o="";r<a;r++)if(n.Z.exists(t.style[c[r]])){o=t.style[c[r]];break}if(""!==o&&(s=o.indexOf("("))>0){for(i=0,a=o.length,u=(l=o.substring(s+1,a-1).split(",")).length;i<u;i++)l[i]=parseFloat(l[i]);0===o.indexOf("matrix")?(e[0]+=l[4],e[1]+=l[5]):0===o.indexOf("translateX")?e[0]+=l[0]:0===o.indexOf("translateY")?e[1]+=l[0]:0===o.indexOf("translate")&&(e[0]+=l[0],e[1]+=l[1])}return n.Z.exists(t.style.zoom)&&""!==(o=t.style.zoom)&&(e[0]*=parseFloat(o),e[1]*=parseFloat(o)),e},getCSSTransformMatrix:function(e){var t,r,i,o,s,a,u,l,c=e.ownerDocument,h=["transform","webkitTransform","MozTransform","msTransform","oTransform"],d=[[1,0,0],[0,1,0],[0,0,1]];if(c.defaultView&&c.defaultView.getComputedStyle)i=(l=c.defaultView.getComputedStyle(e,null)).getPropertyValue("-webkit-transform")||l.getPropertyValue("-moz-transform")||l.getPropertyValue("-ms-transform")||l.getPropertyValue("-o-transform")||l.getPropertyValue("transform");else for(t=0,a=h.length,i="";t<a;t++)if(n.Z.exists(e.style[h[t]])){i=e.style[h[t]];break}if(""!==i&&(s=i.indexOf("("))>0){for(r=0,a=i.length,u=(o=i.substring(s+1,a-1).split(",")).length;r<u;r++)o[r]=parseFloat(o[r]);0===i.indexOf("matrix")?d=[[1,0,0],[0,o[0],o[1]],[0,o[2],o[3]]]:0===i.indexOf("scaleX")?d[1][1]=o[0]:0===i.indexOf("scaleY")?d[2][2]=o[0]:0===i.indexOf("scale")&&(d[1][1]=o[0],d[2][2]=o[1])}return n.Z.exists(e.style.zoom)&&""!==(i=e.style.zoom)&&(d[1][1]*=parseFloat(i),d[2][2]*=parseFloat(i)),d},timedChunk:function(e,t,r,i){var n=e.concat(),o=function(){var s=+new Date;do t.call(r,n.shift());while(n.length>0&&+new Date-s<300);n.length>0?window.setTimeout(o,1):i(e)};window.setTimeout(o,1)},scaleJSXGraphDiv:function(e,t,r,n){var o,s,a,u,l,c,h,d,p,f,m,v;for(s=(a=r.getElementById(e).getBoundingClientRect()).height,o=a.width,c=(d=r.getElementById(t))._cssFullscreenStore.w,m=(h=d._cssFullscreenStore.h)/c,c>o*n&&(h=(c=o*n)*m),h>s*n&&(c=(h=s*n)/m),u=c,l=h,p=m<s/o?o*n/c:s*n/h,f=(s-l)*.5,v=0;v<4;v++)try{d.style.width=u+"px !important",d.style.height=l+"px !important",d.style.margin="0 auto",d.style.transform=d._cssFullscreenStore.transform+" matrix("+p+",0,0,"+p+",0,"+f+")";break}catch(e){i.Z.debug("JXG.scaleJSXGraphDiv:\n"+e)}4===v&&i.Z.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}}),t.Z=i.Z},6638:function(e,t,r){"use strict";var i=r(7901),n=r(1013);i.Z.EventEmitter={eventHandlers:{},suspended:{},trigger:function(e,t){var r,i,n,o,s,a;for(i=0,s=e.length;i<s;i++)if(o=this.eventHandlers[e[i]],!this.suspended[e[i]]){if(this.suspended[e[i]]=!0,o)for(r=0,a=o.length;r<a;r++)(n=o[r]).handler.apply(n.context,t);this.suspended[e[i]]=!1}return this},on:function(e,t,r){return n.Z.isArray(this.eventHandlers[e])||(this.eventHandlers[e]=[]),r=n.Z.def(r,this),this.eventHandlers[e].push({handler:t,context:r}),this},off:function(e,t){var r;return e&&n.Z.isArray(this.eventHandlers[e])&&(t?((r=n.Z.indexOf(this.eventHandlers[e],t,"handler"))>-1&&this.eventHandlers[e].splice(r,1),0===this.eventHandlers[e].length&&delete this.eventHandlers[e]):delete this.eventHandlers[e]),this},eventify:function(e){e.eventHandlers={},e.on=this.on,e.off=this.off,e.triggerEventHandlers=this.trigger,e.trigger=this.trigger,e.suspended={}}},t.Z=i.Z.EventEmitter},2285:function(e,t,r){"use strict";var i=r(7901),n=r(1013),o=r(2840),s=r(9401);i.Z.Expect={each:function(e,t,r){var i,o,s=[];if(n.Z.exists(e.length))for(i=0,o=e.length;i<o;i++)s.push(t.call(this,e[i],r));return s},coords:function(e,t){var r=e;return e&&e.elementClass===o.Z.OBJECT_CLASS_POINT?r=e.coords:e.usrCoords&&e.scrCoords&&e.usr2screen&&(r=e),t&&(r=new s.Z(o.Z.COORDS_BY_USER,r.usrCoords,r.board)),r},coordsArray:function(e,t){var r;return(r=n.Z.isArray(e)?e:this.coords(e).usrCoords).length<3&&r.unshift(1),t&&(r=[r[0],r[1],r[2]]),r}},t.Z=i.Z.Expect},1013:function(e,t,r){"use strict";var i=r(7901),n=r(2840);i.Z.extend(i.Z,{isBoard:function(e){return null!==e&&"object"==typeof e&&this.isNumber(e.BOARD_MODE_NONE)&&this.isObject(e.objects)&&this.isObject(e.jc)&&this.isFunction(e.update)&&!!e.containerObj&&this.isString(e.id)},isId:function(e,t){return"string"==typeof t&&!!e.objects[t]},isName:function(e,t){return"string"==typeof t&&!!e.elementsByName[t]},isGroup:function(e,t){return"string"==typeof t&&!!e.groups[t]},isString:function(e){return"string"==typeof e},isNumber:function(e,t,r){var i="number"==typeof e||"[Object Number]"===Object.prototype.toString.call(e);return r=void 0===r||r,(t=t||!1)&&(i=i||""+parseFloat(e)===e),r||(i=i&&!isNaN(e)),i},isFunction:function(e){return"function"==typeof e},isArray:function(e){return Array.isArray?Array.isArray(e):null!==e&&"object"==typeof e&&"function"==typeof e.splice&&"function"==typeof e.join},isObject:function(e){return"object"==typeof e&&!this.isArray(e)},isDocumentOrFragment:function(e){return this.isObject(e)&&(9===e.nodeType||11===e.nodeType)},isPoint:function(e){return!!(null!==e&&"object"==typeof e&&this.exists(e.elementClass))&&e.elementClass===n.Z.OBJECT_CLASS_POINT},isPoint3D:function(e){return!!(null!==e&&"object"==typeof e&&this.exists(e.elType))&&"point3d"===e.elType},isPointType:function(e,t){var r,i;return!!(this.isArray(t)||this.isFunction(t)&&(r=t(),this.isArray(r)&&r.length>1))||(i=e.select(t),this.isPoint(i))},isTransformationOrArray:function(e){if(null!==e){if(this.isArray(e)&&e.length>0)return this.isTransformationOrArray(e[0]);if("object"==typeof e)return e.type===n.Z.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(e){return 0===Object.keys(e).length},exists:function(e,t){var r=!(void 0==e||null===e);return(t=t||!1)?r&&""!==e:r},def:function(e,t){return this.exists(e)?e:t},str2Bool:function(e){return!this.exists(e)||("boolean"==typeof e?e:!!this.isString(e)&&"true"===e.toLowerCase())},createEvalFunction:function(e,t,r){var n,o,s,a=[],u={};for(o=0;o<r;o++)for(s in a[o]=i.Z.createFunction(t[o],e),a[o].deps)u[s]=a[o].deps;return(n=function(e){return a[e]()}).deps=u,n},createFunction:function(e,t,r,i){var n=null;return this.isString(e)?n=t.jc.snippet(e,!0,r,!1):this.isFunction(e)?(n=e).deps={}:this.isNumber(e)&&((n=function(){return e}).deps={}),null!==n&&(n.origin=e),n},providePoints:function(e,t,r,i,n){var o,s,a,u,l,c=0,h=[];for(this.isArray(t)||(t=[t]),a=t.length,this.exists(n)&&(c=n.length),0===c&&(u=this.copyAttributes(r,e.options,i)),o=0;o<a;++o)if(c>0&&(s=Math.min(o,c-1),u=this.copyAttributes(r,e.options,i,n[s].toLowerCase())),this.isArray(t[o])&&t[o].length>1?(h.push(e.create("point",t[o],u)),h[h.length-1]._is_new=!0):this.isFunction(t[o])?(l=t[o](),this.isArray(l)&&l.length>1&&(h.push(e.create("point",[t[o]],u)),h[h.length-1]._is_new=!0)):h.push(e.select(t[o])),!this.isPoint(h[o]))return!1;return h},providePoints3D:function(e,t,r,i,n){var o,s,a,u,l,c=0,h=[];for(this.isArray(t)||(t=[t]),a=t.length,this.exists(n)&&(c=n.length),0===c&&(u=this.copyAttributes(r,e.board.options,i)),o=0;o<a;++o)if(c>0&&(s=Math.min(o,c-1),u=this.copyAttributes(r,e.board.options,i,n[s])),this.isArray(t[o])&&t[o].length>1?(h.push(e.create("point3d",t[o],u)),h[h.length-1]._is_new=!0):this.isFunction(t[o])?(l=t[o](),this.isArray(l)&&l.length>1&&(h.push(e.create("point3d",[t[o]],u)),h[h.length-1]._is_new=!0)):h.push(e.select(t[o])),!this.isPoint3D(h[o]))return!1;return h},bind:function(e,t){return function(){return e.apply(t,arguments)}},evaluate:function(e){return this.isFunction(e)?e():e},indexOf:function(e,t,r){var i,n=this.exists(r);if(Array.indexOf&&!n)return e.indexOf(t);for(i=0;i<e.length;i++)if(n&&e[i][r]===t||!n&&e[i]===t)return i;return -1},eliminateDuplicates:function(e){var t,r=e.length,i=[],n={};for(t=0;t<r;t++)n[e[t]]=0;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i},swap:function(e,t,r){var i;return i=e[t],e[t]=e[r],e[r]=i,e},uniqueArray:function(e){var t,r,n,o=[];if(0===e.length)return[];for(t=0;t<e.length;t++){if(n=this.isArray(e[t]),!this.exists(e[t])){e[t]="";continue}for(r=t+1;r<e.length;r++)n&&i.Z.cmpArrays(e[t],e[r])?e[t]=[]:n||e[t]!==e[r]||(e[t]="")}for(t=0,r=0;t<e.length;t++)(n=this.isArray(e[t]))||""===e[t]?n&&0!==e[t].length&&(o[r]=e[t].slice(0),r++):(o[r]=e[t],r++);return e=o,o},isInArray:function(e,t){return i.Z.indexOf(e,t)>-1},coordsArrayToMatrix:function(e,t){var r,i=[],n=[];for(r=0;r<e.length;r++)t?(i.push(e[r].usrCoords[1]),n.push(e[r].usrCoords[2])):n.push([e[r].usrCoords[1],e[r].usrCoords[2]]);return t&&(n=[i,n]),n},cmpArrays:function(e,t){var r;if(e===t)return!0;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(this.isArray(e[r])&&this.isArray(t[r])){if(!this.cmpArrays(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0},removeElementFromArray:function(e,t){var r;for(r=0;r<e.length;r++)if(e[r]===t){e.splice(r,1);break}return e},trunc:function(e,t){return t=i.Z.def(t,0),this.toFixed(e,t)},_decimalAdjust:function(e,t,r){return void 0===r||0==+r?Math[e](t):(r=+r,isNaN(t=+t)||!("number"==typeof r&&r%1==0))?NaN:+((t=(t=Math[e](+((t=t.toString().split("e"))[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))},_round10:function(e,t){return this._decimalAdjust("round",e,t)},_floor10:function(e,t){return this._decimalAdjust("floor",e,t)},_ceil10:function(e,t){return this._decimalAdjust("ceil",e,t)},toFixed:function(e,t){return this._round10(e,-t).toFixed(t)},autoDigits:function(e){var t=Math.abs(e);return t>=.1?this.toFixed(e,2):t>=.01?this.toFixed(e,4):t>=1e-4?this.toFixed(e,6):e},keys:function(e,t){var r,i=[];for(r in e)t?e.hasOwnProperty(r)&&i.push(r):i.push(r);return i},clone:function(e){var t={};return t.prototype=e,t},cloneAndCopy:function(e,t){var r,i=function(){};for(r in i.prototype=e,t)i[r]=t[r];return i},merge:function(e,t){var r,i,n,o;for(r in t)if(t.hasOwnProperty(r)){if(n=t[r],this.isArray(n))for(e[r]||(e[r]=[]),i=0;i<n.length;i++)o=t[r][i],"object"==typeof t[r][i]?e[r][i]=this.merge(e[r][i],o):e[r][i]=t[r][i];else"object"==typeof n?(e[r]||(e[r]={}),e[r]=this.merge(e[r],n)):("boolean"==typeof e&&(e={}),e[r]=n)}return e},deepCopy:function(e,t,r){var i,n,o,s;if(r=r||!1,"object"!=typeof e||null===e)return e;if(this.isArray(e))for(n=0,i=[];n<e.length;n++)null!==(o=e[n])&&"object"==typeof o?this.exists(o.board)?i[n]=o.id:i[n]=this.deepCopy(o,{},r):i[n]=o;else{for(n in i={},e)e.hasOwnProperty(n)&&(s=r?n.toLowerCase():n,null!==(o=e[n])&&"object"==typeof o?this.exists(o.board)?i[s]=o.id:i[s]=this.deepCopy(o,{},r):i[s]=o);for(n in t)t.hasOwnProperty(n)&&(s=r?n.toLowerCase():n,null!==(o=t[n])&&"object"==typeof o?this.isArray(o)||!this.exists(i[s])?i[s]=this.deepCopy(o,{},r):i[s]=this.deepCopy(i[s],o,r):i[s]=o)}return i},mergeAttr:function(e,t,r){var i,n,o;for(i in r=r||!0,t)t.hasOwnProperty(i)&&(n=r?i.toLowerCase():i,o=t[i],!this.isObject(o)||null===o||this.isDocumentOrFragment(o)||this.exists(o.board)||"string"==typeof o.valueOf()?e[n]=o:(void 0!==e[n]&&null!==e[n]&&this.isObject(e[n])||(e[n]={}),this.mergeAttr(e[n],o,r)))},copyAttributes:function(e,t,r){var n,o,s,a,u;for(s=arguments.length,n=s<3||({circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1})[r]?i.Z.deepCopy(t.elements,null,!0):{},s<4&&this.exists(r)&&this.exists(t.layer[r])&&(n.layer=t.layer[r]),a=t,u=!0,o=2;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}for(u&&(n=i.Z.deepCopy(n,a,!0)),a="object"==typeof e?e:{},u=!0,o=3;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}if(u&&this.mergeAttr(n,a,!0),"board"===arguments[2])return n;for(o=2,a=t,u=!0;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}return u&&this.exists(a.label)&&(n.label=i.Z.deepCopy(a.label,n.label)),n.label=i.Z.deepCopy(t.label,n.label),n},copyPrototypeMethods:function(e,t,r){var i;for(i in e.prototype[r]=t.prototype.constructor,t.prototype)t.prototype.hasOwnProperty(i)&&(e.prototype[i]=t.prototype[i])},toJSON:function(e,t){var r,n,o,s;if(t=i.Z.def(t,!1),void 0!==JSON&&JSON.stringify&&!t)try{return JSON.stringify(e)}catch(e){}switch(typeof e){case"object":if(e){if(r=[],this.isArray(e)){for(o=0;o<e.length;o++)r.push(i.Z.toJSON(e[o],t));return"["+r.join(",")+"]"}for(n in e)if(e.hasOwnProperty(n)){try{s=i.Z.toJSON(e[n],t)}catch(e){s=""}t?r.push(n+":"+s):r.push('"'+n+'":'+s)}return"{"+r.join(",")+"} "}return"null";case"string":return"'"+e.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return e.toString()}return"0"},clearVisPropOld:function(e){return e.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},e},isInObject:function(e,t){var r;for(r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0;return!1},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(e){return e.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},trimNumber:function(e){return("."===(e=(e=e.replace(/^0+/,"")).replace(/0+$/,""))[e.length-1]||","===e[e.length-1])&&(e=e.slice(0,-1)),("."===e[0]||","===e[0])&&(e="0"+e),e},filterElements:function(e,t){var r,i,n,o,s,a,u,l=e.length,c=[];if("function"!=typeof t&&"object"!=typeof t)return c;for(r=0;r<l;r++){if(u=!0,n=e[r],"object"==typeof t){for(i in t)if(t.hasOwnProperty(i)&&(o=i.toLowerCase(),s="function"==typeof n[i]?n[i]():n[i],a=n.visProp&&"function"==typeof n.visProp[o]?n.visProp[o]():n.visProp&&n.visProp[o],!(u="function"==typeof t[i]?t[i](s)||t[i](a):s===t[i]||a===t[i])))break}else"function"==typeof t&&(u=t(n));u&&c.push(n)}return c},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(e,t){return"function"==typeof html_sanitize&&t?html_sanitize(e,function(){},function(e){return e}):(e&&"string"==typeof e&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e)},evalSlider:function(e){return e&&e.type===n.Z.OBJECT_TYPE_GLIDER&&"function"==typeof e.Value?e.Value():e},stack2jsxgraph:function(e){var t;return"["===(t=e.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim())[0]&&"]"===t[t.length-1]&&(t=t.slice(1,-1).split(/\s*,\s*/)),t}}),t.Z=i.Z},383:function(e){!/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/function(t){"use strict";var r={s:1,n:0,d:1};function i(e,t){if(isNaN(e=parseInt(e,10)))throw c();return e*t}function n(e,t){if(0===t)throw l();var r=Object.create(u.prototype);r.s=e<0?-1:1;var i=a(e=e<0?-e:e,t);return r.n=e/i,r.d=t/i,r}function o(e){for(var t={},r=e,i=2,n=4;n<=r;){for(;r%i==0;)r/=i,t[i]=(t[i]||0)+1;n+=1+2*i++}return r!==e?r>1&&(t[r]=(t[r]||0)+1):t[e]=(t[e]||0)+1,t}var s=function(e,t){var n,o=0,s=1,a=1,u=0,d=0,p=0,f=1,m=1,v=0,g=1,b=1,y=1;if(null==e);else if(void 0!==t){if(a=(o=e)*(s=t),o%1!=0||s%1!=0)throw h()}else switch(typeof e){case"object":if("d"in e&&"n"in e)o=e.n,s=e.d,"s"in e&&(o*=e.s);else if(0 in e)o=e[0],1 in e&&(s=e[1]);else throw c();a=o*s;break;case"number":if(e<0&&(a=e,e=-e),e%1==0)o=e;else if(e>0){for(e>=1&&(m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=m);g<=1e7&&y<=1e7;){if(e===(n=(v+b)/(g+y))){g+y<=1e7?(o=v+b,s=g+y):y>g?(o=b,s=y):(o=v,s=g);break}e>n?(v+=b,g+=y):(b+=v,y+=g),g>1e7?(o=b,s=y):(o=v,s=g)}o*=m}else(isNaN(e)||isNaN(t))&&(s=o=NaN);break;case"string":if(null===(g=e.match(/\d+|./g)))throw c();if("-"===g[v]?(a=-1,v++):"+"===g[v]&&v++,g.length===v+1?d=i(g[v++],a):"."===g[v+1]||"."===g[v]?("."!==g[v]&&(u=i(g[v++],a)),(++v+1===g.length||"("===g[v+1]&&")"===g[v+3]||"'"===g[v+1]&&"'"===g[v+3])&&(d=i(g[v],a),f=Math.pow(10,g[v].length),v++),("("===g[v]&&")"===g[v+2]||"'"===g[v]&&"'"===g[v+2])&&(p=i(g[v+1],a),m=Math.pow(10,g[v+1].length)-1,v+=3)):"/"===g[v+1]||":"===g[v+1]?(d=i(g[v],a),f=i(g[v+2],1),v+=3):"/"===g[v+3]&&" "===g[v+1]&&(u=i(g[v],a),d=i(g[v+2],a),f=i(g[v+4],1),v+=5),g.length<=v){a=o=p+(s=f*m)*u+m*d;break}default:throw c()}if(0===s)throw l();r.s=a<0?-1:1,r.n=Math.abs(o),r.d=Math.abs(s)};function a(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function u(e,t){if(s(e,t),!(this instanceof u))return n(r.s*r.n,r.d);e=a(r.d,r.n),this.s=r.s,this.n=r.n/e,this.d=r.d/e}var l=function(){return Error("Division by Zero")},c=function(){return Error("Invalid argument")},h=function(){return Error("Parameters must be integer")};u.prototype={s:1,n:0,d:1,abs:function(){return n(this.n,this.d)},neg:function(){return n(-this.s*this.n,this.d)},add:function(e,t){return s(e,t),n(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(e,t){return s(e,t),n(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(e,t){return s(e,t),n(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(e,t){return s(e,t),n(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return n(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new u(NaN);if(void 0===e)return n(this.s*this.n%this.d,1);if(s(e,t),0===r.n&&0===this.d)throw l();return n(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(e,t){return s(e,t),n(a(r.n,this.n)*a(r.d,this.d),r.d*this.d)},lcm:function(e,t){return(s(e,t),0===r.n&&0===this.n)?n(0,1):n(r.n*this.n,a(r.n,this.n)*a(r.d,this.d))},ceil:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return n(this.s*this.d,this.n)},pow:function(e,t){if(s(e,t),1===r.d)return r.s<0?n(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):n(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var i=o(this.n),a=o(this.d),u=1,l=1;for(var c in i)if("1"!==c){if("0"===c){u=0;break}if(i[c]*=r.n,i[c]%r.d!=0)return null;i[c]/=r.d,u*=Math.pow(c,i[c])}for(var c in a)if("1"!==c){if(a[c]*=r.n,a[c]%r.d!=0)return null;a[c]/=r.d,l*=Math.pow(c,a[c])}return r.s<0?n(l,u):n(u,l)},equals:function(e,t){return s(e,t),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(e,t){s(e,t);var i=this.s*this.n*r.d-r.s*r.n*this.d;return(0<i)-(i<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),r=t.toContinued(),i=1;i<r.length;i++){for(var o=n(r[i-1],1),s=i-2;s>=0;s--)o=o.inverse().add(r[s]);if(Math.abs(o.sub(t).valueOf())<e)return o.mul(this.s)}return this},divisible:function(e,t){return s(e,t),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r="",i=this.n,n=this.d;return this.s<0&&(r+="-"),1===n?r+=i:(e&&(t=Math.floor(i/n))>0&&(r+=t+" ",i%=n),r+=i+"/"+n),r},toLatex:function(e){var t,r="",i=this.n,n=this.d;return this.s<0&&(r+="-"),1===n?r+=i:(e&&(t=Math.floor(i/n))>0&&(r+=t,i%=n),r+="\\frac{"+i+"}{"+n+"}"),r},toContinued:function(){var e,t=this.n,r=this.d,i=[];if(isNaN(t)||isNaN(r))return i;do i.push(Math.floor(t/r)),e=t%r,t=r,r=e;while(1!==t);return i},toString:function(e){var t=this.n,r=this.d;if(isNaN(t)||isNaN(r))return"NaN";e=e||15;var i=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,i=1;1!==r;i++)if(r=10*r%t,i>2e3)return 0;return i}(0,r),n=function(e,t,r){for(var i=1,n=function(e,t,r){for(var i=1;t>0;e=e*e%r,t>>=1)1&t&&(i=i*e%r);return i}(10,r,t),o=0;o<300;o++){if(i===n)return o;i=10*i%t,n=10*n%t}return 0}(0,r,i),o=this.s<0?"-":"";if(o+=t/r|0,t%=r,(t*=10)&&(o+="."),i){for(var s=n;s--;)o+=t/r|0,t%=r,t*=10;o+="(";for(var s=i;s--;)o+=t/r|0,t%=r,t*=10;o+=")"}else for(var s=e;t&&s--;)o+=t/r|0,t%=r,t*=10;return o}},Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Fraction=u,e.exports=u}(0)},9079:function(e,t,r){"use strict";var i,n;e.exports=(null==(i=r.g.process)?void 0:i.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(3127)},3127:function(e){"use strict";!function(){var t={229:function(e){var t,r,i,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u=[],l=!1,c=-1;function h(){l&&i&&(l=!1,i.length?u=i.concat(u):c=-1,u.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(i=u,u=[];++c<t;)i&&i[c].run();c=-1,t=u.length}i=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,i),s=!1}finally{s&&delete r[e]}return o.exports}i.ab="//";var n=i(229);e.exports=n}()},3718:function(e,t,r){"use strict";var i=r(6215),n=r(8200),o=r(5033),s=r(4072),a=r(7582),u=r(983),l=r(4911);l.alea=i,l.xor128=n,l.xorwow=o,l.xorshift7=s,l.xor4096=a,l.tychei=u,e.exports=l},6215:function(e,t,r){var i;!function(n,o,s){function a(e){var t,r=this,i=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var i=.02519603282416938*(t+=e.charCodeAt(r));t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=4294967296*i}return(t>>>0)*23283064365386963e-26});r.next=function(){var e=2091639*r.s0+23283064365386963e-26*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=i(" "),r.s1=i(" "),r.s2=i(" "),r.s0-=i(e),r.s0<0&&(r.s0+=1),r.s1-=i(e),r.s1<0&&(r.s1+=1),r.s2-=i(e),r.s2<0&&(r.s2+=1)}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var r=new a(e),i=t&&t.state,n=r.next;return n.int32=function(){return 4294967296*r.next()|0},n.double=function(){return n()+(2097152*n()|0)*11102230246251565e-32},n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.alea=l}(0,e=r.nmd(e),r.amdD)},983:function(e,t,r){var i;!function(n,o,s){function a(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,i=t.d,n=t.a;return e=e<<25^e>>>7^r,r=r-i|0,i=i<<24^i>>>8^n,n=n-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-i|0,t.d=i<<16^r>>>16^n,t.a=n-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var i=0;i<r.length+20;i++)t.b^=0|r.charCodeAt(i),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.tychei=l}(0,e=r.nmd(e),r.amdD)},8200:function(e,t,r){var i;!function(n,o,s){function a(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var i=0;i<r.length+64;i++)t.x^=0|r.charCodeAt(i),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.xor128=l}(0,e=r.nmd(e),r.amdD)},7582:function(e,t,r){var i;!function(n,o,s){function a(e){var t=this;t.next=function(){var e,r,i=t.w,n=t.X,o=t.i;return t.w=i=i+1640531527|0,r=n[o+34&127],e=n[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=n[o]=r^e,t.i=o,r+(i^i>>>16)|0},function(e,t){var r,i,n,o,s,a=[],u=128;for(t===(0|t)?(i=t,t=null):(t+="\x00",i=0,u=Math.max(u,t.length)),n=0,o=-32;o<u;++o)t&&(i^=t.charCodeAt((o+32)%t.length)),0===o&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(s=s+1640531527|0,n=0==(r=a[127&o]^=i+s)?n+1:0);for(n>=128&&(a[127&(t&&t.length||0)]=-1),n=127,o=512;o>0;--o)i=a[n+34&127],r=a[n=n+1&127],i^=i<<13,r^=r<<17,i^=i>>>15,r^=r>>>12,a[n]=i^r;e.w=s,e.X=a,e.i=n}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&(i.X&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.xor4096=l}(0,e=r.nmd(e),r.amdD)},4072:function(e,t,r){var i;!function(n,o,s){function a(e){var t=this;t.next=function(){var e,r,i=t.x,n=t.i;return e=i[n],e^=e>>>7,r=e^e<<24^((e=i[n+1&7])^e>>>10)^((e=i[n+3&7])^e>>>3)^((e=i[n+4&7])^e<<7),e=i[n+7&7],e^=e<<13,r^=e^e<<9,i[n]=r,t.i=n+1&7,r},function(e,t){var r,i=[];if(t===(0|t))i[0]=t;else for(r=0,t=""+t;r<t.length;++r)i[7&r]=i[7&r]<<15^t.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&0===i[r];++r);for(8==r?i[7]=-1:i[r],e.x=i,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&(i.x&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.xorshift7=l}(0,e=r.nmd(e),r.amdD)},5033:function(e,t,r){var i;!function(n,o,s){function a(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var i=0;i<r.length+64;i++)t.x^=0|r.charCodeAt(i),i==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0!==(i=(function(){return l}).call(t,r,t,e))&&(e.exports=i):this.xorwow=l}(0,e=r.nmd(e),r.amdD)},4911:function(e,t,r){"use strict";var i;!function(n,o,s){var a,u=s.pow(256,6),l=s.pow(2,52),c=2*l;function h(e,t,r){var i=[],h=f(function e(t,r){var i,n=[],o=typeof t;if(r&&"object"==o)for(i in t)try{n.push(e(t[i],r-1))}catch(e){}return n.length?n:"string"==o?t:t+"\x00"}((t=!0==t?{entropy:!0}:t||{}).entropy?[e,m(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(e)),m(e)}catch(e){var t=n.navigator,r=t&&t.plugins;return[+new Date,n,r,n.screen,m(o)]}}():e,3),i),v=new d(i),g=function(){for(var e=v.g(6),t=u,r=0;e<l;)e=(e+r)*256,t*=256,r=v.g(1);for(;e>=c;)e/=2,t/=2,r>>>=1;return(e+r)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,f(m(v.S),o),(t.pass||r||function(e,t,r,i){return(i&&(i.S&&p(i,v),e.state=function(){return p(v,{})}),r)?(s.random=e,t):e})(g,h,"global"in t?t.global:this==s,t.state)}function d(e){var t,r=e.length,i=this,n=0,o=i.i=i.j=0,s=i.S=[];for(r||(e=[r++]);n<256;)s[n]=n++;for(n=0;n<256;n++)s[n]=s[o=255&o+e[n%r]+(t=s[n])],s[o]=t;(i.g=function(e){for(var t,r=0,n=i.i,o=i.j,s=i.S;e--;)t=s[n=255&n+1],r=256*r+s[255&(s[n]=s[o=255&o+t])+(s[o]=t)];return i.i=n,i.j=o,r})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var r,i=e+"",n=0;n<i.length;)t[255&n]=255&(r^=19*t[255&n])+i.charCodeAt(n++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(f(s.random(),o),e.exports){e.exports=h;try{a=r(5042)}catch(e){}}else void 0!==(i=(function(){return h}).call(t,r,t,e))&&(e.exports=i)}("undefined"!=typeof self?self:void 0,[],Math)},7425:function(e){"use strict";e.exports=function(){function e(){return!0}function t(){return!1}function r(){}let i="Argument is not a typed-function.";return function n(){let o,s;function a(e){return"object"==typeof e&&null!==e&&e.constructor===Object}let u=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],l={name:"any",test:e,isAny:!0},c=0,h={createCount:0};function d(e){let t;let r=o.get(e);if(r)return r;let i='Unknown type "'+e+'"',n=e.toLowerCase();for(t of s)if(t.toLowerCase()===n){i+='. Did you mean "'+t+'" ?';break}throw TypeError(i)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",r=t?d(t).index:s.length,i=[];for(let t=0;t<e.length;++t){if(!e[t]||"string"!=typeof e[t].name||"function"!=typeof e[t].test)throw TypeError("Object with properties {name: string, test: function} expected");let n=e[t].name;if(o.has(n))throw TypeError('Duplicate type name "'+n+'"');i.push(n),o.set(n,{name:n,test:e[t].test,isAny:e[t].isAny,index:r+t,conversionsTo:[]})}let n=s.slice(r);s=s.slice(0,r).concat(i).concat(n);for(let e=r+i.length;e<s.length;++e)o.get(s[e]).index=e}function f(){o=new Map,s=[],c=0,p([l],!1)}function m(e){let t=s.filter(t=>{let r=o.get(t);return!r.isAny&&r.test(e)});return t.length?t:["any"]}function v(e){return e&&"function"==typeof e&&"_typedFunctionData"in e}function g(e,t,r){let n,o;if(!v(e))throw TypeError(i);let s=r&&r.exact,a=C(Array.isArray(t)?t.join(","):t),u=b(a);if(!s||u in e.signatures){let t=e._typedFunctionData.signatureMap.get(u);if(t)return t}let l=a.length;if(s){let t;for(t in n=[],e.signatures)n.push(e._typedFunctionData.signatureMap.get(t))}else n=e._typedFunctionData.signatures;for(let e=0;e<l;++e){let t;let r=a[e],i=[];for(t of n){let n=w(t.params,e);if(n&&(!r.restParam||n.restParam)){if(!n.hasAny){let e=x(n);if(r.types.some(t=>!e.has(t.name)))continue}i.push(t)}}if(0===(n=i).length)break}for(o of n)if(o.params.length<=l)return o;throw TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+b(a,", ")+"))")}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map(e=>e.name).join(t)}function y(e){let t=function(e){if(0===e.length)return[];let t=e.map(d);e.length>1&&t.sort((e,t)=>e.index-t.index);let r=t[0].conversionsTo;if(1===e.length)return r;r=r.concat([]);let i=new Set(e);for(let e=1;e<t.length;++e){let n;for(n of t[e].conversionsTo)i.has(n.from)||(r.push(n),i.add(n.from))}return r}(e.types.map(e=>e.name)),r=e.hasAny,i=e.name,n=t.map(function(e){let t=d(e.from);return r=t.isAny||r,i+="|"+e.from,{name:e.from,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:e,conversionIndex:e.index}});return{types:e.types.concat(n),name:i,hasAny:r,hasConversion:n.length>0,restParam:e.restParam}}function x(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach(t=>e.typeSet.add(t.name))),e.typeSet}function C(e){let t=[];if("string"!=typeof e)throw TypeError("Signatures must be strings");let r=e.trim();if(""===r)return t;let i=r.split(",");for(let e=0;e<i.length;++e){let r=function(e){let t=0===e.indexOf("..."),r=(t?e.length>3?e.slice(3):"any":e).split("|").map(e=>d(e.trim())),i=!1,n=t?"...":"";return{types:r.map(function(e){return i=e.isAny||i,n+=e.name+"|",{name:e.name,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:null,conversionIndex:-1}}),name:n.slice(0,-1),hasAny:i,hasConversion:!1,restParam:t}}(i[e].trim());if(r.restParam&&e!==i.length-1)throw SyntaxError('Unexpected rest parameter "'+i[e]+'": only allowed for the last parameter');if(0===r.types.length)return null;t.push(r)}return t}function Z(e){let t=F(e);return!!t&&t.restParam}function _(t){if(!t||0===t.types.length)return e;if(1===t.types.length)return d(t.types[0].name).test;if(2===t.types.length){let e=d(t.types[0].name).test,r=d(t.types[1].name).test;return function(t){return e(t)||r(t)}}{let e=t.types.map(function(e){return d(e.name).test});return function(t){for(let r=0;r<e.length;r++)if(e[r](t))return!0;return!1}}}function w(e,t){return t<e.length?e[t]:Z(e)?F(e):null}function E(e,t){let r=w(e,t);return r?x(r):new Set}function N(e){return null===e.conversion||void 0===e.conversion}function S(e,t){let r=new Set;return e.forEach(e=>{let i;for(i of E(e.params,t))r.add(i)}),r.has("any")?["any"]:Array.from(r)}function A(e,t,r){let i,n,o;let s=e||"unnamed",a=r;for(o=0;o<t.length;o++){let e=[];if(a.forEach(r=>{let i=_(w(r.params,o));(o<r.params.length||Z(r.params))&&i(t[o])&&e.push(r)}),0===e.length){if((n=S(a,o)).length>0){let e=m(t[o]);return(i=TypeError("Unexpected type of argument in function "+s+" (expected: "+n.join(" or ")+", actual: "+e.join(" | ")+", index: "+o+")")).data={category:"wrongType",fn:s,index:o,actual:e,expected:n},i}}else a=e}let u=a.map(function(e){return Z(e.params)?1/0:e.params.length});if(t.length<Math.min.apply(null,u))return(i=TypeError("Too few arguments in function "+s+" (expected: "+(n=S(a,o)).join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:s,index:t.length,expected:n},i;let l=Math.max.apply(null,u);if(t.length>l)return(i=TypeError("Too many arguments in function "+s+" (expected: "+l+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:s,index:t.length,expectedLength:l},i;let c=[];for(let e=0;e<t.length;++e)c.push(m(t[e]).join("|"));return(i=TypeError('Arguments of type "'+c.join(", ")+'" do not match any of the defined signatures of function '+s+".")).data={category:"mismatch",actual:c},i}function P(e){let t=s.length+1;for(let r=0;r<e.types.length;r++)N(e.types[r])&&(t=Math.min(t,e.types[r].typeIndex));return t}function D(e){let t=c+1;for(let r=0;r<e.types.length;r++)N(e.types[r])||(t=Math.min(t,e.types[r].conversionIndex));return t}function M(e,t){let r,i;let n=e.params,o=t.params,s=F(n),a=F(o),u=Z(n),l=Z(o);if(u&&s.hasAny){if(!l||!a.hasAny)return 1}else if(l&&a.hasAny)return -1;let c=0,h=0;for(r of n)r.hasAny&&++c,r.hasConversion&&++h;let d=0,p=0;for(r of o)r.hasAny&&++d,r.hasConversion&&++p;if(c!==d)return c-d;if(u&&s.hasConversion){if(!l||!a.hasConversion)return 1}else if(l&&a.hasConversion)return -1;if(h!==p)return h-p;if(u){if(!l)return 1}else if(l)return -1;let f=(n.length-o.length)*(u?-1:1);if(0!==f)return f;let m=[],v=0;for(let e=0;e<n.length;++e){let t=function(e,t){if(e.hasAny){if(!t.hasAny)return 1}else if(t.hasAny)return -1;if(e.restParam){if(!t.restParam)return 1}else if(t.restParam)return -1;if(e.hasConversion){if(!t.hasConversion)return 1}else if(t.hasConversion)return -1;let r=P(e)-P(t);if(r<0)return -1;if(r>0)return 1;let i=D(e)-D(t);return i<0?-1:i>0?1:0}(n[e],o[e]);m.push(t),v+=t}if(0!==v)return v;for(i of m)if(0!==i)return i;return 0}function O(e){let t,r,i,n;let o=[],s=[];switch(e.types.forEach(function(e){e.conversion&&(o.push(d(e.conversion.from).test),s.push(e.conversion.convert))}),s.length){case 0:return function(e){return e};case 1:return t=o[0],i=s[0],function(e){return t(e)?i(e):e};case 2:return t=o[0],r=o[1],i=s[0],n=s[1],function(e){return t(e)?i(e):r(e)?n(e):e};default:return function(e){for(let t=0;t<s.length;t++)if(o[t](e))return s[t](e);return e}}}function T(e,t,r){throw A(e,t,r)}function B(e){return R(e,0,e.length-1)}function F(e){return e[e.length-1]}function R(e,t,r){return Array.prototype.slice.call(e,t,r)}function k(e,t){return{referTo:{references:e,callback:t}}}function L(e){if("function"!=typeof e)throw TypeError("Callback function expected as first argument");return{referToSelf:{callback:e}}}function I(e){return e&&"object"==typeof e.referTo&&Array.isArray(e.referTo.references)&&"function"==typeof e.referTo.callback}function j(e){return e&&"object"==typeof e.referToSelf&&"function"==typeof e.referToSelf.callback}function z(e,t){if(!e)return t;if(t&&t!==e){let r=Error("Function names do not match (expected: "+e+", actual: "+t+")");throw r.data={actual:t,expected:e},r}return e}f(),p(u);let U=h;function Y(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw TypeError("Object with properties {from: string, to: string, convert: function} expected");if(e.to===e.from)throw SyntaxError('Illegal to define conversion from "'+e.from+'" to itself.')}return(h=function(e){let i="string"==typeof e,n=i?1:0,o=i?e:"",s={};for(let e=n;e<arguments.length;++e){let t;let r=arguments[e],n={};if("function"==typeof r?(t=r.name,"string"==typeof r.signature?n[r.signature]=r:v(r)&&(n=r.signatures)):a(r)&&(n=r,i||(t=function(e){let t;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(v(e[r])||"string"==typeof e[r].signature)&&(t=z(t,e[r].name));return t}(r))),0===Object.keys(n).length){let t=TypeError("Argument to 'typed' at index "+e+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw t.data={index:e,argument:r},t}i||(o=z(o,t)),function(e,t){let r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(r in e&&t[r]!==e[r]){let i=Error('Signature "'+r+'" is defined twice');throw i.data={signature:r,sourceFunction:t[r],destFunction:e[r]},i}e[r]=t[r]}}(s,n)}return function(e,i){let n,o;if(h.createCount++,0===Object.keys(i).length)throw SyntaxError("No signatures provided");h.warnAgainstDeprecatedThis&&function(e){let t=/\bthis(\(|\.signatures\b)/;Object.keys(e).forEach(r=>{let i=e[r];if(t.test(i.toString()))throw SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(i);let s=[],a=[],u={},l=[];for(n in i){let e;if(!Object.prototype.hasOwnProperty.call(i,n))continue;let t=C(n);if(!t)continue;s.forEach(function(e){if(function(e,t){let r=Math.max(e.length,t.length);for(let i=0;i<r;i++){let r;let n=E(e,i),o=E(t,i),s=!1;for(r of o)if(n.has(r)){s=!0;break}if(!s)return!1}let i=e.length,n=t.length,o=Z(e),s=Z(t);return o?s?i===n:n>=i:s?i>=n:i===n}(e,t))throw TypeError('Conflicting signatures "'+b(e)+'" and "'+b(t)+'".')}),s.push(t);let r=a.length;for(e of(a.push(i[n]),function e(t,r,i){if(!(r<t.length))return[i];{var n,o;let s=t[r],a=[];if(s.restParam){let e=s.types.filter(N);e.length<s.types.length&&a.push({types:e,name:"..."+e.map(e=>e.name).join("|"),hasAny:e.some(e=>e.isAny),hasConversion:!1,restParam:!0}),a.push(s)}else a=s.types.map(function(e){return{types:[e],name:e.name,hasAny:e.isAny,hasConversion:e.conversion,restParam:!1}});return n=a,o=function(n){return e(t,r+1,i.concat([n]))},Array.prototype.concat.apply([],n.map(o))}}(t.map(y),0,[]))){let t=b(e);l.push({params:e,name:t,fn:r}),e.every(e=>!e.hasConversion)&&(u[t]=r)}}l.sort(M);let c=function(e,t,r){let i=e.map(e=>j(e)?L(e.referToSelf.callback):I(e)?k(e.referTo.references,e.referTo.callback):e),n=Array(i.length).fill(!1),o=!0;for(;o;){o=!1;let e=!0;for(let s=0;s<i.length;++s){if(n[s])continue;let a=i[s];if(j(a))i[s]=a.referToSelf.callback(r),i[s].referToSelf=a.referToSelf,n[s]=!0,e=!1;else if(I(a)){let r=function(e,t,r){let i;let n=[];for(i of e){let e=r[i];if("number"!=typeof e)throw TypeError('No definition for referenced signature "'+i+'"');if("function"!=typeof(e=t[e]))return!1;n.push(e)}return n}(a.referTo.references,i,t);r?(i[s]=a.referTo.callback.apply(this,r),i[s].referTo=a.referTo,n[s]=!0,e=!1):o=!0}}if(e&&o)throw SyntaxError("Circular reference detected in resolving typed.referTo")}return i}(a,u,eh);for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(u[o]=c[u[o]]);let d=[],p=new Map;for(o of l)p.has(o.name)||(o.fn=c[o.fn],d.push(o),p.set(o.name,o));let f=d[0]&&d[0].params.length<=2&&!Z(d[0].params),m=d[1]&&d[1].params.length<=2&&!Z(d[1].params),v=d[2]&&d[2].params.length<=2&&!Z(d[2].params),g=d[3]&&d[3].params.length<=2&&!Z(d[3].params),x=d[4]&&d[4].params.length<=2&&!Z(d[4].params),w=d[5]&&d[5].params.length<=2&&!Z(d[5].params);for(let e=0;e<d.length;++e)d[e].test=function(e){let t,r,i;if(Z(e)){let r=(t=B(e).map(_)).length,i=_(F(e)),n=function(e){for(let t=r;t<e.length;t++)if(!i(e[t]))return!1;return!0};return function(e){for(let r=0;r<t.length;r++)if(!t[r](e[r]))return!1;return n(e)&&e.length>=r+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(r=_(e[0]),function(e){return r(e[0])&&1===e.length}):2===e.length?(r=_(e[0]),i=_(e[1]),function(e){return r(e[0])&&i(e[1])&&2===e.length}):(t=e.map(_),function(e){for(let r=0;r<t.length;r++)if(!t[r](e[r]))return!1;return e.length===t.length})}(d[e].params);let S=f?_(d[0].params[0]):t,A=m?_(d[1].params[0]):t,P=v?_(d[2].params[0]):t,D=g?_(d[3].params[0]):t,T=x?_(d[4].params[0]):t,z=w?_(d[5].params[0]):t,U=f?_(d[0].params[1]):t,Y=m?_(d[1].params[1]):t,X=v?_(d[2].params[1]):t,J=g?_(d[3].params[1]):t,q=x?_(d[4].params[1]):t,G=w?_(d[5].params[1]):t;for(let e=0;e<d.length;++e)d[e].implementation=function(e,t){let r=t;if(e.some(e=>e.hasConversion)){let i=Z(e),n=e.map(O);r=function(){let e=[],r=i?arguments.length-1:arguments.length;for(let t=0;t<r;t++)e[t]=n[t](arguments[t]);return i&&(e[r]=arguments[r].map(n[r])),t.apply(this,e)}}let i=r;if(Z(e)){let t=e.length-1;i=function(){return r.apply(this,R(arguments,0,t).concat([R(arguments,t)]))}}return i}(d[e].params,d[e].fn);let H=f?d[0].implementation:r,V=m?d[1].implementation:r,W=v?d[2].implementation:r,$=g?d[3].implementation:r,Q=x?d[4].implementation:r,K=w?d[5].implementation:r,ee=f?d[0].params.length:-1,et=m?d[1].params.length:-1,er=v?d[2].params.length:-1,ei=g?d[3].params.length:-1,en=x?d[4].params.length:-1,eo=w?d[5].params.length:-1,es=f&&m&&v&&g&&x&&w?6:0,ea=d.length,eu=d.map(e=>e.test),el=d.map(e=>e.implementation),ec=function(){for(let e=es;e<ea;e++)if(eu[e](arguments))return el[e].apply(this,arguments);return h.onMismatch(e,arguments,d)};function eh(e,t){return arguments.length===ee&&S(e)&&U(t)?H.apply(this,arguments):arguments.length===et&&A(e)&&Y(t)?V.apply(this,arguments):arguments.length===er&&P(e)&&X(t)?W.apply(this,arguments):arguments.length===ei&&D(e)&&J(t)?$.apply(this,arguments):arguments.length===en&&T(e)&&q(t)?Q.apply(this,arguments):arguments.length===eo&&z(e)&&G(t)?K.apply(this,arguments):ec.apply(this,arguments)}try{Object.defineProperty(eh,"name",{value:e})}catch(e){}return eh.signatures=u,eh._typedFunctionData={signatures:d,signatureMap:p},eh}(o||"",s)}).create=n,h.createCount=U.createCount,h.onMismatch=T,h.throwMismatchError=T,h.createError=A,h.clear=f,h.clearConversions=function(){let e;for(e of s)o.get(e).conversionsTo=[];c=0},h.addTypes=p,h._findType=d,h.referTo=function(){let e=B(arguments).map(e=>b(C(e))),t=F(arguments);if("function"!=typeof t)throw TypeError("Callback function expected as last argument");return k(e,t)},h.referToSelf=L,h.convert=function(e,t){let r=d(t);if(r.test(e))return e;let i=r.conversionsTo;if(0===i.length)throw Error("There are no conversions to "+t+" defined.");for(let t=0;t<i.length;t++)if(d(i[t].from).test(e))return i[t].convert(e);throw Error("Cannot convert "+e+" to "+t)},h.findSignature=g,h.find=function(e,t,r){return g(e,t,r).implementation},h.isTypedFunction=v,h.warnAgainstDeprecatedThis=!0,h.addType=function(e,t){let r="any";!1!==t&&o.has("Object")&&(r="Object"),h.addTypes([e],r)},h.addConversion=function(e){Y(e);let t=d(e.to);if(t.conversionsTo.every(function(t){return t.from!==e.from}))t.conversionsTo.push({from:e.from,convert:e.convert,index:c++});else throw Error('There is already a conversion from "'+e.from+'" to "'+t.name+'"')},h.addConversions=function(e){e.forEach(h.addConversion)},h.removeConversion=function(e){Y(e);let t=d(e.to),r=function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return e[r]}(t.conversionsTo,t=>t.from===e.from);if(!r)throw Error("Attempt to remove nonexistent conversion from "+e.from+" to "+e.to);if(r.convert!==e.convert)throw Error("Conversion to remove does not match existing conversion");let i=t.conversionsTo.indexOf(r);t.conversionsTo.splice(i,1)},h.resolve=function(e,t){if(!v(e))throw TypeError(i);let r=e._typedFunctionData.signatures;for(let e=0;e<r.length;++e)if(r[e].test(t))return r[e];return null},h}()}()},7632:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){var n;return n=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},2110:function(e,t,r){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{Z:function(){return i}})},1513:function(e,t,r){"use strict";r.d(t,{v:function(){return o}});var i=r(2110),n={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},o=function(e){if(e)throw Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(n)};(0,i.Z)(o,n,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]})},7881:function(e,t,r){"use strict";r.d(t,{tS:function(){return tK}});var i=r(2110),n=r(1513),o=r(7694),s=new Set(["end"]),a=r(6992),u=r(5284),l=r(2187),c=(0,u.d5)("Node",["mathWithTransform"],e=>{var{mathWithTransform:t}=e;class r{get type(){return"Node"}get isNode(){return!0}evaluate(e){return this.compile().evaluate(e)}compile(){var e=this._compile(t,{}),r={};return{evaluate:function(t){var i=(0,l.df)(t);return!function(e){for(var t of[...s])if(e.has(t))throw Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(i),e(i,r,null)}}}_compile(e,t){throw Error("Method _compile must be implemented by type "+this.type)}forEach(e){throw Error("Cannot run forEach on a Node interface")}map(e){throw Error("Cannot run map on a Node interface")}_ifNode(e){if(!(0,o.UG)(e))throw TypeError("Callback function must return a Node");return e}traverse(e){e(this,null,null),function e(t,r){t.forEach(function(t,i,n){r(t,i,n),e(t,r)})}(this,e)}transform(e){return function t(r,i,n){var o=e(r,i,n);return o!==r?o:r.map(t)}(this,null,null)}filter(e){var t=[];return this.traverse(function(r,i,n){e(r,i,n)&&t.push(r)}),t}clone(){throw Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(e){return e.cloneDeep()})}equals(e){return!!e&&this.type===e.type&&(0,a.J5)(this,e)}toString(e){var t=this._getCustomString(e);return void 0!==t?t:this._toString(e)}_toString(){throw Error("_toString not implemented for "+this.type)}toJSON(){throw Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(e){var t=this._getCustomString(e);return void 0!==t?t:this._toHTML(e)}_toHTML(){throw Error("_toHTML not implemented for "+this.type)}toTex(e){var t=this._getCustomString(e);return void 0!==t?t:this._toTex(e)}_toTex(e){throw Error("_toTex not implemented for "+this.type)}_getCustomString(e){if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":return;case"function":return e.handler(this,e);default:throw TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0}),h=r(7632),d=r(6886),p=r(9790),f="ObjectNode",m=(0,u.d5)(f,["Node"],e=>{var{Node:t}=e;class r extends t{get type(){return f}get isObjectNode(){return!0}_compile(e,t){var r={};for(var i in this.properties)if((0,a.nr)(this.properties,i)){var n=JSON.parse((0,p.Pz)(i)),o=(0,d.YF)(this.properties,i);r[n]=o._compile(e,t)}return function(e,t,i){var n={};for(var o in r)(0,a.nr)(r,o)&&(n[o]=r[o](e,t,i));return n}}forEach(e){for(var t in this.properties)(0,a.nr)(this.properties,t)&&e(this.properties[t],"properties["+(0,p.Pz)(t)+"]",this)}map(e){var t={};for(var i in this.properties)(0,a.nr)(this.properties,i)&&(t[i]=this._ifNode(e(this.properties[i],"properties["+(0,p.Pz)(i)+"]",this)));return new r(t)}clone(){var e={};for(var t in this.properties)(0,a.nr)(this.properties,t)&&(e[t]=this.properties[t]);return new r(e)}_toString(e){var t=[];for(var r in this.properties)(0,a.nr)(this.properties,r)&&t.push((0,p.Pz)(r)+": "+this.properties[r].toString(e));return"{"+t.join(", ")+"}"}toJSON(){return{mathjs:f,properties:this.properties}}static fromJSON(e){return new r(e.properties)}_toHTML(e){var t=[];for(var r in this.properties)(0,a.nr)(this.properties,r)&&t.push('<span class="math-symbol math-property">'+(0,p.YU)(r)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[r].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(e){var t=[];for(var r in this.properties)(0,a.nr)(this.properties,r)&&t.push("\\mathbf{"+r+":} & "+this.properties[r].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}"+t.join("\n")+"\\end{array}\\right\\}"}constructor(e){if(super(),this.properties=e||{},e&&("object"!=typeof e||!Object.keys(e).every(function(t){return(0,o.UG)(e[t])})))throw TypeError("Object containing Nodes expected")}}return(0,h.Z)(r,"name",f),r},{isClass:!0,isNode:!0}),v=r(5836);function g(e,t){return new l.A3(e,new l.hB(t),new Set(Object.keys(t)))}var b=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function y(e,t){if(!t||"auto"!==t)return e;for(var r=e;(0,o.Ig)(r);)r=r.content;return r}function x(e,t,r,i){var n=e;"keep"!==t&&(n=e.getContent());for(var s=n.getIdentifier(),a=null,u=0;u<b.length;u++)if(s in b[u]){a=u;break}if("OperatorNode:multiply"===s&&n.implicit&&"show"!==r){var l=y(n.args[0],t);(0,o.nu)(l)&&i&&"OperatorNode:divide"===i.getIdentifier()&&(0,o.ZX)(y(i.args[0],t))||"OperatorNode:divide"===l.getIdentifier()&&(0,o.ZX)(y(l.args[0],t))&&(0,o.nu)(y(l.args[1]))||(a+=1)}return a}function C(e,t){var r=e;"keep"!==t&&(r=e.getContent());var i=r.getIdentifier(),n=x(r,t);if(null===n)return null;var o=b[n][i];if((0,a.nr)(o,"associativity")){if("left"===o.associativity)return"left";if("right"===o.associativity)return"right";throw Error("'"+i+"' has the invalid associativity '"+o.associativity+"'.")}return null}function Z(e,t,r){var i="keep"!==r?e.getContent():e,n="keep"!==r?e.getContent():t,o=i.getIdentifier(),s=n.getIdentifier(),u=x(i,r);if(null===u)return null;var l=b[u][o];if((0,a.nr)(l,"associativeWith")&&l.associativeWith instanceof Array){for(var c=0;c<l.associativeWith.length;c++)if(l.associativeWith[c]===s)return!0;return!1}return null}var _=r(6114),w={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},E={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},N={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(E.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(E.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(E.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(E.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(E.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(E.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(E.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(E.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(E.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(E.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(E.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(E.bitAnd,"${args[1]}\\right)")},bitNot:{1:E.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(E.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(E.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(E.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(E.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(E.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(E.and,"${args[1]}\\right)")},not:{1:E.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(E.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(E.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(E.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(E.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(E.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(E.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(E.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(E.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(E.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(E.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(E.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(E.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(E.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(w.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},S={deg:"^\\circ"};function A(e){return _(e,{preserveFormatting:!0})}function P(e,t){return(t=void 0!==t&&t)?(0,a.nr)(S,e)?S[e]:"\\mathrm{"+A(e)+"}":(0,a.nr)(w,e)?w[e]:A(e)}var D="OperatorNode",M=(0,u.d5)(D,["Node"],e=>{var{Node:t}=e;function r(e,t,r,i,n){var s=x(e,t,r),a=C(e,t);if("all"===t||i.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return i.map(function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});switch(i.length){case 0:u=[];break;case 1:var u,l,c,h=x(i[0],t,r,e);if(n&&null!==h&&("keep"===t?(l=i[0].getIdentifier(),c=e.getIdentifier()):(l=i[0].getContent().getIdentifier(),c=e.getContent().getIdentifier()),!1===b[s][c].latexLeftParens||!1===b[h][l].latexParens)||null===h){u=[!1];break}if(h<=s){u=[!0];break}u=[!1];break;case 2:var d,p,f,m,v,g=x(i[0],t,r,e),y=Z(e,i[0],t);d=null!==g&&(g===s&&"right"===a&&!y||g<s);var _=x(i[1],t,r,e),w=Z(e,i[1],t);p=null!==_&&(_===s&&"left"===a&&!w||_<s),n&&("keep"===t?(f=e.getIdentifier(),m=e.args[0].getIdentifier(),v=e.args[1].getIdentifier()):(f=e.getContent().getIdentifier(),m=e.args[0].getContent().getIdentifier(),v=e.args[1].getContent().getIdentifier()),null!==g&&(!1===b[s][f].latexLeftParens&&(d=!1),!1===b[g][m].latexParens&&(d=!1)),null!==_&&(!1===b[s][f].latexRightParens&&(p=!1),!1===b[_][v].latexParens&&(p=!1))),u=[d,p];break;default:("OperatorNode:add"===e.getIdentifier()||"OperatorNode:multiply"===e.getIdentifier())&&(u=i.map(function(i){var n=x(i,t,r,e),o=Z(e,i,t),u=C(i,t);if(null===n);else if(s===n&&a===u&&!o)return!0;else if(n<s)return!0;return!1}))}if(i.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"all"!==t&&"hide"===r)for(var E=1;E<u.length;++E)!function e(t,r){var i=t;if("auto"===r)for(;(0,o.Ig)(i);)i=i.content;return!!(0,o.nu)(i)||!!(0,o.bV)(i)&&e(i.args[0],r)}(i[E],t)||u[E-1]||"keep"===t&&(0,o.Ig)(i[E-1])||(u[E]=!0);return u}class i extends t{get type(){return D}get isOperatorNode(){return!0}_compile(e,t){if("string"!=typeof this.fn||!(0,d.OJ)(e,this.fn)){if(e[this.fn])throw Error('No access to function "'+this.fn+'"');throw Error("Function "+this.fn+' missing in provided namespace "math"')}var r=(0,d.YF)(e,this.fn),i=(0,v.UI)(this.args,function(r){return r._compile(e,t)});if("function"==typeof r&&!0===r.rawArgs){var n=this.args;return function(t,i,o){return r(n,e,g(t,i))}}if(1===i.length){var o=i[0];return function(e,t,i){return r(o(e,t,i))}}if(2!==i.length)return function(e,t,n){return r.apply(null,(0,v.UI)(i,function(r){return r(e,t,n)}))};var s=i[0],a=i[1];return function(e,t,i){return r(s(e,t,i),a(e,t,i))}}forEach(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=[],r=0;r<this.args.length;r++)t[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new i(this.op,this.fn,t,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return 1===this.args.length}isBinary(){return 2===this.args.length}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",i=e&&e.implicit?e.implicit:"hide",n=this.args,o=r(this,t,i,n,!1);if(1===n.length){var s=C(this,t),a=n[0].toString(e);o[0]&&(a="("+a+")");var u=/[a-zA-Z]+/.test(this.op);return"right"===s?this.op+(u?" ":"")+a:"left"===s?a+(u?" ":"")+this.op:a+this.op}if(2===n.length){var l=n[0].toString(e),c=n[1].toString(e);return(o[0]&&(l="("+l+")"),o[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===i)?l+" "+c:l+" "+this.op+" "+c}if(!(n.length>2)||"OperatorNode:add"!==this.getIdentifier()&&"OperatorNode:multiply"!==this.getIdentifier())return this.fn+"("+this.args.join(", ")+")";var h=n.map(function(t,r){return t=t.toString(e),o[r]&&(t="("+t+")"),t});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===i?h.join(" "):h.join(" "+this.op+" ")}toJSON(){return{mathjs:D,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(e){return new i(e.op,e.fn,e.args,e.implicit,e.isPercentage)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",i=e&&e.implicit?e.implicit:"hide",n=this.args,o=r(this,t,i,n,!1);if(1===n.length){var s=C(this,t),a=n[0].toHTML(e);return(o[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===s)?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+(0,p.YU)(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+(0,p.YU)(this.op)+"</span>"}if(2===n.length){var u=n[0].toHTML(e),l=n[1].toHTML(e);return(o[0]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),o[1]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===i)?u+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+l:u+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,p.YU)(this.op)+"</span>"+l}var c=n.map(function(t,r){return t=t.toHTML(e),o[r]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t});return n.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===i?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,p.YU)(this.op)+"</span>"):'<span class="math-function">'+(0,p.YU)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",i=e&&e.implicit?e.implicit:"hide",n=this.args,o=r(this,t,i,n,!0),s=E[this.fn];if(s=void 0===s?this.op:s,1===n.length){var a=C(this,t),u=n[0].toTex(e);return(o[0]&&(u="\\left(".concat(u,"\\right)")),"right"===a)?s+u:u+s}if(2===n.length){var l,c=n[0],h=c.toTex(e);o[0]&&(h="\\left(".concat(h,"\\right)"));var d=n[1].toTex(e);switch(o[1]&&(d="\\left(".concat(d,"\\right)")),l="keep"===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return s+"{"+h+"}{"+d+"}";case"OperatorNode:pow":switch(h="{"+h+"}",d="{"+d+"}",l){case"ConditionalNode":case"OperatorNode:divide":h="\\left(".concat(h,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===i)return h+"~"+d}return h+s+d}if(!(n.length>2)||"OperatorNode:add"!==this.getIdentifier()&&"OperatorNode:multiply"!==this.getIdentifier())return"\\mathrm{"+this.fn+"}\\left("+n.map(function(t){return t.toTex(e)}).join(",")+"\\right)";var p=n.map(function(t,r){return t=t.toTex(e),o[r]&&(t="\\left(".concat(t,"\\right)")),t});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit&&"hide"===i?p.join("~"):p.join(s)}getIdentifier(){return this.type+":"+this.fn}constructor(e,t,r,i,n){if(super(),"string"!=typeof e)throw TypeError('string expected for parameter "op"');if("string"!=typeof t)throw TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(o.UG))throw TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.isPercentage=!0===n,this.op=e,this.fn=t,this.args=r||[]}}return(0,h.Z)(i,"name",D),i},{isClass:!0,isNode:!0}),O="ParenthesisNode",T=(0,u.d5)(O,["Node"],e=>{var{Node:t}=e;class r extends t{get type(){return O}get isParenthesisNode(){return!0}_compile(e,t){return this.content._compile(e,t)}getContent(){return this.content.getContent()}forEach(e){e(this.content,"content",this)}map(e){return new r(e(this.content,"content",this))}clone(){return new r(this.content)}_toString(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)}toJSON(){return{mathjs:O,content:this.content}}static fromJSON(e){return new r(e.content)}_toHTML(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)}_toTex(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)}constructor(e){if(super(),!(0,o.UG)(e))throw TypeError('Node expected for parameter "content"');this.content=e}}return(0,h.Z)(r,"name",O),r},{isClass:!0,isNode:!0}),B="RelationalNode",F=(0,u.d5)(B,["Node"],e=>{var{Node:t}=e,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class i extends t{get type(){return B}get isRelationalNode(){return!0}_compile(e,t){var r=this,i=this.params.map(r=>r._compile(e,t));return function(t,n,o){for(var s,a=i[0](t,n,o),u=0;u<r.conditionals.length;u++)if(s=a,a=i[u+1](t,n,o),!(0,d.YF)(e,r.conditionals[u])(s,a))return!1;return!0}}forEach(e){this.params.forEach((t,r)=>e(t,"params["+r+"]",this),this)}map(e){return new i(this.conditionals.slice(),this.params.map((t,r)=>this._ifNode(e(t,"params["+r+"]",this)),this))}clone(){return new i(this.conditionals,this.params)}_toString(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",i=x(this,t,e&&e.implicit),n=this.params.map(function(r,n){var o=x(r,t,e&&e.implicit);return"all"===t||null!==o&&o<=i?"("+r.toString(e)+")":r.toString(e)}),o=n[0],s=0;s<this.conditionals.length;s++)o+=" "+r[this.conditionals[s]]+" "+n[s+1];return o}toJSON(){return{mathjs:B,conditionals:this.conditionals,params:this.params}}static fromJSON(e){return new i(e.conditionals,e.params)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",i=x(this,t,e&&e.implicit),n=this.params.map(function(r,n){var o=x(r,t,e&&e.implicit);return"all"===t||null!==o&&o<=i?'<span class="math-parenthesis math-round-parenthesis">(</span>'+r.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':r.toHTML(e)}),o=n[0],s=0;s<this.conditionals.length;s++)o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,p.YU)(r[this.conditionals[s]])+"</span>"+n[s+1];return o}_toTex(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=x(this,t,e&&e.implicit),i=this.params.map(function(i,n){var o=x(i,t,e&&e.implicit);return"all"===t||null!==o&&o<=r?"\\left("+i.toTex(e)+"\right)":i.toTex(e)}),n=i[0],o=0;o<this.conditionals.length;o++)n+=E[this.conditionals[o]]+i[o+1];return n}constructor(e,t){if(super(),!Array.isArray(e))throw TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}}return(0,h.Z)(i,"name",B),i},{isClass:!0,isNode:!0}),R="ArrayNode",k=(0,u.d5)(R,["Node"],e=>{var{Node:t}=e;class r extends t{get type(){return R}get isArrayNode(){return!0}_compile(e,t){var r=(0,v.UI)(this.items,function(r){return r._compile(e,t)});if(!("Array"!==e.config.matrix))return function(e,t,i){return(0,v.UI)(r,function(r){return r(e,t,i)})};var i=e.matrix;return function(e,t,n){return i((0,v.UI)(r,function(r){return r(e,t,n)}))}}forEach(e){for(var t=0;t<this.items.length;t++)e(this.items[t],"items["+t+"]",this)}map(e){for(var t=[],i=0;i<this.items.length;i++)t[i]=this._ifNode(e(this.items[i],"items["+i+"]",this));return new r(t)}clone(){return new r(this.items.slice(0))}_toString(e){return"["+this.items.map(function(t){return t.toString(e)}).join(", ")+"]"}toJSON(){return{mathjs:R,items:this.items}}static fromJSON(e){return new r(e.items)}_toHTML(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(t){return t.toHTML(e)}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){return function t(r,i){var n=r.some(o.j0)&&!r.every(o.j0),s=i||n,a=r.map(function(r){return r.items?t(r.items,!i):r.toTex(e)}).join(s?"&":"\\\\");return n||!s||s&&!i?"\\begin{bmatrix}"+a+"\\end{bmatrix}":a}(this.items,!1)}constructor(e){if(super(),this.items=e||[],!Array.isArray(this.items)||!this.items.every(o.UG))throw TypeError("Array containing Nodes expected")}}return(0,h.Z)(r,"name",R),r},{isClass:!0,isNode:!0}),L="BlockNode",I=(0,u.d5)(L,["ResultSet","Node"],e=>{var{ResultSet:t,Node:r}=e;class i extends r{get type(){return L}get isBlockNode(){return!0}_compile(e,r){var i=(0,v.UI)(this.blocks,function(t){return{evaluate:t.node._compile(e,r),visible:t.visible}});return function(e,r,n){var o=[];return(0,v.Ed)(i,function(t){var i=t.evaluate(e,r,n);t.visible&&o.push(i)}),new t(o)}}forEach(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)}map(e){for(var t=[],r=0;r<this.blocks.length;r++){var n=this.blocks[r],o=this._ifNode(e(n.node,"blocks["+r+"].node",this));t[r]={node:o,visible:n.visible}}return new i(t)}clone(){return new i(this.blocks.map(function(e){return{node:e.node,visible:e.visible}}))}_toString(e){return this.blocks.map(function(t){return t.node.toString(e)+(t.visible?"":";")}).join("\n")}toJSON(){return{mathjs:L,blocks:this.blocks}}static fromJSON(e){return new i(e.blocks)}_toHTML(e){return this.blocks.map(function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(e){return this.blocks.map(function(t){return t.node.toTex(e)+(t.visible?"":";")}).join("\\;\\;\n")}constructor(e){if(super(),!Array.isArray(e))throw Error("Array expected");this.blocks=e.map(function(e){var t=e&&e.node,r=!e||void 0===e.visible||e.visible;if(!(0,o.UG)(t))throw TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw TypeError('Property "visible" must be a boolean');return{node:t,visible:r}})}}return(0,h.Z)(i,"name",L),i},{isClass:!0,isNode:!0}),j="ConditionalNode",z=(0,u.d5)(j,["Node"],e=>{var{Node:t}=e;class r extends t{get type(){return j}get isConditionalNode(){return!0}_compile(e,t){var r=this.condition._compile(e,t),i=this.trueExpr._compile(e,t),n=this.falseExpr._compile(e,t);return function(e,t,s){return!function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if((0,o.l9)(e))return!e.isZero();if((0,o.Mc)(e))return!!(e.re||e.im);if((0,o.wr)(e))return!!e.value}if(null==e)return!1;throw TypeError('Unsupported type of condition "'+(0,o.kM)(e)+'"')}(r(e,t,s))?n(e,t,s):i(e,t,s)}}forEach(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)}map(e){return new r(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=x(this,t,e&&e.implicit),i=this.condition.toString(e),n=x(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==n&&n<=r)&&(i="("+i+")");var o=this.trueExpr.toString(e),s=x(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==s&&s<=r)&&(o="("+o+")");var a=this.falseExpr.toString(e),u=x(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(a="("+a+")"),i+" ? "+o+" : "+a}toJSON(){return{mathjs:j,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(e){return new r(e.condition,e.trueExpr,e.falseExpr)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=x(this,t,e&&e.implicit),i=this.condition.toHTML(e),n=x(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==n&&n<=r)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>');var o=this.trueExpr.toHTML(e),s=x(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==s&&s<=r)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.falseExpr.toHTML(e),u=x(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i+'<span class="math-operator math-conditional-operator">?</span>'+o+'<span class="math-operator math-conditional-operator">:</span>'+a}_toTex(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}constructor(e,t,r){if(super(),!(0,o.UG)(e))throw TypeError("Parameter condition must be a Node");if(!(0,o.UG)(t))throw TypeError("Parameter trueExpr must be a Node");if(!(0,o.UG)(r))throw TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=r}}return(0,h.Z)(r,"name",j),r},{isClass:!0,isNode:!0}),U="ConstantNode",Y=(0,u.d5)(U,["Node"],e=>{var{Node:t}=e;class r extends t{get type(){return U}get isConstantNode(){return!0}_compile(e,t){var r=this.value;return function(){return r}}forEach(e){}map(e){return this.clone()}clone(){return new r(this.value)}_toString(e){return(0,p.WU)(this.value,e)}_toHTML(e){var t=this._toString(e);switch((0,o.kM)(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}}toJSON(){return{mathjs:U,value:this.value}}static fromJSON(e){return new r(e.value)}_toTex(e){var t=this._toString(e);switch((0,o.kM)(this.value)){case"string":return"\\mathtt{"+A(t)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return 0>this.value.valueOf()?"-\\infty":"\\infty";var r=t.toLowerCase().indexOf("e");if(-1!==r)return t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}";return t;case"Fraction":return this.value.toLatex();default:return t}}constructor(e){super(),this.value=e}}return(0,h.Z)(r,"name",U),r},{isClass:!0,isNode:!0}),X="RangeNode",J=(0,u.d5)(X,["Node"],e=>{var{Node:t}=e;function r(e,t,r){var i=x(e,t,r),n={},o=x(e.start,t,r);if(n.start=null!==o&&o<=i||"all"===t,e.step){var s=x(e.step,t,r);n.step=null!==s&&s<=i||"all"===t}var a=x(e.end,t,r);return n.end=null!==a&&a<=i||"all"===t,n}class i extends t{get type(){return X}get isRangeNode(){return!0}needsEnd(){return this.filter(function(e){return(0,o.FG)(e)&&"end"===e.name}).length>0}_compile(e,t){var r=e.range,i=this.start._compile(e,t),n=this.end._compile(e,t);if(!this.step)return function(e,t,o){return r(i(e,t,o),n(e,t,o))};var o=this.step._compile(e,t);return function(e,t,s){return r(i(e,t,s),n(e,t,s),o(e,t,s))}}forEach(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)}map(e){return new i(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))}clone(){return new i(this.start,this.end,this.step&&this.step)}_toString(e){var t,i=r(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),n=this.start.toString(e);if(i.start&&(n="("+n+")"),t=n,this.step){var o=this.step.toString(e);i.step&&(o="("+o+")"),t+=":"+o}var s=this.end.toString(e);return i.end&&(s="("+s+")"),t+=":"+s}toJSON(){return{mathjs:X,start:this.start,end:this.end,step:this.step}}static fromJSON(e){return new i(e.start,e.end,e.step)}_toHTML(e){var t,i=r(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),n=this.start.toHTML(e);if(i.start&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=n,this.step){var o=this.step.toHTML(e);i.step&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+o}var s=this.end.toHTML(e);return i.end&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+s}_toTex(e){var t=r(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toTex(e);if(t.start&&(i="\\left(".concat(i,"\\right)")),this.step){var n=this.step.toTex(e);t.step&&(n="\\left(".concat(n,"\\right)")),i+=":"+n}var o=this.end.toTex(e);return t.end&&(o="\\left(".concat(o,"\\right)")),i+=":"+o}constructor(e,t,r){if(super(),!(0,o.UG)(e)||!(0,o.UG)(t)||r&&!(0,o.UG)(r))throw TypeError("Node expected");if(arguments.length>3)throw Error("Too many arguments");this.start=e,this.end=t,this.step=r||null}}return(0,h.Z)(i,"name",X),i},{isClass:!0,isNode:!0}),q=(0,u.d5)("reviver",["classes"],e=>{var{classes:t}=e;return function(e,r){var i=t[r&&r.mathjs];return i&&"function"==typeof i.fromJSON?i.fromJSON(r):r}}),G=(0,u.d5)("Chain",["?on","math","typed"],e=>{var{on:t,math:r,typed:i}=e;function n(e){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");(0,o.qg)(e)?this.value=e.value:this.value=e}function s(e,t){(0,a.Vo)(n.prototype,e,function(){var e=t();if("function"==typeof e)return u(e)})}function u(e){return function(){if(0==arguments.length)return new n(e(this.value));for(var t=[this.value],r=0;r<arguments.length;r++)t[r+1]=arguments[r];if(i.isTypedFunction(e)){var o=i.resolve(e,t);if(1===o.params.length)throw Error("chain function "+e.name+" cannot match rest parameter between chain value and additional arguments.");return new n(o.implementation.apply(e,t))}return new n(e.apply(e,t))}}n.prototype.type="Chain",n.prototype.isChain=!0,n.prototype.done=function(){return this.value},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return(0,p.WU)(this.value)},n.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},n.fromJSON=function(e){return new n(e.value)},n.createProxy=function(e,t){if("string"==typeof e)"function"==typeof t&&(n.prototype[e]=u(t));else{var r=function(t){(0,a.nr)(e,t)&&void 0===l[t]&&s(t,()=>e[t])};for(var i in e)r(i)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return n.createProxy(r),t&&t("import",function(e,t,r){r||s(e,t)}),n},{isClass:!0}),H="FunctionAssignmentNode",V=(0,u.d5)(H,["typed","Node"],e=>{var{typed:t,Node:r}=e;function i(e,t,r){var i=x(e,t,r),n=x(e.expr,t,r);return"all"===t||null!==n&&n<=i}class n extends r{get type(){return H}get isFunctionAssignmentNode(){return!0}_compile(e,r){var i=Object.create(r);(0,v.Ed)(this.params,function(e){i[e]=!0});var n=this.expr._compile(e,i),o=this.name,s=this.params,a=(0,v.v_)(this.types,","),u=o+"("+(0,v.v_)(this.params,", ")+")";return function(e,r,i){var l={};l[a]=function(){for(var t=Object.create(r),o=0;o<s.length;o++)t[s[o]]=arguments[o];return n(e,t,i)};var c=t(o,l);return c.syntax=u,e.set(o,c),c}}forEach(e){e(this.expr,"expr",this)}map(e){var t=this._ifNode(e(this.expr,"expr",this));return new n(this.name,this.params.slice(0),t)}clone(){return new n(this.name,this.params.slice(0),this.expr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toString(e);return i(this,t,e&&e.implicit)&&(r="("+r+")"),this.name+"("+this.params.join(", ")+") = "+r}toJSON(){var e=this.types;return{mathjs:H,name:this.name,params:this.params.map(function(t,r){return{name:t,type:e[r]}}),expr:this.expr}}static fromJSON(e){return new n(e.name,e.params,e.expr)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=[],n=0;n<this.params.length;n++)r.push('<span class="math-symbol math-parameter">'+(0,p.YU)(this.params[n])+"</span>");var o=this.expr.toHTML(e);return i(this,t,e&&e.implicit)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+(0,p.YU)(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+r.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+o}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toTex(e);return i(this,t,e&&e.implicit)&&(r="\\left(".concat(r,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(P).join(",")+"\\right)="+r}constructor(e,t,r){if(super(),"string"!=typeof e)throw TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw TypeError('Array containing strings or objects expected for parameter "params"');if(!(0,o.UG)(r))throw TypeError('Node expected for parameter "expr"');if(s.has(e))throw Error('Illegal function name, "'+e+'" is a reserved keyword');var i=new Set;for(var n of t){var a="string"==typeof n?n:n.name;if(i.has(a))throw Error('Duplicate parameter name "'.concat(a,'"'));i.add(a)}this.name=e,this.params=t.map(function(e){return e&&e.name||e}),this.types=t.map(function(e){return e&&e.type||"any"}),this.expr=r}}return(0,h.Z)(n,"name",H),n},{isClass:!0,isNode:!0}),W="chain",$=(0,u.d5)(W,["typed","Chain"],e=>{var{typed:t,Chain:r}=e;return t(W,{"":function(){return new r},any:function(e){return new r(e)}})}),Q="IndexNode",K=(0,u.d5)(Q,["Node","size"],e=>{var{Node:t,size:r}=e;class i extends t{get type(){return Q}get isIndexNode(){return!0}_compile(e,t){var i=(0,v.UI)(this.dimensions,function(i,n){if(!(i.filter(e=>e.isSymbolNode&&"end"===e.name).length>0))return i._compile(e,t);var s=Object.create(t);s.end=!0;var a=i._compile(e,s);return function(e,t,i){if(!(0,o.SW)(i)&&!(0,o.kJ)(i)&&!(0,o.HD)(i))throw TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+(0,o.kM)(i));var s=r(i).valueOf(),u=Object.create(t);return u.end=s[n],a(e,u,i)}}),n=(0,d.YF)(e,"index");return function(e,t,r){return n(...(0,v.UI)(i,function(i){return i(e,t,r)}))}}forEach(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)}map(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this._ifNode(e(this.dimensions[r],"dimensions["+r+"]",this));return new i(t,this.dotNotation)}clone(){return new i(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return 1===this.dimensions.length&&(0,o.nu)(this.dimensions[0])&&"string"==typeof this.dimensions[0].value}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Q,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(e){return new i(e.dimensions,e.dotNotation)}_toHTML(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this.dimensions[r].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+(0,p.YU)(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){var t=this.dimensions.map(function(t){return t.toTex(e)});return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"}constructor(e,t){if(super(),this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(o.UG))throw TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw Error("dotNotation only applicable for object properties")}}return(0,h.Z)(i,"name",Q),i},{isClass:!0,isNode:!0}),ee=r(6896);function et(e){return e&&e.isIndexError?new ee.c(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function er(e){var{subset:t}=e;return function(e,r){try{if(Array.isArray(e))return t(e,r);if(e&&"function"==typeof e.subset)return e.subset(r);if("string"==typeof e)return t(e,r);if("object"==typeof e){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return(0,d.YF)(e,r.getObjectProperty())}else throw TypeError("Cannot apply index: unsupported type of object")}catch(e){throw et(e)}}}var ei="AccessorNode",en=(0,u.d5)(ei,["subset","Node"],e=>{var{subset:t,Node:r}=e,i=er({subset:t});function n(e){return!((0,o.Yz)(e)||(0,o.j0)(e)||(0,o.nu)(e)||(0,o.VO)(e)||(0,o.Lr)(e)||(0,o.Ig)(e)||(0,o.FG)(e))}class s extends r{get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return ei}get isAccessorNode(){return!0}_compile(e,t){var r=this.object._compile(e,t),n=this.index._compile(e,t);if(!this.index.isObjectProperty())return function(e,t,o){var s=r(e,t,o),a=n(e,t,s);return i(s,a)};var o=this.index.getObjectProperty();return function(e,t,i){return(0,d.YF)(r(e,t,i),o)}}forEach(e){e(this.object,"object",this),e(this.index,"index",this)}map(e){return new s(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))}clone(){return new s(this.object,this.index)}_toString(e){var t=this.object.toString(e);return n(this.object)&&(t="("+t+")"),t+this.index.toString(e)}_toHTML(e){var t=this.object.toHTML(e);return n(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)}_toTex(e){var t=this.object.toTex(e);return n(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)}toJSON(){return{mathjs:ei,object:this.object,index:this.index}}static fromJSON(e){return new s(e.object,e.index)}constructor(e,t){if(super(),!(0,o.UG)(e))throw TypeError('Node expected for parameter "object"');if(!(0,o.Cl)(t))throw TypeError('IndexNode expected for parameter "index"');this.object=e,this.index=t}}return(0,h.Z)(s,"name",ei),s},{isClass:!0,isNode:!0}),eo="AssignmentNode",es=(0,u.d5)(eo,["subset","?matrix","Node"],e=>{var{subset:t,matrix:r,Node:i}=e,n=er({subset:t}),s=function(e){var{subset:t,matrix:r}=e;return function(e,i,n){try{if(Array.isArray(e))return r(e).subset(i,n).valueOf().forEach((t,r)=>{e[r]=t}),e;if(e&&"function"==typeof e.subset)return e.subset(i,n);if("string"==typeof e)return t(e,i,n);if("object"==typeof e){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return(0,d.nI)(e,i.getObjectProperty(),n),e}else throw TypeError("Cannot apply index: unsupported type of object")}catch(e){throw et(e)}}}({subset:t,matrix:r});function a(e,t,r){t||(t="keep");var i=x(e,t,r),n=x(e.value,t,r);return"all"===t||null!==n&&n<=i}class u extends i{get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return eo}get isAssignmentNode(){return!0}_compile(e,t){var r=this.object._compile(e,t),i=this.index?this.index._compile(e,t):null,a=this.value._compile(e,t),u=this.object.name;if(this.index){if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(e,t,i){var n=r(e,t,i),o=a(e,t,i);return(0,d.nI)(n,l,o),o}}if((0,o.FG)(this.object))return function(e,t,n){var o=r(e,t,n),l=a(e,t,n),c=i(e,t,o);return e.set(u,s(o,c,l)),l};var c=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var h=this.object.index.getObjectProperty();return function(e,t,r){var n=c(e,t,r),o=(0,d.YF)(n,h),u=i(e,t,o),l=a(e,t,r);return(0,d.nI)(n,h,s(o,u,l)),l}}var p=this.object.index._compile(e,t);return function(e,t,r){var o=c(e,t,r),u=p(e,t,o),l=n(o,u),h=i(e,t,l),d=a(e,t,r);return s(o,u,s(l,h,d)),d}}if(!(0,o.FG)(this.object))throw TypeError("SymbolNode expected as object");return function(e,t,r){var i=a(e,t,r);return e.set(u,i),i}}forEach(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)}map(e){return new u(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)))}clone(){return new u(this.object,this.index,this.value)}_toString(e){var t=this.object.toString(e),r=this.index?this.index.toString(e):"",i=this.value.toString(e);return a(this,e&&e.parenthesis,e&&e.implicit)&&(i="("+i+")"),t+r+" = "+i}toJSON(){return{mathjs:eo,object:this.object,index:this.index,value:this.value}}static fromJSON(e){return new u(e.object,e.index,e.value)}_toHTML(e){var t=this.object.toHTML(e),r=this.index?this.index.toHTML(e):"",i=this.value.toHTML(e);return a(this,e&&e.parenthesis,e&&e.implicit)&&(i='<span class="math-paranthesis math-round-parenthesis">(</span>'+i+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+r+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+i}_toTex(e){var t=this.object.toTex(e),r=this.index?this.index.toTex(e):"",i=this.value.toTex(e);return a(this,e&&e.parenthesis,e&&e.implicit)&&(i="\\left(".concat(i,"\\right)")),t+r+"="+i}constructor(e,t,r){if(super(),this.object=e,this.index=r?t:null,this.value=r||t,!(0,o.FG)(e)&&!(0,o.Yz)(e))throw TypeError('SymbolNode or AccessorNode expected as "object"');if((0,o.FG)(e)&&"end"===e.name)throw Error('Cannot assign to symbol "end"');if(this.index&&!(0,o.Cl)(this.index))throw TypeError('IndexNode expected as "index"');if(!(0,o.UG)(this.value))throw TypeError('Node expected as "value"')}}return(0,h.Z)(u,"name",eo),u},{isClass:!0,isNode:!0}),ea=(0,u.d5)("SymbolNode",["math","?Unit","Node"],e=>{var{math:t,Unit:r,Node:i}=e;function n(e){return!!r&&r.isValuelessUnit(e)}class o extends i{get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(e,t){var i=this.name;if(!0===t[i])return function(e,t,r){return(0,d.YF)(t,i)};if(i in e)return function(t,r,n){return t.has(i)?t.get(i):(0,d.YF)(e,i)};var s=n(i);return function(e,t,n){return e.has(i)?e.get(i):s?new r(null,i):o.onUndefinedSymbol(i)}}forEach(e){}map(e){return this.clone()}static onUndefinedSymbol(e){throw Error("Undefined symbol "+e)}clone(){return new o(this.name)}_toString(e){return this.name}_toHTML(e){var t=(0,p.YU)(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(e){return new o(e.name)}_toTex(e){var r=!1;void 0===t[this.name]&&n(this.name)&&(r=!0);var i=P(this.name,r);return"\\"===i[0]?i:" "+i}constructor(e){if(super(),"string"!=typeof e)throw TypeError('String expected for parameter "name"');this.name=e}}return o},{isClass:!0,isNode:!0}),eu="FunctionNode",el=(0,u.d5)(eu,["math","Node","SymbolNode"],e=>{var{math:t,Node:r,SymbolNode:i}=e,n=e=>(0,p.WU)(e,{truncate:78});function s(e,t,r){for(var i,n="",s=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,a=0;null!==(i=s.exec(e));)if(n+=e.substring(a,i.index),a=i.index,"$$"===i[0])n+="$",a++;else{a+=i[0].length;var u=t[i[1]];if(!u)throw ReferenceError("Template: Property "+i[1]+" does not exist.");if(void 0===i[2])switch(typeof u){case"string":n+=u;break;case"object":if((0,o.UG)(u))n+=u.toTex(r);else if(Array.isArray(u))n+=u.map(function(e,t){if((0,o.UG)(e))return e.toTex(r);throw TypeError("Template: "+i[1]+"["+t+"] is not a Node.")}).join(",");else throw TypeError("Template: "+i[1]+" has to be a Node, String or array of Nodes");break;default:throw TypeError("Template: "+i[1]+" has to be a Node, String or array of Nodes")}else if((0,o.UG)(u[i[2]]&&u[i[2]]))n+=u[i[2]].toTex(r);else throw TypeError("Template: "+i[1]+"["+i[2]+"] is not a Node.")}return n+e.slice(a)}class u extends r{get name(){return this.fn.name||""}get type(){return eu}get isFunctionNode(){return!0}_compile(e,t){var r=this.args.map(r=>r._compile(e,t));if((0,o.FG)(this.fn)){var i=this.fn.name;if(t[i]){var s=this.args;return function(t,o,a){var u=(0,d.YF)(o,i);if("function"!=typeof u)throw TypeError("Argument '".concat(i,"' was not a function; received: ").concat(n(u)));if(u.rawArgs)return u(s,e,g(t,o));var l=r.map(e=>e(t,o,a));return u.apply(u,l)}}var a=i in e?(0,d.YF)(e,i):void 0,l="function"==typeof a&&!0===a.rawArgs,c=t=>{var r;if(t.has(i))r=t.get(i);else{if(!(i in e))return u.onUndefinedFunction(i);r=(0,d.YF)(e,i)}if("function"==typeof r)return r;throw TypeError("'".concat(i,"' is not a function; its value is:\n  ").concat(n(r)))};if(l){var h=this.args;return function(t,r,i){return c(t)(h,e,g(t,r))}}switch(r.length){case 0:return function(e,t,r){return c(e)()};case 1:return function(e,t,i){return c(e)((0,r[0])(e,t,i))};case 2:return function(e,t,i){var n=c(e),o=r[0],s=r[1];return n(o(e,t,i),s(e,t,i))};default:return function(e,t,i){return c(e)(...r.map(r=>r(e,t,i)))}}}else if((0,o.Yz)(this.fn)&&(0,o.Cl)(this.fn.index)&&this.fn.index.isObjectProperty()){var p=this.fn.object._compile(e,t),f=this.fn.index.getObjectProperty(),m=this.args;return function(t,i,n){var o=p(t,i,n),s=(0,d.rG)(o,f);if(null!=s&&s.rawArgs)return s(m,e,g(t,i));var a=r.map(e=>e(t,i,n));return s.apply(o,a)}}else{var v=this.fn.toString(),b=this.fn._compile(e,t),y=this.args;return function(t,i,o){var s=b(t,i,o);if("function"!=typeof s)throw TypeError("Expression '".concat(v,"' did not evaluate to a function; value is:")+"\n  ".concat(n(s)));if(s.rawArgs)return s(y,e,g(t,i));var a=r.map(e=>e(t,i,o));return s.apply(s,a)}}}forEach(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=this._ifNode(e(this.fn,"fn",this)),r=[],i=0;i<this.args.length;i++)r[i]=this._ifNode(e(this.args[i],"args["+i+"]",this));return new u(t,r)}clone(){return new u(this.fn,this.args.slice(0))}toString(e){var t,r=this.fn.toString(e);return(e&&"object"==typeof e.handler&&(0,a.nr)(e.handler,r)&&(t=e.handler[r](this,e)),void 0!==t)?t:super.toString(e)}_toString(e){var t=this.args.map(function(t){return t.toString(e)});return((0,o.l7)(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"}toJSON(){return{mathjs:eu,fn:this.fn,args:this.args}}_toHTML(e){var t=this.args.map(function(t){return t.toHTML(e)});return'<span class="math-function">'+(0,p.YU)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(e){var t;return(e&&"object"==typeof e.handler&&(0,a.nr)(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t)?t:super.toTex(e)}_toTex(e){var r,i,n=this.args.map(function(t){return t.toTex(e)});switch(N[this.name]&&(r=N[this.name]),t[this.name]&&("function"==typeof t[this.name].toTex||"object"==typeof t[this.name].toTex||"string"==typeof t[this.name].toTex)&&(r=t[this.name].toTex),typeof r){case"function":i=r(this,e);break;case"string":i=s(r,this,e);break;case"object":switch(typeof r[n.length]){case"function":i=r[n.length](this,e);break;case"string":i=s(r[n.length],this,e)}}return void 0!==i?i:s("\\mathrm{${name}}\\left(${args}\\right)",this,e)}getIdentifier(){return this.type+":"+this.name}constructor(e,t){if(super(),"string"==typeof e&&(e=new i(e)),!(0,o.UG)(e))throw TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(o.UG))throw TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[]}}return(0,h.Z)(u,"name",eu),(0,h.Z)(u,"onUndefinedFunction",function(e){throw Error("Undefined function "+e)}),(0,h.Z)(u,"fromJSON",function(e){return new u(e.fn,e.args)}),u},{isClass:!0,isNode:!0}),ec=r(2248),eh="parse",ed=(0,u.d5)(eh,["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],e=>{var{typed:t,numeric:r,config:n,AccessorNode:s,ArrayNode:u,AssignmentNode:l,BlockNode:c,ConditionalNode:h,ConstantNode:d,FunctionAssignmentNode:p,FunctionNode:f,IndexNode:m,ObjectNode:v,OperatorNode:g,ParenthesisNode:b,RangeNode:y,RelationalNode:x,SymbolNode:C}=e,Z=t(eh,{string:function(e){return I(e,{})},"Array | Matrix":function(e){return _(e,{})},"string, Object":function(e,t){return I(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":_});function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==t.nodes?t.nodes:{};return(0,ec.Fh)(e,function(e){if("string"!=typeof e)throw TypeError("String expected");return I(e,r)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},N={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},S={true:!0,false:!1,null:null,undefined},A=["NaN","Infinity"],P={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function D(e,t){return e.expression.substr(e.index,t)}function M(e){return D(e,1)}function O(e){e.index++}function T(e){return e.expression.charAt(e.index-1)}function B(e){return e.expression.charAt(e.index+1)}function F(e){for(e.tokenType=w.NULL,e.token="",e.comment="";;){if("#"===M(e))for(;"\n"!==M(e)&&""!==M(e);)e.comment+=M(e),O(e);if(Z.isWhitespace(M(e),e.nestingLevel))O(e);else break}if(""===M(e)){e.tokenType=w.DELIMITER;return}if("\n"===M(e)&&!e.nestingLevel){e.tokenType=w.DELIMITER,e.token=M(e),O(e);return}var t=M(e),r=D(e,2),i=D(e,3);if(3===i.length&&E[i]){e.tokenType=w.DELIMITER,e.token=i,O(e),O(e),O(e);return}if(2===r.length&&E[r]){e.tokenType=w.DELIMITER,e.token=r,O(e),O(e);return}if(E[t]){e.tokenType=w.DELIMITER,e.token=t,O(e);return}if(Z.isDigitDot(t)){e.tokenType=w.NUMBER;var n=D(e,2);if("0b"===n||"0o"===n||"0x"===n){for(e.token+=M(e),O(e),e.token+=M(e),O(e);Z.isHexDigit(M(e));)e.token+=M(e),O(e);if("."===M(e))for(e.token+=".",O(e);Z.isHexDigit(M(e));)e.token+=M(e),O(e);else if("i"===M(e))for(e.token+="i",O(e);Z.isDigit(M(e));)e.token+=M(e),O(e);return}if("."===M(e)){if(e.token+=M(e),O(e),!Z.isDigit(M(e))){e.tokenType=w.DELIMITER;return}}else{for(;Z.isDigit(M(e));)e.token+=M(e),O(e);Z.isDecimalMark(M(e),B(e))&&(e.token+=M(e),O(e))}for(;Z.isDigit(M(e));)e.token+=M(e),O(e);if("E"===M(e)||"e"===M(e)){if(Z.isDigit(B(e))||"-"===B(e)||"+"===B(e)){if(e.token+=M(e),O(e),("+"===M(e)||"-"===M(e))&&(e.token+=M(e),O(e)),!Z.isDigit(M(e)))throw es(e,'Digit expected, got "'+M(e)+'"');for(;Z.isDigit(M(e));)e.token+=M(e),O(e);if(Z.isDecimalMark(M(e),B(e)))throw es(e,'Digit expected, got "'+M(e)+'"')}else if("."===B(e))throw O(e),es(e,'Digit expected, got "'+M(e)+'"')}return}if(Z.isAlpha(M(e),T(e),B(e))){for(;Z.isAlpha(M(e),T(e),B(e))||Z.isDigit(M(e));)e.token+=M(e),O(e);(0,a.nr)(N,e.token)?e.tokenType=w.DELIMITER:e.tokenType=w.SYMBOL;return}for(e.tokenType=w.UNKNOWN;""!==M(e);)e.token+=M(e),O(e);throw es(e,'Syntax error in part "'+e.token+'"')}function R(e){do F(e);while("\n"===e.token)}function k(e){e.nestingLevel++}function L(e){e.nestingLevel--}function I(e,t){var r={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null};(0,i.Z)(r,{expression:e,extraNodes:t}),F(r);var n=function(e){var t,r,i=[];for(""!==e.token&&"\n"!==e.token&&";"!==e.token&&(t=j(e),e.comment&&(t.comment=e.comment));"\n"===e.token||";"===e.token;)0===i.length&&t&&(r=";"!==e.token,i.push({node:t,visible:r})),F(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&(t=j(e),e.comment&&(t.comment=e.comment),r=";"!==e.token,i.push({node:t,visible:r}));return i.length>0?new c(i):(!t&&(t=new d(void 0),e.comment&&(t.comment=e.comment)),t)}(r);if(""!==r.token){if(r.tokenType===w.DELIMITER)throw ea(r,"Unexpected operator "+r.token);throw es(r,'Unexpected part "'+r.token+'"')}return n}function j(e){var t,r,i,n,s=function(e){for(var t=function(e){for(var t=z(e);"or"===e.token;)R(e),t=new g("or","or",[t,z(e)]);return t}(e);"?"===e.token;){var r=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,R(e);var i=t,n=j(e);if(":"!==e.token)throw es(e,"False part of conditional expression expected");e.conditionalLevel=null,R(e),t=new h(i,n,j(e)),e.conditionalLevel=r}return t}(e);if("="===e.token){if((0,o.FG)(s))return t=s.name,R(e),i=j(e),new l(new C(t),i);if((0,o.Yz)(s))return R(e),i=j(e),new l(s.object,s.index,i);if((0,o.VO)(s)&&(0,o.FG)(s.fn)&&(n=!0,r=[],t=s.name,s.args.forEach(function(e,t){(0,o.FG)(e)?r[t]=e.name:n=!1}),n))return R(e),new p(t,r,i=j(e));throw es(e,"Invalid left hand side of assignment operator =")}return s}function z(e){for(var t=U(e);"xor"===e.token;)R(e),t=new g("xor","xor",[t,U(e)]);return t}function U(e){for(var t=Y(e);"and"===e.token;)R(e),t=new g("and","and",[t,Y(e)]);return t}function Y(e){for(var t=X(e);"|"===e.token;)R(e),t=new g("|","bitOr",[t,X(e)]);return t}function X(e){for(var t=J(e);"^|"===e.token;)R(e),t=new g("^|","bitXor",[t,J(e)]);return t}function J(e){for(var t=q(e);"&"===e.token;)R(e),t=new g("&","bitAnd",[t,q(e)]);return t}function q(e){for(var t=[G(e)],r=[],i={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};(0,a.nr)(i,e.token);){var n={name:e.token,fn:i[e.token]};r.push(n),R(e),t.push(G(e))}return 1===t.length?t[0]:2===t.length?new g(r[0].name,r[0].fn,t):new x(r.map(e=>e.fn),t)}function G(e){t=H(e);for(var t,r,i,n={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};(0,a.nr)(n,e.token);)i=n[r=e.token],R(e),t=new g(r,i,[t,H(e)]);return t}function H(e){t=V(e);for(var t,r,i,n={to:"to",in:"to"};(0,a.nr)(n,e.token);)i=n[r=e.token],R(e),t="in"===r&&""===e.token?new g("*","multiply",[t,new C("in")],!0):new g(r,i,[t,V(e)]);return t}function V(e){var t,r=[];if(t=":"===e.token?new d(1):W(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(r.push(t);":"===e.token&&r.length<3;)R(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?r.push(new C("end")):r.push(W(e));t=3===r.length?new y(r[0],r[2],r[1]):new y(r[0],r[1])}return t}function W(e){t=$(e);for(var t,r,i,n,o={"+":"add","-":"subtract"};(0,a.nr)(o,e.token);){i=o[r=e.token],R(e);var s=$(e);n=s.isPercentage?[t,new g("*","multiply",[t,s])]:[t,s],t=new g(r,i,n)}return t}function $(e){t=Q(e);for(var t,r,i,n={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};;)if((0,a.nr)(n,e.token))i=n[r=e.token],R(e),t=new g(r,i,[t,Q(e)]);else break;return t}function Q(e){var t,r;for(r=t=K(e);;)if(e.tokenType===w.SYMBOL||"in"===e.token&&(0,o.nu)(t)||e.tokenType===w.NUMBER&&!(0,o.nu)(r)&&(!(0,o.bV)(r)||"!"===r.op)||"("===e.token)t=new g("*","multiply",[t,r=K(e)],!0);else break;return t}function K(e){for(var t=ee(e),r=t,n=[];;)if("/"===e.token&&(0,o.ZX)(r)){if(n.push((0,i.Z)({},e)),R(e),e.tokenType===w.NUMBER){if(n.push((0,i.Z)({},e)),R(e),e.tokenType===w.SYMBOL||"("===e.token)(0,i.Z)(e,n.pop()),n.pop(),t=new g("/","divide",[t,r=ee(e)]);else{n.pop(),(0,i.Z)(e,n.pop());break}}else{(0,i.Z)(e,n.pop());break}}else break;return t}function ee(e){t=et(e);for(var t,r,i,n={"%":"mod",mod:"mod"};(0,a.nr)(n,e.token);)i=n[r=e.token],R(e),t="%"===r&&e.tokenType===w.DELIMITER&&"("!==e.token?new g("/","divide",[t,new d(100)],!1,!0):new g(r,i,[t,et(e)]);return t}function et(e){var t,i,o,s,l={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return(0,a.nr)(l,e.token)?(s=l[e.token],o=e.token,R(e),new g(o,s,[et(e)])):(t=function(e){t=function(e){var t,i,o=[];if(e.tokenType===w.SYMBOL&&(0,a.nr)(e.extraNodes,e.token)){var s=e.extraNodes[e.token];if(F(e),"("===e.token){if(o=[],k(e),F(e),")"!==e.token)for(o.push(j(e));","===e.token;)F(e),o.push(j(e));if(")"!==e.token)throw es(e,"Parenthesis ) expected");L(e),F(e)}return new s(o)}return e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in N?(t=e.token,F(e),er(e,(0,a.nr)(S,t)?new d(S[t]):-1!==A.indexOf(t)?new d(r(t,"number")):new C(t))):'"'===e.token||"'"===e.token?(i=new d(ei(e,e.token)),i=er(e,i)):function(e){var t,i,o,s;if("["===e.token){if(k(e),F(e),"]"!==e.token){var a=en(e);if(";"===e.token){for(o=1,i=[a];";"===e.token;)F(e),i[o]=en(e),o++;if("]"!==e.token)throw es(e,"End of matrix ] expected");L(e),F(e),s=i[0].items.length;for(var l=1;l<o;l++)if(i[l].items.length!==s)throw ea(e,"Column dimensions mismatch ("+i[l].items.length+" !== "+s+")");t=new u(i)}else{if("]"!==e.token)throw es(e,"End of matrix ] expected");L(e),F(e),t=a}}else L(e),F(e),t=new u([]);return er(e,t)}return function(e){if("{"===e.token){k(e);var t,i,o={};do if(F(e),"}"!==e.token){if('"'===e.token||"'"===e.token)i=ei(e,e.token);else if(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in N)i=e.token,F(e);else throw es(e,"Symbol or string expected as object key");if(":"!==e.token)throw es(e,"Colon : expected after object key");F(e),o[i]=j(e)}while(","===e.token);if("}"!==e.token)throw es(e,"Comma , or bracket } expected after object value");return L(e),F(e),er(e,new v(o))}return e.tokenType===w.NUMBER?(t=e.token,F(e),new d(r(t,n.number))):function(e){var t;if("("===e.token){if(k(e),F(e),t=j(e),")"!==e.token)throw es(e,"Parenthesis ) expected");return L(e),F(e),t=er(e,t=new b(t))}return function(e){if(""===e.token)throw es(e,"Unexpected end of expression");throw es(e,"Value expected")}(e)}(e)}(e)}(e)}(e);for(var t,i,o,s={"!":"factorial","'":"ctranspose"};(0,a.nr)(s,e.token);)o=s[i=e.token],F(e),t=er(e,t=new g(i,o,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(i=e.token,R(e),t=new g(i,"^"===i?"pow":"dotPow",[t,et(e)])),t)}function er(e,t,r){for(var i;("("===e.token||"["===e.token||"."===e.token)&&(!r||-1!==r.indexOf(e.token));)if(i=[],"("===e.token){if((0,o.FG)(t)||(0,o.Yz)(t)){if(k(e),F(e),")"!==e.token)for(i.push(j(e));","===e.token;)F(e),i.push(j(e));if(")"!==e.token)throw es(e,"Parenthesis ) expected");L(e),F(e),t=new f(t,i)}else break}else if("["===e.token){if(k(e),F(e),"]"!==e.token)for(i.push(j(e));","===e.token;)F(e),i.push(j(e));if("]"!==e.token)throw es(e,"Parenthesis ] expected");L(e),F(e),t=new s(t,new m(i))}else{if(F(e),!(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in N))throw es(e,"Property name expected after dot");i.push(new d(e.token)),F(e),t=new s(t,new m(i,!0))}return t}function ei(e,t){for(var r="";""!==M(e)&&M(e)!==t;)if("\\"===M(e)){O(e);var i=M(e),n=P[i];if(void 0!==n)r+=n,e.index+=1;else if("u"===i){var o=e.expression.slice(e.index+1,e.index+5);if(/^[0-9A-Fa-f]{4}$/.test(o))r+=String.fromCharCode(parseInt(o,16)),e.index+=5;else throw es(e,"Invalid unicode character \\u".concat(o))}else throw es(e,"Bad escape character \\".concat(i))}else r+=M(e),O(e);if(F(e),e.token!==t)throw es(e,"End of string ".concat(t," expected"));return F(e),r}function en(e){for(var t=[j(e)],r=1;","===e.token;)F(e),t[r]=j(e),r++;return new u(t)}function eo(e){return e.index-e.token.length+1}function es(e,t){var r=eo(e),i=SyntaxError(t+" (char "+r+")");return i.char=r,i}function ea(e,t){var r=eo(e),i=SyntaxError(t+" (char "+r+")");return i.char=r,i}return Z.isAlpha=function(e,t,r){return Z.isValidLatinOrGreek(e)||Z.isValidMathSymbol(e,r)||Z.isValidMathSymbol(t,e)},Z.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},Z.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},Z.isWhitespace=function(e,t){return" "===e||"	"===e||"\n"===e&&t>0},Z.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},Z.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},Z.isDigit=function(e){return e>="0"&&e<="9"},Z.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},t.addConversion({from:"string",to:"Node",convert:Z}),Z}),ep=(0,u.d5)("resolve",["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],e=>{var{typed:t,parse:r,ConstantNode:i,FunctionNode:n,OperatorNode:s,ParenthesisNode:a}=e;function u(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(!t)return e;if((0,o.FG)(e)){if(l.has(e.name)){var c=Array.from(l).join(", ");throw ReferenceError("recursive loop of variable definitions among {".concat(c,"}"))}var h=t.get(e.name);if((0,o.UG)(h)){var d=new Set(l);return d.add(e.name),u(h,t,d)}return"number"==typeof h?r(String(h)):void 0!==h?new i(h):e}if((0,o.bV)(e)){var p=e.args.map(function(e){return u(e,t,l)});return new s(e.op,e.fn,p,e.implicit)}if((0,o.Ig)(e))return new a(u(e.content,t,l));if((0,o.VO)(e)){var f=e.args.map(function(e){return u(e,t,l)});return new n(e.name,f)}return e.map(e=>u(e,t,l))}return t("resolve",{Node:u,"Node, Map | null | undefined":u,"Node, Object":(e,t)=>u(e,(0,l.df)(t)),"Array | Matrix":t.referToSelf(e=>t=>t.map(t=>e(t))),"Array | Matrix, null | undefined":t.referToSelf(e=>t=>t.map(t=>e(t))),"Array, Object":t.referTo("Array,Map",e=>(t,r)=>e(t,(0,l.df)(r))),"Matrix, Object":t.referTo("Matrix,Map",e=>(t,r)=>e(t,(0,l.df)(r))),"Array | Matrix, Map":t.referToSelf(e=>(t,r)=>t.map(t=>e(t,r)))})});function ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(r),!0).forEach(function(t){(0,h.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ef(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ev=(0,u.d5)("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],e=>{var{FunctionNode:t,OperatorNode:r,SymbolNode:i}=e,n="defaultF",s={add:{trivial:!0,total:!0,commutative:!0,associative:!0},unaryPlus:{trivial:!0,total:!0,commutative:!0,associative:!0},subtract:{trivial:!1,total:!0,commutative:!1,associative:!1},multiply:{trivial:!0,total:!0,commutative:!0,associative:!0},divide:{trivial:!1,total:!0,commutative:!1,associative:!1},paren:{trivial:!0,total:!0,commutative:!0,associative:!1},defaultF:{trivial:!1,total:!0,commutative:!1,associative:!1}};function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=n;if("string"==typeof e?i=e:(0,o.bV)(e)?i=e.fn.toString():(0,o.VO)(e)?i=e.name:(0,o.Ig)(e)&&(i="paren"),(0,a.nr)(r,i)){var u=r[i];if((0,a.nr)(u,t))return u[t];if((0,a.nr)(s,i))return s[i][t]}if((0,a.nr)(r,n)){var l=r[n];return(0,a.nr)(l,t)?l[t]:s[n][t]}if((0,a.nr)(s,i)){var c=s[i];if((0,a.nr)(c,t))return c[t]}return s[n][t]}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return u(e,"associative",t)}function c(e,t){var r,i=[];return l(e,t)?(r=e.op,!function e(t){for(var n=0;n<t.args.length;n++){var s=t.args[n];(0,o.bV)(s)&&r===s.op?e(s):i.push(s)}}(e),i):e.args}function h(e){return(0,o.bV)(e)?function(t){try{return new r(e.op,e.fn,t,e.implicit)}catch(e){return console.error(e),[]}}:function(r){return new t(new i(e.name),r)}}return{createMakeNodeFunction:h,hasProperty:u,isCommutative:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return u(e,"commutative",t)},isAssociative:l,mergeContext:function(e,t){var r=em({},e);for(var i in t)(0,a.nr)(e,i)?r[i]=em(em({},t[i]),e[i]):r[i]=t[i];return r},flatten:function e(t,r){if(!t.args||0===t.args.length)return t;t.args=c(t,r);for(var i=0;i<t.args.length;i++)e(t.args[i],r)},allChildren:c,unflattenr:function e(t,r){if(t.args&&0!==t.args.length){for(var i=h(t),n=t.args.length,o=0;o<n;o++)e(t.args[o],r);if(n>2&&l(t,r)){for(var s=t.args.pop();t.args.length>0;)s=i([t.args.pop(),s]);t.args=s.args}}},unflattenl:function e(t,r){if(t.args&&0!==t.args.length){for(var i=h(t),n=t.args.length,o=0;o<n;o++)e(t.args[o],r);if(n>2&&l(t,r)){for(var s=t.args.shift();t.args.length>0;)s=i([s,t.args.shift()]);t.args=s.args}}},defaultContext:s,realContext:{divide:{total:!1},log:{total:!1}},positiveContext:{subtract:{total:!1},abs:{trivial:!0},log:{total:!0}}}}),eg=r(4986),eb=(0,u.d5)("simplifyConstant",["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],e=>{var{typed:t,config:r,mathWithTransform:i,matrix:n,fraction:s,bignumber:a,AccessorNode:u,ArrayNode:l,ConstantNode:c,FunctionNode:h,IndexNode:d,ObjectNode:p,OperatorNode:f,SymbolNode:m}=e,{isCommutative:v,isAssociative:g,allChildren:b,createMakeNodeFunction:y}=ev({FunctionNode:h,OperatorNode:f,SymbolNode:m}),x=t("simplifyConstant",{Node:e=>_(A(e,{})),"Node, Object":function(e,t){return _(A(e,t))}});function C(e,t,r){try{return i[e].apply(null,t)}catch(s){return t=t.map(function e(t){return(0,o.yQ)(t)?t.valueOf():t instanceof Array?t.map(e):(0,o.SW)(t)?n(e(t.valueOf())):t}),E(i[e].apply(null,t),r)}}var Z=t({Fraction:function(e){var t,r=e.s*e.n;return(t=r<0?new f("-","unaryMinus",[new c(-r)]):new c(r),1===e.d)?t:new f("/","divide",[t,new c(e.d)])},number:function(e){return e<0?N(new c(-e)):new c(e)},BigNumber:function(e){return e<0?N(new c(-e)):new c(e)},Complex:function(e){throw Error("Cannot convert Complex number to Node")},string:function(e){return new c(e)},Matrix:function(e){return new l(e.valueOf().map(e=>Z(e)))}});function _(e){return(0,o.UG)(e)?e:Z(e)}function w(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&s){var r=s(e),i=t&&"number"==typeof t.fractionsLimit?t.fractionsLimit:1/0;if(r.valueOf()===e&&r.n<i&&r.d<i)return r}return e}var E=t({"string, Object":function(e,t){return"BigNumber"===r.number?(void 0===a&&(0,eg.R3)(),a(e)):"Fraction"===r.number?(void 0===s&&(0,eg.nG)(),s(e)):w(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return w(e,t)},"Complex, Object":function(e,t){return 0!==e.im?e:w(e.re,t)},"Matrix, Object":function(e,t){return n(w(e.valueOf()))},"Array, Object":function(e,t){return e.map(w)}});function N(e){return new f("-","unaryMinus",[e])}function S(e,t,r,i){var n=t.shift(),s=t.reduce((t,n)=>{if(!(0,o.UG)(n)){var s=t.pop();if((0,o.UG)(s))return[s,n];try{return t.push(C(e,[s,n],i)),t}catch(e){t.push(s)}}t.push(_(t.pop()));var a=1===t.length?t[0]:r(t);return[r([a,_(n)])]},[n]);return 1===s.length?s[0]:r([s[0],Z(s[1])])}function A(e,t){switch(e.type){case"SymbolNode":return e;case"ConstantNode":switch(typeof e.value){case"number":return E(e.value,t);case"string":return e.value;default:if(!isNaN(e.value))return E(e.value,t)}return e;case"FunctionNode":if(i[e.name]&&i[e.name].rawArgs)return e;if(-1===["add","multiply"].indexOf(e.name)){var r=e.args.map(e=>A(e,t));if(!r.some(o.UG))try{return C(e.name,r,t)}catch(e){}if("size"===e.name&&1===r.length&&(0,o.j0)(r[0])){for(var s=[],a=r[0];(0,o.j0)(a);)s.push(a.items.length),a=a.items[0];return n(s)}return new h(e.name,r.map(_))}case"OperatorNode":var f,m,Z=e.fn.toString(),w=y(e);if((0,o.bV)(e)&&e.isUnary())f=[A(e.args[0],t)],m=(0,o.UG)(f[0])?w(f):C(Z,f,t);else if(g(e,t.context)){if(f=(f=b(e,t.context)).map(e=>A(e,t)),v(Z,t.context)){for(var N=[],P=[],D=0;D<f.length;D++)(0,o.UG)(f[D])?P.push(f[D]):N.push(f[D]);N.length>1?(m=S(Z,N,w,t),P.unshift(m),m=S(Z,P,w,t)):m=S(Z,f,w,t)}else m=S(Z,f,w,t)}else m=S(Z,f=e.args.map(e=>A(e,t)),w,t);return m;case"ParenthesisNode":return A(e.content,t);case"AccessorNode":return function(e,t,r){if(!(0,o.Cl)(t))return new u(_(e),_(t));if((0,o.j0)(e)||(0,o.SW)(e)){for(var i=Array.from(t.dimensions);i.length>0;)if((0,o.nu)(i[0])&&"string"!=typeof i[0].value){var s=E(i.shift().value,r);(0,o.j0)(e)?e=e.items[s-1]:(e=e.valueOf()[s-1])instanceof Array&&(e=n(e))}else if(i.length>1&&(0,o.nu)(i[1])&&"string"!=typeof i[1].value){var a=E(i[1].value,r),h=[],p=(0,o.j0)(e)?e.items:e.valueOf();for(var f of p)if((0,o.j0)(f))h.push(f.items[a-1]);else if((0,o.SW)(e))h.push(f[a-1]);else break;if(h.length===p.length)e=(0,o.j0)(e)?new l(h):n(h),i.splice(1,1);else break}else break;return i.length===t.dimensions.length?new u(_(e),t):i.length>0?(t=new d(i),new u(_(e),t)):e}if((0,o.Lr)(e)&&1===t.dimensions.length&&(0,o.nu)(t.dimensions[0])){var m=t.dimensions[0].value;return m in e.properties?e.properties[m]:new c}return new u(_(e),t)}(A(e.object,t),A(e.index,t),t);case"ArrayNode":var M=e.items.map(e=>A(e,t));if(M.some(o.UG))return new l(M.map(_));return n(M);case"IndexNode":return new d(e.dimensions.map(e=>x(e,t)));case"ObjectNode":var O={};for(var T in e.properties)O[T]=x(e.properties[T],t);return new p(O);default:throw Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}return x}),ey="compile",ex=(0,u.d5)(ey,["typed","parse"],e=>{var{typed:t,parse:r}=e;return t(ey,{string:function(e){return r(e).compile()},"Array | Matrix":function(e){return(0,ec.Fh)(e,function(e){return r(e).compile()})}})}),eC="simplifyCore",eZ=(0,u.d5)(eC,["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],e=>{var{typed:t,parse:r,equal:i,isZero:n,add:s,subtract:a,multiply:u,divide:l,pow:c,AccessorNode:h,ArrayNode:d,ConstantNode:p,FunctionNode:f,IndexNode:m,ObjectNode:v,OperatorNode:g,ParenthesisNode:y,SymbolNode:x}=e,C=new p(0),Z=new p(1),_=new p(!0),w=new p(!1);function E(e){return(0,o.bV)(e)&&["and","not","or"].includes(e.op)}var{hasProperty:N,isCommutative:S}=ev({FunctionNode:f,OperatorNode:g,SymbolNode:x});function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?t.context:void 0;if(N(e,"trivial",r)){if((0,o.VO)(e)&&1===e.args.length)return A(e.args[0],t);var s=!1,a=0;if(e.forEach(e=>{1==++a&&(s=A(e,t))}),1===a)return s}var u=e;if((0,o.VO)(u)){var l=function(e){var t="OperatorNode:"+e;for(var r of b)if(t in r)return r[t].op;return null}(u.name);if(!l)return new f(A(u.fn),u.args.map(e=>A(e,t)));if(u.args.length>2&&N(u,"associative",r))for(;u.args.length>2;){var c=u.args.pop(),p=u.args.pop();u.args.push(new g(l,u.name,[c,p]))}u=new g(l,u.name,u.args)}if((0,o.bV)(u)&&u.isUnary()){var y=A(u.args[0],t);if("~"===u.op&&(0,o.bV)(y)&&y.isUnary()&&"~"===y.op||"not"===u.op&&(0,o.bV)(y)&&y.isUnary()&&"not"===y.op&&E(y.args[0]))return y.args[0];var x=!0;if("-"===u.op&&(0,o.bV)(y)&&(y.isBinary()&&"subtract"===y.fn&&(u=new g("-","subtract",[y.args[1],y.args[0]]),x=!1),y.isUnary()&&"-"===y.op))return y.args[0];if(x)return new g(u.op,u.fn,[y])}if((0,o.bV)(u)&&u.isBinary()){var P=A(u.args[0],t),D=A(u.args[1],t);if("+"===u.op){if((0,o.nu)(P)&&n(P.value))return D;if((0,o.nu)(D)&&n(D.value))return P;(0,o.bV)(D)&&D.isUnary()&&"-"===D.op&&(u=new g("-","subtract",[P,D=D.args[0]]))}if("-"===u.op)return(0,o.bV)(D)&&D.isUnary()&&"-"===D.op?A(new g("+","add",[P,D.args[0]]),t):(0,o.nu)(P)&&n(P.value)?A(new g("-","unaryMinus",[D])):(0,o.nu)(D)&&n(D.value)?P:new g(u.op,u.fn,[P,D]);if("*"===u.op){if((0,o.nu)(P)){if(n(P.value))return C;if(i(P.value,1))return D}if((0,o.nu)(D)){if(n(D.value))return C;if(i(D.value,1))return P;if(S(u,r))return new g(u.op,u.fn,[D,P],u.implicit)}return new g(u.op,u.fn,[P,D],u.implicit)}if("/"===u.op)return(0,o.nu)(P)&&n(P.value)?C:(0,o.nu)(D)&&i(D.value,1)?P:new g(u.op,u.fn,[P,D]);if("^"===u.op&&(0,o.nu)(D)){if(n(D.value))return Z;if(i(D.value,1))return P}if("and"===u.op){if((0,o.nu)(P)){if(!P.value)return w;if(E(D))return D}if((0,o.nu)(D)){if(!D.value)return w;if(E(P))return P}}if("or"===u.op){if((0,o.nu)(P)){if(P.value)return _;if(E(D))return D}if((0,o.nu)(D)){if(D.value)return _;if(E(P))return P}}return new g(u.op,u.fn,[P,D])}if((0,o.bV)(u))return new g(u.op,u.fn,u.args.map(e=>A(e,t)));if((0,o.j0)(u))return new d(u.items.map(e=>A(e,t)));if((0,o.Yz)(u))return new h(A(u.object,t),A(u.index,t));if((0,o.Cl)(u))return new m(u.dimensions.map(e=>A(e,t)));if((0,o.Lr)(u)){var M={};for(var O in u.properties)M[O]=A(u.properties[O],t);return new v(M)}return u}return t(eC,{Node:A,"Node,Object":A})}),e_="evaluate",ew=(0,u.d5)(e_,["typed","parse"],e=>{var{typed:t,parse:r}=e;return t(e_,{string:function(e){var t=(0,l.dg)();return r(e).compile().evaluate(t)},"string, Map | Object":function(e,t){return r(e).compile().evaluate(t)},"Array | Matrix":function(e){var t=(0,l.dg)();return(0,ec.Fh)(e,function(e){return r(e).compile().evaluate(t)})},"Array | Matrix, Map | Object":function(e,t){return(0,ec.Fh)(e,function(e){return r(e).compile().evaluate(t)})}})}),eE=(0,u.d5)("Help",["evaluate"],e=>{var{evaluate:t}=e;function r(e){if(!(this instanceof r))throw SyntaxError("Constructor must be called with the new operator");if(!e)throw Error('Argument "doc" missing');this.doc=e}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var e=this.doc||{},r="\n";if(e.name&&(r+="Name: "+e.name+"\n\n"),e.category&&(r+="Category: "+e.category+"\n\n"),e.description&&(r+="Description:\n    "+e.description+"\n\n"),e.syntax&&(r+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){r+="Examples:\n";for(var i=!1,n=t("config()"),s={config:e=>(i=!0,t("config(newConfig)",{newConfig:e}))},a=0;a<e.examples.length;a++){var u=e.examples[a];r+="    "+u+"\n";var l=void 0;try{l=t(u,s)}catch(e){l=e}void 0===l||(0,o.x1)(l)||(r+="        "+(0,p.WU)(l,{precision:14})+"\n")}r+="\n",i&&t("config(originalConfig)",{originalConfig:n})}return e.mayThrow&&e.mayThrow.length&&(r+="Throws: "+e.mayThrow.join(", ")+"\n\n"),e.seealso&&e.seealso.length&&(r+="See also: "+e.seealso.join(", ")+"\n"),r},r.prototype.toJSON=function(){var e=(0,a.d9)(this.doc);return e.mathjs="Help",e},r.fromJSON=function(e){var t={};return Object.keys(e).filter(e=>"mathjs"!==e).forEach(r=>{t[r]=e[r]}),new r(t)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),eN=(0,u.d5)("Parser",["evaluate"],e=>{var{evaluate:t}=e;function r(){if(!(this instanceof r))throw SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:(0,l.dg)(),writable:!1})}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(e){return t(e,this.scope)},r.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},r.prototype.getAll=function(){return(0,l.ru)(this.scope)},r.prototype.getAllAsMap=function(){return this.scope},r.prototype.set=function(e,t){return this.scope.set(e,t),t},r.prototype.remove=function(e){this.scope.delete(e)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0});function eS(e){return(0,o.nu)(e)||(0,o.bV)(e)&&e.isUnary()&&(0,o.nu)(e.args[0])}function eA(e){return!!((0,o.nu)(e)||((0,o.VO)(e)||(0,o.bV)(e))&&e.args.every(eA)||(0,o.Ig)(e)&&eA(e.content))}var eP=(0,u.d5)("simplify",["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],e=>{var{config:t,typed:r,parse:i,add:n,subtract:s,multiply:u,divide:c,pow:h,isZero:d,equal:p,resolve:f,simplifyConstant:m,simplifyCore:v,fraction:g,bignumber:b,mathWithTransform:y,matrix:x,AccessorNode:C,ArrayNode:Z,ConstantNode:_,FunctionNode:w,IndexNode:E,ObjectNode:N,OperatorNode:S,ParenthesisNode:A,SymbolNode:P}=e,{hasProperty:D,isCommutative:M,isAssociative:O,mergeContext:T,flatten:B,unflattenr:F,unflattenl:R,createMakeNodeFunction:k,defaultContext:L,realContext:I,positiveContext:j}=ev({FunctionNode:w,OperatorNode:S,SymbolNode:P});r.addConversion({from:"Object",to:"Map",convert:l.df});var z=r("simplify",{Node:q,"Node, Map":(e,t)=>q(e,!1,t),"Node, Map, Object":(e,t,r)=>q(e,!1,t,r),"Node, Array":q,"Node, Array, Map":q,"Node, Array, Map, Object":q});function U(e){return e.transform(function(e,t,r){return(0,o.Ig)(e)?U(e.content):e})}r.removeConversion({from:"Object",to:"Map",convert:l.df}),z.defaultContext=L,z.realContext=I,z.positiveContext=j;var Y={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};z.rules=[v,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},m,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},m,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];var X=0;function J(){return new P("_p"+X++)}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.dg)(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.consoleDebug;t=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n],s=void 0,a=typeof o;switch(a){case"string":o={s:o};case"object":s=function(e,t){var r={};if(e.s){var n=e.s.split("->");if(2===n.length)r.l=n[0],r.r=n[1];else throw SyntaxError("Could not parse rule: "+e.s)}else r.l=e.l,r.r=e.r;for(var o of(r.l=U(i(r.l)),r.r=U(i(r.r)),["imposeContext","repeat","assuming"]))o in e&&(r[o]=e[o]);if(e.evaluate&&(r.evaluate=i(e.evaluate)),O(r.l,t)){var s,a=!M(r.l,t);a&&(s=J());var u=k(r.l),l=J();r.expanded={},r.expanded.l=u([r.l,l]),B(r.expanded.l,t),F(r.expanded.l,t),r.expanded.r=u([r.r,l]),a&&(r.expandedNC1={},r.expandedNC1.l=u([s,r.l]),r.expandedNC1.r=u([s,r.r]),r.expandedNC2={},r.expandedNC2.l=u([s,r.expanded.l]),r.expandedNC2.r=u([s,r.expanded.r]))}return r}(o,t);break;case"function":s=o;break;default:throw TypeError("Unsupported type of rule: "+a)}r.push(s)}return r}(t||z.rules,n.context);var s=f(e,r);s=U(s);for(var a={},u=s.toString({parenthesis:"all"});!a[u];){a[u]=!0,X=0;var c=u;o&&console.log("Working on: ",u);for(var h=0;h<t.length;h++){var d="";if("function"==typeof t[h]?(s=t[h](s,n),o&&(d=t[h].name)):(B(s,n.context),s=H(s,t[h],n.context),o&&(d="".concat(t[h].l.toString()," -> ").concat(t[h].r.toString()))),o){var p=s.toString({parenthesis:"all"});p!==c&&(console.log("Applying",d,"produced",p),c=p)}R(s,n.context)}u=s.toString({parenthesis:"all"})}return s}function G(e,t,r){var i=e;if(e)for(var n=0;n<e.length;++n){var o=H(e[n],t,r);o!==e[n]&&(i===e&&(i=e.slice()),i[n]=o)}return i}function H(e,t,r){if(t.assuming){for(var i in t.assuming)for(var n in t.assuming[i])if(D(i,n,r)!==t.assuming[i][n])return e}var o=T(t.imposeContext,r),s=e;if(s instanceof S||s instanceof w){var u=G(s.args,t,r);u!==s.args&&((s=s.clone()).args=u)}else if(s instanceof A){if(s.content){var l=H(s.content,t,r);l!==s.content&&(s=new A(l))}}else if(s instanceof Z){var c=G(s.items,t,r);c!==s.items&&(s=new Z(c))}else if(s instanceof C){var h=s.object;s.object&&(h=H(s.object,t,r));var d=s.index;s.index&&(d=H(s.index,t,r)),(h!==s.object||d!==s.index)&&(s=new C(h,d))}else if(s instanceof E){var p=G(s.dimensions,t,r);p!==s.dimensions&&(s=new E(p))}else if(s instanceof N){var f=!1,m={};for(var v in s.properties)m[v]=H(s.properties[v],t,r),m[v]!==s.properties[v]&&(f=!0);f&&(s=new N(m))}var g=t.r,b=W(t.l,s,o)[0];if(!b&&t.expanded&&(g=t.expanded.r,b=W(t.expanded.l,s,o)[0]),b||!t.expandedNC1||(g=t.expandedNC1.r,(b=W(t.expandedNC1.l,s,o)[0])||(g=t.expandedNC2.r,b=W(t.expandedNC2.l,s,o)[0])),b){var y=s.implicit;s=g.clone(),y&&"implicit"in g&&(s.implicit=!0),s=s.transform(function(e){return e.isSymbolNode&&(0,a.nr)(b.placeholders,e.name)?b.placeholders[e.name].clone():e})}return t.repeat&&s!==e&&(s=H(s,t,r)),s}function V(e,t){var r,i=[];if(0===e.length||0===t.length)return i;for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)(r=function(e,t){var r={placeholders:{}};if(!e.placeholders&&!t.placeholders)return r;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var i in e.placeholders)if((0,a.nr)(e.placeholders,i)&&(r.placeholders[i]=e.placeholders[i],(0,a.nr)(t.placeholders,i)&&!function e(t,r){if(t instanceof _&&r instanceof _){if(!p(t.value,r.value))return!1}else if(t instanceof P&&r instanceof P){if(t.name!==r.name)return!1}else{if((!(t instanceof S)||!(r instanceof S))&&(!(t instanceof w)||!(r instanceof w)))return!1;if(t instanceof S){if(t.op!==r.op||t.fn!==r.fn)return!1}else if(t instanceof w&&t.name!==r.name)return!1;if(t.args.length!==r.args.length)return!1;for(var i=0;i<t.args.length;i++)if(!e(t.args[i],r.args[i]))return!1}return!0}(e.placeholders[i],t.placeholders[i])))return null;for(var n in t.placeholders)(0,a.nr)(t.placeholders,n)&&(r.placeholders[n]=t.placeholders[n]);return r}(e[n],t[o]))&&i.push(r);return i}function W(e,t,r,i){var n=[{placeholders:{}}];if(e instanceof S&&t instanceof S||e instanceof w&&t instanceof w){if(e instanceof S){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof w&&e.name!==t.name)return[];if(1===t.args.length&&1===e.args.length||!O(t,r)&&t.args.length===e.args.length||i){for(var s=[],a=0;a<e.args.length;a++){var u=W(e.args[a],t.args[a],r);if(0===u.length)break;s.push(u)}if(s.length!==e.args.length){if(!M(t,r)||1===e.args.length)return[];if(e.args.length>2)throw Error("permuting >2 commutative non-associative rule arguments not yet implemented");var l=W(e.args[0],t.args[1],r);if(0===l.length)return[];var c=W(e.args[1],t.args[0],r);if(0===c.length)return[];s=[l,c]}n=function(e){if(0===e.length)return e;for(var t=e.reduce(V),r=[],i={},n=0;n<t.length;n++){var o=JSON.stringify(t[n]);i[o]||(i[o]=!0,r.push(t[n]))}return r}(s)}else if(t.args.length>=2&&2===e.args.length){for(var h=function(e,t){var r,i,n=[],o=k(e);if(M(e,t))for(var s=0;s<e.args.length;s++)(i=e.args.slice(0)).splice(s,1),r=1===i.length?i[0]:o(i),n.push(o([e.args[s],r]));else for(var a=1;a<e.args.length;a++){var u=e.args[0];a>1&&(u=o(e.args.slice(0,a))),r=1===(i=e.args.slice(a)).length?i[0]:o(i),n.push(o([u,r]))}return n}(t,r),d=[],f=0;f<h.length;f++){var m=W(e,h[f],r,!0);d=d.concat(m)}return d}else if(!(e.args.length>2))return[];else throw Error("Unexpected non-binary associative function: "+e.toString())}else if(e instanceof P){if(0===e.name.length)throw Error("Symbol in rule has 0 length...!?");if(Y[e.name]){if(e.name!==t.name)return[]}else switch(e.name[1]>="a"&&e.name[1]<="z"?e.name.substring(0,2):e.name[0]){case"n":case"_p":n[0].placeholders[e.name]=t;break;case"c":case"cl":if(!(0,o.nu)(t))return[];n[0].placeholders[e.name]=t;break;case"v":if((0,o.nu)(t))return[];n[0].placeholders[e.name]=t;break;case"vl":if(!(0,o.FG)(t))return[];n[0].placeholders[e.name]=t;break;case"cd":if(!eS(t))return[];n[0].placeholders[e.name]=t;break;case"vd":if(eS(t))return[];n[0].placeholders[e.name]=t;break;case"ce":if(!eA(t))return[];n[0].placeholders[e.name]=t;break;case"ve":if(eA(t))return[];n[0].placeholders[e.name]=t;break;default:throw Error("Invalid symbol in rule: "+e.name)}}else if(!(e instanceof _))return[];else if(!p(e.value,t.value))return[];return n}return z}),eD="symbolicEqual",eM=(0,u.d5)(eD,["parse","simplify","typed","OperatorNode"],e=>{var{parse:t,simplify:r,typed:i,OperatorNode:n}=e;function s(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r(new n("-","subtract",[e,t]),{},i);return(0,o.nu)(s)&&!s.value}return i(eD,{"Node, Node":s,"Node, Node, Object":s})}),eO="leafCount",eT=(0,u.d5)(eO,["parse","typed"],e=>{var{parse:t,typed:r}=e;return r(eO,{Node:function(e){return function e(t){var r=0;return t.forEach(t=>{r+=e(t)}),r||1}(e)}})}),eB="parser",eF=(0,u.d5)(eB,["typed","Parser"],e=>{var{typed:t,Parser:r}=e;return t(eB,{"":function(){return new r}})}),eR=r(9737),ek="rationalize",eL=(0,u.d5)(ek,["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],e=>{var{config:t,typed:r,equal:i,isZero:n,add:o,subtract:s,multiply:a,divide:u,pow:l,parse:c,simplifyConstant:h,simplifyCore:d,simplify:p,fraction:f,bignumber:m,mathWithTransform:v,matrix:g,AccessorNode:b,ArrayNode:y,ConstantNode:x,FunctionNode:C,IndexNode:Z,ObjectNode:_,OperatorNode:w,SymbolNode:E,ParenthesisNode:N}=e;function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(u=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],l=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],c=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],(f={}).firstRules=u.concat(l,c),f.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],f.sucDivRules=c,f.firstRulesAgain=u.concat(l),f.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],f),n=(m=e,v=!0,g=i.firstRules,b=[],y=p(m,g,t,{exactFractions:!1}),C="+-*"+((v=!!v)?"/":""),!function e(t){var r=t.type;if("FunctionNode"===r)throw Error("There is an unsolved function call");if("OperatorNode"===r){if("^"===t.op){if("ConstantNode"===t.args[1].type&&(0,eR.U)(parseFloat(t.args[1].value)))e(t.args[0]);else throw Error("There is a non-integer exponent")}else{if(-1===C.indexOf(t.op))throw Error("Operator "+t.op+" invalid in polynomial expression");for(var i=0;i<t.args.length;i++)e(t.args[i])}}else if("SymbolNode"===r){var n=t.name;-1===b.indexOf(n)&&b.push(n)}else if("ParenthesisNode"===r)e(t.content);else if("ConstantNode"!==r)throw Error("type "+r+" is not allowed in polynomial expression")}(y),(Z={}).expression=y,Z.variables=b,Z),o=n.variables.length,s={exactFractions:!1},a={exactFractions:!0};if(e=n.expression,o>=1){e=function e(t,r,i){var n=t.type,o=arguments.length>1;if("OperatorNode"===n&&t.isBinary()){var s,a=!1;if("^"===t.op&&("ParenthesisNode"===t.args[0].type||"OperatorNode"===t.args[0].type)&&"ConstantNode"===t.args[1].type&&(a=(s=parseFloat(t.args[1].value))>=2&&(0,eR.U)(s)),a){if(s>2){var u=t.args[0],l=new w("^","pow",[t.args[0].cloneDeep(),new x(s-1)]);t=new w("*","multiply",[u,l])}else t=new w("*","multiply",[t.args[0],t.args[0].cloneDeep()]);o&&("content"===i?r.content=t:r.args[i]=t)}}if("ParenthesisNode"===n)e(t.content,t,"content");else if("ConstantNode"!==n&&"SymbolNode"!==n)for(var c=0;c<t.args.length;c++)e(t.args[c],t,c);if(!o)return t}(e);var u,l,c,f,m,v,g,b,y,C,Z,_,E,N=!0,S=!1;for(e=p(e,i.firstRules,{},s);e=p(e,N?i.distrDivRules:i.sucDivRules,{},a),N=!N,(E=e.toString())!==_;)S=!0,_=E;S&&(e=p(e,i.firstRulesAgain,{},s)),e=p(e,i.finalRules,{},s)}var P=[],D={};return("OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===o&&(e.args[0]=A(e.args[0],P),e.args[1]=A(e.args[1])),r&&(D.numerator=e.args[0],D.denominator=e.args[1])):(1===o&&(e=A(e,P)),r&&(D.numerator=e,D.denominator=null)),r)?(D.coefficients=P,D.variables=n.variables,D.expression=e,D):e}return r(ek,{Node:S,"Node, boolean":(e,t)=>S(e,{},t),"Node, Object":S,"Node, Object, boolean":S});function A(e,t){void 0===t&&(t=[]),t[0]=0;var r,i={};i.cte=1,i.oper="+",i.fire="";var n=0,o="";(function e(r,i,s){var a=r.type;if("FunctionNode"===a)throw Error("There is an unsolved function call");if("OperatorNode"===a){if(-1==="+-*^".indexOf(r.op))throw Error("Operator "+r.op+" invalid");if(null!==i&&(("unaryMinus"===r.fn||"pow"===r.fn)&&"add"!==i.fn&&"subtract"!==i.fn&&"multiply"!==i.fn||("subtract"===r.fn||"add"===r.fn||"multiply"===r.fn)&&"add"!==i.fn&&"subtract"!==i.fn||("subtract"===r.fn||"add"===r.fn||"unaryMinus"===r.fn)&&0!==s.noFil))throw Error("Invalid "+r.op+" placing");("^"===r.op||"*"===r.op)&&(s.fire=r.op);for(var u=0;u<r.args.length;u++)"unaryMinus"===r.fn&&(s.oper="-"),("+"===r.op||"subtract"===r.fn)&&(s.fire="",s.cte=1,s.oper=0===u?"+":r.op),s.noFil=u,e(r.args[u],r,s)}else if("SymbolNode"===a){if(r.name!==o&&""!==o)throw Error("There is more than one variable");if(o=r.name,null===i){t[1]=1;return}if("^"===i.op&&0!==s.noFil)throw Error("In power the variable should be the first parameter");if("*"===i.op&&1!==s.noFil)throw Error("In multiply the variable should be the second parameter");(""===s.fire||"*"===s.fire)&&(n<1&&(t[1]=0),t[1]+=s.cte*("+"===s.oper?1:-1),n=Math.max(1,n))}else if("ConstantNode"===a){var l=parseFloat(r.value);if(null===i){t[0]=l;return}if("^"===i.op){if(1!==s.noFil)throw Error("Constant cannot be powered");if(!(0,eR.U)(l)||l<=0)throw Error("Non-integer exponent is not allowed");for(var c=n+1;c<l;c++)t[c]=0;l>n&&(t[l]=0),t[l]+=s.cte*("+"===s.oper?1:-1),n=Math.max(l,n);return}s.cte=l,""===s.fire&&(t[0]+=s.cte*("+"===s.oper?1:-1))}else throw Error("Type "+a+" is not allowed")})(e,null,i),n=t.length-1;for(var s=!0,a=n;a>=0;a--)if(0!==t[a]){var u=new x(s?t[a]:Math.abs(t[a])),l=t[a]<0?"-":"+";if(a>0){var c=new E(o);a>1&&(c=new w("^","pow",[c,new x(a)])),u=-1===t[a]&&s?new w("-","unaryMinus",[c]):1===Math.abs(t[a])?c:new w("*","multiply",[u,c])}r=s?u:"+"===l?new w("+","add",[r,u]):new w("-","subtract",[r,u]),s=!1}return s?new x(0):r}}),eI="derivative",ej=(0,u.d5)(eI,["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],e=>{var{typed:t,config:r,parse:i,simplify:n,equal:s,isZero:a,numeric:u,ConstantNode:l,FunctionNode:c,OperatorNode:h,ParenthesisNode:d,SymbolNode:p}=e;function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{simplify:!0},i={};g(i,e,t.name);var o=b(e,i);return r.simplify?n(o):o}t.addConversion({from:"identifier",to:"SymbolNode",convert:i});var m=t(eI,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f});t.removeConversion({from:"identifier",to:"SymbolNode",convert:i}),m._simplify=!0,m.toTex=function(e){return v.apply(null,e.args)};var v=t("_derivTex",{"Node, SymbolNode":function(e,t){return(0,o.nu)(e)&&"string"===(0,o.kM)(e.value)?v(i(e.value).toString(),t.toString(),1):v(e.toTex(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===(0,o.kM)(t.value))return v(e,i(t.value));throw Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,r){return v(e.toString(),t.name,r.value)},"string, string, number":function(e,t,r){return(1===r?"{d\\over d"+t+"}":"{d^{"+r+"}\\over d"+t+"^{"+r+"}}")+"\\left[".concat(e,"\\right]")}}),g=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,r){return t.name!==r&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,r){return g(e,t.content,r)},"Object, FunctionAssignmentNode, string":function(e,t,r){return -1===t.params.indexOf(r)?(e[t]=!0,!0):g(e,t.expr,r)},"Object, FunctionNode | OperatorNode, string":function(e,t,r){if(t.args.length>0){for(var i=g(e,t.args[0],r),n=1;n<t.args.length;++n)i=g(e,t.args[n],r)&&i;if(i)return e[t]=!0,!0}return!1}}),b=t("_derivative",{"ConstantNode, Object":function(e){return y(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?y(0):y(1)},"ParenthesisNode, Object":function(e,t){return new d(b(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?y(0):b(e.expr,t)},"FunctionNode, Object":function(e,t){if(void 0!==t[e])return y(0);var r,i,n,o,s=e.args[0],a=!1,u=!1;switch(e.name){case"cbrt":a=!0,i=new h("*","multiply",[y(3),new h("^","pow",[s,new h("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)a=!0,i=new h("*","multiply",[y(2),new c("sqrt",[s])]);else if(2===e.args.length)return t[r=new h("/","divide",[y(1),e.args[1]])]=t[e.args[1]],b(new h("^","pow",[s,r]),t);break;case"log10":r=y(10);case"log":if(r||1!==e.args.length){if(1===e.args.length&&r||2===e.args.length&&void 0!==t[e.args[1]])i=new h("*","multiply",[s.clone(),new c("log",[r||e.args[1]])]),a=!0;else if(2===e.args.length)return b(new h("/","divide",[new c("log",[s]),new c("log",[e.args[1]])]),t)}else i=s.clone(),a=!0;break;case"pow":if(2===e.args.length)return t[r]=t[e.args[1]],b(new h("^","pow",[s,e.args[1]]),t);break;case"exp":i=new c("exp",[s.clone()]);break;case"sin":i=new c("cos",[s.clone()]);break;case"cos":i=new h("-","unaryMinus",[new c("sin",[s.clone()])]);break;case"tan":i=new h("^","pow",[new c("sec",[s.clone()]),y(2)]);break;case"sec":i=new h("*","multiply",[e,new c("tan",[s.clone()])]);break;case"csc":u=!0,i=new h("*","multiply",[e,new c("cot",[s.clone()])]);break;case"cot":u=!0,i=new h("^","pow",[new c("csc",[s.clone()]),y(2)]);break;case"asin":a=!0,i=new c("sqrt",[new h("-","subtract",[y(1),new h("^","pow",[s.clone(),y(2)])])]);break;case"acos":a=!0,u=!0,i=new c("sqrt",[new h("-","subtract",[y(1),new h("^","pow",[s.clone(),y(2)])])]);break;case"atan":a=!0,i=new h("+","add",[new h("^","pow",[s.clone(),y(2)]),y(1)]);break;case"asec":a=!0,i=new h("*","multiply",[new c("abs",[s.clone()]),new c("sqrt",[new h("-","subtract",[new h("^","pow",[s.clone(),y(2)]),y(1)])])]);break;case"acsc":a=!0,u=!0,i=new h("*","multiply",[new c("abs",[s.clone()]),new c("sqrt",[new h("-","subtract",[new h("^","pow",[s.clone(),y(2)]),y(1)])])]);break;case"acot":a=!0,u=!0,i=new h("+","add",[new h("^","pow",[s.clone(),y(2)]),y(1)]);break;case"sinh":i=new c("cosh",[s.clone()]);break;case"cosh":i=new c("sinh",[s.clone()]);break;case"tanh":i=new h("^","pow",[new c("sech",[s.clone()]),y(2)]);break;case"sech":u=!0,i=new h("*","multiply",[e,new c("tanh",[s.clone()])]);break;case"csch":u=!0,i=new h("*","multiply",[e,new c("coth",[s.clone()])]);break;case"coth":u=!0,i=new h("^","pow",[new c("csch",[s.clone()]),y(2)]);break;case"asinh":a=!0,i=new c("sqrt",[new h("+","add",[new h("^","pow",[s.clone(),y(2)]),y(1)])]);break;case"acosh":a=!0,i=new c("sqrt",[new h("-","subtract",[new h("^","pow",[s.clone(),y(2)]),y(1)])]);break;case"atanh":a=!0,i=new h("-","subtract",[y(1),new h("^","pow",[s.clone(),y(2)])]);break;case"asech":a=!0,u=!0,i=new h("*","multiply",[s.clone(),new c("sqrt",[new h("-","subtract",[y(1),new h("^","pow",[s.clone(),y(2)])])])]);break;case"acsch":a=!0,u=!0,i=new h("*","multiply",[new c("abs",[s.clone()]),new c("sqrt",[new h("+","add",[new h("^","pow",[s.clone(),y(2)]),y(1)])])]);break;case"acoth":a=!0,u=!0,i=new h("-","subtract",[y(1),new h("^","pow",[s.clone(),y(2)])]);break;case"abs":i=new h("/","divide",[new c(new p("abs"),[s.clone()]),s.clone()]);break;default:throw Error('Cannot process function "'+e.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}a?(n="/",o="divide"):(n="*",o="multiply");var l=b(s,t);return u&&(l=new h("-","unaryMinus",[l])),new h(n,o,[l,i])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return y(0);if("+"===e.op)return new h(e.op,e.fn,e.args.map(function(e){return b(e,t)}));if("-"===e.op){if(e.isUnary())return new h(e.op,e.fn,[b(e.args[0],t)]);if(e.isBinary())return new h(e.op,e.fn,[b(e.args[0],t),b(e.args[1],t)])}if("*"===e.op){var r=e.args.filter(function(e){return void 0!==t[e]});if(r.length>0){var i=e.args.filter(function(e){return void 0===t[e]}),n=1===i.length?i[0]:new h("*","multiply",i);return new h("*","multiply",r.concat(b(n,t)))}return new h("+","add",e.args.map(function(r){return new h("*","multiply",e.args.map(function(e){return e===r?b(e,t):e.clone()}))}))}if("/"===e.op&&e.isBinary()){var u=e.args[0],l=e.args[1];return void 0!==t[l]?new h("/","divide",[b(u,t),l]):void 0!==t[u]?new h("*","multiply",[new h("-","unaryMinus",[u]),new h("/","divide",[b(l,t),new h("^","pow",[l.clone(),y(2)])])]):new h("/","divide",[new h("-","subtract",[new h("*","multiply",[b(u,t),l.clone()]),new h("*","multiply",[u.clone(),b(l,t)])]),new h("^","pow",[l.clone(),y(2)])])}if("^"===e.op&&e.isBinary()){var d=e.args[0],p=e.args[1];if(void 0!==t[d])return(0,o.nu)(d)&&(a(d.value)||s(d.value,1))?y(0):new h("*","multiply",[e,new h("*","multiply",[new c("log",[d.clone()]),b(p.clone(),t)])]);if(void 0!==t[p]){if((0,o.nu)(p)){if(a(p.value))return y(0);if(s(p.value,1))return b(d,t)}var f=new h("^","pow",[d.clone(),new h("-","subtract",[p,y(1)])]);return new h("*","multiply",[p.clone(),new h("*","multiply",[b(d,t),f])])}return new h("*","multiply",[new h("^","pow",[d.clone(),p.clone()]),new h("+","add",[new h("*","multiply",[b(d,t),new h("/","divide",[p.clone(),d.clone()])]),new h("*","multiply",[b(p,t),new c("log",[d.clone()])])])])}throw Error('Cannot process operator "'+e.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(e,t){return new l(u(e,t||r.number))}return m}),ez={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},eU={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},eY={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:ez,E:ez,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:eU,PI:eU,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},leafCount:{name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},polynomialRoot:{name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},resolve:{name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstant:{name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCore:{name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},symbolicEqual:{name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},invmod:{name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinv:{name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},matrixFromFunction:{name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRows:{name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},matrixFromColumns:{name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fft:{name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifft:{name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},sylvester:{name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schur:{name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyap:{name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},solveODE:{name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},lgamma:{name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tf:{name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqz:{name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zeta:{name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},cumsum:{name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corr:{name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},print:{name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]}},eX="help",eJ=(0,u.d5)(eX,["typed","mathWithTransform","Help"],e=>{var{typed:t,mathWithTransform:r,Help:i}=e;return t(eX,{any:function(e){var t,n=e;if("string"!=typeof e){for(t in r)if((0,a.nr)(r,t)&&e===r[t]){n=t;break}}var o=(0,d.YF)(eY,n);if(!o)throw Error('No documentation found on "'+("function"==typeof n?n.name:n)+'"');return new i(o)}})}),eq=r(2992);function eG(e,t,r){var i=e.filter(function(e){return(0,o.FG)(e)&&!(e.name in t)&&!r.has(e.name)})[0];if(!i)throw Error('No undefined variable found in inline expression "'+e+'"');var n=i.name,s=new Map,a=new l.A3(r,s,new Set([n])),u=e.compile();return function(e){return s.set(n,e),u.evaluate(a)}}var eH=(0,u.d5)("filter",["typed"],e=>{var{typed:t}=e;function r(e,t,r){var n,s;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(s=(0,o.FG)(e[1])||(0,o.l7)(e[1])?e[1].compile().evaluate(r):eG(e[1],t,r)),i(n,s)}r.rawArgs=!0;var i=t("filter",{"Array, function":eV,"Matrix, function":function(e,t){return e.create(eV(e.toArray(),t))},"Array, RegExp":v.U_,"Matrix, RegExp":function(e,t){return e.create((0,v.U_)(e.toArray(),t))}});return r},{isTransformFunction:!0});function eV(e,t){return(0,v.hX)(e,function(e,r,i){return(0,eq.i)(t,e,[r+1],i,"filter")})}var eW=(0,u.d5)("forEach",["typed"],e=>{var{typed:t}=e;function r(e,t,r){var n,s;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(s=(0,o.FG)(e[1])||(0,o.l7)(e[1])?e[1].compile().evaluate(r):eG(e[1],t,r)),i(n,s)}r.rawArgs=!0;var i=t("forEach",{"Array | Matrix, function":function(e,t){!function r(i,n){if(!Array.isArray(i))return(0,eq.i)(t,i,n,e,"forEach");(0,v.Ed)(i,function(e,t){r(e,n.concat(t+1))})}(e.valueOf(),[])}});return r},{isTransformFunction:!0}),e$=(0,u.d5)("map",["typed"],e=>{var{typed:t}=e;function r(e,t,r){var n,s;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(s=(0,o.FG)(e[1])||(0,o.l7)(e[1])?e[1].compile().evaluate(r):eG(e[1],t,r)),i(n,s)}r.rawArgs=!0;var i=t("map",{"Array, function":function(e,t){return eQ(e,t,e)},"Matrix, function":function(e,t){return e.create(eQ(e.valueOf(),t,e))}});return r},{isTransformFunction:!0});function eQ(e,t,r){return function e(i,n){return Array.isArray(i)?(0,v.UI)(i,function(t,r){return e(t,n.concat(r+1))}):(0,eq.i)(t,i,n,r,"map")}(e,[])}var eK=r(131),e0=(0,u.d5)("apply",["typed","isInteger"],e=>{var{typed:t,isInteger:r}=e,i=(0,eK.j)({typed:t,isInteger:r});return t("apply",{"...any":function(e){var t=e[1];(0,o.hj)(t)?e[1]=t-1:(0,o.l9)(t)&&(e[1]=t.minus(1));try{return i.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),e1=r(1845),e2=(0,u.d5)("or",["typed","matrix","equalScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,DenseMatrix:n,concat:s}=e,a=(0,e1.Z)({typed:t,matrix:r,equalScalar:i,DenseMatrix:n,concat:s});function u(e,t,r){var i=e[0].compile().evaluate(r);return!!(!(0,o.uZ)(i)&&a(i,!1))||a(i,e[1].compile().evaluate(r))}return u.rawArgs=!0,u},{isTransformFunction:!0}),e3=r(6949),e5=(0,u.d5)("and",["typed","matrix","zeros","add","equalScalar","not","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,not:s,concat:a}=e,u=(0,e3.I)({typed:t,matrix:r,equalScalar:i,zeros:n,not:s,concat:a});function l(e,t,r){var i=e[0].compile().evaluate(r);return!!((0,o.uZ)(i)||u(i,!0))&&u(i,e[1].compile().evaluate(r))}return l.rawArgs=!0,l},{isTransformFunction:!0}),e4=r(9002),e8=(0,u.d5)("concat",["typed","matrix","isInteger"],e=>{var{typed:t,matrix:r,isInteger:i}=e,n=(0,e4.k)({typed:t,matrix:r,isInteger:i});return t("concat",{"...any":function(e){var t=e.length-1,r=e[t];(0,o.hj)(r)?e[t]=r-1:(0,o.l9)(r)&&(e[t]=r.minus(1));try{return n.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),e6=r(3117);function e9(e){if(2===e.length&&(0,o.uZ)(e[0])){var t=(e=e.slice())[1];(0,o.hj)(t)?e[1]=t-1:(0,o.l9)(t)&&(e[1]=t.minus(1))}return e}var e7=(0,u.d5)("max",["typed","config","numeric","larger"],e=>{var{typed:t,config:r,numeric:i,larger:n}=e,o=(0,e6.J)({typed:t,config:r,numeric:i,larger:n});return t("max",{"...any":function(e){e=e9(e);try{return o.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),te=r(8289),tt=r(732),tr="print",ti=(0,u.d5)(tr,["typed","matrix","zeros","add"],e=>{var{typed:t,matrix:r,zeros:i,add:n}=e,o=(0,te.P)({typed:t,matrix:r,zeros:i,add:n});return t(tr,{"string, Object | Array":function(e,t){return o(s(e),t)},"string, Object | Array, number | Object":function(e,t,r){return o(s(e),t,r)}});function s(e){return e.replace(tt.k,e=>"$"+e.slice(1).split(".").map(function(e){return!isNaN(e)&&e.length>0?parseInt(e)-1:e}).join("."))}},{isTransformFunction:!0}),tn=r(2614),to=(0,u.d5)("bitAnd",["typed","matrix","zeros","add","equalScalar","not","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,not:s,concat:a}=e,u=(0,tn.i)({typed:t,matrix:r,equalScalar:i,zeros:n,not:s,concat:a});function l(e,t,r){var i=e[0].compile().evaluate(r);if(!(0,o.uZ)(i)){if(isNaN(i))return NaN;if(0===i||!1===i)return 0}return u(i,e[1].compile().evaluate(r))}return l.rawArgs=!0,l},{isTransformFunction:!0}),ts=r(3294),ta="diff",tu=(0,u.d5)(ta,["typed","matrix","subtract","number","bignumber"],e=>{var{typed:t,matrix:r,subtract:i,number:n,bignumber:o}=e,s=(0,ts.J)({typed:t,matrix:r,subtract:i,number:n,bignumber:o});return t(ta,{"...any":function(e){e=e9(e);try{return s.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tl=r(7543),tc=(0,u.d5)("min",["typed","config","numeric","smaller"],e=>{var{typed:t,config:r,numeric:i,smaller:n}=e,o=(0,tl.D)({typed:t,config:r,numeric:i,smaller:n});return t("min",{"...any":function(e){e=e9(e);try{return o.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),th=r(7061),td=(0,u.d5)("subset",["typed","matrix","zeros","add"],e=>{var{typed:t,matrix:r,zeros:i,add:n}=e,o=(0,th.q)({typed:t,matrix:r,zeros:i,add:n});return t("subset",{"...any":function(e){try{return o.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tp=r(145),tf=(0,u.d5)("bitOr",["typed","matrix","equalScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,DenseMatrix:n,concat:s}=e,a=(0,tp.j)({typed:t,matrix:r,equalScalar:i,DenseMatrix:n,concat:s});function u(e,t,r){var i=e[0].compile().evaluate(r);if(!(0,o.uZ)(i)){if(isNaN(i))return NaN;if(-1===i)return -1;if(!0===i)return 1}return a(i,e[1].compile().evaluate(r))}return u.rawArgs=!0,u},{isTransformFunction:!0}),tm=r(6363),tv="cumsum",tg=(0,u.d5)(tv,["typed","add","unaryPlus"],e=>{var{typed:t,add:r,unaryPlus:i}=e,n=(0,tm.o)({typed:t,add:r,unaryPlus:i});return t(tv,{"...any":function(e){if(2===e.length&&(0,o.uZ)(e[0])){var t=e[1];(0,o.hj)(t)?e[1]=t-1:(0,o.l9)(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tb=(0,u.d5)("index",["Index","getMatrixDataType"],e=>{var{Index:t,getMatrixDataType:r}=e;return function(){for(var e=[],i=0,n=arguments.length;i<n;i++){var s=arguments[i];if((0,o.bR)(s))s.start--,s.end-=s.step>0?0:2;else if(s&&!0===s.isSet)s=s.map(function(e){return e-1});else if((0,o.kJ)(s)||(0,o.SW)(s))"boolean"!==r(s)&&(s=s.map(function(e){return e-1}));else if((0,o.hj)(s))s--;else if((0,o.l9)(s))s=s.toNumber()-1;else if("string"==typeof s);else throw TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[i]=s}var a=new t;return t.apply(a,e),a}},{isTransformFunction:!0}),ty=r(2296),tx=(0,u.d5)("sum",["typed","config","add","numeric"],e=>{var{typed:t,config:r,add:i,numeric:n}=e,o=(0,ty.O)({typed:t,config:r,add:i,numeric:n});return t("sum",{"...any":function(e){e=e9(e);try{return o.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tC=r(451),tZ=(0,u.d5)("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],e=>{var{typed:t,config:r,matrix:i,bignumber:n,smaller:o,smallerEq:s,larger:a,largerEq:u,add:l,isPositive:c}=e,h=(0,tC.M)({typed:t,config:r,matrix:i,bignumber:n,smaller:o,smallerEq:s,larger:a,largerEq:u,add:l,isPositive:c});return t("range",{"...any":function(e){var t=e.length-1;return"boolean"!=typeof e[t]&&e.push(!0),h.apply(null,e)}})},{isTransformFunction:!0}),t_=r(8481),tw=(0,u.d5)("row",["typed","Index","matrix","range"],e=>{var{typed:t,Index:r,matrix:i,range:n}=e,s=(0,t_.v)({typed:t,Index:r,matrix:i,range:n});return t("row",{"...any":function(e){var t=e.length-1,r=e[t];(0,o.hj)(r)&&(e[t]=r-1);try{return s.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tE=r(5052),tN=(0,u.d5)("column",["typed","Index","matrix","range"],e=>{var{typed:t,Index:r,matrix:i,range:n}=e,s=(0,tE.w)({typed:t,Index:r,matrix:i,range:n});return t("column",{"...any":function(e){var t=e.length-1,r=e[t];(0,o.hj)(r)&&(e[t]=r-1);try{return s.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tS=r(5222),tA=(0,u.d5)("mean",["typed","add","divide"],e=>{var{typed:t,add:r,divide:i}=e,n=(0,tS.Q)({typed:t,add:r,divide:i});return t("mean",{"...any":function(e){e=e9(e);try{return n.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tP=r(253),tD=(0,u.d5)("quantileSeq",["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],e=>{var{typed:t,bignumber:r,add:i,subtract:n,divide:o,multiply:s,partitionSelect:a,compare:u,isInteger:l,smaller:c,smallerEq:h,larger:d}=e,p=(0,tP.y)({typed:t,bignumber:r,add:i,subtract:n,divide:o,multiply:s,partitionSelect:a,compare:u,isInteger:l,smaller:c,smallerEq:h,larger:d});return t("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(e,t,r)=>p(e,t,f(r)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(e,t,r,i)=>p(e,t,r,f(i)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(e,t,r)=>p(e,t,f(r)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(e,t,r,i)=>p(e,t,r,f(i))});function f(e){return e9([[],e])[1]}},{isTransformFunction:!0}),tM=r(2023),tO="variance",tT=(0,u.d5)(tO,["typed","add","subtract","multiply","divide","apply","isNaN"],e=>{var{typed:t,add:r,subtract:i,multiply:n,divide:o,apply:s,isNaN:a}=e,u=(0,tM.F)({typed:t,add:r,subtract:i,multiply:n,divide:o,apply:s,isNaN:a});return t(tO,{"...any":function(e){e=e9(e);try{return u.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tB=r(1404),tF=(0,u.d5)("std",["typed","map","sqrt","variance"],e=>{var{typed:t,map:r,sqrt:i,variance:n}=e,o=(0,tB.X)({typed:t,map:r,sqrt:i,variance:n});return t("std",{"...any":function(e){e=e9(e);try{return o.apply(null,e)}catch(e){throw et(e)}}})},{isTransformFunction:!0}),tR=r(8183),tk={},tL={},tI={},tj=c({mathWithTransform:tL}),tz=m({Node:tj}),tU=M({Node:tj}),tY=T({Node:tj}),tX=F({Node:tj}),tJ=k({Node:tj}),tq=I({Node:tj,ResultSet:tR.Z0z}),tG=z({Node:tj}),tH=Y({Node:tj}),tV=J({Node:tj}),tW=q({classes:tI}),t$=G({math:tk,typed:tR.Gzl}),tQ=V({Node:tj,typed:tR.Gzl}),tK=$({Chain:t$,typed:tR.Gzl}),t0=K({Node:tj,size:tR.dpJ}),t1=en({Node:tj,subset:tR.P9L}),t2=es({matrix:tR.pIu,Node:tj,subset:tR.P9L}),t3=ea({Unit:tR.fbc,Node:tj,math:tk}),t5=el({Node:tj,SymbolNode:t3,math:tk}),t4=ed({AccessorNode:t1,ArrayNode:tJ,AssignmentNode:t2,BlockNode:tq,ConditionalNode:tG,ConstantNode:tH,FunctionAssignmentNode:tQ,FunctionNode:t5,IndexNode:t0,ObjectNode:tz,OperatorNode:tU,ParenthesisNode:tY,RangeNode:tV,RelationalNode:tX,SymbolNode:t3,config:n.v,numeric:tR.uRn,typed:tR.Gzl}),t8=ep({ConstantNode:tH,FunctionNode:t5,OperatorNode:tU,ParenthesisNode:tY,parse:t4,typed:tR.Gzl}),t6=eb({bignumber:tR.edS,fraction:tR.Pj$,AccessorNode:t1,ArrayNode:tJ,ConstantNode:tH,FunctionNode:t5,IndexNode:t0,ObjectNode:tz,OperatorNode:tU,SymbolNode:t3,config:n.v,mathWithTransform:tL,matrix:tR.pIu,typed:tR.Gzl}),t9=ex({parse:t4,typed:tR.Gzl}),t7=eZ({AccessorNode:t1,ArrayNode:tJ,ConstantNode:tH,FunctionNode:t5,IndexNode:t0,ObjectNode:tz,OperatorNode:tU,ParenthesisNode:tY,SymbolNode:t3,add:tR.IHx,divide:tR.csF,equal:tR.DgJ,isZero:tR.Fr9,multiply:tR.JpY,parse:t4,pow:tR.sQ3,subtract:tR.$XF,typed:tR.Gzl}),re=ew({parse:t4,typed:tR.Gzl}),rt=eE({evaluate:re}),rr=eN({evaluate:re}),ri=eP({bignumber:tR.edS,fraction:tR.Pj$,AccessorNode:t1,ArrayNode:tJ,ConstantNode:tH,FunctionNode:t5,IndexNode:t0,ObjectNode:tz,OperatorNode:tU,ParenthesisNode:tY,SymbolNode:t3,add:tR.IHx,config:n.v,divide:tR.csF,equal:tR.DgJ,isZero:tR.Fr9,mathWithTransform:tL,matrix:tR.pIu,multiply:tR.JpY,parse:t4,pow:tR.sQ3,resolve:t8,simplifyConstant:t6,simplifyCore:t7,subtract:tR.$XF,typed:tR.Gzl}),rn=eM({OperatorNode:tU,parse:t4,simplify:ri,typed:tR.Gzl}),ro=eT({parse:t4,typed:tR.Gzl}),rs=eF({Parser:rr,typed:tR.Gzl}),ra=eL({bignumber:tR.edS,fraction:tR.Pj$,AccessorNode:t1,ArrayNode:tJ,ConstantNode:tH,FunctionNode:t5,IndexNode:t0,ObjectNode:tz,OperatorNode:tU,ParenthesisNode:tY,SymbolNode:t3,add:tR.IHx,config:n.v,divide:tR.csF,equal:tR.DgJ,isZero:tR.Fr9,mathWithTransform:tL,matrix:tR.pIu,multiply:tR.JpY,parse:t4,pow:tR.sQ3,simplify:ri,simplifyConstant:t6,simplifyCore:t7,subtract:tR.$XF,typed:tR.Gzl}),ru=ej({ConstantNode:tH,FunctionNode:t5,OperatorNode:tU,ParenthesisNode:tY,SymbolNode:t3,config:n.v,equal:tR.DgJ,isZero:tR.Fr9,numeric:tR.uRn,parse:t4,simplify:ri,typed:tR.Gzl}),rl=eJ({Help:rt,mathWithTransform:tL,typed:tR.Gzl});(0,i.Z)(tk,{e:tR.e,false:tR.WJv,fineStructure:tR.Oyo,i:tR.i,Infinity:tR.OvO,LN10:tR.cw7,LOG10E:tR.doM,NaN:tR.xOA,null:tR.OSG,phi:tR.Skb,SQRT1_2:tR.PNl,sackurTetrode:tR.KO_,tau:tR.BZ_,true:tR.wcc,E:tR.e,version:tR.i83,efimovFactor:tR.dvW,LN2:tR.bZs,pi:tR.pi,replacer:tR.PHU,reviver:tW,SQRT2:tR.vNo,typed:tR.Gzl,unaryPlus:tR.uKN,PI:tR.pi,weakMixingAngle:tR.Uud,abs:tR.WnP,acos:tR.Khb,acot:tR.C6L,acsc:tR.rcO,addScalar:tR.scv,arg:tR.R91,asech:tR.lo8,asinh:tR.VfV,atan:tR.z4N,atanh:tR.C80,bignumber:tR.edS,bitNot:tR.Pfe,boolean:tR.O72,clone:tR.d9v,combinations:tR.BjO,complex:tR.PYB,conj:tR.ruJ,cos:tR.mCk,cot:tR.oHe,csc:tR.QBQ,cube:tR.kOm,equalScalar:tR.kuq,erf:tR.qNN,exp:tR.Qqt,expm1:tR.t$B,filter:tR.hXT,forEach:tR.Ed_,format:tR.WUZ,getMatrixDataType:tR.mOi,hex:tR.$v1,im:tR.im,isInteger:tR.UaK,isNegative:tR.nMy,isPositive:tR.xPR,isZero:tR.Fr9,LOG2E:tR.wwJ,lgamma:tR.KF1,log10:tR.mvw,log2:tR.k3Q,map:tR.UID,multiplyScalar:tR.cfl,not:tR.ffD,number:tR.Rxh,oct:tR.jfK,pickRandom:tR.sDj,print:tR.S0v,random:tR.MXc,re:tR.re,sec:tR.BEc,sign:tR.Xxe,sin:tR.O$l,splitUnit:tR.jLI,square:tR.h62,string:tR.Z_8,subtractScalar:tR.Hxc,tan:tR.ORZ,typeOf:tR.kM2,acosh:tR.__u,acsch:tR.KLC,apply:tR.nnj,asec:tR.PUJ,bin:tR.Ly_,chain:tK,combinationsWithRep:tR.d4C,cosh:tR.f9Y,csch:tR.RhL,isNaN:tR.i2d,isPrime:tR.e47,randomInt:tR.Iyf,sech:tR.Fbd,sinh:tR.R_K,sparse:tR.rVs,sqrt:tR._b3,tanh:tR.AEp,unaryMinus:tR.T8F,acoth:tR.trc,coth:tR.h6M,fraction:tR.Pj$,isNumeric:tR.kEn,matrix:tR.pIu,matrixFromFunction:tR.ZcA,mode:tR.xJM,numeric:tR.uRn,prod:tR.WVs,reshape:tR.XLQ,size:tR.dpJ,squeeze:tR.L9e,transpose:tR.p4s,xgcd:tR.NpV,zeros:tR.lls,asin:tR.ZRM,cbrt:tR.eKn,concat:tR.zoF,count:tR.QXW,ctranspose:tR.NZC,diag:tR.Ka3,divideScalar:tR.QgA,dotDivide:tR.yVo,equal:tR.DgJ,flatten:tR.xHg,hasNumericValue:tR.Hdk,identity:tR.yRu,kron:tR.JvE,largerEq:tR.Cr4,leftShift:tR.w57,lsolve:tR.wtJ,matrixFromColumns:tR.ndY,nthRoot:tR.C7f,ones:tR.iUs,qr:tR.qr,resize:tR.SIr,rightArithShift:tR.nq0,round:tR.NMM,smaller:tR.Nyh,subtract:tR.$XF,to:tR.to,unequal:tR.KPr,usolve:tR.LDk,xor:tR.dlQ,add:tR.IHx,atan2:tR.fvJ,bitAnd:tR.hx9,bitOr:tR.wKT,bitXor:tR.nNS,catalan:tR.tjo,compare:tR.quX,compareText:tR.cdM,cumsum:tR.zbp,deepEqual:tR.vZr,diff:tR.Hgg,distance:tR.TE$,dot:tR.AKD,equalText:tR.eZD,floor:tR.GWj,gcd:tR.thl,hypot:tR._mT,larger:tR.TWx,log:tR.cM7,lsolveAll:tR.ER9,matrixFromRows:tR.lPE,min:tR.VV$,mod:tR.wQq,multiply:tR.JpY,nthRoots:tR.$$R,or:tR.or,partitionSelect:tR.JeQ,rightLogShift:tR.LdX,slu:tR.cEy,subset:tR.P9L,sum:tR.Smz,trace:tR.g49,usolveAll:tR.bJ2,zpk2tf:tR.kjZ,ceil:tR.mDi,compareNatural:tR.rn1,composition:tR.ift,cross:tR.kCc,det:tR.Q8I,dotMultiply:tR.iOk,fix:tR.zG0,index:tR.KzB,intersect:tR.wfr,invmod:tR.QNt,lcm:tR.uqG,log1p:tR.Krr,max:tR.Fp7,setCartesian:tR.$ZK,setDistinct:tR.Z41,setIsSubset:tR.TT1,setPowerset:tR.ljT,smallerEq:tR.Sq_,sort:tR.DYV,and:tR.xDy,range:tR.w6H,row:tR.O7B,setDifference:tR.TVT,setMultiplicity:tR.oNG,setSymDifference:tR.V4s,column:tR.$QP,inv:tR.JBn,lup:tR.xly,pinv:tR.mvk,pow:tR.sQ3,setIntersect:tR.ff9,setUnion:tR.uyX,sqrtm:tR.jXX,vacuumImpedance:tR.tnB,wienDisplacement:tR.bGh,atomicMass:tR.uzo,bohrMagneton:tR.Cl$,boltzmann:tR.Rhk,conductanceQuantum:tR.xk2,coulomb:tR.JPg,deuteronMass:tR.dEt,dotPow:tR.qgo,electricConstant:tR.dXo,elementaryCharge:tR.iMQ,expm:tR.Ege,faraday:tR.Am2,fft:tR.kp_,gamma:tR.yiU,gravitationConstant:tR.H9q,hartreeEnergy:tR.HQL,ifft:tR.Sxn,klitzing:tR.$$$,loschmidt:tR.PUn,magneticConstant:tR.$nU,molarMass:tR.ak$,molarPlanckConstant:tR.kEb,neutronMass:tR.li8,nuclearMagneton:tR._A2,planckCharge:tR.JaK,planckLength:tR.gil,planckTemperature:tR.XAT,protonMass:tR.CxM,quantumOfCirculation:tR.TYM,reducedPlanckConstant:tR.vAu,rydberg:tR.rMB,secondRadiation:tR.ahj,speedOfLight:tR.bl5,stefanBoltzmann:tR.yO5,thomsonCrossSection:tR.bej,avogadro:tR._vz,bohrRadius:tR.tUn,createUnit:tR.JP7,divide:tR.csF,electronMass:tR._G2,factorial:tR.bLN,firstRadiation:tR.Vvs,gravity:tR.QXX,inverseConductanceQuantum:tR.WSk,lusolve:tR.DU,magneticFluxQuantum:tR.oLv,molarMassC12:tR.esS,multinomial:tR.SJ_,parse:t4,permutations:tR.DW7,planckMass:tR.kc5,polynomialRoot:tR.Qg6,resolve:t8,setSize:tR.yk3,simplifyConstant:t6,solveODE:tR.bBp,stirlingS2:tR.bAb,unit:tR.bfT,bellNumbers:tR.O7j,compile:t9,eigs:tR.Gq_,fermiCoupling:tR.cIy,gasConstant:tR.eOQ,kldivergence:tR.mYz,mean:tR.J69,molarVolume:tR.n4B,planckConstant:tR.whQ,quantileSeq:tR.pAO,simplifyCore:t7,variance:tR.CAK,classicalElectronRadius:tR._fe,evaluate:re,median:tR.C2o,simplify:ri,symbolicEqual:rn,corr:tR.O1K,freqz:tR.Ltn,leafCount:ro,mad:tR.UFs,parser:rs,rationalize:ra,std:tR.qoR,zeta:tR.Xcd,derivative:ru,norm:tR.KOy,rotationMatrix:tR.k8z,help:rl,planckTime:tR.oTb,schur:tR.U5j,rotate:tR.U1s,sylvester:tR.rew,lyap:tR.t6m,config:n.v}),(0,i.Z)(tL,tk,{filter:eH({typed:tR.Gzl}),forEach:eW({typed:tR.Gzl}),map:e$({typed:tR.Gzl}),apply:e0({isInteger:tR.UaK,typed:tR.Gzl}),or:e2({DenseMatrix:tR.JfM,concat:tR.zoF,equalScalar:tR.kuq,matrix:tR.pIu,typed:tR.Gzl}),and:e5({add:tR.IHx,concat:tR.zoF,equalScalar:tR.kuq,matrix:tR.pIu,not:tR.ffD,typed:tR.Gzl,zeros:tR.lls}),concat:e8({isInteger:tR.UaK,matrix:tR.pIu,typed:tR.Gzl}),max:e7({config:n.v,larger:tR.TWx,numeric:tR.uRn,typed:tR.Gzl}),print:ti({add:tR.IHx,matrix:tR.pIu,typed:tR.Gzl,zeros:tR.lls}),bitAnd:to({add:tR.IHx,concat:tR.zoF,equalScalar:tR.kuq,matrix:tR.pIu,not:tR.ffD,typed:tR.Gzl,zeros:tR.lls}),diff:tu({bignumber:tR.edS,matrix:tR.pIu,number:tR.Rxh,subtract:tR.$XF,typed:tR.Gzl}),min:tc({config:n.v,numeric:tR.uRn,smaller:tR.Nyh,typed:tR.Gzl}),subset:td({add:tR.IHx,matrix:tR.pIu,typed:tR.Gzl,zeros:tR.lls}),bitOr:tf({DenseMatrix:tR.JfM,concat:tR.zoF,equalScalar:tR.kuq,matrix:tR.pIu,typed:tR.Gzl}),cumsum:tg({add:tR.IHx,typed:tR.Gzl,unaryPlus:tR.uKN}),index:tb({Index:tR.gmE,getMatrixDataType:tR.mOi}),sum:tx({add:tR.IHx,config:n.v,numeric:tR.uRn,typed:tR.Gzl}),range:tZ({bignumber:tR.edS,matrix:tR.pIu,add:tR.IHx,config:n.v,isPositive:tR.xPR,larger:tR.TWx,largerEq:tR.Cr4,smaller:tR.Nyh,smallerEq:tR.Sq_,typed:tR.Gzl}),row:tw({Index:tR.gmE,matrix:tR.pIu,range:tR.w6H,typed:tR.Gzl}),column:tN({Index:tR.gmE,matrix:tR.pIu,range:tR.w6H,typed:tR.Gzl}),mean:tA({add:tR.IHx,divide:tR.csF,typed:tR.Gzl}),quantileSeq:tD({add:tR.IHx,bignumber:tR.edS,compare:tR.quX,divide:tR.csF,isInteger:tR.UaK,larger:tR.TWx,multiply:tR.JpY,partitionSelect:tR.JeQ,smaller:tR.Nyh,smallerEq:tR.Sq_,subtract:tR.$XF,typed:tR.Gzl}),variance:tT({add:tR.IHx,apply:tR.nnj,divide:tR.csF,isNaN:tR.i2d,multiply:tR.JpY,subtract:tR.$XF,typed:tR.Gzl}),std:tF({map:tR.UID,sqrt:tR._b3,typed:tR.Gzl,variance:tR.CAK})}),(0,i.Z)(tI,{BigNumber:tR.O$v,Complex:tR.Zz9,Fraction:tR.iAi,Matrix:tR.y3G,Node:tj,ObjectNode:tz,OperatorNode:tU,ParenthesisNode:tY,Range:tR.e6w,RelationalNode:tX,ResultSet:tR.Z0z,ArrayNode:tJ,BlockNode:tq,ConditionalNode:tG,ConstantNode:tH,DenseMatrix:tR.JfM,RangeNode:tV,Chain:t$,FunctionAssignmentNode:tQ,SparseMatrix:tR.A7i,IndexNode:t0,ImmutableDenseMatrix:tR.MUK,Index:tR.gmE,AccessorNode:t1,AssignmentNode:t2,FibonacciHeap:tR.Q3n,Spa:tR.HJh,Unit:tR.fbc,SymbolNode:t3,FunctionNode:t5,Help:rt,Parser:rr}),t$.createProxy(tk)},8183:function(e,t,r){"use strict";r.d(t,{O$v:function(){return l8},Zz9:function(){return l6},JfM:function(){return cg},Q3n:function(){return d8},iAi:function(){return ct},MUK:function(){return dF},gmE:function(){return dR},cw7:function(){return cn},bZs:function(){return cy},doM:function(){return co},wwJ:function(){return c6},y3G:function(){return cs},e6w:function(){return cc},Z0z:function(){return ch},PNl:function(){return cd},vNo:function(){return cZ},HJh:function(){return pv},A7i:function(){return hp},fbc:function(){return pE},OvO:function(){return ci},xOA:function(){return ca},WJv:function(){return l7},OSG:function(){return cu},wcc:function(){return cm},WnP:function(){return cN},Khb:function(){return cS},__u:function(){return hx},C6L:function(){return cA},trc:function(){return hk},rcO:function(){return cP},KLC:function(){return hC},IHx:function(){return db},scv:function(){return cD},xDy:function(){return pc},nnj:function(){return hZ},R91:function(){return cM},PUJ:function(){return h_},lo8:function(){return cO},ZRM:function(){return hQ},VfV:function(){return cT},z4N:function(){return cB},fvJ:function(){return dy},C80:function(){return cF},uzo:function(){return pA},_vz:function(){return p9},O7j:function(){return fb},edS:function(){return cR},Ly_:function(){return hw},hx9:function(){return dx},Pfe:function(){return ck},wKT:function(){return dC},nNS:function(){return dZ},Cl$:function(){return pP},tUn:function(){return p7},Rhk:function(){return pD},O72:function(){return cL},tjo:function(){return d_},eKn:function(){return hK},mDi:function(){return d0},_fe:function(){return fA},d9v:function(){return cI},$QP:function(){return pg},BjO:function(){return cj},d4C:function(){return hE},quX:function(){return dw},rn1:function(){return d1},cdM:function(){return dE},PYB:function(){return cz},ift:function(){return d2},zoF:function(){return h0},xk2:function(){return pM},ruJ:function(){return cU},O1K:function(){return fD},mCk:function(){return cY},f9Y:function(){return hN},oHe:function(){return cX},h6M:function(){return hL},JPg:function(){return pO},QXW:function(){return h1},JP7:function(){return fe},kCc:function(){return d3},QBQ:function(){return cJ},RhL:function(){return hS},NZC:function(){return h2},kOm:function(){return cq},zbp:function(){return dN},vZr:function(){return dS},Q8I:function(){return d5},dEt:function(){return pT},Ka3:function(){return h3},Hgg:function(){return dA},TE$:function(){return dP},csF:function(){return ft},QgA:function(){return h5},AKD:function(){return dD},yVo:function(){return h4},iOk:function(){return d4},qgo:function(){return pB},e:function(){return l9},dvW:function(){return cb},Gq_:function(){return fy},dXo:function(){return pF},_G2:function(){return fr},iMQ:function(){return pR},DgJ:function(){return h8},kuq:function(){return cG},eZD:function(){return dM},qNN:function(){return cH},Qqt:function(){return cV},Ege:function(){return pk},t$B:function(){return cW},bLN:function(){return fi},Am2:function(){return pL},cIy:function(){return fx},kp_:function(){return pI},hXT:function(){return c$},Oyo:function(){return ce},Vvs:function(){return fn},zG0:function(){return d6},xHg:function(){return h6},GWj:function(){return dO},Ed_:function(){return cQ},WUZ:function(){return cK},Pj$:function(){return hI},Ltn:function(){return fM},yiU:function(){return pj},eOQ:function(){return fC},thl:function(){return dT},mOi:function(){return c0},H9q:function(){return pz},QXX:function(){return fo},HQL:function(){return pU},Hdk:function(){return h9},$v1:function(){return c1},_mT:function(){return dB},i:function(){return cr},yRu:function(){return h7},Sxn:function(){return pY},im:function(){return c2},KzB:function(){return d9},wfr:function(){return d7},JBn:function(){return pb},WSk:function(){return fs},QNt:function(){return pe},UaK:function(){return c3},i2d:function(){return hA},nMy:function(){return c5},kEn:function(){return hj},xPR:function(){return c4},e47:function(){return hP},Fr9:function(){return c8},mYz:function(){return fZ},$$$:function(){return pX},JvE:function(){return de},TWx:function(){return dk},Cr4:function(){return dt},uqG:function(){return pt},w57:function(){return dr},KF1:function(){return c9},cM7:function(){return dL},mvw:function(){return c7},Krr:function(){return pr},k3Q:function(){return he},PUn:function(){return pJ},wtJ:function(){return di},ER9:function(){return dI},xly:function(){return py},DU:function(){return fa},t6m:function(){return fz},UFs:function(){return fO},$nU:function(){return pq},oLv:function(){return fu},UID:function(){return ht},pIu:function(){return hz},ndY:function(){return dn},ZcA:function(){return hU},lPE:function(){return dj},Fp7:function(){return pi},J69:function(){return f_},C2o:function(){return fP},VV$:function(){return dz},wQq:function(){return dU},xJM:function(){return hY},ak$:function(){return pG},esS:function(){return fl},kEb:function(){return pH},n4B:function(){return fw},SJ_:function(){return fc},JpY:function(){return dY},cfl:function(){return hr},li8:function(){return pV},KOy:function(){return fF},ffD:function(){return hi},C7f:function(){return ds},$$R:function(){return dX},_A2:function(){return pW},Rxh:function(){return hn},uRn:function(){return hX},jfK:function(){return ho},iUs:function(){return da},or:function(){return dJ},JeQ:function(){return dq},DW7:function(){return fh},Skb:function(){return cl},pi:function(){return cx},sDj:function(){return hs},mvk:function(){return px},JaK:function(){return p$},whQ:function(){return fE},gil:function(){return pQ},kc5:function(){return fd},XAT:function(){return pK},oTb:function(){return fk},Qg6:function(){return fp},sQ3:function(){return pC},S0v:function(){return ha},WVs:function(){return hJ},CxM:function(){return p0},qr:function(){return du},pAO:function(){return fN},TYM:function(){return p1},MXc:function(){return hu},Iyf:function(){return hD},w6H:function(){return ph},re:function(){return hl},vAu:function(){return p2},PHU:function(){return cC},XLQ:function(){return hq},SIr:function(){return dl},nq0:function(){return dc},LdX:function(){return dG},U1s:function(){return fI},k8z:function(){return fR},NMM:function(){return dh},O7B:function(){return pd},rMB:function(){return p3},KO_:function(){return cp},U5j:function(){return fL},BEc:function(){return hc},Fbd:function(){return hM},ahj:function(){return p5},$ZK:function(){return pn},TVT:function(){return pp},Z41:function(){return po},ff9:function(){return pZ},TT1:function(){return ps},oNG:function(){return pf},ljT:function(){return pa},yk3:function(){return ff},V4s:function(){return pm},uyX:function(){return p_},Xxe:function(){return hh},O$l:function(){return hd},R_K:function(){return hO},dpJ:function(){return hG},cEy:function(){return dH},Nyh:function(){return dd},Sq_:function(){return pu},bBp:function(){return fm},DYV:function(){return pl},rVs:function(){return hT},bl5:function(){return p4},jLI:function(){return hf},_b3:function(){return hB},jXX:function(){return pw},h62:function(){return hm},L9e:function(){return hH},qoR:function(){return fT},yO5:function(){return p8},bAb:function(){return fv},Z_8:function(){return hv},P9L:function(){return dV},$XF:function(){return dp},Hxc:function(){return hg},Smz:function(){return dW},rew:function(){return fj},ORZ:function(){return hb},AEp:function(){return hF},BZ_:function(){return cf},bej:function(){return p6},to:function(){return df},g49:function(){return d$},p4s:function(){return hV},kM2:function(){return hy},Gzl:function(){return c_},T8F:function(){return hR},uKN:function(){return cw},KPr:function(){return dm},bfT:function(){return fg},LDk:function(){return dv},bJ2:function(){return dQ},tnB:function(){return pN},CAK:function(){return fS},i83:function(){return cv},Uud:function(){return cE},bGh:function(){return pS},NpV:function(){return hW},dlQ:function(){return dg},lls:function(){return h$},Xcd:function(){return fB},kjZ:function(){return dK}});var i,n,o=r(1513),s="0123456789abcdef",a="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",l={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},c=!0,h="[DecimalError] ",d=h+"Invalid argument: ",p=h+"Precision limit exceeded",f=h+"crypto unavailable",m="[object Decimal]",v=Math.floor,g=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,C=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Z=a.length-1,_=u.length-1,w={toStringTag:m};function E(e){var t,r,i,n=e.length-1,o="",s=e[0];if(n>0){for(o+=s,t=1;t<n;t++)(r=7-(i=e[t]+"").length)&&(o+=R(r)),o+=i;(r=7-(i=(s=e[t])+"").length)&&(o+=R(r))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function N(e,t,r){if(e!==~~e||e<t||e>r)throw Error(d+e)}function S(e,t,r,i){var n,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=7,n=0):(n=Math.ceil((t+1)/7),t%=7),o=g(10,7-t),a=e[n]%o|0,null==i?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),s=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):s=(r<4&&a+1==o||r>3&&a+1==o/2)&&(e[n+1]/o/100|0)==g(10,t-2)-1||(a==o/2||0==a)&&(e[n+1]/o/100|0)==0:t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),s=(i||r<4)&&9999==a||!i&&r>3&&4999==a):s=((i||r<4)&&a+1==o||!i&&r>3&&a+1==o/2)&&(e[n+1]/o/1e3|0)==g(10,t-3)-1,s}function A(e,t,r){for(var i,n,o=[0],a=0,u=e.length;a<u;){for(n=o.length;n--;)o[n]*=t;for(o[0]+=s.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(void 0===o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}w.absoluteValue=w.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),D(e)},w.ceil=function(){return D(new this.constructor(this),this.e+1,2)},w.clampedTo=w.clamp=function(e,t){var r=this.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(d+t);return 0>this.cmp(e)?e:this.cmp(t)>0?t:new r(this)},w.comparedTo=w.cmp=function(e){var t,r,i,n,o=this.d,s=(e=new this.constructor(e)).d,a=this.s,u=e.s;if(!o||!s)return a&&u?a!==u?a:o===s?0:!o^a<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?a:s[0]?-u:0;if(a!==u)return a;if(this.e!==e.e)return this.e>e.e^a<0?1:-1;for(t=0,r=(i=o.length)<(n=s.length)?i:n;t<r;++t)if(o[t]!==s[t])return o[t]>s[t]^a<0?1:-1;return i===n?0:i>n^a<0?1:-1},w.cosine=w.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(e,t){var r,i,n;if(t.isZero())return t;(i=t.d.length)<32?n=(1/J(4,r=Math.ceil(i/3))).toString():(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=X(e,1,t.times(n),new e(1));for(var o=r;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=r,t}(i,q(i,r)),i.precision=e,i.rounding=t,D(2==n||3==n?r.neg():r,e,t,!0)):new i(1):new i(NaN)},w.cubeRoot=w.cbrt=function(){var e,t,r,i,n,o,s,a,u,l,h=this.constructor;if(!this.isFinite()||this.isZero())return new h(this);for(c=!1,(o=this.s*g(this.s*this,1/3))&&Math.abs(o)!=1/0?i=new h(o.toString()):(r=E(this.d),(o=((e=this.e)-r.length+1)%3)&&(r+=1==o||-2==o?"0":"00"),o=g(r,1/3),e=v((e+1)/3)-(e%3==(e<0?-1:2)),(i=new h(r=o==1/0?"5e"+e:(r=o.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=this.s),s=(e=h.precision)+3;;)if(i=P((l=(u=(a=i).times(a).times(a)).plus(this)).plus(this).times(a),l.plus(u),s+2,1),E(a.d).slice(0,s)===(r=E(i.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(n||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(D(i,e+1,1),t=!i.times(i).times(i).eq(this));break}if(!n&&(D(a,e+1,0),a.times(a).times(a).eq(this))){i=a;break}s+=4,n=1}return c=!0,D(i,e,h.rounding,t)},w.decimalPlaces=w.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-v(this.e/7))*7,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},w.dividedBy=w.div=function(e){return P(this,new this.constructor(e))},w.dividedToIntegerBy=w.divToInt=function(e){var t=this.constructor;return D(P(this,new t(e),0,1,1),t.precision,t.rounding)},w.equals=w.eq=function(e){return 0===this.cmp(e)},w.floor=function(){return D(new this.constructor(this),this.e+1,3)},w.greaterThan=w.gt=function(e){return this.cmp(e)>0},w.greaterThanOrEqualTo=w.gte=function(e){var t=this.cmp(e);return 1==t||0===t},w.hyperbolicCosine=w.cosh=function(){var e,t,r,i,n,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;r=s.precision,i=s.rounding,s.precision=r+Math.max(o.e,o.sd())+4,s.rounding=1,(n=o.d.length)<32?t=(1/J(4,e=Math.ceil(n/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=X(s,1,o.times(t),new s(1),!0);for(var u,l=e,c=new s(8);l--;)u=o.times(o),o=a.minus(u.times(c.minus(u.times(c))));return D(o,s.precision=r,s.rounding=i,!0)},w.hyperbolicSine=w.sinh=function(){var e,t,r,i,n=this,o=n.constructor;if(!n.isFinite()||n.isZero())return new o(n);if(t=o.precision,r=o.rounding,o.precision=t+Math.max(n.e,n.sd())+4,o.rounding=1,(i=n.d.length)<3)n=X(o,2,n,n,!0);else{e=(e=1.4*Math.sqrt(i))>16?16:0|e,n=X(o,2,n=n.times(1/J(5,e)),n,!0);for(var s,a=new o(5),u=new o(16),l=new o(20);e--;)s=n.times(n),n=n.times(a.plus(s.times(u.times(s).plus(l))))}return o.precision=t,o.rounding=r,D(n,t,r,!0)},w.hyperbolicTangent=w.tanh=function(){var e,t,r=this.constructor;return this.isFinite()?this.isZero()?new r(this):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,P(this.sinh(),this.cosh(),r.precision=e,r.rounding=t)):new r(this.s)},w.inverseCosine=w.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),n=r.precision,o=r.rounding;return -1!==i?0===i?t.isNeg()?B(r,n,o):new r(0):new r(NaN):t.isZero()?B(r,n+4,o).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=B(r,n+4,o).times(.5),r.precision=n,r.rounding=o,e.minus(t))},w.inverseHyperbolicCosine=w.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,c=!1,r=r.times(r).minus(1).sqrt().plus(r),c=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)},w.inverseHyperbolicSine=w.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,c=!1,r=r.times(r).plus(1).sqrt().plus(r),c=!0,i.precision=e,i.rounding=t,r.ln())},w.inverseHyperbolicTangent=w.atanh=function(){var e,t,r,i,n=this,o=n.constructor;return n.isFinite()?n.e>=0?new o(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=o.precision,t=o.rounding,Math.max(i=n.sd(),e)<-(2*n.e)-1)?D(new o(n),e,t,!0):(o.precision=r=i-n.e,n=P(n.plus(1),new o(1).minus(n),r+e,1),o.precision=e+4,o.rounding=1,n=n.ln(),o.precision=e,o.rounding=t,n.times(.5)):new o(NaN)},w.inverseSine=w.asin=function(){var e,t,r,i,n=this,o=n.constructor;return n.isZero()?new o(n):(t=n.abs().cmp(1),r=o.precision,i=o.rounding,-1!==t)?0===t?((e=B(o,r+4,i).times(.5)).s=n.s,e):new o(NaN):(o.precision=r+6,o.rounding=1,n=n.div(new o(1).minus(n.times(n)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=i,n.times(2))},w.inverseTangent=w.atan=function(){var e,t,r,i,n,o,s,a,u,l=this,h=l.constructor,d=h.precision,p=h.rounding;if(l.isFinite()){if(l.isZero())return new h(l);if(l.abs().eq(1)&&d+4<=_)return(s=B(h,d+4,p).times(.25)).s=l.s,s}else{if(!l.s)return new h(NaN);if(d+4<=_)return(s=B(h,d+4,p).times(.5)).s=l.s,s}for(h.precision=a=d+10,h.rounding=1,e=r=Math.min(28,a/7+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(c=!1,t=Math.ceil(a/7),i=1,u=l.times(l),s=new h(l),n=l;-1!==e;)if(n=n.times(u),o=s.minus(n.div(i+=2)),n=n.times(u),void 0!==(s=o.plus(n.div(i+=2))).d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return r&&(s=s.times(2<<r-1)),c=!0,D(s,h.precision=d,h.rounding=p,!0)},w.isFinite=function(){return!!this.d},w.isInteger=w.isInt=function(){return!!this.d&&v(this.e/7)>this.d.length-2},w.isNaN=function(){return!this.s},w.isNegative=w.isNeg=function(){return this.s<0},w.isPositive=w.isPos=function(){return this.s>0},w.isZero=function(){return!!this.d&&0===this.d[0]},w.lessThan=w.lt=function(e){return 0>this.cmp(e)},w.lessThanOrEqualTo=w.lte=function(e){return 1>this.cmp(e)},w.logarithm=w.log=function(e){var t,r,i,n,o,s,a,u=this.constructor,l=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(r=(e=new u(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new u(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(t){if(r.length>1)n=!0;else{for(i=r[0];i%10==0;)i/=10;n=1!==i}}if(c=!1,S((a=P(z(this,s=l+5),t?T(u,s+10):z(e,s),s,1)).d,i=l,h))do if(s+=10,a=P(z(this,s),t?T(u,s+10):z(e,s),s,1),!n){+E(a.d).slice(i+1,i+15)+1==1e14&&(a=D(a,l+1,0));break}while(S(a.d,i+=10,h));return c=!0,D(a,l,h)},w.minus=w.sub=function(e){var t,r,i,n,o,s,a,u,l,h,d,p,f=this.constructor;if(e=new f(e),!this.d||!e.d)return this.s&&e.s?this.d?e.s=-e.s:e=new f(e.d||this.s!==e.s?this:NaN):e=new f(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.plus(e);if(l=this.d,p=e.d,a=f.precision,u=f.rounding,!l[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!l[0])return new f(3===u?-0:0);e=new f(this)}return c?D(e,a,u):e}if(r=v(e.e/7),h=v(this.e/7),l=l.slice(),o=h-r){for((d=o<0)?(t=l,o=-o,s=p.length):(t=p,r=h,s=l.length),o>(i=Math.max(Math.ceil(a/7),s)+2)&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for((d=(i=l.length)<(s=p.length))&&(s=i),i=0;i<s;i++)if(l[i]!=p[i]){d=l[i]<p[i];break}o=0}for(d&&(t=l,l=p,p=t,e.s=-e.s),s=l.length,i=p.length-s;i>0;--i)l[s++]=0;for(i=p.length;i>o;){if(l[--i]<p[i]){for(n=i;n&&0===l[--n];)l[n]=1e7-1;--l[n],l[i]+=1e7}l[i]-=p[i]}for(;0===l[--s];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(e.d=l,e.e=O(l,r),c?D(e,a,u):e):new f(3===u?-0:0)},w.modulo=w.mod=function(e){var t,r=this.constructor;return(e=new r(e),this.d&&e.s&&(!e.d||e.d[0]))?e.d&&(!this.d||this.d[0])?(c=!1,9==r.modulo?(t=P(this,e.abs(),0,3,1),t.s*=e.s):t=P(this,e,0,r.modulo,1),t=t.times(e),c=!0,this.minus(t)):D(new r(this),r.precision,r.rounding):new r(NaN)},w.naturalExponential=w.exp=function(){return j(this)},w.naturalLogarithm=w.ln=function(){return z(this)},w.negated=w.neg=function(){var e=new this.constructor(this);return e.s=-e.s,D(e)},w.plus=w.add=function(e){var t,r,i,n,o,s,a,u,l,h,d=this.constructor;if(e=new d(e),!this.d||!e.d)return this.s&&e.s?this.d||(e=new d(e.d||this.s===e.s?this:NaN)):e=new d(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.minus(e);if(l=this.d,h=e.d,a=d.precision,u=d.rounding,!l[0]||!h[0])return h[0]||(e=new d(this)),c?D(e,a,u):e;if(o=v(this.e/7),i=v(e.e/7),l=l.slice(),n=o-i){for(n<0?(r=l,n=-n,s=h.length):(r=h,i=o,s=l.length),n>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(n=s,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for((s=l.length)-(n=h.length)<0&&(n=s,r=h,h=l,l=r),t=0;n;)t=(l[--n]=l[n]+h[n]+t)/1e7|0,l[n]%=1e7;for(t&&(l.unshift(t),++i),s=l.length;0==l[--s];)l.pop();return e.d=l,e.e=O(l,i),c?D(e,a,u):e},w.precision=w.sd=function(e){var t;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(d+e);return this.d?(t=F(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},w.round=function(){var e=this.constructor;return D(new e(this),this.e+1,e.rounding)},w.sine=w.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:X(e,2,t,t);r=(r=1.4*Math.sqrt(i))>16?16:0|r,t=X(e,2,t=t.times(1/J(5,r)),t);for(var n,o=new e(5),s=new e(16),a=new e(20);r--;)n=t.times(t),t=t.times(o.plus(n.times(s.times(n).minus(a))));return t}(i,q(i,r)),i.precision=e,i.rounding=t,D(n>2?r.neg():r,e,t,!0)):new i(NaN)},w.squareRoot=w.sqrt=function(){var e,t,r,i,n,o,s=this.d,a=this.e,u=this.s,l=this.constructor;if(1!==u||!s||!s[0])return new l(!u||u<0&&(!s||s[0])?NaN:s?this:1/0);for(c=!1,0==(u=Math.sqrt(+this))||u==1/0?(((t=E(s)).length+a)%2==0&&(t+="0"),u=Math.sqrt(t),a=v((a+1)/2)-(a<0||a%2),i=new l(t=u==1/0?"5e"+a:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+a)):i=new l(u.toString()),r=(a=l.precision)+3;;)if(i=(o=i).plus(P(this,o,r+2,1)).times(.5),E(o.d).slice(0,r)===(t=E(i.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(D(i,a+1,1),e=!i.times(i).eq(this));break}if(!n&&(D(o,a+1,0),o.times(o).eq(this))){i=o;break}r+=4,n=1}return c=!0,D(i,a,l.rounding,e)},w.tangent=w.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,(r=r.sin()).s=1,r=P(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,D(2==n||4==n?r.neg():r,e,t,!0)):new i(NaN)},w.times=w.mul=function(e){var t,r,i,n,o,s,a,u,l,h=this.constructor,d=this.d,p=(e=new h(e)).d;if(e.s*=this.s,!d||!d[0]||!p||!p[0])return new h(e.s&&(!d||d[0]||p)&&(!p||p[0]||d)?d&&p?0*e.s:e.s/0:NaN);for(r=v(this.e/7)+v(e.e/7),(u=d.length)<(l=p.length)&&(o=d,d=p,p=o,s=u,u=l,l=s),o=[],i=s=u+l;i--;)o.push(0);for(i=l;--i>=0;){for(t=0,n=u+i;n>i;)a=o[n]+p[i]*d[n-i-1]+t,o[n--]=a%1e7|0,t=a/1e7|0;o[n]=(o[n]+t)%1e7|0}for(;!o[--s];)o.pop();return t?++r:o.shift(),e.d=o,e.e=O(o,r),c?D(e,h.precision,h.rounding):e},w.toBinary=function(e,t){return G(this,2,e,t)},w.toDecimalPlaces=w.toDP=function(e,t){var r=this,i=r.constructor;return(r=new i(r),void 0===e)?r:(N(e,0,1e9),void 0===t?t=i.rounding:N(t,0,8),D(r,e+r.e+1,t))},w.toExponential=function(e,t){var r,i=this,n=i.constructor;return void 0===e?r=M(i,!0):(N(e,0,1e9),void 0===t?t=n.rounding:N(t,0,8),r=M(i=D(new n(i),e+1,t),!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},w.toFixed=function(e,t){var r,i,n=this.constructor;return void 0===e?r=M(this):(N(e,0,1e9),void 0===t?t=n.rounding:N(t,0,8),r=M(i=D(new n(this),e+this.e+1,t),!1,e+i.e+1)),this.isNeg()&&!this.isZero()?"-"+r:r},w.toFraction=function(e){var t,r,i,n,o,s,a,u,l,h,p,f,m=this.d,v=this.constructor;if(!m)return new v(this);if(l=r=new v(1),i=u=new v(0),s=(o=(t=new v(i)).e=F(m)-this.e-1)%7,t.d[0]=g(10,s<0?7+s:s),null==e)e=o>0?t:l;else{if(!(a=new v(e)).isInt()||a.lt(l))throw Error(d+a);e=a.gt(t)?o>0?t:l:a}for(c=!1,a=new v(E(m)),h=v.precision,v.precision=o=14*m.length;p=P(a,t,0,1,1),1!=(n=r.plus(p.times(i))).cmp(e);)r=i,i=n,n=l,l=u.plus(p.times(n)),u=n,n=t,t=a.minus(p.times(n)),a=n;return n=P(e.minus(r),i,0,1,1),u=u.plus(n.times(l)),r=r.plus(n.times(i)),u.s=l.s=this.s,f=1>P(l,i,o,1).minus(this).abs().cmp(P(u,r,o,1).minus(this).abs())?[l,i]:[u,r],v.precision=h,c=!0,f},w.toHexadecimal=w.toHex=function(e,t){return G(this,16,e,t)},w.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),null==e){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),void 0===t?t=i.rounding:N(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(c=!1,r=P(r,e,0,t,1).times(e),c=!0,D(r)):(e.s=r.s,r=e),r},w.toNumber=function(){return+this},w.toOctal=function(e,t){return G(this,8,e,t)},w.toPower=w.pow=function(e){var t,r,i,n,o,s,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(g(+a,l));if((a=new u(a)).eq(1))return a;if(i=u.precision,o=u.rounding,e.eq(1))return D(a,i,o);if((t=v(e.e/7))>=e.d.length-1&&(r=l<0?-l:l)<=9007199254740991)return n=k(u,a,r,i),e.s<0?new u(1).div(n):D(n,i,o);if((s=a.s)<0){if(t<e.d.length-1)return new u(NaN);if((1&e.d[t])==0&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(t=0!=(r=g(+a,l))&&isFinite(r)?new u(r+"").e:v(l*(Math.log("0."+E(a.d))/Math.LN10+a.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(c=!1,u.rounding=a.s=1,r=Math.min(12,(t+"").length),(n=j(e.times(z(a,i+r)),i)).d&&S((n=D(n,i+5,1)).d,i,o)&&(t=i+10,+E((n=D(j(e.times(z(a,t+r)),t),t+5,1)).d).slice(i+1,i+15)+1==1e14&&(n=D(n,i+1,0))),n.s=s,c=!0,u.rounding=o,D(n,i,o))},w.toPrecision=function(e,t){var r,i=this,n=i.constructor;return void 0===e?r=M(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(N(e,1,1e9),void 0===t?t=n.rounding:N(t,0,8),r=M(i=D(new n(i),e,t),e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r},w.toSignificantDigits=w.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(N(e,1,1e9),void 0===t?t=r.rounding:N(t,0,8)),D(new r(this),e,t)},w.toString=function(){var e=this.constructor,t=M(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()&&!this.isZero()?"-"+t:t},w.truncated=w.trunc=function(){return D(new this.constructor(this),this.e+1,1)},w.valueOf=w.toJSON=function(){var e=this.constructor,t=M(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()?"-"+t:t};var P=function(){function e(e,t,r){var i,n=0,o=e.length;for(e=e.slice();o--;)i=e[o]*t+n,e[o]=i%r|0,n=i/r|0;return n&&e.unshift(n),e}function t(e,t,r,i){var n,o;if(r!=i)o=r>i?1:-1;else for(n=o=0;n<r;n++)if(e[n]!=t[n]){o=e[n]>t[n]?1:-1;break}return o}function r(e,t,r,i){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*i+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,o,s,a,u,l){var c,h,d,p,f,m,g,b,y,x,C,Z,_,w,E,N,S,A,P,M,O=n.constructor,T=n.s==o.s?1:-1,B=n.d,F=o.d;if(!B||!B[0]||!F||!F[0])return new O(n.s&&o.s&&(B?!F||B[0]!=F[0]:F)?B&&0==B[0]||!F?0*T:T/0:NaN);for(l?(f=1,h=n.e-o.e):(l=1e7,f=7,h=v(n.e/f)-v(o.e/f)),P=F.length,S=B.length,x=(y=new O(T)).d=[],d=0;F[d]==(B[d]||0);d++);if(F[d]>(B[d]||0)&&h--,null==s?(w=s=O.precision,a=O.rounding):w=u?s+(n.e-o.e)+1:s,w<0)x.push(1),m=!0;else{if(w=w/f+2|0,d=0,1==P){for(p=0,F=F[0],w++;(d<S||p)&&w--;d++)E=p*l+(B[d]||0),x[d]=E/F|0,p=E%F|0;m=p||d<S}else{for((p=l/(F[0]+1)|0)>1&&(F=e(F,p,l),B=e(B,p,l),P=F.length,S=B.length),N=P,Z=(C=B.slice(0,P)).length;Z<P;)C[Z++]=0;(M=F.slice()).unshift(0),A=F[0],F[1]>=l/2&&++A;do p=0,(c=t(F,C,P,Z))<0?(_=C[0],P!=Z&&(_=_*l+(C[1]||0)),(p=_/A|0)>1?(p>=l&&(p=l-1),b=(g=e(F,p,l)).length,Z=C.length,1==(c=t(g,C,b,Z))&&(p--,r(g,P<b?M:F,b,l))):(0==p&&(c=p=1),g=F.slice()),(b=g.length)<Z&&g.unshift(0),r(C,g,Z,l),-1==c&&(Z=C.length,(c=t(F,C,P,Z))<1&&(p++,r(C,P<Z?M:F,Z,l))),Z=C.length):0===c&&(p++,C=[0]),x[d++]=p,c&&C[0]?C[Z++]=B[N]||0:(C=[B[N]],Z=1);while((N++<S||void 0!==C[0])&&w--);m=void 0!==C[0]}x[0]||x.shift()}if(1==f)y.e=h,i=m;else{for(d=1,p=x[0];p>=10;p/=10)d++;y.e=d+h*f-1,D(y,u?s+y.e+1:s,a,m)}return y}}();function D(e,t,r,i){var n,o,s,a,u,l,h,d,p,f=e.constructor;i:if(null!=t){if(!(d=e.d))return e;for(n=1,a=d[0];a>=10;a/=10)n++;if((o=t-n)<0)o+=7,s=t,u=(h=d[p=0])/g(10,n-s-1)%10|0;else if((p=Math.ceil((o+1)/7))>=(a=d.length)){if(i){for(;a++<=p;)d.push(0);h=u=0,n=1,o%=7,s=o-7+1}else break i}else{for(n=1,h=a=d[p];a>=10;a/=10)n++;o%=7,u=(s=o-7+n)<0?0:h/g(10,n-s-1)%10|0}if(i=i||t<0||void 0!==d[p+1]||(s<0?h:h%g(10,n-s-1)),l=r<4?(u||i)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||i||6==r&&(o>0?s>0?h/g(10,n-s):0:d[p-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,l?(t-=e.e+1,d[0]=g(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=p,a=1,p--):(d.length=p+1,a=g(10,7-o),d[p]=s>0?(h/g(10,n-s)%g(10,s)|0)*a:0),l)for(;;){if(0==p){for(o=1,s=d[0];s>=10;s/=10)o++;for(s=d[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,1e7==d[0]&&(d[0]=1));break}if(d[p]+=a,1e7!=d[p])break;d[p--]=0,a=1}for(o=d.length;0===d[--o];)d.pop()}return c&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function M(e,t,r){if(!e.isFinite())return U(e);var i,n=e.e,o=E(e.d),s=o.length;return t?(r&&(i=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+R(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):n<0?(o="0."+R(-n-1)+o,r&&(i=r-s)>0&&(o+=R(i))):n>=s?(o+=R(n+1-s),r&&(i=r-n-1)>0&&(o=o+"."+R(i))):((i=n+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),r&&(i=r-s)>0&&(n+1===s&&(o+="."),o+=R(i))),o}function O(e,t){var r=e[0];for(t*=7;r>=10;r/=10)t++;return t}function T(e,t,r){if(t>Z)throw c=!0,r&&(e.precision=r),Error(p);return D(new e(a),t,1,!0)}function B(e,t,r){if(t>_)throw Error(p);return D(new e(u),t,r,!0)}function F(e){var t=e.length-1,r=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function R(e){for(var t="";e--;)t+="0";return t}function k(e,t,r,i){var n,o=new e(1),s=Math.ceil(i/7+4);for(c=!1;;){if(r%2&&H((o=o.times(t)).d,s)&&(n=!0),0===(r=v(r/2))){r=o.d.length-1,n&&0===o.d[r]&&++o.d[r];break}H((t=t.times(t)).d,s)}return c=!0,o}function L(e){return 1&e.d[e.d.length-1]}function I(e,t,r){for(var i,n=new e(t[0]),o=0;++o<t.length;)if((i=new e(t[o])).s)n[r](i)&&(n=i);else{n=i;break}return n}function j(e,t){var r,i,n,o,s,a,u,l=0,h=0,d=0,p=e.constructor,f=p.rounding,m=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(null==t?(c=!1,u=m):u=t,a=new p(.03125);e.e>-2;)e=e.times(a),d+=5;for(u+=i=Math.log(g(2,d))/Math.LN10*2+5|0,r=o=s=new p(1),p.precision=u;;){if(o=D(o.times(e),u,1),r=r.times(++h),E((a=s.plus(P(o,r,u,1))).d).slice(0,u)===E(s.d).slice(0,u)){for(n=d;n--;)s=D(s.times(s),u,1);if(null!=t)return p.precision=m,s;if(!(l<3&&S(s.d,u-i,f,l)))return D(s,p.precision=m,f,c=!0);p.precision=u+=10,r=o=a=new p(1),h=0,l++}s=a}}function z(e,t){var r,i,n,o,s,a,u,l,h,d,p,f=1,m=e,v=m.d,g=m.constructor,b=g.rounding,y=g.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==t?(c=!1,h=y):h=t,g.precision=h+=10,i=(r=E(v)).charAt(0),!(15e14>Math.abs(o=m.e)))return l=T(g,h+2,y).times(o+""),m=z(new g(i+"."+r.slice(1)),h-10).plus(l),g.precision=y,null==t?D(m,y,b,c=!0):m;for(;i<7&&1!=i||1==i&&r.charAt(1)>3;)i=(r=E((m=m.times(e)).d)).charAt(0),f++;for(o=m.e,i>1?(m=new g("0."+r),o++):m=new g(i+"."+r.slice(1)),d=m,u=s=m=P(m.minus(1),m.plus(1),h,1),p=D(m.times(m),h,1),n=3;;){if(s=D(s.times(p),h,1),E((l=u.plus(P(s,new g(n),h,1))).d).slice(0,h)===E(u.d).slice(0,h)){if(u=u.times(2),0!==o&&(u=u.plus(T(g,h+2,y).times(o+""))),u=P(u,new g(f),h,1),null!=t)return g.precision=y,u;if(!S(u.d,h-10,b,a))return D(u,g.precision=y,b,c=!0);g.precision=h+=10,l=s=m=P(d.minus(1),d.plus(1),h,1),p=D(m.times(m),h,1),n=a=1}u=l,n+=2}}function U(e){return String(e.s*e.s/0)}function Y(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;48===t.charCodeAt(i);i++);for(n=t.length;48===t.charCodeAt(n-1);--n);if(t=t.slice(i,n)){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%7,r<0&&(i+=7),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=7;i<n;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=n;for(;i--;)t+="0";e.d.push(+t),c&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function X(e,t,r,i,n){var o,s,a,u,l=e.precision,h=Math.ceil(l/7);for(c=!1,u=r.times(r),a=new e(i);;){if(s=P(a.times(u),new e(t++*t++),l,1),a=n?i.plus(s):i.minus(s),i=P(s.times(u),new e(t++*t++),l,1),void 0!==(s=a.plus(i)).d[h]){for(o=h;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=i,i=s,s=o}return c=!0,s.d.length=h+1,s}function J(e,t){for(var r=e;--t;)r*=e;return r}function q(e,t){var r,i=t.s<0,o=B(e,e.precision,1),s=o.times(.5);if((t=t.abs()).lte(s))return n=i?4:1,t;if((r=t.divToInt(o)).isZero())n=i?3:2;else{if((t=t.minus(r.times(o))).lte(s))return n=L(r)?i?2:3:i?4:1,t;n=L(r)?i?1:4:i?3:2}return t.minus(o).abs()}function G(e,t,r,n){var o,a,u,l,c,h,d,p,f,m=e.constructor,v=void 0!==r;if(v?(N(r,1,1e9),void 0===n?n=m.rounding:N(n,0,8)):(r=m.precision,n=m.rounding),e.isFinite()){for(u=(d=M(e)).indexOf("."),v?(o=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):o=t,u>=0&&(d=d.replace(".",""),(f=new m(1)).e=d.length-u,f.d=A(M(f),10,o),f.e=f.d.length),a=c=(p=A(d,10,o)).length;0==p[--c];)p.pop();if(p[0]){if(u<0?a--:((e=new m(e)).d=p,e.e=a,p=(e=P(e,f,r,n,0,o)).d,a=e.e,h=i),u=p[r],l=o/2,h=h||void 0!==p[r+1],h=n<4?(void 0!==u||h)&&(0===n||n===(e.s<0?3:2)):u>l||u===l&&(4===n||h||6===n&&1&p[r-1]||n===(e.s<0?8:7)),p.length=r,h)for(;++p[--r]>o-1;)p[r]=0,r||(++a,p.unshift(1));for(c=p.length;!p[c-1];--c);for(u=0,d="";u<c;u++)d+=s.charAt(p[u]);if(v){if(c>1){if(16==t||8==t){for(u=16==t?4:3,--c;c%u;c++)d+="0";for(c=(p=A(d,o,t)).length;!p[c-1];--c);for(u=1,d="1.";u<c;u++)d+=s.charAt(p[u])}else d=d.charAt(0)+"."+d.slice(1)}d=d+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)d="0"+d;d="0."+d}else if(++a>c)for(a-=c;a--;)d+="0";else a<c&&(d=d.slice(0,a)+"."+d.slice(a))}else d=v?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=U(e);return e.s<0?"-"+d:d}function H(e,t){if(e.length>t)return e.length=t,!0}function V(e){return new this(e).abs()}function W(e){return new this(e).acos()}function $(e){return new this(e).acosh()}function Q(e,t){return new this(e).plus(t)}function K(e){return new this(e).asin()}function ee(e){return new this(e).asinh()}function et(e){return new this(e).atan()}function er(e){return new this(e).atanh()}function ei(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,o=i+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?B(this,i,n):new this(0)).s=e.s:!e.d||t.isZero()?(r=B(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,r=this.atan(P(e,t,o,1)),t=B(this,o,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(P(e,t,o,1)):(r=B(this,o,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function en(e){return new this(e).cbrt()}function eo(e){return D(e=new this(e),e.e+1,2)}function es(e,t,r){return new this(e).clamp(t,r)}function ea(e){if(!e||"object"!=typeof e)throw Error(h+"Object expected");var t,r,i,n=!0===e.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(r=o[t],n&&(this[r]=l[r]),void 0!==(i=e[r])){if(v(i)===i&&i>=o[t+1]&&i<=o[t+2])this[r]=i;else throw Error(d+r+": "+i)}if(r="crypto",n&&(this[r]=l[r]),void 0!==(i=e[r])){if(!0===i||!1===i||0===i||1===i){if(i){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(f)}else this[r]=!1}else throw Error(d+r+": "+i)}return this}function eu(e){return new this(e).cos()}function el(e){return new this(e).cosh()}function ec(e,t){return new this(e).div(t)}function eh(e){return new this(e).exp()}function ed(e){return D(e=new this(e),e.e+1,3)}function ep(){var e,t,r=new this(0);for(e=0,c=!1;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return c=!0,new this(1/0);r=t}return c=!0,r.sqrt()}function ef(e){return e instanceof eF||e&&e.toStringTag===m||!1}function em(e){return new this(e).ln()}function ev(e,t){return new this(e).log(t)}function eg(e){return new this(e).log(2)}function eb(e){return new this(e).log(10)}function ey(){return I(this,arguments,"lt")}function ex(){return I(this,arguments,"gt")}function eC(e,t){return new this(e).mod(t)}function eZ(e,t){return new this(e).mul(t)}function e_(e,t){return new this(e).pow(t)}function ew(e){var t,r,i,n,o=0,s=new this(1),a=[];if(void 0===e?e=this.precision:N(e,1,1e9),i=Math.ceil(e/7),this.crypto){if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));o<i;)(n=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);o<i;)(n=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(n%1e7),o+=4);o=i/4}else throw Error(f)}else for(;o<i;)a[o++]=1e7*Math.random()|0;for(i=a[--o],e%=7,i&&e&&(n=g(10,7-e),a[o]=(i/n|0)*n);0===a[o];o--)a.pop();if(o<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=7)a.shift();for(i=1,n=a[0];n>=10;n/=10)i++;i<7&&(r-=7-i)}return s.e=r,s.d=a,s}function eE(e){return D(e=new this(e),e.e+1,this.rounding)}function eN(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function eS(e){return new this(e).sin()}function eA(e){return new this(e).sinh()}function eP(e){return new this(e).sqrt()}function eD(e,t){return new this(e).sub(t)}function eM(){var e=0,t=arguments,r=new this(t[e]);for(c=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return c=!0,D(r,this.precision,this.rounding)}function eO(e){return new this(e).tan()}function eT(e){return new this(e).tanh()}function eB(e){return D(e=new this(e),e.e+1,1)}w[Symbol.for("nodejs.util.inspect.custom")]=w.toString,w[Symbol.toStringTag]="Decimal";var eF=w.constructor=function e(t){var r,i,n;function o(e){var t,r,i;if(!(this instanceof o))return new o(e);if(this.constructor=o,ef(e)){this.s=e.s,c?!e.d||e.e>o.maxE?(this.e=NaN,this.d=null):e.e<o.minE?(this.e=0,this.d=[0]):(this.e=e.e,this.d=e.d.slice()):(this.e=e.e,this.d=e.d?e.d.slice():e.d);return}if("number"==(i=typeof e)){if(0===e){this.s=1/e<0?-1:1,this.e=0,this.d=[0];return}if(e<0?(e=-e,this.s=-1):this.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;c?t>o.maxE?(this.e=NaN,this.d=null):t<o.minE?(this.e=0,this.d=[0]):(this.e=t,this.d=[e]):(this.e=t,this.d=[e]);return}if(0*e!=0){e||(this.s=NaN),this.e=NaN,this.d=null;return}return Y(this,e.toString())}if("string"!==i)throw Error(d+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),this.s=-1):(43===r&&(e=e.slice(1)),this.s=1),C.test(e)?Y(this,e):function(e,t){var r,i,n,o,s,a,u,l,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),C.test(t))return Y(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(y.test(t))r=16,t=t.toLowerCase();else if(b.test(t))r=2;else if(x.test(t))r=8;else throw Error(d+t);for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),s=(o=t.indexOf("."))>=0,i=e.constructor,s&&(o=(a=(t=t.replace(".","")).length)-o,n=k(i,new i(r),o,2*o)),o=h=(l=A(t,r,1e7)).length-1;0===l[o];--o)l.pop();return o<0?new i(0*e.s):(e.e=O(l,h),e.d=l,c=!1,s&&(e=P(e,n,4*a)),u&&(e=e.times(54>Math.abs(u)?g(2,u):eF.pow(2,u))),c=!0,e)}(this,e)}if(o.prototype=w,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=ea,o.clone=e,o.isDecimal=ef,o.abs=V,o.acos=W,o.acosh=$,o.add=Q,o.asin=K,o.asinh=ee,o.atan=et,o.atanh=er,o.atan2=ei,o.cbrt=en,o.ceil=eo,o.clamp=es,o.cos=eu,o.cosh=el,o.div=ec,o.exp=eh,o.floor=ed,o.hypot=ep,o.ln=em,o.log=ev,o.log10=eb,o.log2=eg,o.max=ey,o.min=ex,o.mod=eC,o.mul=eZ,o.pow=e_,o.random=ew,o.round=eE,o.sign=eN,o.sin=eS,o.sinh=eA,o.sqrt=eP,o.sub=eD,o.sum=eM,o.tan=eO,o.tanh=eT,o.trunc=eB,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=0,n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];r<n.length;)t.hasOwnProperty(i=n[r++])||(t[i]=this[i]);return o.config(t),o}(l);a=new eF(a),u=new eF(u);var eR=r(5284),ek=(0,eR.d5)("BigNumber",["?on","config"],e=>{var{on:t,config:r}=e,i=eF.clone({precision:r.precision,modulo:eF.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(e){return new i(e.value)},t&&t("config",function(e,t){e.precision!==t.precision&&i.config({precision:e.precision})}),i},{isClass:!0}),eL=r(1239),eI=r(9737),ej=r(7694),ez=(0,eR.d5)("Complex",[],()=>(Object.defineProperty(eL,"name",{value:"Complex"}),eL.prototype.constructor=eL,eL.prototype.type="Complex",eL.prototype.isComplex=!0,eL.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},eL.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},eL.prototype.format=function(e){var t=this.im,r=this.re,i=(0,eI.WU)(this.re,e),n=(0,eI.WU)(this.im,e),o=(0,ej.hj)(e)?e:e?e.precision:null;if(null!==o){var s=Math.pow(10,-o);Math.abs(r/t)<s&&(r=0),Math.abs(t/r)<s&&(t=0)}return 0===t?i:0===r?1===t?"i":-1===t?"-i":n+"i":t<0?-1===t?i+" - i":i+" - "+n.substring(1)+"i":1===t?i+" + i":i+" + "+n+"i"},eL.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return eL(t);throw TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],i=arguments[1];if((0,ej.hj)(r)){if((0,ej.wr)(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),(0,ej.hj)(i))return new eL({r,phi:i});throw TypeError("Phi is not a number nor an angle unit.")}throw TypeError("Radius r is not a number.");default:throw SyntaxError("Wrong number of arguments in function fromPolar")}},eL.prototype.valueOf=eL.prototype.toString,eL.fromJSON=function(e){return new eL(e)},eL.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},eL),{isClass:!0});function eU(e){var{hasher:t,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,t=null==t?JSON.stringify:t,function i(){if("object"!=typeof i.cache){var n,o,s,a,u,l,c;i.cache={values:new Map,lru:(n=r||Number.POSITIVE_INFINITY,o=0,s=1,a=Object.create(null),u=Object.create(null),l=0,c=function(e){var t=u[e];if(t&&(delete a[t],delete u[e],--o,s===t)){if(!o){l=0,s=1;return}for(;!Object.prototype.hasOwnProperty.call(a,++s););}},n=Math.abs(n),{hit:function(e){var t=u[e],r=++l;if(a[r]=e,u[e]=r,!t){if(++o<=n)return;return c(e=a[s]),e}if(delete a[t],s===t)for(;!Object.prototype.hasOwnProperty.call(a,++s););},delete:c,clear:function(){o=l=0,s=1,a=Object.create(null),u=Object.create(null)}})}}for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var p=t(h);if(i.cache.values.has(p))return i.cache.lru.hit(p),i.cache.values.get(p);var f=e.apply(e,h);return i.cache.values.set(p,f),i.cache.values.delete(i.cache.lru.hit(p)),f}}function eY(e){return Object.keys(e.signatures||{}).reduce(function(e,t){return Math.max(e,(t.match(/,/g)||[]).length+1)},-1)}var eX=eU(function(e){return new e(1).exp()},{hasher:eH}),eJ=eU(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},{hasher:eH}),eq=eU(function(e){return e.acos(-1)},{hasher:eH}),eG=eU(function(e){return eq(e).times(2)},{hasher:eH});function eH(e){return e[0].precision}var eV=Math.PI,eW=2*Math.PI,e$=Math.E,eQ=(0,eR.d5)("true",[],()=>!0),eK=(0,eR.d5)("false",[],()=>!1),e0=(0,eR.d5)("null",[],()=>null),e1=to("Infinity",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1/0):1/0}),e2=to("NaN",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(NaN):NaN}),e3=to("pi",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?eq(r):eV}),e5=to("tau",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?eG(r):eW}),e4=to("e",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?eX(r):e$}),e8=to("phi",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?eJ(r):1.618033988749895}),e6=to("LN2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(2).ln():Math.LN2}),e9=to("LN10",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(10).ln():Math.LN10}),e7=to("LOG2E",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1).div(new r(2).ln()):Math.LOG2E}),te=to("LOG10E",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1).div(new r(10).ln()):Math.LOG10E}),tt=to("SQRT1_2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r("0.5").sqrt():Math.SQRT1_2}),tr=to("SQRT2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(2).sqrt():Math.SQRT2}),ti=to("i",["Complex"],e=>{var{Complex:t}=e;return t.I}),tn=(0,eR.d5)("version",[],()=>"12.3.2");function to(e,t,r){return(0,eR.d5)(e,t,r,{recreateOnConfigChange:!0})}var ts=t2("speedOfLight","299792458","m s^-1"),ta=t2("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),tu=t2("planckConstant","6.62607015e-34","J s"),tl=t2("reducedPlanckConstant","1.0545718176461565e-34","J s"),tc=t2("magneticConstant","1.25663706212e-6","N A^-2"),th=t2("electricConstant","8.8541878128e-12","F m^-1"),td=t2("vacuumImpedance","376.730313667","ohm"),tp=t2("coulomb","8.987551792261171e9","N m^2 C^-2"),tf=t2("elementaryCharge","1.602176634e-19","C"),tm=t2("bohrMagneton","9.2740100783e-24","J T^-1"),tv=t2("conductanceQuantum","7.748091729863649e-5","S"),tg=t2("inverseConductanceQuantum","12906.403729652257","ohm"),tb=t2("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ty=t2("nuclearMagneton","5.0507837461e-27","J T^-1"),tx=t2("klitzing","25812.807459304513","ohm"),tC=t2("bohrRadius","5.29177210903e-11","m"),tZ=t2("classicalElectronRadius","2.8179403262e-15","m"),t_=t2("electronMass","9.1093837015e-31","kg"),tw=t2("fermiCoupling","1.1663787e-5","GeV^-2"),tE=t3("fineStructure",.0072973525693),tN=t2("hartreeEnergy","4.3597447222071e-18","J"),tS=t2("protonMass","1.67262192369e-27","kg"),tA=t2("deuteronMass","3.3435830926e-27","kg"),tP=t2("neutronMass","1.6749271613e-27","kg"),tD=t2("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),tM=t2("rydberg","10973731.568160","m^-1"),tO=t2("thomsonCrossSection","6.6524587321e-29","m^2"),tT=t3("weakMixingAngle",.2229),tB=t3("efimovFactor",22.7),tF=t2("atomicMass","1.66053906660e-27","kg"),tR=t2("avogadro","6.02214076e23","mol^-1"),tk=t2("boltzmann","1.380649e-23","J K^-1"),tL=t2("faraday","96485.33212331001","C mol^-1"),tI=t2("firstRadiation","3.7417718521927573e-16","W m^2"),tj=t2("loschmidt","2.686780111798444e25","m^-3"),tz=t2("gasConstant","8.31446261815324","J K^-1 mol^-1"),tU=t2("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),tY=t2("molarVolume","0.022413969545014137","m^3 mol^-1"),tX=t3("sackurTetrode",-1.16487052358),tJ=t2("secondRadiation","0.014387768775039337","m K"),tq=t2("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),tG=t2("wienDisplacement","2.897771955e-3","m K"),tH=t2("molarMass","0.99999999965e-3","kg mol^-1"),tV=t2("molarMassC12","11.9999999958e-3","kg mol^-1"),tW=t2("gravity","9.80665","m s^-2"),t$=t2("planckLength","1.616255e-35","m"),tQ=t2("planckMass","2.176435e-8","kg"),tK=t2("planckTime","5.391245e-44","s"),t0=t2("planckCharge","1.87554603778e-18","C"),t1=t2("planckTemperature","1.416785e+32","K");function t2(e,t,r){return(0,eR.d5)(e,["config","Unit","BigNumber"],e=>{var{config:i,Unit:n,BigNumber:o}=e,s=new n("BigNumber"===i.number?new o(t):parseFloat(t),r);return s.fixPrefix=!0,s})}function t3(e,t){return(0,eR.d5)(e,["config","BigNumber"],e=>{var{config:r,BigNumber:i}=e;return"BigNumber"===r.number?new i(t):t})}var t5=r(383),t4=(0,eR.d5)("Fraction",[],()=>(Object.defineProperty(t5,"name",{value:"Fraction"}),t5.prototype.constructor=t5,t5.prototype.type="Fraction",t5.prototype.isFraction=!0,t5.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},t5.fromJSON=function(e){return new t5(e)},t5),{isClass:!0}),t8=(0,eR.d5)("Matrix",[],()=>{function e(){if(!(this instanceof e))throw SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,r){throw Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,r){throw Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),t6=(0,eR.d5)("Range",[],()=>{function e(t,r,i){if(!(this instanceof e))throw SyntaxError("Constructor must be called with the new operator");var n=null!=t,o=null!=r,s=null!=i;if(n){if((0,ej.l9)(t))t=t.toNumber();else if("number"!=typeof t)throw TypeError("Parameter start must be a number")}if(o){if((0,ej.l9)(r))r=r.toNumber();else if("number"!=typeof r)throw TypeError("Parameter end must be a number")}if(s){if((0,ej.l9)(i))i=i.toNumber();else if("number"!=typeof i)throw TypeError("Parameter step must be a number")}this.start=n?parseFloat(t):0,this.end=o?parseFloat(r):0,this.step=s?parseFloat(i):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var r=t.split(":").map(function(e){return parseFloat(e)});if(r.some(function(e){return isNaN(e)}))return null;switch(r.length){case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[2],r[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,r=this.step,i=this.end-t;return(0,eI.Xx)(r)===(0,eI.Xx)(i)?e=Math.ceil(i/r):0===i&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,r=this.step,i=this.end,n=0;if(r>0)for(;t<i;)e(t,[n],this),t+=r,n++;else if(r<0)for(;t>i;)e(t,[n],this),t+=r,n++},e.prototype.map=function(e){var t=[];return this.forEach(function(r,i,n){t[i[0]]=e(r,i,n)}),t},e.prototype.toArray=function(){var e=[];return this.forEach(function(t,r){e[r[0]]=t}),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=(0,eI.WU)(this.start,e);return 1!==this.step&&(t+=":"+(0,eI.WU)(this.step,e)),t+=":"+(0,eI.WU)(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e},{isClass:!0}),t9=(0,eR.d5)("ResultSet",[],()=>{function e(t){if(!(this instanceof e))throw SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e},{isClass:!0}),t7=r(5836),re=r(9790),rt=r(6992),rr=r(2885),ri=(0,eR.d5)("DenseMatrix",["Matrix"],e=>{var{Matrix:t}=e;function r(e,t){if(!(this instanceof r))throw SyntaxError("Constructor must be called with the new operator");if(t&&!(0,ej.HD)(t))throw Error("Invalid datatype: "+t);if((0,ej.SW)(e))"DenseMatrix"===e.type?(this._data=(0,rt.d9)(e._data),this._size=(0,rt.d9)(e._size)):(this._data=e.toArray(),this._size=e.size()),this._datatype=t||e._datatype;else if(e&&(0,ej.kJ)(e.data)&&(0,ej.kJ)(e.size))this._data=e.data,this._size=e.size,(0,t7.Gu)(this._data,this._size),this._datatype=t||e.datatype;else if((0,ej.kJ)(e))this._data=function e(t){return(0,ej.SW)(t)?e(t.valueOf()):(0,ej.kJ)(t)?t.map(e):t}(e),this._size=(0,t7.aJ)(this._data),(0,t7.Gu)(this._data,this._size),this._datatype=t;else if(e)throw TypeError("Unsupported type of data ("+(0,ej.kM)(e)+")");else this._data=[],this._size=[0],this._datatype=t}function i(e,t,r){if(0===t.length){for(var i=e._data;(0,ej.kJ)(i);)i=i[0];return i}return e._size=t.slice(0),e._data=(0,t7.SI)(e._data,e._size,r),e}function n(e,t,r){for(var n=e._size.slice(0),o=!1;n.length<t.length;)n.push(0),o=!0;for(var s=0,a=t.length;s<a;s++)t[s]>n[s]&&(n[s]=t[s],o=!0);o&&i(e,n,r)}return r.prototype=new t,r.prototype.createDenseMatrix=function(e,t){return new r(e,t)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return(0,t7.$q)(this._data,ej.kM)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.subset=function(e,t,i){switch(arguments.length){case 1:return function(e,t){if(!(0,ej.dh)(t))throw TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var i=t.size();if(i.length!==e._size.length)throw new rr.m(i.length,e._size.length);for(var n=t.min(),o=t.max(),s=0,a=e._size.length;s<a;s++)(0,t7.Ls)(n[s],e._size[s]),(0,t7.Ls)(o[s],e._size[s]);return new r(function e(t,r,i,n){var o=n===i-1,s=r.dimension(n);return o?s.map(function(e){return(0,t7.Ls)(e,t.length),t[e]}).valueOf():s.map(function(o){return(0,t7.Ls)(o,t.length),e(t[o],r,i,n+1)}).valueOf()}(e._data,t,i.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,t,r,i){if(!t||!0!==t.isIndex)throw TypeError("Invalid index");var o,s=t.size(),a=t.isScalar();if((0,ej.SW)(r)?(o=r.size(),r=r.valueOf()):o=(0,t7.aJ)(r),a){if(0!==o.length)throw TypeError("Scalar expected");e.set(t.min(),r,i)}else{if(!(0,rt.J5)(o,s))try{r=0===o.length?(0,t7.UF)([r],s):(0,t7.UF)(r,s),o=(0,t7.aJ)(r)}catch(e){}if(s.length<e._size.length)throw new rr.m(s.length,e._size.length,"<");if(o.length<s.length){for(var u=0,l=0;1===s[u]&&1===o[u];)u++;for(;1===s[u];)l++,u++;r=(0,t7.f4)(r,s.length,l,o)}if(!(0,rt.J5)(s,o))throw new rr.m(s,o,">");n(e,t.max().map(function(e){return e+1}),i);var c=s.length;(function e(t,r,i,n,o){var s=o===n-1,a=r.dimension(o);s?a.forEach(function(e,r){(0,t7.Ls)(e),t[e]=i[r[0]]}):a.forEach(function(s,a){(0,t7.Ls)(s),e(t[s],r,i[a[0]],n,o+1)})})(e._data,t,r,c,0)}return e}(this,e,t,i);default:throw SyntaxError("Wrong number of arguments")}},r.prototype.get=function(e){if(!(0,ej.kJ)(e))throw TypeError("Array expected");if(e.length!==this._size.length)throw new rr.m(e.length,this._size.length);for(var t=0;t<e.length;t++)(0,t7.Ls)(e[t],this._size[t]);for(var r=this._data,i=0,n=e.length;i<n;i++){var o=e[i];(0,t7.Ls)(o,r.length),r=r[o]}return r},r.prototype.set=function(e,t,r){if(!(0,ej.kJ)(e))throw TypeError("Array expected");if(e.length<this._size.length)throw new rr.m(e.length,this._size.length,"<");n(this,e.map(function(e){return e+1}),r);var i,o,s,a=this._data;for(i=0,o=e.length-1;i<o;i++)s=e[i],(0,t7.Ls)(s,a.length),a=a[s];return s=e[e.length-1],(0,t7.Ls)(s,a.length),a[s]=t,this},r.prototype.resize=function(e,t,r){if(!(0,ej.uZ)(e))throw TypeError("Array or Matrix expected");var n=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);return i(r?this.clone():this,n,t)},r.prototype.reshape=function(e,t){var r=t?this.clone():this;r._data=(0,t7.XL)(r._data,e);var i=r._size.reduce((e,t)=>e*t);return r._size=(0,t7.eu)(e,i),r},r.prototype.clone=function(){return new r({data:(0,rt.d9)(this._data),size:(0,rt.d9)(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e){var t=this,i=eY(e),n=function r(n,o){return(0,ej.kJ)(n)?n.map(function(e,t){return r(e,o.concat(t))}):1===i?e(n):2===i?e(n,o):e(n,o,t)}(this._data,[]),o=void 0!==this._datatype?(0,t7.$q)(n,ej.kM):void 0;return new r(n,o)},r.prototype.forEach=function(e){var t=this;!function r(i,n){(0,ej.kJ)(i)?i.forEach(function(e,t){r(e,n.concat(t))}):e(i,n,t)}(this._data,[])},r.prototype[Symbol.iterator]=function*(){var e=function* e(t,r){if((0,ej.kJ)(t))for(var i=0;i<t.length;i++)yield*e(t[i],r.concat(i));else yield{value:t,index:r}};yield*e(this._data,[])},r.prototype.rows=function(){var e=[];if(2!==this.size().length)throw TypeError("Rows can only be returned for a 2D matrix.");for(var t of this._data)e.push(new r([t],this._datatype));return e},r.prototype.columns=function(){var e=this,t=[],i=this.size();if(2!==i.length)throw TypeError("Rows can only be returned for a 2D matrix.");for(var n=this._data,o=function(i){var o=n.map(e=>[e[i]]);t.push(new r(o,e._datatype))},s=0;s<i[1];s++)o(s);return t},r.prototype.toArray=function(){return(0,rt.d9)(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(e){return(0,re.WU)(this._data,e)},r.prototype.toString=function(){return(0,re.WU)(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if((0,ej.l9)(e)&&(e=e.toNumber()),!(0,ej.hj)(e)||!(0,eI.U)(e))throw TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,i=e<0?-e:0,n=Math.min(this._size[0]-i,this._size[1]-t),o=[],s=0;s<n;s++)o[s]=this._data[s+i][s+t];return new r({data:o,size:[n],datatype:this._datatype})},r.diagonal=function(e,t,i,n){if(!(0,ej.kJ)(e))throw TypeError("Array expected, size parameter");if(2!==e.length)throw Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if((0,ej.l9)(e)&&(e=e.toNumber()),!(0,ej.hj)(e)||!(0,eI.U)(e)||e<1)throw Error("Size values must be positive integers");return e}),i){if((0,ej.l9)(i)&&(i=i.toNumber()),!(0,ej.hj)(i)||!(0,eI.U)(i))throw TypeError("The parameter k must be an integer number")}else i=0;var o,s=i>0?i:0,a=i<0?-i:0,u=e[0],l=e[1],c=Math.min(u-a,l-s);if((0,ej.kJ)(t)){if(t.length!==c)throw Error("Invalid value array length");o=function(e){return t[e]}}else if((0,ej.SW)(t)){var h=t.size();if(1!==h.length||h[0]!==c)throw Error("Invalid matrix length");o=function(e){return t.get([e])}}else o=function(){return t};n||(n=(0,ej.l9)(o(0))?o(0).mul(0):0);var d=[];if(e.length>0){d=(0,t7.SI)(d,e,n);for(var p=0;p<c;p++)d[p+a][p+s]=o(p)}return new r({data:d,size:[u,l]})},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(e,t){if(!(0,ej.hj)(e)||!(0,eI.U)(e)||!(0,ej.hj)(t)||!(0,eI.U)(t))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");return(0,t7.Ls)(e,this._size[0]),(0,t7.Ls)(t,this._size[0]),r._swapRows(e,t,this._data),this},r._swapRows=function(e,t,r){var i=r[e];r[e]=r[t],r[t]=i},r},{isClass:!0}),rn=(0,eR.d5)("replacer",[],()=>function(e,t){return"number"==typeof t&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),ro=r(7425),rs=r(2187),ra=function(){return ra=ro.create,ro},ru=(0,eR.d5)("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var{BigNumber:t,Complex:r,DenseMatrix:i,Fraction:n}=e,o=ra();return o.clear(),o.addTypes([{name:"number",test:ej.hj},{name:"Complex",test:ej.Mc},{name:"BigNumber",test:ej.l9},{name:"Fraction",test:ej.yQ},{name:"Unit",test:ej.wr},{name:"identifier",test:e=>ej.HD&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(e)},{name:"string",test:ej.HD},{name:"Chain",test:ej.qg},{name:"Array",test:ej.kJ},{name:"Matrix",test:ej.SW},{name:"DenseMatrix",test:ej.jH},{name:"SparseMatrix",test:ej.sA},{name:"Range",test:ej.bR},{name:"Index",test:ej.dh},{name:"boolean",test:ej.jn},{name:"ResultSet",test:ej.cB},{name:"Help",test:ej.x1},{name:"function",test:ej.mf},{name:"Date",test:ej.J_},{name:"RegExp",test:ej.Kj},{name:"null",test:ej.Ft},{name:"undefined",test:ej.o8},{name:"AccessorNode",test:ej.Yz},{name:"ArrayNode",test:ej.j0},{name:"AssignmentNode",test:ej.Bp},{name:"BlockNode",test:ej.zh},{name:"ConditionalNode",test:ej.tS},{name:"ConstantNode",test:ej.nu},{name:"FunctionNode",test:ej.VO},{name:"FunctionAssignmentNode",test:ej.l7},{name:"IndexNode",test:ej.Cl},{name:"Node",test:ej.UG},{name:"ObjectNode",test:ej.Lr},{name:"OperatorNode",test:ej.bV},{name:"ParenthesisNode",test:ej.Ig},{name:"RangeNode",test:ej.ex},{name:"RelationalNode",test:ej.Zi},{name:"SymbolNode",test:ej.FG},{name:"Map",test:rs._N},{name:"Object",test:ej.Kn}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(e){if(t||rl(e),(0,eI.nz)(e)>15)throw TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return r||rc(e),new r(e,0)}},{from:"BigNumber",to:"Complex",convert:function(e){return r||rc(e),new r(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return r||rc(e),new r(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){n||rh(e);var t=new n(e);if(t.valueOf()!==e)throw TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||rl(e);try{return new t(e)}catch(t){throw Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){n||rh(e);try{return new n(e)}catch(t){throw Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){r||rc(e);try{return new r(e)}catch(t){throw Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||rl(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return n||rh(e),new n(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return i||function(){throw Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}]),o.onMismatch=(e,t,r)=>{var i=o.createError(e,t,r);if(["wrongType","mismatch"].includes(i.data.category)&&1===t.length&&(0,ej.uZ)(t[0])&&r.some(e=>!e.params.includes(","))){var n=TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw n.data=i.data,n}throw i},o.onMismatch=(e,t,r)=>{var i=o.createError(e,t,r);if(["wrongType","mismatch"].includes(i.data.category)&&1===t.length&&(0,ej.uZ)(t[0])&&r.some(e=>!e.params.includes(","))){var n=TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw n.data=i.data,n}throw i},o});function rl(e){throw Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function rc(e){throw Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function rh(e){throw Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var rd=r(2248),rp="number",rf="number, number";function rm(e){return Math.abs(e)}function rv(e,t){return e+t}function rg(e,t){return e-t}function rb(e,t){return e*t}function ry(e){return-e}function rx(e){return e}function rC(e){return(0,eI.eK)(e)}function rZ(e){return e*e*e}function r_(e){return Math.exp(e)}function rw(e){return(0,eI.t$)(e)}function rE(e,t){if(!(0,eI.U)(e)||!(0,eI.U)(t))throw Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var r,i=e*t;0!==t;)t=e%(r=t),e=r;return Math.abs(i/e)}function rN(e){return(0,eI.mv)(e)}function rS(e){return(0,eI.k3)(e)}function rA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=t<0;if(r&&(t=-t),0===t)throw Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw Error("Root must be odd when a is negative.");if(0===e)return r?1/0:0;if(!isFinite(e))return r?0:e;var i=Math.pow(Math.abs(e),1/t);return i=e<0?-i:i,r?1/i:i}function rP(e){return(0,eI.Xx)(e)}function rD(e){return e*e}function rM(e,t){var r,i,n,o=0,s=1,a=1,u=0;if(!(0,eI.U)(e)||!(0,eI.U)(t))throw Error("Parameters in function xgcd must be integer numbers");for(;t;)i=Math.floor(e/t),n=e-i*t,r=o,o=s-i*o,s=r,r=a,a=u-i*a,u=r,e=t,t=n;return e<0?[-e,-s,-u]:[e,e?s:0,u]}function rO(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function rT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(0,eI.U)(t)||t<0||t>15)throw Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat((0,eI.FH)(e,t))}rm.signature=rp,rv.signature=rf,rg.signature=rf,rb.signature=rf,ry.signature=rp,rx.signature=rp,rC.signature=rp,rZ.signature=rp,r_.signature=rp,rw.signature=rp,rE.signature=rf,rN.signature=rp,rS.signature=rp,rP.signature=rp,rD.signature=rp,rM.signature=rf,rO.signature=rf;var rB="unaryPlus",rF=(0,eR.d5)(rB,["typed","config","BigNumber"],e=>{var{typed:t,config:r,BigNumber:i}=e;return t(rB,{number:rx,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),"boolean | string":function(e){return"BigNumber"===r.number?new i(+e):+e}})}),rR=(0,eR.d5)("abs",["typed"],e=>{var{typed:t}=e;return t("abs",{number:rm,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0))})}),rk="acos",rL=(0,eR.d5)(rk,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(rk,{number:function(e){return e>=-1&&e<=1||r.predictable?Math.acos(e):new i(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()}})}),rI="number";function rj(e){return(0,eI.__)(e)}function rz(e){return Math.atan(1/e)}function rU(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function rY(e){return Math.asin(1/e)}function rX(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function rJ(e){return Math.acos(1/e)}function rq(e){var t=1/e;return Math.log(Math.sqrt(t*t-1)+t)}function rG(e){return(0,eI.Vf)(e)}function rH(e){return(0,eI.C8)(e)}function rV(e){return 1/Math.tan(e)}function rW(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function r$(e){return 1/Math.sin(e)}function rQ(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*(0,eI.Xx)(e)}function rK(e){return 1/Math.cos(e)}function r0(e){return 2/(Math.exp(e)+Math.exp(-e))}function r1(e){return(0,eI.R_)(e)}rj.signature=rI,rz.signature=rI,rU.signature=rI,rY.signature=rI,rX.signature=rI,rJ.signature=rI,rq.signature=rI,rG.signature=rI,rH.signature=rI,rV.signature=rI,rW.signature=rI,r$.signature=rI,rQ.signature=rI,rK.signature=rI,r0.signature=rI,r1.signature=rI;var r2="acot",r3=(0,eR.d5)(r2,["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t(r2,{number:rz,Complex:function(e){return e.acot()},BigNumber:function(e){return new r(1).div(e).atan()}})}),r5="acsc",r4=(0,eR.d5)(r5,["typed","config","Complex","BigNumber"],e=>{var{typed:t,config:r,Complex:i,BigNumber:n}=e;return t(r5,{number:function(e){return e<=-1||e>=1||r.predictable?rY(e):new i(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new n(1).div(e).asin()}})}),r8="addScalar",r6=(0,eR.d5)(r8,["typed"],e=>{var{typed:t}=e;return t(r8,{"number, number":rv,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":t.referToSelf(e=>(r,i)=>{if(null===r.value||void 0===r.value)throw Error("Parameter x contains a unit with undefined value");if(null===i.value||void 0===i.value)throw Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw Error("Units do not match");var n=r.clone();return n.value=t.find(e,[n.valueType(),i.valueType()])(n.value,i.value),n.fixPrefix=!1,n})})}),r9=(0,eR.d5)("arg",["typed"],e=>{var{typed:t}=e;return t("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),r7="asech",ie=(0,eR.d5)(r7,["typed","config","Complex","BigNumber"],e=>{var{typed:t,config:r,Complex:i,BigNumber:n}=e;return t(r7,{number:function(e){if(e<=1&&e>=-1||r.predictable){var t=1/e;return t>0||r.predictable?rq(e):new i(Math.log(Math.sqrt(t*t-1)-t),Math.PI)}return new i(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new n(1).div(e).acosh()}})}),it=(0,eR.d5)("asinh",["typed"],e=>{var{typed:t}=e;return t("asinh",{number:rG,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()}})}),ir=(0,eR.d5)("atan",["typed"],e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()}})}),ii="atanh",io=(0,eR.d5)(ii,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(ii,{number:function(e){return e<=1&&e>=-1||r.predictable?rH(e):new i(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()}})}),is=(0,eR.d5)("bignumber",["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(e){return new r(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var i=t[2],n=r(t[1]),o=new r(2).pow(Number(i));if(n.gt(o.sub(1)))throw SyntaxError('String "'.concat(e,'" is out of range'));var s=new r(2).pow(Number(i)-1);return n.gte(s)?n.sub(o):n}return new r(e)},BigNumber:function(e){return e},Unit:t.referToSelf(e=>t=>{var r=t.clone();return r.value=e(t.value),r}),Fraction:function(e){return new r(e.n).div(e.d).times(e.s)},null:function(e){return new r(0)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),ia=r(8385),iu=r(4189),il="bitNot",ic=(0,eR.d5)(il,["typed"],e=>{var{typed:t}=e;return t(il,{number:iu.NA,BigNumber:ia.Xc,"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),ih="boolean",id=(0,eR.d5)(ih,["typed"],e=>{var{typed:t}=e;return t(ih,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var r=Number(e);if(""!==e&&!isNaN(r))return!!r;throw Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),ip="clone",im=(0,eR.d5)(ip,["typed"],e=>{var{typed:t}=e;return t(ip,{any:rt.d9})});function iv(e,t){if(t<e)return 1;if(t===e)return t;var r=t+e>>1;return iv(e,r)*iv(r+1,t)}function ig(e,t){if(!(0,eI.U)(e)||e<0||!(0,eI.U)(t)||t<0)throw TypeError("Positive integer value expected in function combinations");if(t>e)throw TypeError("k must be less than or equal to n");for(var r=e-t,i=1,n=t<r?r+1:t+1,o=2,s=t<r?t:r,a=n;a<=e;++a)for(i*=a;o<=s&&i%o==0;)i/=o,++o;return o<=s&&(i/=iv(o,s)),i}ig.signature="number, number";var ib="combinations",iy=(0,eR.d5)(ib,["typed"],e=>{var{typed:t}=e;return t(ib,{"number, number":ig,"BigNumber, BigNumber":function(e,t){var r,i,n=e.constructor,o=e.minus(t),s=new n(1);if(!ix(e)||!ix(t))throw TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw TypeError("k must be less than n in function combinations");if(r=s,t.lt(o))for(i=s;i.lte(o);i=i.plus(s))r=r.times(t.plus(i)).dividedBy(i);else for(i=s;i.lte(t);i=i.plus(s))r=r.times(o.plus(i)).dividedBy(i);return r}})});function ix(e){return e.isInteger()&&e.gte(0)}var iC=(0,eR.d5)("complex",["typed","Complex"],e=>{var{typed:t,Complex:r}=e;return t("complex",{"":function(){return r.ZERO},number:function(e){return new r(e,0)},"number, number":function(e,t){return new r(e,t)},"BigNumber, BigNumber":function(e,t){return new r(e.toNumber(),t.toNumber())},Fraction:function(e){return new r(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return r(e)},null:function(e){return r(0)},Object:function(e){if("re"in e&&"im"in e)return new r(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new r(e);throw Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),iZ="conj",i_=(0,eR.d5)(iZ,["typed"],e=>{var{typed:t}=e;return t(iZ,{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),iw=(0,eR.d5)("trigUnit",["typed"],e=>{var{typed:t}=e;return{Unit:t.referToSelf(e=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw TypeError("Unit in function cot is no angle");return t.find(e,r.valueType())(r.value)})}}),iE=(0,eR.d5)("cos",["typed"],e=>{var{typed:t}=e,r=iw({typed:t});return t("cos",{number:Math.cos,"Complex | BigNumber":e=>e.cos()},r)}),iN=(0,eR.d5)("cot",["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e,i=iw({typed:t});return t("cot",{number:rV,Complex:e=>e.cot(),BigNumber:e=>new r(1).div(e.tan())},i)}),iS=(0,eR.d5)("csc",["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e,i=iw({typed:t});return t("csc",{number:r$,Complex:e=>e.csc(),BigNumber:e=>new r(1).div(e.sin())},i)}),iA="cube",iP=(0,eR.d5)(iA,["typed"],e=>{var{typed:t}=e;return t(iA,{number:rZ,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},Unit:function(e){return e.pow(3)}})});function iD(e,t,r){if(null==r)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var n=e.constructor.max(e.abs(),t.abs());return i.lte(n.times(r))}return!1}var iM=(0,eR.d5)("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(e=>(r,i)=>{if(!r.equalBase(i))throw Error("Cannot compare units with different base");return t.find(e,[r.valueType(),i.valueType()])(r.value,i.value)})}}),iO="equalScalar",iT=(0,eR.d5)(iO,["typed","config"],e=>{var{typed:t,config:r}=e,i=iM({typed:t});return t(iO,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return(0,eI.RI)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||iD(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){var i;return i=r.epsilon,(0,eI.RI)(e.re,t.re,i)&&(0,eI.RI)(e.im,t.im,i)}},i)});(0,eR.d5)(iO,["typed","config"],e=>{var{typed:t,config:r}=e;return t(iO,{"number, number":function(e,t){return(0,eI.RI)(e,t,r.epsilon)}})});var iB=(0,eR.d5)("erf",["typed"],e=>{var{typed:t}=e;return t("name",{number:function(e){var t=Math.abs(e);return t>=iI?(0,eI.Xx)(e):t<=iF?(0,eI.Xx)(e)*function(e){var t,r=e*e,i=ik[0][4]*r,n=r;for(t=0;t<3;t+=1)i=(i+ik[0][t])*r,n=(n+iL[0][t])*r;return e*(i+ik[0][3])/(n+iL[0][3])}(t):t<=4?(0,eI.Xx)(e)*(1-function(e){var t,r=ik[1][8]*e,i=e;for(t=0;t<7;t+=1)r=(r+ik[1][t])*e,i=(i+iL[1][t])*e;var n=(r+ik[1][7])/(i+iL[1][7]),o=parseInt(16*e)/16;return Math.exp(-o*o)*Math.exp(-((e-o)*(e+o)))*n}(t)):(0,eI.Xx)(e)*(1-function(e){var t,r=1/(e*e),i=ik[2][5]*r,n=r;for(t=0;t<4;t+=1)i=(i+ik[2][t])*r,n=(n+iL[2][t])*r;var o=r*(i+ik[2][4])/(n+iL[2][4]);o=(iR-o)/e,r=parseInt(16*e)/16;var s=(e-r)*(e+r);return Math.exp(-r*r)*Math.exp(-s)*o}(t))},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),iF=.46875,iR=.5641895835477563,ik=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,6587491615298378e-19,.016315387137302097]],iL=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],iI=9007199254740992,ij=(0,eR.d5)("exp",["typed"],e=>{var{typed:t}=e;return t("exp",{number:r_,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()}})}),iz="expm1",iU=(0,eR.d5)(iz,["typed","Complex"],e=>{var{typed:t,Complex:r}=e;return t(iz,{number:rw,Complex:function(e){var t=Math.exp(e.re);return new r(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)}})}),iY=r(2992),iX=(0,eR.d5)("filter",["typed"],e=>{var{typed:t}=e;return t("filter",{"Array, function":iJ,"Matrix, function":function(e,t){return e.create(iJ(e.toArray(),t))},"Array, RegExp":t7.U_,"Matrix, RegExp":function(e,t){return e.create((0,t7.U_)(e.toArray(),t))}})});function iJ(e,t){return(0,t7.hX)(e,function(e,r,i){return(0,iY.i)(t,e,[r],i,"filter")})}var iq="forEach",iG=(0,eR.d5)(iq,["typed"],e=>{var{typed:t}=e;return t(iq,{"Array, function":iH,"Matrix, function":function(e,t){e.forEach(t)}})});function iH(e,t){!function r(i,n){if(!Array.isArray(i))return(0,iY.i)(t,i,n,e,"forEach");(0,t7.Ed)(i,function(e,t){r(e,n.concat(t))})}(e,[])}var iV="format",iW=(0,eR.d5)(iV,["typed"],e=>{var{typed:t}=e;return t(iV,{any:re.WU,"any, Object | function | number | BigNumber":re.WU})}),i$="getMatrixDataType",iQ=(0,eR.d5)(i$,["typed"],e=>{var{typed:t}=e;return t(i$,{Array:function(e){return(0,t7.$q)(e,ej.kM)},Matrix:function(e){return e.getDataType()}})}),iK=(0,eR.d5)("hex",["typed","format"],e=>{var{typed:t,format:r}=e;return t("hex",{"number | BigNumber":function(e){return r(e,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(e,t){return r(e,{notation:"hex",wordSize:t})}})}),i0=(0,eR.d5)("im",["typed"],e=>{var{typed:t}=e;return t("im",{number:()=>0,"BigNumber | Fraction":e=>e.mul(0),Complex:e=>e.im,"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),i1="isInteger",i2=(0,eR.d5)(i1,["typed"],e=>{var{typed:t}=e;return t(i1,{number:eI.U,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),i3="number";function i5(e){return e<0}function i4(e){return e>0}function i8(e){return 0===e}function i6(e){return Number.isNaN(e)}i5.signature=i3,i4.signature=i3,i8.signature=i3,i6.signature=i3;var i9="isNegative",i7=(0,eR.d5)(i9,["typed"],e=>{var{typed:t}=e;return t(i9,{number:i5,BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:t.referToSelf(e=>r=>t.find(e,r.valueType())(r.value)),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),ne="isPositive",nt=(0,eR.d5)(ne,["typed"],e=>{var{typed:t}=e;return t(ne,{number:i4,BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s>0&&e.n>0},Unit:t.referToSelf(e=>r=>t.find(e,r.valueType())(r.value)),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),nr="isZero",ni=(0,eR.d5)(nr,["typed"],e=>{var{typed:t}=e;return t(nr,{number:i8,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:t.referToSelf(e=>r=>t.find(e,r.valueType())(r.value)),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})});function nn(e){if((0,eI.U)(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:iv(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*nn(1-e));if(e>=171.35)return 1/0;if(e>85){var t,r=e*e,i=r*e,n=i*e,o=n*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*i)-571/(2488320*n)+163879/(209018880*o)+5246819/(75246796800*o*e))}--e,t=ns[0];for(var s=1;s<ns.length;++s)t+=ns[s]/(e+s);var a=e+no+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}nn.signature="number";var no=4.7421875,ns=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-.00009837447530487956,1580887032249125e-19,-.00021026444172410488,21743961811521265e-20,-.0001643181065367639,8441822398385275e-20,-.000026190838401581408,36899182659531625e-22],na=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-.000005395239384953];function nu(e){if(e<0)return NaN;if(0===e)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-nu(1-e);for(var t=(e-=1)+5+.5,r=1.000000000190015,i=6;i>=1;i--)r+=na[i]/(e+i);return .9189385332046728+(e+.5)*Math.log(t)-t+Math.log(r)}nu.signature="number";var nl="lgamma",nc=(0,eR.d5)(nl,["Complex","typed"],e=>{var{Complex:t,typed:r}=e,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,8417508417508417e-19,-.0005952380952380953,7936507936507937e-19,-.002777777777777778,.08333333333333333];return r(nl,{number:nu,Complex:function e(r){if(r.isNaN())return new t(NaN,NaN);if(0===r.im)return new t(nu(r.re),0);if(r.re>=7||Math.abs(r.im)>=7)return n(r);if(r.re<=.1){var i=(0,eI.JG)(6.283185307179586,r.im)*Math.floor(.5*r.re+.25),s=r.mul(Math.PI).sin().log(),a=e(new t(1-r.re,-r.im));return new t(1.1447298858494002,i).sub(s).sub(a)}return r.im>=0?o(r):o(r.conjugate()).conjugate()},BigNumber:function(){throw Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function n(e){for(var r=e.sub(.5).mul(e.log()).sub(e).add(.9189385332046728),n=new t(1,0).div(e),o=n.div(e),s=-.029550653594771242,a=.00641025641025641,u=2*o.re,l=o.re*o.re+o.im*o.im,c=2;c<8;c++){var h=a;a=-l*s+i[c],s=u*s+h}var d=n.mul(o.mul(s).add(a));return r.add(d)}function o(e){var r=0,i=0,o=e;for(e=e.add(1);e.re<=7;){var s=(o=o.mul(e)).im<0?1:0;0!==s&&0===i&&r++,i=s,e=e.add(1)}return n(e).sub(o.log()).sub(new t(0,2*r*Math.PI*1))}}),nh="log10",nd=(0,eR.d5)(nh,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(nh,{number:function(e){return e>=0||r.predictable?rN(e):new i(e,0).log().div(Math.LN10)},Complex:function(e){return new i(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||r.predictable?e.log():new i(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),np="log2",nf=(0,eR.d5)(np,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(np,{number:function(e){return e>=0||r.predictable?rS(e):n(new i(e,0))},Complex:n,BigNumber:function(e){return!e.isNegative()||r.predictable?e.log(2):n(new i(e.toNumber(),0))},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))});function n(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new i(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}}),nm=(0,eR.d5)("map",["typed"],e=>{var{typed:t}=e;return t("map",{"Array, function":nv,"Matrix, function":function(e,t){return e.map(t)}})});function nv(e,t){return function r(i,n){return Array.isArray(i)?i.map(function(e,t){return r(e,n.concat(t))}):(0,iY.i)(t,i,n,e,"map")}(e,[])}var ng=(0,eR.d5)("multiplyScalar",["typed"],e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":rb,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})}),nb=r(6350),ny=(0,eR.d5)("not",["typed"],e=>{var{typed:t}=e;return t("not",{"null | undefined":()=>!0,number:nb.xY,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:t.referToSelf(e=>r=>t.find(e,r.valueType())(r.value)),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),nx=(0,eR.d5)("number",["typed"],e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t,r,i=(r=(t=e).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:t,radix:({"0b":2,"0o":8,"0x":16})[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(i)return function(e){for(var t=parseInt(e.integerPart,e.radix),r=0,i=0;i<e.fractionalPart.length;i++)r+=parseInt(e.fractionalPart[i],e.radix)/Math.pow(e.radix,i+1);var n=t+r;if(isNaN(n))throw SyntaxError('String "'+e.input+'" is not a valid number');return n}(i);var n=0,o=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(n=Number(o[2]),e=o[1]);var s=Number(e);if(isNaN(s))throw SyntaxError('String "'+e+'" is not a valid number');if(o){if(s>2**n-1)throw SyntaxError('String "'.concat(e,'" is out of range'));s>=2**(n-1)&&(s-=2**n)}return s},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:t.referToSelf(e=>t=>{var r=t.clone();return r.value=e(t.value),r}),null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))});return r.fromJSON=function(e){return parseFloat(e.value)},r}),nC=(0,eR.d5)("oct",["typed","format"],e=>{var{typed:t,format:r}=e;return t("oct",{"number | BigNumber":function(e){return r(e,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(e,t){return r(e,{notation:"oct",wordSize:t})}})}),nZ=r(3718),n_=nZ(Date.now());function nw(e){var t;return t=null===e?n_:nZ(String(e)),function(){return t()}}var nE="pickRandom",nN=(0,eR.d5)(nE,["typed","config","?on"],e=>{var{typed:t,config:r,on:i}=e,n=nw(r.randomSeed);return i&&i("config",function(e,t){e.randomSeed!==t.randomSeed&&(n=nw(e.randomSeed))}),t(nE,{"Array | Matrix":function(e){return o(e,{})},"Array | Matrix, Object":function(e,t){return o(e,t)},"Array | Matrix, number":function(e,t){return o(e,{number:t})},"Array | Matrix, Array | Matrix":function(e,t){return o(e,{weights:t})},"Array | Matrix, Array | Matrix, number":function(e,t,r){return o(e,{number:r,weights:t})},"Array | Matrix, number, Array | Matrix":function(e,t,r){return o(e,{number:t,weights:r})}});function o(e,t){var r,{number:i,weights:o,elementWise:s=!0}=t,a=void 0===i;a&&(i=1);var u=(0,ej.SW)(e)?e.create:(0,ej.SW)(o)?o.create:null;e=e.valueOf(),o&&(o=o.valueOf()),!0===s&&(e=(0,t7.xH)(e),o=(0,t7.xH)(o));var l=0;if(void 0!==o){if(o.length!==e.length)throw Error("Weights must have the same length as possibles");for(var c=0,h=o.length;c<h;c++){if(!(0,ej.hj)(o[c])||o[c]<0)throw Error("Weights must be an array of positive numbers");l+=o[c]}}for(var d=e.length,p=[];p.length<i;){if(void 0===o)r=e[Math.floor(n()*d)];else for(var f=n()*l,m=0,v=e.length;m<v;m++)if((f-=o[m])<0){r=e[m];break}p.push(r)}return a?p[0]:u?u(p):p}}),nS=r(8289);function nA(e,t){var r=[];if((e=e.slice(0)).length>1)for(var i=0,n=e.shift();i<n;i++)r.push(nA(e,t));else for(var o=0,s=e.shift();o<s;o++)r.push(t());return r}var nP="random",nD=(0,eR.d5)(nP,["typed","config","?on"],e=>{var{typed:t,config:r,on:i}=e,n=nw(r.randomSeed);return i&&i("config",function(e,t){e.randomSeed!==t.randomSeed&&(n=nw(e.randomSeed))}),t(nP,{"":()=>0+1*n(),number:e=>0+n()*(e-0),"number, number":(e,t)=>e+n()*(t-e),"Array | Matrix":e=>o(e,0,1),"Array | Matrix, number":(e,t)=>o(e,0,t),"Array | Matrix, number, number":(e,t,r)=>o(e,t,r)});function o(e,t,r){var i=nA(e.valueOf(),()=>t+n()*(r-t));return(0,ej.SW)(e)?e.create(i):i}}),nM=(0,eR.d5)("re",["typed"],e=>{var{typed:t}=e;return t("re",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.re,"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),nO=(0,eR.d5)("sec",["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e,i=iw({typed:t});return t("sec",{number:rK,Complex:e=>e.sec(),BigNumber:e=>new r(1).div(e.cos())},i)}),nT="sign",nB=(0,eR.d5)(nT,["typed","BigNumber","Fraction","complex"],e=>{var{typed:t,BigNumber:r,complex:i,Fraction:n}=e;return t(nT,{number:rP,Complex:function(e){return 0===e.im?i(rP(e.re)):e.sign()},BigNumber:function(e){return new r(e.cmp(0))},Fraction:function(e){return new n(e.s,1)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),Unit:t.referToSelf(e=>r=>{if(!r._isDerived()&&0!==r.units[0].unit.offset)throw TypeError("sign is ambiguous for units with offset");return t.find(e,r.valueType())(r.value)})})}),nF=(0,eR.d5)("sin",["typed"],e=>{var{typed:t}=e,r=iw({typed:t});return t("sin",{number:Math.sin,"Complex | BigNumber":e=>e.sin()},r)}),nR=(0,eR.d5)("SparseMatrix",["typed","equalScalar","Matrix"],e=>{var{typed:t,equalScalar:r,Matrix:i}=e;function n(e,t){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");if(t&&!(0,ej.HD)(t))throw Error("Invalid datatype: "+t);if((0,ej.SW)(e))"SparseMatrix"===e.type?(this._values=e._values?(0,rt.d9)(e._values):void 0,this._index=(0,rt.d9)(e._index),this._ptr=(0,rt.d9)(e._ptr),this._size=(0,rt.d9)(e._size),this._datatype=t||e._datatype):o(this,e.valueOf(),t||e._datatype);else if(e&&(0,ej.kJ)(e.index)&&(0,ej.kJ)(e.ptr)&&(0,ej.kJ)(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if((0,ej.kJ)(e))o(this,e,t);else if(e)throw TypeError("Unsupported type of data ("+(0,ej.kM)(e)+")");else this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}function o(e,i,n){e._values=[],e._index=[],e._ptr=[],e._datatype=n;var o=i.length,s=0,a=r,u=0;if((0,ej.HD)(n)&&(a=t.find(r,[n,n])||r,u=t.convert(0,n)),o>0){var l=0;do{e._ptr.push(e._index.length);for(var c=0;c<o;c++){var h=i[c];if((0,ej.kJ)(h)){if(0===l&&s<h.length&&(s=h.length),l<h.length){var d=h[l];a(d,u)||(e._values.push(d),e._index.push(c))}}else 0===l&&s<1&&(s=1),a(h,u)||(e._values.push(h),e._index.push(c))}l++}while(l<s)}e._ptr.push(e._index.length),e._size=[o,s]}function s(e,t,r,i){if(r-t==0)return r;for(var n=t;n<r;n++)if(i[n]===e)return n;return t}function a(e,t,r,i,n,o,s){n.splice(e,0,i),o.splice(e,0,t);for(var a=r+1;a<s.length;a++)s[a]++}function u(e,i,n,o){var s,a,u,l=o||0,c=r,h=0;(0,ej.HD)(e._datatype)&&(c=t.find(r,[e._datatype,e._datatype])||r,h=t.convert(0,e._datatype),l=t.convert(l,e._datatype));var d=!c(l,h),p=e._size[0],f=e._size[1];if(n>f){for(a=f;a<n;a++)if(e._ptr[a]=e._values.length,d)for(s=0;s<p;s++)e._values.push(l),e._index.push(s);e._ptr[n]=e._values.length}else n<f&&(e._ptr.splice(n+1,f-n),e._values.splice(e._ptr[n],e._values.length),e._index.splice(e._ptr[n],e._index.length));if(f=n,i>p){if(d){var m=0;for(a=0;a<f;a++){e._ptr[a]=e._ptr[a]+m,u=e._ptr[a+1]+m;var v=0;for(s=p;s<i;s++,v++)e._values.splice(u+v,0,l),e._index.splice(u+v,0,s),m++}e._ptr[f]=e._values.length}}else if(i<p){var g=0;for(a=0;a<f;a++){e._ptr[a]=e._ptr[a]-g;var b=e._ptr[a],y=e._ptr[a+1]-g;for(u=b;u<y;u++)(s=e._index[u])>i-1&&(e._values.splice(u,1),e._index.splice(u,1),g++)}e._ptr[a]=e._values.length}return e._size[0]=i,e._size[1]=n,e}function l(e,t,r,i,n){var o,s,a=i[0],u=i[1],l=[];for(o=0;o<a;o++)for(s=0,l[o]=[];s<u;s++)l[o][s]=0;for(s=0;s<u;s++)for(var c=r[s],h=r[s+1],d=c;d<h;d++)l[o=t[d]][s]=e?n?(0,rt.d9)(e[d]):e[d]:1;return l}return n.prototype=new i,n.prototype.createSparseMatrix=function(e,t){return new n(e,t)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return(0,t7.$q)(this._values,ej.kM)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},n.prototype.subset=function(e,t,r){if(!this._values)throw Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,t){if(!(0,ej.dh)(t))throw TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r,i,o,s,a=t.size();if(a.length!==e._size.length)throw new rr.m(a.length,e._size.length);var u=t.min(),l=t.max();for(r=0,i=e._size.length;r<i;r++)(0,t7.Ls)(u[r],e._size[r]),(0,t7.Ls)(l[r],e._size[r]);var c=e._values,h=e._index,d=e._ptr,p=t.dimension(0),f=t.dimension(1),m=[],v=[];p.forEach(function(e,t){v[e]=t[0],m[e]=!0});var g=c?[]:void 0,b=[],y=[];return f.forEach(function(e){for(y.push(b.length),o=d[e],s=d[e+1];o<s;o++)!0===m[r=h[o]]&&(b.push(v[r]),g&&g.push(c[o]))}),y.push(b.length),new n({values:g,index:b,ptr:y,size:a,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,r,i){if(!t||!0!==t.isIndex)throw TypeError("Invalid index");var n,o=t.size(),s=t.isScalar();if((0,ej.SW)(r)?(n=r.size(),r=r.toArray()):n=(0,t7.aJ)(r),s){if(0!==n.length)throw TypeError("Scalar expected");e.set(t.min(),r,i)}else{if(1!==o.length&&2!==o.length)throw new rr.m(o.length,e._size.length,"<");if(n.length<o.length){for(var a=0,u=0;1===o[a]&&1===n[a];)a++;for(;1===o[a];)u++,a++;r=(0,t7.f4)(r,o.length,u,n)}if(!(0,rt.J5)(o,n))throw new rr.m(o,n,">");if(1===o.length)t.dimension(0).forEach(function(t,n){(0,t7.Ls)(t),e.set([t,0],r[n[0]],i)});else{var l=t.dimension(0),c=t.dimension(1);l.forEach(function(t,n){(0,t7.Ls)(t),c.forEach(function(o,s){(0,t7.Ls)(o),e.set([t,o],r[n[0]][s[0]],i)})})}}return e}(this,e,t,r);default:throw SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!(0,ej.kJ)(e))throw TypeError("Array expected");if(e.length!==this._size.length)throw new rr.m(e.length,this._size.length);if(!this._values)throw Error("Cannot invoke get on a Pattern only matrix");var t=e[0],r=e[1];(0,t7.Ls)(t,this._size[0]),(0,t7.Ls)(r,this._size[1]);var i=s(t,this._ptr[r],this._ptr[r+1],this._index);return i<this._ptr[r+1]&&this._index[i]===t?this._values[i]:0},n.prototype.set=function(e,i,n){if(!(0,ej.kJ)(e))throw TypeError("Array expected");if(e.length!==this._size.length)throw new rr.m(e.length,this._size.length);if(!this._values)throw Error("Cannot invoke set on a Pattern only matrix");var o=e[0],l=e[1],c=this._size[0],h=this._size[1],d=r,p=0;(0,ej.HD)(this._datatype)&&(d=t.find(r,[this._datatype,this._datatype])||r,p=t.convert(0,this._datatype)),(o>c-1||l>h-1)&&(u(this,Math.max(o+1,c),Math.max(l+1,h),n),c=this._size[0],h=this._size[1]),(0,t7.Ls)(o,c),(0,t7.Ls)(l,h);var f=s(o,this._ptr[l],this._ptr[l+1],this._index);return f<this._ptr[l+1]&&this._index[f]===o?d(i,p)?function(e,t,r,i,n){r.splice(e,1),i.splice(e,1);for(var o=t+1;o<n.length;o++)n[o]--}(f,l,this._values,this._index,this._ptr):this._values[f]=i:d(i,p)||a(f,o,l,i,this._values,this._index,this._ptr),this},n.prototype.resize=function(e,t,r){if(!(0,ej.uZ)(e))throw TypeError("Array or Matrix expected");var i=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);if(2!==i.length)throw Error("Only two dimensions matrix are supported");return i.forEach(function(e){if(!(0,ej.hj)(e)||!(0,eI.U)(e)||e<0)throw TypeError("Invalid size, must contain positive integers (size: "+(0,re.WU)(i)+")")}),u(r?this.clone():this,i[0],i[1],t)},n.prototype.reshape=function(e,t){if(!(0,ej.kJ)(e))throw TypeError("Array expected");if(2!==e.length)throw Error("Sparse matrices can only be reshaped in two dimensions");e.forEach(function(t){if(!(0,ej.hj)(t)||!(0,eI.U)(t)||t<=-2||0===t)throw TypeError("Invalid size, must contain positive integers or -1 (size: "+(0,re.WU)(e)+")")});var r=this._size[0]*this._size[1],i=(e=(0,t7.eu)(e,r))[0]*e[1];if(r!==i)throw Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var o=[],u=0;u<n._ptr.length;u++)for(var l=0;l<n._ptr[u+1]-n._ptr[u];l++)o.push(u);for(var c=n._values.slice(),h=n._index.slice(),d=0;d<n._index.length;d++){var p=h[d],f=o[d],m=p*n._size[1]+f;o[d]=m%e[1],h[d]=Math.floor(m/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var v=0;v<n._ptr.length;v++)n._ptr[v]=0;for(var g=0;g<c.length;g++){var b=h[g],y=o[g],x=c[g];a(s(b,n._ptr[y],n._ptr[y+1],n._index),b,y,x,n._values,n._index,n._ptr)}return n},n.prototype.clone=function(){return new n({values:this._values?(0,rt.d9)(this._values):void 0,index:(0,rt.d9)(this._index),ptr:(0,rt.d9)(this._ptr),size:(0,rt.d9)(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e,i){if(!this._values)throw Error("Cannot invoke map on a Pattern only matrix");var o=this,s=this._size[0],a=this._size[1],u=eY(e);return function(e,i,o,s,a,u,l){var c=[],h=[],d=[],p=r,f=0;(0,ej.HD)(e._datatype)&&(p=t.find(r,[e._datatype,e._datatype])||r,f=t.convert(0,e._datatype));for(var m=function(e,t,r){e=u(e,t,r),p(e,f)||(c.push(e),h.push(t))},v=s;v<=a;v++){d.push(c.length);var g=e._ptr[v],b=e._ptr[v+1];if(l)for(var y=g;y<b;y++){var x=e._index[y];x>=i&&x<=o&&m(e._values[y],x-i,v-s)}else{for(var C={},Z=g;Z<b;Z++)C[e._index[Z]]=e._values[Z];for(var _=i;_<=o;_++)m(_ in C?C[_]:0,_-i,v-s)}}return d.push(c.length),new n({values:c,index:h,ptr:d,size:[o-i+1,a-s+1]})}(this,0,s-1,0,a-1,function(t,r,i){return 1===u?e(t):2===u?e(t,[r,i]):e(t,[r,i],o)},i)},n.prototype.forEach=function(e,t){if(!this._values)throw Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],i=this._size[1],n=0;n<i;n++){var o=this._ptr[n],s=this._ptr[n+1];if(t)for(var a=o;a<s;a++){var u=this._index[a];e(this._values[a],[u,n],this)}else{for(var l={},c=o;c<s;c++)l[this._index[c]]=this._values[c];for(var h=0;h<r;h++)e(h in l?l[h]:0,[h,n],this)}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var r=this._ptr[t],i=this._ptr[t+1],n=r;n<i;n++){var o=this._index[n];yield{value:this._values[n],index:[o,t]}}},n.prototype.toArray=function(){return l(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return l(this._values,this._index,this._ptr,this._size,!1)},n.prototype.format=function(e){for(var t=this._size[0],r=this._size[1],i=this.density(),n="Sparse Matrix ["+(0,re.WU)(t,e)+" x "+(0,re.WU)(r,e)+"] density: "+(0,re.WU)(i,e)+"\n",o=0;o<r;o++)for(var s=this._ptr[o],a=this._ptr[o+1],u=s;u<a;u++){var l=this._index[u];n+="\n    ("+(0,re.WU)(l,e)+", "+(0,re.WU)(o,e)+") ==> "+(this._values?(0,re.WU)(this._values[u],e):"X")}return n},n.prototype.toString=function(){return(0,re.WU)(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if((0,ej.l9)(e)&&(e=e.toNumber()),!(0,ej.hj)(e)||!(0,eI.U)(e))throw TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],s=Math.min(i-r,o-t),a=[],u=[],l=[];l[0]=0;for(var c=t;c<o&&a.length<s;c++)for(var h=this._ptr[c],d=this._ptr[c+1],p=h;p<d;p++){var f=this._index[p];if(f===c-t+r){a.push(this._values[p]),u[a.length-1]=f-r;break}}return l.push(a.length),new n({values:a,index:u,ptr:l,size:[s,1]})},n.fromJSON=function(e){return new n(e)},n.diagonal=function(e,i,o,s,a){if(!(0,ej.kJ)(e))throw TypeError("Array expected, size parameter");if(2!==e.length)throw Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if((0,ej.l9)(e)&&(e=e.toNumber()),!(0,ej.hj)(e)||!(0,eI.U)(e)||e<1)throw Error("Size values must be positive integers");return e}),o){if((0,ej.l9)(o)&&(o=o.toNumber()),!(0,ej.hj)(o)||!(0,eI.U)(o))throw TypeError("The parameter k must be an integer number")}else o=0;var u,l=r,c=0;(0,ej.HD)(a)&&(l=t.find(r,[a,a])||r,c=t.convert(0,a));var h=o>0?o:0,d=o<0?-o:0,p=e[0],f=e[1],m=Math.min(p-d,f-h);if((0,ej.kJ)(i)){if(i.length!==m)throw Error("Invalid value array length");u=function(e){return i[e]}}else if((0,ej.SW)(i)){var v=i.size();if(1!==v.length||v[0]!==m)throw Error("Invalid matrix length");u=function(e){return i.get([e])}}else u=function(){return i};for(var g=[],b=[],y=[],x=0;x<f;x++){y.push(g.length);var C=x-h;if(C>=0&&C<m){var Z=u(C);l(Z,c)||(b.push(C+d),g.push(Z))}}return y.push(g.length),new n({values:g,index:b,ptr:y,size:[p,f]})},n.prototype.swapRows=function(e,t){if(!(0,ej.hj)(e)||!(0,eI.U)(e)||!(0,ej.hj)(t)||!(0,eI.U)(t))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");return(0,t7.Ls)(e,this._size[0]),(0,t7.Ls)(t,this._size[0]),n._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(e,t,r,i,n){for(var o=i[e],s=i[e+1],a=o;a<s;a++)n(r[a],t[a])},n._swapRows=function(e,t,r,i,n,o){for(var a=0;a<r;a++){var u=o[a],l=o[a+1],c=s(e,u,l,n),h=s(t,u,l,n);if(c<l&&h<l&&n[c]===e&&n[h]===t){if(i){var d=i[c];i[c]=i[h],i[h]=d}continue}if(c<l&&n[c]===e&&(h>=l||n[h]!==t)){var p=i?i[c]:void 0;n.splice(h,0,t),i&&i.splice(h,0,p),n.splice(h<=c?c+1:c,1),i&&i.splice(h<=c?c+1:c,1);continue}if(h<l&&n[h]===t&&(c>=l||n[c]!==e)){var f=i?i[h]:void 0;n.splice(c,0,e),i&&i.splice(c,0,f),n.splice(c<=h?h+1:h,1),i&&i.splice(c<=h?h+1:h,1)}}},n},{isClass:!0}),nk="splitUnit",nL=(0,eR.d5)(nk,["typed"],e=>{var{typed:t}=e;return t(nk,{"Unit, Array":function(e,t){return e.splitUnit(t)}})}),nI="square",nj=(0,eR.d5)(nI,["typed"],e=>{var{typed:t}=e;return t(nI,{number:rD,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},Unit:function(e){return e.pow(2)}})}),nz="string",nU=(0,eR.d5)(nz,["typed"],e=>{var{typed:t}=e;return t(nz,{"":function(){return""},number:eI.WU,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e)),any:function(e){return String(e)}})}),nY="subtractScalar",nX=(0,eR.d5)(nY,["typed"],e=>{var{typed:t}=e;return t(nY,{"number, number":rg,"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":t.referToSelf(e=>(r,i)=>{if(null===r.value||void 0===r.value)throw Error("Parameter x contains a unit with undefined value");if(null===i.value||void 0===i.value)throw Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw Error("Units do not match");var n=r.clone();return n.value=t.find(e,[n.valueType(),i.valueType()])(n.value,i.value),n.fixPrefix=!1,n})})}),nJ=(0,eR.d5)("tan",["typed"],e=>{var{typed:t}=e,r=iw({typed:t});return t("tan",{number:Math.tan,"Complex | BigNumber":e=>e.tan()},r)}),nq="typeOf",nG=(0,eR.d5)(nq,["typed"],e=>{var{typed:t}=e;return t(nq,{any:ej.kM})}),nH="acosh",nV=(0,eR.d5)(nH,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(nH,{number:function(e){return e>=1||r.predictable?rj(e):e<=-1?new i(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new i(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()}})}),nW="acsch",n$=(0,eR.d5)(nW,["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t(nW,{number:rX,Complex:function(e){return e.acsch()},BigNumber:function(e){return new r(1).div(e).asinh()}})}),nQ=r(131),nK="asec",n0=(0,eR.d5)(nK,["typed","config","Complex","BigNumber"],e=>{var{typed:t,config:r,Complex:i,BigNumber:n}=e;return t(nK,{number:function(e){return e<=-1||e>=1||r.predictable?rJ(e):new i(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new n(1).div(e).acos()}})}),n1=(0,eR.d5)("bin",["typed","format"],e=>{var{typed:t,format:r}=e;return t("bin",{"number | BigNumber":function(e){return r(e,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(e,t){return r(e,{notation:"bin",wordSize:t})}})}),n2="combinationsWithRep",n3=(0,eR.d5)(n2,["typed"],e=>{var{typed:t}=e;return t(n2,{"number, number":function(e,t){if(!(0,eI.U)(e)||e<0||!(0,eI.U)(t)||t<0)throw TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw TypeError("k must be less than or equal to n + k - 1");return t<e-1?iv(e,e+t-1)/iv(1,t):iv(t+1,e+t-1)/iv(1,e-1)},"BigNumber, BigNumber":function(e,t){var r,i,n=new e.constructor(1),o=e.minus(n);if(!n5(e)||!n5(t))throw TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(n))throw TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(r=n,t.lt(o))for(i=n;i.lte(o);i=i.plus(n))r=r.times(t.plus(i)).dividedBy(i);else for(i=n;i.lte(t);i=i.plus(n))r=r.times(o.plus(i)).dividedBy(i);return r}})});function n5(e){return e.isInteger()&&e.gte(0)}var n4="cosh",n8=(0,eR.d5)(n4,["typed"],e=>{var{typed:t}=e;return t(n4,{number:eI.f9,"Complex | BigNumber":e=>e.cosh()})}),n6="csch",n9=(0,eR.d5)(n6,["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t(n6,{number:rQ,Complex:e=>e.csch(),BigNumber:e=>new r(1).div(e.sinh())})}),n7="isNaN",oe=(0,eR.d5)(n7,["typed"],e=>{var{typed:t}=e;return t(n7,{number:i6,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":function(e){return(0,rd.Fh)(e,Number.isNaN)}})}),ot="isPrime",or=(0,eR.d5)(ot,["typed"],e=>{var{typed:t}=e;return t(ot,{number:function(e){if(0*e!=0)return!1;if(e<=3)return e>1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},BigNumber:function(e){if(0*e.toNumber()!=0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(4294967296)){for(var t=e.toNumber(),r=5;r*r<=t;r+=6)if(t%r==0||t%(r+2)==0)return!1;return!0}e=new(e.constructor.clone({precision:2*e.toFixed(0).length}))(e);for(var i=0,n=e.sub(1);n.mod(2).eq(0);)n=n.div(2),i+=1;var o=null;if(e.lt("3317044064679887385961981"))o=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(t=>t<e);else{var s=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));o=[];for(var a=2;a<=s;a+=1)o.push(s)}for(var u=0;u<o.length;u+=1){var l=o[u],c=function(e,t,r){for(var i=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(r)):(t=t.sub(1),i=e.mul(i).mod(r));return i}(e.sub(e).add(l),n,e);if(!c.eq(1)){for(var h=0,d=c;!d.eq(e.sub(1));h+=1,d=d.mul(d).mod(e))if(h===i-1)return!1}}return!0},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),oi="randomInt",on=(0,eR.d5)(oi,["typed","config","?on"],e=>{var{typed:t,config:r,on:i}=e,n=nw(r.randomSeed);return i&&i("config",function(e,t){e.randomSeed!==t.randomSeed&&(n=nw(e.randomSeed))}),t(oi,{"":()=>s(0,1),number:e=>s(0,e),"number, number":(e,t)=>s(e,t),"Array | Matrix":e=>o(e,0,1),"Array | Matrix, number":(e,t)=>o(e,0,t),"Array | Matrix, number, number":(e,t,r)=>o(e,t,r)});function o(e,t,r){var i=nA(e.valueOf(),()=>s(t,r));return(0,ej.SW)(e)?e.create(i):i}function s(e,t){return Math.floor(e+n()*(t-e))}}),oo="sech",os=(0,eR.d5)(oo,["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t(oo,{number:r0,Complex:e=>e.sech(),BigNumber:e=>new r(1).div(e.cosh())})}),oa="sinh",ou=(0,eR.d5)(oa,["typed"],e=>{var{typed:t}=e;return t(oa,{number:r1,"Complex | BigNumber":e=>e.sinh()})}),ol="sparse",oc=(0,eR.d5)(ol,["typed","SparseMatrix"],e=>{var{typed:t,SparseMatrix:r}=e;return t(ol,{"":function(){return new r([])},string:function(e){return new r([],e)},"Array | Matrix":function(e){return new r(e)},"Array | Matrix, string":function(e,t){return new r(e,t)}})}),oh=(0,eR.d5)("sqrt",["config","typed","Complex"],e=>{var{config:t,typed:r,Complex:i}=e;return r("sqrt",{number:n,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():n(e.toNumber())},Unit:function(e){return e.pow(.5)}});function n(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new i(e,0).sqrt()}}),od=(0,eR.d5)("tanh",["typed"],e=>{var{typed:t}=e;return t("tanh",{number:eI.AE,"Complex | BigNumber":e=>e.tanh()})}),op="unaryMinus",of=(0,eR.d5)(op,["typed"],e=>{var{typed:t}=e;return t(op,{number:ry,"Complex | BigNumber | Fraction":e=>e.neg(),Unit:t.referToSelf(e=>r=>{var i=r.clone();return i.value=t.find(e,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0))})}),om="acoth",ov=(0,eR.d5)(om,["typed","config","Complex","BigNumber"],e=>{var{typed:t,config:r,Complex:i,BigNumber:n}=e;return t(om,{number:function(e){return e>=1||e<=-1||r.predictable?rU(e):new i(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new n(1).div(e).atanh()}})}),og="coth",ob=(0,eR.d5)(og,["typed","BigNumber"],e=>{var{typed:t,BigNumber:r}=e;return t(og,{number:rW,Complex:e=>e.coth(),BigNumber:e=>new r(1).div(e.tanh())})}),oy=(0,eR.d5)("fraction",["typed","Fraction"],e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw Error(e+" cannot be represented as a fraction");return new r(e)},string:function(e){return new r(e)},"number, number":function(e,t){return new r(e,t)},null:function(e){return new r(0)},BigNumber:function(e){return new r(e.toString())},Fraction:function(e){return e},Unit:t.referToSelf(e=>t=>{var r=t.clone();return r.value=e(t.value),r}),Object:function(e){return new r(e)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),ox="isNumeric",oC=(0,eR.d5)(ox,["typed"],e=>{var{typed:t}=e;return t(ox,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),oZ="matrix",o_=(0,eR.d5)(oZ,["typed","Matrix","DenseMatrix","SparseMatrix"],e=>{var{typed:t,Matrix:r,DenseMatrix:i,SparseMatrix:n}=e;return t(oZ,{"":function(){return o([])},string:function(e){return o([],e)},"string, string":function(e,t){return o([],e,t)},Array:function(e){return o(e)},Matrix:function(e){return o(e,e.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(e,t,r){if("dense"===t||"default"===t||void 0===t)return new i(e,r);if("sparse"===t)return new n(e,r);throw TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}),ow="matrixFromFunction",oE=(0,eR.d5)(ow,["typed","matrix","isZero"],e=>{var{typed:t,matrix:r,isZero:i}=e;return t(ow,{"Array | Matrix, function, string, string":function(e,t,r,i){return n(e,t,r,i)},"Array | Matrix, function, string":function(e,t,r){return n(e,t,r)},"Matrix, function":function(e,t){return n(e,t,"dense")},"Array, function":function(e,t){return n(e,t,"dense").toArray()},"Array | Matrix, string, function":function(e,t,r){return n(e,r,t)},"Array | Matrix, string, string, function":function(e,t,r,i){return n(e,i,t,r)}});function n(e,t,n,o){var s;return(s=void 0!==o?r(n,o):r(n)).resize(e),s.forEach(function(e,r){var n=t(r);i(n)||s.set(r,n)}),s}}),oN="mode",oS=(0,eR.d5)(oN,["typed","isNaN","isNumeric"],e=>{var{typed:t,isNaN:r,isNumeric:i}=e;return t(oN,{"Array | Matrix":n,"...":function(e){return n(e)}});function n(e){if(0===(e=(0,t7.xH)(e.valueOf())).length)throw Error("Cannot calculate mode of an empty array");for(var t={},n=[],o=0,s=0;s<e.length;s++){var a=e[s];if(i(a)&&r(a))throw Error("Cannot calculate mode of an array containing NaN values");a in t||(t[a]=0),t[a]++,t[a]===o?n.push(a):t[a]>o&&(o=t[a],n=[a])}return n}}),oA=r(4986),oP=(0,eR.d5)("numeric",["number","?bignumber","?fraction"],e=>{var{number:t,bignumber:r,fraction:i}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:e=>t(e),BigNumber:r?e=>r(e):oA.R3,Fraction:i?e=>i(e):oA.nG};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number",r=arguments.length>2?arguments[2]:void 0;if(void 0!==r)throw SyntaxError("numeric() takes one or two arguments");var i=(0,ej.kM)(e);if(!(i in n))throw TypeError("Cannot convert "+e+' of type "'+i+'"; valid input types are '+Object.keys(n).join(", "));if(!(t in o))throw TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===i?e:o[t](e)}}),oD=r(6183),oM="prod",oO=(0,eR.d5)(oM,["typed","config","multiplyScalar","numeric"],e=>{var{typed:t,config:r,multiplyScalar:i,numeric:n}=e;return t(oM,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){throw Error("prod(A, dim) is not yet supported")},"...":function(e){return o(e)}});function o(e){var t;if((0,rd.Et)(e,function(e){try{t=void 0===t?e:i(t,e)}catch(t){throw(0,oD.x)(t,"prod",e)}}),"string"==typeof t&&(t=n(t,r.number)),void 0===t)throw Error("Cannot calculate prod of an empty array");return t}}),oT="reshape",oB=(0,eR.d5)(oT,["typed","isInteger","matrix"],e=>{var{typed:t,isInteger:r}=e;return t(oT,{"Matrix, Array":function(e,t){return e.reshape(t,!0)},"Array, Array":function(e,t){return t.forEach(function(e){if(!r(e))throw TypeError("Invalid size for dimension: "+e)}),(0,t7.XL)(e,t)}})}),oF="size",oR=(0,eR.d5)(oF,["typed","config","?matrix"],e=>{var{typed:t,config:r,matrix:i}=e;return t(oF,{Matrix:function(e){return e.create(e.size())},Array:t7.aJ,string:function(e){return"Array"===r.matrix?[e.length]:i([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===r.matrix?[]:i?i([]):(0,oA.kX)()}})}),ok="squeeze",oL=(0,eR.d5)(ok,["typed","matrix"],e=>{var{typed:t,matrix:r}=e;return t(ok,{Array:function(e){return(0,t7.L9)((0,rt.d9)(e))},Matrix:function(e){var t=(0,t7.L9)(e.toArray());return Array.isArray(t)?r(t):t},any:function(e){return(0,rt.d9)(e)}})}),oI="transpose",oj=(0,eR.d5)(oI,["typed","matrix"],e=>{var{typed:t,matrix:r}=e;return t(oI,{Array:e=>i(r(e)).valueOf(),Matrix:i,any:rt.d9});function i(e){var t,r=e.size();switch(r.length){case 1:t=e.clone();break;case 2:var i=r[0],n=r[1];if(0===n)throw RangeError("Cannot transpose a 2D matrix with no columns (size: "+(0,re.WU)(r)+")");switch(e.storage()){case"dense":t=function(e,t,r){for(var i,n=e._data,o=[],s=0;s<r;s++){i=o[s]=[];for(var a=0;a<t;a++)i[a]=(0,rt.d9)(n[a][s])}return e.createDenseMatrix({data:o,size:[r,t],datatype:e._datatype})}(e,i,n);break;case"sparse":t=function(e,t,r){for(var i,n,o,s=e._values,a=e._index,u=e._ptr,l=s?[]:void 0,c=[],h=[],d=[],p=0;p<t;p++)d[p]=0;for(i=0,n=a.length;i<n;i++)d[a[i]]++;for(var f=0,m=0;m<t;m++)h.push(f),f+=d[m],d[m]=h[m];for(h.push(f),o=0;o<r;o++)for(var v=u[o],g=u[o+1],b=v;b<g;b++){var y=d[a[b]]++;c[y]=o,s&&(l[y]=(0,rt.d9)(s[b]))}return e.createSparseMatrix({values:l,index:c,ptr:h,size:[r,t],datatype:e._datatype})}(e,i,n)}break;default:throw RangeError("Matrix must be a vector or two dimensional (size: "+(0,re.WU)(r)+")")}return t}}),oz="xgcd",oU=(0,eR.d5)(oz,["typed","config","matrix","BigNumber"],e=>{var{typed:t,config:r,matrix:i,BigNumber:n}=e;return t(oz,{"number, number":function(e,t){var n=rM(e,t);return"Array"===r.matrix?n:i(n)},"BigNumber, BigNumber":function(e,t){var o,s,a,u,l=new n(0),c=new n(1),h=l,d=c,p=c,f=l;if(!e.isInt()||!t.isInt())throw Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)s=e.div(t).floor(),a=e.mod(t),o=h,h=d.minus(s.times(h)),d=o,o=p,p=f.minus(s.times(p)),f=o,e=t,t=a;return u=e.lt(l)?[e.neg(),d.neg(),f.neg()]:[e,e.isZero()?0:d,f],"Array"===r.matrix?u:i(u)}})}),oY="zeros",oX=(0,eR.d5)(oY,["typed","config","matrix","BigNumber"],e=>{var{typed:t,config:r,matrix:i,BigNumber:n}=e;return t(oY,{"":function(){return"Array"===r.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return"Array"===r.matrix?o(e):o(e,"default")},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){var r,o=(r=!1,e.forEach(function(e,t,i){(0,ej.l9)(e)&&(r=!0,i[t]=e.toNumber())}),r)?new n(0):0;if(function(e){e.forEach(function(e){if("number"!=typeof e||!(0,eI.U)(e)||e<0)throw Error("Parameters in function zeros must be positive integers")})}(e),t){var s=i(t);return e.length>0?s.resize(e,o):s}var a=[];return e.length>0?(0,t7.SI)(a,e,o):a}}),oJ="asin",oq=(0,eR.d5)(oJ,["typed","config","Complex"],e=>{var{typed:t,config:r,Complex:i}=e;return t(oJ,{number:function(e){return e>=-1&&e<=1||r.predictable?Math.asin(e):new i(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()}})}),oG="cbrt",oH=(0,eR.d5)(oG,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],e=>{var{config:t,typed:r,isNegative:i,unaryMinus:n,matrix:o,Complex:s,BigNumber:a,Fraction:u}=e;return r(oG,{number:rC,Complex:l,"Complex, boolean":l,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&(0,ej.Mc)(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=l(e.value),t}var r,o=i(e.value);o&&(e.value=n(e.value)),r=(0,ej.l9)(e.value)?new a(1).div(3):(0,ej.yQ)(e.value)?new u(1,3):1/3;var s=e.pow(r);return o&&(s.value=n(s.value)),s}});function l(e,r){var i=e.arg()/3,n=e.abs(),a=new s(rC(n),0).mul(new s(0,i).exp());if(!r)return a;var u=[a,new s(rC(n),0).mul(new s(0,i+2*Math.PI/3).exp()),new s(rC(n),0).mul(new s(0,i-2*Math.PI/3).exp())];return"Array"===t.matrix?u:o(u)}}),oV=r(9002),oW="count",o$=(0,eR.d5)(oW,["typed","size","prod"],e=>{var{typed:t,size:r,prod:i}=e;return t(oW,{string:function(e){return e.length},"Matrix | Array":function(e){return i(r(e))}})}),oQ="ctranspose",oK=(0,eR.d5)(oQ,["typed","transpose","conj"],e=>{var{typed:t,transpose:r,conj:i}=e;return t(oQ,{any:function(e){return i(r(e))}})}),o0="diag",o1=(0,eR.d5)(o0,["typed","matrix","DenseMatrix","SparseMatrix"],e=>{var{typed:t,matrix:r,DenseMatrix:i,SparseMatrix:n}=e;return t(o0,{Array:function(e){return o(e,0,(0,t7.aJ)(e),null)},"Array, number":function(e,t){return o(e,t,(0,t7.aJ)(e),null)},"Array, BigNumber":function(e,t){return o(e,t.toNumber(),(0,t7.aJ)(e),null)},"Array, string":function(e,t){return o(e,0,(0,t7.aJ)(e),t)},"Array, number, string":function(e,t,r){return o(e,t,(0,t7.aJ)(e),r)},"Array, BigNumber, string":function(e,t,r){return o(e,t.toNumber(),(0,t7.aJ)(e),r)},Matrix:function(e){return o(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return o(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return o(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return o(e,0,e.size(),t)},"Matrix, number, string":function(e,t,r){return o(e,t,e.size(),r)},"Matrix, BigNumber, string":function(e,t,r){return o(e,t.toNumber(),e.size(),r)}});function o(e,t,o,s){if(!(0,eI.U)(t))throw TypeError("Second parameter in function diag must be an integer");var a=t>0?t:0,u=t<0?-t:0;switch(o.length){case 1:return function(e,t,r,o,s,a){var u=[o+s,o+a];if(r&&"sparse"!==r&&"dense"!==r)throw TypeError("Unknown matrix type ".concat(r,'"'));var l="sparse"===r?n.diagonal(u,e,t):i.diagonal(u,e,t);return null!==r?l:l.valueOf()}(e,t,s,o[0],u,a);case 2:return function(e,t,i,n,o,s){if((0,ej.SW)(e)){var a=e.diagonal(t);return null!==i?i!==a.storage()?r(a,i):a:a.valueOf()}for(var u=Math.min(n[0]-o,n[1]-s),l=[],c=0;c<u;c++)l[c]=e[c+o][c+s];return null!==i?r(l):l}(e,t,s,o,u,a)}throw RangeError("Matrix for function diag must be 2 dimensional")}}),o2="divideScalar",o3=(0,eR.d5)(o2,["typed","numeric"],e=>{var{typed:t,numeric:r}=e;return t(o2,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Complex | Fraction | BigNumber | Unit":(e,t)=>e.divide(t),"number | Fraction | Complex | BigNumber, Unit":(e,t)=>t.divideInto(e)})}),o5=r(6257),o4=r(2419),o8=(0,eR.d5)("matAlgo07xSSf",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:r}=e;return function(e,n,o){var s,a,u,l=e._size,c=e._datatype,h=n._size,d=n._datatype;if(l.length!==h.length)throw new rr.m(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var p=l[0],f=l[1],m=0,v=o;"string"==typeof c&&c===d&&(s=c,m=t.convert(0,s),v=t.find(o,[s,s]));var g=[];for(a=0;a<p;a++)g[a]=[];var b=[],y=[],x=[],C=[];for(u=0;u<f;u++){var Z=u+1;for(i(e,u,x,b,Z),i(n,u,C,y,Z),a=0;a<p;a++){var _=x[a]===Z?b[a]:m,w=C[a]===Z?y[a]:m;g[a][u]=v(_,w)}}return new r({data:g,size:[p,f],datatype:s})};function i(e,t,r,i,n){for(var o=e._values,s=e._index,a=e._ptr,u=a[t],l=a[t+1];u<l;u++){var c=s[u];r[c]=n,i[c]=o[u]}}}),o6=r(6104),o9=r(6820),o7=r(506),se="dotDivide",st=(0,eR.d5)(se,["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,divideScalar:n,DenseMatrix:o,concat:s}=e,a=(0,o5.v)({typed:t,equalScalar:i}),u=(0,o4.$)({typed:t}),l=o8({typed:t,DenseMatrix:o}),c=(0,o6.e)({typed:t,equalScalar:i}),h=(0,o9.O)({typed:t,DenseMatrix:o}),d=(0,o7.L)({typed:t,matrix:r,concat:s});return t(se,d({elop:n,SS:l,DS:u,SD:a,Ss:c,sS:h}))}),sr="equal",si=(0,eR.d5)(sr,["typed","matrix","equalScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,DenseMatrix:n,concat:o}=e,s=(0,o4.$)({typed:t}),a=o8({typed:t,DenseMatrix:n}),u=(0,o9.O)({typed:t,DenseMatrix:n}),l=(0,o7.L)({typed:t,matrix:r,concat:o});return t(sr,sn({typed:t,equalScalar:i}),l({elop:i,SS:a,DS:s,Ss:u}))}),sn=(0,eR.d5)(sr,["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return t(sr,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)}})}),so="flatten",ss=(0,eR.d5)(so,["typed","matrix"],e=>{var{typed:t,matrix:r}=e;return t(so,{Array:function(e){return(0,t7.xH)(e)},Matrix:function(e){return r((0,t7.xH)(e.toArray()))}})}),sa="hasNumericValue",su=(0,eR.d5)(sa,["typed","isNumeric"],e=>{var{typed:t,isNumeric:r}=e;return t(sa,{boolean:()=>!0,string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return r(e)}})}),sl="identity",sc=(0,eR.d5)(sl,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],e=>{var{typed:t,config:r,matrix:i,BigNumber:n,DenseMatrix:o,SparseMatrix:s}=e;return t(sl,{"":function(){return"Matrix"===r.matrix?i([]):[]},string:function(e){return i(e)},"number | BigNumber":function(e){return u(e,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return u(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return u(e,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,r){return u(e,t,r)},Array:function(e){return a(e)},"Array, string":function(e,t){return a(e,t)},Matrix:function(e){return a(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){switch(e.length){case 0:return t?i(t):[];case 1:return u(e[0],e[0],t);case 2:return u(e[0],e[1],t);default:throw Error("Vector containing two values expected")}}function u(e,t,r){var i=(0,ej.l9)(e)||(0,ej.l9)(t)?n:null;if((0,ej.l9)(e)&&(e=e.toNumber()),(0,ej.l9)(t)&&(t=t.toNumber()),!(0,eI.U)(e)||e<1||!(0,eI.U)(t)||t<1)throw Error("Parameters in function identity must be positive integers");var a=i?new n(1):1,u=i?new i(0):0,l=[e,t];if(r){if("sparse"===r)return s.diagonal(l,a,0,u);if("dense"===r)return o.diagonal(l,a,0,u);throw TypeError('Unknown matrix type "'.concat(r,'"'))}for(var c=(0,t7.SI)([],l,u),h=e<t?e:t,d=0;d<h;d++)c[d][d]=a;return c}}),sh="kron",sd=(0,eR.d5)(sh,["typed","matrix","multiplyScalar"],e=>{var{typed:t,matrix:r,multiplyScalar:i}=e;return t(sh,{"Matrix, Matrix":function(e,t){return r(n(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(n(e.toArray(),t))},"Array, Matrix":function(e,t){return r(n(e,t.toArray()))},"Array, Array":n});function n(e,t){if(1===(0,t7.aJ)(e).length&&(e=[e]),1===(0,t7.aJ)(t).length&&(t=[t]),(0,t7.aJ)(e).length>2||(0,t7.aJ)(t).length>2)throw RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var r=[],n=[];return e.map(function(e){return t.map(function(t){return n=[],r.push(n),e.map(function(e){return t.map(function(t){return n.push(i(e,t))})})})})&&r}}),sp="largerEq",sf=(0,eR.d5)(sp,["typed","config","matrix","DenseMatrix","concat"],e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:o}=e,s=(0,o4.$)({typed:t}),a=o8({typed:t,DenseMatrix:n}),u=(0,o9.O)({typed:t,DenseMatrix:n}),l=(0,o7.L)({typed:t,matrix:i,concat:o}),c=iM({typed:t});return t(sp,sm({typed:t,config:r}),{"boolean, boolean":(e,t)=>e>=t,"BigNumber, BigNumber":function(e,t){return e.gte(t)||iD(e,t,r.epsilon)},"Fraction, Fraction":(e,t)=>-1!==e.compare(t),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:a,DS:s,Ss:u}))}),sm=(0,eR.d5)(sp,["typed","config"],e=>{var{typed:t,config:r}=e;return t(sp,{"number, number":function(e,t){return e>=t||(0,eI.RI)(e,t,r.epsilon)}})}),sv=r(2789),sg=r(6565),sb=r(2590),sy=(0,eR.d5)("matAlgo08xS0Sid",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,n){var o,s,a,u,l,c=e._values,h=e._index,d=e._ptr,p=e._size,f=e._datatype,m=i._values,v=i._index,g=i._ptr,b=i._size,y=i._datatype;if(p.length!==b.length)throw new rr.m(p.length,b.length);if(p[0]!==b[0]||p[1]!==b[1])throw RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+b+")");if(!c||!m)throw Error("Cannot perform operation on Pattern Sparse Matrices");var x=p[0],C=p[1],Z=r,_=0,w=n;"string"==typeof f&&f===y&&(o=f,Z=t.find(r,[o,o]),_=t.convert(0,o),w=t.find(n,[o,o]));for(var E=[],N=[],S=[],A=[],P=[],D=0;D<C;D++){S[D]=N.length;var M=D+1;for(a=d[D],u=d[D+1],s=a;s<u;s++)P[l=h[s]]=M,A[l]=c[s],N.push(l);for(a=g[D],u=g[D+1],s=a;s<u;s++)P[l=v[s]]===M&&(A[l]=w(A[l],m[s]));for(s=S[D];s<N.length;){var O=A[l=N[s]];Z(O,_)?N.splice(s,1):(E.push(O),s++)}}return S[C]=N.length,e.createSparseMatrix({values:E,index:N,ptr:S,size:[x,C],datatype:o})}}),sx=(0,eR.d5)("useMatrixForArrayScalar",["typed","matrix"],e=>{var{typed:t,matrix:r}=e;return{"Array, number":t.referTo("DenseMatrix, number",e=>(t,i)=>e(r(t),i).valueOf()),"Array, BigNumber":t.referTo("DenseMatrix, BigNumber",e=>(t,i)=>e(r(t),i).valueOf()),"number, Array":t.referTo("number, DenseMatrix",e=>(t,i)=>e(t,r(i)).valueOf()),"BigNumber, Array":t.referTo("BigNumber, DenseMatrix",e=>(t,i)=>e(t,r(i)).valueOf())}}),sC="leftShift",sZ=(0,eR.d5)(sC,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=e,a=(0,sg.M)({typed:t}),u=(0,o5.v)({typed:t,equalScalar:i}),l=sy({typed:t,equalScalar:i}),c=(0,sb.H)({typed:t,DenseMatrix:o}),h=(0,o6.e)({typed:t,equalScalar:i}),d=(0,sv.R)({typed:t}),p=(0,o7.L)({typed:t,matrix:r,concat:s}),f=sx({typed:t,matrix:r});return t(sC,{"number, number":iu.ZG,"BigNumber, BigNumber":ia.Mw,"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():h(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():d(t,r,e,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):c(r,t,e,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):d(r,t,e,!0))},f,p({SS:l,DS:a,SD:u}))});function s_(e){var{DenseMatrix:t}=e;return function(e,r,i){var n=e.size();if(2!==n.length)throw RangeError("Matrix must be two dimensional (size: "+(0,re.WU)(n)+")");var o=n[0];if(o!==n[1])throw RangeError("Matrix must be square (size: "+(0,re.WU)(n)+")");var s=[];if((0,ej.SW)(r)){var a=r.size(),u=r._data;if(1===a.length){if(a[0]!==o)throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<o;l++)s[l]=[u[l]];return new t({data:s,size:[o,1],datatype:r._datatype})}if(2===a.length){if(a[0]!==o||1!==a[1])throw RangeError("Dimension mismatch. Matrix columns must match vector length.");if((0,ej.jH)(r)){if(i){s=[];for(var c=0;c<o;c++)s[c]=[u[c][0]];return new t({data:s,size:[o,1],datatype:r._datatype})}return r}if((0,ej.sA)(r)){for(var h=0;h<o;h++)s[h]=[0];for(var d=r._values,p=r._index,f=r._ptr,m=f[1],v=f[0];v<m;v++)s[p[v]][0]=d[v];return new t({data:s,size:[o,1],datatype:r._datatype})}}throw RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if((0,ej.kJ)(r)){var g=(0,t7.aJ)(r);if(1===g.length){if(g[0]!==o)throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<o;b++)s[b]=[r[b]];return new t({data:s,size:[o,1]})}if(2===g.length){if(g[0]!==o||1!==g[1])throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<o;y++)s[y]=[r[y][0]];return new t({data:s,size:[o,1]})}throw RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var sw="lsolve",sE=(0,eR.d5)(sw,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=e,u=s_({DenseMatrix:a});return t(sw,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=(t=u(e,t,!0))._data,l=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=[],m=0;m<c;m++){var v=r[m][0]||0;if(s(v,0))f[m]=[0];else{for(var g=0,b=[],y=[],x=p[m],C=p[m+1],Z=x;Z<C;Z++){var _=d[Z];_===m?g=h[Z]:_>m&&(b.push(h[Z]),y.push(_))}if(s(g,0))throw Error("Linear system cannot be solved since matrix is singular");for(var w=i(v,g),E=0,N=y.length;E<N;E++){var S=y[E];r[S]=[o(r[S][0]||0,n(w,b[E]))]}f[m]=[w]}}return new a({data:f,size:[l,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(r(e),t).valueOf()}});function l(e,t){for(var r=(t=u(e,t,!0))._data,l=e._size[0],c=e._size[1],h=[],d=e._data,p=0;p<c;p++){var f=r[p][0]||0,m=void 0;if(s(f,0))m=0;else{var v=d[p][p];if(s(v,0))throw Error("Linear system cannot be solved since matrix is singular");m=i(f,v);for(var g=p+1;g<l;g++)r[g]=[o(r[g][0]||0,n(m,d[g][p]))]}h[p]=[m]}return new a({data:h,size:[l,1]})}}),sN="matrixFromColumns",sS=(0,eR.d5)(sN,["typed","matrix","flatten","size"],e=>{var{typed:t,matrix:r,flatten:i,size:n}=e;return t(sN,{"...Array":function(e){return o(e)},"...Matrix":function(e){return r(o(e.map(e=>e.toArray())))}});function o(e){if(0===e.length)throw TypeError("At least one column is needed to construct a matrix.");for(var t=s(e[0]),r=[],n=0;n<t;n++)r[n]=[];for(var o of e){var a=s(o);if(a!==t)throw TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|a));for(var u=i(o),l=0;l<t;l++)r[l].push(u[l])}return r}function s(e){var t=n(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw TypeError("At least one of the arguments is not a vector.")}throw TypeError("Only one- or two-dimensional vectors are supported.")}}),sA=r(1418),sP="nthRoot",sD=(0,eR.d5)(sP,["typed","matrix","equalScalar","BigNumber","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,BigNumber:n,concat:o}=e,s=(0,sg.M)({typed:t}),a=(0,o5.v)({typed:t,equalScalar:i}),u=(0,sA.X)({typed:t,equalScalar:i}),l=(0,o6.e)({typed:t,equalScalar:i}),c=(0,o7.L)({typed:t,matrix:r,concat:o});function h(){throw Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return t(sP,{number:rA,"number, number":rA,BigNumber:e=>d(e,new n(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:t.referTo("DenseMatrix,number",e=>t=>e(r(t),2).valueOf()),DenseMatrix:t.referTo("DenseMatrix,number",e=>t=>e(t,2)),SparseMatrix:t.referTo("SparseMatrix,number",e=>t=>e(t,2)),"SparseMatrix, SparseMatrix":t.referToSelf(e=>(t,r)=>{if(1===r.density())return u(t,r,e);throw Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":t.referToSelf(e=>(t,r)=>{if(1===r.density())return s(t,r,e,!1);throw Error("Root must be non-zero")}),"Array, SparseMatrix":t.referTo("DenseMatrix,SparseMatrix",e=>(t,i)=>e(r(t),i)),"number | BigNumber, SparseMatrix":t.referToSelf(e=>(t,r)=>{if(1===r.density())return l(r,t,e,!0);throw Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:a,Ss:l,sS:!1}));function d(e,t){var r=n.precision,i=n.clone({precision:r+2}),o=new n(0),s=new i(1),a=t.isNegative();if(a&&(t=t.neg()),t.isZero())throw Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw Error("Root must be odd when a is negative.");if(e.isZero())return a?new i(1/0):0;if(!e.isFinite())return a?o:e;var u=e.abs().pow(s.div(t));return u=e.isNeg()?u.neg():u,new n((a?s.div(u):u).toPrecision(r))}}),sM=(0,eR.d5)("ones",["typed","config","matrix","BigNumber"],e=>{var{typed:t,config:r,matrix:i,BigNumber:n}=e;return t("ones",{"":function(){return"Array"===r.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return"Array"===r.matrix?o(e):o(e,"default")},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){var r,o=(r=!1,e.forEach(function(e,t,i){(0,ej.l9)(e)&&(r=!0,i[t]=e.toNumber())}),r)?new n(1):1;if(function(e){e.forEach(function(e){if("number"!=typeof e||!(0,eI.U)(e)||e<0)throw Error("Parameters in function ones must be positive integers")})}(e),t){var s=i(t);return e.length>0?s.resize(e,o):s}var a=[];return e.length>0?(0,t7.SI)(a,e,o):a}}),sO=r(2110),sT=(0,eR.d5)("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],e=>{var{typed:t,matrix:r,zeros:i,identity:n,isZero:o,equal:s,sign:a,sqrt:u,conj:l,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:p,subtractScalar:f,complex:m}=e;return(0,sO.Z)(t("qr",{DenseMatrix:function(e){return g(e)},SparseMatrix:function(e){return function(e){throw Error("qr not implemented for sparse matrices yet")}(0)},Array:function(e){var t=g(r(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:v});function v(e){var t,r,m,v=e._size[0],g=e._size[1],b=n([v],"dense"),y=b._data,x=e.clone(),C=x._data,Z=i([v],"");for(m=0;m<Math.min(g,v);++m){var _=C[m][m],w=c(s(_,0)?1:a(_)),E=l(w),N=0;for(t=m;t<v;t++)N=h(N,p(C[t][m],l(C[t][m])));var S=p(w,u(N));if(!o(S)){var A=f(_,S);for(Z[m]=1,t=m+1;t<v;t++)Z[t]=d(C[t][m],A);var P=c(l(d(A,S))),D=void 0;for(r=m;r<g;r++){for(D=0,t=m;t<v;t++)D=h(D,p(l(Z[t]),C[t][r]));for(D=p(D,P),t=m;t<v;t++)C[t][r]=p(f(C[t][r],p(Z[t],D)),E)}for(t=0;t<v;t++){for(D=0,r=m;r<v;r++)D=h(D,p(y[t][r],Z[r]));for(D=p(D,P),r=m;r<v;++r)y[t][r]=d(f(y[t][r],p(D,l(Z[r]))),E)}}}return{Q:b,R:x,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function g(e){var t=v(e),r=t.R._data;if(e._data.length>0)for(var i="Complex"===r[0][0].type?m(0):0,n=0;n<r.length;++n)for(var o=0;o<n&&o<(r[0]||[]).length;++o)r[n][o]=i;return t}});function sB(e,t,r,i){if(!(this instanceof sB))throw SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=r,this.max=i,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+r+(null!=i?"-"+i:"")+" expected)",this.stack=Error().stack}sB.prototype=Error(),sB.prototype.constructor=Error,sB.prototype.name="ArgumentsError",sB.prototype.isArgumentsError=!0;var sF=(0,eR.d5)("resize",["config","matrix"],e=>{var{config:t,matrix:r}=e;return function(e,i,n){if(2!=arguments.length&&3!=arguments.length)throw new sB("resize",arguments.length,2,3);if((0,ej.SW)(i)&&(i=i.valueOf()),(0,ej.l9)(i[0])&&(i=i.map(function(e){return(0,ej.l9)(e)?e.toNumber():e})),(0,ej.SW)(e))return e.resize(i,n,!0);if("string"==typeof e)return function(e,t,r){if(void 0!==r){if("string"!=typeof r||1!==r.length)throw TypeError("Single character expected as defaultValue")}else r=" ";if(1!==t.length)throw new rr.m(t.length,1);var i=t[0];if("number"!=typeof i||!(0,eI.U)(i))throw TypeError("Invalid size, must contain positive integers (size: "+(0,re.WU)(t)+")");if(e.length>i)return e.substring(0,i);if(!(e.length<i))return e;for(var n=e,o=0,s=i-e.length;o<s;o++)n+=r;return n}(e,i,n);var o=!Array.isArray(e)&&"Array"!==t.matrix;if(0===i.length){for(;Array.isArray(e);)e=e[0];return(0,rt.d9)(e)}Array.isArray(e)||(e=[e]),e=(0,rt.d9)(e);var s=(0,t7.SI)(e,i,n);return o?r(s):s}}),sR="rightArithShift",sk=(0,eR.d5)(sR,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=e,a=(0,sg.M)({typed:t}),u=(0,o5.v)({typed:t,equalScalar:i}),l=sy({typed:t,equalScalar:i}),c=(0,sb.H)({typed:t,DenseMatrix:o}),h=(0,o6.e)({typed:t,equalScalar:i}),d=(0,sv.R)({typed:t}),p=(0,o7.L)({typed:t,matrix:r,concat:s}),f=sx({typed:t,matrix:r});return t(sR,{"number, number":iu.Lz,"BigNumber, BigNumber":ia.ti,"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():h(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():d(t,r,e,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):c(r,t,e,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):d(r,t,e,!0))},f,p({SS:l,DS:a,SD:u}))}),sL="Number of decimals in function round must be an integer",sI="round",sj=(0,eR.d5)(sI,["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,BigNumber:o,DenseMatrix:s}=e,a=(0,o6.e)({typed:t,equalScalar:i}),u=(0,o9.O)({typed:t,DenseMatrix:s}),l=(0,sv.R)({typed:t});return t(sI,{number:rT,"number, number":rT,"number, BigNumber":function(e,t){if(!t.isInteger())throw TypeError(sL);return new o(e).toDecimalPlaces(t.toNumber())},Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw TypeError(sL);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw TypeError(sL);var r=t.toNumber();return e.round(r)},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw TypeError(sL);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw TypeError(sL);return e.round(t)},"Fraction, BigNumber":function(e,t){if(!t.isInteger())throw TypeError(sL);return e.round(t.toNumber())},"Unit, number, Unit":t.referToSelf(e=>function(t,r,i){var n=t.toNumeric(i);return i.multiply(e(n,r))}),"Unit, BigNumber, Unit":t.referToSelf(e=>(t,r,i)=>e(t,r.toNumber(),i)),"Unit, Unit":t.referToSelf(e=>(t,r)=>e(t,0,r)),"Array | Matrix, number, Unit":t.referToSelf(e=>(t,r,i)=>(0,rd.Fh)(t,t=>e(t,r,i),!0)),"Array | Matrix, BigNumber, Unit":t.referToSelf(e=>(t,r,i)=>e(t,r.toNumber(),i)),"Array | Matrix, Unit":t.referToSelf(e=>(t,r)=>e(t,0,r)),"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>a(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>l(t,r,e,!1)),"Array, number | BigNumber":t.referToSelf(e=>(t,i)=>l(r(t),i,e,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):u(r,t,e,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):l(r,t,e,!0)),"number | Complex | BigNumber | Fraction, Array":t.referToSelf(e=>(t,i)=>l(r(i),t,e,!0).valueOf())})}),sz="smaller",sU=(0,eR.d5)(sz,["typed","config","matrix","DenseMatrix","concat"],e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:o}=e,s=(0,o4.$)({typed:t}),a=o8({typed:t,DenseMatrix:n}),u=(0,o9.O)({typed:t,DenseMatrix:n}),l=(0,o7.L)({typed:t,matrix:i,concat:o}),c=iM({typed:t});return t(sz,sY({typed:t,config:r}),{"boolean, boolean":(e,t)=>e<t,"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!iD(e,t,r.epsilon)},"Fraction, Fraction":(e,t)=>-1===e.compare(t),"Complex, Complex":function(e,t){throw TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:a,DS:s,Ss:u}))}),sY=(0,eR.d5)(sz,["typed","config"],e=>{var{typed:t,config:r}=e;return t(sz,{"number, number":function(e,t){return e<t&&!(0,eI.RI)(e,t,r.epsilon)}})}),sX=r(9322),sJ="subtract",sq=(0,eR.d5)(sJ,["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,subtractScalar:n,unaryMinus:o,DenseMatrix:s,concat:a}=e,u=(0,sg.M)({typed:t}),l=(0,o4.$)({typed:t}),c=(0,sX.b)({typed:t,equalScalar:i}),h=(0,sb.H)({typed:t,DenseMatrix:s}),d=(0,o9.O)({typed:t,DenseMatrix:s}),p=(0,o7.L)({typed:t,matrix:r,concat:a});return t(sJ,{"any, any":n},p({elop:n,SS:c,DS:u,SD:l,Ss:d,sS:h}))}),sG=(0,eR.d5)("to",["typed","matrix","concat"],e=>{var{typed:t,matrix:r,concat:i}=e,n=(0,o7.L)({typed:t,matrix:r,concat:i});return t("to",{"Unit, Unit | string":(e,t)=>e.to(t)},n({Ds:!0}))}),sH="unequal",sV=(0,eR.d5)(sH,["typed","config","equalScalar","matrix","DenseMatrix","concat"],e=>{var{typed:t,config:r,equalScalar:i,matrix:n,DenseMatrix:o,concat:s}=e,a=(0,o4.$)({typed:t}),u=o8({typed:t,DenseMatrix:o}),l=(0,o9.O)({typed:t,DenseMatrix:o}),c=(0,o7.L)({typed:t,matrix:n,concat:s});return t(sH,sW({typed:t,equalScalar:i}),c({elop:function(e,t){return!i(e,t)},SS:u,DS:a,Ss:l}))}),sW=(0,eR.d5)(sH,["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return t(sH,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!r(e,t)}})}),s$="usolve",sQ=(0,eR.d5)(s$,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=e,u=s_({DenseMatrix:a});return t(s$,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=(t=u(e,t,!0))._data,l=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=[],m=c-1;m>=0;m--){var v=r[m][0]||0;if(s(v,0))f[m]=[0];else{for(var g=0,b=[],y=[],x=p[m],C=p[m+1],Z=C-1;Z>=x;Z--){var _=d[Z];_===m?g=h[Z]:_<m&&(b.push(h[Z]),y.push(_))}if(s(g,0))throw Error("Linear system cannot be solved since matrix is singular");for(var w=i(v,g),E=0,N=y.length;E<N;E++){var S=y[E];r[S]=[o(r[S][0],n(w,b[E]))]}f[m]=[w]}}return new a({data:f,size:[l,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(r(e),t).valueOf()}});function l(e,t){for(var r=(t=u(e,t,!0))._data,l=e._size[0],c=e._size[1],h=[],d=e._data,p=c-1;p>=0;p--){var f=r[p][0]||0,m=void 0;if(s(f,0))m=0;else{var v=d[p][p];if(s(v,0))throw Error("Linear system cannot be solved since matrix is singular");m=i(f,v);for(var g=p-1;g>=0;g--)r[g]=[o(r[g][0]||0,n(m,d[g][p]))]}h[p]=[m]}return new a({data:h,size:[l,1]})}}),sK=(0,eR.d5)("xor",["typed","matrix","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,DenseMatrix:i,concat:n}=e,o=(0,o4.$)({typed:t}),s=o8({typed:t,DenseMatrix:i}),a=(0,o9.O)({typed:t,DenseMatrix:i}),u=(0,o7.L)({typed:t,matrix:r,concat:n});return t("xor",{"number, number":nb.kl,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN())},"Unit, Unit":t.referToSelf(e=>(t,r)=>e(t.value||0,r.value||0))},u({SS:s,DS:o,Ss:a}))}),s0=r(6101),s1=(0,eR.d5)("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],e=>{var{typed:t,matrix:r,addScalar:i,equalScalar:n,DenseMatrix:o,SparseMatrix:s,concat:a}=e,u=(0,sg.M)({typed:t}),l=(0,s0.v)({typed:t,equalScalar:n}),c=(0,sb.H)({typed:t,DenseMatrix:o}),h=(0,o7.L)({typed:t,matrix:r,concat:a});return t("add",{"any, any":i,"any, any, ...any":t.referToSelf(e=>(t,r,i)=>{for(var n=e(t,r),o=0;o<i.length;o++)n=e(n,i[o]);return n})},h({elop:i,DS:u,SS:l,Ss:c}))}),s2=(0,eR.d5)("matAlgo09xS0Sf",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,n){var o,s,a,u,l,c,h=e._values,d=e._index,p=e._ptr,f=e._size,m=e._datatype,v=i._values,g=i._index,b=i._ptr,y=i._size,x=i._datatype;if(f.length!==y.length)throw new rr.m(f.length,y.length);if(f[0]!==y[0]||f[1]!==y[1])throw RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+y+")");var C=f[0],Z=f[1],_=r,w=0,E=n;"string"==typeof m&&m===x&&(o=m,_=t.find(r,[o,o]),w=t.convert(0,o),E=t.find(n,[o,o]));var N=h&&v?[]:void 0,S=[],A=[],P=N?[]:void 0,D=[];for(a=0;a<Z;a++){A[a]=S.length;var M=a+1;if(P)for(l=b[a],c=b[a+1],u=l;u<c;u++)D[s=g[u]]=M,P[s]=v[u];for(l=p[a],c=p[a+1],u=l;u<c;u++)if(s=d[u],P){var O=D[s]===M?P[s]:w,T=E(h[u],O);_(T,w)||(S.push(s),N.push(T))}else S.push(s)}return A[Z]=S.length,e.createSparseMatrix({values:N,index:S,ptr:A,size:[C,Z],datatype:o})}}),s3="atan2",s5=(0,eR.d5)(s3,["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,BigNumber:n,DenseMatrix:o,concat:s}=e,a=(0,o5.v)({typed:t,equalScalar:i}),u=(0,o4.$)({typed:t}),l=s2({typed:t,equalScalar:i}),c=(0,o6.e)({typed:t,equalScalar:i}),h=(0,o9.O)({typed:t,DenseMatrix:o}),d=(0,o7.L)({typed:t,matrix:r,concat:s});return t(s3,{"number, number":Math.atan2,"BigNumber, BigNumber":(e,t)=>n.atan2(e,t)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:a,Ss:c,sS:h}))}),s4=r(2614),s8=r(145),s6="bitXor",s9=(0,eR.d5)(s6,["typed","matrix","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,DenseMatrix:i,concat:n}=e,o=(0,o4.$)({typed:t}),s=o8({typed:t,DenseMatrix:i}),a=(0,o9.O)({typed:t,DenseMatrix:i}),u=(0,o7.L)({typed:t,matrix:r,concat:n});return t(s6,{"number, number":iu.xS,"BigNumber, BigNumber":ia.nN},u({SS:s,DS:o,Ss:a}))}),s7="catalan",ae=(0,eR.d5)(s7,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],e=>{var{typed:t,addScalar:r,divideScalar:i,multiplyScalar:n,combinations:o,isNegative:s,isInteger:a}=e;return t(s7,{"number | BigNumber":function(e){if(!a(e)||s(e))throw TypeError("Non-negative integer value expected in function catalan");return i(o(n(e,2),e),r(e,1))}})}),at="compare",ar=(0,eR.d5)(at,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],e=>{var{typed:t,config:r,equalScalar:i,matrix:n,BigNumber:o,Fraction:s,DenseMatrix:a,concat:u}=e,l=(0,o4.$)({typed:t}),c=(0,sX.b)({typed:t,equalScalar:i}),h=(0,o9.O)({typed:t,DenseMatrix:a}),d=(0,o7.L)({typed:t,matrix:n,concat:u}),p=iM({typed:t});return t(at,ai({typed:t,config:r}),{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return new o(iD(e,t,r.epsilon)?0:e.cmp(t))},"Fraction, Fraction":function(e,t){return new s(e.compare(t))},"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},p,d({SS:c,DS:l,Ss:h}))}),ai=(0,eR.d5)(at,["typed","config"],e=>{var{typed:t,config:r}=e;return t(at,{"number, number":function(e,t){return(0,eI.RI)(e,t,r.epsilon)?0:e>t?1:-1}})}),an="compareText";re.cd.signature="any, any";var ao=(0,eR.d5)(an,["typed","matrix","concat"],e=>{var{typed:t,matrix:r,concat:i}=e,n=(0,o7.L)({typed:t,matrix:r,concat:i});return t(an,re.cd,n({elop:re.cd,Ds:!0}))}),as=r(6363),aa="deepEqual",au=(0,eR.d5)(aa,["typed","equal"],e=>{var{typed:t,equal:r}=e;return t(aa,{"any, any":function(e,t){return function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i))return!1;var n=t.length;if(n!==i.length)return!1;for(var o=0;o<n;o++)if(!e(t[o],i[o]))return!1;return!0}return!Array.isArray(i)&&r(t,i)}(e.valueOf(),t.valueOf())}})}),al=r(3294),ac="distance",ah=(0,eR.d5)(ac,["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],e=>{var{typed:t,addScalar:r,subtractScalar:i,multiplyScalar:n,divideScalar:o,deepEqual:s,sqrt:a,abs:u}=e;return t(ac,{"Array, Array, Array":function(e,t,r){if(2===e.length&&2===t.length&&2===r.length){if(!c(e))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(r))throw TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(t,r))throw TypeError("LinePoint1 should not be same with LinePoint2");var o=i(r[1],t[1]),a=i(t[0],r[0]),u=i(n(r[0],t[1]),n(t[0],r[1]));return m(e[0],e[1],o,a,u)}throw TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,r){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(r).length){if(!c(e))throw TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(t))throw TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(r))throw TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(f(t),f(r)))throw TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in r&&"lineTwoPtY"in r){var o=i(r.lineTwoPtY,t.lineOnePtY),a=i(t.lineOnePtX,r.lineTwoPtX),u=i(n(r.lineTwoPtX,t.lineOnePtY),n(t.lineOnePtX,r.lineTwoPtY));return m(e.pointX,e.pointY,o,a,u)}throw TypeError("Key names do not match")}throw TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!c(e))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(t))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!h(e))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(t))throw TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!d(e)||!d(t))throw TypeError("All values of an array should be numbers or BigNumbers");return g(e,t)}throw TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!c(e))throw TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(t))throw TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return m(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!h(e))throw TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!p(t))throw TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return v(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!c(e))throw TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(t))throw TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return g([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!h(e))throw TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(t))throw TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return g([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw TypeError("Key names do not match")}throw TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&l(e[0][0])&&l(e[0][1])){if(e.some(e=>2!==e.length||!l(e[0])||!l(e[1])))return!1}else if(!(3===e[0].length&&l(e[0][0])&&l(e[0][1])&&l(e[0][2])))return!1;else if(e.some(e=>3!==e.length||!l(e[0])||!l(e[1])||!l(e[2])))return!1;return!0}(e))throw TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],r=[],i=[],n=0;n<e.length-1;n++)for(var o=n+1;o<e.length;o++)2===e[0].length?(r=[e[n][0],e[n][1]],i=[e[o][0],e[o][1]]):3===e[0].length&&(r=[e[n][0],e[n][1],e[n][2]],i=[e[o][0],e[o][1],e[o][2]]),t.push(g(r,i));return t}(e)}});function l(e){return"number"==typeof e||(0,ej.l9)(e)}function c(e){return e.constructor!==Array&&(e=f(e)),l(e[0])&&l(e[1])}function h(e){return e.constructor!==Array&&(e=f(e)),l(e[0])&&l(e[1])&&l(e[2])}function d(e){return Array.isArray(e)||(e=f(e)),e.every(l)}function p(e){return e.constructor!==Array&&(e=f(e)),l(e[0])&&l(e[1])&&l(e[2])&&l(e[3])&&l(e[4])&&l(e[5])}function f(e){for(var t=Object.keys(e),r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return r}function m(e,t,i,s,l){return o(u(r(r(n(i,e),n(s,t)),l)),a(r(n(i,i),n(s,s))))}function v(e,t,s,u,l,c,h,d,p){var f=[i(n(i(l,t),p),n(i(c,s),d)),i(n(i(c,s),h),n(i(u,e),p)),i(n(i(u,e),d),n(i(l,t),h))];return o(f=a(r(r(n(f[0],f[0]),n(f[1],f[1])),n(f[2],f[2]))),a(r(r(n(h,h),n(d,d)),n(p,p))))}function g(e,t){for(var o=e.length,s=0,u=0,l=0;l<o;l++)s=r(n(u=i(e[l],t[l]),u),s);return a(s)}}),ad=(0,eR.d5)("dot",["typed","addScalar","multiplyScalar","conj","size"],e=>{var{typed:t,addScalar:r,multiplyScalar:i,conj:n,size:o}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,o){var u=s(e,o),l=(0,ej.SW)(e)?e._data:e,c=(0,ej.SW)(e)?e._datatype:void 0,h=(0,ej.SW)(o)?o._data:o,d=(0,ej.SW)(o)?o._datatype:void 0,p=2===a(e).length,f=2===a(o).length,m=r,v=i;if(c&&d&&c===d&&"string"==typeof c&&(m=t.find(r,[c,c]),v=t.find(i,[c,c])),!p&&!f){for(var g=v(n(l[0]),h[0]),b=1;b<u;b++)g=m(g,v(n(l[b]),h[b]));return g}if(!p&&f){for(var y=v(n(l[0]),h[0][0]),x=1;x<u;x++)y=m(y,v(n(l[x]),h[x][0]));return y}if(p&&!f){for(var C=v(n(l[0][0]),h[0]),Z=1;Z<u;Z++)C=m(C,v(n(l[Z][0]),h[Z]));return C}if(p&&f){for(var _=v(n(l[0][0]),h[0][0]),w=1;w<u;w++)_=m(_,v(n(l[w][0]),h[w][0]));return _}},"SparseMatrix, SparseMatrix":function(e,t){s(e,t);for(var n=e._index,o=e._values,a=t._index,u=t._values,l=0,c=0,h=0;c<n.length&&h<a.length;){var d=n[c],p=a[h];if(d<p){c++;continue}if(d>p){h++;continue}d===p&&(l=r(l,i(o[c],u[h])),c++,h++)}return l}});function s(e,t){var r,i,n=a(e),o=a(t);if(1===n.length)r=n[0];else if(2===n.length&&1===n[1])r=n[0];else throw RangeError("Expected a column vector, instead got a matrix of size ("+n.join(", ")+")");if(1===o.length)i=o[0];else if(2===o.length&&1===o[1])i=o[0];else throw RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");if(r!==i)throw RangeError("Vectors must have equal length ("+r+" != "+i+")");if(0===r)throw RangeError("Cannot calculate the dot product of empty vectors");return r}function a(e){return(0,ej.SW)(e)?e.size():o(e)}}),ap="equalText",af=(0,eR.d5)(ap,["typed","compareText","isZero"],e=>{var{typed:t,compareText:r,isZero:i}=e;return t(ap,{"any, any":function(e,t){return i(r(e,t))}})}),am="floor",av=(0,eR.d5)(am,["typed","config","round"],e=>{var{typed:t,config:r,round:i}=e;return t(am,{number:function(e){return(0,eI.RI)(e,i(e),r.epsilon)?i(e):Math.floor(e)},"number, number":function(e,t){if((0,eI.RI)(e,i(e,t),r.epsilon))return i(e,t);var[n,o]="".concat(e,"e").split("e"),s=Math.floor(Number("".concat(n,"e").concat(Number(o)+t)));return[n,o]="".concat(s,"e").split("e"),Number("".concat(n,"e").concat(Number(o)-t))}})}),ag=(0,eR.d5)(am,["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],e=>{var{typed:t,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}=e,u=(0,o6.e)({typed:t,equalScalar:o}),l=(0,o9.O)({typed:t,DenseMatrix:a}),c=(0,sv.R)({typed:t}),h=av({typed:t,config:r,round:i});return t("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},"Complex, BigNumber":function(e,t){return e.floor(t.toNumber())},BigNumber:function(e){return iD(e,i(e),r.epsilon)?i(e):e.floor()},"BigNumber, BigNumber":function(e,t){return iD(e,i(e,t),r.epsilon)?i(e,t):e.toDecimalPlaces(t.toNumber(),eF.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Fraction, BigNumber":function(e,t){return e.floor(t.toNumber())},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),"Array, number | BigNumber":t.referToSelf(e=>(t,r)=>(0,rd.Fh)(t,t=>e(t,r),!0)),"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>u(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>c(t,r,e,!1)),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(e=>(t,r)=>c(n(r),t,e,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(e=>(t,r)=>o(t,0)?s(r.size(),r.storage()):"dense"===r.storage()?c(r,t,e,!0):l(r,t,e,!0))})}),ab=(0,eR.d5)("mod",["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],e=>{var{typed:t,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a,concat:u}=e,l=ag({typed:t,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}),c=(0,o5.v)({typed:t,equalScalar:o}),h=(0,o4.$)({typed:t}),d=(0,sX.b)({typed:t,equalScalar:o}),p=(0,o6.e)({typed:t,equalScalar:o}),f=(0,o9.O)({typed:t,DenseMatrix:a}),m=(0,o7.L)({typed:t,matrix:n,concat:u});return t("mod",{"number, number":function(e,t){return 0===t?e:e-t*l(e/t)},"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.sub(t.mul(l(e.div(t))))},"Fraction, Fraction":function(e,t){return t.equals(0)?e:e.sub(t.mul(l(e.div(t))))}},m({SS:d,DS:h,SD:c,Ss:p,sS:f}))}),ay="number | BigNumber | Fraction | Matrix | Array",ax="".concat(ay,", ").concat(ay,", ...").concat(ay);function aC(e){return!e.some(e=>Array.isArray(e))}var aZ=(0,eR.d5)("gcd",["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,config:i,round:n,equalScalar:o,zeros:s,BigNumber:a,DenseMatrix:u,concat:l}=e,c=ab({typed:t,config:i,round:n,matrix:r,equalScalar:o,zeros:s,DenseMatrix:u,concat:l}),h=(0,sg.M)({typed:t}),d=(0,s0.v)({typed:t,equalScalar:o}),p=(0,sb.H)({typed:t,DenseMatrix:u}),f=(0,o7.L)({typed:t,matrix:r,concat:l});return t("gcd",{"number, number":function(e,t){var r;if(!(0,eI.U)(e)||!(0,eI.U)(t))throw Error("Parameters in function gcd must be integer numbers");for(;0!==t;)r=c(e,t),e=t,t=r;return e<0?-e:e},"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw Error("Parameters in function gcd must be integer numbers");for(var r=new a(0);!t.isZero();){var i=c(e,t);e=t,t=i}return e.lt(r)?e.neg():e},"Fraction, Fraction":(e,t)=>e.gcd(t)},f({SS:d,DS:h,Ss:p}),{[ax]:t.referToSelf(e=>(t,r,i)=>{for(var n=e(t,r),o=0;o<i.length;o++)n=e(n,i[o]);return n}),Array:t.referToSelf(e=>t=>{if(1===t.length&&Array.isArray(t[0])&&aC(t[0]))return e(...t[0]);if(aC(t))return e(...t);throw new sB("gcd() supports only 1d matrices!")}),Matrix:t.referToSelf(e=>t=>e(t.toArray()))})}),a_="hypot",aw=(0,eR.d5)(a_,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],e=>{var{typed:t,abs:r,addScalar:i,divideScalar:n,multiplyScalar:o,sqrt:s,smaller:a,isPositive:u}=e;return t(a_,{"... number | BigNumber":l,Array:l,Matrix:e=>l((0,t7.xH)(e.toArray()))});function l(e){for(var t=0,l=0,c=0;c<e.length;c++){if((0,ej.Mc)(e[c]))throw TypeError("Unexpected type of argument to hypot");var h=r(e[c]);a(l,h)?(t=i(t=o(t,o(n(l,h),n(l,h))),1),l=h):t=i(t,u(h)?o(n(h,l),n(h,l)):h)}return o(l,s(t))}}),aE=(0,eR.d5)("ImmutableDenseMatrix",["smaller","DenseMatrix"],e=>{var{smaller:t,DenseMatrix:r}=e;function i(e,t){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");if(t&&!(0,ej.HD)(t))throw Error("Invalid datatype: "+t);if((0,ej.SW)(e)||(0,ej.kJ)(e)){var n=new r(e,t);this._data=n._data,this._size=n._size,this._datatype=n._datatype,this._min=null,this._max=null}else if(e&&(0,ej.kJ)(e.data)&&(0,ej.kJ)(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else if(e)throw TypeError("Unsupported type of data ("+(0,ej.kM)(e)+")");else this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}return i.prototype=new r,i.prototype.type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(e){switch(arguments.length){case 1:var t=r.prototype.subset.call(this,e);if((0,ej.SW)(t))return new i({data:t._data,size:t._size,datatype:t._datatype});return t;case 2:case 3:throw Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){return new i({data:(0,rt.d9)(this._data),size:(0,rt.d9)(this._size),datatype:this._datatype})},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(e){return new i(e)},i.prototype.swapRows=function(){throw Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(null===this._min){var e=null;this.forEach(function(r){(null===e||t(r,e))&&(e=r)}),this._min=null!==e?e:void 0}return this._min},i.prototype.max=function(){if(null===this._max){var e=null;this.forEach(function(r){(null===e||t(e,r))&&(e=r)}),this._max=null!==e?e:void 0}return this._max},i},{isClass:!0}),aN=(0,eR.d5)("Index",["ImmutableDenseMatrix","getMatrixDataType"],e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:r}=e;function i(e){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var t=0,o=arguments.length;t<o;t++){var s=arguments[t],a=(0,ej.kJ)(s),u=(0,ej.SW)(s),l=null;if((0,ej.bR)(s))this._dimensions.push(s),this._isScalar=!1;else if(a||u){var c=void 0;"boolean"===r(s)?(a&&(c=n(aS(s).valueOf())),u&&(c=n(aS(s._data).valueOf())),l=s.valueOf().length):c=n(s.valueOf()),this._dimensions.push(c);var h=c.size();(1!==h.length||1!==h[0]||null!==l)&&(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else if("string"==typeof s)this._dimensions.push(s);else throw TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(l)}}function n(e){for(var r=0,i=e.length;r<i;r++)if("number"!=typeof e[r]||!(0,eI.U)(e[r]))throw TypeError("Index parameters must be positive integer numbers");return new t(e)}return i.prototype.type="Index",i.prototype.isIndex=!0,i.prototype.clone=function(){var e=new i;return e._dimensions=(0,rt.d9)(this._dimensions),e._isScalar=this._isScalar,e._sourceSize=this._sourceSize,e},i.create=function(e){var t=new i;return i.apply(t,e),t},i.prototype.size=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var i=this._dimensions[t];e[t]="string"==typeof i?1:i.size()[0]}return e},i.prototype.max=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var i=this._dimensions[t];e[t]="string"==typeof i?i:i.max()}return e},i.prototype.min=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var i=this._dimensions[t];e[t]="string"==typeof i?i:i.min()}return e},i.prototype.forEach=function(e){for(var t=0,r=this._dimensions.length;t<r;t++)e(this._dimensions[t],t,this)},i.prototype.dimension=function(e){return this._dimensions[e]||null},i.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},i.prototype.isScalar=function(){return this._isScalar},i.prototype.toArray=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var i=this._dimensions[t];e.push("string"==typeof i?i:i.toArray())}return e},i.prototype.valueOf=i.prototype.toArray,i.prototype.toString=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var i=this._dimensions[t];"string"==typeof i?e.push(JSON.stringify(i)):e.push(i.toString())}return"["+e.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},i.fromJSON=function(e){return i.create(e.dimensions)},i},{isClass:!0});function aS(e){var t=[];return e.forEach((e,r)=>{e&&t.push(r)}),t}var aA="larger",aP=(0,eR.d5)(aA,["typed","config","matrix","DenseMatrix","concat"],e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:o}=e,s=(0,o4.$)({typed:t}),a=o8({typed:t,DenseMatrix:n}),u=(0,o9.O)({typed:t,DenseMatrix:n}),l=(0,o7.L)({typed:t,matrix:i,concat:o}),c=iM({typed:t});return t(aA,aD({typed:t,config:r}),{"boolean, boolean":(e,t)=>e>t,"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!iD(e,t,r.epsilon)},"Fraction, Fraction":(e,t)=>1===e.compare(t),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:a,DS:s,Ss:u}))}),aD=(0,eR.d5)(aA,["typed","config"],e=>{var{typed:t,config:r}=e;return t(aA,{"number, number":function(e,t){return e>t&&!(0,eI.RI)(e,t,r.epsilon)}})}),aM=(0,eR.d5)("log",["config","typed","divideScalar","Complex"],e=>{var{typed:t,config:r,divideScalar:i,Complex:n}=e;return t("log",{number:function(e){var t;return e>=0||r.predictable?t?Math.log(e)/Math.log(t):Math.log(e):new n(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||r.predictable?e.ln():new n(e.toNumber(),0).log()},"any, any":t.referToSelf(e=>(t,r)=>i(e(t),e(r)))})}),aO="lsolveAll",aT=(0,eR.d5)(aO,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=e,u=s_({DenseMatrix:a});return t(aO,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=[u(e,t,!0)._data.map(e=>e[0])],l=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=0;f<c;f++)for(var m=r.length,v=0;v<m;v++){for(var g=r[v],b=[],y=[],x=p[f],C=p[f+1],Z=0,_=x;_<C;_++){var w=d[_];w===f?Z=h[_]:w>f&&(b.push(h[_]),y.push(w))}if(s(Z,0)){if(s(g[f],0)){if(0===v){var E=[...g];E[f]=1;for(var N=0,S=y.length;N<S;N++){var A=y[N];E[A]=o(E[A],b[N])}r.push(E)}}else{if(0===v)return[];r.splice(v,1),v-=1,m-=1}}else{g[f]=i(g[f],Z);for(var P=0,D=y.length;P<D;P++){var M=y[P];g[M]=o(g[M],n(g[f],b[P]))}}}return r.map(e=>new a({data:e.map(e=>[e]),size:[l,1]}))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(r(e),t).map(e=>e.valueOf())}});function l(e,t){for(var r=[u(e,t,!0)._data.map(e=>e[0])],l=e._data,c=e._size[0],h=e._size[1],d=0;d<h;d++)for(var p=r.length,f=0;f<p;f++){var m=r[f];if(s(l[d][d],0)){if(s(m[d],0)){if(0===f){var v=[...m];v[d]=1;for(var g=d+1;g<h;g++)v[g]=o(v[g],l[g][d]);r.push(v)}}else{if(0===f)return[];r.splice(f,1),f-=1,p-=1}}else{m[d]=i(m[d],l[d][d]);for(var b=d+1;b<h;b++)m[b]=o(m[b],n(m[d],l[b][d]))}}return r.map(e=>new a({data:e.map(e=>[e]),size:[c,1]}))}}),aB="matrixFromRows",aF=(0,eR.d5)(aB,["typed","matrix","flatten","size"],e=>{var{typed:t,matrix:r,flatten:i,size:n}=e;return t(aB,{"...Array":function(e){return o(e)},"...Matrix":function(e){return r(o(e.map(e=>e.toArray())))}});function o(e){if(0===e.length)throw TypeError("At least one row is needed to construct a matrix.");var t=s(e[0]),r=[];for(var n of e){var o=s(n);if(o!==t)throw TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|o));r.push(i(n))}return r}function s(e){var t=n(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw TypeError("At least one of the arguments is not a vector.")}throw TypeError("Only one- or two-dimensional vectors are supported.")}}),aR=r(7543),ak="multiply",aL=(0,eR.d5)(ak,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],e=>{var{typed:t,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:o,dot:s}=e,a=(0,o6.e)({typed:t,equalScalar:o}),u=(0,sv.R)({typed:t});function l(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var c=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,r){var o,s=e._data,a=e._size,u=e._datatype,l=r._data,c=r._datatype,h=a[0],d=a[1],p=i,f=n;u&&c&&u===c&&"string"==typeof u&&(o=u,p=t.find(i,[o,o]),f=t.find(n,[o,o]));for(var m=[],v=0;v<h;v++){for(var g=s[v],b=f(g[0],l[0]),y=1;y<d;y++)b=p(b,f(g[y],l[y]));m[v]=b}return e.createDenseMatrix({data:m,size:[h],datatype:o})},"SparseMatrix, any":function(e,r){var s,a=e._values,u=e._index,l=e._ptr,c=e._datatype;if(!a)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var h=r._data,d=r._datatype,p=e._size[0],f=r._size[0],m=[],v=[],g=[],b=i,y=n,x=o,C=0;c&&d&&c===d&&"string"==typeof c&&(s=c,b=t.find(i,[s,s]),y=t.find(n,[s,s]),x=t.find(o,[s,s]),C=t.convert(0,s));var Z=[],_=[];g[0]=0;for(var w=0;w<f;w++){var E=h[w];if(!x(E,C))for(var N=l[w],S=l[w+1],A=N;A<S;A++){var P=u[A];_[P]?Z[P]=b(Z[P],y(E,a[A])):(_[P]=!0,v.push(P),Z[P]=y(E,a[A]))}}for(var D=v.length,M=0;M<D;M++){var O=v[M];m[M]=Z[O]}return g[1]=v.length,e.createSparseMatrix({values:m,index:v,ptr:g,size:[p,1],datatype:s})}}),h=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,r){var o,s=e._data,a=e._size,u=e._datatype,l=r._data,c=r._size,h=r._datatype,d=a[0],p=a[1],f=c[1],m=i,v=n;u&&h&&u===h&&"string"==typeof u&&(o=u,m=t.find(i,[o,o]),v=t.find(n,[o,o]));for(var g=[],b=0;b<d;b++){var y=s[b];g[b]=[];for(var x=0;x<f;x++){for(var C=v(y[0],l[0][x]),Z=1;Z<p;Z++)C=m(C,v(y[Z],l[Z][x]));g[b][x]=C}}return e.createDenseMatrix({data:g,size:[d,f],datatype:o})},"DenseMatrix, SparseMatrix":function(e,r){var s,a=e._data,u=e._size,l=e._datatype,c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype;if(!c)throw Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m=u[0],v=p[1],g=i,b=n,y=o,x=0;l&&f&&l===f&&"string"==typeof l&&(s=l,g=t.find(i,[s,s]),b=t.find(n,[s,s]),y=t.find(o,[s,s]),x=t.convert(0,s));for(var C=[],Z=[],_=[],w=r.createSparseMatrix({values:C,index:Z,ptr:_,size:[m,v],datatype:s}),E=0;E<v;E++){_[E]=Z.length;var N=d[E],S=d[E+1];if(S>N)for(var A=0,P=0;P<m;P++){for(var D=P+1,M=void 0,O=N;O<S;O++){var T=h[O];A!==D?(M=b(a[P][T],c[O]),A=D):M=g(M,b(a[P][T],c[O]))}A!==D||y(M,x)||(Z.push(P),C.push(M))}}return _[v]=Z.length,w},"SparseMatrix, DenseMatrix":function(e,r){var s,a=e._values,u=e._index,l=e._ptr,c=e._datatype;if(!a)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var h=r._data,d=r._datatype,p=e._size[0],f=r._size[0],m=r._size[1],v=i,g=n,b=o,y=0;c&&d&&c===d&&"string"==typeof c&&(s=c,v=t.find(i,[s,s]),g=t.find(n,[s,s]),b=t.find(o,[s,s]),y=t.convert(0,s));for(var x=[],C=[],Z=[],_=e.createSparseMatrix({values:x,index:C,ptr:Z,size:[p,m],datatype:s}),w=[],E=[],N=0;N<m;N++){Z[N]=C.length;for(var S=N+1,A=0;A<f;A++){var P=h[A][N];if(!b(P,y))for(var D=l[A],M=l[A+1],O=D;O<M;O++){var T=u[O];E[T]!==S?(E[T]=S,C.push(T),w[T]=g(P,a[O])):w[T]=v(w[T],g(P,a[O]))}}for(var B=Z[N],F=C.length,R=B;R<F;R++){var k=C[R];x[R]=w[k]}}return Z[m]=C.length,_},"SparseMatrix, SparseMatrix":function(e,r){var o,s,a,u,l,c,h,d,p,f=e._values,m=e._index,v=e._ptr,g=e._datatype,b=r._values,y=r._index,x=r._ptr,C=r._datatype,Z=e._size[0],_=r._size[1],w=f&&b,E=i,N=n;g&&C&&g===C&&"string"==typeof g&&(o=g,E=t.find(i,[o,o]),N=t.find(n,[o,o]));for(var S=w?[]:void 0,A=[],P=[],D=e.createSparseMatrix({values:S,index:A,ptr:P,size:[Z,_],datatype:o}),M=w?[]:void 0,O=[],T=0;T<_;T++){P[T]=A.length;var B=T+1;for(c=x[T],h=x[T+1],l=c;l<h;l++)if(p=y[l],w)for(a=v[p],u=v[p+1],s=a;s<u;s++)O[d=m[s]]!==B?(O[d]=B,A.push(d),M[d]=N(b[l],f[s])):M[d]=E(M[d],N(b[l],f[s]));else for(a=v[p],u=v[p+1],s=a;s<u;s++)O[d=m[s]]!==B&&(O[d]=B,A.push(d));if(w)for(var F=P[T],R=A.length,k=F;k<R;k++){var L=A[k];S[k]=M[L]}}return P[_]=A.length,D}});return t(ak,n,{"Array, Array":t.referTo("Matrix, Matrix",e=>(t,i)=>{l((0,t7.aJ)(t),(0,t7.aJ)(i));var n=e(r(t),r(i));return(0,ej.SW)(n)?n.valueOf():n}),"Matrix, Matrix":function(e,r){var o=e.size(),a=r.size();return(l(o,a),1===o.length)?1===a.length?function(e,t,r){if(0===r)throw Error("Cannot multiply two empty vectors");return s(e,t)}(e,r,o[0]):function(e,r){if("dense"!==r.storage())throw Error("Support for SparseMatrix not implemented");return function(e,r){var o,s=e._data,a=e._size,u=e._datatype,l=r._data,c=r._size,h=r._datatype,d=a[0],p=c[1],f=i,m=n;u&&h&&u===h&&"string"==typeof u&&(o=u,f=t.find(i,[o,o]),m=t.find(n,[o,o]));for(var v=[],g=0;g<p;g++){for(var b=m(s[0],l[0][g]),y=1;y<d;y++)b=f(b,m(s[y],l[y][g]));v[g]=b}return e.createDenseMatrix({data:v,size:[p],datatype:o})}(e,r)}(e,r):1===a.length?c(e,r):h(e,r)},"Matrix, Array":t.referTo("Matrix,Matrix",e=>(t,i)=>e(t,r(i))),"Array, Matrix":t.referToSelf(e=>(t,i)=>e(r(t,i.storage()),i)),"SparseMatrix, any":function(e,t){return a(e,t,n,!1)},"DenseMatrix, any":function(e,t){return u(e,t,n,!1)},"any, SparseMatrix":function(e,t){return a(t,e,n,!0)},"any, DenseMatrix":function(e,t){return u(t,e,n,!0)},"Array, any":function(e,t){return u(r(e),t,n,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,n,!0).valueOf()},"any, any":n,"any, any, ...any":t.referToSelf(e=>(t,r,i)=>{for(var n=e(t,r),o=0;o<i.length;o++)n=e(n,i[o]);return n})})}),aI="nthRoots",aj=(0,eR.d5)(aI,["config","typed","divideScalar","Complex"],e=>{var{typed:t,config:r,divideScalar:i,Complex:n}=e,o=[function(e){return new n(e,0)},function(e){return new n(0,e)},function(e){return new n(-e,0)},function(e){return new n(0,-e)}];function s(e,t){if(t<0)throw Error("Root must be greater than zero");if(0===t)throw Error("Root must be non-zero");if(t%1!=0)throw Error("Root must be an integer");if(0===e||0===e.abs())return[new n(0,0)];var r,i="number"==typeof e;(i||0===e.re||0===e.im)&&(r=i?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var s=e.arg(),a=e.abs(),u=[],l=Math.pow(a,1/t),c=0;c<t;c++){var h=(r+4*c)/t;if(h===Math.round(h)){u.push(o[h%4](l));continue}u.push(new n({r:l,phi:(s+2*Math.PI*c)/t}))}return u}return t(aI,{Complex:function(e){return s(e,2)},"Complex, number":s})}),az=r(1845),aU="partitionSelect",aY=(0,eR.d5)(aU,["typed","isNumeric","isNaN","compare"],e=>{var{typed:t,isNumeric:r,isNaN:i,compare:n}=e,o=(e,t)=>-n(e,t);return t(aU,{"Array | Matrix, number":function(e,t){return s(e,t,n)},"Array | Matrix, number, string":function(e,t,r){if("asc"===r)return s(e,t,n);if("desc"===r)return s(e,t,o);throw Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(e,t,r){if(!(0,eI.U)(t)||t<0)throw Error("k must be a non-negative integer");if((0,ej.SW)(e)){if(e.size().length>1)throw Error("Only one dimensional matrices supported");return a(e.valueOf(),t,r)}if(Array.isArray(e))return a(e,t,r)}function a(e,t,n){if(t>=e.length)throw Error("k out of bounds");for(var o=0;o<e.length;o++)if(r(e[o])&&i(e[o]))return e[o];for(var s=0,a=e.length-1;s<a;){for(var u=s,l=a,c=e[Math.floor(Math.random()*(a-s+1))+s];u<l;)if(n(e[u],c)>=0){var h=e[l];e[l]=e[u],e[u]=h,--l}else++u;n(e[u],c)>0&&--u,t<=u?a=u:s=u+1}return e[t]}}),aX="rightLogShift",aJ=(0,eR.d5)(aX,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=e,a=(0,sg.M)({typed:t}),u=(0,o5.v)({typed:t,equalScalar:i}),l=sy({typed:t,equalScalar:i}),c=(0,sb.H)({typed:t,DenseMatrix:o}),h=(0,o6.e)({typed:t,equalScalar:i}),d=(0,sv.R)({typed:t}),p=(0,o7.L)({typed:t,matrix:r,concat:s}),f=sx({typed:t,matrix:r});return t(aX,{"number, number":iu.ji,"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():h(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>i(r,0)?t.clone():d(t,r,e,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):c(r,t,e,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(e=>(t,r)=>i(t,0)?n(r.size(),r.storage()):d(r,t,e,!0))},f,p({SS:l,DS:a,SD:u}))});function aq(e,t,r,i,n,o,s){var a=0;for(r[s]=e;a>=0;){var u=r[s+a],l=r[i+u];-1===l?(a--,o[t++]=u):(r[i+u]=r[n+l],r[s+ ++a]=l)}return t}var aG=(0,eR.d5)("csAmd",["add","multiply","transpose"],e=>{var{add:t,multiply:r,transpose:i}=e;return function(e,s){if(!s||e<=0||e>3)return null;var a,u,l,c,h,d,p,f,m,v,g,b,y,x,C,Z,_=s._size,w=_[0],E=_[1],N=0,S=Math.max(16,10*Math.sqrt(E));S=Math.min(E-2,S);var A=function(e,n,o,s,a){var u=i(n);if(1===e&&s===o)return t(n,u);if(2===e){for(var l=u._index,c=u._ptr,h=0,d=0;d<o;d++){var p=c[d];if(c[d]=h,!(c[d+1]-p>a))for(var f=c[d+1];p<f;p++)l[h++]=l[p]}c[o]=h,n=i(u)}return r(u,n)}(e,s,w,E,S);!function(e,t,r){for(var i=e._values,n=e._index,o=e._ptr,s=e._size[1],a=0,u=0;u<s;u++){var l=o[u];for(o[u]=a;l<o[u+1];l++)t(n[l],u,i?i[l]:1,null)&&(n[a]=n[l],i&&(i[a]=i[l]),a++)}o[s]=a,n.splice(a,n.length-a),i&&i.splice(a,i.length-a)}(A,o,0);for(var P=A._index,D=A._ptr,M=D[E],O=[],T=[],B=E+1,F=2*(E+1),R=3*(E+1),k=4*(E+1),L=5*(E+1),I=6*(E+1),j=7*(E+1),z=function(e,t,r,i,o,s,a,u,l,c,h,d){for(var p=0;p<e;p++)r[i+p]=t[p+1]-t[p];r[i+e]=0;for(var f=0;f<=e;f++)r[o+f]=-1,s[f]=-1,r[a+f]=-1,r[u+f]=-1,r[l+f]=1,r[c+f]=1,r[h+f]=0,r[d+f]=r[i+f];var m=n(0,0,r,c,e);return r[h+e]=-2,t[e]=-1,r[c+e]=0,m}(E,D,T,0,R,O,F,j,B,I,k,L),U=function(e,t,r,i,n,o,s,a,u,l,c){for(var h=0,d=0;d<e;d++){var p=r[i+d];if(0===p)r[n+d]=-2,h++,t[d]=-1,r[o+d]=0;else if(p>s)r[a+d]=0,r[n+d]=-1,h++,t[d]=-e-2,r[a+e]++;else{var f=r[u+p];-1!==f&&(l[f]=d),r[c+d]=r[u+p],r[u+p]=d}}return h}(E,D,T,L,k,I,S,B,R,O,F),Y=0;U<E;){for(l=-1;Y<E&&-1===(l=T[R+Y]);Y++);-1!==T[F+l]&&(O[T[F+l]]=-1),T[R+Y]=T[F+l];var X=T[k+l],J=T[B+l];U+=J;var q=0;T[B+l]=-J;var G=D[l],H=0===X?G:M,V=H;for(c=1;c<=X+1;c++){for(c>X?(d=l,p=G,f=T[0+l]-X):(p=D[d=P[G++]],f=T[0+d]),h=1;h<=f;h++)(m=T[B+(a=P[p++])])<=0||(q+=m,T[B+a]=-m,P[V++]=a,-1!==T[F+a]&&(O[T[F+a]]=O[a]),-1!==O[a]?T[F+O[a]]=T[F+a]:T[R+T[L+a]]=T[F+a]);d!==l&&(D[d]=-l-2,T[I+d]=0)}for(0!==X&&(M=V),T[L+l]=q,D[l]=H,T[0+l]=V-H,T[k+l]=-2,z=n(z,N,T,I,E),v=H;v<V;v++)if(!((g=T[k+(a=P[v])])<=0)){var W=z-(m=-T[B+a]);for(G=D[a],b=D[a]+g-1;G<=b;G++)T[I+(d=P[G])]>=z?T[I+d]-=m:0!==T[I+d]&&(T[I+d]=T[L+d]+W)}for(v=H;v<V;v++){for(C=0,y=(b=D[a=P[v]])+T[k+a]-1,x=b,Z=0,G=b;G<=y;G++)if(0!==T[I+(d=P[G])]){var $=T[I+d]-z;$>0?(Z+=$,P[x++]=d,C+=d):(D[d]=-l-2,T[I+d]=0)}T[k+a]=x-b+1;var Q=x,K=b+T[0+a];for(G=y+1;G<K;G++){var ee=T[B+(u=P[G])];ee<=0||(Z+=ee,P[x++]=u,C+=u)}0===Z?(D[a]=-l-2,q-=m=-T[B+a],J+=m,U+=m,T[B+a]=0,T[k+a]=-1):(T[L+a]=Math.min(T[L+a],Z),P[x]=P[Q],P[Q]=P[b],P[b]=l,T[0+a]=x-b+1,C=(C<0?-C:C)%E,T[F+a]=T[j+C],T[j+C]=a,O[a]=C)}for(T[L+l]=q,z=n(z+(N=Math.max(N,q)),N,T,I,E),v=H;v<V;v++)if(!(T[B+(a=P[v])]>=0))for(a=T[j+(C=O[a])],T[j+C]=-1;-1!==a&&-1!==T[F+a];a=T[F+a],z++){for(f=T[0+a],g=T[k+a],G=D[a]+1;G<=D[a]+f-1;G++)T[I+P[G]]=z;var et=a;for(u=T[F+a];-1!==u;){var er=T[0+u]===f&&T[k+u]===g;for(G=D[u]+1;er&&G<=D[u]+f-1;G++)T[I+P[G]]!==z&&(er=0);er?(D[u]=-a-2,T[B+a]+=T[B+u],T[B+u]=0,T[k+u]=-1,u=T[F+u],T[F+et]=u):(et=u,u=T[F+u])}}for(G=H,v=H;v<V;v++)(m=-T[B+(a=P[v])])<=0||(T[B+a]=m,Z=Math.min(Z=T[L+a]+q-m,E-U-m),-1!==T[R+Z]&&(O[T[R+Z]]=a),T[F+a]=T[R+Z],O[a]=-1,T[R+Z]=a,Y=Math.min(Y,Z),T[L+a]=Z,P[G++]=a);T[B+l]=J,0==(T[0+l]=G-H)&&(D[l]=-1,T[I+l]=0),0!==X&&(M=G)}for(a=0;a<E;a++)D[a]=-D[a]-2;for(u=0;u<=E;u++)T[R+u]=-1;for(u=E;u>=0;u--)T[B+u]>0||(T[F+u]=T[R+D[u]],T[R+D[u]]=u);for(d=E;d>=0;d--)T[B+d]<=0||-1===D[d]||(T[F+d]=T[R+D[d]],T[R+D[d]]=d);for(l=0,a=0;a<=E;a++)-1===D[a]&&(l=aq(a,l,T,R,F,O,I));return O.splice(O.length-1,1),O};function n(e,t,r,i,n){if(e<2||e+t<0){for(var o=0;o<n;o++)0!==r[i+o]&&(r[i+o]=1);e=2}return e}function o(e,t){return e!==t}}),aH=(0,eR.d5)("csCounts",["transpose"],e=>{var{transpose:t}=e;return function(e,r,i,n){if(!e||!r||!i)return null;var o,s,a,u,l,c,h,d=e._size,p=d[0],f=d[1],m=4*f+(n?f+p+1:0),v=[],g=2*f,b=3*f,y=4*f,x=5*f+1;for(a=0;a<m;a++)v[a]=-1;var C=[],Z=t(e),_=Z._index,w=Z._ptr;for(a=0;a<f;a++)for(C[s=i[a]]=-1===v[b+s]?1:0;-1!==s&&-1===v[b+s];s=r[s])v[b+s]=a;if(n){for(a=0;a<f;a++)v[i[a]]=a;for(o=0;o<p;o++){for(a=f,c=w[o],h=w[o+1],l=c;l<h;l++)a=Math.min(a,v[_[l]]);v[x+o]=v[y+a],v[y+a]=o}}for(o=0;o<f;o++)v[0+o]=o;for(a=0;a<f;a++){for(-1!==r[s=i[a]]&&C[r[s]]--,u=n?v[y+a]:s;-1!==u;u=n?v[x+u]:-1)for(l=w[u];l<w[u+1];l++){var E=function(e,t,r,i,n,o,s){var a,u,l,c=0;if(e<=t||r[i+t]<=r[n+e])return -1;r[n+e]=r[i+t];var h=r[o+e];if(r[o+e]=t,-1===h)c=1,l=e;else{for(c=2,l=h;l!==r[s+l];l=r[s+l]);for(a=h;a!==l;a=u)u=r[s+a],r[s+a]=l}return{jleaf:c,q:l}}(o=_[l],s,v,b,f,g,0);E.jleaf>=1&&C[s]++,2===E.jleaf&&C[E.q]--}-1!==r[s]&&(v[0+s]=r[s])}for(s=0;s<f;s++)-1!==r[s]&&(C[r[s]]+=C[s]);return C}}),aV=(0,eR.d5)("csSqr",["add","multiply","transpose"],e=>{var{add:t,multiply:r,transpose:i}=e,n=aG({add:t,multiply:r,transpose:i}),o=aH({transpose:i});return function(e,t,r){var i,s=t._ptr,a=t._size[1],u={};if(u.q=n(e,t),e&&!u.q)return null;if(r){var l=e?function(e,t,r,i){e._values;for(var n=e._index,o=e._ptr,s=e._size,a=e._datatype,u=s[0],l=s[1],c=[],h=[],d=0,p=0;p<l;p++){h[p]=d;for(var f=r?r[p]:p,m=o[f],v=o[f+1],g=m;g<v;g++){var b=t?t[n[g]]:n[g];c[d]=b,d++}}return h[l]=d,e.createSparseMatrix({values:null,index:c,ptr:h,size:[u,l],datatype:a})}(t,null,u.q,0):t;u.parent=function(e,t){if(!e)return null;var r,i,n=e._index,o=e._ptr,s=e._size,a=s[0],u=s[1],l=[],c=[];if(t)for(r=0;r<a;r++)c[u+r]=-1;for(var h=0;h<u;h++){l[h]=-1,c[0+h]=-1;for(var d=o[h],p=o[h+1],f=d;f<p;f++){var m=n[f];for(r=t?c[u+m]:m;-1!==r&&r<h;r=i)i=c[0+r],c[0+r]=h,-1===i&&(l[r]=h);t&&(c[u+m]=h)}}return l}(l,1);var c=function(e,t){if(!e)return null;var r,i=0,n=[],o=[],s=2*t;for(r=0;r<t;r++)o[0+r]=-1;for(r=t-1;r>=0;r--)-1!==e[r]&&(o[t+r]=o[0+e[r]],o[0+e[r]]=r);for(r=0;r<t;r++)-1===e[r]&&(i=aq(r,i,o,0,t,n,s));return n}(u.parent,a);if(u.cp=o(l,u.parent,c,1),l&&u.parent&&u.cp&&function(e,t){var r,i,n,o,s,a=e._ptr,u=e._index,l=e._size,c=l[0],h=l[1];t.pinv=[],t.leftmost=[];var d=t.parent,p=t.pinv,f=t.leftmost,m=[],v=c+h,g=c+2*h;for(i=0;i<h;i++)m[c+i]=-1,m[v+i]=-1,m[g+i]=0;for(r=0;r<c;r++)f[r]=-1;for(i=h-1;i>=0;i--)for(o=a[i],s=a[i+1],n=o;n<s;n++)f[u[n]]=i;for(r=c-1;r>=0;r--)p[r]=-1,-1!==(i=f[r])&&(0==m[g+i]++&&(m[v+i]=r),m[0+r]=m[c+i],m[c+i]=r);for(i=0,t.lnz=0,t.m2=c;i<h;i++)if(r=m[c+i],t.lnz++,r<0&&(r=t.m2++),p[r]=i,!(--g[i]<=0)){t.lnz+=m[g+i];var b=d[i];-1!==b&&(0===m[g+b]&&(m[v+b]=m[v+i]),m[0+m[v+i]]=m[c+b],m[c+b]=m[0+r],m[g+b]+=m[g+i])}for(r=0;r<c;r++)p[r]<0&&(p[r]=i++);return!0}(l,u))for(u.unz=0,i=0;i<a;i++)u.unz+=u.cp[i]}else u.unz=4*s[a]+a,u.lnz=u.unz;return u}});function aW(e,t){e[t]=-e[t]-2}function a$(e){return e<0?-e-2:e}var aQ=(0,eR.d5)("csSpsolve",["divideScalar","multiply","subtract"],e=>{var{divideScalar:t,multiply:r,subtract:i}=e;return function(e,n,o,s,a,u,l){var c,h,d,p,f=e._values,m=e._index,v=e._ptr,g=e._size[1],b=n._values,y=n._index,x=n._ptr,C=function(e,t,r,i,n){var o,s,a,u=e._ptr,l=e._size,c=t._index,h=t._ptr,d=l[1],p=d;for(s=h[r],a=h[r+1],o=s;o<a;o++){var f=c[o];u[f]<0||(p=function(e,t,r,i,n){var o,s,a,u=t._index,l=t._ptr,c=t._size[1],h=0;for(i[0]=e;h>=0;){e=i[h];var d=n?n[e]:e;l[e]<0||(aW(l,e),i[c+h]=d<0?0:a$(l[d]));var p=1;for(s=i[c+h],a=d<0?0:a$(l[d+1]);s<a;s++)if(!(l[o=u[s]]<0)){i[c+h]=s,i[++h]=o,p=0;break}p&&(h--,i[--r]=e)}return r}(f,e,p,i,n))}for(o=p;o<d;o++)aW(u,i[o]);return p}(e,n,o,s,u);for(c=C;c<g;c++)a[s[c]]=0;for(h=x[o],d=x[o+1],c=h;c<d;c++)a[y[c]]=b[c];for(var Z=C;Z<g;Z++){var _=s[Z],w=u?u[_]:_;if(!(w<0))for(h=v[w],d=v[w+1],a[_]=t(a[_],f[l?h:d-1]),c=l?h+1:h,p=l?d:d-1;c<p;c++){var E=m[c];a[E]=i(a[E],r(f[c],a[_]))}}return C}}),aK=(0,eR.d5)("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],e=>{var{abs:t,divideScalar:r,multiply:i,subtract:n,larger:o,largerEq:s,SparseMatrix:a}=e,u=aQ({divideScalar:r,multiply:i,subtract:n});return function(e,n,l){if(!e)return null;var c,h,d,p=e._size[1],f=100,m=100;n&&(c=n.q,f=n.lnz||f,m=n.unz||m);var v=[],g=[],b=[],y=new a({values:v,index:g,ptr:b,size:[p,p]}),x=[],C=[],Z=[],_=new a({values:x,index:C,ptr:Z,size:[p,p]}),w=[],E=[],N=[];for(h=0;h<p;h++)E[h]=0,w[h]=-1,b[h+1]=0;f=0,m=0;for(var S=0;S<p;S++){b[S]=f,Z[S]=m;var A=c?c[S]:S,P=u(y,e,A,N,E,w,1),D=-1,M=-1;for(d=P;d<p;d++)if(w[h=N[d]]<0){var O=t(E[h]);o(O,M)&&(M=O,D=h)}else C[m]=w[h],x[m++]=E[h];if(-1===D||M<=0)return null;w[A]<0&&s(t(E[A]),i(M,l))&&(D=A);var T=E[D];for(C[m]=S,x[m++]=T,w[D]=S,g[f]=D,v[f++]=1,d=P;d<p;d++)w[h=N[d]]<0&&(g[f]=h,v[f++]=r(E[h],T)),E[h]=0}for(d=0,b[p]=f,Z[p]=m;d<f;d++)g[d]=w[g[d]];return v.splice(f,v.length-f),g.splice(f,g.length-f),x.splice(m,x.length-m),C.splice(m,C.length-m),{L:y,U:_,pinv:w}}}),a0=(0,eR.d5)("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],e=>{var{typed:t,abs:r,add:i,multiply:n,transpose:o,divideScalar:s,subtract:a,larger:u,largerEq:l,SparseMatrix:c}=e,h=aV({add:i,multiply:n,transpose:o}),d=aK({abs:r,divideScalar:s,multiply:n,subtract:a,larger:u,largerEq:l,SparseMatrix:c});return t("slu",{"SparseMatrix, number, number":function(e,t,r){if(!(0,eI.U)(t)||t<0||t>3)throw Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(r<0||r>1)throw Error("Partial pivoting threshold must be a number from 0 to 1");var i=h(t,e,!1),n=d(e,i,r);return{L:n.L,U:n.U,p:n.pinv,q:i.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}),a1=r(7061),a2=r(2296),a3=(0,eR.d5)("trace",["typed","matrix","add"],e=>{var{typed:t,matrix:r,add:i}=e;return t("trace",{Array:function(e){return n(r(e))},SparseMatrix:function(e){var t=e._values,r=e._index,n=e._ptr,o=e._size,s=o[0],a=o[1];if(s===a){var u=0;if(t.length>0)for(var l=0;l<a;l++)for(var c=n[l],h=n[l+1],d=c;d<h;d++){var p=r[d];if(p===l){u=i(u,t[d]);break}if(p>l)break}return u}throw RangeError("Matrix must be square (size: "+(0,re.WU)(o)+")")},DenseMatrix:n,any:rt.d9});function n(e){var t=e._size,r=e._data;switch(t.length){case 1:if(1===t[0])return(0,rt.d9)(r[0]);throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");case 2:var n=t[0];if(n===t[1]){for(var o=0,s=0;s<n;s++)o=i(o,r[s][s]);return o}throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,re.WU)(t)+")")}}}),a5="usolveAll",a4=(0,eR.d5)(a5,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=e,u=s_({DenseMatrix:a});return t(a5,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=[u(e,t,!0)._data.map(e=>e[0])],l=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=c-1;f>=0;f--)for(var m=r.length,v=0;v<m;v++){for(var g=r[v],b=[],y=[],x=p[f],C=p[f+1],Z=0,_=C-1;_>=x;_--){var w=d[_];w===f?Z=h[_]:w<f&&(b.push(h[_]),y.push(w))}if(s(Z,0)){if(s(g[f],0)){if(0===v){var E=[...g];E[f]=1;for(var N=0,S=y.length;N<S;N++){var A=y[N];E[A]=o(E[A],b[N])}r.push(E)}}else{if(0===v)return[];r.splice(v,1),v-=1,m-=1}}else{g[f]=i(g[f],Z);for(var P=0,D=y.length;P<D;P++){var M=y[P];g[M]=o(g[M],n(g[f],b[P]))}}}return r.map(e=>new a({data:e.map(e=>[e]),size:[l,1]}))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(r(e),t).map(e=>e.valueOf())}});function l(e,t){for(var r=[u(e,t,!0)._data.map(e=>e[0])],l=e._data,c=e._size[0],h=e._size[1],d=h-1;d>=0;d--)for(var p=r.length,f=0;f<p;f++){var m=r[f];if(s(l[d][d],0)){if(s(m[d],0)){if(0===f){var v=[...m];v[d]=1;for(var g=d-1;g>=0;g--)v[g]=o(v[g],l[g][d]);r.push(v)}}else{if(0===f)return[];r.splice(f,1),f-=1,p-=1}}else{m[d]=i(m[d],l[d][d]);for(var b=d-1;b>=0;b--)m[b]=o(m[b],n(m[d],l[b][d]))}}return r.map(e=>new a({data:e.map(e=>[e]),size:[c,1]}))}}),a8="zpk2tf",a6=(0,eR.d5)(a8,["typed","add","multiply","Complex","number"],e=>{var{typed:t,add:r,multiply:i,Complex:n,number:o}=e;return t(a8,{"Array,Array,number":function(e,t,r){return s(e,t,r)},"Array,Array":function(e,t){return s(e,t,1)},"Matrix,Matrix,number":function(e,t,r){return s(e.valueOf(),t.valueOf(),r)},"Matrix,Matrix":function(e,t){return s(e.valueOf(),t.valueOf(),1)}});function s(e,t,r){e.some(e=>"BigNumber"===e.type)&&(e=e.map(e=>o(e))),t.some(e=>"BigNumber"===e.type)&&(t=t.map(e=>o(e)));for(var s=[n(1,0)],u=[n(1,0)],l=0;l<e.length;l++){var c=e[l];"number"==typeof c&&(c=n(c,0)),s=a(s,[n(1,0),n(-c.re,-c.im)])}for(var h=0;h<t.length;h++){var d=t[h];"number"==typeof d&&(d=n(d,0)),u=a(u,[n(1,0),n(-d.re,-d.im)])}for(var p=0;p<s.length;p++)s[p]=i(s[p],r);return[s,u]}function a(e,t){for(var o=[],s=0;s<e.length+t.length-1;s++){o[s]=n(0,0);for(var a=0;a<e.length;a++)s-a>=0&&s-a<t.length&&(o[s]=r(o[s],i(e[a],t[s-a])))}return o}}),a9="ceil",a7=(0,eR.d5)(a9,["typed","config","round"],e=>{var{typed:t,config:r,round:i}=e;return t(a9,{number:function(e){return(0,eI.RI)(e,i(e),r.epsilon)?i(e):Math.ceil(e)},"number, number":function(e,t){if((0,eI.RI)(e,i(e,t),r.epsilon))return i(e,t);var[n,o]="".concat(e,"e").split("e"),s=Math.ceil(Number("".concat(n,"e").concat(Number(o)+t)));return[n,o]="".concat(s,"e").split("e"),Number("".concat(n,"e").concat(Number(o)-t))}})}),ue=(0,eR.d5)(a9,["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],e=>{var{typed:t,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}=e,u=(0,o6.e)({typed:t,equalScalar:o}),l=(0,o9.O)({typed:t,DenseMatrix:a}),c=(0,sv.R)({typed:t}),h=a7({typed:t,config:r,round:i});return t("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},"Complex, BigNumber":function(e,t){return e.ceil(t.toNumber())},BigNumber:function(e){return iD(e,i(e),r.epsilon)?i(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return iD(e,i(e,t),r.epsilon)?i(e,t):e.toDecimalPlaces(t.toNumber(),eF.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Fraction, BigNumber":function(e,t){return e.ceil(t.toNumber())},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),"Array, number | BigNumber":t.referToSelf(e=>(t,r)=>(0,rd.Fh)(t,t=>e(t,r),!0)),"SparseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>u(t,r,e,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(e=>(t,r)=>c(t,r,e,!1)),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(e=>(t,r)=>c(n(r),t,e,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(e=>(t,r)=>o(t,0)?s(r.size(),r.storage()):"dense"===r.storage()?c(r,t,e,!0):l(r,t,e,!0))})}),ut=r(7852),ur="compareNatural",ui=(0,eR.d5)(ur,["typed","compare"],e=>{var{typed:t,compare:r}=e,i=r.signatures["boolean,boolean"];return t(ur,{"any, any":function e(t,o){var s,a=(0,ej.kM)(t),u=(0,ej.kM)(o);if(("number"===a||"BigNumber"===a||"Fraction"===a)&&("number"===u||"BigNumber"===u||"Fraction"===u))return"0"!==(s=r(t,o)).toString()?s>0?1:-1:ut(a,u);var l=["Array","DenseMatrix","SparseMatrix"];if(l.includes(a)||l.includes(u))return 0!==(s=function e(t,r,i){return(0,ej.sA)(r)&&(0,ej.sA)(i)?n(t,r.toJSON().values,i.toJSON().values):(0,ej.sA)(r)?e(t,r.toArray(),i):(0,ej.sA)(i)?e(t,r,i.toArray()):(0,ej.jH)(r)?e(t,r.toJSON().data,i):(0,ej.jH)(i)?e(t,r,i.toJSON().data):Array.isArray(r)?Array.isArray(i)?n(t,r,i):e(t,r,[i]):e(t,[r],i)}(e,t,o))?s:ut(a,u);if(a!==u)return ut(a,u);if("Complex"===a)return t.re>o.re?1:t.re<o.re?-1:t.im>o.im?1:t.im<o.im?-1:0;if("Unit"===a)return t.equalBase(o)?e(t.value,o.value):n(e,t.formatUnits(),o.formatUnits());if("boolean"===a)return i(t,o);if("string"===a)return ut(t,o);if("Object"===a)return function(e,t,r){var i=Object.keys(t),o=Object.keys(r);i.sort(ut),o.sort(ut);var s=n(e,i,o);if(0!==s)return s;for(var a=0;a<i.length;a++){var u=e(t[i[a]],r[o[a]]);if(0!==u)return u}return 0}(e,t,o);if("null"===a||"undefined"===a)return 0;throw TypeError('Unsupported type of value "'+a+'"')}});function n(e,t,r){for(var i=0,n=Math.min(t.length,r.length);i<n;i++){var o=e(t[i],r[i]);if(0!==o)return o}return t.length>r.length?1:t.length<r.length?-1:0}}),un="composition",uo=(0,eR.d5)(un,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],e=>{var{typed:t,addScalar:r,combinations:i,isPositive:n,isNegative:o,isInteger:s,larger:a}=e;return t(un,{"number | BigNumber, number | BigNumber":function(e,t){if(s(e)&&n(e)&&s(t)&&n(t)){if(a(t,e))throw TypeError("k must be less than or equal to n in function composition")}else throw TypeError("Positive integer value expected in function composition");return i(r(e,-1),r(t,-1))}})}),us="cross",ua=(0,eR.d5)(us,["typed","matrix","subtract","multiply"],e=>{var{typed:t,matrix:r,subtract:i,multiply:n}=e;return t(us,{"Matrix, Matrix":function(e,t){return r(o(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(o(e.toArray(),t))},"Array, Matrix":function(e,t){return r(o(e,t.toArray()))},"Array, Array":o});function o(e,t){var r=Math.max((0,t7.aJ)(e).length,(0,t7.aJ)(t).length);e=(0,t7.L9)(e),t=(0,t7.L9)(t);var o=(0,t7.aJ)(e),s=(0,t7.aJ)(t);if(1!==o.length||1!==s.length||3!==o[0]||3!==s[0])throw RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+s.join(", ")+"])");var a=[i(n(e[1],t[2]),n(e[2],t[1])),i(n(e[2],t[0]),n(e[0],t[2])),i(n(e[0],t[1]),n(e[1],t[0]))];return r>1?[a]:a}}),uu=(0,eR.d5)("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],e=>{var{typed:t,matrix:r,subtractScalar:i,multiply:n,divideScalar:o,isZero:s,unaryMinus:a}=e;return t("det",{any:function(e){return(0,rt.d9)(e)},"Array | Matrix":function(e){var t;switch((t=(0,ej.SW)(e)?e.size():Array.isArray(e)?(e=r(e)).size():[]).length){case 0:return(0,rt.d9)(e);case 1:if(1===t[0])return(0,rt.d9)(e.valueOf()[0]);if(0===t[0])return 1;throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");case 2:var u=t[0],l=t[1];if(u===l)return function(e,t,r){if(1===t)return(0,rt.d9)(e[0][0]);if(2===t)return i(n(e[0][0],e[1][1]),n(e[1][0],e[0][1]));for(var u=!1,l=Array(t).fill(0).map((e,t)=>t),c=0;c<t;c++){var h=l[c];if(s(e[h][c])){var d=void 0;for(d=c+1;d<t;d++)if(!s(e[l[d]][c])){h=l[d],l[d]=l[c],l[c]=h,u=!u;break}if(d===t)return e[h][c]}for(var p=e[h][c],f=0===c?1:e[l[c-1]][c-1],m=c+1;m<t;m++)for(var v=l[m],g=c+1;g<t;g++)e[v][g]=o(i(n(e[v][g],p),n(e[v][c],e[h][g])),f)}var b=e[l[t-1]][t-1];return u?a(b):b}(e.clone().valueOf(),u,0);if(0===l)return 1;throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,re.WU)(t)+")")}}})}),ul="dotMultiply",uc=(0,eR.d5)(ul,["typed","matrix","equalScalar","multiplyScalar","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,multiplyScalar:n,concat:o}=e,s=(0,o5.v)({typed:t,equalScalar:i}),a=s2({typed:t,equalScalar:i}),u=(0,o6.e)({typed:t,equalScalar:i}),l=(0,o7.L)({typed:t,matrix:r,concat:o});return t(ul,l({elop:n,SS:a,DS:s,Ss:u}))}),uh=(0,eR.d5)("FibonacciHeap",["smaller","larger"],e=>{var{smaller:t,larger:r}=e,i=1/Math.log((1+Math.sqrt(5))/2);function n(){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function o(e,t,r){t.left.right=t.right,t.right.left=t.left,r.degree--,r.child===t&&(r.child=t.right),0===r.degree&&(r.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}n.prototype.type="FibonacciHeap",n.prototype.isFibonacciHeap=!0,n.prototype.insert=function(e,r){var i={key:e,value:r,degree:0};if(this._minimum){var n=this._minimum;i.left=n,i.right=n.right,n.right=i,i.right.left=i,t(e,n.key)&&(this._minimum=i)}else i.left=i,i.right=i,this._minimum=i;return this._size++,i},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._minimum=null,this._size=0},n.prototype.isEmpty=function(){return 0===this._size},n.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var n=this._minimum,o=e.degree,a=e.child;o>0;){var u=a.right;a.left.right=a.right,a.right.left=a.left,a.left=n,a.right=n.right,n.right=a,a.right.left=a,a.parent=null,a=u,o--}return e.left.right=e.right,e.right.left=e.left,n=e===e.right?null:function(e,n){var o,a=Math.floor(Math.log(n)*i)+1,u=Array(a),l=0,c=e;if(c)for(l++,c=c.right;c!==e;)l++,c=c.right;for(;l>0;){for(var h=c.degree,d=c.right;o=u[h];){if(r(c.key,o.key)){var p=o;o=c,c=p}s(o,c),u[h]=null,h++}u[h]=c,c=d,l--}e=null;for(var f=0;f<a;f++)(o=u[f])&&(e?(o.left.right=o.right,o.right.left=o.left,o.left=e,o.right=e.right,e.right=o,o.right.left=o,t(o.key,e.key)&&(e=o)):e=o);return e}(n=e.right,this._size),this._size--,this._minimum=n,e},n.prototype.remove=function(e){var r,i;this._minimum=(r=this._minimum,e.key=-1,(i=e.parent)&&t(e.key,i.key)&&(o(r,e,i),function e(t,r){var i=r.parent;i&&(r.mark?(o(t,r,i),e(i)):r.mark=!0)}(r,i)),t(e.key,r.key)&&(r=e),r),this.extractMinimum()};var s=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return n},{isClass:!0}),ud=(0,eR.d5)("fix",["typed","ceil","floor"],e=>{var{typed:t,ceil:r,floor:i}=e;return t("fix",{number:function(e){return e>0?i(e):r(e)},"number, number":function(e,t){return e>0?i(e,t):r(e,t)}})}),up=(0,eR.d5)("fix",["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],e=>{var{typed:t,Complex:r,matrix:i,ceil:n,floor:o,equalScalar:s,zeros:a,DenseMatrix:u}=e,l=(0,o9.O)({typed:t,DenseMatrix:u}),c=(0,sv.R)({typed:t}),h=ud({typed:t,ceil:n,floor:o});return t("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(e){return new r(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number":function(e,t){return new r(e.re>0?o(e.re,t):n(e.re,t),e.im>0?o(e.im,t):n(e.im,t))},"Complex, BigNumber":function(e,t){var i=t.toNumber();return new r(e.re>0?o(e.re,i):n(e.re,i),e.im>0?o(e.im,i):n(e.im,i))},BigNumber:function(e){return e.isNegative()?n(e):o(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?n(e,t):o(e,t)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0?n(e,t):o(e,t)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e,!0)),"Array | Matrix, number | BigNumber":t.referToSelf(e=>(t,r)=>(0,rd.Fh)(t,t=>e(t,r),!0)),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(e=>(t,r)=>c(i(r),t,e,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(e=>(t,r)=>s(t,0)?a(r.size(),r.storage()):"dense"===r.storage()?c(r,t,e,!0):l(r,t,e,!0))})}),uf="index",um=(0,eR.d5)(uf,["typed","Index"],e=>{var{typed:t,Index:r}=e;return t(uf,{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map(function(e){return(0,ej.l9)(e)?e.toNumber():(0,ej.kJ)(e)||(0,ej.SW)(e)?e.map(function(e){return(0,ej.l9)(e)?e.toNumber():e}):e}),i=new r;return r.apply(i,t),i}})}),uv=(0,eR.d5)("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],e=>{var{typed:t,config:r,abs:i,add:n,addScalar:o,matrix:s,multiply:a,multiplyScalar:u,divideScalar:l,subtract:c,smaller:h,equalScalar:d,flatten:p,isZero:f,isNumeric:m}=e;return t("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(e,t,r){var i=v(e.valueOf(),t.valueOf(),r.valueOf());return null===i?null:s(i)},"Matrix, Matrix, Matrix, Matrix":function(e,t,r,i){var n=g(e.valueOf(),t.valueOf(),r.valueOf(),i.valueOf());return null===n?null:s(n)}});function v(e,t,r){var i,n,s,a,h,d,p,f,v,g,y,C,Z,_,w,E,N,S;if(e=b(e),t=b(t),r=b(r),!x(e))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!(4===(i=r).length&&m(i[0])&&m(i[1])&&m(i[2])&&m(i[3])))throw TypeError("Array with 4 numbers expected as third argument");return n=e[0],s=e[1],a=e[2],h=t[0],d=t[1],p=t[2],f=r[0],v=r[1],g=r[2],y=r[3],C=u(n,f),Z=u(h,f),_=u(s,v),w=u(d,v),E=u(a,g),N=u(p,g),S=l(c(c(c(y,C),_),E),c(c(c(o(o(Z,w),N),C),_),E)),[o(n,u(S,c(h,n))),o(s,u(S,c(d,s))),o(a,u(S,c(p,a)))]}function g(e,t,s,p){if(e=b(e),t=b(t),s=b(s),p=b(p),2===e.length){if(!y(e))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(t))throw TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(s))throw TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(p))throw TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,s,d){var p=c(e,t),m=c(s,d),v=c(u(p[0],m[1]),u(m[0],p[1]));if(f(v)||h(i(v),r.epsilon))return null;var g=u(m[0],e[1]),b=u(m[1],e[0]),y=u(m[0],s[1]),x=u(m[1],s[0]);return n(a(p,l(o(c(c(g,b),y),x),v)),e)}(e,t,s,p)}if(3===e.length){if(!x(e))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(s))throw TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!x(p))throw TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(e,t,r,i,n,s,a,h,p,m,v,g){var b=C(e,a,m,a,t,h,v,h,r,p,g,p),y=C(m,a,i,e,v,h,n,t,g,p,s,r),x=C(e,a,i,e,t,h,n,t,r,p,s,r),Z=C(m,a,m,a,v,h,v,h,g,p,g,p),_=C(i,e,i,e,n,t,n,t,s,r,s,r),w=c(u(b,y),u(x,Z)),E=c(u(_,Z),u(y,y));if(f(E))return null;var N=l(w,E),S=l(o(b,u(N,y)),Z),A=o(e,u(N,c(i,e))),P=o(t,u(N,c(n,t))),D=o(r,u(N,c(s,r))),M=o(a,u(S,c(m,a))),O=o(h,u(S,c(v,h))),T=o(p,u(S,c(g,p)));return d(A,M)&&d(P,O)&&d(D,T)?[A,P,D]:null}(e[0],e[1],e[2],t[0],t[1],t[2],s[0],s[1],s[2],p[0],p[1],p[2])}throw TypeError("Arrays with two or thee dimensional points expected")}function b(e){return 1===e.length?e[0]:e.length>1&&Array.isArray(e[0])&&e.every(e=>Array.isArray(e)&&1===e.length)?p(e):e}function y(e){return 2===e.length&&m(e[0])&&m(e[1])}function x(e){return 3===e.length&&m(e[0])&&m(e[1])&&m(e[2])}function C(e,t,r,i,n,s,a,l,h,d,p,f){var m=u(c(e,t),c(r,i)),v=u(c(n,s),c(a,l)),g=u(c(h,d),c(p,f));return o(o(m,v),g)}}),ug="invmod",ub=(0,eR.d5)(ug,["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],e=>{var{typed:t,config:r,BigNumber:i,xgcd:n,equal:o,smaller:s,mod:a,add:u,isInteger:l}=e;return t(ug,{"number, number":c,"BigNumber, BigNumber":c});function c(e,t){if(!l(e)||!l(t))throw Error("Parameters in function invmod must be integer numbers");if(e=a(e,t),o(t,0))throw Error("Divisor must be non zero");var r=n(e,t),[c,h]=r=r.valueOf();return o(c,i(1))?(s(h=a(h,t),i(0))&&(h=u(h,t)),h):NaN}}),uy=(0,eR.d5)("lcm",["typed","matrix","equalScalar","concat"],e=>{var{typed:t,matrix:r,equalScalar:i,concat:n}=e,o=(0,o5.v)({typed:t,equalScalar:i}),s=(0,sA.X)({typed:t,equalScalar:i}),a=(0,o6.e)({typed:t,equalScalar:i}),u=(0,o7.L)({typed:t,matrix:r,concat:n}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=t.referToSelf(e=>(t,r,i)=>{for(var n=e(t,r),o=0;o<i.length;o++)n=e(n,i[o]);return n}),t("lcm",{"number, number":rE,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;for(var r=e.times(t);!t.isZero();){var i=t;t=e.mod(i),e=i}return r.div(e).abs()},"Fraction, Fraction":(e,t)=>e.lcm(t)},u({SS:s,DS:o,Ss:a}),c)}),ux="log1p",uC=(0,eR.d5)(ux,["typed","config","divideScalar","log","Complex"],e=>{var{typed:t,config:r,divideScalar:i,log:n,Complex:o}=e;return t(ux,{number:function(e){return e>=-1||r.predictable?(0,eI.Kr)(e):s(new o(e,0))},Complex:s,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||r.predictable?t.ln():s(new o(e.toNumber(),0))},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e)),"any, any":t.referToSelf(e=>(t,r)=>i(e(t),n(r)))});function s(e){var t=e.re+1;return new o(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}}),uZ=r(3117),u_="setCartesian",uw=(0,eR.d5)(u_,["typed","size","subset","compareNatural","Index","DenseMatrix"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=e;return t(u_,{"Array | Matrix, Array | Matrix":function(e,t){var a=[];if(0!==i(r(e),new o(0))&&0!==i(r(t),new o(0))){var u=(0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n),l=(0,t7.xH)(Array.isArray(t)?t:t.toArray()).sort(n);a=[];for(var c=0;c<u.length;c++)for(var h=0;h<l.length;h++)a.push([u[c],l[h]])}return Array.isArray(e)&&Array.isArray(t)?a:new s(a)}})}),uE="setDistinct",uN=(0,eR.d5)(uE,["typed","size","subset","compareNatural","Index","DenseMatrix"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=e;return t(uE,{"Array | Matrix":function(e){var t;if(0===i(r(e),new o(0)))t=[];else{var a=(0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n);(t=[]).push(a[0]);for(var u=1;u<a.length;u++)0!==n(a[u],a[u-1])&&t.push(a[u])}return Array.isArray(e)?t:new s(t)}})}),uS="setIsSubset",uA=(0,eR.d5)(uS,["typed","size","subset","compareNatural","Index"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o}=e;return t(uS,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(r(e),new o(0)))return!0;if(0===i(r(t),new o(0)))return!1;for(var s,a=(0,t7.yV)((0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n)),u=(0,t7.yV)((0,t7.xH)(Array.isArray(t)?t:t.toArray()).sort(n)),l=0;l<a.length;l++){s=!1;for(var c=0;c<u.length;c++)if(0===n(a[l].value,u[c].value)&&a[l].identifier===u[c].identifier){s=!0;break}if(!1===s)return!1}return!0}})}),uP="setPowerset",uD=(0,eR.d5)(uP,["typed","size","subset","compareNatural","Index"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o}=e;return t(uP,{"Array | Matrix":function(e){if(0===i(r(e),new o(0)))return[];for(var t=(0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n),s=[],a=0;a.toString(2).length<=t.length;)s.push(function(e,t){for(var r=[],i=0;i<t.length;i++)"1"===t[i]&&r.push(e[i]);return r}(t,a.toString(2).split("").reverse())),a++;return function(e){for(var t=[],r=e.length-1;r>0;r--)for(var i=0;i<r;i++)e[i].length>e[i+1].length&&(t=e[i],e[i]=e[i+1],e[i+1]=t);return e}(s)}})}),uM="smallerEq",uO=(0,eR.d5)(uM,["typed","config","matrix","DenseMatrix","concat"],e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:o}=e,s=(0,o4.$)({typed:t}),a=o8({typed:t,DenseMatrix:n}),u=(0,o9.O)({typed:t,DenseMatrix:n}),l=(0,o7.L)({typed:t,matrix:i,concat:o}),c=iM({typed:t});return t(uM,uT({typed:t,config:r}),{"boolean, boolean":(e,t)=>e<=t,"BigNumber, BigNumber":function(e,t){return e.lte(t)||iD(e,t,r.epsilon)},"Fraction, Fraction":(e,t)=>1!==e.compare(t),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:a,DS:s,Ss:u}))}),uT=(0,eR.d5)(uM,["typed","config"],e=>{var{typed:t,config:r}=e;return t(uM,{"number, number":function(e,t){return e<=t||(0,eI.RI)(e,t,r.epsilon)}})}),uB="sort",uF=(0,eR.d5)(uB,["typed","matrix","compare","compareNatural"],e=>{var{typed:t,matrix:r,compare:i,compareNatural:n}=e,o=(e,t)=>-i(e,t);return t(uB,{Array:function(e){return a(e),e.sort(i)},Matrix:function(e){return u(e),r(e.toArray().sort(i),e.storage())},"Array, function":function(e,t){return a(e),e.sort(t)},"Matrix, function":function(e,t){return u(e),r(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return a(e),e.sort(s(t))},"Matrix, string":function(e,t){return u(e),r(e.toArray().sort(s(t)),e.storage())}});function s(e){if("asc"===e)return i;if("desc"===e)return o;if("natural"===e)return n;throw Error('String "asc", "desc", or "natural" expected')}function a(e){if(1!==(0,t7.aJ)(e).length)throw Error("One dimensional array expected")}function u(e){if(1!==e.size().length)throw Error("One dimensional matrix expected")}}),uR=r(6949),uk=r(451),uL=r(8481),uI="setDifference",uj=(0,eR.d5)(uI,["typed","size","subset","compareNatural","Index","DenseMatrix"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=e;return t(uI,{"Array | Matrix, Array | Matrix":function(e,t){var a;if(0===i(r(e),new o(0)))a=[];else{if(0===i(r(t),new o(0)))return(0,t7.xH)(e.toArray());var u,l=(0,t7.yV)((0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n)),c=(0,t7.yV)((0,t7.xH)(Array.isArray(t)?t:t.toArray()).sort(n));a=[];for(var h=0;h<l.length;h++){u=!1;for(var d=0;d<c.length;d++)if(0===n(l[h].value,c[d].value)&&l[h].identifier===c[d].identifier){u=!0;break}u||a.push(l[h])}}return Array.isArray(e)&&Array.isArray(t)?(0,t7.D$)(a):new s((0,t7.D$)(a))}})}),uz="setMultiplicity",uU=(0,eR.d5)(uz,["typed","size","subset","compareNatural","Index"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o}=e;return t(uz,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===i(r(t),new o(0)))return 0;for(var s=(0,t7.xH)(Array.isArray(t)?t:t.toArray()),a=0,u=0;u<s.length;u++)0===n(s[u],e)&&a++;return a}})}),uY="setSymDifference",uX=(0,eR.d5)(uY,["typed","size","concat","subset","setDifference","Index"],e=>{var{typed:t,size:r,concat:i,subset:n,setDifference:o,Index:s}=e;return t(uY,{"Array | Matrix, Array | Matrix":function(e,t){if(0===n(r(e),new s(0)))return(0,t7.xH)(t);if(0===n(r(t),new s(0)))return(0,t7.xH)(e);var a=(0,t7.xH)(e),u=(0,t7.xH)(t);return i(o(a,u),o(u,a))}})}),uJ=(0,eR.d5)("Spa",["addScalar","equalScalar","FibonacciHeap"],e=>{var{addScalar:t,equalScalar:r,FibonacciHeap:i}=e;function n(){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return n.prototype.type="Spa",n.prototype.isSpa=!0,n.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var r=this._heap.insert(e,t);this._values[e]=r}},n.prototype.get=function(e){var t=this._values[e];return t?t.value:0},n.prototype.accumulate=function(e,r){var i=this._values[e];i?i.value=t(i.value,r):(i=this._heap.insert(e,r),this._values[e]=i)},n.prototype.forEach=function(e,t,i){var n=this._heap,o=this._values,s=[],a=n.extractMinimum();for(a&&s.push(a);a&&a.key<=t;)a.key>=e&&!r(a.value,0)&&i(a.key,a.value,this),(a=n.extractMinimum())&&s.push(a);for(var u=0;u<s.length;u++){var l=s[u];o[(a=n.insert(l.key,l.value)).key]=a}},n.prototype.swap=function(e,t){var r=this._values[e],i=this._values[t];if(!r&&i)r=this._heap.insert(e,i.value),this._heap.remove(i),this._values[e]=r,this._values[t]=void 0;else if(r&&!i)i=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=i,this._values[e]=void 0;else if(r&&i){var n=r.value;r.value=i.value,i.value=n}},n},{isClass:!0}),uq=r(5052),uG=(0,eR.d5)("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],e=>{var{typed:t,matrix:r,divideScalar:i,addScalar:n,multiply:o,unaryMinus:s,det:a,identity:u,abs:l}=e;return t("inv",{"Array | Matrix":function(e){var t=(0,ej.SW)(e)?e.size():(0,t7.aJ)(e);switch(t.length){case 1:if(1===t[0]){if((0,ej.SW)(e))return r([i(1,e.valueOf()[0])]);return[i(1,e[0])]}throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");case 2:var n=t[0],o=t[1];if(n===o){if((0,ej.SW)(e))return r(c(e.valueOf(),n,o),e.storage());return c(e,n,o)}throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,re.WU)(t)+")")}},any:function(e){return i(1,e)}});function c(e,t,r){if(1===t){if(0===(p=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,p)]]}if(2===t){var c,h,d,p,f,m=a(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[i(e[1][1],m),i(s(e[0][1]),m)],[i(s(e[1][0]),m),i(e[0][0],m)]]}var v=e.concat();for(c=0;c<t;c++)v[c]=v[c].concat();for(var g=u(t).valueOf(),b=0;b<r;b++){var y=l(v[b][b]),x=b;for(c=b+1;c<t;)l(v[c][b])>y&&(y=l(v[c][b]),x=c),c++;if(0===y)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==b&&(f=v[b],v[b]=v[c],v[c]=f,f=g[b],g[b]=g[c],g[c]=f);var C=v[b],Z=g[b];for(c=0;c<t;c++){var _=v[c],w=g[c];if(c!==b){if(0!==_[b]){for(d=i(s(_[b]),C[b]),h=b;h<r;h++)_[h]=n(_[h],o(d,C[h]));for(h=0;h<r;h++)w[h]=n(w[h],o(d,Z[h]))}}else{for(d=C[b],h=b;h<r;h++)_[h]=i(_[h],d);for(h=0;h<r;h++)w[h]=i(w[h],d)}}}return g}}),uH=(0,eR.d5)("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],e=>{var{typed:t,matrix:r,abs:i,addScalar:n,divideScalar:o,multiplyScalar:s,subtractScalar:a,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:p}=e;return t("lup",{DenseMatrix:function(e){return f(e)},SparseMatrix:function(e){return function(e){var t,r,n,a=e._size[0],h=e._size[1],f=Math.min(a,h),m=e._values,v=e._index,g=e._ptr,b=[],y=[],x=[],C=[a,f],Z=[],_=[],w=[],E=[f,h],N=[],S=[];for(t=0;t<a;t++)N[t]=t,S[t]=t;var A=function(e,t){var r=S[e],i=S[t];N[r]=t,N[i]=e,S[e]=i,S[t]=r};for(r=0;r<h;r++)!function(){var e=new p;r<a&&(x.push(b.length),b.push(1),y.push(r)),w.push(Z.length);var h=g[r],f=g[r+1];for(n=h;n<f;n++)t=v[n],e.set(N[t],m[n]);r>0&&e.forEach(0,r-1,function(t,r){d._forEachRow(t,b,y,x,function(i,n){i>t&&e.accumulate(i,c(s(n,r)))})});var S=r,P=e.get(r),D=i(P);e.forEach(r+1,a-1,function(e,t){var r=i(t);u(r,D)&&(S=e,D=r,P=t)}),r!==S&&(d._swapRows(r,S,C[1],b,y,x),d._swapRows(r,S,E[1],Z,_,w),e.swap(r,S),A(r,S)),e.forEach(0,a-1,function(e,t){e<=r?(Z.push(t),_.push(e)):l(t=o(t,P),0)||(b.push(t),y.push(e))})}();return w.push(Z.length),x.push(b.length),{L:new d({values:b,index:y,ptr:x,size:C}),U:new d({values:Z,index:_,ptr:w,size:E}),p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=f(r(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function f(e){var t,r,c,d=e._size[0],p=e._size[1],f=Math.min(d,p),m=(0,rt.d9)(e._data),v=[],g=[d,f],b=[],y=[f,p],x=[];for(t=0;t<d;t++)x[t]=t;for(r=0;r<p;r++){if(r>0)for(t=0;t<d;t++){var C=Math.min(t,r),Z=0;for(c=0;c<C;c++)Z=n(Z,s(m[t][c],m[c][r]));m[t][r]=a(m[t][r],Z)}var _=r,w=0,E=0;for(t=r;t<d;t++){var N=m[t][r],S=i(N);u(S,w)&&(_=t,w=S,E=N)}if(r!==_&&(x[r]=[x[_],x[_]=x[r]][0],h._swapRows(r,_,m)),r<d)for(t=r+1;t<d;t++)l(m[t][r],0)||(m[t][r]=o(m[t][r],E))}for(r=0;r<p;r++)for(t=0;t<d;t++){if(0===r&&(t<p&&(b[t]=[]),v[t]=[]),t<r){t<p&&(b[t][r]=m[t][r]),r<d&&(v[t][r]=0);continue}if(t===r){t<p&&(b[t][r]=m[t][r]),r<d&&(v[t][r]=1);continue}t<p&&(b[t][r]=0),r<d&&(v[t][r]=m[t][r])}var A=new h({data:v,size:g}),P=new h({data:b,size:y}),D=[];for(t=0,f=x.length;t<f;t++)D[x[t]]=t;return{L:A,U:P,p:D,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),uV="pinv",uW=(0,eR.d5)(uV,["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],e=>{var{typed:t,matrix:r,inv:i,deepEqual:n,equal:o,dotDivide:s,dot:a,ctranspose:u,divideScalar:l,multiply:c,add:h,Complex:d}=e;return t(uV,{"Array | Matrix":function(e){var t=(0,ej.SW)(e)?e.size():(0,t7.aJ)(e);switch(t.length){case 1:if(m(e))return u(e);if(1===t[0])return i(e);return s(u(e),a(e,e));case 2:if(m(e))return u(e);var n=t[0],o=t[1];if(n===o)try{return i(e)}catch(e){if(e instanceof Error&&e.message.match(/Cannot calculate inverse, determinant is zero/));else throw e}if((0,ej.SW)(e))return r(p(e.valueOf(),n,o),e.storage());return p(e,n,o);default:throw RangeError("Matrix must be two dimensional (size: "+(0,re.WU)(t)+")")}},any:function(e){return o(e,0)?(0,rt.d9)(e):l(1,e)}});function p(e,t,r){var n,{C:o,F:l}=(n=function(e,t,r){for(var i=(0,rt.d9)(e),n=0,o=0;o<t&&!(r<=n);o++){for(var a=o;f(i[a][n]);)if(t===++a&&(a=o,r===++n))return i;[i[a],i[o]]=[i[o],i[a]];for(var u=i[o][n],l=0;l<r;l++)i[o][l]=s(i[o][l],u);for(var d=0;d<t;d++)if(d!==o){u=i[d][n];for(var p=0;p<r;p++)i[d][p]=h(i[d][p],c(-1,c(u,i[o][p])))}n++}return i}(e,t,r),{C:e.map((e,r)=>e.filter((e,r)=>r<t&&!f(a(n[r],n[r])))),F:n.filter((e,t)=>!f(a(n[t],n[t])))}),d=c(i(c(u(o),o)),u(o)),p=c(u(l),i(c(l,u(l))));return c(p,d)}function f(e){return o(h(e,d(1,1)),h(0,d(1,1)))}function m(e){return n(h(e,d(1,1)),h(c(e,0),d(1,1)))}}),u$=(0,eR.d5)("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],e=>{var{typed:t,config:r,identity:i,multiply:n,matrix:o,inv:s,number:a,fraction:u,Complex:l}=e;return t("pow",{"number, number":c,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||r.predictable?e.pow(t):new l(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){var i=e.pow(t);if(null!=i)return i;if(!r.predictable)return c(e.valueOf(),t.valueOf());throw Error("Result of pow is non-rational and cannot be expressed as a fraction")},"Array, number":h,"Array, BigNumber":function(e,t){return h(e,t.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(e,t){return d(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function c(e,t){if(r.predictable&&!(0,eI.U)(t)&&e<0)try{var i=u(t),n=a(i);if((t===n||1e-14>Math.abs((t-n)/t))&&i.d%2==1)return(i.n%2==0?1:-1)*Math.pow(-e,t)}catch(e){}return r.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:(0,eI.U)(t)||e>=0||r.predictable?rO(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new l(e,0).pow(t,0)}function h(e,t){if(!(0,eI.U)(t))throw TypeError("For A^b, b must be an integer (value is "+t+")");var r=(0,t7.aJ)(e);if(2!==r.length)throw Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");if(t<0)try{return h(s(e),-t)}catch(e){if("Cannot calculate inverse, determinant is zero"===e.message)throw TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+t+")");throw e}for(var o=i(r[0]).valueOf(),a=e;t>=1;)(1&t)==1&&(o=n(a,o)),t>>=1,a=n(a,a);return o}function d(e,t){return o(h(e.valueOf(),t))}}),uQ="setIntersect",uK=(0,eR.d5)(uQ,["typed","size","subset","compareNatural","Index","DenseMatrix"],e=>{var{typed:t,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=e;return t(uQ,{"Array | Matrix, Array | Matrix":function(e,t){var a;if(0===i(r(e),new o(0))||0===i(r(t),new o(0)))a=[];else{var u=(0,t7.yV)((0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(n)),l=(0,t7.yV)((0,t7.xH)(Array.isArray(t)?t:t.toArray()).sort(n));a=[];for(var c=0;c<u.length;c++)for(var h=0;h<l.length;h++)if(0===n(u[c].value,l[h].value)&&u[c].identifier===l[h].identifier){a.push(u[c]);break}}return Array.isArray(e)&&Array.isArray(t)?(0,t7.D$)(a):new s((0,t7.D$)(a))}})}),u0="setUnion",u1=(0,eR.d5)(u0,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],e=>{var{typed:t,size:r,concat:i,subset:n,setIntersect:o,setSymDifference:s,Index:a}=e;return t(u0,{"Array | Matrix, Array | Matrix":function(e,t){if(0===n(r(e),new a(0)))return(0,t7.xH)(t);if(0===n(r(t),new a(0)))return(0,t7.xH)(e);var u=(0,t7.xH)(e),l=(0,t7.xH)(t);return i(s(u,l),o(u,l))}})}),u2="sqrtm",u3=(0,eR.d5)(u2,["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],e=>{var{typed:t,abs:r,add:i,multiply:n,map:o,sqrt:s,subtract:a,inv:u,size:l,max:c,identity:h}=e;return t(u2,{"Array | Matrix":function(e){var t=(0,ej.SW)(e)?e.size():(0,t7.aJ)(e);switch(t.length){case 1:if(1===t[0])return o(e,s);throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");case 2:if(t[0]===t[1])return function(e){var t,o=0,s=e,d=h(l(e));do{var p=s;if(s=n(.5,i(p,u(d))),d=n(.5,i(d,u(p))),(t=c(r(a(s,p))))>1e-6&&++o>1e3)throw Error("computing square root of matrix: iterative method could not converge")}while(t>1e-6);return s}(e);throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");default:throw RangeError("Matrix must be at most two dimensional (size: "+(0,re.WU)(t)+")")}}})}),u5=r(7632);function u4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u4(Object(r),!0).forEach(function(t){(0,u5.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u6=(0,eR.d5)("Unit",["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],e=>{var t,r,i,{on:n,config:o,addScalar:s,subtractScalar:a,multiplyScalar:u,divideScalar:l,pow:c,abs:h,fix:d,round:p,equal:f,isNumeric:m,format:v,number:g,Complex:b,BigNumber:y,Fraction:x}=e;function C(e,t){if(!(this instanceof C))throw Error("Constructor must be called with the new operator");if(!(null==e||m(e)||(0,ej.Mc)(e)))throw TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===t)this.units=[],this.dimensions=M.map(e=>0);else if("string"==typeof t){var r=C.parse(t);this.units=r.units,this.dimensions=r.dimensions}else if((0,ej.wr)(t)&&null===t.value)this.fixPrefix=t.fixPrefix,this.skipAutomaticSimplification=t.skipAutomaticSimplification,this.dimensions=t.dimensions.slice(0),this.units=t.units.map(e=>(0,sO.Z)({},e));else throw TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(e)}function Z(){for(;" "===i||"	"===i;)w()}function _(e){return e>="0"&&e<="9"}function w(){r++,i=t.charAt(r)}function E(e){r=e,i=t.charAt(r)}function N(){var e,t="",n=r;if("+"===i?w():"-"===i&&(t+=i,w()),!((e=i)>="0"&&e<="9"||"."===e))return E(n),null;if("."===i){if(t+=i,w(),!_(i))return E(n),null}else{for(;_(i);)t+=i,w();"."===i&&(t+=i,w())}for(;_(i);)t+=i,w();if("E"===i||"e"===i){var o="",s=r;if(o+=i,w(),("+"===i||"-"===i)&&(o+=i,w()),!_(i))return E(s),t;for(t+=o;_(i);)t+=i,w()}return t}function S(e){return i===e?(w(),e):null}Object.defineProperty(C,"name",{value:"Unit"}),C.prototype.constructor=C,C.prototype.type="Unit",C.prototype.isUnit=!0,C.parse=function(e,n){if(n=n||{},r=-1,i="","string"!=typeof(t=e))throw TypeError("Invalid argument in Unit.parse, string expected");var s=new C;s.units=[];var a=1,u=!1;w(),Z();var l=N(),c=null;if(l){if("BigNumber"===o.number)c=new y(l);else if("Fraction"===o.number)try{c=new x(l)}catch(e){c=parseFloat(l)}else c=parseFloat(l);Z(),S("*")?(a=1,u=!0):S("/")&&(a=-1,u=!0)}for(var h=[],d=1;;){for(Z();"("===i;)h.push(a),d*=a,a=1,w(),Z();var p=void 0;if(i){var f=i;if(null===(p=function(){for(var e="";_(i)||C.isValidAlpha(i);)e+=i,w();var t=e.charAt(0);return C.isValidAlpha(t)?e:null}()))throw SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+r.toString())}else break;var m=A(p);if(null===m)throw SyntaxError('Unit "'+p+'" not found.');var v=a*d;if(Z(),S("^")){Z();var g=N();if(null===g)throw SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');v*=g}s.units.push({unit:m.unit,prefix:m.prefix,power:v});for(var b=0;b<M.length;b++)s.dimensions[b]+=(m.unit.dimensions[b]||0)*v;for(Z();")"===i;){if(0===h.length)throw SyntaxError('Unmatched ")" in "'+t+'" at index '+r.toString());d/=h.pop(),w(),Z()}if(u=!1,S("*")?(a=1,u=!0):S("/")?(a=-1,u=!0):a=1,m.unit.base){var E=m.unit.base.key;L.auto[E]={unit:m.unit,prefix:m.prefix}}}if(Z(),i)throw SyntaxError('Could not parse: "'+e+'"');if(u)throw SyntaxError('Trailing characters: "'+e+'"');if(0!==h.length)throw SyntaxError('Unmatched "(" in "'+t+'"');if(0===s.units.length&&!n.allowNoUnits)throw SyntaxError('"'+e+'" contains no units');return s.value=void 0!==c?s._normalize(c):null,s},C.prototype.clone=function(){var e=new C;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=(0,rt.d9)(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var r in e.units[t]={},this.units[t])(0,rt.nr)(this.units[t],r)&&(e.units[t][r]=this.units[t][r]);return e},C.prototype.valueType=function(){return(0,ej.kM)(this.value)},C.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},C.prototype._normalize=function(e){if(null==e||0===this.units.length)return e;for(var t=e,r=C._getNumberConverter((0,ej.kM)(e)),i=0;i<this.units.length;i++){var n=r(this.units[i].unit.value),o=r(this.units[i].prefix.value),s=r(this.units[i].power);t=u(t,c(u(n,o),s))}return t},C.prototype._denormalize=function(e,t){if(null==e||0===this.units.length)return e;for(var r=e,i=C._getNumberConverter((0,ej.kM)(e)),n=0;n<this.units.length;n++){var o=i(this.units[n].unit.value),s=i(this.units[n].prefix.value),a=i(this.units[n].power);r=l(r,c(u(o,s),a))}return r};var A=eU(e=>{if((0,rt.nr)(F,e)){var t=F[e],r=t.prefixes[""];return{unit:t,prefix:r}}for(var i in F)if((0,rt.nr)(F,i)&&(0,re.pn)(e,i)){var n=F[i],o=e.length-i.length,s=e.substring(0,o),a=(0,rt.nr)(n.prefixes,s)?n.prefixes[s]:void 0;if(void 0!==a)return{unit:n,prefix:a}}return null},{hasher:e=>e[0],limit:100});function P(e){return e.equalBase(O.NONE)&&null!==e.value&&!o.predictable?e.value:e}C.isValuelessUnit=function(e){return null!==A(e)},C.prototype.hasBase=function(e){if("string"==typeof e&&(e=O[e]),!e)return!1;for(var t=0;t<M.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},C.prototype.equalBase=function(e){for(var t=0;t<M.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},C.prototype.equals=function(e){return this.equalBase(e)&&f(this.value,e.value)},C.prototype.multiply=function(e){for(var t=this.clone(),r=(0,ej.wr)(e)?e:new C(e),i=0;i<M.length;i++)t.dimensions[i]=(this.dimensions[i]||0)+(r.dimensions[i]||0);for(var n=0;n<r.units.length;n++){var o=u8({},r.units[n]);t.units.push(o)}if(null!==this.value||null!==r.value){var s=null===this.value?this._normalize(1):this.value,a=null===r.value?r._normalize(1):r.value;t.value=u(s,a)}else t.value=null;return(0,ej.wr)(e)&&(t.skipAutomaticSimplification=!1),P(t)},C.prototype.divideInto=function(e){return new C(e).divide(this)},C.prototype.divide=function(e){for(var t=this.clone(),r=(0,ej.wr)(e)?e:new C(e),i=0;i<M.length;i++)t.dimensions[i]=(this.dimensions[i]||0)-(r.dimensions[i]||0);for(var n=0;n<r.units.length;n++){var o=u8(u8({},r.units[n]),{},{power:-r.units[n].power});t.units.push(o)}if(null!==this.value||null!==r.value){var s=null===this.value?this._normalize(1):this.value,a=null===r.value?r._normalize(1):r.value;t.value=l(s,a)}else t.value=null;return(0,ej.wr)(e)&&(t.skipAutomaticSimplification=!1),P(t)},C.prototype.pow=function(e){for(var t=this.clone(),r=0;r<M.length;r++)t.dimensions[r]=(this.dimensions[r]||0)*e;for(var i=0;i<t.units.length;i++)t.units[i].power*=e;return null!==t.value?t.value=c(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,P(t)},C.prototype.abs=function(){var e=this.clone();if(null!==e.value){if(e._isDerived()||0===e.units.length||0===e.units[0].unit.offset)e.value=h(e.value);else{var t=e._numberConverter(),r=u(t(e.units[0].unit.value),t(e.units[0].unit.offset));e.value=a(h(s(e.value,r)),r)}}for(var i in e.units)("VA"===e.units[i].unit.name||"VAR"===e.units[i].unit.name)&&(e.units[i].unit=F.W);return e},C.prototype.to=function(e){var t,r=null===this.value?this._normalize(1):this.value;if("string"==typeof e)t=C.parse(e);else if((0,ej.wr)(e))t=e.clone();else throw Error("String or Unit expected as parameter");if(!this.equalBase(t))throw Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw Error("Cannot convert to a unit with a value");if(null===this.value||this._isDerived()||0===this.units.length||0===t.units.length||this.units[0].unit.offset===t.units[0].unit.offset)t.value=(0,rt.d9)(r);else{var i=C._getNumberConverter((0,ej.kM)(r)),n=u(this.units[0].unit.value,this.units[0].unit.offset),o=u(t.units[0].unit.value,t.units[0].unit.offset);t.value=s(r,i(a(n,o)))}return t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},C.prototype.toNumber=function(e){return g(this.toNumeric(e))},C.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},C.prototype.toString=function(){return this.format()},C.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},C.fromJSON=function(e){var t=new C(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},C.prototype.valueOf=C.prototype.toString,C.prototype.simplify=function(){var e,t,r=this.clone(),i=[];for(var n in I)if((0,rt.nr)(I,n)&&r.hasBase(O[n])){e=n;break}if("NONE"===e)r.units=[];else if(e&&(0,rt.nr)(I,e)&&(t=I[e]),t)r.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var o=!1,s=0;s<M.length;s++){var a=M[s];Math.abs(r.dimensions[s]||0)>1e-12&&((0,rt.nr)(I,a)?i.push({unit:I[a].unit,prefix:I[a].prefix,power:r.dimensions[s]||0}):o=!0)}i.length<r.units.length&&!o&&(r.units=i)}return r},C.prototype.toSI=function(){for(var e=this.clone(),t=[],r=0;r<M.length;r++){var i=M[r];if(Math.abs(e.dimensions[r]||0)>1e-12){if((0,rt.nr)(L.si,i))t.push({unit:L.si[i].unit,prefix:L.si[i].prefix,power:e.dimensions[r]||0});else throw Error("Cannot express custom unit "+i+" in SI units")}}return(e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,null!==this.value)?(e.value=null,this.to(e)):e},C.prototype.formatUnits=function(){for(var e="",t="",r=0,i=0,n=0;n<this.units.length;n++)this.units[n].power>0?(r++,e+=" "+this.units[n].prefix.name+this.units[n].unit.name,Math.abs(this.units[n].power-1)>1e-15&&(e+="^"+this.units[n].power)):this.units[n].power<0&&i++;if(i>0)for(var o=0;o<this.units.length;o++)this.units[o].power<0&&(r>0?(t+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power+1)>1e-15&&(t+="^"+-this.units[o].power)):t+=" "+this.units[o].prefix.name+this.units[o].unit.name+"^"+this.units[o].power);e=e.substr(1),t=t.substr(1),r>1&&i>0&&(e="("+e+")"),i>1&&r>0&&(t="("+t+")");var s=e;return r>0&&i>0&&(s+=" / "),s+=t},C.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var i in void 0!==t.value&&null!==t.value&&(0,ej.Mc)(t.value)&&(r=1e-14>Math.abs(t.value.re)),t.units)(0,rt.nr)(t.units,i)&&t.units[i].unit&&("VA"===t.units[i].unit.name&&r?t.units[i].unit=F.VAR:"VAR"!==t.units[i].unit.name||r||(t.units[i].unit=F.VA));1===t.units.length&&!t.fixPrefix&&1e-14>Math.abs(t.units[0].power-Math.round(t.units[0].power))&&(t.units[0].prefix=t._bestPrefix());var n=t._denormalize(t.value),o=null!==t.value?v(n,e||{}):"",s=t.formatUnits();return t.value&&(0,ej.Mc)(t.value)&&(o="("+o+")"),s.length>0&&o.length>0&&(o+=" "),o+=s},C.prototype._bestPrefix=function(){if(1!==this.units.length||Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?h(this.value):0,t=h(this.units[0].unit.value),r=this.units[0].prefix;if(0===e)return r;var i=this.units[0].power,n=Math.log(e/Math.pow(r.value*t,i))/Math.LN10-1.2;if(n>-2.200001&&n<1.800001)return r;n=Math.abs(n);var o=this.units[0].unit.prefixes;for(var s in o)if((0,rt.nr)(o,s)){var a=o[s];if(a.scientific){var u=Math.abs(Math.log(e/Math.pow(a.value*t,i))/Math.LN10-1.2);(u<n||u===n&&a.name.length<r.name.length)&&(r=a,n=u)}}return r},C.prototype.splitUnit=function(e){for(var t=this.clone(),r=[],i=0;i<e.length&&(t=t.to(e[i]),i!==e.length-1);i++){var n=t.toNumeric(),o=p(n),u=new C(f(o,n)?o:d(t.toNumeric()),e[i].toString());r.push(u),t=a(t,u)}for(var l=0,c=0;c<r.length;c++)l=s(l,r[c].value);return f(l,this.value)&&(t.value=0),r.push(t),r};var D={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:1048576,scientific:!0},Gi:{name:"Gi",value:1073741824,scientific:!0},Ti:{name:"Ti",value:1099511627776,scientific:!0},Pi:{name:"Pi",value:0x4000000000000,scientific:!0},Ei:{name:"Ei",value:0x1000000000000000,scientific:!0},Zi:{name:"Zi",value:11805916207174113e5,scientific:!0},Yi:{name:"Yi",value:12089258196146292e8,scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:1048576,scientific:!0},gibi:{name:"gibi",value:1073741824,scientific:!0},tebi:{name:"tebi",value:1099511627776,scientific:!0},pebi:{name:"pebi",value:0x4000000000000,scientific:!0},exi:{name:"exi",value:0x1000000000000000,scientific:!0},zebi:{name:"zebi",value:11805916207174113e5,scientific:!0},yobi:{name:"yobi",value:12089258196146292e8,scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};D.SHORTLONG=(0,sO.Z)({},D.SHORT,D.LONG),D.BINARY_SHORT=(0,sO.Z)({},D.BINARY_SHORT_SI,D.BINARY_SHORT_IEC),D.BINARY_LONG=(0,sO.Z)({},D.BINARY_LONG_SI,D.BINARY_LONG_IEC);var M=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],O={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var T in O)(0,rt.nr)(O,T)&&(O[T].key=T);var B={name:"",base:{},value:1,offset:0,dimensions:M.map(e=>0)},F={meter:{name:"meter",base:O.LENGTH,prefixes:D.LONG,value:1,offset:0},inch:{name:"inch",base:O.LENGTH,prefixes:D.NONE,value:.0254,offset:0},foot:{name:"foot",base:O.LENGTH,prefixes:D.NONE,value:.3048,offset:0},yard:{name:"yard",base:O.LENGTH,prefixes:D.NONE,value:.9144,offset:0},mile:{name:"mile",base:O.LENGTH,prefixes:D.NONE,value:1609.344,offset:0},link:{name:"link",base:O.LENGTH,prefixes:D.NONE,value:.201168,offset:0},rod:{name:"rod",base:O.LENGTH,prefixes:D.NONE,value:5.0292,offset:0},chain:{name:"chain",base:O.LENGTH,prefixes:D.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:O.LENGTH,prefixes:D.NONE,value:1e-10,offset:0},m:{name:"m",base:O.LENGTH,prefixes:D.SHORT,value:1,offset:0},in:{name:"in",base:O.LENGTH,prefixes:D.NONE,value:.0254,offset:0},ft:{name:"ft",base:O.LENGTH,prefixes:D.NONE,value:.3048,offset:0},yd:{name:"yd",base:O.LENGTH,prefixes:D.NONE,value:.9144,offset:0},mi:{name:"mi",base:O.LENGTH,prefixes:D.NONE,value:1609.344,offset:0},li:{name:"li",base:O.LENGTH,prefixes:D.NONE,value:.201168,offset:0},rd:{name:"rd",base:O.LENGTH,prefixes:D.NONE,value:5.02921,offset:0},ch:{name:"ch",base:O.LENGTH,prefixes:D.NONE,value:20.1168,offset:0},mil:{name:"mil",base:O.LENGTH,prefixes:D.NONE,value:254e-7,offset:0},m2:{name:"m2",base:O.SURFACE,prefixes:D.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:O.SURFACE,prefixes:D.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:O.SURFACE,prefixes:D.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:O.SURFACE,prefixes:D.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:O.SURFACE,prefixes:D.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:O.SURFACE,prefixes:D.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:O.SURFACE,prefixes:D.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:O.SURFACE,prefixes:D.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:O.SURFACE,prefixes:D.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:O.SURFACE,prefixes:D.NONE,value:1e4,offset:0},m3:{name:"m3",base:O.VOLUME,prefixes:D.CUBIC,value:1,offset:0},L:{name:"L",base:O.VOLUME,prefixes:D.SHORT,value:.001,offset:0},l:{name:"l",base:O.VOLUME,prefixes:D.SHORT,value:.001,offset:0},litre:{name:"litre",base:O.VOLUME,prefixes:D.LONG,value:.001,offset:0},cuin:{name:"cuin",base:O.VOLUME,prefixes:D.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:O.VOLUME,prefixes:D.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:O.VOLUME,prefixes:D.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:O.VOLUME,prefixes:D.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:O.VOLUME,prefixes:D.NONE,value:15e-6,offset:0},drop:{name:"drop",base:O.VOLUME,prefixes:D.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:O.VOLUME,prefixes:D.NONE,value:5e-8,offset:0},minim:{name:"minim",base:O.VOLUME,prefixes:D.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:O.VOLUME,prefixes:D.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:O.VOLUME,prefixes:D.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:O.VOLUME,prefixes:D.NONE,value:1182941e-10,offset:0},cc:{name:"cc",base:O.VOLUME,prefixes:D.NONE,value:1e-6,offset:0},cup:{name:"cup",base:O.VOLUME,prefixes:D.NONE,value:2365882e-10,offset:0},pint:{name:"pint",base:O.VOLUME,prefixes:D.NONE,value:4731765e-10,offset:0},quart:{name:"quart",base:O.VOLUME,prefixes:D.NONE,value:9463529e-10,offset:0},gallon:{name:"gallon",base:O.VOLUME,prefixes:D.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:O.VOLUME,prefixes:D.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:O.VOLUME,prefixes:D.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:O.VOLUME,prefixes:D.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:O.VOLUME,prefixes:D.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:O.VOLUME,prefixes:D.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:O.VOLUME,prefixes:D.NONE,value:1182941e-10,offset:0},cp:{name:"cp",base:O.VOLUME,prefixes:D.NONE,value:2365882e-10,offset:0},pt:{name:"pt",base:O.VOLUME,prefixes:D.NONE,value:4731765e-10,offset:0},qt:{name:"qt",base:O.VOLUME,prefixes:D.NONE,value:9463529e-10,offset:0},gal:{name:"gal",base:O.VOLUME,prefixes:D.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:O.VOLUME,prefixes:D.NONE,value:.1173478,offset:0},obl:{name:"obl",base:O.VOLUME,prefixes:D.NONE,value:.1589873,offset:0},g:{name:"g",base:O.MASS,prefixes:D.SHORT,value:.001,offset:0},gram:{name:"gram",base:O.MASS,prefixes:D.LONG,value:.001,offset:0},ton:{name:"ton",base:O.MASS,prefixes:D.SHORT,value:907.18474,offset:0},t:{name:"t",base:O.MASS,prefixes:D.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:O.MASS,prefixes:D.LONG,value:1e3,offset:0},grain:{name:"grain",base:O.MASS,prefixes:D.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:O.MASS,prefixes:D.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:O.MASS,prefixes:D.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:O.MASS,prefixes:D.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:O.MASS,prefixes:D.NONE,value:45.359237,offset:0},stick:{name:"stick",base:O.MASS,prefixes:D.NONE,value:.115,offset:0},stone:{name:"stone",base:O.MASS,prefixes:D.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:O.MASS,prefixes:D.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:O.MASS,prefixes:D.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:O.MASS,prefixes:D.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:O.MASS,prefixes:D.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:O.MASS,prefixes:D.NONE,value:45.359237,offset:0},s:{name:"s",base:O.TIME,prefixes:D.SHORT,value:1,offset:0},min:{name:"min",base:O.TIME,prefixes:D.NONE,value:60,offset:0},h:{name:"h",base:O.TIME,prefixes:D.NONE,value:3600,offset:0},second:{name:"second",base:O.TIME,prefixes:D.LONG,value:1,offset:0},sec:{name:"sec",base:O.TIME,prefixes:D.LONG,value:1,offset:0},minute:{name:"minute",base:O.TIME,prefixes:D.NONE,value:60,offset:0},hour:{name:"hour",base:O.TIME,prefixes:D.NONE,value:3600,offset:0},day:{name:"day",base:O.TIME,prefixes:D.NONE,value:86400,offset:0},week:{name:"week",base:O.TIME,prefixes:D.NONE,value:604800,offset:0},month:{name:"month",base:O.TIME,prefixes:D.NONE,value:2629800,offset:0},year:{name:"year",base:O.TIME,prefixes:D.NONE,value:31557600,offset:0},decade:{name:"decade",base:O.TIME,prefixes:D.NONE,value:315576e3,offset:0},century:{name:"century",base:O.TIME,prefixes:D.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:O.TIME,prefixes:D.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:O.FREQUENCY,prefixes:D.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:O.FREQUENCY,prefixes:D.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:O.ANGLE,prefixes:D.SHORT,value:1,offset:0},radian:{name:"radian",base:O.ANGLE,prefixes:D.LONG,value:1,offset:0},deg:{name:"deg",base:O.ANGLE,prefixes:D.SHORT,value:null,offset:0},degree:{name:"degree",base:O.ANGLE,prefixes:D.LONG,value:null,offset:0},grad:{name:"grad",base:O.ANGLE,prefixes:D.SHORT,value:null,offset:0},gradian:{name:"gradian",base:O.ANGLE,prefixes:D.LONG,value:null,offset:0},cycle:{name:"cycle",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},A:{name:"A",base:O.CURRENT,prefixes:D.SHORT,value:1,offset:0},ampere:{name:"ampere",base:O.CURRENT,prefixes:D.LONG,value:1,offset:0},K:{name:"K",base:O.TEMPERATURE,prefixes:D.SHORT,value:1,offset:0},degC:{name:"degC",base:O.TEMPERATURE,prefixes:D.SHORT,value:1,offset:273.15},degF:{name:"degF",base:O.TEMPERATURE,prefixes:D.SHORT,value:new x(5,9),offset:459.67},degR:{name:"degR",base:O.TEMPERATURE,prefixes:D.SHORT,value:new x(5,9),offset:0},kelvin:{name:"kelvin",base:O.TEMPERATURE,prefixes:D.LONG,value:1,offset:0},celsius:{name:"celsius",base:O.TEMPERATURE,prefixes:D.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:O.TEMPERATURE,prefixes:D.LONG,value:new x(5,9),offset:459.67},rankine:{name:"rankine",base:O.TEMPERATURE,prefixes:D.LONG,value:new x(5,9),offset:0},mol:{name:"mol",base:O.AMOUNT_OF_SUBSTANCE,prefixes:D.SHORT,value:1,offset:0},mole:{name:"mole",base:O.AMOUNT_OF_SUBSTANCE,prefixes:D.LONG,value:1,offset:0},cd:{name:"cd",base:O.LUMINOUS_INTENSITY,prefixes:D.SHORT,value:1,offset:0},candela:{name:"candela",base:O.LUMINOUS_INTENSITY,prefixes:D.LONG,value:1,offset:0},N:{name:"N",base:O.FORCE,prefixes:D.SHORT,value:1,offset:0},newton:{name:"newton",base:O.FORCE,prefixes:D.LONG,value:1,offset:0},dyn:{name:"dyn",base:O.FORCE,prefixes:D.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:O.FORCE,prefixes:D.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:O.FORCE,prefixes:D.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:O.FORCE,prefixes:D.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:O.FORCE,prefixes:D.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:O.FORCE,prefixes:D.NONE,value:9.80665,offset:0},J:{name:"J",base:O.ENERGY,prefixes:D.SHORT,value:1,offset:0},joule:{name:"joule",base:O.ENERGY,prefixes:D.LONG,value:1,offset:0},erg:{name:"erg",base:O.ENERGY,prefixes:D.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:O.ENERGY,prefixes:D.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:O.ENERGY,prefixes:D.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:O.ENERGY,prefixes:D.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:O.ENERGY,prefixes:D.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:O.POWER,prefixes:D.SHORT,value:1,offset:0},watt:{name:"watt",base:O.POWER,prefixes:D.LONG,value:1,offset:0},hp:{name:"hp",base:O.POWER,prefixes:D.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:O.POWER,prefixes:D.SHORT,value:b.I,offset:0},VA:{name:"VA",base:O.POWER,prefixes:D.SHORT,value:1,offset:0},Pa:{name:"Pa",base:O.PRESSURE,prefixes:D.SHORT,value:1,offset:0},psi:{name:"psi",base:O.PRESSURE,prefixes:D.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:O.PRESSURE,prefixes:D.NONE,value:101325,offset:0},bar:{name:"bar",base:O.PRESSURE,prefixes:D.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:O.PRESSURE,prefixes:D.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:O.PRESSURE,prefixes:D.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:O.PRESSURE,prefixes:D.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:O.PRESSURE,prefixes:D.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:O.ELECTRIC_CHARGE,prefixes:D.LONG,value:1,offset:0},C:{name:"C",base:O.ELECTRIC_CHARGE,prefixes:D.SHORT,value:1,offset:0},farad:{name:"farad",base:O.ELECTRIC_CAPACITANCE,prefixes:D.LONG,value:1,offset:0},F:{name:"F",base:O.ELECTRIC_CAPACITANCE,prefixes:D.SHORT,value:1,offset:0},volt:{name:"volt",base:O.ELECTRIC_POTENTIAL,prefixes:D.LONG,value:1,offset:0},V:{name:"V",base:O.ELECTRIC_POTENTIAL,prefixes:D.SHORT,value:1,offset:0},ohm:{name:"ohm",base:O.ELECTRIC_RESISTANCE,prefixes:D.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:O.ELECTRIC_INDUCTANCE,prefixes:D.LONG,value:1,offset:0},H:{name:"H",base:O.ELECTRIC_INDUCTANCE,prefixes:D.SHORT,value:1,offset:0},siemens:{name:"siemens",base:O.ELECTRIC_CONDUCTANCE,prefixes:D.LONG,value:1,offset:0},S:{name:"S",base:O.ELECTRIC_CONDUCTANCE,prefixes:D.SHORT,value:1,offset:0},weber:{name:"weber",base:O.MAGNETIC_FLUX,prefixes:D.LONG,value:1,offset:0},Wb:{name:"Wb",base:O.MAGNETIC_FLUX,prefixes:D.SHORT,value:1,offset:0},tesla:{name:"tesla",base:O.MAGNETIC_FLUX_DENSITY,prefixes:D.LONG,value:1,offset:0},T:{name:"T",base:O.MAGNETIC_FLUX_DENSITY,prefixes:D.SHORT,value:1,offset:0},b:{name:"b",base:O.BIT,prefixes:D.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:O.BIT,prefixes:D.BINARY_LONG,value:1,offset:0},B:{name:"B",base:O.BIT,prefixes:D.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:O.BIT,prefixes:D.BINARY_LONG,value:8,offset:0}},R={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function k(e){if("BigNumber"===e.number){var t=eq(y);F.rad.value=new y(1),F.deg.value=t.div(180),F.grad.value=t.div(200),F.cycle.value=t.times(2),F.arcsec.value=t.div(648e3),F.arcmin.value=t.div(10800)}else F.rad.value=1,F.deg.value=Math.PI/180,F.grad.value=Math.PI/200,F.cycle.value=2*Math.PI,F.arcsec.value=Math.PI/648e3,F.arcmin.value=Math.PI/10800;F.radian.value=F.rad.value,F.degree.value=F.deg.value,F.gradian.value=F.grad.value}k(o),n&&n("config",function(e,t){e.number!==t.number&&k(e)});var L={si:{NONE:{unit:B,prefix:D.NONE[""]},LENGTH:{unit:F.m,prefix:D.SHORT[""]},MASS:{unit:F.g,prefix:D.SHORT.k},TIME:{unit:F.s,prefix:D.SHORT[""]},CURRENT:{unit:F.A,prefix:D.SHORT[""]},TEMPERATURE:{unit:F.K,prefix:D.SHORT[""]},LUMINOUS_INTENSITY:{unit:F.cd,prefix:D.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:F.mol,prefix:D.SHORT[""]},ANGLE:{unit:F.rad,prefix:D.SHORT[""]},BIT:{unit:F.bits,prefix:D.SHORT[""]},FORCE:{unit:F.N,prefix:D.SHORT[""]},ENERGY:{unit:F.J,prefix:D.SHORT[""]},POWER:{unit:F.W,prefix:D.SHORT[""]},PRESSURE:{unit:F.Pa,prefix:D.SHORT[""]},ELECTRIC_CHARGE:{unit:F.C,prefix:D.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:F.F,prefix:D.SHORT[""]},ELECTRIC_POTENTIAL:{unit:F.V,prefix:D.SHORT[""]},ELECTRIC_RESISTANCE:{unit:F.ohm,prefix:D.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:F.H,prefix:D.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:F.S,prefix:D.SHORT[""]},MAGNETIC_FLUX:{unit:F.Wb,prefix:D.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:F.T,prefix:D.SHORT[""]},FREQUENCY:{unit:F.Hz,prefix:D.SHORT[""]}}};L.cgs=JSON.parse(JSON.stringify(L.si)),L.cgs.LENGTH={unit:F.m,prefix:D.SHORT.c},L.cgs.MASS={unit:F.g,prefix:D.SHORT[""]},L.cgs.FORCE={unit:F.dyn,prefix:D.SHORT[""]},L.cgs.ENERGY={unit:F.erg,prefix:D.NONE[""]},L.us=JSON.parse(JSON.stringify(L.si)),L.us.LENGTH={unit:F.ft,prefix:D.NONE[""]},L.us.MASS={unit:F.lbm,prefix:D.NONE[""]},L.us.TEMPERATURE={unit:F.degF,prefix:D.NONE[""]},L.us.FORCE={unit:F.lbf,prefix:D.NONE[""]},L.us.ENERGY={unit:F.BTU,prefix:D.BTU[""]},L.us.POWER={unit:F.hp,prefix:D.NONE[""]},L.us.PRESSURE={unit:F.psi,prefix:D.NONE[""]},L.auto=JSON.parse(JSON.stringify(L.si));var I=L.auto;for(var j in C.setUnitSystem=function(e){if((0,rt.nr)(L,e))I=L[e];else throw Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(L).join(", "))},C.getUnitSystem=function(){for(var e in L)if((0,rt.nr)(L,e)&&L[e]===I)return e},C.typeConverters={BigNumber:function(e){return null!=e&&e.isFraction?new y(e.n).div(e.d).times(e.s):new y(e+"")},Fraction:function(e){return new x(e)},Complex:function(e){return e},number:function(e){return null!=e&&e.isFraction?g(e):e}},C.prototype._numberConverter=function(){var e=C.typeConverters[this.valueType()];if(e)return e;throw TypeError('Unsupported Unit value type "'+this.valueType()+'"')},C._getNumberConverter=function(e){if(!C.typeConverters[e])throw TypeError('Unsupported type "'+e+'"');return C.typeConverters[e]},F)if((0,rt.nr)(F,j)){var z=F[j];z.dimensions=z.base.dimensions}for(var U in R)if((0,rt.nr)(R,U)){var Y=F[R[U]],X={};for(var J in Y)(0,rt.nr)(Y,J)&&(X[J]=Y[J]);X.name=U,F[U]=X}return C.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},C.createUnit=function(e,t){if("object"!=typeof e)throw TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override){for(var r in e)if((0,rt.nr)(e,r)&&C.deleteUnit(r),e[r].aliases)for(var i,n=0;n<e[r].aliases.length;n++)C.deleteUnit(e[r].aliases[n])}for(var o in e)(0,rt.nr)(e,o)&&(i=C.createUnitSingle(o,e[o]));return i},C.createUnitSingle=function(e,t){if(null==t&&(t={}),"string"!=typeof e)throw TypeError("createUnitSingle expects first parameter to be of type 'string'");if((0,rt.nr)(F,e))throw Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(i=e.charAt(t),0===t&&!C.isValidAlpha(i))throw Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!(C.isValidAlpha(i)||_(i)))throw Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var r,n,o,s=null,a=[],u=0;if(t&&"Unit"===t.type)s=t.clone();else if("string"==typeof t)""!==t&&(r=t);else if("object"==typeof t)r=t.definition,n=t.prefixes,u=t.offset,o=t.baseName,t.aliases&&(a=t.aliases.valueOf());else throw TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');if(a){for(var l=0;l<a.length;l++)if((0,rt.nr)(F,a[l]))throw Error('Cannot create alias "'+a[l]+'": a unit with that name already exists')}if(r&&"string"==typeof r&&!s)try{s=C.parse(r,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit "'+e+'" from "'+r+'": '+t.message,t}else r&&"Unit"===r.type&&(s=r.clone());a=a||[],u=u||0,n=n&&n.toUpperCase&&D[n.toUpperCase()]||D.NONE;var c={};if(s){c={name:e,value:s.value,dimensions:s.dimensions.slice(0),prefixes:n,offset:u};var h=!1;for(var d in O)if((0,rt.nr)(O,d)){for(var p=!0,f=0;f<M.length;f++)if(Math.abs((c.dimensions[f]||0)-(O[d].dimensions[f]||0))>1e-12){p=!1;break}if(p){h=!0,c.base=O[d];break}}if(!h){o=o||e+"_STUFF";var m={dimensions:s.dimensions.slice(0)};m.key=o,O[o]=m,I[o]={unit:c,prefix:D.NONE[""]},c.base=O[o]}}else{if(o=o||e+"_STUFF",M.indexOf(o)>=0)throw Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var v in M.push(o),O)(0,rt.nr)(O,v)&&(O[v].dimensions[M.length-1]=0);for(var g={dimensions:[]},b=0;b<M.length;b++)g.dimensions[b]=0;g.dimensions[M.length-1]=1,g.key=o,O[o]=g,c={name:e,value:1,dimensions:O[o].dimensions.slice(0),prefixes:n,offset:u,base:O[o]},I[o]={unit:c,prefix:D.NONE[""]}}C.UNITS[e]=c;for(var y=0;y<a.length;y++){var x=a[y],Z={};for(var w in c)(0,rt.nr)(c,w)&&(Z[w]=c[w]);Z.name=x,C.UNITS[x]=Z}return delete A.cache,new C(null,e)},C.deleteUnit=function(e){delete C.UNITS[e]},C.PREFIXES=D,C.BASE_DIMENSIONS=M,C.BASE_UNITS=O,C.UNIT_SYSTEMS=L,C.UNITS=F,C},{isClass:!0}),u9="dotPow",u7=(0,eR.d5)(u9,["typed","equalScalar","matrix","pow","DenseMatrix","concat"],e=>{var{typed:t,equalScalar:r,matrix:i,pow:n,DenseMatrix:o,concat:s}=e,a=(0,o4.$)({typed:t}),u=o8({typed:t,DenseMatrix:o}),l=(0,o6.e)({typed:t,equalScalar:r}),c=(0,o9.O)({typed:t,DenseMatrix:o}),h=(0,o7.L)({typed:t,matrix:i,concat:s}),d={};for(var p in n.signatures)!Object.prototype.hasOwnProperty.call(n.signatures,p)||p.includes("Matrix")||p.includes("Array")||(d[p]=n.signatures[p]);var f=t(d);return t(u9,h({elop:f,SS:u,DS:a,Ss:l,sS:c}))}),le="expm",lt=(0,eR.d5)(le,["typed","abs","add","identity","inv","multiply"],e=>{var{typed:t,abs:r,add:i,identity:n,inv:o,multiply:s}=e;return t(le,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw RangeError("Matrix must be square (size: "+(0,re.WU)(t)+")");for(var a=t[0],u=function(e,t){for(var r=0;r<30;r++)for(var i=0;i<=r;i++){var n=r-i;if(1e-15>function(e,t,r){for(var i=1,n=2;n<=t;n++)i*=n;for(var o=i,s=t+1;s<=2*t;s++)o*=s;var a=o*(2*t+1);return 8*Math.pow(e/Math.pow(2,r),2*t)*i*i/(o*a)}(e,i,n))return{q:i,j:n}}throw Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(e){for(var t=e.size()[0],i=0,n=0;n<t;n++){for(var o=0,s=0;s<t;s++)o+=r(e.get([n,s]));i=Math.max(o,i)}return i}(e),0),l=u.q,c=u.j,h=s(e,Math.pow(2,-c)),d=n(a),p=n(a),f=1,m=h,v=-1,g=1;g<=l;g++)g>1&&(m=s(m,h),v=-v),d=i(d,s(f=f*(l-g+1)/((2*l-g+1)*g),m)),p=i(p,s(f*v,m));for(var b=s(o(p),d),y=0;y<c;y++)b=s(b,b);return(0,ej.sA)(e)?e.createSparseMatrix(b):b}})}),lr=(0,eR.d5)("fft",["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],e=>{var{typed:t,matrix:r,addScalar:i,multiplyScalar:n,divideScalar:o,exp:s,tau:a,i:u,dotDivide:l,conj:c,pow:h,ceil:d,log2:p}=e;return t("fft",{Array:f,Matrix:function(e){return e.create(f(e.toArray()))}});function f(e){var t=(0,t7.aJ)(e);return 1===t.length?m(e,t[0]):function e(t,r){var i=(0,t7.aJ)(t);if(0!==r)return Array(i[0]).fill(0).map((i,n)=>e(t[n],r-1));if(1===i.length)return m(t);function n(e){var t=(0,t7.aJ)(e);return Array(t[1]).fill(0).map((r,i)=>Array(t[0]).fill(0).map((t,r)=>e[r][i]))}return n(e(n(t),1))}(e.map(e=>f(e,t.slice(1))),0)}function m(e){var t=e.length;if(1===t)return[e[0]];if(t%2!=0)return function(e){for(var t=e.length,r=s(o(n(-1,n(u,a)),t)),i=[],v=1-t;v<t;v++)i.push(h(r,o(h(v,2),2)));for(var g=h(2,d(p(t+t-1))),b=[...Array(t).fill(0).map((r,o)=>n(e[o],i[t-1+o])),...Array(g-t).fill(0)],y=[...Array(t+t-1).fill(0).map((e,t)=>o(1,i[t])),...Array(g-(t+t-1)).fill(0)],x=m(b),C=m(y),Z=l(c(f(c(Array(g).fill(0).map((e,t)=>n(x[t],C[t]))))),g),_=[],w=t-1;w<t+t-1;w++)_.push(n(Z[w],i[w]));return _}(e);for(var r=[...m(e.filter((e,t)=>t%2==0),t/2),...m(e.filter((e,t)=>t%2==1),t/2)],v=0;v<t/2;v++){var g=r[v],b=n(r[v+t/2],s(n(n(a,u),o(-v,t))));r[v]=i(g,b),r[v+t/2]=i(g,n(-1,b))}return r}}),li="gamma",ln=(0,eR.d5)(li,["typed","config","multiplyScalar","pow","BigNumber","Complex"],e=>{var{typed:t,config:r,multiplyScalar:i,pow:n,BigNumber:o,Complex:s}=e;return t(li,{number:nn,Complex:function e(t){if(0===t.im)return nn(t.re);if(t.re<.5){var r=new s(1-t.re,-t.im),i=new s(Math.PI*t.re,Math.PI*t.im);return new s(Math.PI).div(i.sin()).div(e(r))}t=new s(t.re-1,t.im);for(var n=new s(ns[0],0),o=1;o<ns.length;++o){var a=new s(ns[o],0);n=n.add(a.div(t.add(o)))}var u=new s(t.re+no+.5,t.im),l=u.pow(t.add(.5)),c=u.neg().exp();return n.mul(Math.sqrt(2*Math.PI)).mul(l).mul(c)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new o(1/0):function e(t){if(t<8)return new o([1,1,2,6,24,120,720,5040][t]);var i=r.precision+(0|Math.log(t.toNumber())),n=o.clone({precision:i});if(t%2==1)return t.times(e(new o(t-1)));for(var s=t,a=new n(t),u=t.toNumber();s>2;)s-=2,u+=s,a=a.times(u);return new o(a.toPrecision(o.precision))}(e.minus(1));if(!e.isFinite())return new o(e.isNegative()?NaN:1/0);throw Error("Integer BigNumber expected")}})}),lo="ifft",ls=(0,eR.d5)(lo,["typed","fft","dotDivide","conj"],e=>{var{typed:t,fft:r,dotDivide:i,conj:n}=e;return t(lo,{"Array | Matrix":function(e){var t=(0,ej.SW)(e)?e.size():(0,t7.aJ)(e);return i(n(r(n(e))),t.reduce((e,t)=>e*t,1))}})}),la="createUnit",lu=(0,eR.d5)(la,["typed","Unit"],e=>{var{typed:t,Unit:r}=e;return t(la,{"Object, Object":function(e,t){return r.createUnit(e,t)},Object:function(e){return r.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,i){var n={};return n[e]=t,r.createUnit(n,i)},"string, Unit | string | Object":function(e,t){var i={};return i[e]=t,r.createUnit(i,{})},string:function(e){var t={};return t[e]={},r.createUnit(t,{})}})}),ll=(0,eR.d5)("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],e=>{var{typed:t,matrix:r,multiply:i,equalScalar:n,divideScalar:o,inv:s}=e,a=(0,o6.e)({typed:t,equalScalar:n}),u=(0,sv.R)({typed:t});return t("divide",(0,rt.l7)({"Array | Matrix, Array | Matrix":function(e,t){return i(e,s(t))},"DenseMatrix, any":function(e,t){return u(e,t,o,!1)},"SparseMatrix, any":function(e,t){return a(e,t,o,!1)},"Array, any":function(e,t){return u(r(e),t,o,!1).valueOf()},"any, Array | Matrix":function(e,t){return i(e,s(t))}},o.signatures))}),lc="factorial",lh=(0,eR.d5)(lc,["typed","gamma"],e=>{var{typed:t,gamma:r}=e;return t(lc,{number:function(e){if(e<0)throw Error("Value must be non-negative");return r(e+1)},BigNumber:function(e){if(e.isNegative())throw Error("Value must be non-negative");return r(e.plus(1))},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})});function ld(e,t){var r,i=t.length,n=[];if(e)for(r=0;r<i;r++)n[e[r]]=t[r];else for(r=0;r<i;r++)n[r]=t[r];return n}var lp="lusolve",lf=(0,eR.d5)(lp,["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],e=>{var{typed:t,matrix:r,lup:i,slu:n,usolve:o,lsolve:s,DenseMatrix:a}=e,u=s_({DenseMatrix:a});return t(lp,{"Array, Array | Matrix":function(e,t){var n=i(e=r(e));return c(n.L,n.U,n.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var r=i(e);return c(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var r=i(e);return c(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,r,i){var o=n(e,r,i);return c(o.L,o.U,o.p,o.q,t)},"Object, Array | Matrix":function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function l(e){if((0,ej.SW)(e))return e;if((0,ej.kJ)(e))return r(e);throw TypeError("Invalid Matrix LU decomposition")}function c(e,t,r,i,n){e=l(e),t=l(t),r&&((n=u(e,n,!0))._data=ld(r,n._data));var a=o(t,s(e,n));return i&&(a._data=ld(i,a._data)),a}}),lm="multinomial",lv=(0,eR.d5)(lm,["typed","add","divide","multiply","factorial","isInteger","isPositive"],e=>{var{typed:t,add:r,divide:i,multiply:n,factorial:o,isInteger:s,isPositive:a}=e;return t(lm,{"Array | Matrix":function(e){var t=0,u=1;return(0,rd.Et)(e,function(e){if(!s(e)||!a(e))throw TypeError("Positive integer value expected in function multinomial");t=r(t,e),u=n(u,o(e))}),i(o(t),u)}})}),lg="permutations",lb=(0,eR.d5)(lg,["typed","factorial"],e=>{var{typed:t,factorial:r}=e;return t(lg,{"number | BigNumber":r,"number, number":function(e,t){if(!(0,eI.U)(e)||e<0||!(0,eI.U)(t)||t<0)throw TypeError("Positive integer value expected in function permutations");if(t>e)throw TypeError("second argument k must be less than or equal to first argument n");return iv(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var r,i;if(!ly(e)||!ly(t))throw TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw TypeError("second argument k must be less than or equal to first argument n");for(r=e.mul(0).add(1),i=e.minus(t).plus(1);i.lte(e);i=i.plus(1))r=r.times(i);return r}})});function ly(e){return e.isInteger()&&e.gte(0)}var lx="polynomialRoot",lC=(0,eR.d5)(lx,["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],e=>{var{typed:t,isZero:r,equalScalar:i,add:n,subtract:o,multiply:s,divide:a,sqrt:u,unaryMinus:l,cbrt:c,typeOf:h,im:d,re:p}=e;return t(lx,{"number|Complex, ...number|Complex":(e,t)=>{for(var f=[e,...t];f.length>0&&r(f[f.length-1]);)f.pop();if(f.length<2)throw RangeError("Polynomial [".concat(e,", ").concat(t,"] must have a non-zero non-constant coefficient"));switch(f.length){case 2:return[l(a(f[0],f[1]))];case 3:var[m,v,g]=f,b=s(2,g),y=s(v,v),x=s(4,g,m);if(i(y,x))return[a(l(v),b)];var C=u(o(y,x));return[a(o(C,v),b),a(o(l(C),v),b)];case 4:var[Z,_,w,E]=f,N=l(s(3,E)),S=s(w,w),A=s(3,E,_),P=n(s(2,w,w,w),s(27,E,E,Z)),D=s(9,E,w,_);if(i(S,A)&&i(P,D))return[a(w,N)];var M=o(S,A),O=o(P,D);if(i(n(s(18,E,w,_,Z),s(w,w,_,_)),n(s(4,w,w,w,Z),s(4,E,_,_,_),s(27,E,E,Z,Z))))return[a(o(s(4,E,w,_),n(s(9,E,E,Z),s(w,w,w))),s(E,M)),a(o(s(9,E,Z),s(w,_)),s(2,M))];return c(i(S,A)?O:a(n(O,u(o(s(O,O),s(4,M,M,M)))),2),!0).toArray().map(e=>a(n(w,e,a(M,e)),N)).map(e=>"Complex"===h(e)&&i(p(e),p(e)+d(e))?p(e):e);default:throw RangeError("only implemented for cubic or lower-order polynomials, not ".concat(f))}}})}),lZ="setSize",l_=(0,eR.d5)(lZ,["typed","compareNatural"],e=>{var{typed:t,compareNatural:r}=e;return t(lZ,{"Array | Matrix":function(e){return Array.isArray(e)?(0,t7.xH)(e).length:(0,t7.xH)(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?(0,t7.xH)(e).length:(0,t7.xH)(e.toArray()).length;for(var i=(0,t7.xH)(Array.isArray(e)?e:e.toArray()).sort(r),n=1,o=1;o<i.length;o++)0!==r(i[o],i[o-1])&&n++;return n}})});function lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}var lE=(0,eR.d5)("solveODE",["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],e=>{var{typed:t,add:r,subtract:i,multiply:n,divide:o,max:s,map:a,abs:u,isPositive:l,isNegative:c,larger:h,smaller:d,matrix:p,bignumber:f,unaryMinus:m}=e;function v(e){return function(t,p,v,g){if(!(2===p.length&&(p.every(x)||p.every(ej.wr))))throw Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var b,y=p[0],C=p[1],Z=h(C,y),_=g.firstStep;if(void 0!==_&&!l(_))throw Error('"firstStep" must be positive');var w=g.maxStep;if(void 0!==w&&!l(w))throw Error('"maxStep" must be positive');var E=g.minStep;if(E&&c(E))throw Error('"minStep" must be positive or zero');var N=[y,C,_,E,w].filter(e=>void 0!==e);if(!(N.every(x)||N.every(ej.wr)))throw Error('Inconsistent type of "t" dependant variables');for(var S=g.tol?g.tol:1e-4,A=g.minDelta?g.minDelta:.2,P=g.maxDelta?g.maxDelta:5,D=g.maxIter?g.maxIter:1e4,M=[y,C,...v,w,E].some(ej.l9),[O,T,B,F]=M?[f(e.a),f(e.c),f(e.b),f(e.bp)]:[e.a,e.c,e.b,e.bp],R=_?Z?_:m(_):o(i(C,y),1),k=[y],L=[v],I=i(B,F),j=0,z=0,U=Z?d:h,Y=(b=Z?h:d,function(e,t,n){return b(r(e,n),t)?i(t,e):n});U(k[j],C);){var X=[];R=Y(k[j],C,R),X.push(t(k[j],L[j]));for(var J=1;J<T.length;++J)X.push(t(r(k[j],n(T[J],R)),r(L[j],n(R,O[J],X))));var q=s(u(a(n(I,X),e=>(0,ej.wr)(e)?e.value:e)));q<S&&S/q>1/4&&(k.push(r(k[j],R)),L.push(r(L[j],n(R,B,X))),j++);var G=.84*(S/q)**.2;if(d(G,A)?G=A:h(G,P)&&(G=P),R=n(R,G=M?f(G):G),w&&h(u(R),w)?R=Z?w:m(w):E&&d(u(R),E)&&(R=Z?E:m(E)),++z>D)throw Error("Maximum number of iterations reached, try changing options")}return{t:k,y:L}}}function g(e,t,r,i){return v({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(e,t,r,i)}function b(e,t,r,i){return v({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(e,t,r,i)}function y(e,t,r,i){var n=i.method?i.method:"RK45",o={RK23:g,RK45:b};if(n.toUpperCase() in o){var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lw(Object(r),!0).forEach(function(t){(0,u5.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},i);return delete s.method,o[n.toUpperCase()](e,t,r,s)}var a=Object.keys(o).map(e=>'"'.concat(e,'"')),u="".concat(a.slice(0,-1).join(", ")," and ").concat(a.slice(-1));throw Error('Unavailable method "'.concat(n,'". Available methods are ').concat(u))}function x(e){return(0,ej.l9)(e)||(0,ej.hj)(e)}function C(e,t,r,i){var n=y(e,t.toArray(),r.toArray(),i);return{t:p(n.t),y:p(n.y)}}return t("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":C,"function, Array, Array":(e,t,r)=>y(e,t,r,{}),"function, Matrix, Matrix":(e,t,r)=>C(e,t,r,{}),"function, Array, number | BigNumber | Unit":(e,t,r)=>{var i=y(e,t,[r],{});return{t:i.t,y:i.y.map(e=>e[0])}},"function, Matrix, number | BigNumber | Unit":(e,t,r)=>{var i=y(e,t.toArray(),[r],{});return{t:p(i.t),y:p(i.y.map(e=>e[0]))}},"function, Array, number | BigNumber | Unit, Object":(e,t,r,i)=>{var n=y(e,t,[r],i);return{t:n.t,y:n.y.map(e=>e[0])}},"function, Matrix, number | BigNumber | Unit, Object":(e,t,r,i)=>{var n=y(e,t.toArray(),[r],i);return{t:p(n.t),y:p(n.y.map(e=>e[0]))}}})}),lN="stirlingS2",lS=(0,eR.d5)(lN,["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],e=>{var{typed:t,addScalar:r,subtractScalar:i,multiplyScalar:n,divideScalar:o,pow:s,factorial:a,combinations:u,isNegative:l,isInteger:c,number:h,bignumber:d,larger:p}=e,f=[],m=[];return t(lN,{"number | BigNumber, number | BigNumber":function(e,t){if(!c(e)||l(e)||!c(t)||l(t))throw TypeError("Non-negative integer value expected in function stirlingS2");if(p(t,e))throw TypeError("k must be less than or equal to n in function stirlingS2");var i=!((0,ej.hj)(e)&&(0,ej.hj)(t)),o=i?m:f,s=i?d:h,a=h(e),u=h(t);if(o[a]&&o[a].length>u)return o[a][u];for(var v=0;v<=a;++v)if(o[v]||(o[v]=[s(0===v?1:0)]),0!==v)for(var g=o[v],b=o[v-1],y=g.length;y<=v&&y<=u;++y)y===v?g[y]=1:g[y]=r(n(s(y),b[y]),b[y-1]);return o[a][u]}})}),lA="unit",lP=(0,eR.d5)(lA,["typed","Unit"],e=>{var{typed:t,Unit:r}=e;return t(lA,{Unit:function(e){return e.clone()},string:function(e){return r.isValuelessUnit(e)?new r(null,e):r.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(e,t){return new r(e,t)},"number | BigNumber | Fraction":function(e){return new r(e)},"Array | Matrix":t.referToSelf(e=>t=>(0,rd.Fh)(t,e))})}),lD="bellNumbers",lM=(0,eR.d5)(lD,["typed","addScalar","isNegative","isInteger","stirlingS2"],e=>{var{typed:t,addScalar:r,isNegative:i,isInteger:n,stirlingS2:o}=e;return t(lD,{"number | BigNumber":function(e){if(!n(e)||i(e))throw TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,s=0;s<=e;s++)t=r(t,o(e,s));return t}})}),lO=(0,eR.d5)("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],e=>{var{config:t,typed:r,matrix:i,addScalar:n,subtract:o,equal:s,abs:a,atan:u,cos:l,sin:c,multiplyScalar:h,divideScalar:d,inv:p,bignumber:f,multiply:m,add:v,larger:g,column:b,flatten:y,number:x,complex:C,sqrt:Z,diag:_,size:w,reshape:E,qr:N,usolve:S,usolveAll:A,im:P,re:D,smaller:M,matrixFromColumns:O,dot:T}=e,B=function(e){var{config:t,addScalar:r,subtract:i,abs:n,atan:o,cos:s,sin:a,multiplyScalar:u,inv:l,bignumber:c,multiply:h,add:d}=e;function p(e){for(var t=e.length,r=0,i=[0,1],n=0;n<t;n++)for(var o=n+1;o<t;o++)Math.abs(r)<Math.abs(e[n][o])&&(r=Math.abs(e[n][o]),i=[n,o]);return[i,r]}function f(e){for(var t=e.length,r=0,i=[0,1],o=0;o<t;o++)for(var s=o+1;s<t;s++)n(r)<n(e[o][s])&&(r=n(e[o][s]),i=[o,s]);return[i,r]}function m(e,t,r){var i,o=e.length,s=Array(o);if(r){i=Array(o);for(var a=0;a<o;a++)i[a]=Array(o)}for(var u=0;u<o;u++){for(var l=0,c=e[0],h=0;h<e.length;h++)n(e[h])<n(c)&&(c=e[l=h]);if(s[u]=e.splice(l,1)[0],r)for(var d=0;d<o;d++)i[u][d]=t[d][l],t[d].splice(l,1)}if(!r)return{values:s};var p=i.map((e,t)=>({value:s[t],vector:e}));return{values:s,eigenvectors:p}}return function(e,v){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.epsilon,b=arguments.length>3?arguments[3]:void 0,y=arguments.length>4?arguments[4]:void 0;if("number"===b)return function(e,r,i){var n,o,s=e.length,a=Math.abs(r/s);if(i){o=Array(s);for(var u=0;u<s;u++)o[u]=Array(s).fill(0),o[u][u]=1}for(var l=p(e);Math.abs(l[1])>=Math.abs(a);){var c,h,d,f=l[0][0],v=l[0][1];c=e[f][f],h=e[v][v],d=e[f][v],e=function(e,t,r,i){for(var n=e.length,o=Math.cos(t),s=Math.sin(t),a=o*o,u=s*s,l=Array(n).fill(0),c=Array(n).fill(0),h=a*e[r][r]-2*o*s*e[r][i]+u*e[i][i],d=u*e[r][r]+2*o*s*e[r][i]+a*e[i][i],p=0;p<n;p++)l[p]=o*e[r][p]-s*e[i][p],c[p]=s*e[r][p]+o*e[i][p];e[r][r]=h,e[i][i]=d,e[r][i]=0,e[i][r]=0;for(var f=0;f<n;f++)f!==r&&f!==i&&(e[r][f]=l[f],e[f][r]=l[f],e[i][f]=c[f],e[f][i]=c[f]);return e}(e,n=Math.abs(h-c)<=t.epsilon?Math.PI/4:.5*Math.atan(2*d/(h-c)),f,v),i&&(o=function(e,t,r,i){for(var n=e.length,o=Math.cos(t),s=Math.sin(t),a=Array(n).fill(0),u=Array(n).fill(0),l=0;l<n;l++)a[l]=o*e[l][r]-s*e[l][i],u[l]=s*e[l][r]+o*e[l][i];for(var c=0;c<n;c++)e[c][r]=a[c],e[c][i]=u[c];return e}(o,n,f,v)),l=p(e)}for(var g=Array(s).fill(0),b=0;b<s;b++)g[b]=e[b][b];return m((0,rt.d9)(g),o,i)}(e,g,y);if("BigNumber"===b)return function(e,p,v){var g,b,y=e.length,x=n(p/y);if(v){b=Array(y);for(var C=0;C<y;C++)b[C]=Array(y).fill(0),b[C][C]=1}for(var Z=f(e);n(Z[1])>=n(x);){var _=Z[0][0],w=Z[0][1];g=function(e,r,s){var a=i(r,e);return n(a)<=t.epsilon?c(-1).acos().div(4):u(.5,o(h(2,s,l(a))))}(e[_][_],e[w][w],e[_][w]),e=function(e,t,n,o){for(var l=e.length,p=c(s(t)),f=c(a(t)),m=u(p,p),v=u(f,f),g=Array(l).fill(c(0)),b=Array(l).fill(c(0)),y=h(c(2),p,f,e[n][o]),x=r(i(u(m,e[n][n]),y),u(v,e[o][o])),C=d(u(v,e[n][n]),y,u(m,e[o][o])),Z=0;Z<l;Z++)g[Z]=i(u(p,e[n][Z]),u(f,e[o][Z])),b[Z]=r(u(f,e[n][Z]),u(p,e[o][Z]));e[n][n]=x,e[o][o]=C,e[n][o]=c(0),e[o][n]=c(0);for(var _=0;_<l;_++)_!==n&&_!==o&&(e[n][_]=g[_],e[_][n]=g[_],e[o][_]=b[_],e[_][o]=b[_]);return e}(e,g,_,w),v&&(b=function(e,t,n,o){for(var l=e.length,h=s(t),d=a(t),p=Array(l).fill(c(0)),f=Array(l).fill(c(0)),m=0;m<l;m++)p[m]=i(u(h,e[m][n]),u(d,e[m][o])),f[m]=r(u(d,e[m][n]),u(h,e[m][o]));for(var v=0;v<l;v++)e[v][n]=p[v],e[v][o]=f[v];return e}(b,g,_,w)),Z=f(e)}for(var E=Array(y).fill(0),N=0;N<y;N++)E[N]=e[N][N];return m((0,rt.d9)(E),b,v)}(e,g,y);throw TypeError("Unsupported data type: "+b)}}({config:t,addScalar:n,subtract:o,column:b,flatten:y,equal:s,abs:a,atan:u,cos:l,sin:c,multiplyScalar:h,inv:p,bignumber:f,complex:C,multiply:m,add:v}),F=function(e){var{addScalar:t,subtract:r,flatten:i,multiply:n,multiplyScalar:o,divideScalar:s,sqrt:a,abs:u,bignumber:l,diag:c,size:h,reshape:d,inv:p,qr:f,usolve:m,usolveAll:v,equal:g,complex:b,larger:y,smaller:x,matrixFromColumns:C,dot:Z}=e;function _(e,t){for(var r=0;r<e.length;r++)e[r].push(...Array(t-e[r].length).fill(0));for(var i=e.length;i<t;i++)e.push(Array(t).fill(0)),e[i][i]=1;return e}function w(e,t){var i=h(e);for(var o of t)e=r(e,n(s(Z(o=d(o,i),e),Z(o,o)),o));return e}function E(e){return u(a(Z(e,e)))}function N(e,t){return n(s("BigNumber"===t?l(1):"Complex"===t?b(1):1,E(e)),e)}return function(e,h,d,C){var Z=!(arguments.length>4)||void 0===arguments[4]||arguments[4],S=function(e,r,i,n,a){var h,d="BigNumber"===n,p=d?l(0):0,f=d?l(1):"Complex"===n?b(1):1,m=d?l(1):1,v=d?l(10):2,C=o(v,v);a&&(h=Array(r).fill(f));for(var Z=!1;!Z;){Z=!0;for(var _=0;_<r;_++){for(var w=p,E=p,N=0;N<r;N++)_!==N&&(w=t(w,u(e[N][_])),E=t(E,u(e[_][N])));if(!g(w,0)&&!g(E,0)){for(var S=m,A=w,P=s(E,v),D=o(E,v);x(A,P);)A=o(A,C),S=o(S,v);for(;y(A,D);)A=s(A,C),S=s(S,v);if(x(s(t(A,E),S),o(t(w,E),.95))){Z=!1;for(var M=s(1,S),O=0;O<r;O++)_!==O&&(e[_][O]=o(e[_][O],M),e[O][_]=o(e[O][_],S));a&&(h[_]=o(h[_],M))}}}}return a?c(h):null}(e,h,0,C,Z);!function(e,i,n,a,c,h){var d="BigNumber"===a,p=d?l(0):"Complex"===a?b(0):0;d&&(n=l(n));for(var f=0;f<i-2;f++){for(var m=0,v=p,g=f+1;g<i;g++){var y=e[g][f];x(u(v),u(y))&&(v=y,m=g)}if(!x(u(v),n)){if(m!==f+1){var C=e[m];e[m]=e[f+1],e[f+1]=C;for(var Z=0;Z<i;Z++){var _=e[Z][m];e[Z][m]=e[Z][f+1],e[Z][f+1]=_}if(c){var w=h[m];h[m]=h[f+1],h[f+1]=w}}for(var E=f+2;E<i;E++){var N=s(e[E][f],v);if(0!==N){for(var S=0;S<i;S++)e[E][S]=r(e[E][S],o(N,e[f+1][S]));for(var A=0;A<i;A++)e[A][f+1]=t(e[A][f+1],o(N,e[A][E]));if(c)for(var P=0;P<i;P++)h[E][P]=r(h[E][P],o(N,h[f+1][P]))}}}}}(e,h,d,C,Z,S);var{values:A,C:P}=function(e,i,s,h,d){var p="BigNumber"===h,m="Complex"===h,v=p?l(1):m?b(1):1;p&&(s=l(s));for(var g=(0,rt.d9)(e),C=[],Z=i,w=[],E=d?c(Array(i).fill(v)):void 0,N=d?c(Array(Z).fill(v)):void 0,S=0;S<=100;){S+=1;for(var A=g[Z-1][Z-1],P=0;P<Z;P++)g[P][P]=r(g[P][P],A);var{Q:D,R:M}=f(g);g=n(M,D);for(var O=0;O<Z;O++)g[O][O]=t(g[O][O],A);if(d&&(N=n(N,D)),1===Z||x(u(g[Z-1][Z-2]),s)){S=0,C.push(g[Z-1][Z-1]),d&&(w.unshift([[1]]),_(N,i),E=n(E,N),Z>1&&(N=c(Array(Z-1).fill(v)))),Z-=1,g.pop();for(var T=0;T<Z;T++)g[T].pop()}else if(2===Z||x(u(g[Z-2][Z-3]),s)){S=0;var B=function(e,i,n,s){var u=t(e,s),l=r(o(e,s),o(i,n)),c=o(u,.5),h=o(a(r(o(u,u),o(4,l))),.5);return[t(c,h),r(c,h)]}(g[Z-2][Z-2],g[Z-2][Z-1],g[Z-1][Z-2],g[Z-1][Z-1]);C.push(...B),d&&(w.unshift(function(e,t,i,n,o,s,a,c){var h="BigNumber"===c,d="Complex"===c,p=h?l(0):d?b(0):0,f=h?l(1):d?b(1):1;if(x(u(i),a))return[[f,p],[p,f]];if(y(u(r(o,s)),a))return[[r(o,n),r(s,n)],[i,i]];var m=r(e,o),v=r(n,o);return x(u(t),a)&&x(u(v),a)?[[m,f],[i,p]]:[[t,p],[v,f]]}(g[Z-2][Z-2],g[Z-2][Z-1],g[Z-1][Z-2],g[Z-1][Z-1],B[0],B[1],s,h)),_(N,i),E=n(E,N),Z>2&&(N=c(Array(Z-2).fill(v)))),Z-=2,g.pop(),g.pop();for(var F=0;F<Z;F++)g[F].pop(),g[F].pop()}if(0===Z)break}if(C.sort((e,t)=>+r(u(e),u(t))),S>100){var R=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+C.join(", "));throw R.values=C,R.vectors=[],R}return{values:C,C:d?n(E,function(e,t){for(var r=[],i=0;i<t;i++)r[i]=Array(t).fill(0);var n=0;for(var o of e){for(var s=o.length,a=0;a<s;a++)for(var u=0;u<s;u++)r[n+a][n+u]=o[a][u];n+=s}return r}(w,i)):void 0}}(e,h,d,C,Z);if(Z){var D=function(e,t,o,s,a,u,h){var d=n(p(o),e,o),f="BigNumber"===h,C="Complex"===h,Z=f?l(0):C?b(0):0,_=f?l(1):C?b(1):1,S=[],A=[];for(var P of a){var D=function(e,t,r){for(var i=0;i<e.length;i++)if(r(e[i],t))return i;return -1}(S,P,g);-1===D?(S.push(P),A.push(1)):A[D]+=1}for(var M=[],O=S.length,T=Array(t).fill(Z),B=c(Array(t).fill(_)),F=0;F<O;F++)!function(){var e=S[F],a=r(d,n(e,B)),c=v(a,T);for(c.shift();c.length<A[F];){var f=function(e,t,r,i,n){for(var o,s="BigNumber"===n?l(1e3):1e3,a=0;a<5;++a){o=function(e,t,r){var i="BigNumber"===r,n="Complex"===r,o=Array(e).fill(0).map(e=>2*Math.random()-1);return i&&(o=o.map(e=>l(e))),n&&(o=o.map(e=>b(e))),N(o=w(o,t),r)}(t,r,n);try{o=m(e,o)}catch(e){continue}if(y(E(o),s))break}if(a>=5)return null;for(a=0;;){var u=m(e,o);if(x(E(w(o,[u])),i))break;if(++a>=10)return null;o=N(u)}return o}(a,t,c,u,h);if(null===f)break;c.push(f)}var g=n(p(s),o);c=c.map(e=>n(g,e)),M.push(...c.map(t=>({value:e,vector:i(t)})))}();return M}(e,h,P,S,A,d,C);return{values:A,eigenvectors:D}}return{values:A}}}({config:t,addScalar:n,subtract:o,multiply:m,multiplyScalar:h,flatten:y,divideScalar:d,sqrt:Z,abs:a,bignumber:f,diag:_,size:w,reshape:E,qr:N,inv:p,usolve:S,usolveAll:A,equal:s,complex:C,larger:g,smaller:M,matrixFromColumns:O,dot:T});return r("eigs",{Array:function(e){return R(i(e))},"Array, number|BigNumber":function(e,t){return R(i(e),{precision:t})},"Array, Object":(e,t)=>R(i(e),t),Matrix:function(e){return R(e,{matricize:!0})},"Matrix, number|BigNumber":function(e,t){return R(e,{precision:t,matricize:!0})},"Matrix, Object":function(e,t){var r={matricize:!0};return(0,sO.Z)(r,t),R(e,r)}});function R(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!("eigenvectors"in n)||n.eigenvectors,u=function(e,t,r){var i=e.toArray(),n=e.size();if(2!==n.length||n[0]!==n[1])throw RangeError("Matrix must be square (size: ".concat((0,re.WU)(n),")"));var s=n[0];if(function(e,t,r){for(var i=0;i<t;i++)for(var n=0;n<t;n++)if(g(f(a(P(e[i][n]))),r))return!1;return!0}(i,s,t)&&(function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)e[r][i]=D(e[r][i])}(i,s),function(e,t,r){for(var i=0;i<t;i++)for(var n=i;n<t;n++)if(g(f(a(o(e[i][n],e[n][i]))),r))return!1;return!0}(i,s,t))){var u=k(e,i,s);return B(i,s,t,u,r)}var l=k(e,i,s);return F(i,s,t,l,r)}(e,null!==(r=n.precision)&&void 0!==r?r:t.epsilon,s);return n.matricize&&(u.values=i(u.values),s&&(u.eigenvectors=u.eigenvectors.map(e=>{var{value:t,vector:r}=e;return{value:t,vector:i(r)}}))),s&&Object.defineProperty(u,"vectors",{enumerable:!1,get:()=>{throw Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),u}function k(e,t,r){var i=e.datatype();if("number"===i||"BigNumber"===i||"Complex"===i)return i;for(var n=!1,o=!1,s=!1,a=0;a<r;a++)for(var u=0;u<r;u++){var l=t[a][u];if((0,ej.hj)(l)||(0,ej.yQ)(l))n=!0;else if((0,ej.l9)(l))o=!0;else if((0,ej.Mc)(l))s=!0;else throw TypeError("Unsupported type in Matrix: "+(0,ej.kM)(l))}if(o&&s&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),s){for(var c=0;c<r;c++)for(var h=0;h<r;h++)t[c][h]=C(t[c][h]);return"Complex"}if(o){for(var d=0;d<r;d++)for(var p=0;p<r;p++)t[d][p]=f(t[d][p]);return"BigNumber"}if(n){for(var m=0;m<r;m++)for(var v=0;v<r;v++)t[m][v]=x(t[m][v]);return"number"}throw TypeError("Matrix contains unsupported types only.")}}),lT="kldivergence",lB=(0,eR.d5)(lT,["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],e=>{var{typed:t,matrix:r,divide:i,sum:n,multiply:o,map:s,dotDivide:a,log:u,isNumeric:l}=e;return t(lT,{"Array, Array":function(e,t){return c(r(e),r(t))},"Matrix, Array":function(e,t){return c(e,r(t))},"Array, Matrix":function(e,t){return c(r(e),t)},"Matrix, Matrix":function(e,t){return c(e,t)}});function c(e,t){var r=t.size().length,c=e.size().length;if(r>1)throw Error("first object must be one dimensional");if(c>1)throw Error("second object must be one dimensional");if(r!==c)throw Error("Length of two vectors must be equal");if(0===n(e))throw Error("Sum of elements in first object must be non zero");if(0===n(t))throw Error("Sum of elements in second object must be non zero");var h=i(e,n(e)),d=i(t,n(t)),p=n(o(h,s(a(h,d),e=>u(e))));return l(p)?p:Number.NaN}}),lF=r(5222),lR=r(253),lk=r(2023),lL="median",lI=(0,eR.d5)(lL,["typed","add","divide","compare","partitionSelect"],e=>{var{typed:t,add:r,divide:i,compare:n,partitionSelect:o}=e;function s(e){try{var t=(e=(0,t7.xH)(e.valueOf())).length;if(0===t)throw Error("Cannot calculate median of an empty array");if(t%2==0){for(var r=t/2-1,i=o(e,r+1),s=e[r],l=0;l<r;++l)n(e[l],s)>0&&(s=e[l]);return u(s,i)}var c=o(e,(t-1)/2);return a(c)}catch(e){throw(0,oD.x)(e,"median")}}var a=t({"number | BigNumber | Complex | Unit":function(e){return e}}),u=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return i(r(e,t),2)}});return t(lL,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(e,t){throw Error("median(A, dim) is not yet supported")},"...":function(e){if((0,rd.CQ)(e))throw TypeError("Scalar values expected in function median");return s(e)}})}),lj="corr",lz=(0,eR.d5)(lj,["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],e=>{var{typed:t,matrix:r,sqrt:i,sum:n,add:o,subtract:s,multiply:a,pow:u,divide:l}=e;return t(lj,{"Array, Array":function(e,t){return c(e,t)},"Matrix, Matrix":function(e,t){var i=c(e.toArray(),t.toArray());return Array.isArray(i)?r(i):i}});function c(e,t){var r=[];if(Array.isArray(e[0])&&Array.isArray(t[0])){if(e.length!==t.length)throw SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var i=0;i<e.length;i++){if(e[i].length!==t[i].length)throw SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");r.push(h(e[i],t[i]))}return r}if(e.length!==t.length)throw SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(e,t)}function h(e,t){var r=e.length,c=n(e),h=n(t),d=e.reduce((e,r,i)=>o(e,a(r,t[i])),0),p=n(e.map(e=>u(e,2))),f=n(t.map(e=>u(e,2)));return l(s(a(r,d),a(c,h)),i(a(s(a(r,p),u(c,2)),s(a(r,f),u(h,2)))))}}),lU="freqz",lY=(0,eR.d5)(lU,["typed","add","multiply","Complex","divide","matrix"],e=>{var{typed:t,add:r,multiply:i,Complex:n,divide:o,matrix:s}=e;return t(lU,{"Array, Array":function(e,t){return a(e,t,u(512))},"Array, Array, Array":function(e,t,r){return a(e,t,r)},"Array, Array, number":function(e,t,r){if(r<0)throw Error("w must be a positive number");return a(e,t,u(r))},"Matrix, Matrix":function(e,t){var r=u(512),{w:i,h:n}=a(e.valueOf(),t.valueOf(),r);return{w:s(i),h:s(n)}},"Matrix, Matrix, Matrix":function(e,t,r){var{h:i}=a(e.valueOf(),t.valueOf(),r.valueOf());return{h:s(i),w:s(r)}},"Matrix, Matrix, number":function(e,t,r){if(r<0)throw Error("w must be a positive number");var i=u(r),{h:n}=a(e.valueOf(),t.valueOf(),i);return{h:s(n),w:s(i)}}});function a(e,t,s){for(var a=[],u=[],l=0;l<s.length;l++){for(var c=n(0,0),h=n(0,0),d=0;d<e.length;d++)c=r(c,i(e[d],n(Math.cos(-d*s[l]),Math.sin(-d*s[l]))));for(var p=0;p<t.length;p++)h=r(h,i(t[p],n(Math.cos(-p*s[l]),Math.sin(-p*s[l]))));a.push(c),u.push(h)}for(var f=[],m=0;m<a.length;m++)f.push(o(a[m],u[m]));return{h:f,w:s}}function u(e){for(var t=[],r=0;r<e;r++)t.push(r/e*Math.PI);return t}}),lX=(0,eR.d5)("mad",["typed","abs","map","median","subtract"],e=>{var{typed:t,abs:r,map:i,median:n,subtract:o}=e;return t("mad",{"Array | Matrix":s,"...":function(e){return s(e)}});function s(e){if(0===(e=(0,t7.xH)(e.valueOf())).length)throw Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=n(e);return n(i(e,function(e){return r(o(e,t))}))}catch(e){if(e instanceof TypeError&&-1!==e.message.indexOf("median"))throw TypeError(e.message.replace("median","mad"));throw(0,oD.x)(e,"mad")}}}),lJ=r(1404),lq="zeta",lG=(0,eR.d5)(lq,["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],e=>{var{typed:t,config:r,multiply:i,pow:n,divide:o,factorial:s,equal:a,smallerEq:u,isNegative:l,gamma:c,sin:h,subtract:d,add:p,Complex:f,BigNumber:m,pi:v}=e;return t(lq,{number:e=>g(e,e=>e,()=>20),BigNumber:e=>g(e,e=>new m(e),()=>Math.abs(Math.log10(r.epsilon))),Complex:function(e){return 0===e.re&&0===e.im?new f(-.5):1===e.re?new f(NaN,NaN):e.re===1/0&&0===e.im?new f(1):e.im===1/0||e.re===-1/0?new f(NaN,NaN):b(e,e=>e,e=>Math.round(19.5+.9*Math.abs(e.im)),e=>e.re)}});function g(e,t,r){return a(e,0)?t(-.5):a(e,1)?t(NaN):isFinite(e)?b(e,t,r,e=>e):t(l(e)?NaN:1)}function b(e,t,r,s){var a=r(e);if(s(e)>-(a-1)/2)return function(e,t,r){for(var s=o(1,i(y(r(0),t),d(1,n(2,d(1,e))))),a=r(0),l=r(1);u(l,t);l=p(l,1))a=p(a,o(i((-1)**(l-1),y(l,t)),n(l,e)));return i(s,a)}(e,t(a),t);var l=i(n(2,e),n(t(v),d(e,1)));return l=i(l,h(i(o(t(v),2),e))),l=i(l,c(d(1,e))),i(l,b(d(1,e),t,r,s))}function y(e,t){for(var r=e,a=e;u(a,t);a=p(a,1)){var l=o(i(s(p(t,d(a,1))),n(4,a)),i(s(d(t,a)),s(i(2,a))));r=p(r,l)}return i(t,r)}}),lH="norm",lV=(0,eR.d5)(lH,["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],e=>{var{typed:t,abs:r,add:i,pow:n,conj:o,sqrt:s,multiply:a,equalScalar:u,larger:l,smaller:c,matrix:h,ctranspose:d,eigs:p}=e;return t(lH,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return f(h(e),2)},Matrix:function(e){return f(e,2)},"Array, number | BigNumber | string":function(e,t){return f(h(e),t)},"Matrix, number | BigNumber | string":function(e,t){return f(e,t)}});function f(e,t){var h=e.size();if(1===h.length)return function(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return o=0,e.forEach(function(e){var t=r(e);l(t,o)&&(o=t)},!0),o;if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return e.forEach(function(e){var t=r(e);(!s||c(t,s))&&(s=t)},!0),s||0;if("fro"===t)return f(e,2);if("number"==typeof t&&!isNaN(t)){if(!u(t,0)){var o,s,a=0;return e.forEach(function(e){a=i(n(r(e),t),a)},!0),n(a,1/t)}return Number.POSITIVE_INFINITY}throw Error("Unsupported parameter value")}(e,t);if(2===h.length){if(h[0]&&h[1])return function(e,t){var n,u,c,h,f;if(1===t)return n=[],u=0,e.forEach(function(e,t){var o=t[1],s=i(n[o]||0,r(e));l(s,u)&&(u=s),n[o]=s},!0),u;if(t===Number.POSITIVE_INFINITY||"inf"===t)return c=[],h=0,e.forEach(function(e,t){var n=t[0],o=i(c[n]||0,r(e));l(o,h)&&(h=o),c[n]=o},!0),h;if("fro"===t)return f=0,e.forEach(function(e,t){f=i(f,a(e,o(e)))}),r(s(f));if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw RangeError("Invalid matrix dimensions");var i=p(a(d(e),e)).values.toArray();return r(s(i[i.length-1]))}(e);throw Error("Unsupported parameter value "+t)}(e,t);throw RangeError("Invalid matrix dimensions")}}}),lW="rotationMatrix",l$=(0,eR.d5)(lW,["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],e=>{var{typed:t,config:r,multiplyScalar:i,addScalar:n,unaryMinus:o,norm:s,BigNumber:a,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:h,sin:d}=e;return t(lW,{"":function(){return"Matrix"===r.matrix?u([]):[]},string:function(e){return u(e)},"number | BigNumber | Complex | Unit":function(e){return p(e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(e,t){return p(e,t)},"number | BigNumber | Complex | Unit, Array":function(e,t){var r=u(t);return f(r),g(e,r,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(e,t){f(t);var i=t.storage()||("Matrix"===r.matrix?"dense":void 0);return g(e,t,i)},"number | BigNumber | Complex | Unit, Array, string":function(e,t,r){var i=u(t);return f(i),g(e,i,r)},"number | BigNumber | Complex | Unit, Matrix, string":function(e,t,r){return f(t),g(e,t,r)}});function p(e,t){var r=(0,ej.l9)(e)?new a(-1):-1,n=h(e),o=d(e);return v([[n,i(r,o)],[o,n]],t)}function f(e){var t=e.size();if(t.length<1||3!==t[0])throw RangeError("Vector must be of dimensions 1x3")}function m(e){return e.reduce((e,t)=>i(e,t))}function v(e,t){if(t){if("sparse"===t)return new c(e);if("dense"===t)return new l(e);throw TypeError('Unknown matrix type "'.concat(t,'"'))}return e}function g(e,t,r){var i=s(t);if(0===i)throw RangeError("Rotation around zero vector");var u=(0,ej.l9)(e)?a:null,l=u?new u(1):1,c=u?new u(-1):-1,p=u?new u(t.get([0])/i):t.get([0])/i,f=u?new u(t.get([1])/i):t.get([1])/i,g=u?new u(t.get([2])/i):t.get([2])/i,b=h(e),y=n(l,o(b)),x=d(e);return v([[n(b,m([p,p,y])),n(m([p,f,y]),m([c,g,x])),n(m([p,g,y]),m([f,x]))],[n(m([p,f,y]),m([g,x])),n(b,m([f,f,y])),n(m([f,g,y]),m([c,p,x]))],[n(m([p,g,y]),m([c,f,x])),n(m([f,g,y]),m([p,x])),n(b,m([g,g,y]))]],r)}}),lQ="schur",lK=(0,eR.d5)(lQ,["typed","matrix","identity","multiply","qr","norm","subtract"],e=>{var{typed:t,matrix:r,identity:i,multiply:n,qr:o,norm:s,subtract:a}=e;return t(lQ,{Array:function(e){var t=u(r(e));return{U:t.U.valueOf(),T:t.T.valueOf()}},Matrix:function(e){return u(e)}});function u(e){var t,r=e.size()[0],u=e,l=i(r),c=0;do{t=u;var h=o(u),d=h.Q;if(u=n(h.R,d),l=n(l,d),c++>100)break}while(s(a(u,t))>1e-4);return{U:l,T:u}}}),l0="rotate",l1=(0,eR.d5)(l0,["typed","multiply","rotationMatrix"],e=>{var{typed:t,multiply:r,rotationMatrix:i}=e;return t(l0,{"Array , number | BigNumber | Complex | Unit":function(e,t){return n(e,2),r(i(t),e).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(e,t){return n(e,2),r(i(t),e)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,o){return n(e,3),r(i(t,o),e)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,o){return n(e,3),r(i(t,o),e)}});function n(e,t){var r=Array.isArray(e)?(0,t7.aJ)(e):e.size();if(r.length>2||2===r.length&&1!==r[1]||r[0]!==t)throw RangeError("Vector must be of dimensions 1x".concat(t))}}),l2="sylvester",l3=(0,eR.d5)(l2,["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],e=>{var{typed:t,schur:r,matrixFromColumns:i,matrix:n,multiply:o,range:s,concat:a,transpose:u,index:l,subset:c,add:h,subtract:d,identity:p,lusolve:f,abs:m}=e;return t(l2,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(e,t,r){return v(n(e),t,r)},"Array, Array, Matrix":function(e,t,r){return v(n(e),n(t),r)},"Array, Matrix, Array":function(e,t,r){return v(n(e),t,n(r))},"Matrix, Array, Matrix":function(e,t,r){return v(e,n(t),r)},"Matrix, Array, Array":function(e,t,r){return v(e,n(t),n(r))},"Matrix, Matrix, Array":function(e,t,r){return v(e,t,n(r))},"Array, Array, Array":function(e,t,r){return v(n(e),n(t),n(r)).toArray()}});function v(e,t,v){for(var g=t.size()[0],b=e.size()[0],y=r(e),x=y.T,C=y.U,Z=r(o(-1,t)),_=Z.T,w=Z.U,E=o(o(u(C),v),w),N=s(0,b),S=[],A=(e,t)=>a(e,t,1),P=(e,t)=>a(e,t,0),D=0;D<g;D++)if(D<g-1&&m(c(_,l(D+1,D)))>1e-5){for(var M=P(c(E,l(N,D)),c(E,l(N,D+1))),O=0;O<D;O++)M=h(M,P(o(S[O],c(_,l(O,D))),o(S[O],c(_,l(O,D+1)))));var T=o(p(b),o(-1,c(_,l(D,D)))),B=o(p(b),o(-1,c(_,l(D+1,D)))),F=o(p(b),o(-1,c(_,l(D,D+1)))),R=o(p(b),o(-1,c(_,l(D+1,D+1)))),k=f(P(A(h(x,T),B),A(F,h(x,R))),M);S[D]=k.subset(l(s(0,b),0)),S[D+1]=k.subset(l(s(b,2*b),0)),D++}else{for(var L=c(E,l(N,D)),I=0;I<D;I++)L=h(L,o(S[I],c(_,l(I,D))));var j=d(x,o(c(_,l(D,D)),p(b)));S[D]=f(j,L)}return o(C,o(n(i(...S)),u(w)))}}),l5="lyap",l4=(0,eR.d5)(l5,["typed","matrix","sylvester","multiply","transpose"],e=>{var{typed:t,matrix:r,sylvester:i,multiply:n,transpose:o}=e;return t(l5,{"Matrix, Matrix":function(e,t){return i(e,o(e),n(-1,t))},"Array, Matrix":function(e,t){return i(r(e),o(r(e)),n(-1,t))},"Matrix, Array":function(e,t){return i(e,o(r(e)),r(n(-1,t)))},"Array, Array":function(e,t){return i(r(e),o(r(e)),r(n(-1,t))).toArray()}})}),l8=ek({config:o.v}),l6=ez({}),l9=e4({BigNumber:l8,config:o.v}),l7=eK({}),ce=tE({BigNumber:l8,config:o.v}),ct=t4({}),cr=ti({Complex:l6}),ci=e1({BigNumber:l8,config:o.v}),cn=e9({BigNumber:l8,config:o.v}),co=te({BigNumber:l8,config:o.v}),cs=t8({}),ca=e2({BigNumber:l8,config:o.v}),cu=e0({}),cl=e8({BigNumber:l8,config:o.v}),cc=t6({}),ch=t9({}),cd=tt({BigNumber:l8,config:o.v}),cp=tX({BigNumber:l8,config:o.v}),cf=e5({BigNumber:l8,config:o.v}),cm=eQ({}),cv=tn({}),cg=ri({Matrix:cs}),cb=tB({BigNumber:l8,config:o.v}),cy=e6({BigNumber:l8,config:o.v}),cx=e3({BigNumber:l8,config:o.v}),cC=rn({}),cZ=tr({BigNumber:l8,config:o.v}),c_=ru({BigNumber:l8,Complex:l6,DenseMatrix:cg,Fraction:ct}),cw=rF({BigNumber:l8,config:o.v,typed:c_}),cE=tT({BigNumber:l8,config:o.v}),cN=rR({typed:c_}),cS=rL({Complex:l6,config:o.v,typed:c_}),cA=r3({BigNumber:l8,typed:c_}),cP=r4({BigNumber:l8,Complex:l6,config:o.v,typed:c_}),cD=r6({typed:c_}),cM=r9({typed:c_}),cO=ie({BigNumber:l8,Complex:l6,config:o.v,typed:c_}),cT=it({typed:c_}),cB=ir({typed:c_}),cF=io({Complex:l6,config:o.v,typed:c_}),cR=is({BigNumber:l8,typed:c_}),ck=ic({typed:c_}),cL=id({typed:c_}),cI=im({typed:c_}),cj=iy({typed:c_}),cz=iC({Complex:l6,typed:c_}),cU=i_({typed:c_}),cY=iE({typed:c_}),cX=iN({BigNumber:l8,typed:c_}),cJ=iS({BigNumber:l8,typed:c_}),cq=iP({typed:c_}),cG=iT({config:o.v,typed:c_}),cH=iB({typed:c_}),cV=ij({typed:c_}),cW=iU({Complex:l6,typed:c_}),c$=iX({typed:c_}),cQ=iG({typed:c_}),cK=iW({typed:c_}),c0=iQ({typed:c_}),c1=iK({format:cK,typed:c_}),c2=i0({typed:c_}),c3=i2({typed:c_}),c5=i7({typed:c_}),c4=nt({typed:c_}),c8=ni({typed:c_}),c6=e7({BigNumber:l8,config:o.v}),c9=nc({Complex:l6,typed:c_}),c7=nd({Complex:l6,config:o.v,typed:c_}),he=nf({Complex:l6,config:o.v,typed:c_}),ht=nm({typed:c_}),hr=ng({typed:c_}),hi=ny({typed:c_}),hn=nx({typed:c_}),ho=nC({format:cK,typed:c_}),hs=nN({config:o.v,typed:c_}),ha=(0,nS.P)({typed:c_}),hu=nD({config:o.v,typed:c_}),hl=nM({typed:c_}),hc=nO({BigNumber:l8,typed:c_}),hh=nB({BigNumber:l8,Fraction:ct,complex:cz,typed:c_}),hd=nF({typed:c_}),hp=nR({Matrix:cs,equalScalar:cG,typed:c_}),hf=nL({typed:c_}),hm=nj({typed:c_}),hv=nU({typed:c_}),hg=nX({typed:c_}),hb=nJ({typed:c_}),hy=nG({typed:c_}),hx=nV({Complex:l6,config:o.v,typed:c_}),hC=n$({BigNumber:l8,typed:c_}),hZ=(0,nQ.j)({isInteger:c3,typed:c_}),h_=n0({BigNumber:l8,Complex:l6,config:o.v,typed:c_}),hw=n1({format:cK,typed:c_}),hE=n3({typed:c_}),hN=n8({typed:c_}),hS=n9({BigNumber:l8,typed:c_}),hA=oe({typed:c_}),hP=or({typed:c_}),hD=on({config:o.v,typed:c_}),hM=os({BigNumber:l8,typed:c_}),hO=ou({typed:c_}),hT=oc({SparseMatrix:hp,typed:c_}),hB=oh({Complex:l6,config:o.v,typed:c_}),hF=od({typed:c_}),hR=of({typed:c_}),hk=ov({BigNumber:l8,Complex:l6,config:o.v,typed:c_}),hL=ob({BigNumber:l8,typed:c_}),hI=oy({Fraction:ct,typed:c_}),hj=oC({typed:c_}),hz=o_({DenseMatrix:cg,Matrix:cs,SparseMatrix:hp,typed:c_}),hU=oE({isZero:c8,matrix:hz,typed:c_}),hY=oS({isNaN:hA,isNumeric:hj,typed:c_}),hX=oP({bignumber:cR,fraction:hI,number:hn}),hJ=oO({config:o.v,multiplyScalar:hr,numeric:hX,typed:c_}),hq=oB({isInteger:c3,matrix:hz,typed:c_}),hG=oR({matrix:hz,config:o.v,typed:c_}),hH=oL({matrix:hz,typed:c_}),hV=oj({matrix:hz,typed:c_}),hW=oU({BigNumber:l8,config:o.v,matrix:hz,typed:c_}),h$=oX({BigNumber:l8,config:o.v,matrix:hz,typed:c_}),hQ=oq({Complex:l6,config:o.v,typed:c_}),hK=oH({BigNumber:l8,Complex:l6,Fraction:ct,config:o.v,isNegative:c5,matrix:hz,typed:c_,unaryMinus:hR}),h0=(0,oV.k)({isInteger:c3,matrix:hz,typed:c_}),h1=o$({prod:hJ,size:hG,typed:c_}),h2=oK({conj:cU,transpose:hV,typed:c_}),h3=o1({DenseMatrix:cg,SparseMatrix:hp,matrix:hz,typed:c_}),h5=o3({numeric:hX,typed:c_}),h4=st({DenseMatrix:cg,concat:h0,divideScalar:h5,equalScalar:cG,matrix:hz,typed:c_}),h8=si({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),h6=ss({matrix:hz,typed:c_}),h9=su({isNumeric:hj,typed:c_}),h7=sc({BigNumber:l8,DenseMatrix:cg,SparseMatrix:hp,config:o.v,matrix:hz,typed:c_}),de=sd({matrix:hz,multiplyScalar:hr,typed:c_}),dt=sf({DenseMatrix:cg,concat:h0,config:o.v,matrix:hz,typed:c_}),dr=sZ({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_,zeros:h$}),di=sE({DenseMatrix:cg,divideScalar:h5,equalScalar:cG,matrix:hz,multiplyScalar:hr,subtractScalar:hg,typed:c_}),dn=sS({flatten:h6,matrix:hz,size:hG,typed:c_}),ds=sD({BigNumber:l8,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),da=sM({BigNumber:l8,config:o.v,matrix:hz,typed:c_}),du=sT({addScalar:cD,complex:cz,conj:cU,divideScalar:h5,equal:h8,identity:h7,isZero:c8,matrix:hz,multiplyScalar:hr,sign:hh,sqrt:hB,subtractScalar:hg,typed:c_,unaryMinus:hR,zeros:h$}),dl=sF({config:o.v,matrix:hz}),dc=sk({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_,zeros:h$}),dh=sj({BigNumber:l8,DenseMatrix:cg,equalScalar:cG,matrix:hz,typed:c_,zeros:h$}),dd=sU({DenseMatrix:cg,concat:h0,config:o.v,matrix:hz,typed:c_}),dp=sq({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,subtractScalar:hg,typed:c_,unaryMinus:hR}),df=sG({concat:h0,matrix:hz,typed:c_}),dm=sV({DenseMatrix:cg,concat:h0,config:o.v,equalScalar:cG,matrix:hz,typed:c_}),dv=sQ({DenseMatrix:cg,divideScalar:h5,equalScalar:cG,matrix:hz,multiplyScalar:hr,subtractScalar:hg,typed:c_}),dg=sK({DenseMatrix:cg,concat:h0,matrix:hz,typed:c_}),db=s1({DenseMatrix:cg,SparseMatrix:hp,addScalar:cD,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),dy=s5({BigNumber:l8,DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),dx=(0,s4.i)({concat:h0,equalScalar:cG,matrix:hz,typed:c_}),dC=(0,s8.j)({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),dZ=s9({DenseMatrix:cg,concat:h0,matrix:hz,typed:c_}),d_=ae({addScalar:cD,combinations:cj,divideScalar:h5,isInteger:c3,isNegative:c5,multiplyScalar:hr,typed:c_}),dw=ar({BigNumber:l8,DenseMatrix:cg,Fraction:ct,concat:h0,config:o.v,equalScalar:cG,matrix:hz,typed:c_}),dE=ao({concat:h0,matrix:hz,typed:c_}),dN=(0,as.o)({add:db,typed:c_,unaryPlus:cw}),dS=au({equal:h8,typed:c_}),dA=(0,al.J)({matrix:hz,number:hn,subtract:dp,typed:c_}),dP=ah({abs:cN,addScalar:cD,deepEqual:dS,divideScalar:h5,multiplyScalar:hr,sqrt:hB,subtractScalar:hg,typed:c_}),dD=ad({addScalar:cD,conj:cU,multiplyScalar:hr,size:hG,typed:c_}),dM=af({compareText:dE,isZero:c8,typed:c_}),dO=ag({DenseMatrix:cg,config:o.v,equalScalar:cG,matrix:hz,round:dh,typed:c_,zeros:h$}),dT=aZ({BigNumber:l8,DenseMatrix:cg,concat:h0,config:o.v,equalScalar:cG,matrix:hz,round:dh,typed:c_,zeros:h$}),dB=aw({abs:cN,addScalar:cD,divideScalar:h5,isPositive:c4,multiplyScalar:hr,smaller:dd,sqrt:hB,typed:c_}),dF=aE({DenseMatrix:cg,smaller:dd}),dR=aN({ImmutableDenseMatrix:dF,getMatrixDataType:c0}),dk=aP({DenseMatrix:cg,concat:h0,config:o.v,matrix:hz,typed:c_}),dL=aM({Complex:l6,config:o.v,divideScalar:h5,typed:c_}),dI=aT({DenseMatrix:cg,divideScalar:h5,equalScalar:cG,matrix:hz,multiplyScalar:hr,subtractScalar:hg,typed:c_}),dj=aF({flatten:h6,matrix:hz,size:hG,typed:c_}),dz=(0,aR.D)({config:o.v,numeric:hX,smaller:dd,typed:c_}),dU=ab({DenseMatrix:cg,concat:h0,config:o.v,equalScalar:cG,matrix:hz,round:dh,typed:c_,zeros:h$}),dY=aL({addScalar:cD,dot:dD,equalScalar:cG,matrix:hz,multiplyScalar:hr,typed:c_}),dX=aj({Complex:l6,config:o.v,divideScalar:h5,typed:c_}),dJ=(0,az.Z)({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_}),dq=aY({compare:dw,isNaN:hA,isNumeric:hj,typed:c_}),dG=aJ({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,typed:c_,zeros:h$}),dH=a0({SparseMatrix:hp,abs:cN,add:db,divideScalar:h5,larger:dk,largerEq:dt,multiply:dY,subtract:dp,transpose:hV,typed:c_}),dV=(0,a1.q)({add:db,matrix:hz,typed:c_,zeros:h$}),dW=(0,a2.O)({add:db,config:o.v,numeric:hX,typed:c_}),d$=a3({add:db,matrix:hz,typed:c_}),dQ=a4({DenseMatrix:cg,divideScalar:h5,equalScalar:cG,matrix:hz,multiplyScalar:hr,subtractScalar:hg,typed:c_}),dK=a6({Complex:l6,add:db,multiply:dY,number:hn,typed:c_}),d0=ue({DenseMatrix:cg,config:o.v,equalScalar:cG,matrix:hz,round:dh,typed:c_,zeros:h$}),d1=ui({compare:dw,typed:c_}),d2=uo({addScalar:cD,combinations:cj,isInteger:c3,isNegative:c5,isPositive:c4,larger:dk,typed:c_}),d3=ua({matrix:hz,multiply:dY,subtract:dp,typed:c_}),d5=uu({divideScalar:h5,isZero:c8,matrix:hz,multiply:dY,subtractScalar:hg,typed:c_,unaryMinus:hR}),d4=uc({concat:h0,equalScalar:cG,matrix:hz,multiplyScalar:hr,typed:c_}),d8=uh({larger:dk,smaller:dd}),d6=up({Complex:l6,DenseMatrix:cg,ceil:d0,equalScalar:cG,floor:dO,matrix:hz,typed:c_,zeros:h$}),d9=um({Index:dR,typed:c_}),d7=uv({abs:cN,add:db,addScalar:cD,config:o.v,divideScalar:h5,equalScalar:cG,flatten:h6,isNumeric:hj,isZero:c8,matrix:hz,multiply:dY,multiplyScalar:hr,smaller:dd,subtract:dp,typed:c_}),pe=ub({BigNumber:l8,add:db,config:o.v,equal:h8,isInteger:c3,mod:dU,smaller:dd,typed:c_,xgcd:hW}),pt=uy({concat:h0,equalScalar:cG,matrix:hz,typed:c_}),pr=uC({Complex:l6,config:o.v,divideScalar:h5,log:dL,typed:c_}),pi=(0,uZ.J)({config:o.v,larger:dk,numeric:hX,typed:c_}),pn=uw({DenseMatrix:cg,Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),po=uN({DenseMatrix:cg,Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),ps=uA({Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),pa=uD({Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),pu=uO({DenseMatrix:cg,concat:h0,config:o.v,matrix:hz,typed:c_}),pl=uF({compare:dw,compareNatural:d1,matrix:hz,typed:c_}),pc=(0,uR.I)({concat:h0,equalScalar:cG,matrix:hz,not:hi,typed:c_,zeros:h$}),ph=(0,uk.M)({bignumber:cR,matrix:hz,add:db,config:o.v,isPositive:c4,larger:dk,largerEq:dt,smaller:dd,smallerEq:pu,typed:c_}),pd=(0,uL.v)({Index:dR,matrix:hz,range:ph,typed:c_}),pp=uj({DenseMatrix:cg,Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),pf=uU({Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),pm=uX({Index:dR,concat:h0,setDifference:pp,size:hG,subset:dV,typed:c_}),pv=uJ({FibonacciHeap:d8,addScalar:cD,equalScalar:cG}),pg=(0,uq.w)({Index:dR,matrix:hz,range:ph,typed:c_}),pb=uG({abs:cN,addScalar:cD,det:d5,divideScalar:h5,identity:h7,matrix:hz,multiply:dY,typed:c_,unaryMinus:hR}),py=uH({DenseMatrix:cg,Spa:pv,SparseMatrix:hp,abs:cN,addScalar:cD,divideScalar:h5,equalScalar:cG,larger:dk,matrix:hz,multiplyScalar:hr,subtractScalar:hg,typed:c_,unaryMinus:hR}),px=uW({Complex:l6,add:db,ctranspose:h2,deepEqual:dS,divideScalar:h5,dot:dD,dotDivide:h4,equal:h8,inv:pb,matrix:hz,multiply:dY,typed:c_}),pC=u$({Complex:l6,config:o.v,fraction:hI,identity:h7,inv:pb,matrix:hz,multiply:dY,number:hn,typed:c_}),pZ=uK({DenseMatrix:cg,Index:dR,compareNatural:d1,size:hG,subset:dV,typed:c_}),p_=u1({Index:dR,concat:h0,setIntersect:pZ,setSymDifference:pm,size:hG,subset:dV,typed:c_}),pw=u3({abs:cN,add:db,identity:h7,inv:pb,map:ht,max:pi,multiply:dY,size:hG,sqrt:hB,subtract:dp,typed:c_}),pE=u6({BigNumber:l8,Complex:l6,Fraction:ct,abs:cN,addScalar:cD,config:o.v,divideScalar:h5,equal:h8,fix:d6,format:cK,isNumeric:hj,multiplyScalar:hr,number:hn,pow:pC,round:dh,subtractScalar:hg}),pN=td({BigNumber:l8,Unit:pE,config:o.v}),pS=tG({BigNumber:l8,Unit:pE,config:o.v}),pA=tF({BigNumber:l8,Unit:pE,config:o.v}),pP=tm({BigNumber:l8,Unit:pE,config:o.v}),pD=tk({BigNumber:l8,Unit:pE,config:o.v}),pM=tv({BigNumber:l8,Unit:pE,config:o.v}),pO=tp({BigNumber:l8,Unit:pE,config:o.v}),pT=tA({BigNumber:l8,Unit:pE,config:o.v}),pB=u7({DenseMatrix:cg,concat:h0,equalScalar:cG,matrix:hz,pow:pC,typed:c_}),pF=th({BigNumber:l8,Unit:pE,config:o.v}),pR=tf({BigNumber:l8,Unit:pE,config:o.v}),pk=lt({abs:cN,add:db,identity:h7,inv:pb,multiply:dY,typed:c_}),pL=tL({BigNumber:l8,Unit:pE,config:o.v}),pI=lr({addScalar:cD,ceil:d0,conj:cU,divideScalar:h5,dotDivide:h4,exp:cV,i:cr,log2:he,matrix:hz,multiplyScalar:hr,pow:pC,tau:cf,typed:c_}),pj=ln({BigNumber:l8,Complex:l6,config:o.v,multiplyScalar:hr,pow:pC,typed:c_}),pz=ta({BigNumber:l8,Unit:pE,config:o.v}),pU=tN({BigNumber:l8,Unit:pE,config:o.v}),pY=ls({conj:cU,dotDivide:h4,fft:pI,typed:c_}),pX=tx({BigNumber:l8,Unit:pE,config:o.v}),pJ=tj({BigNumber:l8,Unit:pE,config:o.v}),pq=tc({BigNumber:l8,Unit:pE,config:o.v}),pG=tH({BigNumber:l8,Unit:pE,config:o.v}),pH=tU({BigNumber:l8,Unit:pE,config:o.v}),pV=tP({BigNumber:l8,Unit:pE,config:o.v}),pW=ty({BigNumber:l8,Unit:pE,config:o.v}),p$=t0({BigNumber:l8,Unit:pE,config:o.v}),pQ=t$({BigNumber:l8,Unit:pE,config:o.v}),pK=t1({BigNumber:l8,Unit:pE,config:o.v}),p0=tS({BigNumber:l8,Unit:pE,config:o.v}),p1=tD({BigNumber:l8,Unit:pE,config:o.v}),p2=tl({BigNumber:l8,Unit:pE,config:o.v}),p3=tM({BigNumber:l8,Unit:pE,config:o.v}),p5=tJ({BigNumber:l8,Unit:pE,config:o.v}),p4=ts({BigNumber:l8,Unit:pE,config:o.v}),p8=tq({BigNumber:l8,Unit:pE,config:o.v}),p6=tO({BigNumber:l8,Unit:pE,config:o.v}),p9=tR({BigNumber:l8,Unit:pE,config:o.v}),p7=tC({BigNumber:l8,Unit:pE,config:o.v}),fe=lu({Unit:pE,typed:c_}),ft=ll({divideScalar:h5,equalScalar:cG,inv:pb,matrix:hz,multiply:dY,typed:c_}),fr=t_({BigNumber:l8,Unit:pE,config:o.v}),fi=lh({gamma:pj,typed:c_}),fn=tI({BigNumber:l8,Unit:pE,config:o.v}),fo=tW({BigNumber:l8,Unit:pE,config:o.v}),fs=tg({BigNumber:l8,Unit:pE,config:o.v}),fa=lf({DenseMatrix:cg,lsolve:di,lup:py,matrix:hz,slu:dH,typed:c_,usolve:dv}),fu=tb({BigNumber:l8,Unit:pE,config:o.v}),fl=tV({BigNumber:l8,Unit:pE,config:o.v}),fc=lv({add:db,divide:ft,factorial:fi,isInteger:c3,isPositive:c4,multiply:dY,typed:c_}),fh=lb({factorial:fi,typed:c_}),fd=tQ({BigNumber:l8,Unit:pE,config:o.v}),fp=lC({add:db,cbrt:hK,divide:ft,equalScalar:cG,im:c2,isZero:c8,multiply:dY,re:hl,sqrt:hB,subtract:dp,typeOf:hy,typed:c_,unaryMinus:hR}),ff=l_({compareNatural:d1,typed:c_}),fm=lE({abs:cN,add:db,bignumber:cR,divide:ft,isNegative:c5,isPositive:c4,larger:dk,map:ht,matrix:hz,max:pi,multiply:dY,smaller:dd,subtract:dp,typed:c_,unaryMinus:hR}),fv=lS({bignumber:cR,addScalar:cD,combinations:cj,divideScalar:h5,factorial:fi,isInteger:c3,isNegative:c5,larger:dk,multiplyScalar:hr,number:hn,pow:pC,subtractScalar:hg,typed:c_}),fg=lP({Unit:pE,typed:c_}),fb=lM({addScalar:cD,isInteger:c3,isNegative:c5,stirlingS2:fv,typed:c_}),fy=lO({abs:cN,add:db,addScalar:cD,atan:cB,bignumber:cR,column:pg,complex:cz,config:o.v,cos:cY,diag:h3,divideScalar:h5,dot:dD,equal:h8,flatten:h6,im:c2,inv:pb,larger:dk,matrix:hz,matrixFromColumns:dn,multiply:dY,multiplyScalar:hr,number:hn,qr:du,re:hl,reshape:hq,sin:hd,size:hG,smaller:dd,sqrt:hB,subtract:dp,typed:c_,usolve:dv,usolveAll:dQ}),fx=tw({BigNumber:l8,Unit:pE,config:o.v}),fC=tz({BigNumber:l8,Unit:pE,config:o.v}),fZ=lB({divide:ft,dotDivide:h4,isNumeric:hj,log:dL,map:ht,matrix:hz,multiply:dY,sum:dW,typed:c_}),f_=(0,lF.Q)({add:db,divide:ft,typed:c_}),fw=tY({BigNumber:l8,Unit:pE,config:o.v}),fE=tu({BigNumber:l8,Unit:pE,config:o.v}),fN=(0,lR.y)({bignumber:cR,add:db,compare:dw,divide:ft,isInteger:c3,larger:dk,multiply:dY,partitionSelect:dq,smaller:dd,smallerEq:pu,subtract:dp,typed:c_}),fS=(0,lk.F)({add:db,apply:hZ,divide:ft,isNaN:hA,multiply:dY,subtract:dp,typed:c_}),fA=tZ({BigNumber:l8,Unit:pE,config:o.v}),fP=lI({add:db,compare:dw,divide:ft,partitionSelect:dq,typed:c_}),fD=lz({add:db,divide:ft,matrix:hz,mean:f_,multiply:dY,pow:pC,sqrt:hB,subtract:dp,sum:dW,typed:c_}),fM=lY({Complex:l6,add:db,divide:ft,matrix:hz,multiply:dY,typed:c_}),fO=lX({abs:cN,map:ht,median:fP,subtract:dp,typed:c_}),fT=(0,lJ.X)({map:ht,sqrt:hB,typed:c_,variance:fS}),fB=lG({BigNumber:l8,Complex:l6,add:db,config:o.v,divide:ft,equal:h8,factorial:fi,gamma:pj,isNegative:c5,multiply:dY,pi:cx,pow:pC,sin:hd,smallerEq:pu,subtract:dp,typed:c_}),fF=lV({abs:cN,add:db,conj:cU,ctranspose:h2,eigs:fy,equalScalar:cG,larger:dk,matrix:hz,multiply:dY,pow:pC,smaller:dd,sqrt:hB,typed:c_}),fR=l$({BigNumber:l8,DenseMatrix:cg,SparseMatrix:hp,addScalar:cD,config:o.v,cos:cY,matrix:hz,multiplyScalar:hr,norm:fF,sin:hd,typed:c_,unaryMinus:hR}),fk=tK({BigNumber:l8,Unit:pE,config:o.v}),fL=lK({identity:h7,matrix:hz,multiply:dY,norm:fF,qr:du,subtract:dp,typed:c_}),fI=l1({multiply:dY,rotationMatrix:fR,typed:c_}),fj=l3({abs:cN,add:db,concat:h0,identity:h7,index:d9,lusolve:fa,matrix:hz,matrixFromColumns:dn,multiply:dY,range:ph,schur:fL,subset:dV,subtract:dp,transpose:hV,typed:c_}),fz=l4({matrix:hz,multiply:dY,sylvester:fj,transpose:hV,typed:c_})},2885:function(e,t,r){"use strict";function i(e,t,r){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=Error().stack}r.d(t,{m:function(){return i}}),i.prototype=RangeError(),i.prototype.constructor=RangeError,i.prototype.name="DimensionError",i.prototype.isDimensionError=!0},6896:function(e,t,r){"use strict";function i(e,t,r){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=Error().stack}r.d(t,{c:function(){return i}}),i.prototype=RangeError(),i.prototype.constructor=RangeError,i.prototype.name="IndexError",i.prototype.isIndexError=!0},2614:function(e,t,r){"use strict";r.d(t,{i:function(){return h}});var i=r(8385),n=r(6257),o=r(6104),s=r(1418),a=r(5284),u=r(506),l=r(4189),c="bitAnd",h=(0,a.d5)(c,["typed","matrix","equalScalar","concat"],e=>{var{typed:t,matrix:r,equalScalar:a,concat:h}=e,d=(0,n.v)({typed:t,equalScalar:a}),p=(0,s.X)({typed:t,equalScalar:a}),f=(0,o.e)({typed:t,equalScalar:a}),m=(0,u.L)({typed:t,matrix:r,concat:h});return t(c,{"number, number":l.qC,"BigNumber, BigNumber":i.hi},m({SS:p,DS:d,Ss:f}))})},145:function(e,t,r){"use strict";r.d(t,{j:function(){return h}});var i=r(8385),n=r(5284),o=r(2590),s=r(6101),a=r(6565),u=r(506),l=r(4189),c="bitOr",h=(0,n.d5)(c,["typed","matrix","equalScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:n,DenseMatrix:h,concat:d}=e,p=(0,a.M)({typed:t}),f=(0,s.v)({typed:t,equalScalar:n}),m=(0,o.H)({typed:t,DenseMatrix:h}),v=(0,u.L)({typed:t,matrix:r,concat:d});return t(c,{"number, number":l.LE,"BigNumber, BigNumber":i.Vq},v({SS:f,DS:p,Ss:m}))})},6949:function(e,t,r){"use strict";r.d(t,{I:function(){return c}});var i=r(6257),n=r(6104),o=r(2789),s=r(1418),a=r(5284),u=r(506),l=r(6350),c=(0,a.d5)("and",["typed","matrix","equalScalar","zeros","not","concat"],e=>{var{typed:t,matrix:r,equalScalar:a,zeros:c,not:h,concat:d}=e,p=(0,i.v)({typed:t,equalScalar:a}),f=(0,s.X)({typed:t,equalScalar:a}),m=(0,n.e)({typed:t,equalScalar:a}),v=(0,o.R)({typed:t}),g=(0,u.L)({typed:t,matrix:r,concat:d});return t("and",{"number, number":l.FO,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)&&(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!t.isZero()&&!e.isNaN()&&!t.isNaN()},"Unit, Unit":t.referToSelf(e=>(t,r)=>e(t.value||0,r.value||0)),"SparseMatrix, any":t.referToSelf(e=>(t,r)=>h(r)?c(t.size(),t.storage()):m(t,r,e,!1)),"DenseMatrix, any":t.referToSelf(e=>(t,r)=>h(r)?c(t.size(),t.storage()):v(t,r,e,!1)),"any, SparseMatrix":t.referToSelf(e=>(t,r)=>h(t)?c(t.size(),t.storage()):m(r,t,e,!0)),"any, DenseMatrix":t.referToSelf(e=>(t,r)=>h(t)?c(t.size(),t.storage()):v(r,t,e,!0)),"Array, any":t.referToSelf(e=>(t,i)=>e(r(t),i).valueOf()),"any, Array":t.referToSelf(e=>(t,i)=>e(t,r(i)).valueOf())},g({SS:f,DS:p}))})},1845:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var i=r(2419),n=r(6820),o=r(9322),s=r(5284),a=r(506),u=r(6350),l=(0,s.d5)("or",["typed","matrix","equalScalar","DenseMatrix","concat"],e=>{var{typed:t,matrix:r,equalScalar:s,DenseMatrix:l,concat:c}=e,h=(0,i.$)({typed:t}),d=(0,o.b)({typed:t,equalScalar:s}),p=(0,n.O)({typed:t,DenseMatrix:l}),f=(0,a.L)({typed:t,matrix:r,concat:c});return t("or",{"number, number":u.RY,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"Unit, Unit":t.referToSelf(e=>(t,r)=>e(t.value||0,r.value||0))},f({SS:d,DS:h,Ss:p}))})},131:function(e,t,r){"use strict";r.d(t,{j:function(){return u}});var i=r(5284),n=r(5836),o=r(7694),s=r(6896),a="apply",u=(0,i.d5)(a,["typed","isInteger"],e=>{var{typed:t,isInteger:r}=e;return t(a,{"Array | Matrix, number | BigNumber, function":function(e,t,i){if(!r(t))throw TypeError("Integer number expected for dimension");var a=Array.isArray(e)?(0,n.aJ)(e):e.size();if(t<0||t>=a.length)throw new s.c(t,a.length);return(0,o.SW)(e)?e.create(l(e.valueOf(),t,i)):l(e,t,i)}})});function l(e,t,r){var i,n,o;if(t<=0){if(!Array.isArray(e[0]))return r(e);for(i=0,o=function(e){var t,r,i=e.length,n=e[0].length,o=[];for(r=0;r<n;r++){var s=[];for(t=0;t<i;t++)s.push(e[t][r]);o.push(s)}return o}(e),n=[];i<o.length;i++)n[i]=l(o[i],t-1,r);return n}for(i=0,n=[];i<e.length;i++)n[i]=l(e[i],t-1,r);return n}},5052:function(e,t,r){"use strict";r.d(t,{w:function(){return u}});var i=r(5284),n=r(7694),o=r(6992),s=r(5836),a="column",u=(0,i.d5)(a,["typed","Index","matrix","range"],e=>{var{typed:t,Index:r,matrix:i,range:u}=e;return t(a,{"Matrix, number":l,"Array, number":function(e,t){return l(i((0,o.d9)(e)),t).valueOf()}});function l(e,t){if(2!==e.size().length)throw Error("Only two dimensional matrix is supported");(0,s.Ls)(t,e.size()[1]);var o=new r(u(0,e.size()[0]),t),a=e.subset(o);return(0,n.SW)(a)?a:i([[a]])}})},9002:function(e,t,r){"use strict";r.d(t,{k:function(){return c}});var i=r(7694),n=r(6992),o=r(5836),s=r(6896),a=r(2885),u=r(5284),l="concat",c=(0,u.d5)(l,["typed","matrix","isInteger"],e=>{var{typed:t,matrix:r,isInteger:u}=e;return t(l,{"...Array | Matrix | number | BigNumber":function(e){var t,l,c=e.length,h=-1,d=!1,p=[];for(t=0;t<c;t++){var f=e[t];if((0,i.SW)(f)&&(d=!0),(0,i.hj)(f)||(0,i.l9)(f)){if(t!==c-1)throw Error("Dimension must be specified as last argument");if(l=h,!u(h=f.valueOf()))throw TypeError("Integer number expected for dimension");if(h<0||t>0&&h>l)throw new s.c(h,l+1)}else{var m=(0,n.d9)(f).valueOf(),v=(0,o.aJ)(m);if(p[t]=m,l=h,h=v.length-1,t>0&&h!==l)throw new a.m(l+1,h+1)}}if(0===p.length)throw SyntaxError("At least one matrix expected");for(var g=p.shift();p.length;)g=(0,o.zo)(g,p.shift(),h);return d?r(g):g},"...string":function(e){return e.join("")}})})},3294:function(e,t,r){"use strict";r.d(t,{J:function(){return a}});var i=r(5284),n=r(9737),o=r(7694),s="diff",a=(0,i.d5)(s,["typed","matrix","subtract","number"],e=>{var{typed:t,matrix:r,subtract:i,number:a}=e;return t(s,{"Array | Matrix":function(e){return(0,o.SW)(e)?r(l(e.toArray())):l(e)},"Array | Matrix, number":function(e,t){if(!(0,n.U)(t))throw RangeError("Dimension must be a whole number");return(0,o.SW)(e)?r(u(e.toArray(),t)):u(e,t)},"Array, BigNumber":t.referTo("Array,number",e=>(t,r)=>e(t,a(r))),"Matrix, BigNumber":t.referTo("Matrix,number",e=>(t,r)=>e(t,a(r)))});function u(e,t){if((0,o.SW)(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var r=[];return e.forEach(e=>{r.push(u(e,t-1))}),r}if(0===t)return l(e);throw RangeError("Cannot have negative dimension")}function l(e){for(var t=[],r=e.length,n=1;n<r;n++)t.push(function e(t,r){(0,o.SW)(t)&&(t=t.toArray()),(0,o.SW)(r)&&(r=r.toArray());var n=Array.isArray(t),s=Array.isArray(r);if(n&&s)return function(t,r){if(t.length!==r.length)throw RangeError("Not all sub-arrays have the same length");for(var i=[],n=t.length,o=0;o<n;o++)i.push(e(t[o],r[o]));return i}(t,r);if(!n&&!s)return i(r,t);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}(e[n-1],e[n]));return t}})},451:function(e,t,r){"use strict";r.d(t,{M:function(){return s}});var i=r(5284),n=r(4986),o="range",s=(0,i.d5)(o,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],e=>{var{typed:t,config:r,matrix:i,bignumber:s,smaller:a,smallerEq:u,larger:l,largerEq:c,add:h,isPositive:d}=e;return t(o,{string:f,"string, boolean":f,"number, number":function(e,t){return p(m(e,t,1,!1))},"number, number, number":function(e,t,r){return p(m(e,t,r,!1))},"number, number, boolean":function(e,t,r){return p(m(e,t,1,r))},"number, number, number, boolean":function(e,t,r,i){return p(m(e,t,r,i))},"BigNumber, BigNumber":function(e,t){var r=e.constructor;return p(m(e,t,new r(1),!1))},"BigNumber, BigNumber, BigNumber":function(e,t,r){return p(m(e,t,r,!1))},"BigNumber, BigNumber, boolean":function(e,t,r){var i=e.constructor;return p(m(e,t,new i(1),r))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,r,i){return p(m(e,t,r,i))},"Unit, Unit, Unit":function(e,t,r){return p(m(e,t,r,!1))},"Unit, Unit, Unit, boolean":function(e,t,r,i){return p(m(e,t,r,i))}});function p(e){return"Matrix"===r.matrix?i?i(e):(0,n.kX)():e}function f(e,t){var i=function(e){var t=e.split(":").map(function(e){return Number(e)});if(t.some(function(e){return isNaN(e)}))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!i)throw SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===r.number?(void 0===s&&(0,n.R3)(),p(m(s(i.start),s(i.end),s(i.step)),t)):p(m(i.start,i.end,i.step,t))}function m(e,t,r,i){for(var n=[],o=d(r)?i?u:a:i?c:l,s=e;o(s,t);)n.push(s),s=h(s,r);return n}})},8481:function(e,t,r){"use strict";r.d(t,{v:function(){return a}});var i=r(5284),n=r(7694),o=r(6992),s=r(5836),a=(0,i.d5)("row",["typed","Index","matrix","range"],e=>{var{typed:t,Index:r,matrix:i,range:a}=e;return t("row",{"Matrix, number":u,"Array, number":function(e,t){return u(i((0,o.d9)(e)),t).valueOf()}});function u(e,t){if(2!==e.size().length)throw Error("Only two dimensional matrix is supported");(0,s.Ls)(t,e.size()[0]);var o=new r(t,a(0,e.size()[1])),u=e.subset(o);return(0,n.SW)(u)?u:i([[u]])}})},7061:function(e,t,r){"use strict";r.d(t,{q:function(){return c}});var i=r(7694),n=r(6992),o=r(5836),s=r(6886),a=r(2885),u=r(5284),l="subset",c=(0,u.d5)(l,["typed","matrix","zeros","add"],e=>{var{typed:t,matrix:r,zeros:i,add:n}=e;return t(l,{"Matrix, Index":function(e,t){return(0,o.JD)(t)?r():((0,o.bc)(e,t),e.subset(t))},"Array, Index":t.referTo("Matrix, Index",function(e){return function(t,i){var n=e(r(t),i);return i.isScalar()?n:n.valueOf()}}),"Object, Index":p,"string, Index":h,"Matrix, Index, any, any":function(e,t,r,s){return(0,o.JD)(t)?e:((0,o.bc)(e,t),e.clone().subset(t,function(e,t){if("string"==typeof e)throw Error("can't boradcast a string");if(t._isScalar)return e;var r=t.size();if(!r.every(e=>e>0))return e;try{return n(e,i(r))}catch(t){return e}}(r,t),s))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",function(e){return function(t,i,n,o){var s=e(r(t),i,n,o);return s.isMatrix?s.valueOf():s}}),"Array, Index, any":t.referTo("Matrix, Index, any, any",function(e){return function(t,i,n){return e(r(t),i,n,void 0).valueOf()}}),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",function(e){return function(t,r,i){return e(t,r,i,void 0)}}),"string, Index, string":d,"string, Index, string, string":d,"Object, Index, any":f})});function h(e,t){if(!(0,i.dh)(t))throw TypeError("Index expected");if((0,o.JD)(t))return"";if((0,o.bc)(Array.from(e),t),1!==t.size().length)throw new a.m(t.size().length,1);var r=e.length;(0,o.Ls)(t.min()[0],r),(0,o.Ls)(t.max()[0],r);var n=t.dimension(0),s="";return n.forEach(function(t){s+=e.charAt(t)}),s}function d(e,t,r,i){if(!t||!0!==t.isIndex)throw TypeError("Index expected");if((0,o.JD)(t))return e;if((0,o.bc)(Array.from(e),t),1!==t.size().length)throw new a.m(t.size().length,1);if(void 0!==i){if("string"!=typeof i||1!==i.length)throw TypeError("Single character expected as defaultValue")}else i=" ";var n=t.dimension(0);if(n.size()[0]!==r.length)throw new a.m(n.size()[0],r.length);var s=e.length;(0,o.Ls)(t.min()[0]),(0,o.Ls)(t.max()[0]);for(var u=[],l=0;l<s;l++)u[l]=e.charAt(l);if(n.forEach(function(e,t){u[e]=r.charAt(t[0])}),u.length>s)for(var c=s-1,h=u.length;c<h;c++)u[c]||(u[c]=i);return u.join("")}function p(e,t){if(!(0,o.JD)(t)){if(1!==t.size().length)throw new a.m(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw TypeError("String expected as index to retrieve an object property");return(0,s.YF)(e,r)}}function f(e,t,r){if((0,o.JD)(t))return e;if(1!==t.size().length)throw new a.m(t.size(),1);var i=t.dimension(0);if("string"!=typeof i)throw TypeError("String expected as index to retrieve an object property");var u=(0,n.d9)(e);return(0,s.nI)(u,i,r),u}},6363:function(e,t,r){"use strict";r.d(t,{o:function(){return c}});var i=r(2248),n=r(5284),o=r(3776),s=r(6183),a=r(5836),u=r(6896),l="cumsum",c=(0,n.d5)(l,["typed","add","unaryPlus"],e=>{var{typed:t,add:r,unaryPlus:n}=e;return t(l,{Array:c,Matrix:function(e){return e.create(c(e.valueOf()))},"Array, number | BigNumber":d,"Matrix, number | BigNumber":function(e,t){return e.create(d(e.valueOf(),t))},"...":function(e){if((0,i.CQ)(e))throw TypeError("All values expected to be scalar in function cumsum");return c(e)}});function c(e){try{return h(e)}catch(e){throw(0,s.x)(e,l)}}function h(e){if(0===e.length)return[];for(var t=[n(e[0])],i=1;i<e.length;++i)t.push(r(t[i-1],e[i]));return t}function d(e,t){var r=(0,a.aJ)(e);if(t<0||t>=r.length)throw new u.c(t,r.length);try{return function e(t,r){var i,n,s;if(r<=0){if(!Array.isArray(t[0][0]))return h(t);for(i=0,s=(0,o.c)(t),n=[];i<s.length;i++)n[i]=e(s[i],r-1);return n}for(i=0,n=[];i<t.length;i++)n[i]=e(t[i],r-1);return n}(e,t)}catch(e){throw(0,s.x)(e,l)}}})},3117:function(e,t,r){"use strict";r.d(t,{J:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("max",["typed","config","numeric","larger"],e=>{var{typed:t,config:r,numeric:n,larger:s}=e;return t("max",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){return(0,i.u4)(e,t.valueOf(),a)},"...":function(e){if((0,i.CQ)(e))throw TypeError("Scalar values expected in function max");return u(e)}});function a(e,t){try{return s(e,t)?e:t}catch(e){throw(0,o.x)(e,"max",t)}}function u(e){var t;if((0,i.Et)(e,function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||s(e,t))&&(t=e)}catch(t){throw(0,o.x)(t,"max",e)}}),void 0===t)throw Error("Cannot calculate max of an empty array");return"string"==typeof t&&(t=n(t,r.number)),t}})},5222:function(e,t,r){"use strict";r.d(t,{Q:function(){return u}});var i=r(2248),n=r(5836),o=r(5284),s=r(6183),a="mean",u=(0,o.d5)(a,["typed","add","divide"],e=>{var{typed:t,add:r,divide:o}=e;return t(a,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){try{var a=(0,i.u4)(e,t,r),u=Array.isArray(e)?(0,n.aJ)(e):e.size();return o(a,u[t])}catch(e){throw(0,s.x)(e,"mean")}},"...":function(e){if((0,i.CQ)(e))throw TypeError("Scalar values expected in function mean");return u(e)}});function u(e){var t,n=0;if((0,i.Et)(e,function(e){try{t=void 0===t?e:r(t,e),n++}catch(t){throw(0,s.x)(t,"mean",e)}}),0===n)throw Error("Cannot calculate the mean of an empty array");return o(t,n)}})},7543:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("min",["typed","config","numeric","smaller"],e=>{var{typed:t,config:r,numeric:n,smaller:s}=e;return t("min",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){return(0,i.u4)(e,t.valueOf(),a)},"...":function(e){if((0,i.CQ)(e))throw TypeError("Scalar values expected in function min");return u(e)}});function a(e,t){try{return s(e,t)?e:t}catch(e){throw(0,o.x)(e,"min",t)}}function u(e){var t;if((0,i.Et)(e,function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||s(e,t))&&(t=e)}catch(t){throw(0,o.x)(t,"min",e)}}),void 0===t)throw Error("Cannot calculate min of an empty array");return"string"==typeof t&&(t=n(t,r.number)),t}})},253:function(e,t,r){"use strict";r.d(t,{y:function(){return u}});var i=r(7694),n=r(5836),o=r(5284),s=r(131),a="quantileSeq",u=(0,o.d5)(a,["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],e=>{var{typed:t,bignumber:r,add:o,subtract:u,divide:l,multiply:c,partitionSelect:h,compare:d,isInteger:p,smaller:f,smallerEq:m,larger:v}=e,g=(0,s.j)({typed:t,isInteger:p});return t(a,{"Array | Matrix, number | BigNumber":(e,t)=>y(e,t,!1),"Array | Matrix, number | BigNumber, number":(e,t,r)=>b(e,t,!1,r,y),"Array | Matrix, number | BigNumber, boolean":y,"Array | Matrix, number | BigNumber, boolean, number":(e,t,r,i)=>b(e,t,r,i,y),"Array | Matrix, Array | Matrix":(e,t)=>x(e,t,!1),"Array | Matrix, Array | Matrix, number":(e,t,r)=>b(e,t,!1,r,x),"Array | Matrix, Array | Matrix, boolean":x,"Array | Matrix, Array | Matrix, boolean, number":(e,t,r,i)=>b(e,t,r,i,x)});function b(e,t,r,i,n){return g(e,i,e=>n(e,t,r))}function y(e,t,n){var s,a=e.valueOf();if(f(t,0))throw Error("N/prob must be non-negative");if(m(t,1))return(0,i.hj)(t)?C(a,t,n):r(C(a,t,n));if(v(t,1)){if(!p(t))throw Error("N must be a positive integer");if(v(t,4294967295))throw Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var u=o(t,1);s=[];for(var c=0;f(c,t);c++){var h=l(c+1,u);s.push(C(a,h,n))}return(0,i.hj)(t)?s:r(s)}}function x(e,t,r){for(var i=e.valueOf(),n=t.valueOf(),o=[],s=0;s<n.length;++s)o.push(C(i,n[s],r));return o}function C(e,t,r){var s,a,l=(0,n.xH)(e),f=l.length;if(0===f)throw Error("Cannot calculate quantile of an empty sequence");var m=(0,i.hj)(t)?t*(f-1):t.times(f-1),v=(0,i.hj)(t)?Math.floor(m):m.floor().toNumber(),g=(0,i.hj)(t)?m%1:m.minus(v);if(p(m))return r?l[m]:h(l,(0,i.hj)(t)?m:m.valueOf());if(r)s=l[v],a=l[v+1];else{a=h(l,v+1),s=l[v];for(var b=0;b<v;++b)d(l[b],s)>0&&(s=l[b])}return o(c(s,u(1,g)),c(a,g))}})},1404:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var i=r(5284),n=r(7694),o=(0,i.d5)("std",["typed","map","sqrt","variance"],e=>{var{typed:t,map:r,sqrt:i,variance:o}=e;return t("std",{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(e){return s(e)}});function s(e,t){if(0===e.length)throw SyntaxError("Function std requires one or more parameters (0 provided)");try{var s=o.apply(null,arguments);if((0,n.uZ)(s))return r(s,i);return i(s)}catch(e){if(e instanceof TypeError&&-1!==e.message.indexOf(" variance"))throw TypeError(e.message.replace(" variance"," std"));throw e}}})},2296:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("sum",["typed","config","add","numeric"],e=>{var{typed:t,config:r,add:n,numeric:s}=e;return t("sum",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){try{return(0,i.u4)(e,t,n)}catch(e){throw(0,o.x)(e,"sum")}},"...":function(e){if((0,i.CQ)(e))throw TypeError("Scalar values expected in function sum");return a(e)}});function a(e){var t;return(0,i.Et)(e,function(e){try{t=void 0===t?e:n(t,e)}catch(t){throw(0,o.x)(t,"sum",e)}}),void 0===t&&(t=s(0,r.number)),"string"==typeof t&&(t=s(t,r.number)),t}})},6183:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var i=r(7694);function n(e,t,r){var n;return -1!==String(e).indexOf("Unexpected type")?(n=arguments.length>2?" (type: "+(0,i.kM)(r)+", value: "+JSON.stringify(r)+")":" (type: "+e.data.actual+")",TypeError("Cannot calculate "+t+", unexpected type of argument"+n)):-1!==String(e).indexOf("complex numbers")?(n=arguments.length>2?" (type: "+(0,i.kM)(r)+", value: "+JSON.stringify(r)+")":"",TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+n)):e}},2023:function(e,t,r){"use strict";r.d(t,{F:function(){return l}});var i=r(2248),n=r(7694),o=r(5284),s=r(6183),a="unbiased",u="variance",l=(0,o.d5)(u,["typed","add","subtract","multiply","divide","apply","isNaN"],e=>{var{typed:t,add:r,subtract:o,multiply:l,divide:c,apply:h,isNaN:d}=e;return t(u,{"Array | Matrix":function(e){return p(e,a)},"Array | Matrix, string":p,"Array | Matrix, number | BigNumber":function(e,t){return f(e,t,a)},"Array | Matrix, number | BigNumber, string":f,"...":function(e){return p(e,a)}});function p(e,t){var a,u=0;if(0===e.length)throw SyntaxError("Function variance requires one or more parameters (0 provided)");if((0,i.Et)(e,function(e){try{a=void 0===a?e:r(a,e),u++}catch(t){throw(0,s.x)(t,"variance",e)}}),0===u)throw Error("Cannot calculate variance of an empty array");var h=c(a,u);if(a=void 0,(0,i.Et)(e,function(e){var t=o(e,h);a=void 0===a?l(t,t):r(a,l(t,t))}),d(a))return a;switch(t){case"uncorrected":return c(a,u);case"biased":return c(a,u+1);case"unbiased":var p=(0,n.l9)(a)?a.mul(0):0;return 1===u?p:c(a,u-1);default:throw Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function f(e,t,r){try{if(0===e.length)throw SyntaxError("Function variance requires one or more parameters (0 provided)");return h(e,t,e=>p(e,r))}catch(e){throw(0,s.x)(e,"variance")}}})},8289:function(e,t,r){"use strict";r.d(t,{P:function(){return u}});var i=r(9790),n=r(7694),o=r(5284),s=r(732),a="print",u=(0,o.d5)(a,["typed"],e=>{var{typed:t}=e;return t(a,{"string, Object | Array":l,"string, Object | Array, number | Object":l})});function l(e,t,r){return e.replace(s.k,function(e,o){var s=o.split("."),a=t[s.shift()];for(void 0!==a&&a.isMatrix&&(a=a.toArray());s.length&&void 0!==a;){var u=s.shift();a=u?a[u]:a+"."}return void 0!==a?(0,n.HD)(a)?a:(0,i.WU)(a,r):e})}},4189:function(e,t,r){"use strict";r.d(t,{LE:function(){return a},Lz:function(){return c},NA:function(){return s},ZG:function(){return l},ji:function(){return h},qC:function(){return o},xS:function(){return u}});var i=r(9737),n="number, number";function o(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function bitAnd");return e&t}function s(e){if(!(0,i.U)(e))throw Error("Integer expected in function bitNot");return~e}function a(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function bitOr");return e|t}function u(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function bitXor");return e^t}function l(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function leftShift");return e<<t}function c(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function rightArithShift");return e>>t}function h(e,t){if(!(0,i.U)(e)||!(0,i.U)(t))throw Error("Integers expected in function rightLogShift");return e>>>t}o.signature=n,s.signature="number",a.signature=n,u.signature=n,l.signature=n,c.signature=n,h.signature=n},6350:function(e,t,r){"use strict";r.d(t,{FO:function(){return a},RY:function(){return o},kl:function(){return s},xY:function(){return n}});var i="number, number";function n(e){return!e}function o(e,t){return!!(e||t)}function s(e,t){return!!e!=!!t}function a(e,t){return!!(e&&t)}n.signature="number",o.signature=i,s.signature=i,a.signature=i},6565:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo01xDSid",["typed"],e=>{var{typed:t}=e;return function(e,r,i,o){var s,a,u=e._data,l=e._size,c=e._datatype,h=r._values,d=r._index,p=r._ptr,f=r._size,m=r._datatype;if(l.length!==f.length)throw new n.m(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!h)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],g=l[1],b="string"==typeof c&&c===m?c:void 0,y=b?t.find(i,[b,b]):i,x=[];for(s=0;s<v;s++)x[s]=[];var C=[],Z=[];for(a=0;a<g;a++){for(var _=a+1,w=p[a],E=p[a+1],N=w;N<E;N++)C[s=d[N]]=o?y(h[N],u[s][a]):y(u[s][a],h[N]),Z[s]=_;for(s=0;s<v;s++)Z[s]===_?x[s][a]=C[s]:x[s][a]=u[s][a]}return e.createDenseMatrix({data:x,size:[v,g],datatype:b})}})},6257:function(e,t,r){"use strict";r.d(t,{v:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo02xDS0",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,o,s){var a,u=e._data,l=e._size,c=e._datatype,h=i._values,d=i._index,p=i._ptr,f=i._size,m=i._datatype;if(l.length!==f.length)throw new n.m(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!h)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],g=l[1],b=r,y=0,x=o;"string"==typeof c&&c===m&&(a=c,b=t.find(r,[a,a]),y=t.convert(0,a),x=t.find(o,[a,a]));for(var C=[],Z=[],_=[],w=0;w<g;w++){_[w]=Z.length;for(var E=p[w],N=p[w+1],S=E;S<N;S++){var A=d[S],P=s?x(h[S],u[A][w]):x(u[A][w],h[S]);b(P,y)||(Z.push(A),C.push(P))}}return _[g]=Z.length,i.createSparseMatrix({values:C,index:Z,ptr:_,size:[v,g],datatype:a})}})},2419:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo03xDSf",["typed"],e=>{var{typed:t}=e;return function(e,r,i,o){var s,a=e._data,u=e._size,l=e._datatype,c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype;if(u.length!==p.length)throw new n.m(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!c)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],v=u[1],g=0,b=i;"string"==typeof l&&l===f&&(s=l,g=t.convert(0,s),b=t.find(i,[s,s]));for(var y=[],x=0;x<m;x++)y[x]=[];for(var C=[],Z=[],_=0;_<v;_++){for(var w=_+1,E=d[_],N=d[_+1],S=E;S<N;S++){var A=h[S];C[A]=o?b(c[S],a[A][_]):b(a[A][_],c[S]),Z[A]=w}for(var P=0;P<m;P++)Z[P]===w?y[P][_]=C[P]:y[P][_]=o?b(g,a[P][_]):b(a[P][_],g)}return e.createDenseMatrix({data:y,size:[m,v],datatype:s})}})},6101:function(e,t,r){"use strict";r.d(t,{v:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo04xSidSid",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,o){var s,a,u,l,c,h,d=e._values,p=e._index,f=e._ptr,m=e._size,v=e._datatype,g=i._values,b=i._index,y=i._ptr,x=i._size,C=i._datatype;if(m.length!==x.length)throw new n.m(m.length,x.length);if(m[0]!==x[0]||m[1]!==x[1])throw RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+x+")");var Z=m[0],_=m[1],w=r,E=0,N=o;"string"==typeof v&&v===C&&(s=v,w=t.find(r,[s,s]),E=t.convert(0,s),N=t.find(o,[s,s]));var S=d&&g?[]:void 0,A=[],P=[],D=d&&g?[]:void 0,M=d&&g?[]:void 0,O=[],T=[];for(u=0;u<_;u++){P[u]=A.length;var B=u+1;for(c=f[u],h=f[u+1],l=c;l<h;l++)a=p[l],A.push(a),O[a]=B,D&&(D[a]=d[l]);for(c=y[u],h=y[u+1],l=c;l<h;l++)if(O[a=b[l]]===B){if(D){var F=N(D[a],g[l]);w(F,E)?O[a]=null:D[a]=F}}else A.push(a),T[a]=B,M&&(M[a]=g[l]);if(D&&M)for(l=P[u];l<A.length;)O[a=A[l]]===B?(S[l]=D[a],l++):T[a]===B?(S[l]=M[a],l++):A.splice(l,1)}return P[_]=A.length,e.createSparseMatrix({values:S,index:A,ptr:P,size:[Z,_],datatype:s})}})},9322:function(e,t,r){"use strict";r.d(t,{b:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo05xSfSf",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,o){var s,a,u,l,c,h=e._values,d=e._index,p=e._ptr,f=e._size,m=e._datatype,v=i._values,g=i._index,b=i._ptr,y=i._size,x=i._datatype;if(f.length!==y.length)throw new n.m(f.length,y.length);if(f[0]!==y[0]||f[1]!==y[1])throw RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+y+")");var C=f[0],Z=f[1],_=r,w=0,E=o;"string"==typeof m&&m===x&&(s=m,_=t.find(r,[s,s]),w=t.convert(0,s),E=t.find(o,[s,s]));var N=h&&v?[]:void 0,S=[],A=[],P=N?[]:void 0,D=N?[]:void 0,M=[],O=[];for(u=0;u<Z;u++){A[u]=S.length;var T=u+1;for(l=p[u],c=p[u+1];l<c;l++)a=d[l],S.push(a),M[a]=T,P&&(P[a]=h[l]);for(l=b[u],c=b[u+1];l<c;l++)M[a=g[l]]!==T&&S.push(a),O[a]=T,D&&(D[a]=v[l]);if(N)for(l=A[u];l<S.length;){var B=M[a=S[l]],F=O[a];if(B===T||F===T){var R=E(B===T?P[a]:w,F===T?D[a]:w);_(R,w)?S.splice(l,1):(N.push(R),l++)}}}return A[Z]=S.length,e.createSparseMatrix({values:N,index:S,ptr:A,size:[C,Z],datatype:s})}})},1418:function(e,t,r){"use strict";r.d(t,{X:function(){return s}});var i=r(5284),n=r(2885),o=r(2248),s=(0,i.d5)("matAlgo06xS0S0",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,s){var a,u=e._values,l=e._size,c=e._datatype,h=i._values,d=i._size,p=i._datatype;if(l.length!==d.length)throw new n.m(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");var f=l[0],m=l[1],v=r,g=0,b=s;"string"==typeof c&&c===p&&(a=c,v=t.find(r,[a,a]),g=t.convert(0,a),b=t.find(s,[a,a]));for(var y=u&&h?[]:void 0,x=[],C=[],Z=y?[]:void 0,_=[],w=[],E=0;E<m;E++){C[E]=x.length;var N=E+1;if((0,o.U6)(e,E,_,Z,w,N,x,b),(0,o.U6)(i,E,_,Z,w,N,x,b),Z)for(var S=C[E];S<x.length;){var A=x[S];if(w[A]===N){var P=Z[A];v(P,g)?x.splice(S,1):(y.push(P),S++)}else x.splice(S,1)}else for(var D=C[E];D<x.length;)w[x[D]]!==N?x.splice(D,1):D++}return C[m]=x.length,e.createSparseMatrix({values:y,index:x,ptr:C,size:[f,m],datatype:a})}})},2590:function(e,t,r){"use strict";r.d(t,{H:function(){return i}});var i=(0,r(5284).d5)("matAlgo10xSids",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:r}=e;return function(e,i,n,o){var s,a=e._values,u=e._index,l=e._ptr,c=e._size,h=e._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],p=c[1],f=n;"string"==typeof h&&(s=h,i=t.convert(i,s),f=t.find(n,[s,s]));for(var m=[],v=[],g=[],b=0;b<p;b++){for(var y=b+1,x=l[b],C=l[b+1],Z=x;Z<C;Z++){var _=u[Z];v[_]=a[Z],g[_]=y}for(var w=0;w<d;w++)0===b&&(m[w]=[]),g[w]===y?m[w][b]=o?f(i,v[w]):f(v[w],i):m[w][b]=i}return new r({data:m,size:[d,p],datatype:s})}})},6104:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var i=(0,r(5284).d5)("matAlgo11xS0s",["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return function(e,i,n,o){var s,a=e._values,u=e._index,l=e._ptr,c=e._size,h=e._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],p=c[1],f=r,m=0,v=n;"string"==typeof h&&(s=h,f=t.find(r,[s,s]),m=t.convert(0,s),i=t.convert(i,s),v=t.find(n,[s,s]));for(var g=[],b=[],y=[],x=0;x<p;x++){y[x]=b.length;for(var C=l[x],Z=l[x+1],_=C;_<Z;_++){var w=u[_],E=o?v(i,a[_]):v(a[_],i);f(E,m)||(b.push(w),g.push(E))}}return y[p]=b.length,e.createSparseMatrix({values:g,index:b,ptr:y,size:[d,p],datatype:s})}})},6820:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var i=(0,r(5284).d5)("matAlgo12xSfs",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:r}=e;return function(e,i,n,o){var s,a=e._values,u=e._index,l=e._ptr,c=e._size,h=e._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],p=c[1],f=n;"string"==typeof h&&(s=h,i=t.convert(i,s),f=t.find(n,[s,s]));for(var m=[],v=[],g=[],b=0;b<p;b++){for(var y=b+1,x=l[b],C=l[b+1],Z=x;Z<C;Z++){var _=u[Z];v[_]=a[Z],g[_]=y}for(var w=0;w<d;w++)0===b&&(m[w]=[]),g[w]===y?m[w][b]=o?f(i,v[w]):f(v[w],i):m[w][b]=o?f(i,0):f(0,i)}return new r({data:m,size:[d,p],datatype:s})}})},2789:function(e,t,r){"use strict";r.d(t,{R:function(){return o}});var i=r(5284),n=r(6992),o=(0,i.d5)("matAlgo14xDs",["typed"],e=>{var{typed:t}=e;return function(e,r,i,o){var s,a=e._data,u=e._size,l=e._datatype,c=i;"string"==typeof l&&(s=l,r=t.convert(r,s),c=t.find(i,[s,s]));var h=u.length>0?function e(t,r,i,n,o,s,a){var u=[];if(r===i.length-1)for(var l=0;l<n;l++)u[l]=a?t(s,o[l]):t(o[l],s);else for(var c=0;c<n;c++)u[c]=e(t,r+1,i,i[r+1],o[c],s,a);return u}(c,0,u,u[0],a,r,o):[];return e.createDenseMatrix({data:h,size:(0,n.d9)(u),datatype:s})}})},506:function(e,t,r){"use strict";r.d(t,{L:function(){return c}});var i=r(5284),n=r(6992),o=r(2885),s=(0,i.d5)("matAlgo13xDD",["typed"],e=>{var{typed:t}=e;return function(e,r,i){var n,s=e._data,a=e._size,u=e._datatype,l=r._data,c=r._size,h=r._datatype,d=[];if(a.length!==c.length)throw new o.m(a.length,c.length);for(var p=0;p<a.length;p++){if(a[p]!==c[p])throw RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");d[p]=a[p]}var f=i;"string"==typeof u&&u===h&&(n=u,f=t.find(i,[n,n]));var m=d.length>0?function e(t,r,i,n,o,s){var a=[];if(r===i.length-1)for(var u=0;u<n;u++)a[u]=t(o[u],s[u]);else for(var l=0;l<n;l++)a[l]=e(t,r+1,i,i[r+1],o[l],s[l]);return a}(f,0,d,d[0],s,l):[];return e.createDenseMatrix({data:m,size:d,datatype:n})}}),a=r(2789),u=r(5836),l=(0,i.d5)("broadcast",["concat"],e=>{var{concat:t}=e;return function(e,t){var n=Math.max(e._size.length,t._size.length);if(e._size.length===t._size.length&&e._size.every((e,r)=>e===t._size[r]))return[e,t];for(var o=r(e._size,n,0),s=r(t._size,n,0),a=[],l=0;l<n;l++)a[l]=Math.max(o[l],s[l]);(0,u.cV)(o,a),(0,u.cV)(s,a);var c=e.clone(),h=t.clone();c._size.length<n?c.reshape(r(c._size,n,1)):h._size.length<n&&h.reshape(r(h._size,n,1));for(var d=0;d<n;d++)c._size[d]<a[d]&&(c=i(c,a[d],d)),h._size[d]<a[d]&&(h=i(h,a[d],d));return[c,h]};function r(e,t,r){return[...Array(t-e.length).fill(r),...e]}function i(e,r,i){return t(...Array(r).fill(e),i)}}),c=(0,i.d5)("matrixAlgorithmSuite",["typed","matrix","concat"],e=>{var{typed:t,matrix:r,concat:i}=e,o=s({typed:t}),u=(0,a.R)({typed:t}),c=l({concat:i});return function(e){var i,s=e.elop,a=e.SD||e.DS;s?(i={"DenseMatrix, DenseMatrix":(e,t)=>o(...c(e,t),s),"Array, Array":(e,t)=>o(...c(r(e),r(t)),s).valueOf(),"Array, DenseMatrix":(e,t)=>o(...c(r(e),t),s),"DenseMatrix, Array":(e,t)=>o(...c(e,r(t)),s)},e.SS&&(i["SparseMatrix, SparseMatrix"]=(t,r)=>e.SS(...c(t,r),s,!1)),e.DS&&(i["DenseMatrix, SparseMatrix"]=(t,r)=>e.DS(...c(t,r),s,!1),i["Array, SparseMatrix"]=(t,i)=>e.DS(...c(r(t),i),s,!1)),a&&(i["SparseMatrix, DenseMatrix"]=(e,t)=>a(...c(t,e),s,!0),i["SparseMatrix, Array"]=(e,t)=>a(...c(r(t),e),s,!0))):(i={"DenseMatrix, DenseMatrix":t.referToSelf(e=>(t,r)=>o(...c(t,r),e)),"Array, Array":t.referToSelf(e=>(t,i)=>o(...c(r(t),r(i)),e).valueOf()),"Array, DenseMatrix":t.referToSelf(e=>(t,i)=>o(...c(r(t),i),e)),"DenseMatrix, Array":t.referToSelf(e=>(t,i)=>o(...c(t,r(i)),e))},e.SS&&(i["SparseMatrix, SparseMatrix"]=t.referToSelf(t=>(r,i)=>e.SS(...c(r,i),t,!1))),e.DS&&(i["DenseMatrix, SparseMatrix"]=t.referToSelf(t=>(r,i)=>e.DS(...c(r,i),t,!1)),i["Array, SparseMatrix"]=t.referToSelf(t=>(i,n)=>e.DS(...c(r(i),n),t,!1))),a&&(i["SparseMatrix, DenseMatrix"]=t.referToSelf(e=>(t,r)=>a(...c(r,t),e,!0)),i["SparseMatrix, Array"]=t.referToSelf(e=>(t,i)=>a(...c(r(i),t),e,!0))));var l=e.scalar||"any";(e.Ds||e.Ss)&&(s?(i["DenseMatrix,"+l]=(e,t)=>u(e,t,s,!1),i[l+", DenseMatrix"]=(e,t)=>u(t,e,s,!0),i["Array,"+l]=(e,t)=>u(r(e),t,s,!1).valueOf(),i[l+", Array"]=(e,t)=>u(r(t),e,s,!0).valueOf()):(i["DenseMatrix,"+l]=t.referToSelf(e=>(t,r)=>u(t,r,e,!1)),i[l+", DenseMatrix"]=t.referToSelf(e=>(t,r)=>u(r,t,e,!0)),i["Array,"+l]=t.referToSelf(e=>(t,i)=>u(r(t),i,e,!1).valueOf()),i[l+", Array"]=t.referToSelf(e=>(t,i)=>u(r(i),t,e,!0).valueOf())));var h=void 0!==e.sS?e.sS:e.Ss;return s?(e.Ss&&(i["SparseMatrix,"+l]=(t,r)=>e.Ss(t,r,s,!1)),h&&(i[l+", SparseMatrix"]=(e,t)=>h(t,e,s,!0))):(e.Ss&&(i["SparseMatrix,"+l]=t.referToSelf(t=>(r,i)=>e.Ss(r,i,t,!1))),h&&(i[l+", SparseMatrix"]=t.referToSelf(e=>(t,r)=>h(r,t,e,!0)))),s&&s.signatures&&(0,n.l7)(i,s.signatures),i}})},2992:function(e,t,r){"use strict";r.d(t,{i:function(){return o}});var i=r(7425),n=r(7694);function o(e,t,r,o,s){if(!i.isTypedFunction(e))return e(t,r,o);var a=[t,r,o],u=i.resolve(e,a);if(u)return p(u.implementation,a);var l=[t,r],c=i.resolve(e,l);if(c)return p(c.implementation,l);var h=[t],d=i.resolve(e,h);return d?p(d.implementation,h):p(e,a);function p(i,a){try{return i.apply(i,a)}catch(i){var u;if(i instanceof TypeError&&(null===(u=i.data)||void 0===u?void 0:u.category)==="wrongType"){var l=[];throw l.push("value: ".concat((0,n.kM)(t))),a.length>=2&&l.push("index: ".concat((0,n.kM)(r))),a.length>=3&&l.push("array: ".concat((0,n.kM)(o))),TypeError("Function ".concat(s," cannot apply callback arguments ")+"".concat(e.name,"(").concat(l.join(", "),") at index ").concat(JSON.stringify(r)))}throw TypeError("Function ".concat(s," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(i.message))}}}},5836:function(e,t,r){"use strict";r.d(t,{$q:function(){return function e(t,r){for(var i,n=0,o=0;o<t.length;o++){var s=t[o],a=Array.isArray(s);if(0===o&&a&&(n=s.length),a&&s.length!==n)return;var u=a?e(s,r):r(s);if(void 0===i)i=u;else if(i!==u)return"mixed"}return i}},D$:function(){return A},Ed:function(){return _},Gu:function(){return h},JD:function(){return f},L9:function(){return y},Ls:function(){return p},SI:function(){return m},UF:function(){return M},UI:function(){return Z},U_:function(){return E},XL:function(){return v},aJ:function(){return c},bc:function(){return d},cV:function(){return D},eu:function(){return g},f4:function(){return x},hX:function(){return w},v_:function(){return N},xH:function(){return C},yV:function(){return S},zo:function(){return P}});var i=r(2110),n=r(9737),o=r(7694),s=r(9790),a=r(2885),u=r(6896),l=r(6992);function c(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function h(e,t){if(0===t.length){if(Array.isArray(e))throw new a.m(e.length,0)}else!function e(t,r,i){var n,o=t.length;if(o!==r[i])throw new a.m(o,r[i]);if(i<r.length-1){var s=i+1;for(n=0;n<o;n++){if(!Array.isArray(t[n]))throw new a.m(r.length-1,r.length,"<");e(t[n],r,s)}}else for(n=0;n<o;n++)if(Array.isArray(t[n]))throw new a.m(r.length+1,r.length,">")}(e,t,0)}function d(e,t){var r=e.isMatrix?e._size:c(e);t._sourceSize.forEach((e,t)=>{if(null!==e&&e!==r[t])throw new a.m(e,r[t])})}function p(e,t){if(void 0!==e){if(!(0,o.hj)(e)||!(0,n.U)(e))throw TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new u.c(e,t)}}function f(e){for(var t=0;t<e._dimensions.length;++t){var r=e._dimensions[t];if(r._data&&(0,o.kJ)(r._data)){if(0===r._size[0])return!0}else if(r.isRange){if(r.start===r.end)return!0}else if((0,o.HD)(r)&&0===r.length)return!0}return!1}function m(e,t,r){if(!Array.isArray(t))throw TypeError("Array expected");if(0===t.length)throw Error("Resizing to scalar is not supported");return t.forEach(function(e){if(!(0,o.hj)(e)||!(0,n.U)(e)||e<0)throw TypeError("Invalid size, must contain positive integers (size: "+(0,s.WU)(t)+")")}),((0,o.hj)(e)||(0,o.l9)(e))&&(e=[e]),function e(t,r,i,n){var o,s,a=t.length,u=r[i],l=Math.min(a,u);if(t.length=u,i<r.length-1){var c=i+1;for(o=0;o<l;o++)Array.isArray(s=t[o])||(s=[s],t[o]=s),e(s,r,c,n);for(o=l;o<u;o++)s=[],t[o]=s,e(s,r,c,n)}else{for(o=0;o<l;o++)for(;Array.isArray(t[o]);)t[o]=t[o][0];for(o=l;o<u;o++)t[o]=n}}(e,t,0,void 0!==r?r:0),e}function v(e,t){var r=C(e),i=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw TypeError("Array expected");if(0===t.length)throw new a.m(0,i,"!=");var n=b(t=g(t,i));if(i!==n)throw new a.m(n,i,"!=");try{return function(e,t){for(var r,i=e,n=t.length-1;n>0;n--){var o=t[n];r=[];for(var s=i.length/o,a=0;a<s;a++)r.push(i.slice(a*o,(a+1)*o));i=r}return i}(r,t)}catch(e){if(e instanceof a.m)throw new a.m(n,i,"!=");throw e}}function g(e,t){var r=b(e),i=e.slice(),n=e.indexOf(-1);if(e.indexOf(-1,n+1)>=0)throw Error("More than one wildcard in sizes");if(n>=0){if(t%r==0)i[n]=-t/r;else throw Error("Could not replace wildcard, since "+t+" is no multiple of "+-r)}return i}function b(e){return e.reduce((e,t)=>e*t,1)}function y(e,t){for(var r=t||c(e);Array.isArray(e)&&1===e.length;)e=e[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(e=function e(t,r,i){var n,o;if(i<r){var s=i+1;for(n=0,o=t.length;n<o;n++)t[n]=e(t[n],r,s)}else for(;Array.isArray(t);)t=t[0];return t}(e,i,0),r.length=i),e}function x(e,t,r,i){var n=i||c(e);if(r)for(var o=0;o<r;o++)e=[e],n.unshift(1);for(e=function e(t,r,i){var n,o;if(Array.isArray(t)){var s=i+1;for(n=0,o=t.length;n<o;n++)t[n]=e(t[n],r,s)}else for(var a=i;a<r;a++)t=[t];return t}(e,t,0);n.length<t;)n.push(1);return e}function C(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(r){Array.isArray(r)?r.forEach(e):t.push(r)}),t}function Z(e,t){return Array.prototype.map.call(e,t)}function _(e,t){Array.prototype.forEach.call(e,t)}function w(e,t){if(1!==c(e).length)throw Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function E(e,t){if(1!==c(e).length)throw Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,e=>t.test(e))}function N(e,t){return Array.prototype.join.call(e,t)}function S(e){if(!Array.isArray(e))throw TypeError("Array input expected");if(0===e.length)return e;var t=[],r=0;t[0]={value:e[0],identifier:0};for(var i=1;i<e.length;i++)e[i]===e[i-1]?r++:r=0,t.push({value:e[i],identifier:r});return t}function A(e){if(!Array.isArray(e))throw TypeError("Array input expected");if(0===e.length)return e;for(var t=[],r=0;r<e.length;r++)t.push(e[r].value);return t}function P(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(1===e.length)return e[0];if(e.length>1)return e.slice(1).reduce(function(e,r){return function e(t,r,i,n){if(!(n<i))return t.concat(r);if(t.length!==r.length)throw new a.m(t.length,r.length);for(var o=[],s=0;s<t.length;s++)o[s]=e(t[s],r[s],i,n+1);return o}(e,r,t,0)},e[0]);throw Error("Wrong number of arguments in function concat")}function D(e,t){for(var r=t.length,i=e.length,n=0;n<i;n++){var o=r-i+n;if(e[n]<t[o]&&e[n]>1||e[n]>t[o])throw Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(i," with size ").concat(e[n]," to size ").concat(t[o]))}}function M(e,t){var r,n,o,s=c(e);if((0,l.J5)(s,t))return e;D(s,t);var a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=t.map(e=>e.length),n=Math.max(...i),o=Array(n).fill(null),s=0;s<t.length;s++)for(var a=t[s],u=i[s],l=0;l<u;l++){var c=n-u+l;a[l]>o[c]&&(o[c]=a[l])}for(var h=0;h<t.length;h++)D(t[h],o);return o}(s,t),u=a.length,h=[...Array(u-s.length).fill(1),...s],d=(0,i.Z)([],e);s.length<u&&(s=c(d=v(d,h)));for(var p=0;p<u;p++)s[p]<a[p]&&(s=c((r=d,n=a[p],o=p,d=P(...Array(n).fill(r),o))));return d}},8385:function(e,t,r){"use strict";function i(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw Error("Integers expected in function bitAnd");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new r(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e}return s(e,t,function(e,t){return e&t})}function n(e){if(e.isFinite()&&!e.isInteger())throw Error("Integer expected in function bitNot");var t=e.constructor,r=t.precision;t.config({precision:1e9});var i=e.plus(new t(1));return i.s=-i.s||null,t.config({precision:r}),i}function o(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw Error("Integers expected in function bitOr");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);var i=new r(-1);return e.isZero()||t.eq(i)||e.eq(t)?t:t.isZero()||e.eq(i)?e:e.isFinite()&&t.isFinite()?s(e,t,function(e,t){return e|t}):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?i:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function s(e,t,r){var i,o,s,u,l,c=e.constructor,h=+(e.s<0),d=+(t.s<0);if(h){i=a(n(e));for(var p=0;p<i.length;++p)i[p]^=1}else i=a(e);if(d){o=a(n(t));for(var f=0;f<o.length;++f)o[f]^=1}else o=a(t);i.length<=o.length?(s=i,u=o,l=h):(s=o,u=i,l=d);var m=s.length,v=u.length,g=1^r(h,d),b=new c(1^g),y=new c(1),x=new c(2),C=c.precision;for(c.config({precision:1e9});m>0;)r(s[--m],u[--v])===g&&(b=b.plus(y)),y=y.times(x);for(;v>0;)r(l,u[--v])===g&&(b=b.plus(y)),y=y.times(x);return c.config({precision:C}),0===g&&(b.s=-b.s),b}function a(e){for(var t=e.d,r=t[0]+"",i=1;i<t.length;++i){for(var n=t[i]+"",o=7-n.length;o--;)n="0"+n;r+=n}for(var s=r.length;"0"===r.charAt(s);)s--;var a=e.e,u=r.slice(0,s+1||1),l=u.length;if(a>0){if(++a>l)for(a-=l;a--;)u+="0";else a<l&&(u=u.slice(0,a)+"."+u.slice(a))}for(var c=[0],h=0;h<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(h++));for(var p=0;p<c.length;++p)c[p]>1&&((null===c[p+1]||void 0===c[p+1])&&(c[p+1]=0),c[p+1]+=c[p]>>1,c[p]&=1)}return c.reverse()}function u(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw Error("Integers expected in function bitXor");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new r(0);var i=new r(-1);return e.eq(i)?n(t):t.eq(i)?n(e):e.isFinite()&&t.isFinite()?s(e,t,function(e,t){return e^t}):e.isFinite()||t.isFinite()?new r(e.isNegative()===t.isNegative()?1/0:-1/0):i}function l(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw Error("Integers expected in function leftShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new r(2).pow(t)):new r(NaN)}function c(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw Error("Integers expected in function rightArithShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new r(2).pow(t)).floor():new r(e.isNegative()?-1:e.isFinite()?0:NaN)}r.d(t,{Mw:function(){return l},Vq:function(){return o},Xc:function(){return n},hi:function(){return i},nN:function(){return u},ti:function(){return c}})},2248:function(e,t,r){"use strict";r.d(t,{CQ:function(){return a},Et:function(){return function e(t,r){(0,i.SW)(t)&&(t=t.valueOf());for(var n=0,o=t.length;n<o;n++){var s=t[n];Array.isArray(s)?e(s,r):r(s)}}},Fh:function(){return function e(t,r,i){return t&&"function"==typeof t.map?t.map(function(t){return e(t,r,i)}):r(t)}},U6:function(){return c},u4:function(){return u}});var i=r(7694),n=r(6896),o=r(5836),s=r(3776);function a(e){for(var t=0;t<e.length;t++)if((0,i.uZ)(e[t]))return!0;return!1}function u(e,t,r){var s=Array.isArray(e)?(0,o.aJ)(e):e.size();if(t<0||t>=s.length)throw new n.c(t,s.length);return(0,i.SW)(e)?e.create(l(e.valueOf(),t,r)):l(e,t,r)}function l(e,t,r){var i,n,o,a;if(t<=0){if(Array.isArray(e[0])){for(i=0,a=(0,s.c)(e),n=[];i<a.length;i++)n[i]=l(a[i],t-1,r);return n}for(i=1,o=e[0];i<e.length;i++)o=r(o,e[i]);return o}for(i=0,n=[];i<e.length;i++)n[i]=l(e[i],t-1,r);return n}function c(e,t,r,i,n,o,s,a,u,l,c){var h,d,p,f,m=e._values,v=e._index,g=e._ptr;if(i)for(d=g[t],p=g[t+1],h=d;h<p;h++)r[f=v[h]]!==o?(r[f]=o,s.push(f),l?(i[f]=u?a(m[h],c):a(c,m[h]),n[f]=o):i[f]=m[h]):(i[f]=u?a(m[h],i[f]):a(i[f],m[h]),n[f]=o);else for(d=g[t],p=g[t+1],h=d;h<p;h++)r[f=v[h]]!==o?(r[f]=o,s.push(f)):n[f]=o}},6886:function(e,t,r){"use strict";r.d(t,{OJ:function(){return l},YF:function(){return n},Z8:function(){return s},nI:function(){return o},rG:function(){return u}});var i=r(6992);function n(e,t){if(c(e)&&a(e,t))return e[t];if("function"==typeof e[t]&&l(e,t))throw Error('Cannot access method "'+t+'" as a property');throw Error('No access to property "'+t+'"')}function o(e,t,r){if(c(e)&&a(e,t))return e[t]=r,r;throw Error('No access to property "'+t+'"')}function s(e,t){return t in e}function a(e,t){return!!e&&"object"==typeof e&&(!!(0,i.nr)(h,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function u(e,t){if(!l(e,t))throw Error('No access to method "'+t+'"');return e[t]}function l(e,t){return!(null==e||"function"!=typeof e[t]||(0,i.nr)(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!(0,i.nr)(d,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function c(e){return"object"==typeof e&&e&&e.constructor===Object}var h={length:!0,name:!0},d={toString:!0,valueOf:!0,toLocaleString:!0}},5284:function(e,t,r){"use strict";r.d(t,{d5:function(){return n}});var i=r(6992);function n(e,t,r,n){function s(n){var s=(0,i.W6)(n,t.map(o));return function(e,t,r){if(!t.filter(e=>!(e&&"?"===e[0])).every(e=>void 0!==r[e])){var i=t.filter(e=>void 0===r[e]);throw Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(e=>'"'.concat(e,'"')).join(", "),"."))}}(e,t,n),r(s)}return s.isFactory=!0,s.fn=e,s.dependencies=t.slice().sort(),n&&(s.meta=n),s}function o(e){return e&&"?"===e[0]?e.slice(1):e}},7694:function(e,t,r){"use strict";function i(e){return"number"==typeof e}function n(e){return!!e&&"object"==typeof e&&"function"==typeof e.constructor&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function o(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function s(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function a(e){return e&&!0===e.constructor.prototype.isUnit||!1}function u(e){return"string"==typeof e}r.d(t,{Bp:function(){return S},Cl:function(){return B},FG:function(){return z},Ft:function(){return _},HD:function(){return u},Ig:function(){return L},J_:function(){return x},Kj:function(){return C},Kn:function(){return Z},Lr:function(){return R},Mc:function(){return o},SW:function(){return c},UG:function(){return F},VO:function(){return T},Yz:function(){return E},ZX:function(){return M},Zi:function(){return j},bR:function(){return f},bV:function(){return k},cB:function(){return g},dh:function(){return m},ex:function(){return I},hj:function(){return i},j0:function(){return N},jH:function(){return d},jn:function(){return v},kJ:function(){return l},kM:function(){return Y},l7:function(){return O},l9:function(){return n},mf:function(){return y},nu:function(){return D},o8:function(){return w},qg:function(){return U},sA:function(){return p},tS:function(){return P},uZ:function(){return h},wr:function(){return a},x1:function(){return b},yQ:function(){return s},zh:function(){return A}});var l=Array.isArray;function c(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function h(e){return Array.isArray(e)||c(e)}function d(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function p(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function f(e){return e&&!0===e.constructor.prototype.isRange||!1}function m(e){return e&&!0===e.constructor.prototype.isIndex||!1}function v(e){return"boolean"==typeof e}function g(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function b(e){return e&&!0===e.constructor.prototype.isHelp||!1}function y(e){return"function"==typeof e}function x(e){return e instanceof Date}function C(e){return e instanceof RegExp}function Z(e){return!!(e&&"object"==typeof e&&e.constructor===Object&&!o(e)&&!s(e))}function _(e){return null===e}function w(e){return void 0===e}function E(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function N(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function S(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function A(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function M(e){return D(e)||k(e)&&1===e.args.length&&D(e.args[0])&&"-+~".includes(e.op)}function O(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function T(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function k(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function j(e){return e&&!0===e.isRelationalNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.constructor.prototype.isChain||!1}function Y(e){var t=typeof e;return"object"===t?null===e?"null":n(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}},2187:function(e,t,r){"use strict";r.d(t,{A3:function(){return s},_N:function(){return h},df:function(){return l},dg:function(){return u},hB:function(){return o},ru:function(){return c}});var i=r(6886),n=r(7694);class o{keys(){return Object.keys(this.wrappedObject).values()}get(e){return(0,i.YF)(this.wrappedObject,e)}set(e,t){return(0,i.nI)(this.wrappedObject,e,t),this}has(e){return(0,i.Z8)(this.wrappedObject,e)}entries(){return a(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}constructor(e){this.wrappedObject=e}}class s{get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return a(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}constructor(e,t,r){this.a=e,this.b=t,this.bKeys=r}}function a(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function u(){return new Map}function l(e){if(!e)return u();if(h(e))return e;if((0,n.Kn)(e))return new o(e);throw Error("createMap can create maps from objects or Maps")}function c(e){if(e instanceof o)return e.wrappedObject;var t={};for(var r of e.keys()){var n=e.get(r);(0,i.nI)(t,r,n)}return t}function h(e){return!!e&&(e instanceof Map||e instanceof o||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}},4986:function(e,t,r){"use strict";function i(){throw Error('No "bignumber" implementation available')}function n(){throw Error('No "fraction" implementation available')}function o(){throw Error('No "matrix" implementation available')}r.d(t,{R3:function(){return i},kX:function(){return o},nG:function(){return n}})},9737:function(e,t,r){"use strict";r.d(t,{AE:function(){return S},C8:function(){return w},FH:function(){return m},JG:function(){return A},Kr:function(){return u},RI:function(){return C},R_:function(){return N},U:function(){return n},Vf:function(){return _},WU:function(){return d},Xx:function(){return o},__:function(){return Z},eK:function(){return l},f9:function(){return E},k3:function(){return s},mv:function(){return a},nz:function(){return y},t$:function(){return c},uR:function(){return p}});var i=r(7694);function n(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var o=Math.sign||function(e){return e>0?1:e<0?-1:0},s=Math.log2||function(e){return Math.log(e)/Math.LN2},a=Math.log10||function(e){return Math.log(e)/Math.LN10},u=Math.log1p||function(e){return Math.log(e+1)},l=Math.cbrt||function(e){if(0===e)return e;var t,r=e<0;return r&&(e=-e),isFinite(e)?(t=Math.exp(Math.log(e)/3),t=(e/(t*t)+2*t)/3):t=e,r?-t:t},c=Math.expm1||function(e){return e>=2e-4||e<=-.0002?Math.exp(e)-1:e+e*e/2+e*e*e/6};function h(e,t,r){var i="";if(r){if(r<1)throw Error("size must be in greater than 0");if(!n(r))throw Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!n(e))throw Error("Value must be an integer");e<0&&(e+=2**r),i="i".concat(r)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat({2:"0b",8:"0o",16:"0x"}[t]).concat(e.toString(t)).concat(i)}function d(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:n,wordSize:o}=p(t);switch(r){case"fixed":return m(e,n);case"exponential":return v(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=g(f(e),t),n=r.exponent,o=r.coefficients,s=n%3==0?n:n<0?n-3-n%3:n-n%3;if((0,i.hj)(t))for(;t>o.length||n-s+1>o.length;)o.push(0);else for(var a=Math.abs(n-s)-(o.length-1),u=0;u<a;u++)o.push(0);for(var l=Math.abs(n-s),c=1;l>0;)c++,l--;var h=o.slice(c).join(""),d=(0,i.hj)(t)&&h.length||h.match(/[1-9]/)?"."+h:"",p=o.slice(0,c).join("")+d+"e"+(n>=0?"+":"")+s.toString();return r.sign+p}(e,n);case"bin":return h(e,2,o);case"oct":return h(e,8,o);case"hex":return h(e,16,o);case"auto":return(function(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var i=D(null==r?void 0:r.lowerExp,-3),n=D(null==r?void 0:r.upperExp,5),o=f(e),s=t?g(o,t):o;if(s.exponent<i||s.exponent>=n)return v(e,t);var a=s.coefficients,u=s.exponent;a.length<t&&(a=a.concat(b(t-a.length))),a=a.concat(b(u-a.length+1+(a.length<t?t-a.length:0))),a=b(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),s.sign+a.join("")})(e,n,t).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function p(e){var t,r,n="auto";if(void 0!==e){if((0,i.hj)(e))t=e;else if((0,i.l9)(e))t=e.toNumber();else if((0,i.Kn)(e))void 0!==e.precision&&(t=P(e.precision,()=>{throw Error('Option "precision" must be a number or BigNumber')})),void 0!==e.wordSize&&(r=P(e.wordSize,()=>{throw Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(n=e.notation);else throw Error("Unsupported type of options, number, BigNumber, or object expected")}return{notation:n,precision:t,wordSize:r}}function f(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw SyntaxError("Invalid number "+e);var r=t[1],i=t[2],n=parseFloat(t[4]||"0"),o=i.indexOf(".");n+=-1!==o?o-1:i.length-1;var s=i.replace(".","").replace(/^0*/,function(e){return n-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)});return 0===s.length&&(s.push(0),n++),{sign:r,coefficients:s,exponent:n}}function m(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=f(e),i="number"==typeof t?g(r,r.exponent+1+t):r,n=i.coefficients,o=i.exponent+1,s=o+(t||0);return n.length<s&&(n=n.concat(b(s-n.length))),o<0&&(n=b(-o+1).concat(n),o=1),o<n.length&&n.splice(o,0,0===o?"0.":"."),i.sign+n.join("")}function v(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=f(e),i=t?g(r,t):r,n=i.coefficients,o=i.exponent;n.length<t&&(n=n.concat(b(t-n.length)));var s=n.shift();return i.sign+s+(n.length>0?"."+n.join(""):"")+"e"+(o>=0?"+":"")+o}function g(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=r.coefficients;t<=0;)i.unshift(0),r.exponent++,t++;if(i.length>t&&i.splice(t,i.length-t)[0]>=5){var n=t-1;for(i[n]++;10===i[n];)i.pop(),0===n&&(i.unshift(0),r.exponent++,n++),n--,i[n]++}return r}function b(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function y(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var x=Number.EPSILON||2220446049250313e-31;function C(e,t,r){if(null==r)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=Math.abs(e-t);return i<=x||i<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}var Z=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},_=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},w=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},E=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},N=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},S=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function A(e,t){return(e>0||!(e<0)&&1/e==1/0)^(t>0||!(t<0)&&1/t==1/0)?-e:e}function P(e,t){return(0,i.hj)(e)?e:(0,i.l9)(e)?e.toNumber():void t()}function D(e,t){return(0,i.hj)(e)?e:(0,i.l9)(e)?e.toNumber():t}},6992:function(e,t,r){"use strict";r.d(t,{J5:function(){return function e(t,r){var i,n,o;if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(n=0,o=t.length;n<o;n++)if(!e(t[n],r[n]))return!1;return!0}if("function"==typeof t||!(t instanceof Object))return t===r;if(Array.isArray(r)||!(r instanceof Object))return!1;for(i in t)if(!(i in r)||!e(t[i],r[i]))return!1;for(i in r)if(!(i in t))return!1;return!0}},Vo:function(){return o},W6:function(){return a},d9:function(){return function e(t){var r=typeof t;if("number"===r||"string"===r||"boolean"===r||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map(function(t){return e(t)});if(t instanceof Date)return new Date(t.valueOf());if((0,i.l9)(t))return t;if((0,i.Kn)(t))return function(e,t){var r={};for(var i in e)s(e,i)&&(r[i]=t(e[i]));return r}(t,e);throw TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}},l7:function(){return n},nr:function(){return s}});var i=r(7694);function n(e,t){for(var r in t)s(t,r)&&(e[r]=t[r]);return e}function o(e,t,r){var i,n=!0;Object.defineProperty(e,t,{get:function(){return n&&(i=r(),n=!1),i},set:function(e){i=e,n=!1},configurable:!0,enumerable:!0})}function s(e,t){return e&&Object.hasOwnProperty.call(e,t)}function a(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],o=e[n];void 0!==o&&(r[n]=o)}return r}},732:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});var i=/\$([\w.]+)/g},9790:function(e,t,r){"use strict";r.d(t,{cd:function(){return d},pn:function(){return u},YU:function(){return h},WU:function(){return function e(t,r){var u=function(t,r){return"number"==typeof t?(0,n.WU)(t,r):(0,i.l9)(t)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:i,wordSize:u}=(0,n.uR)(t);switch(r){case"fixed":return e.toFixed(i);case"exponential":return s(e,i);case"engineering":return c=(l=e.e)%3==0?l:l<0?l-3-l%3:l-l%3,-1!==(h=e.mul(Math.pow(10,-c)).toPrecision(i)).indexOf("e")&&(h=new e.constructor(h).toFixed()),h+"e"+(l>=0?"+":"")+c.toString();case"bin":return o(e,2,u);case"oct":return o(e,8,u);case"hex":return o(e,16,u);case"auto":var l,c,h,d=a(null==t?void 0:t.lowerExp,-3),p=a(null==t?void 0:t.upperExp,5);if(e.isZero())return"0";var f=e.toSignificantDigits(i),m=f.e;return(m>=d&&m<p?f.toFixed():s(e,i)).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,r):t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d?r&&"decimal"===r.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?function t(r,i){if(!Array.isArray(r))return e(r,i);for(var n="[",o=r.length,s=0;s<o;s++)0!==s&&(n+=", "),n+=t(r[s],i);return n+"]"}(t,r):(0,i.HD)(t)?l(t):"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(r):t&&t.toString(r)!==({}).toString()?t.toString(r):"{"+Object.keys(t).map(i=>l(i)+": "+e(t[i],r)).join(", ")+"}":String(t)}(t,r);return r&&"object"==typeof r&&"truncate"in r&&u.length>r.truncate?u.substring(0,r.truncate-3)+"...":u}},Pz:function(){return l}});var i=r(7694),n=r(9737);function o(e,t,r){var i=new e.constructor(2),o="";if(r){if(r<1)throw Error("size must be in greater than 0");if(!(0,n.U)(r))throw Error("size must be an integer");if(e.greaterThan(i.pow(r-1).sub(1))||e.lessThan(i.pow(r-1).mul(-1)))throw Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(r))),o="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(o);case 8:return"".concat(e.toOctal()).concat(o);case 16:return"".concat(e.toHexadecimal()).concat(o);default:throw Error("Base ".concat(t," not supported "))}}function s(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function a(e,t){return(0,i.hj)(e)?e:(0,i.l9)(e)?e.toNumber():t}function u(e,t){var r=e.length-t.length,i=e.length;return e.substring(r,i)===t}function l(e){for(var t=String(e),r="",i=0;i<t.length;){var n=t.charAt(i);r+=n in c?c[n]:n,i++}return'"'+r+'"'}var c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function h(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(e,t){if(!(0,i.HD)(e))throw TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,i.kM)(e)+", index: 0)");if(!(0,i.HD)(t))throw TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,i.kM)(t)+", index: 1)");return e===t?0:e>t?1:-1}},3776:function(e,t,r){"use strict";function i(e){var t,r,i=e.length,n=e[0].length,o=[];for(r=0;r<n;r++){var s=[];for(t=0;t<i;t++)s.push(e[t][r]);o.push(s)}return o}r.d(t,{c:function(){return i}})}}]);