(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{1239:function(t,e){var r;/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(i){"use strict";var n=Math.cosh||function(t){return 1e-9>Math.abs(t)?1-t:(Math.exp(t)+Math.exp(-t))*.5},o=Math.sinh||function(t){return 1e-9>Math.abs(t)?t:(Math.exp(t)-Math.exp(-t))*.5},s=function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)},a=function(t,e){var r=Math.abs(t),i=Math.abs(e);return r<3e3&&i<3e3?Math.sqrt(r*r+i*i):(r<i?(r=i,i=t/e):i=e/t,r*Math.sqrt(1+i*i))},u=function(){throw SyntaxError("Invalid Param")};function h(t,e){var r=Math.abs(t),i=Math.abs(e);return 0===t?Math.log(i):0===e?Math.log(r):r<3e3&&i<3e3?.5*Math.log(t*t+e*e):.5*Math.log((t/=2)*t+(e/=2)*e)+Math.LN2}var l=function(t,e){var r={re:0,im:0};if(null==t)r.re=r.im=0;else if(void 0!==e)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return c.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return c.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else 2===t.length?(r.re=t[0],r.im=t[1]):u();break;case"string":r.im=r.re=0;var i=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),n=1,o=0;null===i&&u();for(var s=0;s<i.length;s++){var a=i[s];" "===a||"	"===a||"\n"===a||("+"===a?n++:"-"===a?o++:("i"===a||"I"===a?(n+o===0&&u()," "===i[s+1]||isNaN(i[s+1])?r.im+=parseFloat((o%2?"-":"")+"1"):(r.im+=parseFloat((o%2?"-":"")+i[s+1]),s++)):((n+o===0||isNaN(a))&&u(),"i"===i[s+1]||"I"===i[s+1]?(r.im+=parseFloat((o%2?"-":"")+a),s++):r.re+=parseFloat((o%2?"-":"")+a)),n=o=0))}n+o>0&&u();break;case"number":r.im=0,r.re=t;break;default:u()}return isNaN(r.re)||isNaN(r.im),r};function c(t,e){if(!(this instanceof c))return new c(t,e);var r=l(t,e);this.re=r.re,this.im=r.im}c.prototype={re:0,im:0,sign:function(){var t=this.abs();return new c(this.re/t,this.im/t)},add:function(t,e){var r=new c(t,e);return this.isInfinite()&&r.isInfinite()?c.NAN:this.isInfinite()||r.isInfinite()?c.INFINITY:new c(this.re+r.re,this.im+r.im)},sub:function(t,e){var r=new c(t,e);return this.isInfinite()&&r.isInfinite()?c.NAN:this.isInfinite()||r.isInfinite()?c.INFINITY:new c(this.re-r.re,this.im-r.im)},mul:function(t,e){var r=new c(t,e);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?c.NAN:this.isInfinite()||r.isInfinite()?c.INFINITY:0===r.im&&0===this.im?new c(this.re*r.re,0):new c(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){var r,i,n=new c(t,e);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return c.NAN;if(this.isInfinite()||n.isZero())return c.INFINITY;if(this.isZero()||n.isInfinite())return c.ZERO;t=this.re,e=this.im;var o=n.re,s=n.im;return 0===s?new c(t/o,e/o):Math.abs(o)<Math.abs(s)?(i=o/s,r=o*i+s,new c((t*i+e)/r,(e*i-t)/r)):(i=s/o,r=s*i+o,new c((t+e*i)/r,(e-t*i)/r))},pow:function(t,e){var r=new c(t,e);if(t=this.re,e=this.im,r.isZero())return c.ONE;if(0===r.im){if(0===e&&t>0)return new c(Math.pow(t,r.re),0);if(0===t)switch((r.re%4+4)%4){case 0:return new c(Math.pow(e,r.re),0);case 1:return new c(0,Math.pow(e,r.re));case 2:return new c(-Math.pow(e,r.re),0);case 3:return new c(0,-Math.pow(e,r.re))}}if(0===t&&0===e&&r.re>0&&r.im>=0)return c.ZERO;var i=Math.atan2(e,t),n=h(t,e);return new c((t=Math.exp(r.re*n-r.im*i))*Math.cos(e=r.im*n+r.re*i),t*Math.sin(e))},sqrt:function(){var t,e,r=this.re,i=this.im,n=this.abs();if(r>=0){if(0===i)return new c(Math.sqrt(r),0);t=.5*Math.sqrt(2*(n+r))}else t=Math.abs(i)/Math.sqrt(2*(n-r));return e=r<=0?.5*Math.sqrt(2*(n-r)):Math.abs(i)/Math.sqrt(2*(n+r)),new c(t,i<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new c(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new c(Math.expm1(t)*Math.cos(e)+s(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new c(h(t,e),Math.atan2(e,t))},abs:function(){return a(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new c(Math.sin(t)*n(e),Math.cos(t)*o(e))},cos:function(){var t=this.re,e=this.im;return new c(Math.cos(t)*n(e),-Math.sin(t)*o(e))},tan:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)+n(e);return new c(Math.sin(t)/r,o(e)/r)},cot:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)-n(e);return new c(-Math.sin(t)/r,o(e)/r)},sec:function(){var t=this.re,e=this.im,r=.5*n(2*e)+.5*Math.cos(2*t);return new c(Math.cos(t)*n(e)/r,Math.sin(t)*o(e)/r)},csc:function(){var t=this.re,e=this.im,r=.5*n(2*e)-.5*Math.cos(2*t);return new c(Math.sin(t)*n(e)/r,-Math.cos(t)*o(e)/r)},asin:function(){var t=this.re,e=this.im,r=new c(e*e-t*t+1,-2*t*e).sqrt(),i=new c(r.re-e,r.im+t).log();return new c(i.im,-i.re)},acos:function(){var t=this.re,e=this.im,r=new c(e*e-t*t+1,-2*t*e).sqrt(),i=new c(r.re-e,r.im+t).log();return new c(Math.PI/2-i.im,i.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new c(0,1/0);if(-1===e)return new c(0,-1/0)}var r=t*t+(1-e)*(1-e),i=new c((1-e*e-t*t)/r,-2*t/r).log();return new c(-.5*i.im,.5*i.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new c(Math.atan2(1,t),0);var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).atan():new c(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(0,1/0);var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).acos():new c(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(Math.PI/2,1/0);var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).asin():new c(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new c(o(t)*Math.cos(e),n(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new c(n(t)*Math.cos(e),o(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,r=n(t)+Math.cos(e);return new c(o(t)/r,Math.sin(e)/r)},coth:function(){var t=2*this.re,e=2*this.im,r=n(t)-Math.cos(e);return new c(o(t)/r,-Math.sin(e)/r)},csch:function(){var t=this.re,e=this.im,r=Math.cos(2*e)-n(2*t);return new c(-2*o(t)*Math.cos(e)/r,2*n(t)*Math.sin(e)/r)},sech:function(){var t=this.re,e=this.im,r=Math.cos(2*e)+n(2*t);return new c(2*n(t)*Math.cos(e)/r,-2*o(t)*Math.sin(e)/r)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else{var e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){var t=this.re,e=this.im,r=1-t,i=1+t,n=r*r+e*e,o=0!==n?new c((i*r-e*e)/n,(e*r+i*e)/n):new c(-1!==t?t/0:0,0!==e?e/0:0),s=o.re;return o.re=h(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,t>1&&0===e&&(o.im=-o.im),o},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(0,Math.PI/2);var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).atanh():new c(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new c(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).asinh():new c(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return c.INFINITY;var r=t*t+e*e;return 0!==r?new c(t/r,-e/r).acosh():new c(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var t=this.re,e=this.im,r=t*t+e*e;return new c(t/r,-e/r)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new c(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new c(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new c(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var r=new c(t,e);return Math.abs(r.re-this.re)<=c.EPSILON&&Math.abs(r.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<c.EPSILON&&(t=0),Math.abs(e)<c.EPSILON&&(e=0),0===e)?r+t:(0!==t?(r+=t+" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),1!==e&&(r+=e),r+"i")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,void 0!==(r=(function(){return c}).apply(e,[]))&&(t.exports=r)}(0)},7852:function(t){"use strict";t.exports=function t(e,r){var i,n,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,h=/^0/,l=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},c=l(e).replace(s,"")||"",d=l(r).replace(s,"")||"",f=c.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=d.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(c.match(u),16)||1!==f.length&&c.match(a)&&Date.parse(c),v=parseInt(d.match(u),16)||m&&d.match(a)&&Date.parse(d)||null;if(v){if(m<v)return -1;if(m>v)return 1}for(var g=0,b=Math.max(f.length,p.length);g<b;g++){if(i=!(f[g]||"").match(h)&&parseFloat(f[g])||f[g]||0,n=!(p[g]||"").match(h)&&parseFloat(p[g])||p[g]||0,isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return -1;if(i>n)return 1}return 0}},2697:function(t,e,r){"use strict";var i=r(7901),n=r(1013);i.Z.Composition=function(t){var e,r=this,i=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],o=function(t){return function(){var e;for(e in r.elements)r.elements.hasOwnProperty(e)&&n.Z.exists(r.elements[e][t])&&r.elements[e][t].apply(r.elements[e],arguments);return r}};for(e=0;e<i.length;e++)this[i[e]]=o(i[e]);for(e in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},t)t.hasOwnProperty(e)&&this.add(e,t[e]);this.dump=!0,this.subs={}},i.Z.extend(i.Z.Composition.prototype,{add:function(t,e){return!!(!n.Z.exists(this[t])&&n.Z.exists(e))&&(n.Z.exists(e.id)?this.elements[e.id]=e:this.elements[t]=e,n.Z.exists(e.name)&&(this.elementsByName[e.name]=e),e.on("attribute:name",this.nameListener,this),this.objectsList.push(e),this[t]=e,this.methodMap[t]=e,!0)},remove:function(t){var e,r=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[t].id){r=!0;break}return r&&(delete this.elements[this[t].id],delete this[t]),r},nameListener:function(t,e,r){delete this.elementsByName[t],this.elementsByName[e]=r},select:function(t){return n.Z.exists(i.Z.Board)?i.Z.Board.prototype.select.call(this,t):new i.Z.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t,e={};for(t in this.subs)this.subs.hasOwnProperty(t)&&(e[t]=this.subs[t].visProp);return this.attr}}),e.Z=i.Z.Composition},2840:function(t,e,r){"use strict";var i,n=r(7901),o="1.7.0";i={version:o,licenseText:"JSXGraph v"+o+" Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8},n.Z.extendConstants(n.Z,i),e.Z=i},9401:function(t,e,r){"use strict";var i=r(7901),n=r(2840),o=r(6638),s=r(1013),a=r(4204);i.Z.Coords=function(t,e,r,i){this.board=r,this.usrCoords=[],this.scrCoords=[],this.emitter=!s.Z.exists(i)||i,this.emitter&&o.Z.eventify(this),this.setCoordinates(t,e,!1,!0)},i.Z.extend(i.Z.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>a.Z.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(t){var e=Math.round,r=this.board,i=this.usrCoords,n=r.origin.scrCoords;!0===t?(this.scrCoords[0]=e(i[0]),this.scrCoords[1]=e(i[0]*n[1]+i[1]*r.unitX),this.scrCoords[2]=e(i[0]*n[2]-i[2]*r.unitY)):(this.scrCoords[0]=i[0],this.scrCoords[1]=i[0]*n[1]+i[1]*r.unitX,this.scrCoords[2]=i[0]*n[2]-i[2]*r.unitY)},screen2usr:function(){var t=this.board.origin.scrCoords,e=this.scrCoords,r=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(e[1]-t[1])/r.unitX,this.usrCoords[2]=(t[2]-e[2])/r.unitY},distance:function(t,e){var r,i,o=this.usrCoords,s=this.scrCoords;return t!==n.Z.COORDS_BY_USER?(r=e.scrCoords,a.Z.hypot(s[1]-r[1],s[2]-r[2])):(r=e.usrCoords,(i=o[0]-r[0])*i>a.Z.eps*a.Z.eps)?Number.POSITIVE_INFINITY:a.Z.hypot(o[1]-r[1],o[2]-r[2])},setCoordinates:function(t,e,r,i){var o=this.usrCoords,s=this.scrCoords,a=[o[0],o[1],o[2]],u=[s[0],s[1],s[2]];return t===n.Z.COORDS_BY_USER?(2===e.length?(o[0]=1,o[1]=e[0],o[2]=e[1]):(o[0]=e[0],o[1]=e[1],o[2]=e[2],this.normalizeUsrCoords()),this.usr2screen(r)):(2===e.length?(s[1]=e[0],s[2]=e[1]):(s[1]=e[1],s[2]=e[2]),this.screen2usr()),this.emitter&&!i&&(u[1]!==s[1]||u[2]!==s[2])&&this.triggerEventHandlers(["update"],[a,u]),this},copy:function(t,e){return void 0===e&&(e=0),this[t].slice(e)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>a.Z.eps},__evt__update:function(t,e){},__evt:function(){}}),e.Z=i.Z.Coords},7158:function(t,e,r){"use strict";var i=r(7901),n=r(4204),o=r(7895),s=r(6692),a=r(4401),u=r(9401),h=r(2840),l=r(1013);i.Z.CoordsElement=function(t,e){var r;for(l.Z.exists(t)||(t=[1,0,0]),r=0;r<t.length;++r)t[r]=parseFloat(t[r]);this.coords=new u.Z(h.Z.COORDS_BY_USER,t,this.board),this.initialCoords=new u.Z(h.Z.COORDS_BY_USER,t,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=l.Z.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),l.Z.exists(this.element)&&this.addAnchor(t,e),this.isDraggable=!0},i.Z.extend(i.Z.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(t){return this.needsUpdate&&(l.Z.exists(t)||(t=!1),l.Z.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===h.Z.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(t=!1),t?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(t)),this},updateGlider:function(){var t,e,r,i,s,a,c,d,f,p,m,v,g,b,y,C,Z,x,_,E=2*Math.PI,w=!1,N=this.slideObject,S=[];if(this.needsUpdateFromParent=!1,N.elementClass===h.Z.OBJECT_CLASS_CIRCLE)l.Z.evaluate(this.visProp.isgeonext)&&(E=1),g=o.Z.projectPointToCircle(this,N,this.board),b=o.Z.rad([N.center.X()+1,N.center.Y()],N.center,this)/E;else if(N.elementClass===h.Z.OBJECT_CLASS_LINE){if(this.onPolygon){if(r=N.point1.coords.usrCoords,Math.abs(e=(i=N.point2.coords.usrCoords)[t=1]-r[t])<n.Z.eps&&(e=i[t=2]-r[t]),a=(o.Z.projectPointToLine(this,N,this.board).usrCoords[t]-r[t])/e,s=N.parentPolygon,a<0){for(t=0;t<s.borders.length;t++)if(N===s.borders[t]){N=s.borders[(t-1+s.borders.length)%s.borders.length];break}}else if(a>1){for(t=0;t<s.borders.length;t++)if(N===s.borders[t]){N=s.borders[(t+1+s.borders.length)%s.borders.length];break}}N.id!==this.slideObject.id&&(this.slideObject=N)}r=N.point1.coords,i=N.point2.coords,(e=r.distance(h.Z.COORDS_BY_USER,i))<n.Z.eps?(g=r,w=!0,b=0):(g=o.Z.projectPointToLine(this,N,this.board),r=r.usrCoords.slice(0),Math.abs((i=i.usrCoords.slice(0))[0])<n.Z.eps?(Math.abs(e=i[t=1])<n.Z.eps&&(e=i[t=2]),b=((e=(g.usrCoords[t]-r[t])/e)>=0?1:-1)*(e=Math.abs(e))/(e+1)):Math.abs(r[0])<n.Z.eps?(Math.abs(e=r[t=1])<n.Z.eps&&(e=r[t=2]),b=(e=(g.usrCoords[t]-i[t])/e)<0?(1-2*e)/(1-e):1/(e+1)):(Math.abs(e=i[t=1]-r[t])<n.Z.eps&&(e=i[t=2]-r[t]),b=(g.usrCoords[t]-r[t])/e)),null!==(C=this.findClosestSnapValue(b))?(b=(l.Z.evaluate(this.visProp.snapvalues)[C]-this._smin)/(this._smax-this._smin),this.update(!0)):(y=l.Z.evaluate(this.visProp.snapwidth),l.Z.evaluate(y)>0&&Math.abs(this._smax-this._smin)>=n.Z.eps&&(b=(Math.round(((b=Math.max(Math.min(b,1),0))*(this._smax-this._smin)+this._smin)/y)*y-this._smin)/(this._smax-this._smin),this.update(!0))),r=N.point1.coords,!l.Z.evaluate(N.visProp.straightfirst)&&Math.abs(r.usrCoords[0])>n.Z.eps&&b<0&&(g=r,w=!0,b=0),i=N.point2.coords,!l.Z.evaluate(N.visProp.straightlast)&&Math.abs(i.usrCoords[0])>n.Z.eps&&b>1&&(g=i,w=!0,b=1)}else if(N.type===h.Z.OBJECT_TYPE_TURTLE)this.updateConstraint(),g=(Z=o.Z.projectPointToTurtle(this,N,this.board))[0],b=Z[1];else if(N.elementClass===h.Z.OBJECT_CLASS_CURVE){if(N.type===h.Z.OBJECT_TYPE_ARC||N.type===h.Z.OBJECT_TYPE_SECTOR)g=o.Z.projectPointToCircle(this,N,this.board),c=o.Z.rad(N.radiuspoint,N.center,this),d=0,f=o.Z.rad(N.radiuspoint,N.center,N.anglepoint),b=c,("minor"===(y=l.Z.evaluate(N.visProp.selection))&&f>Math.PI||"major"===y&&f<Math.PI)&&(d=f,f=2*Math.PI),(c<d||c>f)&&(b=f,(c<d&&c>.5*d||c>f&&c>.5*f+Math.PI)&&(b=d),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),E=f-d,this.visProp.isgeonext&&(E=1),Math.abs(E)>n.Z.eps&&(b/=E);else if(this.updateConstraint(),N.transformations.length>0){for(_=!1,(Z=N.getTransformationSource())[0]&&(_=Z[0],S.push(N),S.push(Z[1]));Z[0]&&l.Z.exists(Z[1]._transformationSource);)Z=Z[1].getTransformationSource(),S.push(Z[1]);if(x=this.coords.usrCoords,_){for(t=0;t<S.length;t++)S[t].updateTransformMatrix(),v=n.Z.inverse(S[t].transformMat),x=n.Z.matVecMult(v,x);for(p=new u.Z(h.Z.COORDS_BY_USER,x,this.board).usrCoords,x=(m=o.Z.projectCoordsToCurve(p[1],p[2],this.position||0,S[S.length-1],this.board))[0].usrCoords,t=S.length-2;t>=0;t--)x=n.Z.matVecMult(S[t].transformMat,x);m[0]=new u.Z(h.Z.COORDS_BY_USER,x,this.board)}else N.updateTransformMatrix(),v=n.Z.inverse(N.transformMat),x=n.Z.matVecMult(v,x),p=new u.Z(h.Z.COORDS_BY_USER,x,this.board).usrCoords,m=o.Z.projectCoordsToCurve(p[1],p[2],this.position||0,N,this.board);g=m[0],b=m[1]}else g=(Z=o.Z.projectPointToCurve(this,N,this.board))[0],b=Z[1]}else l.Z.isPoint(N)&&(g=o.Z.projectPointToPoint(this,N,this.board),b=this.position);this.coords.setCoordinates(h.Z.COORDS_BY_USER,g.usrCoords,w),this.position=b},findClosestSnapValue:function(t){var e,r,i,o,s=null;if(i=l.Z.evaluate(this.visProp.snapvalues),o=l.Z.evaluate(this.visProp.snapvaluedistance),l.Z.isArray(i)&&Math.abs(this._smax-this._smin)>=n.Z.eps&&o>0)for(e=0;e<i.length;e++)(r=Math.abs(t*(this._smax-this._smin)+this._smin-i[e]))<o&&(o=r,s=e);return s},updateGliderFromParent:function(){var t,e,r,i,s,a,c,d,f,p,m,v,g=this.slideObject,b=[],y=2*Math.PI;if(!this.needsUpdateFromParent){this.needsUpdateFromParent=!0;return}if(g.elementClass===h.Z.OBJECT_CLASS_CIRCLE)r=g.Radius(),l.Z.evaluate(this.visProp.isgeonext)&&(y=1),s=[g.center.X()+r*Math.cos(this.position*y),g.center.Y()+r*Math.sin(this.position*y)];else if(g.elementClass===h.Z.OBJECT_CLASS_LINE)t=g.point1.coords.usrCoords,e=g.point2.coords.usrCoords,0===t[0]&&0===t[1]&&0===t[2]||0===e[0]&&0===e[1]&&0===e[2]?s=[0,0,0]:Math.abs(e[0])<n.Z.eps?(i=Math.min(Math.abs(this.position),1-n.Z.eps),i/=1-i,this.position<0&&(i=-i),s=[t[0]+i*e[0],t[1]+i*e[1],t[2]+i*e[2]]):Math.abs(t[0])<n.Z.eps?(i=(i=Math.min(i=Math.max(this.position,n.Z.eps),2-n.Z.eps))>1?(i-1)/(i-2):(1-i)/i,s=[e[0]+i*t[0],e[1]+i*t[1],e[2]+i*t[2]]):(i=this.position,s=[t[0]+i*(e[0]-t[0]),t[1]+i*(e[1]-t[1]),t[2]+i*(e[2]-t[2])]);else if(g.type===h.Z.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(h.Z.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),this.updateConstraint(),s=o.Z.projectPointToTurtle(this,g,this.board)[0].usrCoords;else if(g.elementClass===h.Z.OBJECT_CLASS_CURVE){for(d=!1,(a=g.getTransformationSource())[0]&&(d=a[0],b.push(g),b.push(a[1]));a[0]&&l.Z.exists(a[1]._transformationSource);)a=a[1].getTransformationSource(),b.push(a[1]);if(d?this.coords.setCoordinates(h.Z.COORDS_BY_USER,[b[b.length-1].Z(this.position),b[b.length-1].X(this.position),b[b.length-1].Y(this.position)]):this.coords.setCoordinates(h.Z.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),g.type===h.Z.OBJECT_TYPE_ARC||g.type===h.Z.OBJECT_TYPE_SECTOR)f=o.Z.rad([g.center.X()+1,g.center.Y()],g.center,g.radiuspoint),p=0,v=o.Z.rad(g.radiuspoint,g.center,g.anglepoint),("minor"===g.visProp.selection&&v>Math.PI||"major"===g.visProp.selection&&v<Math.PI)&&(p=v,v=2*Math.PI),y=v-p,l.Z.evaluate(this.visProp.isgeonext)&&(y=1),((m=this.position*y)<p||m>v)&&(((m=v)<p&&m>.5*p||m>v&&m>.5*v+Math.PI)&&(m=p),this.position=m,Math.abs(y)>n.Z.eps&&(this.position/=y)),r=g.Radius(),s=[g.center.X()+r*Math.cos(this.position*y+f),g.center.Y()+r*Math.sin(this.position*y+f)];else if(this.updateConstraint(),d)for(s=o.Z.projectPointToCurve(this,b[b.length-1],this.board)[0].usrCoords,c=b.length-2;c>=0;c--)s=new u.Z(h.Z.COORDS_BY_USER,n.Z.matVecMult(b[c].transformMat,s),this.board).usrCoords;else s=o.Z.projectPointToCurve(this,g,this.board)[0].usrCoords}else l.Z.isPoint(g)&&(s=o.Z.projectPointToPoint(this,g,this.board).usrCoords);this.coords.setCoordinates(h.Z.COORDS_BY_USER,s,!1)},updateRendererGeneric:function(t){return this.needsUpdate&&this.board.renderer&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>n.Z.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[t](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(t){return t?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(t){return this.isReal&&t.isReal?this.coords.distance(h.Z.COORDS_BY_USER,t.coords):NaN},snapToGrid:function(t){return this.handleSnapToGrid(t)},handleSnapToPoints:function(t){var e,r,i,n,s,a,u,c,d=0,f=1/0,p=null,m=l.Z.evaluate(this.visProp.ignoredsnaptopoints),v=!1;if(n=this.board.objectsList.length,m&&(u=m.length),l.Z.evaluate(this.visProp.snaptopoints)||t){for(e=0,s=l.Z.evaluate(this.visProp.attractorunit),a=l.Z.evaluate(this.visProp.attractordistance);e<n;e++){if(r=this.board.objectsList[e],m){for(c=0,v=!1;c<u;c++)if(r===this.board.select(m[c])){v=!0;break}if(v)continue}l.Z.isPoint(r)&&r!==this&&r.visPropCalc.visible&&(i=o.Z.projectPointToPoint(this,r,this.board),(d="screen"===s?i.distance(h.Z.COORDS_BY_SCREEN,this.coords):i.distance(h.Z.COORDS_BY_USER,this.coords))<a&&d<f&&(f=d,p=i))}null!==p&&this.coords.setCoordinates(h.Z.COORDS_BY_USER,p.usrCoords)}return this},snapToPoints:function(t){return this.handleSnapToPoints(t)},handleAttractors:function(){var t,e,r,i,n=0,s=l.Z.evaluate(this.visProp.attractorunit),a=l.Z.evaluate(this.visProp.attractordistance),c=l.Z.evaluate(this.visProp.snatchdistance),d=l.Z.evaluate(this.visProp.attractors),f=d.length;if(0!==a){for(t=0;t<f;t++)if(e=this.board.select(d[t]),l.Z.exists(e)&&e!==this){if(l.Z.isPoint(e)?r=o.Z.projectPointToPoint(this,e,this.board):e.elementClass===h.Z.OBJECT_CLASS_LINE?(i=o.Z.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),r=!l.Z.evaluate(e.visProp.straightfirst)&&i[1]<0?e.point1.coords:!l.Z.evaluate(e.visProp.straightlast)&&i[1]>1?e.point2.coords:new u.Z(h.Z.COORDS_BY_USER,i[0],this.board)):e.elementClass===h.Z.OBJECT_CLASS_CIRCLE?r=o.Z.projectPointToCircle(this,e,this.board):e.elementClass===h.Z.OBJECT_CLASS_CURVE?r=o.Z.projectPointToCurve(this,e,this.board)[0]:e.type===h.Z.OBJECT_TYPE_TURTLE?r=o.Z.projectPointToTurtle(this,e,this.board)[0]:e.type===h.Z.OBJECT_TYPE_POLYGON&&(r=new u.Z(h.Z.COORDS_BY_USER,o.Z.projectCoordsToPolygon(this.coords.usrCoords,e),this.board)),(n="screen"===s?r.distance(h.Z.COORDS_BY_SCREEN,this.coords):r.distance(h.Z.COORDS_BY_USER,this.coords))<a){this.type===h.Z.OBJECT_TYPE_GLIDER&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)||this.makeGlider(e);break}n>=c&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)&&this.popSlideObject()}return this}},setPositionDirectly:function(t,e){var r,i,o,s,c=this.coords;if(this.relativeCoords)return i=new u.Z(t,e,this.board),l.Z.evaluate(this.visProp.islabel)?(o=a.Z.subtract(i.scrCoords,c.scrCoords),this.relativeCoords.scrCoords[1]+=o[1],this.relativeCoords.scrCoords[2]+=o[2]):(o=a.Z.subtract(i.usrCoords,c.usrCoords),this.relativeCoords.usrCoords[1]+=o[1],this.relativeCoords.usrCoords[2]+=o[2]),this;for(this.coords.setCoordinates(t,e),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),r=this.transformations.length-1;r>=0;r--)t===h.Z.COORDS_BY_SCREEN?s=new u.Z(t,e,this.board).usrCoords:(2===e.length&&(e=[1].concat(e)),s=e),this.initialCoords.setCoordinates(h.Z.COORDS_BY_USER,n.Z.matVecMult(n.Z.inverse(this.transformations[r].matrix),s));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===h.Z.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(t,e){var r;return e=new u.Z(t,e,this.board),r=this.board.create("transform",e.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(r):this.addTransform(this,r),this.prepareUpdate().update(),this},setPosition:function(t,e){return this.setPositionDirectly(t,e)},setGliderPosition:function(t){return this.type===h.Z.OBJECT_TYPE_GLIDER&&(this.position=t,this.board.update()),this},makeGlider:function(t){var e,r,n,o=this.board.select(t),s=!1;if(o.type===h.Z.OBJECT_TYPE_POLYGON){for(r=0,e=Number.MAX_VALUE;r<o.borders.length;r++)(n=i.Z.Math.Geometry.distPointLine(this.coords.usrCoords,o.borders[r].stdform))<e&&(e=n,t=o.borders[r]);o=this.board.select(t),s=!0}if(l.Z.exists(o)){if(o.type===h.Z.OBJECT_TYPE_TICKS)throw Error("JSXGraph: gliders on ticks are not possible.")}else throw Error("JSXGraph: slide object undefined.");return this.slideObject=this.board.select(t),this.slideObjects.push(this.slideObject),this.addParents(t),this.type=h.Z.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=s,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===h.Z.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===h.Z.OBJECT_CLASS_TEXT?this.elType="text":this.type===h.Z.OBJECT_TYPE_IMAGE?this.elType="image":this.type===h.Z.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var t,e;if(this.type!==h.Z.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===h.Z.OBJECT_CLASS_POINT&&(this.type=h.Z.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(t in this.board.objects)this.board.objects.hasOwnProperty(t)&&(e=this.board.objects[t]).descendants&&(delete e.descendants[this.id],delete e.childElements[this.id],this.hasLabel&&(delete e.descendants[this.label.id],delete e.childElements[this.label.id]));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===h.Z.OBJECT_CLASS_POINT?(this.type=h.Z.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===h.Z.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===h.Z.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(t){var e,r,i=[],n=["X","Y"],o=function(t){return function(){return t}},s=function(t){return function(){return t.Value()}};for(this.elementClass===h.Z.OBJECT_CLASS_POINT&&(this.type=h.Z.OBJECT_TYPE_CAS),this.isDraggable=!1,e=0;e<t.length;e++)r=t[e],l.Z.isString(r)?(i[e]=this.board.jc.snippet(r,!0,null,!0),this.addParentsFromJCFunctions([i[e]]),2===t.length&&(this[n[e]+"jc"]=t[e])):l.Z.isFunction(r)?i[e]=r:l.Z.isNumber(r)?i[e]=o(r):l.Z.isObject(r)&&l.Z.isFunction(r.Value)&&(i[e]=s(r)),i[e].origin=r;return 1===t.length?this.updateConstraint=function(){var t=i[0]();return l.Z.isArray(t)?this.coords.setCoordinates(h.Z.COORDS_BY_USER,t):this.coords=t,this}:2===t.length?(this.XEval=i[0],this.YEval=i[1],this.addParents([i[0].origin,i[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(h.Z.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=i[0],this.XEval=i[1],this.YEval=i[2],this.addParents([i[0].origin,i[1].origin,i[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(h.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),!this.board.isSuspendedUpdate&&(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(t,e){e?this.relativeCoords=new u.Z(h.Z.COORDS_BY_SCREEN,t.slice(0,2),this.board):this.relativeCoords=new u.Z(h.Z.COORDS_BY_USER,t,this.board),this.element.addChild(this),e&&this.addParents(this.element),this.XEval=function(){var t,e;return l.Z.evaluate(this.visProp.islabel)?(t=parseFloat(l.Z.evaluate(this.visProp.offset)[0]),e=this.element.getLabelAnchor(),new u.Z(h.Z.COORDS_BY_SCREEN,[t+this.relativeCoords.scrCoords[1]+e.scrCoords[1],0],this.board).usrCoords[1]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+e.usrCoords[1])},this.YEval=function(){var t,e;return l.Z.evaluate(this.visProp.islabel)?(t=-parseFloat(l.Z.evaluate(this.visProp.offset)[1]),e=this.element.getLabelAnchor(),new u.Z(h.Z.COORDS_BY_SCREEN,[0,t+this.relativeCoords.scrCoords[2]+e.scrCoords[2]],this.board).usrCoords[2]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+e.usrCoords[2])},this.ZEval=l.Z.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(h.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(t){var e;if(0===this.transformations.length)return this;for(e=0;e<this.transformations.length;e++)this.transformations[e].update();return this},addTransform:function(t,e){var r,i=l.Z.isArray(e)?e:[e],n=i.length;for(0===this.transformations.length&&(this.baseElement=t),r=0;r<n;r++)this.transformations.push(i[r]);return this},startAnimation:function(t,e,r){var i=l.Z.evaluate(t),n=l.Z.evaluate(e),o=this;return r=l.Z.evaluate(r)||250,this.type!==h.Z.OBJECT_TYPE_GLIDER||l.Z.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){o._anim(i,n)},r),l.Z.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return l.Z.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(t,e,r){r=r||{};var i,n,o,a,u,c=[],d=[],f=e/this.board.attr.animationdelay,p=function(e,r){return function(){return t[e][r]}};if(l.Z.isArray(t)){for(i=0,o=t.length;i<o;i++)l.Z.isPoint(t[i])?d[i]=t[i]:d[i]={elementClass:h.Z.OBJECT_CLASS_POINT,X:p(i,0),Y:p(i,1)};if(0===(e=e||0))return this.setPosition(h.Z.COORDS_BY_USER,[d[d.length-1].X(),d[d.length-1].Y()]),this.board.update(this);if(!l.Z.exists(r.interpolate)||r.interpolate)for(i=0,n=s.Z.Neville(d);i<f;i++)c[i]=[],c[i][0]=n[0]((f-i)/f*n[3]()),c[i][1]=n[1]((f-i)/f*n[3]());else{for(i=0,o=t.length-1;i<f;++i)a=Math.floor(i/f*o),u=i/f*o-a,c[i]=[],c[i][0]=(1-u)*d[a].X()+u*d[a+1].X(),c[i][1]=(1-u)*d[a].Y()+u*d[a+1].Y();c.push([d[o].X(),d[o].Y()]),c.reverse()}this.animationPath=c}else l.Z.isFunction(t)&&(this.animationPath=t,this.animationStart=new Date().getTime());return this.animationCallback=r.callback,this.board.addAnimation(this),this},moveTo:function(t,e,r){r=r||{},t=new u.Z(h.Z.COORDS_BY_USER,t,this.board);var i,o=Math.ceil(e/this.board.attr.animationdelay),s=[],a=this.coords.usrCoords[1],c=this.coords.usrCoords[2],d=t.usrCoords[1]-a,f=t.usrCoords[2]-c,p=function(t){return r.effect&&"<>"===r.effect?Math.pow(Math.sin(t/o*Math.PI/2),2):t/o};if(!l.Z.exists(e)||0===e||Math.abs(t.usrCoords[0]-this.coords.usrCoords[0])>n.Z.eps)return this.setPosition(h.Z.COORDS_BY_USER,t.usrCoords),this.board.update(this);if(!l.Z.exists(r.callback)&&Math.abs(d)<n.Z.eps&&Math.abs(f)<n.Z.eps)return this;for(i=o;i>=0;i--)s[o-i]=[t.usrCoords[0],a+d*p(i),c+f*p(i)];return this.animationPath=s,this.animationCallback=r.callback,this.board.addAnimation(this),this},visit:function(t,e,r){t=new u.Z(h.Z.COORDS_BY_USER,t,this.board);var i,n,o,s=this.board.attr.animationdelay,a=[],c=this.coords.usrCoords[1],d=this.coords.usrCoords[2],f=t.usrCoords[1]-c,p=t.usrCoords[2]-d,m=function(t){var e=t<o/2?2*t/o:2*(o-t)/o;return r.effect&&"<>"===r.effect?Math.pow(Math.sin(e*Math.PI/2),2):e};for(l.Z.isNumber(r)?r={repeat:r}:(r=r||{},l.Z.exists(r.repeat)||(r.repeat=1)),o=Math.ceil(e/(s*r.repeat)),n=0;n<r.repeat;n++)for(i=o;i>=0;i--)a[n*(o+1)+o-i]=[t.usrCoords[0],c+f*m(i),d+p*m(i)];return this.animationPath=a,this.animationCallback=r.callback,this.board.addAnimation(this),this},_anim:function(t,e){var r,i,n,s,a,u,l,c,d;return this.intervalCount+=1,this.intervalCount>e&&(this.intervalCount=0),this.slideObject.elementClass===h.Z.OBJECT_CLASS_LINE?(l=this.slideObject.point1.coords.scrCoords,r=Math.round(((c=this.slideObject.point2.coords.scrCoords)[1]-l[1])*this.intervalCount/e),i=Math.round((c[2]-l[2])*this.intervalCount/e),t>0?s=this.slideObject.point1:(s=this.slideObject.point2,r*=-1,i*=-1),this.coords.setCoordinates(h.Z.COORDS_BY_SCREEN,[s.coords.scrCoords[1]+r,s.coords.scrCoords[2]+i])):this.slideObject.elementClass===h.Z.OBJECT_CLASS_CURVE?(a=t>0?Math.round(this.intervalCount/e*this.board.canvasWidth):Math.round((e-this.intervalCount)/e*this.board.canvasWidth),this.coords.setCoordinates(h.Z.COORDS_BY_SCREEN,[a,0]),d=o.Z.projectPointToCurve(this,this.slideObject,this.board),this.coords=d[0],this.position=d[1]):this.slideObject.elementClass===h.Z.OBJECT_CLASS_CIRCLE&&(n=2*Math.PI,t<0?n*=this.intervalCount/e:n*=(e-this.intervalCount)/e,u=this.slideObject.Radius(),this.coords.setCoordinates(h.Z.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+u*Math.cos(n),this.slideObject.center.coords.usrCoords[2]+u*Math.sin(n)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var t=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(t=this.parents),this.type===h.Z.OBJECT_TYPE_GLIDER&&(t=[this.X(),this.Y(),this.slideObject.id]),t}}),i.Z.CoordsElement.create=function(t,e,r,i,n,o){var s,a,u=!1;for(a=0;a<r.length;a++)(l.Z.isFunction(r[a])||l.Z.isString(r[a]))&&(u=!0);if(u)(s=new t(e,[0,0],i,n,o)).addConstraint(r);else if(l.Z.isNumber(r[0])&&l.Z.isNumber(r[1]))s=new t(e,r,i,n,o),l.Z.exists(i.slideobject)?s.makeGlider(i.slideobject):s.baseElement=s,s.isDraggable=!0;else{if(!(l.Z.isObject(r[0])&&l.Z.isTransformationOrArray(r[1])))return!1;(s=new t(e,[0,0],i,n,o)).addTransform(r[0],r[1]),s.isDraggable=!1}return s.handleSnapToGrid(),s.handleSnapToPoints(),s.handleAttractors(),s.addParents(r),s},e.Z=i.Z.CoordsElement},3154:function(t,e,r){"use strict";var i=r(7901),n=r(2840),o=r(9401),s=r(4204),a=r(4401),u=r(9399),h=r(6638),l=r(2141),c=r(1013);i.Z.GeometryElement=function(t,e,r,i){var o,s,a;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},h.Z.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(s in this.board=t,this.type=r,this._org_type=r,this.elementClass=i||n.Z.OBJECT_CLASS_OTHER,this.id=e.id,o=e.name,c.Z.exists(o)||(o=this.board.generateName(this)),""!==o&&(this.board.elementsByName[o]=this),this.name=o,this.needsRegularUpdate=e.needsregularupdate,c.Z.clearVisPropOld(this),a=this.resolveShortcuts(e))a.hasOwnProperty(s)&&this._set(s,a[s]);this.visProp.draft=a.draft&&a.draft.draft}},i.Z.extend(i.Z.GeometryElement.prototype,{addChild:function(t){var e,r;for(e in this.childElements[t.id]=t,this.addDescendants(t),t.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(e))for(r in this.descendants[e].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(r)&&(this.descendants[e].ancestors[this.ancestors[r].id]=this.ancestors[r]);for(e in this.ancestors)if(this.ancestors.hasOwnProperty(e))for(r in this.descendants)this.descendants.hasOwnProperty(r)&&(this.ancestors[e].descendants[this.descendants[r].id]=this.descendants[r]);return this},addDescendants:function(t){var e;for(e in this.descendants[t.id]=t,t.childElements)t.childElements.hasOwnProperty(e)&&this.addDescendants(t.childElements[e]);return this},addParents:function(t){var e,r,i;for(e=0,i=c.Z.isArray(t)?t:arguments,r=i.length;e<r;++e)c.Z.exists(i[e])&&(c.Z.isId(this.board,i[e])?this.parents.push(i[e]):c.Z.exists(i[e].id)&&this.parents.push(i[e].id));this.parents=c.Z.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},addParentsFromJCFunctions:function(t){var e,r,i;for(e=0;e<t.length;e++)for(r in t[e].deps)i=t[e].deps[r],this.addParents(i),i.addChild(this);return this},removeChild:function(t){return delete this.childElements[t.id],this.removeDescendants(t),delete t.ancestors[this.id],this},removeDescendants:function(t){var e;for(e in delete this.descendants[t.id],t.childElements)t.childElements.hasOwnProperty(e)&&this.removeDescendants(t.childElements[e]);return this},countChildren:function(){var t,e,r=0;for(t in e=this.childElements)e.hasOwnProperty(t)&&0>t.indexOf("Label")&&r++;return r},getName:function(){return this.name},addTransform:function(t){return this},draggable:function(){return this.isDraggable&&!c.Z.evaluate(this.visProp.fixed)&&this.type!==n.Z.OBJECT_TYPE_GLIDER},setPosition:function(t,e){var r,i,o,s,a=[];if(!c.Z.exists(this.parents))return this;for(i=0,o=this.parents.length;i<o;++i)if(r=this.board.select(this.parents[i]),c.Z.isPoint(r)){if(!r.draggable())return this;a.push(r)}for(3===e.length&&(e=e.slice(1)),s=this.board.create("transform",e,{type:"translate"}),(o=a.length)>0?s.applyOnce(a):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(s):this.addTransform(s),i=0;i<o;++i)a[i].type===n.Z.OBJECT_TYPE_GLIDER&&a[i].updateGlider();return this},setPositionDirectly:function(t,e,r){var i=new o.Z(t,e,this.board,!1),s=new o.Z(t,r,this.board,!1),u=a.Z.subtract(i.usrCoords,s.usrCoords);return this.setPosition(n.Z.COORDS_BY_USER,u),this},generatePolynomial:function(){return[]},animate:function(t,e,r){r=r||{};var i,n,o,s=Math.ceil(e/this.board.attr.animationdelay),a=this,u=function(t,e,r,i){var n,u;if(t=parseFloat(t),e=parseFloat(e),!(isNaN(t)||isNaN(e)))for(o=0,u=(e-t)/s,a.animationData[r]=[];o<s;o++)n=t+(o+1)*u,a.animationData[r][s-o-1]=i?Math.floor(n):n};for(i in this.animationData={},t)if(t.hasOwnProperty(i))switch(n=i.toLowerCase()){case"strokecolor":case"fillcolor":!function(t,e,r){var i,n,u,h,c;for(o=0,i=l.Z.rgb2hsv(t),u=((n=l.Z.rgb2hsv(e))[0]-i[0])/s,h=(n[1]-i[1])/s,c=(n[2]-i[2])/s,a.animationData[r]=[];o<s;o++)a.animationData[r][s-o-1]=l.Z.hsv2rgb(i[0]+(o+1)*u,i[1]+(o+1)*h,i[2]+(o+1)*c)}(this.visProp[n],t[i],n);break;case"size":if(!c.Z.isPoint(this))break;u(this.visProp[n],t[i],n,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":u(this.visProp[n],t[i],n,!1)}return this.animationCallback=r.callback,this.board.addAnimation(this),this},update:function(){return c.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(t){return this.prepareUpdate().update().updateVisibility(t).updateRenderer()},setDisplayRendNode:function(t){var e,r,i,n,o;if(void 0===t&&(t=this.visPropCalc.visible),t===this.visPropOld.visible)return this;for(this.board.renderer.display(this,t),r=this.inherits.length,i=0;i<r;i++)if(o=this.inherits[i],c.Z.isArray(o))for(e=0,n=o.length;e<n;e++)c.Z.exists(o[e])&&c.Z.exists(o[e].rendNode)&&"inherit"===c.Z.evaluate(o[e].visProp.visible)&&o[e].setDisplayRendNode(t);else c.Z.exists(o)&&c.Z.exists(o.rendNode)&&"inherit"===c.Z.evaluate(o.visProp.visible)&&o.setDisplayRendNode(t);return this.hasLabel&&c.Z.exists(this.label)&&c.Z.exists(this.label.rendNode)&&"inherit"===c.Z.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(t),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(t){var e,r,i,n,o,s;if(this.needsUpdate){for(void 0!==t?this.visPropCalc.visible=t:(s=c.Z.evaluate(this.visProp.visible),c.Z.exists(this.hiddenByParent)&&this.hiddenByParent&&(s=!1),"inherit"!==s&&(this.visPropCalc.visible=s)),r=this.inherits.length,i=0;i<r;i++)if(o=this.inherits[i],c.Z.isArray(o))for(e=0,n=o.length;e<n;e++)c.Z.exists(o[e])&&"inherit"===c.Z.evaluate(o[e].visProp.visible)&&o[e].prepareUpdate().updateVisibility(this.visPropCalc.visible);else c.Z.exists(o)&&"inherit"===c.Z.evaluate(o.visProp.visible)&&o.prepareUpdate().updateVisibility(this.visPropCalc.visible);c.Z.exists(this.label)&&c.Z.exists(this.label.visProp)&&c.Z.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(t,e){var r;if(t=t.toLocaleLowerCase(),this.visProp.hasOwnProperty(t)&&t.indexOf("color")>=0&&c.Z.isString(e)&&9===e.length&&"#"===e.charAt(0))e=l.Z.rgba2rgbo(e),this.visProp[t]=e[0],this.visProp[t.replace("color","opacity")]=e[1];else if(null!==e&&c.Z.isObject(e)&&!c.Z.exists(e.id)&&!c.Z.exists(e.name))for(r in this.visProp[t]={},e)e.hasOwnProperty(r)&&(this.visProp[t][r.toLocaleLowerCase()]=e[r]);else this.visProp[t]=e},resolveShortcuts:function(t){var e,r,i,n=["traceattributes","traceAttributes"];for(e in u.Z.shortcuts)if(u.Z.shortcuts.hasOwnProperty(e)){if(c.Z.exists(t[e]))for(r=0;r<u.Z.shortcuts[e].length;r++)c.Z.exists(t[u.Z.shortcuts[e][r]])||(t[u.Z.shortcuts[e][r]]=t[e]);for(i=0;i<n.length;i++)c.Z.isObject(t[n[i]])&&(t[n[i]]=this.resolveShortcuts(t[n[i]]))}return t},setLabel:function(t){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(t)},setLabelText:function(t){return c.Z.exists(this.label)&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(t)),this},setName:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(t),this.setAttribute({name:t})},setProperty:function(){i.Z.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(t){var e,r,o,s,a,u,h,d,f,p={};for(e=0;e<arguments.length;e++)u=arguments[e],c.Z.isString(u)?(d=u.split(":"),p[c.Z.trim(d[0])]=c.Z.trim(d[1])):c.Z.isArray(u)?p[u[0]]=u[1]:i.Z.extend(p,u);for(e in p=this.resolveShortcuts(p))if(p.hasOwnProperty(e)){if(s=e.replace(/\s+/g,"").toLowerCase(),a=p[e],c.Z.isObject(a)&&c.Z.exists(this.visProp[s])){if(this.visProp[s]=c.Z.merge(this.visProp[s],a),this.type===n.Z.OBJECT_TYPE_TICKS&&c.Z.exists(this.labels))for(r=0,o=this.labels.length;r<o;r++)this.labels[r].setAttribute(a);else if(c.Z.exists(this[s])){if(c.Z.isArray(this[s]))for(r=0;r<this[s].length;r++)this[s][r].setAttribute(a);else this[s].setAttribute(a)}continue}switch(f=this.visProp[s],s){case"name":f=this.name,delete this.board.elementsByName[this.name],this.name=a,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===a||!1===a),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":h=(a=l.Z.rgba2rgbo(a))[1],a=a[0],0===h&&c.Z.exists(this.label)&&this.hasLabel&&this.label.hideElement(),c.Z.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=a,this.board.renderer.setObjectStrokeColor(this.label,a,h)),this.elementClass===n.Z.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=a,this.visProp.strokeopacity=h,this.board.renderer.setObjectStrokeColor(this,a,h));break;case"infoboxtext":c.Z.isString(a)?this.infoboxText=a:this.infoboxText=!1;break;case"visible":"false"===a?this.visProp.visible=!1:"true"===a?this.visProp.visible=!0:this.visProp.visible=a,this.setDisplayRendNode(c.Z.evaluate(this.visProp.visible)),c.Z.evaluate(this.visProp.visible)&&c.Z.exists(this.updateSize)&&this.updateSize();break;case"face":c.Z.isPoint(this)&&(this.visProp.face=a,this.board.renderer.changePointStyle(this));break;case"trace":"false"===a||!1===a?(this.clearTrace(),this.visProp.trace=!1):"pause"===a?this.visProp.trace=!1:this.visProp.trace=!0;break;case"gradient":this.visProp.gradient=a,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":a=l.Z.rgba2rgbo(a),this.visProp.gradientsecondcolor=a[0],this.visProp.gradientsecondopacity=a[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=a,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=a,c.Z.evaluate(a)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=a;break;case"radius":(this.type===n.Z.OBJECT_TYPE_ANGLE||this.type===n.Z.OBJECT_TYPE_SECTOR)&&this.setRadius(a);break;case"rotate":(this.elementClass===n.Z.OBJECT_CLASS_TEXT&&"internal"===c.Z.evaluate(this.visProp.display)||this.type===n.Z.OBJECT_TYPE_IMAGE)&&this.addRotation(a);break;case"generatelabelvalue":this.type===n.Z.OBJECT_TYPE_TICKS&&c.Z.isFunction(a)&&(this.generateLabelValue=a);break;case"onpolygon":this.type===n.Z.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!a);break;case"disabled":c.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!a);break;case"checked":c.Z.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!a);break;case"maxlength":c.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!a);break;case"layer":this.board.renderer.setLayer(this,c.Z.evaluate(a)),this._set(s,a);break;case"tabindex":c.Z.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",a),this._set(s,a));break;default:c.Z.exists(this.visProp[s])&&(!i.Z.Validator[s]||i.Z.Validator[s]&&i.Z.Validator[s](a)||i.Z.Validator[s]&&c.Z.isFunction(a)&&i.Z.Validator[s](a()))&&(a=(!a.toLowerCase||"false"!==a.toLowerCase())&&a,this._set(s,a))}this.triggerEventHandlers(["attribute:"+s],[f,a,this])}return this.triggerEventHandlers(["attribute"],[p,this]),c.Z.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){i.Z.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"needsregularupdate":e=this.needsRegularUpdate;break;case"labelcolor":e=this.label.visProp.strokecolor;break;case"infoboxtext":e=this.infoboxText;break;case"withlabel":e=this.hasLabel;break;default:e=this.visProp[t]}return e},setDash:function(t){return this.setAttribute({dash:t}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new o.Z(n.Z.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new o.Z(n.Z.COORDS_BY_USER,[0,0],this.board)},setArrow:function(t,e){return this.visProp.firstarrow=t,this.visProp.lastarrow=e,e&&(this.type=n.Z.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var t=c.Z.evaluate(this.visProp.gradient);("linear"===t||"radial"===t)&&this.board.renderer.setGradient(this)},createLabel:function(){var t,e=this;return i.Z.elements.text?((t=c.Z.deepCopy(this.visProp.label,null)).id=this.id+"Label",t.isLabel=!0,t.anchor=this,t.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=i.Z.elements.text(this.board,[0,0,function(){return c.Z.isFunction(e.name)?e.name():e.name}],t),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):i.Z.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(t){return t=c.Z.def(t,!1),c.Z.evaluate(this.visProp.highlight)&&(!this.highlighted||t)&&(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var t;for(t in this.traces)this.traces.hasOwnProperty(t)&&this.board.renderer.remove(this.traces[t]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=s.Z.normalize(this.stdform),this},toJSON:function(){var t,e,r=['{"name":',this.name];for(e in r.push(', "id":'+this.id),t=[],this.visProp)this.visProp.hasOwnProperty(e)&&c.Z.exists(this.visProp[e])&&t.push('"'+e+'":'+this.visProp[e]);return r.push(', "visProp":{'+t.toString()+"}"),r.push("}"),r.join("")},addRotation:function(t){var e,r,i,o,s,a=this;return(this.elementClass===n.Z.OBJECT_CLASS_TEXT||this.type===n.Z.OBJECT_TYPE_IMAGE)&&0!==t&&(e=this.board.create("transform",[function(){return-a.X()},function(){return-a.Y()}],{type:"translate"}),r=this.board.create("transform",[function(){return a.X()},function(){return a.Y()}],{type:"translate"}),i=this.board.create("transform",[function(){return a.board.unitX/a.board.unitY},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[function(){return a.board.unitY/a.board.unitX},function(){return 1}],{type:"scale"}),s=this.board.create("transform",[function(){return c.Z.evaluate(t)*Math.PI/180}],{type:"rotate"}),e.bindTo(this),i.bindTo(this),s.bindTo(this),o.bindTo(this),r.bindTo(this)),this},highlightStrokeColor:function(t){return i.Z.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:t}),this},strokeColor:function(t){return i.Z.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:t}),this},strokeWidth:function(t){return i.Z.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:t}),this},fillColor:function(t){return i.Z.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:t}),this},highlightFillColor:function(t){return i.Z.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:t}),this},labelColor:function(t){return i.Z.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:t}),this},dash:function(t){return i.Z.deprecated("dash()","setAttribute()"),this.setAttribute({dash:t}),this},visible:function(t){return i.Z.deprecated("visible()","setAttribute()"),this.setAttribute({visible:t}),this},shadow:function(t){return i.Z.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:t}),this},getType:function(){return this.elType},getParents:function(){return c.Z.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var t,e=c.Z.deepCopy(this.visProp),r=[],i=r.length;for(t=0,e.id=this.id,e.name=this.name;t<i;t++)delete e[r[t]];return e},hasPoint:function(t,e){return!1},addTicks:function(t){return""!==t.id&&c.Z.exists(t.id)||(t.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(t),this.ticks.push(t),t.id},removeAllTicks:function(){var t;if(c.Z.exists(this.ticks)){for(t=this.ticks.length-1;t>=0;t--)this.removeTicks(this.ticks[t]);this.ticks=[],this.board.update()}},removeTicks:function(t){var e,r;if(c.Z.exists(this.defaultTicks)&&this.defaultTicks===t&&(this.defaultTicks=null),c.Z.exists(this.ticks)){for(e=this.ticks.length-1;e>=0;e--)if(this.ticks[e]===t){if(this.board.removeObject(this.ticks[e]),this.ticks[e].ticks)for(r=0;r<this.ticks[e].ticks.length;r++)c.Z.exists(this.ticks[e].labels[r])&&this.board.removeObject(this.ticks[e].labels[r]);delete this.ticks[e];break}}},getSnapSizes:function(){var t,e,r;return t=c.Z.evaluate(this.visProp.snapsizex),e=c.Z.evaluate(this.visProp.snapsizey),t<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(t=(r=this.board.defaultAxes.x.defaultTicks).ticksDelta*(c.Z.evaluate(r.visProp.minorticks)+1)),e<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(e=(r=this.board.defaultAxes.y.defaultTicks).ticksDelta*(c.Z.evaluate(r.visProp.minorticks)+1)),[t,e]},handleSnapToGrid:function(t,e){var r,o,s,a,u,h,l,d,f,p,m,v=c.Z.evaluate(this.visProp.attracttogrid),g=c.Z.evaluate(this.visProp.attractorunit),b=c.Z.evaluate(this.visProp.attractordistance);return!c.Z.exists(this.coords)||c.Z.evaluate(this.visProp.fixed)||(c.Z.evaluate(this.visProp.snaptogrid)||v||!0===t)&&(r=this.coords.usrCoords[1],o=this.coords.usrCoords[2],p=(f=this.getSnapSizes())[0],m=f[1],p>0&&m>0&&(d=this.board.getBoundingBox(),s=Math.round(r/p)*p,a=Math.round(o/m)*m,u=new i.Z.Coords(n.Z.COORDS_BY_USER,[s,a],this.board),(!v||u.distance("screen"===g?n.Z.COORDS_BY_SCREEN:n.Z.COORDS_BY_USER,this.coords)<b)&&(r=s,o=a,!e&&(h=Math.min(d[0],d[2]),l=Math.max(d[0],d[2]),r<h&&r>h-p?r+=p:r>l&&r<l+p&&(r-=p),h=Math.min(d[1],d[3]),l=Math.max(d[1],d[3]),o<h&&o>h-m?o+=m:o>l&&o<l+m&&(o-=m)),this.coords.setCoordinates(n.Z.COORDS_BY_USER,[r,o])))),this},getBoundingBox:function(){var t,e,r,i,o,s=[1/0,1/0,-1/0,-1/0];if(this.type===n.Z.OBJECT_TYPE_POLYGON){if((e=this.vertices.length-1)<=0)return s;for(t=0;t<e;t++)r=this.vertices[t].X(),s[0]=r<s[0]?r:s[0],s[2]=r>s[2]?r:s[2],r=this.vertices[t].Y(),s[1]=r<s[1]?r:s[1],s[3]=r>s[3]?r:s[3]}else if(this.elementClass===n.Z.OBJECT_CLASS_CIRCLE)i=this.center.X(),o=this.center.Y(),s=[i-this.radius,o+this.radius,i+this.radius,o-this.radius];else if(this.elementClass===n.Z.OBJECT_CLASS_CURVE){if(0===(e=this.vertices.length))return s;for(t=0;t<e;t++)r=this.points[t].coords.usrCoords[1],s[0]=r<s[0]?r:s[0],s[2]=r>s[2]?r:s[2],r=this.points[t].coords.usrCoords[1],s[1]=r<s[1]?r:s[1],s[3]=r>s[3]?r:s[3]}return s},addEvent:i.Z.shortcut(i.Z.GeometryElement.prototype,"on"),removeEvent:i.Z.shortcut(i.Z.GeometryElement.prototype,"off"),formatNumberLocale:function(t,e){var r,i,n,o={},s={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(c.Z.exists(Intl)&&this.useLocale()){for(n in r=c.Z.evaluate(this.visProp.intl.locale)||c.Z.evaluate(this.board.attr.intl.locale),i=c.Z.evaluate(this.visProp.intl.options)||{})i.hasOwnProperty(n)&&(s.hasOwnProperty(n)?o[s[n]]=c.Z.evaluate(i[n]):o[n]=c.Z.evaluate(i[n]));return n="maximumfractiondigits",c.Z.exists(i[n])||(o[s[n]]=e),Intl.NumberFormat(r,o).format(t)}return t},useLocale:function(){var t;return!!(c.Z.exists(this.visProp.intl)&&c.Z.exists(this.visProp.intl.enabled))&&(!0===(t=c.Z.evaluate(this.visProp.intl.enabled))||"inherit"===t&&!0===c.Z.evaluate(this.board.attr.intl.enabled))},__evt__over:function(t){},__evt__mouseover:function(t){},__evt__out:function(t){},__evt__mouseout:function(t){},__evt__move:function(t){},__evt__mousemove:function(t){},__evt__drag:function(t){},__evt__mousedrag:function(t){},__evt__pendrag:function(t){},__evt__touchdrag:function(t){},__evt__keydrag:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__touchdown:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__penup:function(t){},__evt__touchup:function(t){},__evt__attribute:function(t,e){},__evt__attribute_:function(t,e,r){},__evt:function(){}}),e.Z=i.Z.GeometryElement},58:function(t,e,r){"use strict";var i=r(7901),n=r(2840),o=r(3154),s=r(2137),a=r(4735),u=r(1013),h=r(4204),l=r(7158),c={HTMLSliderInputEventHandler:function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()}};i.Z.Text=function(t,e,r,i){var o;this.constructor(t,r,n.Z.OBJECT_TYPE_TEXT,n.Z.OBJECT_CLASS_TEXT),this.element=this.board.select(r.anchor),this.coordsConstructor(e,u.Z.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),o=this.visProp.visible,this.visProp.visible=!0,this.setText(i),this.visProp.visible=o,u.Z.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=u.Z.deepCopy(this.methodMap,{setText:"setTextJessieCode"})},i.Z.Text.prototype=new o.Z,u.Z.copyPrototypeMethods(i.Z.Text,l.Z,"coordsConstructor"),i.Z.extend(i.Z.Text.prototype,{hasPoint:function(t,e){var r,i,n,o,s,a,l,c;return(u.Z.isObject(u.Z.evaluate(this.visProp.precision))?(l=this.board._inputDevice,c=u.Z.evaluate(this.visProp.precision[l])):c=this.board.options.precision.hasPoint,this.transformations.length>0&&(t=(r=h.Z.matVecMult(h.Z.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,t,e]))[1],e=r[2]),i=(r="right"===(s=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===s?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],n=(o="top"===(a=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===a?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===u.Z.evaluate(this.visProp.dragarea))?t>=r-c&&t<i+c&&e>=n-c&&e<=o+c:e>=n-c&&e<=o+c&&(t>=r-c&&t<=r+2*c||t>=i-2*c&&t<=i+c)},_createFctUpdateText:function(t){var e,r,i,n,o,s,a=u.Z.evaluate(this.visProp.parse),h=u.Z.evaluate(this.visProp.usemathjax),l=u.Z.evaluate(this.visProp.usekatex),c=!1;if(this.orgText=t,u.Z.isFunction(t))this.updateText=function(){n=t().toString(),!a||h||l?this.plaintext=n:this.plaintext=this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(n,!1)))};else if(u.Z.isNumber(t)?(i=u.Z.evaluate(this.visProp.digits),this.useLocale()?this.content=this.formatNumberLocale(t,i):this.content=u.Z.toFixed(t,i)):u.Z.isString(t)&&a?(u.Z.evaluate(this.visProp.useasciimathml)?this.content="'`"+t+"`'":h||l?(this.content=this.valueTagToJessieCode(t),u.Z.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(t)),c=!0):this.content=t,c){if(u.Z.isArray(this.content)){for(o=0,s=this;o<this.content.length;o++)if('"'!==this.content[o][0])for(r in this.content[o]=this.board.jc.snippet(this.content[o],!0,"",!1),this.content[o].deps)this.addParents(this.content[o].deps[r]),this.content[o].deps[r].addChild(this);e=function(){var t,e,r=u.Z.evaluate(s.visProp.digits),i="";for(t=0;t<s.content.length;t++)u.Z.isFunction(s.content[t])?(e=s.content[t](),e=s.useLocale()?s.formatNumberLocale(e,r):u.Z.toFixed(e,r)):'"'===(e=s.content[t]).at(0)&&'"'===e.at(-1)&&(e=e.slice(1,-1)),i+=e;return i}}else for(r in(e=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(e.deps[r]),e.deps[r].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(e())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(t){return this._createFctUpdateText(t),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(t){var e;return this.visProp.castext=t,e=u.Z.isFunction(t)?function(){return u.Z.sanitizeHTML(t())}:u.Z.isNumber(t)?t:u.Z.sanitizeHTML(t),this._setText(e)},setText:function(t){return this._setText(t)},updateSize:function(){var t,e,r,i=u.Z.evaluate(this.visProp.display);return a.Z.isBrowser&&"no"!==this.board.renderer.type&&(r=this.rendNode,"html"===i||"vml"===this.board.renderer.type?u.Z.exists(r.offsetWidth)?(e=this,window.setTimeout(function(){e.size=[r.offsetWidth,r.offsetHeight],e.needsUpdate=!0,e.updateRenderer()},0)):this.size=this.crudeSizeEstimate():"internal"===i&&("svg"===this.board.renderer.type?(e=this,window.setTimeout(function(){try{t=r.getBBox(),e.size=[t.width,t.height],e.needsUpdate=!0,e.updateRenderer()}catch(t){}},0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate()))),this},crudeSizeEstimate:function(){var t=parseFloat(u.Z.evaluate(this.visProp.fontsize));return[t*this.plaintext.length*.45,.9*t]},utf8_decode:function(t){return t.replace(/&#x(\w+);/g,function(t,e){return String.fromCharCode(parseInt(e,16))})},replaceSub:function(t){if(!t.indexOf)return t;for(var e,r=t.indexOf("_{");r>=0;)(e=(t=t.slice(0,r)+t.slice(r).replace(/_\{/,"<sub>")).indexOf("}",r+4))>=0&&(t=t.slice(0,e)+t.slice(e).replace(/\}/,"</sub>")),r=t.indexOf("_{");for(r=t.indexOf("_");r>=0;)r=(t=t.slice(0,r)+t.slice(r).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return t},replaceSup:function(t){if(!t.indexOf)return t;for(var e,r=t.indexOf("^{");r>=0;)(e=(t=t.slice(0,r)+t.slice(r).replace(/\^\{/,"<sup>")).indexOf("}",r+4))>=0&&(t=t.slice(0,e)+t.slice(e).replace(/\}/,"</sup>")),r=t.indexOf("^{");for(r=t.indexOf("^");r>=0;)r=(t=t.slice(0,r)+t.slice(r).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return t},getSize:function(){return this.size},setCoords:function(t,e){var r,i,o;return u.Z.isArray(t)&&t.length>1&&(e=t[1],t=t[0]),u.Z.evaluate(this.visProp.islabel)&&u.Z.exists(this.element)?(i=(t-(r=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,o=-(e-r.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(n.Z.COORDS_BY_SCREEN,[i,o])):this.coords.setCoordinates(n.Z.COORDS_BY_USER,[t,e]),this.fullUpdate(),this},update:function(t){return this.needsUpdate&&(this.updateCoords(t),this.updateText(),"internal"===u.Z.evaluate(this.visProp.display)&&u.Z.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize()),this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return u.Z.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(t){return t.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(t,e,r){var i,n,o,a,h='""';if(o=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),a=t.indexOf("</value>"),o>=0)for(;o>=0;)h+=' + "'+this.replaceSub(this.replaceSup(t.slice(0,o)))+'"',n=(n=t.slice(o+7,a)).replace(/\s+/g,""),!0===e&&(n=this.expandShortMath(n)),0>(i=(i=(i=r?n:s.Z.geonext2JS(n,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")&&u.Z.isNumber(u.Z.bind(this.board.jc.snippet(i,!0,"",!1),this)())?h+="+("+i+").toFixed("+u.Z.evaluate(this.visProp.digits)+")":h+="+("+i+")",o=(t=t.slice(a+8)).indexOf("<value>"),a=t.indexOf("</value>");return h+=' + "'+this.replaceSub(this.replaceSup(t))+'"',h=(h=(h=this.convertGeonextAndSketchometry2CSS(h)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(t){var e,r,i,n,o=[];if(i=(t=(t=(t=(t=(t=t||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),n=t.indexOf("</value>"),i>=0)for(;i>=0;)o.push('"'+this.escapeTicks(t.slice(0,i))+'"'),r=(r=t.slice(i+7,n)).replace(/\s+/g,""),e=(e=r=this.expandShortMath(r)).replace(/\\"/g,"'").replace(/\\'/g,"'"),o.push("("+e+")"),i=(t=t.slice(n+8)).indexOf("<value>"),n=t.indexOf("</value>");for(o.push('"'+this.escapeTicks(t)+'"'),i=0;i<o.length;i++)o[i]=o[i].replace(/&amp;/g,"&");return o},poorMansTeX:function(t){var e,r;if(u.Z.isArray(t)){for(e=0,r=[];e<t.length;e++)r.push(this.poorMansTeX(t[e]));return r}return t=t.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(t)),!0)},escapeTicks:function(t){return t.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(t){return t.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(t){return u.Z.isString(t)&&(t=(t=(t=(t=t.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),t},convertSketchometry2CSS:function(t,e){var r='<span class="sketcho sketcho-inherit sketcho-',i='"></span>';return u.Z.isString(t)&&(e&&(r=this.escapeTicks(r),i=this.escapeTicks(i)),t=(t=t.replace(/(<|&lt;)sketchofont(>|&gt;)/g,r)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,i)),t},convertGeonextAndSketchometry2CSS:function(t,e){return t=this.convertGeonext2CSS(t),t=this.convertSketchometry2CSS(t,e)},notifyParents:function(t){var e,r=null;t=(t=t.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do null!==(r=(e=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(t))&&(s.Z.findDependencies(this,r[1],this.board),t=(t=t.slice(r.index)).replace(e,""));while(null!==r);return this},getParents:function(){var t;return t=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(t=this.parents),t},bounds:function(){var t=this.coords.usrCoords;return u.Z.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[t[1],t[2]+this.size[1]/this.board.unitY,t[1]+this.size[0]/this.board.unitX,t[2]]},getAnchorX:function(){var t=u.Z.evaluate(this.visProp.anchorx);if("auto"===t)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return t},getAnchorY:function(){var t=u.Z.evaluate(this.visProp.anchory);if("auto"===t)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return t},getNumberOfConflicts:function(t,e,r,i){var n,o,s,a,u=0;for(n=0,a=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=(r+i)*.25,s=this.board.objectsList.length;n<s;n++)(o=this.board.objectsList[n]).visPropCalc.visible&&"axis"!==o.elType&&"ticks"!==o.elType&&o!==this.board.infobox&&o!==this&&o.hasPoint(t,e)&&u++;return this.board.options.precision.hasPoint=a,u},setAutoPosition:function(){var t,e,r,i,n,o,s,a,h,l,c,d,f,p,m,v,g,b=this.size[0],y=this.size[1],C={conflicts:1/0,angle:0,r:0},Z=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!u.Z.evaluate(this.visProp.islabel)||!this.element||(c=u.Z.evaluate(this.visProp.offset),r=(n=this.element.getLabelAnchor()).scrCoords[1],i=n.scrCoords[2],p=c[0],m=c[1],0===(l=this.getNumberOfConflicts(r+p,i-m,b,y))))return this;for(d=u.Z.evaluate(this.visProp.autopositionmindistance),a=u.Z.evaluate(this.visProp.autopositionmaxdistance),h=.2*d,o=Math.atan2(m,p),C.conflicts=l,C.angle=o,C.r=d;C.conflicts>0&&d<=a;){for(f=1,s=o+Z;f<12&&C.conflicts>0&&(v=Math.cos(s),g=Math.sin(s),t=r+d*v,e=i-d*g,(l=this.getNumberOfConflicts(t,e,b,y))<C.conflicts&&(C.conflicts=l,C.angle=s,C.r=d),0!==C.conflicts);f++)s+=Z;d+=h}return d=C.r,v=Math.cos(C.angle),g=Math.sin(C.angle),this.visProp.offset=[d*v,d*g],v<-.2?this.visProp.anchorx="right":v>.2?this.visProp.anchorx="left":this.visProp.anchorx="middle",this}}),i.Z.createText=function(t,e,r){var n,o=u.Z.copyAttributes(r,t.options,"text"),s=e.slice(0,-1),a=e[e.length-1];if(o.anchor=o.parent||o.anchor,!(n=l.Z.create(i.Z.Text,t,s,o,a)))throw Error("JSXGraph: Can't create text with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==o.rotate&&n.addRotation(o.rotate),n},i.Z.registerElement("text",i.Z.createText),i.Z.createHTMLSlider=function(t,e,r){var n,o,s=u.Z.copyAttributes(r,t.options,"htmlslider");if(2!==e.length||2!==e[0].length||3!==e[1].length)throw Error("JSXGraph: Can't create htmlslider with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");s.anchor=s.parent||s.anchor,s.fixed=s.fixed||!0,o=[e[0][0],e[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(n=i.Z.createText(t,o,s)).type=u.Z.OBJECT_TYPE_HTMLSLIDER,n.rendNodeForm=n.rendNode.childNodes[0],n.rendNodeRange=n.rendNodeForm.childNodes[0],n.rendNodeRange.min=e[1][0],n.rendNodeRange.max=e[1][2],n.rendNodeRange.step=s.step,n.rendNodeRange.value=e[1][1],n.rendNodeLabel=n.rendNodeForm.childNodes[1],n.rendNodeLabel.id=n.rendNode.id+"_label",s.withlabel&&(n.rendNodeLabel.innerHTML=n.name+"="),n.rendNodeOut=n.rendNodeForm.childNodes[2],n.rendNodeOut.value=e[1][1];try{n.rendNodeForm.id=n.rendNode.id+"_form",n.rendNodeRange.id=n.rendNode.id+"_range",n.rendNodeOut.id=n.rendNode.id+"_out"}catch(t){i.Z.debug(t)}return n.rendNodeRange.style.width=s.widthrange+"px",n.rendNodeRange.style.verticalAlign="middle",n.rendNodeOut.style.width=s.widthout+"px",n._val=e[1][1],i.Z.supportsVML()?a.Z.addEvent(n.rendNodeForm,"change",c.HTMLSliderInputEventHandler,n):a.Z.addEvent(n.rendNodeForm,"input",c.HTMLSliderInputEventHandler,n),n.Value=function(){return this._val},n},i.Z.registerElement("htmlslider",i.Z.createHTMLSlider),e.Z=i.Z.Text},6205:function(t,e,r){"use strict";r.d(e,{kC:function(){return tr},ZP:function(){return ti}});var i,n=r(7901),o=r(4735),s=r(2840),a=r(1013);n.Z.XML={cleanWhitespace:function(t){for(var e=t.firstChild;a.Z.exists(e);)3!==e.nodeType||/\S/.test(e.nodeValue)?1===e.nodeType&&this.cleanWhitespace(e):t.removeChild(e),e=e.nextSibling},parse:function(t){var e;return e=new("function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(t){var e;return"function"==typeof ActiveXObject&&(e=new ActiveXObject("MSXML.DomDocument")).loadXML(t),e}})().parseFromString(t,"text/xml"),this.cleanWhitespace(e),e}},n.Z.XML,r(6638),r(2285);var u=r(4204);u.Z.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(t,e){var r,i,n,o;return(t=Math.abs(t),e<0&&(t=-t),n=this.MINV*Math.floor(this.M*t+.5),o=t-n,r=n*n,i=2*n*o+o*o,e<0&&(r=-r,i=-i),r+i>this.MAXLOG)?1/0:r=Math.exp(r)*Math.exp(i)},polevl:function(t,e,r){var i,n;if(a.Z.exists(e.reduce))return e.reduce(function(e,r){return e*t+r},0);for(n=0,i=0;n<=r;n++)i=i*t+e[n];return i},p1evl:function(t,e,r){var i,n;if(a.Z.exists(e.reduce))return e.reduce(function(e,r){return e*t+r},1);for(n=0,i=1;n<r;n++)i=i*t+e[n];return i},ndtr:function(t){var e,r,i;return(i=Math.abs(e=t*this.SQRTH))<1?r=.5+.5*this.erf(e):(r=.5*this.erfce(i)*Math.sqrt(i=this.expx2(t,-1)),e>0&&(r=1-r)),r},_underflow:function(t){return(console.log("erfc","UNDERFLOW"),t<0)?2:0},erfc:function(t){var e,r,i,n,o;return(i=t<0?-t:t)<1?1-this.erf(t):(o=-t*t)<-this.MAXLOG?this._underflow(t):(o=this.expx2(t,-1),i<8?(e=this.polevl(i,this.P,8),r=this.p1evl(i,this.Q,8)):(e=this.polevl(i,this.R,5),r=this.p1evl(i,this.S,6)),n=o*e/r,t<0&&(n=2-n),0===n)?this._underflow(t):n},erfce:function(t){var e,r;return t<8?(e=this.polevl(t,this.P,8),r=this.p1evl(t,this.Q,8)):(e=this.polevl(t,this.R,5),r=this.p1evl(t,this.S,6)),e/r},erf:function(t){var e;return Math.abs(t)>1?1-this.erfc(t):(e=t*t,t*this.polevl(e,this.T,4)/this.p1evl(e,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,30158155350823543e-20,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,32801446468212774e-20,28924786474538068e-22,6790194080099813e-24],ndtri:function(t){var e,r,i,n,o,s;return t<=0?-1/0:t>=1?1/0:(s=1,(r=t)>.8646647167633873&&(r=1-r,s=0),r>.1353352832366127)?(r-=.5,n=r*r,e=(r+n*this.polevl(n,this.P0,4)/this.p1evl(n,this.Q0,8)*r)*this.s2pi):(o=(e=Math.sqrt(-2*Math.log(r)))-Math.log(e)/e,i=1/e,e=o-(e<8?i*this.polevl(i,this.P1,8)/this.p1evl(i,this.Q1,8):i*this.polevl(i,this.P2,8)/this.p1evl(i,this.Q2,8)),0!==s&&(e=-e),e)},erfi:function(t){return this.ndtri((t+1)*.5)*this.SQRTH}},u.Z.ProbFuncs;var h=r(9641);u.Z.Extrapolate={upper:15,infty:1e4,wynnEps:function(t,e,r){var i,n,o,s,a;if(r[e]=t,0===e)a=t;else{for(o=0,i=e;i>0;i--)n=o,o=r[i-1],1e-15>=Math.abs(s=r[i]-o)?r[i-1]=1e20:r[i-1]=1*n+1/s;a=r[e%2]}return a},aitken:function(t,e,r){var i,n,o,s,a,u;if(r[e]=t,e<2)i=t;else{for(a=1,s=e/2;a<=s;a++)1e-15>Math.abs(n=r[(u=e-2*a)+2]-2*r[u+1]+r[u])?r[u]=1e20:(o=r[u]-r[u+1],r[u]-=o*o/n);i=r[e%2]}return i},brezinski:function(t,e,r){var i,n,o,s,a,u,h,l;if(r[e]=t,e<3)i=t;else{for(h=1,u=e/3,l=e;h<=u;h++)l-=3,o=r[l+1]-r[l],s=r[l+2]-r[l+1],1e-15>Math.abs(n=(a=r[l+3]-r[l+2])*(s-o)-o*(a-s))?r[l]=1e20:r[l]=r[l+1]-o*s*(a-s)/n;i=r[e%3]}return i},iteration:function(t,e,r,i,n){var o,s,a,u=NaN,h=[],l="finite",c=e;for(o=1,n=n||0;o<=this.upper;o++){if(s=r(t+(c=0===n?e/(o+1):.5*c),!0),isNaN(a=this[i](s,o-1,h))){l="NaN";break}if(0!==s&&a/s>this.infty){u=a,l="infinite";break}if(1e-7>Math.abs(a-u))break;u=a}return[u,l,1-(o-1)/this.upper]},levin:function(t,e,r,i,n,o){var s,a,u,h;if(h=1/(i+e),n[e]=t/r,o[e]=1/r,e>0&&(n[e-1]=n[e]-n[e-1],o[e-1]=o[e]-o[e-1],e>1))for(s=2,u=(i+e-1)*h;s<=e;s++)a=(i+e-s)*Math.pow(u,s-2)*h,n[e-s]=n[e-s+1]-a*n[e-s],o[e-s]=o[e-s+1]-a*o[e-s],h*=u;return 1e-15>Math.abs(o[0])?1e20:n[0]/o[0]},iteration_levin:function(t,e,r,i){var n,o,s,a,u,h,l,c=NaN,d=[],f=[],p="finite",m=e;for(n=1,i=i||0,a=r(t+e,!0);n<=this.upper;n++){if(l="u"==(1>Math.abs(u=(o=r(t+(m=0===i?e/(n+1):.5*m),!0))-a)?"u":"t")?(1+n)*u:u,a=o,h=(s=this.levin(o,n-1,l,1,d,f))-c,isNaN(s)){p="NaN";break}if(0!==o&&s/o>this.infty){c=s,p="infinite";break}if(1e-7>Math.abs(h))break;c=s}return[c,p,1-(n-1)/this.upper]},limit:function(t,e,r){return this.iteration_levin(t,e,r,0)}};var l=u.Z.Extrapolate,c=r(7895);u.Z.Quadtree=function(t,e,r){e=e||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=e.capacity||10,this.config.pointType=e.pointType||"coords",this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.parent=r||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},a.Z.extend(u.Z.Quadtree.prototype,{contains:function(t,e){return this.xlb<t&&t<=this.xub&&this.ylb<e&&e<=this.yub},insert:function(t){switch(this.config.pointType){case"coords":if(!this.contains(t.usrCoords[1],t.usrCoords[2]))return!1;break;case"object":if(!this.contains(t.x,t.y))return!1}return this.points.length<this.config.capacity&&null===this.northWest?(this.points.push(t),!0):(null===this.northWest&&this.subdivide(),!!(this.northWest.insert(t)||this.northEast.insert(t)||this.southEast.insert(t))||!!this.southWest.insert(t))},subdivide:function(){var t=this.xlb+(this.xub-this.xlb)*.5,e=this.ylb+(this.yub-this.ylb)*.5;this.northWest=new u.Z.Quadtree([this.xlb,this.yub,t,e],this.config,this),this.northEast=new u.Z.Quadtree([t,this.yub,this.xub,e],this.config,this),this.southEast=new u.Z.Quadtree([this.xlb,e,t,this.ylb],this.config,this),this.southWest=new u.Z.Quadtree([t,e,this.xub,this.ylb],this.config,this)},_query:function(t,e){var r;if(this.contains(t,e)){if(null===this.northWest)return this;if((r=this.northWest._query(t,e))||(r=this.northEast._query(t,e))||(r=this.southEast._query(t,e))||(r=this.southWest._query(t,e)))return r}return!1},query:function(t,e){var r,i;return a.Z.exists(e)?(r=t,i=e):(r=t.usrCoords[1],i=t.usrCoords[2]),this._query(r,i)},hasPoint:function(t,e,r){var i,n,o;if(this.contains(t,e)){switch(o=this.points.length,this.config.pointType){case"coords":for(n=0;n<o;n++)if(c.Z.distance([t,e],this.points[n].usrCoords.slice(1),2)<r)return!0;break;case"object":for(n=0;n<o;n++)if(c.Z.distance([t,e],[this.points[n].x,this.points[n].y],2)<r)return!0}if(null===this.northWest)return!1;if((i=this.northWest.hasPoint(t,e,r))||(i=this.northEast.hasPoint(t,e,r))||(i=this.southEast.hasPoint(t,e,r))||(i=this.southWest.hasPoint(t,e,r)))return i}return!1},getAllPoints:function(){var t=[];return this.getAllPointsRecursive(t),t},getAllPointsRecursive(t){Array.prototype.push.apply(t,this.points.slice()),null!==this.northWest&&(this.northWest.getAllPointsRecursive(t),this.northEast.getAllPointsRecursive(t),this.southEast.getAllPointsRecursive(t),this.southWest.getAllPointsRecursive(t))}});var d=u.Z.Quadtree;u.Z.BoxQuadtree=function(t,e,r){var i,n,o,s;t--,this.depth=t,this.capacity=e,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,r&&(i=r[0],n=r[1],o=r[2],s=r[3],this.cx=(i+o)*.5,this.cy=(n+s)*.5,this.bbox=[i,n,o,s])},a.Z.extend(u.Z.BoxQuadtree.prototype,{insert:function(t){var e,r,i,n,o,s,a,u,h,l,c,d=[],f=[],p=[],m=[];if(null===this.bbox){for(e=0,r=t.length,i=s=1/0,o=n=-1/0;e<t.length;e++)i=(a=t[e]).xlb<i?a.xlb:i,n=a.yub>n?a.yub:n,o=a.xub>o?a.xub:o,s=a.ylb<s?a.ylb:s;this.cx=(i+o)*.5,this.cy=(n+s)*.5,this.bbox=[i,n,o,s]}else i=this.bbox[0],n=this.bbox[1],o=this.bbox[2],s=this.bbox[3];if(0===this.depth||this.items.length+t.length<this.capacity)return this.items=this.items.concat(t),this;for(e=0,r=t.length;e<r;e++)u=(a=t[e]).xlb<=this.cx&&a.yub>this.cy,l=a.xlb<=this.cx&&a.ylb<=this.cy,h=a.xub>this.cx&&a.yub>this.cy,c=a.xub>this.cx&&a.ylb<=this.cy,u&&h&&c&&l?this.items.push(a):(u&&d.push(a),l&&p.push(a),h&&f.push(a),c&&m.push(a));return this.subdivide(d,p,f,m,i,n,o,s),this},insertItem:function(t){var e,r,i,n,o,s,a,u,h=[],l=[],c=[],d=[];return(null===this.bbox?(e=n=1/0,i=r=-1/0,e=t.xlb<e?t.xlb:e,r=t.yub>r?t.yub:r,i=t.xub>i?t.xub:i,n=t.ylb<n?t.ylb:n,this.cx=(e+i)*.5,this.cy=(r+n)*.5,this.bbox=[e,r,i,n]):(e=this.bbox[0],r=this.bbox[1],i=this.bbox[2],n=this.bbox[3]),0===this.depth||this.items.length+1<this.capacity)?this.items.push(t):(o=t.xlb<=this.cx&&t.yub>this.cy,a=t.xlb<=this.cx&&t.ylb<=this.cy,s=t.xub>this.cx&&t.yub>this.cy,u=t.xub>this.cx&&t.ylb<=this.cy,o&&s&&u&&a?this.items.push(t):(o&&h.push(t),a&&c.push(t),s&&l.push(t),u&&d.push(t)),this.subdivide(h,c,l,d,e,r,i,n)),this},subdivide:function(t,e,r,i,n,o,s,a){return t.length>0&&(null===this.northWest&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[n,o,this.cx,this.cy])),this.northWest.insert(t)),e.length>0&&(null===this.southWest&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[n,this.cy,this.cx,a])),this.southWest.insert(e)),r.length>0&&(null===this.northEast&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,o,s,this.cy])),this.northEast.insert(r)),i.length>0&&(null===this.southEast&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,s,a])),this.southEast.insert(i)),this},find:function(t){var e,r,i,n=[];for(r=0,i=this.items.length;r<i;r++)e=this.items[r],t[2]>=e.xlb&&t[0]<=e.xub&&t[3]<=e.yub&&t[1]>=e.ylb&&n.push(this.items[r]);return null!==this.northWest&&t[0]<=this.cx&t[1]>=this.cy&&(n=n.concat(this.northWest.find(t))),null!==this.southWest&&t[0]<=this.cx&t[3]<=this.cy&&(n=n.concat(this.southWest.find(t))),null!==this.northEast&&t[2]>=this.cx&t[1]>=this.cy&&(n=n.concat(this.northEast.find(t))),null!==this.southEast&&t[2]>=this.cx&t[3]<=this.cy&&(n=n.concat(this.southEast.find(t))),n},analyzeTree:function(){var t,e={number_items:this.items.length,depth:1};return null!==this.northWest&&(t=this.northWest.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.southWest&&(t=this.southWest.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.northEast&&(t=this.northEast.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.southEast&&(t=this.southEast.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),e},plot:function(){var t,e=[],r=[];return e.push(this.bbox[0]),r.push(this.bbox[3]),e.push(this.bbox[2]),r.push(this.bbox[3]),e.push(this.bbox[2]),r.push(this.bbox[1]),e.push(this.bbox[0]),r.push(this.bbox[1]),e.push(this.bbox[0]),r.push(this.bbox[3]),e.push(NaN),r.push(NaN),null!==this.northWest&&(t=this.northWest.plot(),e=e.concat(t[0]),r=r.concat(t[1])),null!==this.northEast&&(t=this.northEast.plot(),e=e.concat(t[0]),r=r.concat(t[1])),null!==this.southEast&&(t=this.southEast.plot(),e=e.concat(t[0]),r=r.concat(t[1])),null!==this.southWest&&(t=this.southWest.plot(),e=e.concat(t[0]),r=r.concat(t[1])),[e,r]}});var f=u.Z.BoxQuadtree,p=r(6692);n.Z.Math.Nlp={arr:function(t){return new Float64Array(t)},arr2:function(t,e){for(var r=0,i=Array(t);r<t;)i[r]=this.arr(e),r++;return i},arraycopy:function(t,e,r,i,n){for(var o=0;o<n;)r[o+i]=t[o+e],o++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(t,e,r,i,n,o,s,a,u){var h,l=this.arr(e+1),c=this;return this.lastNumberOfEvaluations=0,u&&console.log("Experimental feature 'testForRoundingErrors' is activated."),l[0]=0,this.arraycopy(i,0,l,1,e),h=this.cobylb(function(e,r,i,n){var o,s,a=c.arr(e);return c.lastNumberOfEvaluations=c.lastNumberOfEvaluations+1,c.arraycopy(i,1,a,0,e),o=c.arr(r),s=t(e,r,a,o),c.arraycopy(o,0,n,1,r),s},e,r,r+2,l,n,o,s,a,u),this.arraycopy(l,1,i,0,e),h},cobylb:function(t,e,r,i,n,o,s,a,u,h){var l,c,d,f,p,m,v,g,b,y,C,Z,x,_,E,w,N,S,A,P,D,M,O,T,B,F,R,L,k,I=-1,Y=0,U=0,j=e+1,z=r+1,X=o,J=0,G=!1,H=!1,V=0,q=0,W=0,Q=this.arr(1+i),$=this.arr2(1+e,1+j),K=this.arr2(1+e,1+e),tt=this.arr2(1+i,1+j),te=this.arr2(1+e,1+z),tr=this.arr(1+e),ti=this.arr(1+e),tn=this.arr(1+e),to=this.arr(1+e),ts=this.arr(1+e);for(a>=2&&console.log("The initial value of RHO is "+X+" and PARMU is set to zero."),g=0,m=1/X,c=1;c<=e;++c)$[c][j]=n[c],$[c][c]=X,K[c][c]=m;b=j,y=!1;t:for(;;){if(g>=u&&g>0){I=this.MaxIterationsReached;break}for(++g,Y=t(e,r,n,Q),U=0,f=1;f<=r;++f)U=Math.max(U,-Q[f]);if((g===a-1||3===a)&&this.PrintIterationResult(g,Y,U,n,e,a),Q[z]=Y,Q[i]=U,C=!0,!y){for(c=1,C=!1;c<=i;++c)tt[c][b]=Q[c];if(g<=j){if(b<=e){if(tt[z][j]<=Y)n[b]=$[b][j];else{for(f=1,$[b][j]=n[b];f<=i;++f)tt[f][b]=tt[f][j],tt[f][j]=Q[f];for(f=1;f<=b;++f){for($[b][f]=-X,m=0,c=f;c<=b;++c)m-=K[c][f];K[b][f]=m}}}if(g<=e){b=g,n[b]+=X;continue}}y=!0}e:for(;;){do{if(!C){for(d=1,Z=tt[z][j]+J*tt[i][j],x=j;d<=e;++d)(m=tt[z][d]+J*tt[i][d])<Z?(x=d,Z=m):m===Z&&0===J&&tt[i][d]<tt[i][x]&&(x=d);if(x<=e){for(c=1;c<=i;++c)m=tt[c][j],tt[c][j]=tt[c][x],tt[c][x]=m;for(c=1;c<=e;++c){for(m=$[c][x],$[c][x]=0,$[c][j]+=m,v=0,f=1;f<=e;++f)$[c][f]-=m,v-=K[f][c];K[x][c]=v}}if(_=0,h)for(c=1;c<=e;++c)for(d=1;d<=e;++d)_=Math.max(_,Math.abs(m=this.DOT_PRODUCT_ROW_COL(K,c,$,d,1,e)-(c===d?1:0)));if(_>.1){I=this.DivergingRoundingErrors;break t}for(f=1;f<=z;++f){for(d=1,Q[f]=-tt[f][j];d<=e;++d)ts[d]=tt[f][d]+Q[f];for(c=1;c<=e;++c)te[c][f]=(f===z?-1:1)*this.DOT_PRODUCT_ROW_COL(ts,-1,K,c,1,e)}for(d=1,G=!0,V=.25*X,E=2.1*X;d<=e;++d){for(f=1,w=0,N=0;f<=e;++f)w+=K[d][f]*K[d][f],N+=$[f][d]*$[f][d];tr[d]=1/Math.sqrt(w),ti[d]=Math.sqrt(N),(tr[d]<V||ti[d]>E)&&(G=!1)}if(!y&&!G){for(d=1,b=0,m=E;d<=e;++d)ti[d]>m&&(b=d,m=ti[d]);if(0===b)for(d=1;d<=e;++d)tr[d]<m&&(b=d,m=tr[d]);for(f=1,m=.5*X*tr[b];f<=e;++f)to[f]=m*K[b][f];for(f=1,S=0,A=0,l=0;f<=z;++f)l=this.DOT_PRODUCT_ROW_COL(to,-1,te,f,1,e),f<z&&(S=Math.max(S,-l-(m=tt[f][j])),A=Math.max(A,l-m));for(c=1,P=J*(S-A)>2*l?-1:1,m=0;c<=e;++c)to[c]=P*to[c],$[c][b]=to[c],m+=K[b][c]*to[c];for(f=1;f<=e;++f)K[b][f]/=m;for(d=1;d<=e;++d){if(d!==b)for(f=1,m=this.DOT_PRODUCT_ROW_COL(K,d,to,-1,1,e);f<=e;++f)K[d][f]-=m*K[b][f];n[d]=$[d][j]+to[d]}continue t}if(!(H=this.trstlp(e,r,te,Q,X,to))){for(f=1,m=0;f<=e;++f)m+=to[f]*to[f];if(m<.25*X*X){y=!0;break}}for(f=1,l=0,D=0,Q[z]=0;f<=z;++f)l=Q[f]-this.DOT_PRODUCT_ROW_COL(to,-1,te,f,1,e),f<z&&(D=Math.max(D,l));if(J<1.5*(M=(q=tt[i][j]-D)>0?l/q:0)){for(J=2*M,a>=2&&console.log("Increase in PARMU to "+J),O=tt[z][j]+J*tt[i][j],d=1;d<=e;++d)if((m=tt[z][d]+J*tt[i][d])<O||m===O&&0===J&&tt[i][d]<tt[i][j])continue e}for(f=1,W=J*q-l;f<=e;++f)n[f]=$[f][j]+to[f];y=!0;continue t}for(C=!1,T=tt[z][j]+J*tt[i][j]-(Y+J*U),0===J&&Y===tt[z][j]&&(W=q,T=tt[i][j]-U),B=T<=0?1:0,b=0,d=1;d<=e;++d)(m=Math.abs(this.DOT_PRODUCT_ROW_COL(K,d,to,-1,1,e)))>B&&(b=d,B=m),tn[d]=m*tr[d];for(d=1,F=1.1*X,p=0;d<=e;++d)if(tn[d]>=V||tn[d]>=tr[d]){if(m=ti[d],T>0){for(f=1,m=0;f<=e;++f)m+=Math.pow(to[f]-$[f][d],2);m=Math.sqrt(m)}m>F&&(p=d,F=m)}if(p>0&&(b=p),0!==b){for(c=1,m=0;c<=e;++c)$[c][b]=to[c],m+=K[b][c]*to[c];for(f=1;f<=e;++f)K[b][f]/=m;for(d=1;d<=e;++d)if(d!==b)for(f=1,m=this.DOT_PRODUCT_ROW_COL(K,d,to,-1,1,e);f<=e;++f)K[d][f]-=m*K[b][f];for(f=1;f<=i;++f)tt[f][b]=Q[f];if(T>0&&T>=.1*W)continue e}}while(!1);if(!G){y=!1;continue}if(X<=s){I=this.Normal;break t}if(R=0,L=0,(X*=.5)<=1.5*s&&(X=s),J>0){for(f=1,k=0;f<=z;++f){for(c=1,L=R=tt[f][j];c<=e;++c)R=Math.min(R,tt[f][c]),L=Math.max(L,tt[f][c]);f<=r&&R<.5*L&&(m=Math.max(L,0)-R,k=k<=0?m:Math.min(k,m))}0===k?J=0:L-R<J*k&&(J=(L-R)/k)}a>=2&&console.log("Reduction in RHO to "+X+"  and PARMU = "+J),2===a&&this.PrintIterationResult(g,tt[z][j],tt[i][j],this.COL($,j),e,a)}}switch(I){case this.Normal:if(a>=1&&console.log("%nNormal return from subroutine COBYLA%n"),H)return a>=1&&this.PrintIterationResult(g,Y,U,n,e,a),I;break;case this.MaxIterationsReached:a>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:a>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(f=1;f<=e;++f)n[f]=$[f][j];return Y=tt[z][j],U=tt[i][j],a>=1&&this.PrintIterationResult(g,Y,U,n,e,a),I},trstlp:function(t,e,r,i,n,o){var s,a,h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_,E,w,N,S,A,P,D,M,O,T,B,F,R,L,k,I,Y,U=0,j=0,z=0,X=this.arr2(1+t,1+t),J=this.arr(2+e),G=this.arr(2+e),H=this.arr(1+t),V=this.arr(1+t),q=this.arr(2+e),W=this.arr(2+e),Q=e,$=0;for(h=1;h<=t;++h)X[h][h]=1,o[h]=0;if(s=0,a=0,e>=1){for(l=1;l<=e;++l)i[l]>a&&(a=i[l],s=l);for(l=1;l<=e;++l)W[l]=l,G[l]=a-i[l]}c=!0;do r:for(;;){(!c||c&&0===a)&&(s=Q=e+1,W[Q]=Q,G[Q]=0),c=!1,d=0,f=0,p=0,m=0;do{if(v=Q===e?a:-this.DOT_PRODUCT_ROW_COL(o,-1,r,Q,1,t),0===f||v<d?(d=v,j=$,f=3):$>j?(j=$,f=3):--f,0===f)break r;if(g=0,s<=$){if(s<$){b=W[s],y=G[s],l=s;do{for(h=1,x=W[Z=l+1],_=this.DOT_PRODUCT(this.PART(this.COL(X,l),1,t),this.PART(this.COL(r,x),1,t)),U=u.Z.hypot(_,J[Z]),E=J[Z]/U,w=_/U,J[Z]=E*J[l],J[l]=U;h<=t;++h)U=E*X[h][Z]+w*X[h][l],X[h][Z]=E*X[h][l]-w*X[h][Z],X[h][l]=U;W[l]=x,G[l]=G[Z],l=Z}while(l<$);W[l]=b,G[l]=y}if(--$,Q>e)for(l=1,U=1/J[$];l<=t;++l)H[l]=U*X[l][$];else for(l=1,U=this.DOT_PRODUCT_ROW_COL(H,-1,X,$+1,1,t);l<=t;++l)H[l]-=U*X[l][$+1]}else{for(l=1,x=W[s];l<=t;++l)V[l]=r[l][x];for(N=0,l=t;l>$;){for(h=1,_=0,S=0;h<=t;++h)_+=U=X[h][l]*V[h],S+=Math.abs(U);if(A=S+.1*Math.abs(_),P=S+.2*Math.abs(_),(S>=A||A>=P)&&(_=0),0===N)N=_;else for(h=1,Z=l+1,U=u.Z.hypot(_,N),E=_/U,w=N/U,N=U;h<=t;++h)U=E*X[h][l]+w*X[h][Z],X[h][Z]=E*X[h][Z]-w*X[h][l],X[h][l]=U;--l}if(0===N){g=-1,l=$;do{for(h=1,D=0,M=0;h<=t;++h)D+=U=X[h][l]*V[h],M+=Math.abs(U);if(A=M+.1*Math.abs(D),P=M+.2*Math.abs(D),M<A&&A<P){if((U=D/J[l])>0&&W[l]<=e&&(Y=G[l]/U,(g<0||Y<g)&&(g=Y)),l>=2)for(h=1,O=W[l];h<=t;++h)V[h]-=U*r[h][O];q[l]=U}else q[l]=0}while(--l>0);if(g<0)break r;for(l=1;l<=$;++l)G[l]=Math.max(0,G[l]-g*q[l]);if(s<$){b=W[s],y=G[s],l=s;do{for(h=1,O=W[Z=l+1],_=this.DOT_PRODUCT(this.PART(this.COL(X,l),1,t),this.PART(this.COL(r,O),1,t)),U=u.Z.hypot(_,J[Z]),E=J[Z]/U,w=_/U,J[Z]=E*J[l],J[l]=U;h<=t;++h)U=E*X[h][Z]+w*X[h][l],X[h][Z]=E*X[h][l]-w*X[h][Z],X[h][l]=U;W[l]=O,G[l]=G[Z],l=Z}while(l<$);W[l]=b,G[l]=y}if(0===(U=this.DOT_PRODUCT(this.PART(this.COL(X,$),1,t),this.PART(this.COL(r,x),1,t))))break r;J[$]=U,G[s]=0,G[$]=g}else J[++$]=N,G[s]=G[$],G[$]=0;if(W[s]=W[$],W[$]=x,Q>e&&x!==Q){for(h=1,l=$-1,_=this.DOT_PRODUCT(this.PART(this.COL(X,l),1,t),this.PART(this.COL(r,x),1,t)),U=u.Z.hypot(_,J[$]),E=J[$]/U,w=_/U,J[$]=E*J[l],J[l]=U;h<=t;++h)U=E*X[h][$]+w*X[h][l],X[h][$]=E*X[h][l]-w*X[h][$],X[h][l]=U;W[$]=W[l],W[l]=x,U=G[l],G[l]=G[$],G[$]=U}if(Q>e)for(l=1,U=1/J[$];l<=t;++l)H[l]=U*X[l][$];else for(l=1,x=W[$],U=(this.DOT_PRODUCT_ROW_COL(H,-1,r,x,1,t)-1)/J[$];l<=t;++l)H[l]-=U*X[l][$]}for(h=1,T=n*n,F=0,B=0;h<=t;++h)Math.abs(o[h])>=1e-6*n&&(T-=o[h]*o[h]),F+=o[h]*H[h],B+=H[h]*H[h];if(T<=0)break r;if(Math.abs(F)>=1e-6*(U=Math.sqrt(B*T))&&(U=Math.sqrt(B*T+F*F)),p=m=T/(U+F),Q===e){if(A=p+.1*a,P=p+.2*a,p>=A||A>=P)break;p=Math.min(p,a)}for(l=1;l<=t;++l)V[l]=o[l]+p*H[l];if(Q===e)for(l=1,z=a,a=0;l<=$;++l)a=Math.max(a,U=i[x=W[l]]-this.DOT_PRODUCT_ROW_COL(V,-1,r,x,1,t));l=$;do{for(h=1,R=0,L=0;h<=t;++h)R+=U=X[h][l]*V[h],L+=Math.abs(U);if(A=L+.1*Math.abs(R),P=L+.2*Math.abs(R),(L>=A||A>=P)&&(R=0),q[l]=R/J[l],l>=2)for(h=1,x=W[l];h<=t;++h)V[h]-=q[l]*r[h][x]}while(l-- >=2);for(Q>e&&(q[$]=Math.max(0,q[$])),l=1;l<=t;++l)V[l]=o[l]+p*H[l];if(Q>$)for(l=k=$+1;l<=Q;++l){for(h=1,C=a-i[x=W[l]],I=a+Math.abs(i[x]);h<=t;++h)C+=U=r[h][x]*V[h],I+=Math.abs(U);A=I+.1*Math.abs(C),P=I+.2*Math.abs(C),(I>=A||A>=P)&&(C=0),q[l]=C}for(l=1,g=1,s=0;l<=Q;++l)q[l]<0&&(U=G[l]/(G[l]-q[l]))<g&&(g=U,s=l);for(l=1,U=1-g;l<=t;++l)o[l]=U*o[l]+g*V[l];for(l=1;l<=Q;++l)G[l]=Math.max(0,U*G[l]+g*q[l]);Q===e&&(a=z+g*(a-z))}while(s>0);if(p===m)return!0}while(Q===e);return!1},PrintIterationResult:function(t,e,r,i,n,o){o>1&&console.log("NFVALS = "+t+"  F = "+e+"  MAXCV = "+r),o>1&&console.log("X = "+this.PART(i,1,n))},ROW:function(t,e){return t[e].slice()},COL:function(t,e){var r,i=t.length,n=[];for(r=0;r<i;++r)n[r]=t[r][e];return n},PART:function(t,e,r){return t.slice(e,r+1)},FORMAT:function(t){return t.join(",")},DOT_PRODUCT:function(t,e){var r,i=0,n=t.length;for(r=0;r<n;++r)i+=t[r]*e[r];return i},DOT_PRODUCT_ROW_COL:function(t,e,r,i,n,o){var s,a=0;if(-1===e)for(s=n;s<=o;++s)a+=t[s]*r[s][i];else if(-1===i)for(s=n;s<=o;++s)a+=t[e][s]*r[s];else for(s=n;s<=o;++s)a+=t[e][s]*r[s][i];return a}},n.Z.Math.Nlp;var m=r(9401),v=r(4401);u.Z.Plot={checkReal:function(t){var e,r,i=!1,n=t.length;for(e=0;e<n;e++)if(!isNaN((r=t[e].usrCoords)[1])&&!isNaN(r[2])&&Math.abs(r[0])>u.Z.eps){i=!0;break}return i},updateParametricCurveNaive:function(t,e,r,i){var n,o,a=!1,u=(r-e)/i;for(n=0;n<i;n++)o=e+n*u,t.points[n].setCoordinates(s.Z.COORDS_BY_USER,[t.X(o,a),t.Y(o,a)],!1),t.points[n]._t=o,a=!0;return t},isSegmentOutside:function(t,e,r,i,n){return e<0&&i<0||e>n.canvasHeight&&i>n.canvasHeight||t<0&&r<0||t>n.canvasWidth&&r>n.canvasWidth},isDistOK:function(t,e,r,i){return Math.abs(t)<r&&Math.abs(e)<i&&!isNaN(t+e)},isSegmentDefined:function(t,e,r,i){return!(isNaN(t+e)&&isNaN(r+i))},updateParametricCurveOld:function(t,e,r){var i,o,a,h,l,c,d,f,p,v,g,b=!1,y=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1),C=[],Z=[],x=[],_=[],E=!1,w=0;for(n.Z.deprecated("Curve.updateParametricCurveOld()"),t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(p=15,v=10,g=10):(p=21,v=.7,g=.7),_[0]=r-e,i=1;i<p;i++)_[i]=.5*_[i-1];i=1,C[0]=1,Z[0]=0,o=e,y.setCoordinates(s.Z.COORDS_BY_USER,[t.X(o,b),t.Y(o,b)],!1),b=!0,l=y.scrCoords[1],c=y.scrCoords[2],o=r,y.setCoordinates(s.Z.COORDS_BY_USER,[t.X(o,b),t.Y(o,b)],!1),a=y.scrCoords[1],h=y.scrCoords[2],x[0]=[a,h],d=1,f=0,t.points=[],t.points[w++]=new m.Z(s.Z.COORDS_BY_SCREEN,[l,c],t.board,!1);do{for(E=this.isDistOK(a-l,h-c,v,g)||this.isSegmentOutside(l,c,a,h,t.board);f<p&&(!E||f<6)&&(f<=7||this.isSegmentDefined(l,c,a,h));)C[d]=i,Z[d]=f,x[d]=[a,h],d+=1,o=e+(i=2*i-1)*_[++f],y.setCoordinates(s.Z.COORDS_BY_USER,[t.X(o,b),t.Y(o,b)],!1,!0),a=y.scrCoords[1],h=y.scrCoords[2],E=this.isDistOK(a-l,h-c,v,g)||this.isSegmentOutside(l,c,a,h,t.board);w>1&&.015>function(t,e,r){var i,n=r[1]-t[1],o=r[2]-t[2],s=e[0]-t[1],a=e[1]-t[2],h=s*s+a*a;return h>=u.Z.eps&&(i=(n*s+o*a)/h)>0&&(i<=1?(n-=i*s,o-=i*a):(n-=s,o-=a)),u.Z.hypot(n,o)}(t.points[w-2].scrCoords,[a,h],t.points[w-1].scrCoords)&&(w-=1),t.points[w]=new m.Z(s.Z.COORDS_BY_SCREEN,[a,h],t.board,!1),t.points[w]._t=o,w+=1,l=a,c=h,d-=1,a=x[d][0],h=x[d][1],f=Z[d]+1,i=2*C[d]}while(d>0&&w<5e5);return t.numberPoints=t.points.length,t},_insertPoint_v2:function(t,e,r){var i=!isNaN(this._lastCrds[1]+this._lastCrds[2]),n=!isNaN(e.scrCoords[1]+e.scrCoords[2]),o=t.board.canvasWidth,s=t.board.canvasHeight;(!(n=n&&e.scrCoords[1]>-500&&e.scrCoords[2]>-500&&e.scrCoords[1]<o+500&&e.scrCoords[2]<s+500)&&i||n&&(!i||Math.abs(e.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(e.scrCoords[2]-this._lastCrds[2])>.7))&&(e._t=r,t.points.push(e),this._lastCrds=e.copy("scrCoords"))},neighborhood_isNaN_v2:function(t,e){var r,i,n=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1);return r=e+u.Z.eps,n.setCoordinates(s.Z.COORDS_BY_USER,[t.X(r,!0),t.Y(r,!0)],!1),!!(isNaN((i=n.usrCoords)[1]+i[2])||(r=e-u.Z.eps,n.setCoordinates(s.Z.COORDS_BY_USER,[t.X(r,!0),t.Y(r,!0)],!1),isNaN((i=n.usrCoords)[1]+i[2])))},_borderCase:function(t,e,r,i,n,o,a,u){var h,l,c,d,f,p,v=null,g=!1;if(u<=1){if(l=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1),isNaN(e[1]+e[2])&&!isNaN(i[1]+i[2])&&!this.neighborhood_isNaN_v2(t,n)||isNaN(r[1]+r[2])&&!isNaN(i[1]+i[2])&&!this.neighborhood_isNaN_v2(t,o)||isNaN(i[1]+i[2])&&(!isNaN(e[1]+e[2])||!isNaN(r[1]+r[2]))&&!this.neighborhood_isNaN_v2(t,a))return!1;d=0;do{if(isNaN(e[1]+e[2])&&!isNaN(i[1]+i[2]))f=n,p=a;else if(isNaN(r[1]+r[2])&&!isNaN(i[1]+i[2]))f=o,p=a;else if(isNaN(i[1]+i[2])&&!isNaN(r[1]+r[2]))f=a,p=o;else{if(!isNaN(i[1]+i[2])||isNaN(e[1]+e[2]))return!1;f=a,p=n}h=.5*(f+p),l.setCoordinates(s.Z.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),(g=isNaN((c=l.usrCoords)[1]+c[2]))?f=h:p=h,++d}while(g&&d<30);if(d<30&&(v=c.slice(),i=c.slice(),p=h),null!==v)return this._insertPoint_v2(t,new m.Z(s.Z.COORDS_BY_USER,v,t.board,!1)),!0}return!1},_plotRecursive_v2:function(t,e,r,i,n,o,a){var u,h,l,c,d,f=0,p=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1);return t.numberPoints>65536?void 0:(o<this.nanLevel&&this._isUndefined(t,e,r,i,n)||o<this.nanLevel&&this._isOutside(e,r,i,n,t.board)||(u=(r+n)*.5,p.setCoordinates(s.Z.COORDS_BY_USER,[t.X(u,!0),t.Y(u,!0)],!1),h=p.scrCoords,this._borderCase(t,e,i,h,r,n,u,o)||(l=this._triangleDists(e,i,h),c=o<this.smoothLevel&&l[3]<a,d=o<=this.jumpLevel&&(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))||o<this.jumpLevel&&(l[2]>.99*l[0]||l[1]>.99*l[0]||l[0]===1/0||l[1]===1/0||l[2]===1/0),o<this.smoothLevel+2&&l[0]<.5*(l[1]+l[2])&&(f=0,c=!1),--o,d?this._insertPoint_v2(t,new m.Z(s.Z.COORDS_BY_SCREEN,[NaN,NaN],t.board,!1),u):o<=f||c?this._insertPoint_v2(t,p,u):(this._plotRecursive_v2(t,e,r,h,u,o,a),isNaN(p.scrCoords[1]+p.scrCoords[2])||this._insertPoint_v2(t,p,u),this._plotRecursive_v2(t,h,u,i,n,o,a)))),this)},updateParametricCurve_v2:function(t,e,r){var i,n,o,u,h,l,c,d,f,p=!1,v=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1),g=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1);return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(h=a.Z.evaluate(t.visProp.recursiondepthlow)||13,l=2,this.smoothLevel=h-6,this.jumpLevel=3):(h=a.Z.evaluate(t.visProp.recursiondepthhigh)||17,l=2,this.smoothLevel=h-9,this.jumpLevel=2),this.nanLevel=h-4,t.points=[],"x"===this.xterm?(c=((d=t.board.getBoundingBox())[2]-d[0])*.3,i=Math.max(e,d[0]-c),n=Math.min(r,d[2]+c)):(i=e,n=r),v.setCoordinates(s.Z.COORDS_BY_USER,[t.X(i,p),t.Y(i,p)],!1),p=!0,g.setCoordinates(s.Z.COORDS_BY_USER,[t.X(n,p),t.Y(n,p)],!1),f=this._findStartPoint(t,v.scrCoords,i,g.scrCoords,n),v.setCoordinates(s.Z.COORDS_BY_SCREEN,f[0],!1),i=f[1],f=this._findStartPoint(t,g.scrCoords,n,v.scrCoords,i),g.setCoordinates(s.Z.COORDS_BY_SCREEN,f[0],!1),n=f[1],this._visibleArea=[i,n],o=v.copy("scrCoords"),u=g.copy("scrCoords"),v._t=i,t.points.push(v),this._lastCrds=v.copy("scrCoords"),this._plotRecursive_v2(t,o,i,u,n,h,l),g._t=n,t.points.push(g),t.numberPoints=t.points.length,t},_insertLimesPoint:function(t,e,r,i,n){var o,a,h;(Math.abs(this._lastUsrCrds[1])!==1/0||Math.abs(n.left_x)!==1/0)&&(Math.abs(this._lastUsrCrds[2])!==1/0||Math.abs(n.left_y)!==1/0)&&((o=new m.Z(s.Z.COORDS_BY_USER,[n.left_x,n.left_y],t.board))._t=r,t.points.push(o),!isNaN(n.left_x)&&!isNaN(n.left_y)&&!isNaN(n.right_x)&&!isNaN(n.right_y)&&(Math.abs(n.left_x-n.right_x)>u.Z.eps||Math.abs(n.left_y-n.right_y)>u.Z.eps)&&((a=new m.Z(s.Z.COORDS_BY_SCREEN,e,t.board))._t=r,t.points.push(a)),(h=new m.Z(s.Z.COORDS_BY_USER,[n.right_x,n.right_y],t.board))._t=r,t.points.push(h),this._lastScrCrds=h.copy("scrCoords"),this._lastUsrCrds=h.copy("usrCoords"))},_insertPoint:function(t,e,r,i,n){var o,u=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),h=!isNaN(e[1]+e[2]),l=t.board.canvasWidth,c=t.board.canvasHeight;if(a.Z.exists(n)){this._insertLimesPoint(t,e,r,i,n);return}h=h&&e[1]>-500&&e[2]>-500&&e[1]<l+500&&e[2]<c+500,!u&&!h||h&&u&&.8>Math.abs(e[1]-this._lastScrCrds[1])&&.8>Math.abs(e[2]-this._lastScrCrds[2])||Math.abs(e[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(e[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((o=new m.Z(s.Z.COORDS_BY_SCREEN,e,t.board))._t=r,t.points.push(o),this._lastScrCrds=o.copy("scrCoords"),this._lastUsrCrds=o.copy("usrCoords"))},_triangleDists:function(t,e,r){var i,n;return i=[t[0]*e[0],(t[1]+e[1])*.5,(t[2]+e[2])*.5],n=c.Z.distance(t,e,3),[n,c.Z.distance(t,r,3),c.Z.distance(r,e,3),c.Z.distance(r,i,3)]},_isUndefined:function(t,e,r,i,n){var o,a,u;if(!isNaN(e[1]+e[2])||!isNaN(i[1]+i[2]))return!1;for(a=0,u=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1);a<20;++a)if(o=r+Math.random()*(n-r),u.setCoordinates(s.Z.COORDS_BY_USER,[t.X(o,!0),t.Y(o,!0)],!1),!isNaN(u.scrCoords[0]+u.scrCoords[1]+u.scrCoords[2]))return!1;return!0},_isOutside:function(t,e,r,i,n){var o=n.canvasWidth,s=n.canvasHeight;return!!(t[1]<-500&&r[1]<-500||t[2]<-500&&r[2]<-500||t[1]>o+500&&r[1]>o+500||t[2]>s+500&&r[2]>s+500)},_isOutsidePoint:function(t,e){var r=e.canvasWidth,i=e.canvasHeight;return!!(t[1]<-500||t[2]<-500||t[1]>r+500||t[2]>i+500)},_findStartPoint:function(t,e,r,i,n){return[e,r]},_getBorderPos:function(t,e,r,i,n,o,a){var h,l,c,d,f,p;if(l=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1),d=0,isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2]))p=e,f=i;else if(isNaN(a[1]+a[2])&&!isNaN(n[1]+n[2]))p=o,f=i;else if(isNaN(n[1]+n[2])&&!isNaN(a[1]+a[2]))p=i,f=o;else{if(!isNaN(n[1]+n[2])||isNaN(r[1]+r[2]))return!1;p=i,f=e}do h=.5*(f+p),l.setCoordinates(s.Z.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),isNaN((c=l.usrCoords)[1]+c[2])?p=h:f=h,++d;while(d<30&&Math.abs(f-p)>u.Z.eps);return h},_getCuspPos:function(t,e,r){var i=[t.X(e,!0),t.Y(e,!0)],n=[t.X(r,!0),t.Y(r,!0)];return p.Z.fminbr(function(e){var r=[t.X(e,!0),t.Y(e,!0)];return-(u.Z.hypot(i[0]-r[0],i[1]-r[1])+u.Z.hypot(n[0]-r[0],n[1]-r[1]))},[e,r],t)},_getJumpPos:function(t,e,r){return p.Z.fminbr(function(e){var r=u.Z.eps*u.Z.eps,i=[t.X(e,!0),t.Y(e,!0)],n=[t.X(e+r,!0),t.Y(e+r,!0)];return-Math.abs((n[1]-i[1])/(n[0]-i[0]))},[e,r],t)},_getLimits:function(t,e){var r,i,n,o,s,a=2/(t.maxX()-t.minX());return i=(r=l.limit(e,-a,t.X))[0],"infinite"===r[1]&&(i=1/0*Math.sign(i)),o=(r=l.limit(e,-a,t.Y))[0],"infinite"===r[1]&&(o=1/0*Math.sign(o)),n=(r=l.limit(e,a,t.X))[0],"infinite"===r[1]&&(n=1/0*Math.sign(n)),s=(r=l.limit(e,a,t.Y))[0],"infinite"===r[1]&&(s=1/0*Math.sign(s)),{left_x:i,left_y:o,right_x:n,right_y:s,t:e}},_getLimes:function(t,e,r,i,n,o,s,a,u){var h;return"border"===a?h=this._getBorderPos(t,e,r,i,n,o,s):"cusp"===a?h=this._getCuspPos(t,e,o):"jump"===a&&(h=this._getJumpPos(t,e,o)),this._getLimits(t,h)},_plotNonRecursive:function(t,e,r,i,n,o){var s,a,u,h,l,c,d,f,p,m,v,g=null,b=!1,y="",C=[],Z=0;for(f=t.board.origin.scrCoords,C[Z++]=[e,r,i,n,o,1/0];Z>0;){if(e=(v=C[--Z])[0],r=v[1],i=v[2],n=v[3],p=v[4],m=v[5],b=!1,y="",g=null,t.points.length>65536)return;p<this.nanLevel&&(this._isUndefined(t,e,r,i,n)||this._isOutside(e,r,i,n,t.board))||(s=(r+n)*.5,c=t.X(s,!0),d=t.Y(s,!0),a=[1,f[1]+c*t.board.unitX,f[2]-d*t.board.unitY],u=this._triangleDists(e,i,a),h=isNaN(e[1]+e[2]),l=isNaN(i[1]+i[2]),h&&!l||!h&&l?y="border":u[0]>.66*m||u[0]<this.cusp_threshold*(u[1]+u[2])||u[1]>5*u[2]||u[2]>5*u[1]?y="cusp":(u[2]>this.jump_threshold*u[0]||u[1]>this.jump_threshold*u[0]||u[0]===1/0||u[1]===1/0||u[2]===1/0)&&(y="jump"),b=""===y&&p<this.smoothLevel&&u[3]<this.smooth_threshold,p<this.testLevel&&!b&&(""===y?b=!0:g=this._getLimes(t,r,e,s,a,n,i,y,p)),null!==g?(a=[1,NaN,NaN],this._insertPoint(t,a,s,p,g)):p<=0||b?this._insertPoint(t,a,s,p,null):(C[Z++]=[a,s,i,n,p-1,u[0]],C[Z++]=[e,r,a,s,p-1,u[0]]))}return this},updateParametricCurve_v3:function(t,e,r){var i,n,o,u,h,l,c,d,f=!1,p=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1),v=new m.Z(s.Z.COORDS_BY_USER,[0,0],t.board,!1);return h=t.board.updateQuality===t.board.BOARD_QUALITY_LOW?a.Z.evaluate(t.visProp.recursiondepthlow)||14:a.Z.evaluate(t.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=h-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,t.points=[],"x"===t.xterm?(l=((c=t.board.getBoundingBox())[2]-c[0])*.3,i=Math.max(e,c[0]-l),n=Math.min(r,c[2]+l)):(i=e,n=r),p.setCoordinates(s.Z.COORDS_BY_USER,[t.X(i,f),t.Y(i,f)],!1),f=!0,v.setCoordinates(s.Z.COORDS_BY_USER,[t.X(n,f),t.Y(n,f)],!1),d=this._findStartPoint(t,p.scrCoords,i,v.scrCoords,n),p.setCoordinates(s.Z.COORDS_BY_SCREEN,d[0],!1),i=d[1],d=this._findStartPoint(t,v.scrCoords,n,p.scrCoords,i),v.setCoordinates(s.Z.COORDS_BY_SCREEN,d[0],!1),n=d[1],this._visibleArea=[i,n],o=p.copy("scrCoords"),u=v.copy("scrCoords"),p._t=i,t.points.push(p),this._lastScrCrds=p.copy("scrCoords"),this._lastUsrCrds=p.copy("usrCoords"),this._plotNonRecursive(t,o,i,u,n,h),v._t=n,t.points.push(v),t.numberPoints=t.points.length,t},_criticalInterval:function(t,e,r){var i,n,o,s,a,u,h,l=!1,c=-1/0,d=!1,f=!1,p=0,m=[],g=[],b=[];for(h=v.Z.abs(t),(s=v.Z.median(h))<1e-7?(s=1e-7,d=!0):s*=this.criticalThreshold,i=0;i<e;i++)h[i]>s?(b.push({i:i,v:t[i],group:p}),c=i,l||(l=!0)):l&&i>c+4&&(b.length>0&&m.push(b.slice(0)),b=[],l=!1,p++);for(l&&b.length>1&&m.push(b.slice(0)),d&&0===m.length&&(f=!0),n=0;n<m.length;n++)if(g[n]="point",!((o=m[n].length)<64)){for(i=1,u=0,a=Math.sign(m[n][0].v);i<o;i++)Math.sign(m[n][i].v)!==a&&(u++,a=Math.sign(m[n][i].v));6*u>o&&(g[n]="interval")}return{smooth:f,groups:m,types:g}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(t,e,r,i){var n,o,s,a,u,h,l=[],c=0,d=0,f=0,p=!1,m=!1;for(n=0,s=(r-e)/i,l[c]=new this.Component,h=l[c],o=e;n<=i;n++,o+=s)a=t.X(o,m),u=t.Y(o,m),isNaN(a)||isNaN(u)?++f>1&&p&&(h.right_isNaN=!0,h.right_t=o-s,h.len=d,p=!1,l[++c]=new this.Component,h=l[c],f=0):(!p&&(p=!0,d=0,f>0&&(h.left_t=o-s,h.left_isNaN=!0)),f=0,h.t_values[d]=o,h.x_values[d]=a,h.y_values[d]=u,d++),0===n&&(m=!0);return p?h.len=d:l.pop(),l},getPointType:function(t,e,r,i,n,o,s){var a=n[0],u=o[0],h=i.length,l={idx:e,t:r,x:a[e],y:u[e],type:"other"};return e<5?(l.type="borderleft",l.idx=0,l.t=i[0],l.x=a[0],l.y=u[0]):e>s-6&&(l.type="borderright",l.idx=h-1,l.t=i[h-1],l.x=a[h-1],l.y=u[h-1]),l},newtonApprox:function(t,e,r,i,n){var o,s=0;for(o=i;o>0;o--)s=(s+n[o][t])*(e-(o-1)*r)/o;return s+n[0][t]},thiele:function(t,e,r,i,n){var o,s=0;for(o=n;o>1;o--)s=(t-r[i+o])/(e[o][i+1]-e[o-2][i+1]+s);return e[0][i+1]+(t-r[i+1])/(e[1][i+1]+s)},differenceMethodExperiments:function(t,e){var r,i,n,o,s,a,u,h,l,c,d,f=t.t_values,p=t.x_values,m=t.y_values,v=[],g=[],b=[],y=[],C=[],Z=[],x=[],_=[],E=0,w=[];for(s=f[1]-f[0],C.push([]),Z.push([]),x.push([]),_.push([]),n=m.length,r=0;r<n;r++)C[0][r]=p[r],Z[0][r]=m[r],x[0][r]=p[r],_[0][r]=m[r];for(C.push([]),Z.push([]),x.push([]),_.push([]),a=s,n=m.length-1,r=0;r<n;r++)v[r]=p[r+1]-p[r],g[r]=m[r+1]-m[r],b[r]=v[r],y[r]=g[r],C[1][r]=v[r],Z[1][r]=g[r],x[1][r]=a/v[r],_[1][r]=a/g[r];for(n--,o=Math.min(8,m.length-1),i=1;i<o;i++){for(C.push([]),Z.push([]),x.push([]),_.push([]),a*=s,r=0;r<n;r++)v[r]=v[r+1]-v[r],g[r]=g[r+1]-g[r],C[i+1][r]=v[r],Z[i+1][r]=g[r],x[i+1][r]=a/(x[i][r+1]-x[i][r])+x[i-1][r+1],_[i+1][r]=a/(_[i][r+1]-_[i][r])+_[i-1][r+1];if(!1===(d=this._criticalPoints(g,n,i))){console.log("Polynomial of degree",i),d=[];break}if(d.length>0&&++E>1&&i%2==0)break;n--}for(r=0;r<d.length;r++){for(l=0,h=-1/0;l<d[r].length;l++)(c=Math.abs(d[r][l].v))>h&&(h=c,u=l);u=Math.floor(d[r][u].i+i/2),w.push(this.getPointType(e,u,f,p,m,b,y,n+1))}return[w,C,Z,x,_]},getCenterOfCriticalInterval:function(t,e,r){var i,n,o,s,a,u=0,h=0,l=r[1]-r[0],c=[];for(n=0,i=-1/0,c=[];n<t.length;n++)(s=Math.abs(t[n].v))>i?(c=[n],i=s,o=n):i===s&&c.push(n);if(c.length>0&&(o=Math.floor(a=c.reduce(function(t,e){return t+e},0)/c.length),a+=t[0].i),i<1/0){for(n=0;n<t.length;n++)u+=Math.abs(t[n].v)*t[n].i,h+=Math.abs(t[n].v);a=u/h}return a+=e/2,[t[o].i+e/2,a,r[Math.floor(a)]+l*(a-Math.floor(a))]},differenceMethod:function(t,e){var r,i,n,o,s,a,u,h,l,c,d=t.t_values,f=t.x_values,p=t.y_values,m=[],v=[],g=0,b=-1,y=-1,C=[],Z=[];for(n=p.length,m.push(new Float64Array(f)),v.push(new Float64Array(p)),o=Math.min(12,--n),i=0;i<o&&(m.push(new Float64Array(n)),v.push(new Float64Array(n)),m[i+1]=m[i].map(function(t,e,r){return r[e+1]-t}),v[i+1]=v[i].map(function(t,e,r){return r[e+1]-t}),!0===(h=this._criticalInterval(v[i+1],n,i)).smooth&&(y=i,C=[]),u=this._criticalInterval(m[i+1],n,i),-1===b&&!0===u.smooth&&(b=i),!(y>=0));i++){if(h.groups.length>0&&++g>2&&(i+1)%2==0){C=h.groups,c=h.types;break}n--}for(r=0;r<C.length;r++)"interval"!==c[r]&&(a=this.getCenterOfCriticalInterval(C[r],i+1,d),s=h[0],s=Math.floor(a[1]),l=a[2],Z.push(this.getPointType(e,s,l,d,m,v,n+1)));return[Z,m,v,b,y]},_insertPoint_v4:function(t,e,r,i){var n,o,a,u=null;t.points.length>0&&(u=t.points[t.points.length-1].scrCoords),n=new m.Z(s.Z.COORDS_BY_USER,e,t.board),null!==u&&(o=n.scrCoords[1]-u[1])*o+(a=n.scrCoords[2]-u[2])*a<.8*.8||(n._t=r,t.points.push(n))},getInterval:function(t,e,r){var i,o;return h.Z.disable(),i=h.Z.Interval(e,r),t.board.mathLib=h.Z,t.board.mathLibJXG=h.Z,t.X(i,!0),o=t.Y(i,!0),t.board.mathLib=Math,t.board.mathLibJXG=n.Z.Math,o},sign:function(t){return t<0?-1:t>0?1:0},handleBorder:function(t,e,r,i,n){var o,s,u,h,l,c,d,f,p,m,v,g,b=r.idx;if(g=e.t_values[1]-e.t_values[0],"borderleft"===r.type?u=(s=o=e.left_isNaN?e.left_t:r.t-g)+g:"borderright"===r.type?s=(u=o=e.right_isNaN?e.right_t:r.t+g)-g:console.log("No bordercase!!!"),0!==(m=this.findComponents(t,s,u,32)).length){for("borderleft"===r.type&&(s=m[0].left_t,u=m[0].t_values[0],g=m[0].t_values[1]-m[0].t_values[0],o=s=null===s?u-g:s,h=this.getInterval(t,s,u),a.Z.isObject(h)&&(d=h.lo,f=h.hi,l=t.X(o,!0),c=n[1][b]<0?f:d,this._insertPoint_v4(t,[1,l,c],o))),v=m[0].t_values.length,p=0;p<v;p++)o=m[0].t_values[p],l=m[0].x_values[p],c=m[0].y_values[p],this._insertPoint_v4(t,[1,l,c],o);"borderright"===r.type&&(s=m[0].t_values[v-1],u=m[0].right_t,g=m[0].t_values[1]-m[0].t_values[0],o=u=null===u?s+g:u,h=this.getInterval(t,s,u),a.Z.isObject(h)&&(d=h.lo,f=h.hi,l=t.X(o,!0),c=n[1][b]>0?f:d,this._insertPoint_v4(t,[1,l,c],o)))}},_seconditeration_v4:function(t,e,r,i,n){var o,s,a,u,h,l,c,d,f,p,m,v,g;for(c=0,s=e.t_values[r.idx-2],a=e.t_values[r.idx+2],h=this.findComponents(t,s,a,64);c<h.length;c++){for(f=0,l=h[c],d=(u=this.differenceMethod(l,t))[0],p=u[1],m=u[2],v=0;f<=d.length;f++){for(g=f===d.length?l.len:d[f].idx,o=v;o<g;o++)isNaN(l.x_values[o])||isNaN(l.y_values[o])||this._insertPoint_v4(t,[1,l.x_values[o],l.y_values[o]],l.t_values[o]);f<d.length&&(this.handleSingularity(t,l,d[f],p,m),v=d[f].idx+1)}g=l.len,c<h.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],l.right_t)}return this},_recurse_v4:function(t,e,r,i,n,o,s,a){var h,l,c=(e+r)*.5,d=t.X(c,!0),f=t.Y(c,!0);if(0===a){this._insertPoint_v4(t,[1,NaN,NaN],c);return}h=(d-i)*t.board.unitX,l=(f-n)*t.board.unitY,u.Z.hypot(h,l)>2?this._recurse_v4(t,e,c,i,n,d,f,a-1):this._insertPoint_v4(t,[1,d,f],c),h=(d-o)*t.board.unitX,l=(f-s)*t.board.unitY,u.Z.hypot(h,l)>2?this._recurse_v4(t,c,r,d,f,o,s,a-1):this._insertPoint_v4(t,[1,d,f],c)},handleSingularity:function(t,e,r,i,n){var o,s,u,h,l,c,d,f,p,m,v,g=r.idx;console.log("HandleSingularity at t =",o=r.t),s=e.t_values[g-5],u=e.t_values[g+5],h=this.getInterval(t,s,u),a.Z.isObject(h)?(f=h.lo,p=h.hi):n[0][g-1]<n[0][g+1]?(f=n[0][g-1],p=n[0][g+1]):(f=n[0][g+1],p=n[0][g-1]),d=t.X(o,!0),console.log(":::",m=(n[0][g-3]-n[0][g-5])/(e.t_values[g-3]-e.t_values[g-5]),v=(n[0][g+3]-n[0][g+5])/(e.t_values[g+3]-e.t_values[g+5])),m<-100?(this._insertPoint_v4(t,[1,d,f],o,!0),v<=100&&this._insertPoint_v4(t,[1,NaN,NaN],o)):m>100?(this._insertPoint_v4(t,[1,d,p],o),v>=-100&&this._insertPoint_v4(t,[1,NaN,NaN],o)):(f===-1/0&&(this._insertPoint_v4(t,[1,d,f],o,!0),this._insertPoint_v4(t,[1,NaN,NaN],o)),p===1/0&&(this._insertPoint_v4(t,[1,NaN,NaN],o),this._insertPoint_v4(t,[1,d,p],o,!0)),r.t<e.t_values[g]?(l=g-1,c=g):(l=g,c=g+1),s=e.t_values[l],u=e.t_values[c],this._recurse_v4(t,s,u,i[0][l],n[0][l],i[0][c],n[0][c],10)),v<-100?this._insertPoint_v4(t,[1,d,p],o):v>100&&this._insertPoint_v4(t,[1,d,f],o)},steps:1021,criticalThreshold:1e3,plot_v4:function(t,e,r,i){var n,o,s,u,h,l,c,d,f,m,v,g,b,y,C,Z=(r-e)/i,x=function(e){return t.Y(e,!0)},_=function(e){return-t.Y(e,!0)},E=.5*Z;for(u=0,s=this.findComponents(t,e,r,i);u<s.length;u++){for(h=s[u],l=(f=this.differenceMethod(h,t))[0],m=f[1],v=f[2],f[3],f[4],(0===l.length||"borderleft"!==l[0].type)&&l.unshift({idx:0,t:h.t_values[0],x:h.x_values[0],y:h.y_values[0],type:"borderleft"}),"borderright"!==l[l.length-1].type&&(o=h.t_values.length,l.push({idx:o-1,t:h.t_values[o-1],x:h.x_values[o-1],y:h.y_values[o-1],type:"borderright"})),d=0,c=0;c<=l.length;c++){for(o=c===l.length?h.len:l[c].idx-1,n=d;n<o-2;n++)this._insertPoint_v4(t,[1,h.x_values[n],h.y_values[n]],h.t_values[n]),n>=d+3&&n<o-3&&v.length>3&&Math.abs(v[2][n])>.2*Math.abs(v[0][n])&&(g=h.t_values[n],E=.25*Z,C=this.getInterval(t,g,g+Z),a.Z.isObject(C)?v[2][n]>0?this._insertPoint_v4(t,[1,g+E,C.lo],g+E):this._insertPoint_v4(t,[1,g+Z-E,C.hi],g+Z-E):(b=p.Z.fminbr(x,[g,g+Z]))<(y=p.Z.fminbr(_,[g,g+Z]))?(this._insertPoint_v4(t,[1,t.X(b,!0),t.Y(b,!0)],b),this._insertPoint_v4(t,[1,t.X(y,!0),t.Y(y,!0)],y)):(this._insertPoint_v4(t,[1,t.X(y,!0),t.Y(y,!0)],y),this._insertPoint_v4(t,[1,t.X(b,!0),t.Y(b,!0)],b)));c<l.length&&(n=l[c].idx,"borderleft"===l[c].type||"borderright"===l[c].type?this.handleBorder(t,h,l[c],m,v):this._seconditeration_v4(t,h,l[c],m,v),d=l[c].idx+1+1)}o=h.len,u<s.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],h.right_t)}},updateParametricCurve_v4:function(t,e,r){var i,n,o,s;"x"===t.xterm?(o=((s=t.board.getBoundingBox())[2]-s[0])*.3,i=Math.max(e,s[0]-o),n=Math.min(r,s[2]+o)):(i=e,n=r),t.points=[],this.plot_v4(t,i,n,this.steps),t.numberPoints=t.points.length},updateParametricCurve:function(t,e,r){return this.updateParametricCurve_v2(t,e,r)}};var g=u.Z.Plot;u.Z.ImplicitPlot=function(t,e,r,i,n){var o={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:u.Z.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=a.Z.merge(o,e),this.f=r,this.dfx=null,this.dfy=null,a.Z.isFunction(i)?this.dfx=i:this.dfx=function(t,e){var r=u.Z.eps*u.Z.eps;return(this.f(t+r,e)-this.f(t-r,e))*.5/r},a.Z.isFunction(n)?this.dfy=n:this.dfy=function(t,e){var r=u.Z.eps*u.Z.eps;return(this.f(t,e+r)-this.f(t,e-r))*.5/r},this.bbox=t,this.qdt=new f(20,5,t),this.components=[]},a.Z.extend(u.Z.ImplicitPlot.prototype,{plot:function(){var t,e,r,i,n,o,s,a=[],h=[],l=[],c=0,d=this,f=function(e){return d.f(t,e)},p=function(e){return-d.f(t,e)},m=function(t){return d.f(t,e)},v=function(t){return-d.f(t,e)};for(r=Math.min(this.bbox[0],this.bbox[2])-u.Z.eps,i=Math.max(this.bbox[0],this.bbox[2]),n=Math.min(this.bbox[1],this.bbox[3])+u.Z.eps,o=Math.max(this.bbox[1],this.bbox[3]),s=this.config.resolution_out/this.config.unitX*(1+u.Z.eps),t=r;t<i;t+=s)!1!==(l=this.searchLine(f,p,t,[n,o],"vertical",c,a,h))&&(a=l[0],h=l[1],c=l[2]);for(s=this.config.resolution_out/this.config.unitY*(1+u.Z.eps),e=n;e<o;e+=s)!1!==(l=this.searchLine(m,v,e,[r,i],"horizontal",c,a,h))&&(a=l[0],h=l[1],c=l[2]);return[a,h,c]},searchLine:function(t,e,r,i,n,o,s,a){var h,l,c,d,f,m,v,g,b,y,C,Z,x,_=this.config.tol_u0,E=i[0],w=i[1];if(h=p.Z.fminbr(t,[E,w]),d=t(h),f=t(l=p.Z.fminbr(e,[E,w])),d<_&&f>-_){if(h=Math.min(m=h,l),l=Math.max(m,l),c=p.Z.fzero(t,[h,l]),Math.abs(t(c))>Math.max((f-d)*u.Z.eps,.001))return!1;if("vertical"===n?(g=[1,r,c],x=this.config.resolution_in/this.config.unitY):(g=[1,c,r],x=this.config.resolution_in/this.config.unitX),x*=1+u.Z.eps,this.curveContainsPoint(g,s,a,2*x,this.config.qdt_box));else if((C=this.traceComponent(g,1)).length>0){for(o>0&&(s.push(NaN),a.push(NaN)),Z=s.length,y=C[0].length,b=1;b<y;b++)this.qdt.insertItem({xlb:Math.min(C[0][b-1],C[0][b]),xub:Math.max(C[0][b-1],C[0][b]),ylb:Math.min(C[1][b-1],C[1][b]),yub:Math.max(C[1][b-1],C[1][b]),idx1:Z+b-1,idx2:Z+b,comp:o});o++,s=s.concat(C[0]),a=a.concat(C[1])}return(v=c-.01*x)-E>x&&!1!==(C=this.searchLine(t,e,r,[E,v],n,o,s,a))&&(s=C[0],a=C[1],o=C[2]),w-(v=c+.01*x)>x&&!1!==(C=this.searchLine(t,e,r,[v,w],n,o,s,a))&&(s=C[0],a=C[1],o=C[2]),[s,a,o]}return!1},curveContainsPoint:function(t,e,r,i,n){var o,s,a,u=t[1],h=t[2];for(o=0,s=(a=this.qdt.find([u-n,h+n,u+n,h-n])).length;o<s;o++)if(c.Z.distPointSegment(t,[1,e[a[o].idx1],r[a[o].idx1]],[1,e[a[o].idx2],r[a[o].idx2]])<i)return!0;return!1},traceComponent:function(t){var e=[],r=[],i=[];return 0===(i=this.tracing(t,1)).length||(e=i[0],r=i[1]),i[2]||0===(i=this.tracing(t,-1)).length||(e=i[0].reverse().concat(e.slice(1)),r=i[1].reverse().concat(r.slice(1))),e.length<6&&(e.push(e[e.length-1]),r.push(r[r.length-1])),[e,r]},tracing:function(t,e){var r,i,n,o,s,a,h,l,d,f,p,m,v,g,b,y,C,Z=[],x=[],_=[],E=0,w=0,N=!1,S=!1,A=!1,P=this.config.kappa_0,D=this.config.delta_0,M=this.config.alpha_0,O=this.config.h_initial,T=this.config.max_steps,B=e,F=[],R=[],L=[];if(Z=t.slice(1),F.push(Z[0]),R.push(Z[1]),!1===(r=this.tangent(Z)))return[];this.dfx(Z[0],Z[1]),this.dfy(Z[0],Z[1]);do{if(!1===(r=this.tangent(Z))){Z=x.slice(),F.push(Z[0]),R.push(Z[1]);break}if(1===F.length)n=r.slice();else if(2===F.length)L.push(F.length-1);else if(S&&F.length>2&&!A){if(c.Z.distPointSegment([1,Z[0],Z[1]],[1,F[0],R[0]],[1,F[1],R[1]])<this.config.loop_dist*O&&u.Z.innerProduct(r,n,2)>this.config.loop_dir){Z=t.slice(1),F.push(Z[0]),R.push(Z[1]),N=!0;break}if(this.config.loop_detection){for(y=0,g=F.length-1,b=Math.floor(u.Z.log2(g));y<=b&&!(c.Z.distPointSegment([1,Z[0],Z[1]],[1,F[L[y]-1],R[L[y]-1]],[1,F[L[y]],R[L[y]]])<this.config.loop_dist*O&&(i=this.tangent([F[L[y]],R[L[y]]]),u.Z.innerProduct(r,i,2)>this.config.loop_dir));y++);if(y<=b){N=!0;break}for(y=0,b=1,C=0;y<100&&(g+1)%b==0;y++)b*=2,C++;L[C]=g}}x[0]=Z[0]+O*B*r[0],x[1]=Z[1]+O*B*r[1],w=0;do d=(o=[this.dfx(x[0],x[1]),this.dfy(x[0],x[1])])[0]*o[0]+o[1]*o[1],s=this.f(x[0],x[1])/d,_[0]=x[0]-o[0]*s,_[1]=x[1]-o[1]*s,0===w?h=Math.abs(s)*Math.sqrt(d):1===w&&(l=Math.abs(s)*Math.sqrt(d)),x[0]=_[0],x[1]=_[1],w++;while(w<20&&Math.abs(this.f(x[0],x[1]))>this.config.tol_newton);if(p=h,f=w>1?l/h:0,i=this.tangent(x),m=Math.acos(a=Math.max(-1,Math.min(1,a=u.Z.innerProduct(r,i,2)))),A=!1,c.Z.distance(Z,x,2)<this.config.tol_progress){Z=x.slice(),F.push(Z[0]),R.push(Z[1]);break}if(a<0){if(O>this.config.h_critical);else if(A=!0,this.isBifurcation(Z,this.config.tol_cusp))B*=-1,m=0;else{Z=x.slice(),F.push(Z[0]),R.push(Z[1]);break}}if(!A&&(isNaN(v=Math.max(Math.sqrt(f/P),Math.sqrt(p/D),m/M))&&(v=1),O/=v=Math.max(Math.min(v,2),.5),O=Math.min(this.config.h_max,O),v>=2)){if(++E>=3*T)break;S=!1;continue}Z=x.slice(),F.push(Z[0]),R.push(Z[1]),S=!0,E++}while(E<T&&Z[0]>=this.bbox[0]&&Z[1]<=this.bbox[1]&&Z[0]<=this.bbox[2]&&Z[1]>=this.bbox[3]);return[F,R,N]},isBifurcation:function(t,e){var r,i,n,o,s,a,h,l,c,d,f=u.Z.eps*u.Z.eps*100;return r=t[0],i=t[1],n=.5*(this.dfx(r+f,i)-this.dfx(r-f,i))/f,o=.5*(this.dfx(r,i+f)-this.dfx(r,i-f))/f,s=.5*(this.dfy(r+f,i)-this.dfy(r-f,i))/f,d=(h=n+(a=.5*(this.dfy(r,i+f)-this.dfy(r,i-f))/f))*h-4*(n*a-o*s),l=.5*(h+Math.sqrt(d)),c=.5*(h-Math.sqrt(d)),!!(Math.abs(l)>e&&Math.abs(c)>e)},handleCriticalPoint:function(t,e,r,i){var n,o=Math.atan2(i*e[1],i*e[0]);return n=p.Z.root(function(e){var i=t[0]+r*Math.cos(e),n=t[1]+r*Math.sin(e);return this.f(i,n)},o),[t[0]+r*Math.cos(n),t[1]+r*Math.sin(n)]},updateA:function(t,e,r){var i,n,o=[r[0]-e[0],r[1]-e[1]],s=this.f(r[0],r[1])-this.f(e[0],e[1]);return n=o[0]*o[0]+o[1]*o[1],i=(s-(t[0]*o[0]+t[1]*o[1]))/n,t[0]+=i*o[0],t[1]+=i*o[1],t},tangent_A:function(t){var e=[-t[1],t[0]],r=u.Z.norm(e,2);return u.Z.eps,[e[0]/r,e[1]/r]},tangent:function(t){var e=[-this.dfy(t[0],t[1]),this.dfx(t[0],t[1])],r=u.Z.norm(e,2);return!(r<u.Z.eps*u.Z.eps)&&[e[0]/r,e[1]/r]}}),u.Z.ImplicitPlot,u.Z.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(t){var e,r,i,n,o,s,a,u,h,l,c,d,f,p,m;a=t[0];do{if(!a)break;s=a.next,a.rtype>this.MP_EXPLICIT&&(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)<this.EPS_SQ&&(a.rtype=this.MP_EXPLICIT,a.ltype===this.MP_OPEN&&(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)),s.ltype=this.MP_EXPLICIT,s.rtype===this.MP_OPEN&&(s.rtype=this.MP_CURL,s.set_right_curl(this.UNITY)),a.rx=a.x,s.lx=a.x,a.ry=a.y,s.ly=a.y),a=s}while(a!==t[0]);for(r=t[0];r.ltype===this.MP_OPEN&&r.rtype===this.MP_OPEN;)if((r=r.next)===t[0]){r.ltype=this.MP_END_CYCLE;break}for(a=r;a;){if(s=a.next,a.rtype>=this.MP_GIVEN){for(;s.ltype===this.MP_OPEN&&s.rtype===this.MP_OPEN;)s=s.next;for(i=0,u=a,o=t.length,d=[],f=[],p=[],m=[null];l=u.next,d.push(l.x-u.x),f.push(l.y-u.y),p.push(this.mp_pyth_add(d[i],f[i])),i>0&&(c=f[i-1]/p[i-1],h=d[i-1]/p[i-1],m.push(Math.atan2(f[i]*h-d[i]*c,d[i]*h+f[i]*c))),i++,(u=l)===s&&(o=i),!(i>=o)||u.ltype===this.MP_END_CYCLE;);i===o?m.push(0):m.push(m[1]),s.ltype===this.MP_OPEN&&((n=s.rx-s.x)*n+(e=s.ry-s.y)*e<this.EPS_SQ?(s.ltype=this.MP_CURL,s.set_left_curl(this.UNITY)):(s.ltype=this.MP_GIVEN,s.set_left_given(Math.atan2(e,n)))),a.rtype===this.MP_OPEN&&a.ltype===this.MP_EXPLICIT&&((n=a.x-a.lx)*n+(e=a.y-a.ly)*e<this.EPS_SQ?(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)):(a.rtype=this.MP_GIVEN,a.set_right_given(Math.atan2(e,n)))),this.mp_solve_choices(a,s,o,d,f,p,m)}else a.rtype===this.MP_ENDPOINT&&(a.rx=a.x,a.ry=a.y,s.lx=s.x,s.ly=s.y);if((a=s)===r)break}},mp_solve_choices:function(t,e,r,i,n,o,s){var a,u,h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_,E,w,N,S,A,P,D,M,O;for(M=0,v=Array(c=o.length+1),m=Array(c),h=Array(c),Z=Array(c);M<c;M++)Z[M]=h[M]=m[M]=v[M]=0;for(f=0,p=t,b=0;;){if(y=p.next,0===f){if(p.rtype===this.MP_GIVEN){if(y.ltype===this.MP_GIVEN){a=Math.atan2(n[0],i[0]),N=(w=this.mp_n_sin_cos(t.right_given()-a))[0],S=w[1],P=(A=this.mp_n_sin_cos(e.left_given()-a))[0],D=A[1],this.mp_set_controls(t,e,i[0],n[0],S,N,-D,P);return}h[0]=p.right_given()-Math.atan2(n[0],i[0]),h[0]=this.reduce_angle(h[0]),v[0]=0,m[0]=0}else if(p.rtype===this.MP_CURL){if(y.ltype===this.MP_CURL){t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT,g=Math.abs(e.left_tension()),x=Math.abs(t.right_tension()),C=this.UNITY/(3*x),t.rx=t.x+i[0]*C,t.ry=t.y+n[0]*C,C=this.UNITY/(3*g),e.lx=e.x-i[0]*C,e.ly=e.y-n[0]*C;return}E=p.right_curl(),g=Math.abs(y.left_tension()),x=Math.abs(p.right_tension()),v[0]=this.mp_curl_ratio(E,x,g),h[0]=-s[1]*v[0],m[0]=0}else p.rtype===this.MP_OPEN&&(v[0]=0,h[0]=0,m[0]=this.FRACTION_ONE)}else if(p.ltype===this.MP_END_CYCLE||p.ltype===this.MP_OPEN){if(a=this.UNITY/(3*Math.abs(b.right_tension())-this.UNITY),_=o[f]*(this.FRACTION_THREE-this.UNITY/Math.abs(b.right_tension())),l=this.UNITY/(3*Math.abs(y.left_tension())-this.UNITY),d=o[f-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(y.left_tension())),_*=E=this.FRACTION_ONE-v[f-1]*a,(g=Math.abs(p.left_tension()))<(x=Math.abs(p.right_tension()))?_*=Math.pow(g/x,2):g>x&&(d*=Math.pow(x/g,2)),C=d/(d+_),v[f]=C*l,u=-s[f+1]*v[f],b.rtype===this.MP_CURL?(m[f]=0,h[f]=u-s[1]*(this.FRACTION_ONE-C)):(C=(this.FRACTION_ONE-C)/E,u-=s[f]*C,C*=a,h[f]=u-h[f-1]*C,m[f]=-m[f-1]*C),p.ltype===this.MP_END_CYCLE){for(a=0,l=this.FRACTION_ONE;0==(f-=1)&&(f=r),a=h[f]-a*v[f],l=m[f]-l*v[f],f!==r;);for(a/=this.FRACTION_ONE-l,Z[r]=a,h[0]=a,O=1;O<r;O++)h[O]=h[O]+a*m[O];break}}else{if(p.ltype===this.MP_CURL){E=p.left_curl(),g=Math.abs(p.left_tension()),x=Math.abs(b.right_tension()),C=this.mp_curl_ratio(E,g,x),Z[r]=-(h[r-1]*C)/(this.FRACTION_ONE-C*v[r-1]);break}if(p.ltype===this.MP_GIVEN){Z[r]=p.left_given()-Math.atan2(n[r-1],i[r-1]),Z[r]=this.reduce_angle(Z[r]);break}}b=p,p=y,f+=1}for(f=r-1;f>-1;f--)Z[f]=h[f]-Z[f+1]*v[f];for(p=t,f=0;y=p.next,N=(w=this.mp_n_sin_cos(Z[f]))[0],S=w[1],P=(A=this.mp_n_sin_cos(-s[f+1]-Z[f+1]))[0],D=A[1],this.mp_set_controls(p,y,i[f],n[f],S,N,D,P),f++,p=y,f!==r;);},mp_n_sin_cos:function(t){return[Math.cos(t),Math.sin(t)]},mp_set_controls:function(t,e,r,i,n,o,s,a){var u,h,l,c,d;l=Math.abs(e.left_tension()),u=Math.abs(t.right_tension()),d=this.mp_velocity(n,o,s,a,u),h=this.mp_velocity(s,a,n,o,l),(0>t.right_tension()||0>e.left_tension())&&(n>=0&&s>=0||n<=0&&s<=0)&&(c=Math.abs(n)*a+Math.abs(s)*o)>0&&(c*=1.00024414062,0>t.right_tension()&&0>this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,d,c)&&(d=Math.abs(s)/c),0>e.left_tension()&&0>this.mp_ab_vs_cd(Math.abs(n),this.FRACTION_ONE,h,c)&&(h=Math.abs(n)/c)),t.rx=t.x+(r*o-i*n)*d,t.ry=t.y+(i*o+r*n)*d,e.lx=e.x-(r*a+i*s)*h,e.ly=e.y-(i*a-r*s)*h,t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT},mp_pyth_add:function(t,e){return u.Z.hypot(t,e)},mp_curl_ratio:function(t,e,r){var i=1/e,n=1/r;return Math.min(4,((3-i)*i*i*t+n*n*n)/(i*i*i*t+(3-n)*n*n))},mp_ab_vs_cd:function(t,e,r,i){return t*e==r*i?0:t*e>r*i?1:-1},mp_velocity:function(t,e,r,i,n){return Math.min(4,(2+Math.sqrt(2)*(t-r/16)*(r-t/16)*(e-i))/(1.5*n*(2+(Math.sqrt(5)-1)*e+(3-Math.sqrt(5))*i)))},reduce_angle:function(t){return Math.abs(t)>this.ONE_EIGHTY_DEG&&(t>0?t-=this.THREE_SIXTY_DEG:t+=this.THREE_SIXTY_DEG),t},makeknots:function(t,e){var r,i,n=[];for(r=0,i=t.length;r<i;r++)n.push({x:t[r][0],y:t[r][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:e,ry:e,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(t){this.rx=t||0},set_left_curl:function(t){this.lx=t||0}});for(r=0,i=n.length;r<i;r++)n[r].next=n[r+1]||n[r],n[r].set_right_given=n[r].set_right_curl,n[r].set_left_given=n[r].set_left_curl,n[r].right_given=n[r].right_curl,n[r].left_given=n[r].left_curl;return n[i-1].next=n[0],n},curve:function(t,e){var r,i,n,o,s,u,h=!1,l=[],c=[];for(o in s=1,(e=e||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(s=a.Z.evaluate(e.tension)),i=(r=this.makeknots(t,s)).length,a.Z.exists(e.isClosed)&&a.Z.evaluate(e.isClosed)&&(h=!0),h||(r[0].ltype=this.MP_ENDPOINT,r[0].rtype=this.MP_CURL,r[i-1].rtype=this.MP_ENDPOINT,r[i-1].ltype=this.MP_CURL),e)if(e.hasOwnProperty(o)){if(isNaN(n=parseInt(o,10))||n<0||n>=i)continue;u=e[n],a.Z.exists(u.type)&&"curl"===u.type&&(s=a.Z.evaluate(u.curl),0===n?(r[n].rtype=this.MP_CURL,r[n].set_right_curl(s)):n===i-1?(r[n].ltype=this.MP_CURL,r[n].set_left_curl(s)):(r[n].ltype=this.MP_CURL,r[n].rtype=this.MP_CURL,r[n].lx=s,r[n].rx=s)),a.Z.exists(u.direction)&&(s=a.Z.evaluate(u.direction),a.Z.isArray(s)?(!1!==s[0]&&(r[n].lx=s[0]*Math.PI/180,r[n].ltype=this.MP_GIVEN),!1!==s[1]&&(r[n].rx=s[1]*Math.PI/180,r[n].rtype=this.MP_GIVEN)):(r[n].lx=s*Math.PI/180,r[n].rx=s*Math.PI/180,r[n].ltype=r[n].rtype=this.MP_GIVEN)),a.Z.exists(u.tension)&&(s=a.Z.evaluate(u.tension),a.Z.isArray(s)?(!1!==s[0]&&(r[n].ly=a.Z.evaluate(s[0])),!1!==s[1]&&(r[n].ry=a.Z.evaluate(s[1]))):(r[n].ly=s,r[n].ry=s))}for(this.make_choices(r),n=0;n<i-1;n++)l.push(r[n].x),l.push(r[n].rx),l.push(r[n+1].lx),c.push(r[n].y),c.push(r[n].ry),c.push(r[n+1].ly);return l.push(r[i-1].x),c.push(r[i-1].y),h&&(l.push(r[i-1].rx),c.push(r[i-1].ry),l.push(r[0].lx),c.push(r[0].ly),l.push(r[0].x),c.push(r[0].y)),[l,c]}},u.Z.Metapost;var b=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];n.Z.Util=n.Z.Util||{},n.Z.Util.Unzip=function(t){var e,r,i,o,s=[],a=0,u=[],h=Array(32768),l=0,c=!1,d=t.length,f=0,p=1,m=Array(288),v=Array(32),g=0,E=null,w=0,N=Array(17),S=[];function A(){return f<d?t[f++]:-1}function P(){var t;try{t=1&p,p>>=1,0===p&&(p=A(),t=1&p,p=p>>1|128)}catch(t){throw console.log("Probably problems on iOS7 with >>"),t}return t}function D(t){var e=0,r=t;try{for(;r--;)e=e<<1|P();t&&(e=b[e]>>8-t)}catch(t){throw console.log("Probably problems on iOS7 with >>"),t}return e}function M(t){h[l++]=t,s.push(String.fromCharCode(t)),32768===l&&(l=0)}function O(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function T(){for(;;){if(N[w]>=o)return -1;if(i[N[w]]===w)return N[w]++;N[w]++}}function B(t,e,r,n){var s;for(s=0,E=t,g=0,i=r,o=e;s<17;s++)N[s]=0;return(w=0,function t(){var e,r=E[g];if(17===w)return -1;if(g++,w++,(e=T())>=0)r.b0=e;else if(r.b0=32768,t())return -1;if((e=T())>=0)r.b1=e,r.jump=null;else if(r.b1=32768,r.jump=E[g],r.jumppos=g,t())return -1;return w--,0}())?-1:0}function F(t){for(var e,r,i=0,n=t[0];;)if(P()){if(!(32768&n.b1))return n.b1;for(r=0,n=n.jump,e=t.length;r<e;r++)if(t[r]===n){i=r;break}}else{if(!(32768&n.b0))return n.b0;n=t[++i]}}function R(){var t,e,r,i,o,s,a,u,c,d,f,g,E,w;do if(t=P(),0===(e=D(2)))for(p=1,((c=A()|A()<<8)^~(A()|A()<<8))&65535&&n.Z.debug("BlockLen checksum mismatch\n");c--;)M(A());else if(1===e)for(;;)if((i=b[D(7)]>>1)>23?(i=i<<1|P())>199?(i-=128,i=i<<1|P()):(i-=48)>143&&(i+=136):i+=256,i<256)M(i);else if(256===i)break;else for(i-=257,u=D(C[i])+y[i],d=(x[i=b[D(5)]>>3]>8?D(8)|D(x[i]-8)<<8:D(x[i]))+Z[i],i=0;i<u;i++)M(h[l-d&32767]);else if(2===e){for(i=0,s=Array(320),g=257+D(5),E=1+D(5),w=4+D(4);i<19;i++)s[i]=0;for(i=0;i<w;i++)s[_[i]]=D(3);for(r=0,u=v.length;r<u;r++)v[r]=new O;if(B(v,19,s,0))return l=0,1;for(f=g+E,r=0;r<f;)if((i=F(v))<16)s[r++]=i;else if(16===i){if(r+(i=3+D(2))>f)return l=0,1;for(o=r?s[r-1]:0;i--;)s[r++]=o}else{if(r+(i=17===i?3+D(3):11+D(7))>f)return l=0,1;for(;i--;)s[r++]=0}for(r=0,u=m.length;r<u;r++)m[r]=new O;if(B(m,g,s,0))return l=0,1;for(r=0,u=m.length;r<u;r++)v[r]=new O;for(a=[],r=g;r<s.length;r++)a[r-g]=s[r];if(B(v,E,a,0))return l=0,1;for(;;)if((i=F(m))>=256){if(0==(i-=256))break;for(i-=1,u=D(C[i])+y[i],d=(x[i=F(v)]>8?D(8)|D(x[i]-8)<<8:D(x[i]))+Z[i];u--;)M(h[l-d&32767])}else M(i)}while(!t);return l=0,p=1,0}function L(){var t,i,n,o,h,l=[];try{if(s=[],c=!1,l[0]=A(),l[1]=A(),120===l[0]&&218===l[1]&&(R(),u[a]=[s.join(""),"geonext.gxt"],a++),31===l[0]&&139===l[1]&&(k(),u[a]=[s.join(""),"file"],a++),80===l[0]&&75===l[1]){if(c=!0,l[2]=A(),l[3]=A(),3===l[2]&&4===l[3]){for(l[0]=A(),l[1]=A(),e=A()|A()<<8,h=A()|A()<<8,A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),A(),o=A()|A()<<8,n=A()|A()<<8,t=0,S=[];o--;)i=A(),"/"===i|":"===i?t=0:t<255&&(S[t++]=String.fromCharCode(i));for(r||(r=S),t=0;t<n;)i=A(),t++;if(8===h&&(R(),u[a]=[,,],u[a][0]=s.join(""),u[a][1]=S.join(""),a++),k())return!1}return!0}}catch(t){throw console.log("Probably problems on iOS7 with >>"),t}return!1}function k(){var t,r,i=[];if(8&e&&(i[0]=A(),i[1]=A(),i[2]=A(),i[3]=A(),80===i[0]&&75===i[1]&&7===i[2]&&8===i[3]?(A(),A(),A(),A()):(i[0],i[1],i[2],i[3]),A(),A(),A(),A(),A(),A(),A(),A()),c&&L())return!1;if(i[0]=A(),8!==i[0])return!0;if(e=A(),A(),A(),A(),A(),A(),A(),4&e)for(t=0,i[0]=A(),i[2]=A(),w=i[0]+256*i[1];t<w;t++)A();if(8&e)for(t=0,S=[],r=A();r;)("7"===r||":"===r)&&(t=0),t<255&&(S[t++]=r),r=A();if(16&e)for(r=A();r;)r=A();return 2&e&&(A(),A()),R(),A(),A(),A(),A(),A(),A(),A(),A(),c&&L(),!1}N[0]=0,n.Z.Util.Unzip.prototype.unzipFile=function(t){var e;for(this.unzip(),e=0;e<u.length;e++)if(u[e][1]===t)return u[e][0];return""},n.Z.Util.Unzip.prototype.unzip=function(){return L(),u}};var E=n.Z.Util,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];n.Z.Util=n.Z.Util||{},n.Z.Util.UTF8={encode:function(t){var e,r,i="",n=t.length;if(t=t.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(t));for(e=0;e<n;e++)(r=t.charCodeAt(e))<128?i+=String.fromCharCode(r):r>127&&r<2048?i+=String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):i+=String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128);return i},decode:function(t){var e,r,i,n=0,o=0,s=0,a=[],u=t.length,h=[];for(e=0;e<u;e++)i=w[r=t.charCodeAt(e)],o=0!==s?63&r|o<<6:255>>i&r,0===(s=w[256+s+i])&&(o>65535?a.push(55232+(o>>10),56320+(1023&o)):a.push(o),++n%1e4==0&&(h.push(String.fromCharCode.apply(null,a)),a=[]));return h.push(String.fromCharCode.apply(null,a)),h.join("")},asciiCharCodeAt:function(t,e){var r=t.charCodeAt(e);if(r>255)switch(r){case 8364:r=128;break;case 8218:r=130;break;case 402:r=131;break;case 8222:r=132;break;case 8230:r=133;break;case 8224:r=134;break;case 8225:r=135;break;case 710:r=136;break;case 8240:r=137;break;case 352:r=138;break;case 8249:r=139;break;case 338:r=140;break;case 381:r=142;break;case 8216:r=145;break;case 8217:r=146;break;case 8220:r=147;break;case 8221:r=148;break;case 8226:r=149;break;case 8211:r=150;break;case 8212:r=151;break;case 732:r=152;break;case 8482:r=153;break;case 353:r=154;break;case 8250:r=155;break;case 339:r=156;break;case 382:r=158;break;case 376:r=159}return r}};var N=n.Z.Util.UTF8,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n.Z.Util=n.Z.Util||{},n.Z.Util.Base64={_getByte:function(t,e){return 255&t.charCodeAt(e)},_getIndex:function(t,e){return S.indexOf(t.charAt(e))},encode:function(t){var e,r,i,n,o,s=[];for(e=0,n=(i=(o=N.encode(t)).length)%3;e<i-n;e+=3)r=this._getByte(o,e)<<16|this._getByte(o,e+1)<<8|this._getByte(o,e+2),s.push(S.charAt(r>>18),S.charAt(r>>12&63),S.charAt(r>>6&63),S.charAt(63&r));switch(n){case 1:r=this._getByte(o,i-1),s.push(S.charAt(r>>2),S.charAt(r<<4&63),"=","=");break;case 2:r=this._getByte(o,i-2)<<8|this._getByte(o,i-1),s.push(S.charAt(r>>10),S.charAt(r>>4&63),S.charAt(r<<2&63),"=")}return s.join("")},decode:function(t,e){var r,i,n,o,s,a,u=[],h=[];if((n=(r=t.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for("="===r.charAt(n-1)&&(o=1,"="===r.charAt(n-2)&&(o=2),n-=4),i=0;i<n;i+=4)s=this._getIndex(r,i)<<18|this._getIndex(r,i+1)<<12|this._getIndex(r,i+2)<<6|this._getIndex(r,i+3),h.push(s>>16,s>>8&255,255&s),i%1e4==0&&(u.push(String.fromCharCode.apply(null,h)),h=[]);switch(o){case 1:s=this._getIndex(r,n)<<12|this._getIndex(r,n+1)<<6|this._getIndex(r,n+2),h.push(s>>10,s>>2&255);break;case 2:s=this._getIndex(r,i)<<6|this._getIndex(r,i+1),h.push(s>>4)}return u.push(String.fromCharCode.apply(null,h)),a=u.join(""),e&&(a=N.decode(a)),a},decodeAsArray:function(t){var e,r=this.decode(t),i=[],n=r.length;for(e=0;e<n;e++)i[e]=r.charCodeAt(e);return i}};var A=n.Z.Util.Base64;n.Z.Server={modules:{},runningCalls:{},handleError:function(t){n.Z.debug("error occured, server says: "+t.message)},callServer:function(t,e,r,i){var o,s,u,h,l,c;i=i||!1,l=a.Z.toJSON(r);do h=t+Math.floor(4096*Math.random());while(a.Z.exists(this.runningCalls[h]));return this.runningCalls[h]={action:t},a.Z.exists(r.module)&&(this.runningCalls[h].module=r.module),o=n.Z.serverBase+"JXGServer.py",s="action="+escape(t)+"&id="+h+"&dataJSON="+escape(A.encode(l)),this.cbp=function(t){var r,i,n,o,s,u,h;if(r=new E.Unzip(A.decodeAsArray(t)).unzip(),a.Z.isArray(r)&&r.length>0&&(r=r[0][0]),a.Z.exists(r)){if("error"===(i=window.JSON&&window.JSON.parse?window.JSON.parse(r):Function("return "+r)()).type)this.handleError(i);else if("response"===i.type){for(u=0,s=i.id;u<i.fields.length;u++)Function((n=i.fields[u]).namespace+("object"==typeof Function("return "+n.namespace)()?".":".prototype.")+n.name+" = "+n.value)();for(u=0;u<i.handler.length;u++){for(h=0,n=i.handler[u],o=[];h<n.parameters.length;h++)o[h]='"'+n.parameters[h]+'": '+n.parameters[h];Function("if(typeof JXG.Server.modules."+this.runningCalls[s].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[s].module+" = {};"+("JXG.Server.modules."+this.runningCalls[s].module+"."+n.name+"_cb = ")+n.callback+";"+("JXG.Server.modules."+this.runningCalls[s].module+"."+n.name+" = function ("+n.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[s].module+"."+n.name+"_cb;var __JXGSERVER_PAR__ = {"+o.join(",")+', "module": "'+this.runningCalls[s].module+'", "handler": "')+n.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};')()}delete this.runningCalls[s],e(i.data)}}},this.cb=n.Z.bind(this.cbp,this),window.XMLHttpRequest?(u=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):u=new ActiveXObject("Microsoft.XMLHTTP"),!!u&&(u.open("POST",o,!i),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i||(u.onreadystatechange=(c=this.cb,function(){return 4===u.readyState&&200===u.status&&(c(u.responseText),!0)})),u.send(s),!!i)&&(this.cb(u.responseText),!0)},loadModule_cb:function(t){var e;for(e=0;e<t.length;e++)n.Z.debug(t[e].name+": "+t[e].value)},loadModule:function(t){return n.Z.Server.callServer("load",n.Z.Server.loadModule_cb,{module:t},!0)}},n.Z.Server.load=n.Z.Server.loadModule;var P=n.Z.Server;u.Z.Symbolic={generateSymbolicCoordinatesPartial:function(t,e,r,i){var n,o,s,u=e.ancestors,h=0,l=function(t){return"underscore"===i?r+"_{"+t+"}":"brace"===i?r+"["+t+"]":r+t};for(o in t.listOfFreePoints=[],t.listOfDependantPoints=[],u)if(u.hasOwnProperty(o)&&(n=0,a.Z.isPoint(u[o]))){for(s in u[o].ancestors)u[o].ancestors.hasOwnProperty(s)&&n++;0===n?(u[o].symbolic.x=u[o].coords.usrCoords[1],u[o].symbolic.y=u[o].coords.usrCoords[2],t.listOfFreePoints.push(u[o])):(h+=1,u[o].symbolic.x=l(h),h+=1,u[o].symbolic.y=l(h),t.listOfDependantPoints.push(u[o]))}return a.Z.isPoint(e)&&(e.symbolic.x="x",e.symbolic.y="y"),h},clearSymbolicCoordinates:function(t){var e=function(t){var e,r=t&&t.length||0;for(e=0;e<r;e++)a.Z.isPoint(t[e])&&(t[e].symbolic.x="",t[e].symbolic.y="")};e(t.listOfFreePoints),e(t.listOfDependantPoints),delete t.listOfFreePoints,delete t.listOfDependantPoints},generatePolynomials:function(t,e,r){var i,n,o,s,u=e.ancestors,h=[],l=[];for(i in r&&this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),u[e.id]=e,u)if(u.hasOwnProperty(i)&&(s=0,h=[],a.Z.isPoint(u[i]))){for(n in u[i].ancestors)u[i].ancestors.hasOwnProperty(n)&&s++;if(s>0)for(o=0,h=u[i].generatePolynomial();o<h.length;o++)l.push(h[o])}return r&&this.clearSymbolicCoordinates(t),l},geometricLocusByGroebnerBase:function(t,e){var r,n,o,h,l,d,f,p,v,g,b,y,C=t.options.locus,Z={},x=this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),_=new m.Z(s.Z.COORDS_BY_USR,[0,0],t),E=new m.Z(s.Z.COORDS_BY_USR,[t.canvasWidth,t.canvasHeight],t),w=1,N=0,S=0,A=0;if(P.modules.geoloci===i&&P.loadModule("geoloci"),P.modules.geoloci===i)throw Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(d=_.usrCoords[1],f=E.usrCoords[1],p=E.usrCoords[2],v=_.usrCoords[2],C.translateToOrigin&&t.listOfFreePoints.length>0){for(l=0,N=(o=C.toOrigin!==i&&null!==C.toOrigin&&a.Z.isInArray(t.listOfFreePoints,C.toOrigin.id)?C.toOrigin:t.listOfFreePoints[0]).symbolic.x,S=o.symbolic.y;l<t.listOfFreePoints.length;l++)t.listOfFreePoints[l].symbolic.x-=N,t.listOfFreePoints[l].symbolic.y-=S;if(d-=N,f-=N,p-=S,v-=S,C.translateTo10&&t.listOfFreePoints.length>1){for(l=0,h=C.to10!==i&&null!==C.to10&&C.to10.id!==C.toOrigin.id&&a.Z.isInArray(t.listOfFreePoints,C.to10.id)?C.to10:t.listOfFreePoints[0].id===o.id?t.listOfFreePoints[1]:t.listOfFreePoints[0],g=Math.cos(-(A=c.Z.rad([1,0],[0,0],[h.symbolic.x,h.symbolic.y]))),b=Math.sin(-A);l<t.listOfFreePoints.length;l++)y=t.listOfFreePoints[l].symbolic.x,t.listOfFreePoints[l].symbolic.x=g*t.listOfFreePoints[l].symbolic.x-b*t.listOfFreePoints[l].symbolic.y,t.listOfFreePoints[l].symbolic.y=b*y+g*t.listOfFreePoints[l].symbolic.y;if(h.symbolic.y=0,y=d,d=g*d-b*p,p=b*y+g*p,y=f,f=g*f-b*v,v=b*y+g*v,C.stretch&&Math.abs(h.symbolic.x)>u.Z.eps){for(l=0,w=h.symbolic.x;l<t.listOfFreePoints.length;l++)t.listOfFreePoints[l].symbolic.x/=w,t.listOfFreePoints[l].symbolic.y/=w;for(l=0;l<t.objectsList.length;l++)t.objectsList[l].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&"pointRadius"===t.objectsList[l].method&&(Z[l]=t.objectsList[l].radius,t.objectsList[l].radius/=w);d/=w,f/=w,p/=w,v/=w,h.symbolic.x=1}}for(l=0;l<t.listOfFreePoints.length;l++)Math.abs(y=t.listOfFreePoints[l].symbolic.x)<u.Z.eps&&(t.listOfFreePoints[l].symbolic.x=0),Math.abs(y-Math.round(y))<u.Z.eps&&(t.listOfFreePoints[l].symbolic.x=Math.round(y)),Math.abs(y=t.listOfFreePoints[l].symbolic.y)<u.Z.eps&&(t.listOfFreePoints[l].symbolic.y=0),Math.abs(y-Math.round(y))<u.Z.eps&&(t.listOfFreePoints[l].symbolic.y=Math.round(y))}for(l in r=this.generatePolynomials(t,e).join(","),this.cbp=function(t){n=t},this.cb=a.Z.bind(this.cbp,this),P.modules.geoloci.lociCoCoA(d,f,p,v,x,r,w,A,N,S,this.cb,!0),this.clearSymbolicCoordinates(t),Z)Z.hasOwnProperty(l)&&(t.objects[l].radius=Z[l]);return n}};var D=u.Z.Symbolic;u.Z.Clip={_isSeparator:function(t){return isNaN(t.coords.usrCoords[1])&&isNaN(t.coords.usrCoords[2])},makeDoublyLinkedList:function(t){var e,r=null,i=[],n=t.length;if(n>0)for(e=0;e<n;e++){if(this._isSeparator(t[e])){t[e]._next=t[(e+1)%n],t[e]._prev=t[(n+e-1)%n];continue}null===r&&(r=e,i.push(r)),this._isSeparator(t[(e+1)%n])||e===n-1?(t[e]._next=t[r],t[r]._prev=t[e],t[e]._end=!0,r=null):(t[e]._next=t[(e+1)%n],t[r]._prev=t[e]),this._isSeparator(t[(n+e-1)%n])||(t[e]._prev=t[(n+e-1)%n])}return i},Vertex:function(t,e,r,i,n,o){this.pos=e,this.intersection=!0,this.coords=t,this.elementClass=s.Z.OBJECT_CLASS_POINT,this.data={alpha:r,path:i,pathname:n,done:!1,type:o,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(t,e,r){var i=t.length,n=u.Z.eps*u.Z.eps;i>0&&Math.abs(t[i-1].coords.usrCoords[0]-e.usrCoords[0])<n&&Math.abs(t[i-1].coords.usrCoords[1]-e.usrCoords[1])<n&&Math.abs(t[i-1].coords.usrCoords[2]-e.usrCoords[2])<n||t.push({pos:r,intersection:!1,coords:e,elementClass:s.Z.OBJECT_CLASS_POINT})},sortIntersections:function(t){var e,r,i,n,o,s,a=[],u=t.length;for(e=0;e<u;e++)if(t[e].sort(function(t,e){return t.data.alpha>e.data.alpha?1:-1}),t[e].length>0){for(o=t[e].length-1,s=(n=(i=t[e][0]).data.path[i.pos])._next,e===u-1&&(n._end=!1),0===i.data.alpha&&"T"===i.data.type?(n.intersection=!0,n.data=i.data,n.neighbour=i.neighbour,n.neighbour.neighbour=n,n.entry_exit=!1,t[e][0]=n):(i._prev=n,i._prev._next=i),r=1;r<=o;r++)(i=t[e][r])._prev=t[e][r-1],i._prev._next=i;(i=t[e][o])._next=s,i._next._prev=i,e===u-1&&(i._end=!0),a=a.concat(t[e])}return a},_inbetween:function(t,e,r){var i,n=u.Z.eps*u.Z.eps,o=r[1]-e[1],s=r[2]-e[2],a=t[1]-e[1],h=t[2]-e[2];return 0===o&&0===s&&0===a&&0===h||(Math.abs(i=Math.abs(a)<n&&Math.abs(o)<n?h/s:a/o)<n&&(i=0),i)},_print_array:function(t){var e,r;for(e=0;e<t.length;e++)try{r="",t[e]._end&&(r=" end"),console.log(e,t[e].coords.usrCoords,t[e].data.type,"	","prev",t[e]._prev.coords.usrCoords,"next",t[e]._next.coords.usrCoords+r)}catch(r){console.log(e,t[e].coords.usrCoords)}},_print_list:function(t){for(var e,r=0;r<100&&(e=t.data?t.data.alpha:"-",console.log("	",t.coords.usrCoords,"\n		is:",t.intersection,"end:",t._end,e,"\n		-:",t._prev.coords.usrCoords,"\n		+:",t._next.coords.usrCoords,"\n		n:",t.intersection?t.neighbour.coords.usrCoords:"-"),!t._end);)t=t._next,r++},_noOverlap:function(t,e,r,i){var n,o,s,a,h,l=Math.sqrt(u.Z.eps),c=!1;for(n=0;n<3;n++)if(o=Math.min(t[n],e[n]),s=Math.max(t[n],e[n]),a=Math.min(r[n],i[n]),h=Math.max(r[n],i[n]),s<a-l||o>h+l){c=!0;break}return c},findIntersections:function(t,e,r){var i,n,o,a,h,l,d,f,p,v,g,b,y,C=[],Z=100*u.Z.eps,x=t.length,_=e.length,E=[],w=[],N=[],S=[],A=!1,P=!1;for(n=0;n<_;n++)S.push([]);for(i=0;i<x;i++){if(N.push([]),this._isSeparator(t[i])||this._isSeparator(t[(i+1)%x])){A=!0;continue}if(A&&i===x-1)break;for(n=0,a=t[i].coords.usrCoords,h=t[(i+1)%x].coords.usrCoords;n<_;n++){if(this._isSeparator(e[n])||this._isSeparator(e[(n+1)%_])){P=!0;continue}if(P&&n===_-1)break;if(l=e[n].coords.usrCoords,d=e[(n+1)%_].coords.usrCoords,!this._noOverlap(a,h,l,d)&&(C=c.Z.meetSegmentSegment(a,h,l,d),f=c.Z.distance(a,h,3),p=c.Z.distance(l,d,3),C[1]*f>-Z&&C[1]<1-Z/f&&C[2]*p>-Z&&C[2]<1-Z/p||C[1]===1/0&&C[2]===1/0&&u.Z.norm(C[0],3)<Z)){if(o=new m.Z(s.Z.COORDS_BY_USER,C[0],r),g="X",Math.abs(C[1])*f<Z||Math.abs(C[2])*p<Z)g="T",Math.abs(C[1])*f<Z&&(C[1]=0),Math.abs(C[2])*p<Z&&(C[2]=0),o=0===C[1]?new m.Z(s.Z.COORDS_BY_USER,a,r):new m.Z(s.Z.COORDS_BY_USER,l,r);else if(C[1]===1/0&&C[2]===1/0&&u.Z.norm(C[0],3)<Z){(v=this._inbetween(a,l,d))>=0&&v<1&&(g="T",o=new m.Z(s.Z.COORDS_BY_USER,a,r),C[1]=0,C[2]=v,b=new this.Vertex(o,i,C[1],t,"S",g),y=new this.Vertex(o,n,C[2],e,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y)),v=this._inbetween(l,a,h),c.Z.distance(a,l,3)>Z&&v>=0&&v<1&&(g="T",o=new m.Z(s.Z.COORDS_BY_USER,l,r),C[1]=v,C[2]=0,b=new this.Vertex(o,i,C[1],t,"S",g),y=new this.Vertex(o,n,C[2],e,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y));continue}b=new this.Vertex(o,i,C[1],t,"S",g),y=new this.Vertex(o,n,C[2],e,"C",g),b.neighbour=y,y.neighbour=b,N[i].push(b),S[n].push(y)}}}for(E=this.sortIntersections(N),i=0;i<E.length;i++)E[i].data.idx=i,E[i].neighbour.data.idx=i;return[E,this.sortIntersections(S)]},_getPosition:function(t,e,r,i){var n=c.Z.det3p(t,e,r),o=c.Z.det3p(t,r,i);return c.Z.det3p(e,r,i)>=0?n>=0&&o>=0?"left":"right":n>=0||o>=0?"left":"right"},_classifyDegenerateIntersections:function(t){var e,r,i,n,o,s,h,l,d,f,p,m,v,g;for(d=c.Z.det3p,h=0,t._tours=0;;){if(t.intersection&&"T"===t.data.type&&(e=t._next.coords.usrCoords,r=t._prev.coords.usrCoords,c.Z.distance(t.coords.usrCoords,e,3)<u.Z.eps&&(e=t._next._next.coords.usrCoords),c.Z.distance(t.coords.usrCoords,r,3)<u.Z.eps&&(r=t._prev._prev.coords.usrCoords),n=(o=t.neighbour)._prev.coords.usrCoords,i=o._next.coords.usrCoords,c.Z.distance(o.coords.usrCoords,i,3)<u.Z.eps&&(i=o._next._next.coords.usrCoords),c.Z.distance(o.coords.usrCoords,n,3)<u.Z.eps&&(n=o._prev._prev.coords.usrCoords),p=d(t.coords.usrCoords,r,n),m=d(t.coords.usrCoords,e,i),v=d(t.coords.usrCoords,r,i),g=d(t.coords.usrCoords,e,n),0===p&&0===m&&0===v&&0===g&&(t.coords.usrCoords[1]*=1+Math.random()*u.Z.eps,t.coords.usrCoords[2]*=1+Math.random()*u.Z.eps,o.coords.usrCoords[1]=t.coords.usrCoords[1],o.coords.usrCoords[2]=t.coords.usrCoords[2],p=d(t.coords.usrCoords,r,n),m=d(t.coords.usrCoords,e,i),v=d(t.coords.usrCoords,r,i),g=d(t.coords.usrCoords,e,n)),f=!1,0===p?0>c.Z.affineRatio(t.coords.usrCoords,r,n)&&(f=!0):0===m?0>c.Z.affineRatio(t.coords.usrCoords,e,i)&&(f=!0):0===v?c.Z.affineRatio(t.coords.usrCoords,r,i)>0&&(f=!0):0===g&&c.Z.affineRatio(t.coords.usrCoords,e,n)>0&&(f=!0),f&&(l=n,n=i,i=l,l=p,p=v,v=l,l=m,m=g,g=l),a.Z.exists(t.delayedStatus)||(t.delayedStatus=[]),0===p&&0===m?t.delayedStatus=["on","on"]:0===p?(s=this._getPosition(e,n,o.coords.usrCoords,i),t.delayedStatus=["on",s]):0===m?(s=this._getPosition(r,n,o.coords.usrCoords,i),t.delayedStatus=[s,"on"]):0===t.delayedStatus.length&&(this._getPosition(r,n,o.coords.usrCoords,i)!==this._getPosition(e,n,o.coords.usrCoords,i)?t.data.type="X":t.data.type="B")),a.Z.exists(t._tours)&&t._tours++,t._tours>3||t._end||h>1e3){h>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),a.Z.exists(t._tours)&&delete t._tours;break}t.intersection&&h++,t=t._next}},_handleIntersectionChains:function(t){for(var e,r=0,i="Null",n=!1,o=!1;!0===t.intersection&&("T"===t.data.type&&("on"!==t.delayedStatus[0]&&"on"===t.delayedStatus[1]?(n=!0,e=t,i=t.delayedStatus[0]):n&&"on"===t.delayedStatus[0]&&"on"===t.delayedStatus[1]?t.data.type="B":n&&"on"===t.delayedStatus[0]&&"on"!==t.delayedStatus[1]&&(n=!1,i===t.delayedStatus[1]?(e.data.type="DB",t.data.type="DB"):(e.data.type="DX",t.data.type="DX"))),r++),t._end&&(o=!0),!o||n;){if(r>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}t=t._next}},_handleFullyDegenerateCase:function(t,e,r){var i,n,o,a,h,l,d,f,p,v,g,b,y,C,Z=[t,e];for(o=0;o<2;o++){for(f=0,v=(i=Z[o]).length,C=!0;f<v;f++)if(!i[f].intersection){C=!1;break}if(C)for(f=0,g=(n=Z[(o+1)%2]).length;f<v;f++){for(p=0,h=i[f].coords.usrCoords,l=i[f]._next.coords.usrCoords,a=[(h[0]+l[0])*.5,(h[1]+l[1])*.5,(h[2]+l[2])*.5],b=!1;p<g;p++)if(Math.abs(c.Z.det3p(n[p].coords.usrCoords,n[(p+1)%g].coords.usrCoords,a))<u.Z.eps){b=!0;break}if(!b){d={pos:f,intersection:!1,coords:new m.Z(s.Z.COORDS_BY_USER,a,r),elementClass:s.Z.OBJECT_CLASS_POINT},y=i[f]._next,i[f]._next=d,d._prev=i[f],d._next=y,y._prev=d,i[f]._end&&(i[f]._end=!1,d._end=!0);break}}}},_getStatus:function(t,e){for(var r;t.intersection&&!t._end;)t=t._next;return r=0===c.Z.windingNumber(t.coords.usrCoords,e)?"entry":"exit",[t,r]},markEntryExit:function(t,e,r){var i,n,o,s,u,h,l,c=null,d=0;for(u=0,h=r.length;u<h;u++)for(l=r[u],this._classifyDegenerateIntersections(t[l]),this._handleIntersectionChains(t[l]),n=(s=this._getStatus(t[l],e))[0],i=s[1],n._starter=!0,o=0,c=null,d=0;!0===n.intersection&&("X"===n.data.type&&1===d&&(c.entry_exit=i,"exit"===i&&(c.data.type="X"),d=2),("X"===n.data.type||"DB"===n.data.type)&&(n.entry_exit=i,i="entry"===i?"exit":"entry"),"DX"===n.data.type&&(0===d?(c=n,d=1):1===d?(n.entry_exit=i,c.entry_exit=i,"exit"===i?c.data.type="X":n.data.type="X",i="entry"===i?"exit":"entry",c=null,d=0):2===d&&(n.entry_exit=i,n.data.type="X",i="entry"===i?"exit":"entry",c=null,d=0))),n=n._next,!a.Z.exists(n._starter)&&!(o>1e4);)o++},_stayOnPath:function(t,e){var r=!0;return t.intersection&&"B"!==t.data.type&&(r=e===t.entry_exit),r},_addVertex:function(t,e,r){return(isNaN(e.coords.usrCoords[1])||isNaN(e.coords.usrCoords[2])||t.push(e),e.intersection&&e.data.done)?(r&&console.log("Add last intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type),!0):(e.intersection&&(e.data.done=!0,r&&console.log("Add intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type)),!1)},tracing:function(t,e,r){for(var i,n,o,s,a=0,u=0,h=[],l=!1;u<e.length&&a<1e4;){if((o=e[u]).data.done||"X"!==o.data.type){u++;continue}h.length>0&&h.push([NaN,NaN]),s=o.data.idx,i=t,l=this._addVertex(h,o,!1),n=o.entry_exit;do{if(l)break;if("intersection"===r&&"entry"===o.entry_exit||"union"===r&&"exit"===o.entry_exit||"difference"===r&&i===t==("exit"===o.entry_exit)){do if(o=o._next,l=this._addVertex(h,o,!1))break;while(this._stayOnPath(o,n));a++}else{do if(o=o._prev,l=this._addVertex(h,o,!1))break;while(this._stayOnPath(o,n));a++}if(l)break;if(!o.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",a),[[0],[0]];if((o=o.neighbour).data.done)break;o.data.done=!0,n=o.entry_exit,i=o.data.path}while(o.data.idx!==s&&a<1e4);a>=1e4&&console.log("Tracing: stopping an infinite loop!",a),u++}return this._getCoordsArrays(h,!1)},isEmptyCase:function(t,e,r){return"intersection"===r&&(0===t.length||0===e.length)||"union"===r&&0===t.length&&0===e.length||"difference"===r&&0===t.length},_getCoordsArrays:function(t,e){var r,i=[],n=[],o=t.length;for(r=0;r<o;r++)t[r].coords?(i.push(t[r].coords.usrCoords[1]),n.push(t[r].coords.usrCoords[2])):(i.push(t[r][0]),n.push(t[r][1]));return e&&o>0&&(t[0].coords?(i.push(t[0].coords.usrCoords[1]),n.push(t[0].coords.usrCoords[2])):(i.push(t[0][0]),n.push(t[0][1]))),[i,n]},handleEmptyIntersection:function(t,e,r){var i,n,o=!1,s=[];if(0===t.length)return s="union"===r?e:[],this._getCoordsArrays(s,!0);if(0===e.length)return s="intersection"===r?[]:t,this._getCoordsArrays(s,!0);if(t.length>0)for(i=t[0];i.intersection&&!(i=i._next)._end;);if(e.length>0)for(n=e[0];n.intersection&&!(n=n._next)._end;);return 0===c.Z.windingNumber(i.coords.usrCoords,e)?0!==c.Z.windingNumber(n.coords.usrCoords,t)?("union"===r?(s=s.concat(t)).push(t[0]):"difference"===r&&((s=s.concat(t)).push(t[0]),c.Z.signedPolygon(t)*c.Z.signedPolygon(e)>0&&s.reverse(),s.push([NaN,NaN])),("difference"===r||"intersection"===r)&&((s=s.concat(e)).push(e[0]),o=!1)):"difference"===r?(s=s.concat(t),o=!0):"union"===r&&((s=s.concat(t)).push(t[0]),s.push([NaN,NaN]),(s=s.concat(e)).push(e[0])):"intersection"===r?(s=s.concat(t),o=!0):"union"===r&&(s=s.concat(e)).push(e[0]),this._getCoordsArrays(s,o)},_countCrossingIntersections:function(t){var e,r=t.length,i=0;for(e=0;e<r;e++)"X"===t[e].data.type&&i++;return i},_getPath:function(t,e){var r,i,n,o,u,h,l,d=[];if(t.elementClass===s.Z.OBJECT_CLASS_CURVE&&(t.type===s.Z.OBJECT_TYPE_ARC||t.type===s.Z.OBJECT_TYPE_SECTOR)){for(l=Math.floor(180*(u=c.Z.rad(t.radiuspoint,t.center,t.anglepoint))/Math.PI),n=t.Radius(),o=u/l,h=Math.atan2(t.radiuspoint.coords.usrCoords[2]-t.center.coords.usrCoords[2],t.radiuspoint.coords.usrCoords[1]-t.center.coords.usrCoords[1]),t.type===s.Z.OBJECT_TYPE_SECTOR&&this._addToList(d,t.center.coords,0),r=0;r<=l;r++)this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(r*o+h)*n,t.center.coords.usrCoords[2]+Math.sin(r*o+h)*n],e),r+1);t.type===s.Z.OBJECT_TYPE_SECTOR&&this._addToList(d,t.center.coords,l+2)}else if(t.elementClass===s.Z.OBJECT_CLASS_CURVE&&a.Z.exists(t.points))for(r=0,i=t.numberPoints;r<i;r++)this._addToList(d,t.points[r],r);else if(t.type===s.Z.OBJECT_TYPE_POLYGON)for(r=0;r<t.vertices.length;r++)this._addToList(d,t.vertices[r].coords,r);else if(t.elementClass===s.Z.OBJECT_CLASS_CIRCLE)for(r=0,l=359,n=t.Radius(),o=2*Math.PI/l;r<=l;r++)this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(r*o)*n,t.center.coords.usrCoords[2]+Math.sin(r*o)*n],e),r);else if(a.Z.isArray(t))for(r=0,i=t.length;r<i;r++)a.Z.exists(t[r].coords)?this._addToList(d,t[r].coords,r):a.Z.isArray(t[r])?this._addToList(d,new m.Z(s.Z.COORDS_BY_USER,t[r],e),r):a.Z.exists(t[r].usrCoords)&&this._addToList(d,t[r],r);return d},greinerHormann:function(t,e,r,i){var n,o,s,a=[],h=[],l=[];return((n=(a=this._getPath(t,i)).length)>0&&c.Z.distance(a[0].coords.usrCoords,a[n-1].coords.usrCoords,3)<u.Z.eps&&a.pop(),(n=(h=this._getPath(e,i)).length)>0&&c.Z.distance(h[0].coords.usrCoords,h[n-1].coords.usrCoords,3)<u.Z.eps*u.Z.eps&&h.pop(),this.isEmptyCase(a,h,r))?[[],[]]:(o=this.makeDoublyLinkedList(a),s=this.makeDoublyLinkedList(h),l=this.findIntersections(a,h,i)[0],this._handleFullyDegenerateCase(a,h,i),this.markEntryExit(a,h,o),this.markEntryExit(h,a,s),0===this._countCrossingIntersections(l))?this.handleEmptyIntersection(a,h,r):this.tracing(a,l,r)},union:function(t,e,r){return this.greinerHormann(t,e,"union",r)},intersection:function(t,e,r){return this.greinerHormann(t,e,"intersection",r)},difference:function(t,e,r){return this.greinerHormann(t,e,"difference",r)}},n.Z.extend(u.Z.Clip,{}),u.Z.Clip,u.Z.Poly={},u.Z.Poly.Ring=function(t){this.vars=t},n.Z.extend(u.Z.Poly.Ring.prototype,{}),u.Z.Poly.Monomial=function(t,e,r){var i;if(!a.Z.exists(t))throw Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(a.Z.isArray(r)||(r=[]),i=(r=r.slice(0,t.vars.length)).length;i<t.vars.length;i++)r.push(0);this.ring=t,this.coefficient=e||0,this.exponents=a.Z.deepCopy(r)},n.Z.extend(u.Z.Poly.Monomial.prototype,{copy:function(){return new u.Z.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),u.Z.Poly.Polynomial=function(t,e){var r;if(!a.Z.exists(t))throw Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");r=a.Z.exists(e)&&a.Z.isString(e)?void 0:[],this.ring=t,this.monomials=r},n.Z.extend(u.Z.Poly.Polynomial.prototype,{findSignature:function(t){var e;for(e=0;e<this.monomials.length;e++)if(a.Z.cmpArrays(this.monomials[e].exponents,t))return e;return -1},addSubMonomial:function(t,e){var r;(r=this.findSignature(t.exponents))>-1?this.monomials[r].coefficient+=e*t.coefficient:(t.coefficient*=e,this.monomials.push(t))},add:function(t){var e;if(a.Z.exists(t)&&t.ring===this.ring){if(a.Z.isArray(t.exponents))this.addSubMonomial(t,1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],1)}else throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.")},sub:function(t){var e;if(a.Z.exists(t)&&t.ring===this.ring){if(a.Z.isArray(t.exponents))this.addSubMonomial(t,-1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],-1)}else throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.")},copy:function(){var t,e;for(t=0,e=new u.Z.Poly.Polynomial(this.ring);t<this.monomials.length;t++)e.monomials.push(this.monomials[t].copy());return e},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}}),u.Z.Poly,r(2971);var M=r(9399);n.Z.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},n.Z.extend(n.Z.AbstractRenderer.prototype,{_updateVisual:function(t,e,r){(r||this.enhancedRendering)&&(e=e||{},this.setObjectViewport(t),this.setObjectTransition(t),a.Z.evaluate(t.visProp.draft)?this.setDraft(t):(e.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.visProp.highlightstrokecolor,t.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(t,t.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))),e.fill||(t.highlighted?this.setObjectFillColor(t,t.visProp.highlightfillcolor,t.visProp.highlightfillopacity):this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity)),e.dash||this.setDashStyle(t,t.visProp),e.shadow||this.setShadow(t),e.tabindex||this.setTabindex(t)))},_getHighlighted:function(t){var e=!1;return a.Z.exists(t.board)&&a.Z.exists(t.board.highlightedObjects)||(e=!0),!e&&a.Z.exists(t.board.highlightedObjects[t.id])?"highlight":""},drawPoint:function(t){var e,r=M.Z.normalizePointFace(a.Z.evaluate(t.visProp.face));e="o"===r?"ellipse":"[]"===r?"rect":"path",t.rendNode=this.appendChildPrim(this.createPrim(e,t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,e),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var e,r=a.Z.evaluate(t.visProp.size),i=M.Z.normalizePointFace(a.Z.evaluate(t.visProp.face)),n=a.Z.evaluate(t.visProp.sizeunit),o=a.Z.evaluate(t.visProp.zoom);isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||("user"===n&&(r*=Math.sqrt(Math.abs(t.board.unitX*t.board.unitY))),r*=t.board&&o?Math.sqrt(t.board.zoomX*t.board.zoomY):1,e=0===r?0:r+1,"o"===i?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],e,e):"[]"===i?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-r,t.coords.scrCoords[2]-r,2*r,2*r):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,r,i),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var e=this.getElementById(t.id);a.Z.exists(e)&&this.remove(e),this.drawPoint(t),a.Z.clearVisPropOld(t),t.visPropCalc.visible||this.display(t,!1),a.Z.evaluate(t.visProp.draft)&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLine:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path"),this.updateCurve(t)},updateCurve:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},updatePathWithArrowHeads:function(t,e){var r,i,n=t.visProp;r=e&&n.highlightstrokewidth?Math.max(a.Z.evaluate(n.highlightstrokewidth),a.Z.evaluate(n.strokewidth)):a.Z.evaluate(n.strokewidth),i=this.getArrowHeadData(t,r,e?"highlight":""),this.makeArrows(t,i),t.elementClass===s.Z.OBJECT_CLASS_LINE?this.updateLineWithEndings(t,i):t.elementClass===s.Z.OBJECT_CLASS_CURVE&&this.updatePath(t),this.setArrowSize(t,i)},getArrowHeadData:function(t,e,r){var i,n,o,h,l=u.Z.eps,c=0,d=0,f=0,p=0,m=a.Z.evaluate(t.visProp.firstarrow),v=a.Z.evaluate(t.visProp.lastarrow);return(m||v)&&(i=a.Z.exists(m.type)?a.Z.evaluate(m.type):t.elementClass===s.Z.OBJECT_CLASS_LINE?1:7,n=a.Z.exists(v.type)?a.Z.evaluate(v.type):t.elementClass===s.Z.OBJECT_CLASS_LINE?1:7,m&&(h=6,a.Z.exists(m.size)&&(h=a.Z.evaluate(m.size)),""!==r&&a.Z.exists(m[r+"size"])&&(h=a.Z.evaluate(m[r+"size"])),o=e*h,2===i?(o*=.5,l+=e*h):3===i?(o=e*h/3,l+=e):4===i||5===i||6===i?(o=e*h/1.5,l+=e*h):7===i?(o=0,h=10,l+=e):l+=e*h,c+=o,f=h),v&&(h=6,a.Z.exists(v.size)&&(h=a.Z.evaluate(v.size)),""!==r&&a.Z.exists(v[r+"size"])&&(h=a.Z.evaluate(v[r+"size"])),o=e*h,2===n?(o*=.5,l+=e*h):3===n?(o=e*h/3,l+=e):4===n||5===n||6===n?(o=e*h/1.5,l+=e*h):7===n?(o=0,h=10,l+=e):l+=e*h,d+=o,p=h)),t.visPropCalc.typeFirst=i,t.visPropCalc.typeLast=n,{evFirst:m,evLast:v,typeFirst:i,typeLast:n,offFirst:c,offLast:d,sizeFirst:f,sizeLast:p,showFirst:1,showLast:1,minLen:l,strokeWidth:e}},updateLineWithEndings:function(t,e){var r,i,n=null;return r=new m.Z(s.Z.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),i=new m.Z(s.Z.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),n=a.Z.evaluate(t.visProp.margin),c.Z.calcStraight(t,r,i,n),this.handleTouchpoints(t,r,i,e),this.getPositionArrowHead(t,r,i,e),this.updateLinePrim(t.rendNode,r.scrCoords[1],r.scrCoords[2],i.scrCoords[1],i.scrCoords[2],t.board),this},updatePath:function(t){return a.Z.evaluate(t.visProp.handdrawing)?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),this},getPositionArrowHead:function(t,e,r,i){var n,o,a,u,h;return(i.evFirst||i.evLast)&&(o=a=u=h=0,n=e.distance(s.Z.COORDS_BY_SCREEN,r),i.evFirst&&"vml"!==t.board.renderer.type&&(n>=i.minLen?(o=(r.scrCoords[1]-e.scrCoords[1])*i.offFirst/n,a=(r.scrCoords[2]-e.scrCoords[2])*i.offFirst/n):i.showFirst=0),i.evLast&&"vml"!==t.board.renderer.type&&(n>=i.minLen?(u=(r.scrCoords[1]-e.scrCoords[1])*i.offLast/n,h=(r.scrCoords[2]-e.scrCoords[2])*i.offLast/n):i.showLast=0),e.setCoordinates(s.Z.COORDS_BY_SCREEN,[e.scrCoords[1]+o,e.scrCoords[2]+a],!1,!0),r.setCoordinates(s.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-u,r.scrCoords[2]-h],!1,!0)),this},handleTouchpoints:function(t,e,r,i){var n,o,u,h,l,c,d;return(i.evFirst||i.evLast)&&(u=h=l=c=d=0,n=a.Z.evaluate(t.point1.visProp.size)+a.Z.evaluate(t.point1.visProp.strokewidth),o=a.Z.evaluate(t.point2.visProp.size)+a.Z.evaluate(t.point2.visProp.strokewidth),i.evFirst&&a.Z.evaluate(t.visProp.touchfirstpoint)&&a.Z.evaluate(t.point1.visProp.visible)&&(u=e.distance(s.Z.COORDS_BY_SCREEN,r),h=(r.scrCoords[1]-e.scrCoords[1])*n/u,l=(r.scrCoords[2]-e.scrCoords[2])*n/u),i.evLast&&a.Z.evaluate(t.visProp.touchlastpoint)&&a.Z.evaluate(t.point2.visProp.visible)&&(u=e.distance(s.Z.COORDS_BY_SCREEN,r),c=(r.scrCoords[1]-e.scrCoords[1])*o/u,d=(r.scrCoords[2]-e.scrCoords[2])*o/u),e.setCoordinates(s.Z.COORDS_BY_SCREEN,[e.scrCoords[1]+h,e.scrCoords[2]+l],!1,!0),r.setCoordinates(s.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-c,r.scrCoords[2]-d],!1,!0)),this},setArrowSize:function(t,e){return e.evFirst&&this._setArrowWidth(t.rendNodeTriangleStart,e.showFirst*e.strokeWidth,t.rendNode,e.sizeFirst),e.evLast&&this._setArrowWidth(t.rendNodeTriangleEnd,e.showLast*e.strokeWidth,t.rendNode,e.sizeLast),this},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var e=t.Radius();Math.abs(t.center.coords.usrCoords[0])>u.Z.eps&&!isNaN(e+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&e*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],e*t.board.unitX,e*t.board.unitY),this.setLineCap(t)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var e,r,i,n;"html"===a.Z.evaluate(t.visProp.display)&&o.Z.isBrowser&&"no"!==this.type?((e=this.container.ownerDocument.createElement("div")).style.position="absolute",e.className=a.Z.evaluate(t.visProp.cssclass),i=a.Z.evaluate(t.visProp.layer),a.Z.exists(i)||(i=0),r=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),e.style.zIndex=r+i,this.container.appendChild(e),e.setAttribute("id",this.container.id+"_"+t.id)):e=this.drawInternalText(t),t.rendNode=e,t.htmlStr="",t.visProp.islabel&&a.Z.exists(t.visProp.anchor)?(n=a.Z.evaluate(t.visProp.anchor.visProp.visible),t.prepareUpdate().updateVisibility(n)):t.prepareUpdate().updateVisibility(),this.updateText(t)},updateText:function(t){var e,r,i,o,s,u,h,l,c,d,f,p=t.plaintext;if(t.visPropCalc.visible){if(this.updateTextStyle(t,!1),"html"===a.Z.evaluate(t.visProp.display)&&"no"!==this.type){if(isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(r=1e6>Math.abs(r=t.coords.scrCoords[1])?r:1e6,"right"===(s=t.getAnchorX())?(e=t.board.canvasWidth-r,d="right"):"middle"===s?(e=r-.5*t.size[0],d="center"):(e=r,d="left"),t.visPropOld.left!==s+e&&("right"===s?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=s+e),r=1e6>Math.abs(r=t.coords.scrCoords[2]+this.vOffsetText)?r:1e6,"bottom"===(u=t.getAnchorY())?(e=t.board.canvasHeight-r,f="bottom"):"middle"===u?(e=r-.5*t.size[1],f="center"):(e=r,f="top"),t.visPropOld.top===u+e||("bottom"===u?(t.rendNode.style.top="auto",t.rendNode.style.bottom=e+"px"):(t.rendNode.style.bottom="auto",t.rendNode.style.top=e+"px"),t.visPropOld.top=u+e)),t.htmlStr!==p){try{t.type===a.Z.OBJECT_TYPE_BUTTON?t.rendNodeButton.innerHTML=p:t.type===a.Z.OBJECT_TYPE_CHECKBOX||t.type===a.Z.OBJECT_TYPE_INPUT?t.rendNodeLabel.innerHTML=p:t.rendNode.innerHTML=p}catch(e){i=t.rendNode.parentNode,t.rendNode.parentNode.removeChild(t.rendNode),t.rendNode.innerHTML=p,i.appendChild(t.rendNode)}if(t.htmlStr=p,a.Z.evaluate(t.visProp.usemathjax))try{MathJax.typeset?(MathJax.typeset([t.rendNode]),console.log(t.id,t.rendNode)):MathJax.Hub.Queue(["Typeset",MathJax.Hub,t.rendNode])}catch(t){n.Z.debug("MathJax (not yet) loaded")}else if(a.Z.evaluate(t.visProp.usekatex))try{(o=0===t.rendNode.innerHTML.indexOf("<span")&&t.rendNode.innerHTML.indexOf("<label")>0&&(t.rendNode.innerHTML.indexOf("<checkbox")>0||t.rendNode.innerHTML.indexOf("<input")>0)?t.rendNodeLabel:0===t.rendNode.innerHTML.indexOf("<button")?t.rendNodeButton:t.rendNode)&&katex.render(p,o,{macros:a.Z.evaluate(t.visProp.katexmacros),throwOnError:!1})}catch(t){n.Z.debug("KaTeX not loaded (yet)")}else if(a.Z.evaluate(t.visProp.useasciimathml))try{AMprocessNode(t.rendNode,!1)}catch(t){n.Z.debug("AsciiMathML not loaded (yet)")}}0!==(h=a.Z.evaluate(t.visProp.rotate))&&(h*=Math.PI/180,l=Math.cos(h),c=Math.sin(h),t.rendNode.style.transform="matrix("+[l,-1*c,c,l,0,0].join(",")+")",t.rendNode.style["transform-origin"]=d+" "+f),this.transformImage(t,t.transformations)}else this.updateInternalText(t)}},_css2js:function(t){var e,r,i,n=[],o=a.Z.trim(t).replace(/;$/,"").split(";");for(e=0,r=o.length;e<r;++e)""!==a.Z.trim(o[e])&&(i=o[e].split(":"),n.push({key:a.Z.trim(i[0].replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()})),val:a.Z.trim(i[1])}));return n},updateTextStyle:function(t,e){var r,i,n,s,u,h,l,c,d,f=t.visProp,p=o.Z.isBrowser?f.display:"internal",m=["rendNode","rendNodeTag","rendNodeLabel"],v=m.length,g=a.Z.evaluate(f.fontunit),b=["cssdefaultstyle","cssstyle"],y=b.length;if(e?(n=f.highlightstrokecolor,i=f.highlightstrokeopacity,s=f.highlightcssclass):(n=f.strokecolor,i=f.strokeopacity,s=f.cssclass),"no"!==this.type&&("html"===p||"canvas"!==this.type)){for(c=0;c<y;c++)if(""!==(d=a.Z.evaluate(f[(e?"highlight":"")+b[c]]))&&t.visPropOld[b[c]]!==d){for(u=0,h=this._css2js(d);u<v;u++)if(a.Z.exists(t[m[u]]))for(l in h)h.hasOwnProperty(l)&&(t[m[u]].style[h[l].key]=h[l].val);t.visPropOld[b[c]]=d}if(r=a.Z.evaluate(f.fontsize),t.visPropOld.fontsize!==r){t.needsSizeUpdate=!0;try{for(u=0;u<v;u++)a.Z.exists(t[m[u]])&&(t[m[u]].style.fontSize=r+g)}catch(e){for(u=0;u<v;u++)a.Z.exists(t[m[u]])&&(t[m[u]].style.fontSize=r)}t.visPropOld.fontsize=r}}return this.setTabindex(t),this.setObjectTransition(t),"html"===p&&"no"!==this.type?(this.setObjectViewport(t,!0),t.visPropOld.cssclass!==s&&(t.rendNode.className=s,t.visPropOld.cssclass=s,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,n,i)):this.updateInternalTextStyle(t,n,i),this},updateInternalTextStyle:function(t,e,r){this.setObjectStrokeColor(t,e,r)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformImage(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,e){var r,i=t.board.origin.scrCoords[1],n=t.board.origin.scrCoords[2],o=t.board.unitX,s=t.board.unitY,a=e.length,h=[[1,0,0],[-i/o,1/o,0],[n/s,0,-1/s]];for(r=0;r<a;r++)h=u.Z.matMatMult(e[r].matrix,h);return u.Z.matMatMult([[1,0,0],[i,o,0],[n,0,-s]],h)},transformImage:function(t,e){},updateImageURL:function(t){},updateImageStyle:function(t,e){t.rendNode.className=a.Z.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass)},drawForeignObject:function(t){},updateForeignObject:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t,e){},_setArrowWidth:function(t,e,r){},updateEllipsePrim:function(t,e,r,i,n){},updateLinePrim:function(t,e,r,i,n,o){},updatePathPrim:function(t,e,r){},updatePathStringPoint:function(t,e,r){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,r,i,n){},setPropertyPrim:function(t,e,r){},setTabindex:function(t){var e;t.board.attr.keyboard.enabled&&a.Z.exists(t.rendNode)&&(e=a.Z.evaluate(t.visProp.tabindex),(!t.visPropCalc.visible||a.Z.evaluate(t.visProp.fixed))&&(e=null),e!==t.visPropOld.tabindex&&(t.rendNode.setAttribute("tabindex",e),t.visPropOld.tabindex=e))},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){if(a.Z.evaluate(t.visProp.draft)){var e=t.board.options.elements.draft.color,r=t.board.options.elements.draft.opacity;this.setObjectViewport(t),this.setObjectTransition(t),t.type===s.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,e,r):(t.elementClass===s.Z.OBJECT_CLASS_POINT?this.setObjectFillColor(t,e,r):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,e,r),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},removeDraft:function(t){this.setObjectViewport(t),this.setObjectTransition(t),t.type===s.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity):(t.type===s.Z.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity),this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectViewport:function(t,e){},setObjectFillColor:function(t,e,r){},setObjectStrokeColor:function(t,e,r){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t,e){var r,i,n,o=t.visProp;if(this.setObjectViewport(t),this.setObjectTransition(t),!o.draft){if(t.type===s.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,o.highlightfillcolor,o.highlightfillopacity),i=a.Z.evaluate(o.highlightbystrokewidth),r=0;r<t.borders.length;r++)this.highlight(t.borders[r],!i);else t.elementClass===s.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):(t.type===s.Z.OBJECT_TYPE_IMAGE?this.updateImageStyle(t,!0):this.setObjectStrokeColor(t,o.highlightstrokecolor,o.highlightstrokeopacity),this.setObjectFillColor(t,o.highlightfillcolor,o.highlightfillopacity));o.highlightstrokewidth&&!e&&(n=Math.max(a.Z.evaluate(o.highlightstrokewidth),a.Z.evaluate(o.strokewidth)),this.setObjectStrokeWidth(t,n),(t.elementClass===s.Z.OBJECT_CLASS_LINE||t.elementClass===s.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(t,!0))}return this},noHighlight:function(t){var e,r,i=t.visProp;if(this.setObjectViewport(t),this.setObjectTransition(t),!a.Z.evaluate(t.visProp.draft)){if(t.type===s.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,i.fillcolor,i.fillopacity),e=0;e<t.borders.length;e++)this.noHighlight(t.borders[e]);else t.elementClass===s.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):(t.type===s.Z.OBJECT_TYPE_IMAGE?this.updateImageStyle(t,!1):this.setObjectStrokeColor(t,i.strokecolor,i.strokeopacity),this.setObjectFillColor(t,i.fillcolor,i.fillopacity));r=a.Z.evaluate(i.strokewidth),this.setObjectStrokeWidth(t,r),(t.elementClass===s.Z.OBJECT_CLASS_LINE||t.elementClass===s.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(t,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t,e){var r,i,n=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},s=function(e,s,u,h){var l;u=u||"",(l=r.createElement("span")).innerHTML=e,l.style.paddingLeft="7px",l.style.paddingRight="7px",void 0!==l.classList&&(l.classList.add("JXG_navigation_button"),l.classList.add("JXG_navigation_button_"+h)),l.setAttribute("id",u+"_navigation_"+h),i.appendChild(l),o.Z.addEvent(l,"click",function(e){return a.Z.bind(s,t)(),!1},t),o.Z.addEvent(l,"pointerup",n,t),o.Z.addEvent(l,"pointerdown",n,t),o.Z.addEvent(l,"pointerleave",n,t),o.Z.addEvent(l,"mouseup",n,t),o.Z.addEvent(l,"mousedown",n,t),o.Z.addEvent(l,"touchend",n,t),o.Z.addEvent(l,"touchstart",n,t)};o.Z.isBrowser&&"no"!==this.type&&((i=(r=t.containerObj.ownerDocument).createElement("div")).setAttribute("id",t.container+"_navigationbar"),i.style.color=e.strokecolor,i.style.backgroundColor=e.fillcolor,i.style.padding=e.padding,i.style.position=e.position,i.style.fontSize=e.fontsize,i.style.cursor=e.cursor,i.style.zIndex=e.zindex,t.containerObj.appendChild(i),i.style.right=e.right,i.style.bottom=e.bottom,void 0!==i.classList&&i.classList.add("JXG_navigation"),t.attr.showfullscreen&&s(t.attr.fullscreen.symbol,function(){t.toFullscreen(t.attr.fullscreen.id)},t.container,"fullscreen"),t.attr.showscreenshot&&s(t.attr.screenshot.symbol,function(){window.setTimeout(function(){t.renderer.screenshot(t,"",!1)},330)},t.container,"screenshot"),t.attr.showreload&&s("",function(){t.reload()},t.container,"reload"),t.attr.showcleartraces&&s("",function(){t.clearTraces()},t.container,"cleartraces"),t.attr.shownavigation&&(t.attr.showzoom&&(s("",t.zoomOut,t.container,"out"),s("o",t.zoom100,t.container,"100"),s("+",t.zoomIn,t.container,"in")),s("",t.clickLeftArrow,t.container,"left"),s("",t.clickUpArrow,t.container,"down"),s("",t.clickDownArrow,t.container,"up"),s("",t.clickRightArrow,t.container,"right")))},getElementById:function(t){var e;return a.Z.exists(this.container)?(e=this.container.id+"_"+t,a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(e=CSS.escape(e)),this.container.querySelector("#"+e)):""},removeToInsertLater:function(t){var e=t.parentNode,r=t.nextSibling;if(null!==e)return e.removeChild(t),function(){r?e.insertBefore(t,r):e.appendChild(t)}},resize:function(t,e){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,e){},dumpToDataURI:function(t){},dumpToCanvas:function(t,e,r,i){},screenshot:function(t){},setLayer:function(t,e){}});var O=n.Z.AbstractRenderer;n.Z.FileReader={handleRemoteFile:function(t,e,r,i,o,s){var u=!1;try{u=new XMLHttpRequest,"raw"===r.toLowerCase()?u.overrideMimeType("text/plain; charset="+o):u.overrideMimeType("text/xml; charset="+o)}catch(t){try{u=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{u=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){u=!1}}}if(!u){n.Z.debug("AJAX not activated!");return}u.open("GET",t,i),"raw"===r.toLowerCase()?this.cbp=function(){var t=u;4===t.readyState&&e(t.responseText)}:this.cbp=function(){var t=u,i="";4===t.readyState&&(i=a.Z.exists(t.responseStream)&&("PK"===t.responseText.slice(0,2)||31===N.asciiCharCodeAt(t.responseText.slice(0,1),0))?A.decode(jxgBinFileReader(t)):t.responseText,this.parseString(i,e,r,s))},this.cb=a.Z.bind(this.cbp,this),u.onreadystatechange=this.cb;try{u.send(null)}catch(e){throw Error("JSXGraph: A problem occurred while trying to read remote file '"+t+"'.")}},handleLocalFile:function(t,e,r,i,n,o){a.Z.exists(i)||(i=!0),"raw"===r.toLowerCase()?this.cbp=function(t){e(t.target.result)}:this.cbp=function(t){var i=t.target.result;this.parseString(i,e,r,o)},this.cb=a.Z.bind(this.cbp,this);var s=new FileReader;s.onload=this.cb,"raw"===r.toLowerCase()?s.readAsText(t):s.readAsText(t,n)},parseFileContent:function(t,e,r,i,n,o){a.Z.isString(t)||void 0===FileReader?this.handleRemoteFile(t,e,r,i,n,o):this.handleLocalFile(t,e,r,i,n,o)},parseString:function(t,e,r,i){var o;if(r=r.toLowerCase(),o=n.Z.readers[r],a.Z.exists(o))new o(e,t).read();else if("jessiecode"===r);else throw Error("JSXGraph: There is no reader available for '"+r+"'.");a.Z.isFunction(i)&&i(e)}},!o.Z.isMetroApp()&&o.Z.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n</script>\n');var T=n.Z.FileReader,B=r(2137),F=r(2004),R=r(2141);n.Z.SVGRenderer=function(t,e){var r;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(e.width,e.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(t,e,r,i,n,o){var s,u,h,l,c,d=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return d.setAttributeNS(null,"id",t),d.setAttributeNS(null,"width","300%"),d.setAttributeNS(null,"height","300%"),d.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(s=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),s.setAttributeNS(null,"result","offOut"),s.setAttributeNS(null,"dx",o[0]),s.setAttributeNS(null,"dy",o[1]),d.appendChild(s),(u=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),u.setAttributeNS(null,"result","colorOut"),u.setAttributeNS(null,"type","matrix"),"none"===e||!a.Z.isArray(e)||e.length<3?u.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+r+" 0"):(e[0]/=255,e[1]/=255,e[2]/=255,c=i+" 0 0 0 "+e[0]+"  0 "+i+" 0 0 "+e[1]+"  0 0 "+i+" 0 "+e[2]+"  0 0 0 "+r+" 0",u.setAttributeNS(null,"values",c)),d.appendChild(u),(h=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),h.setAttributeNS(null,"result","blurOut"),h.setAttributeNS(null,"stdDeviation",n),d.appendChild(h),(l=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),l.setAttributeNS(null,"in2","blurOut"),l.setAttributeNS(null,"mode","normal"),d.appendChild(l),d},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var t=Array.prototype.slice.call(arguments).join("");return a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(t=CSS.escape(t)),t},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],r=0;r<M.Z.layer.numlayers;r++)this.layer[r]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[r]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch(t){this.supportsForeignObject=!1}},n.Z.SVGRenderer.prototype=new O,n.Z.extend(n.Z.SVGRenderer.prototype,{_createArrowHead:function(t,e,r){var i,n,o,u,h=t.id+"Triangle";return a.Z.exists(e)&&(h+=e),a.Z.exists(r)&&(h+=r),(i=this.createPrim("marker",h)).setAttributeNS(null,"stroke",a.Z.evaluate(t.visProp.strokecolor)),i.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(t.visProp.strokeopacity)),i.setAttributeNS(null,"fill",a.Z.evaluate(t.visProp.strokecolor)),i.setAttributeNS(null,"fill-opacity",a.Z.evaluate(t.visProp.strokeopacity)),i.setAttributeNS(null,"stroke-width",0),i.setAttributeNS(null,"orient","auto"),i.setAttributeNS(null,"markerUnits","strokeWidth"),n=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),u=5,"Start"===e?(o=0,2===r?n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===r?n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===r?(u=3.31,n.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===r?(u=3.28,n.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===r?(u=2.84,n.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===r?(u=5.2,n.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),t.elementClass===s.Z.OBJECT_CLASS_LINE&&(o=2===r?4.9:3===r?3.3:4===r||5===r||6===r?6.66:7===r?0:10)):(o=10,2===r?n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===r?(o=3.3,n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===r?(u=3.31,n.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===r?(u=3.28,n.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===r?(u=2.84,n.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===r?(u=5.2,n.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),t.elementClass===s.Z.OBJECT_CLASS_LINE&&(o=2===r?5.1:3===r?.02:4===r||5===r||6===r?3.33:7===r?10:.05)),7===r&&(i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"stroke-width",1)),i.setAttributeNS(null,"refY",u),i.setAttributeNS(null,"refX",o),i.appendChild(n),i},_setArrowColor:function(t,e,r,i,n){t&&(a.Z.isString(e)&&(7!==n?this._setAttribute(function(){t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"fill",e),t.setAttributeNS(null,"stroke-opacity",r),t.setAttributeNS(null,"fill-opacity",r)},i.visPropOld.fillcolor):this._setAttribute(function(){t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"stroke-opacity",r)},i.visPropOld.fillcolor)),this.isIE&&i.rendNode.parentNode.insertBefore(i.rendNode,i.rendNode))},_setArrowWidth:function(t,e,r,i){var n;t&&(n=e*i,t.setAttributeNS(null,"viewBox","0 0 "+10*e+" "+10*e),t.setAttributeNS(null,"markerHeight",n),t.setAttributeNS(null,"markerWidth",n),t.setAttributeNS(null,"display","inherit"),this.isIE&&r.parentNode.insertBefore(r,r))},updateTicks:function(t){var e,r,i,n,o,s,u,h,l="",c=t.ticks.length,d=!0;for(e=0;e<c;e++){for(o=(i=t.ticks[e])[0],s=i[1],u=o.length,h=" M "+o[0]+" "+s[0],a.Z.isNumber(o[0])||(d=!1),r=1;d&&r<u;++r)a.Z.isNumber(o[r])?h+=" L "+o[r]+" "+s[r]:d=!1;d&&(l+=h)}n=t.rendNode,a.Z.exists(n)||(n=this.createPrim("path",t.id),this.appendChildPrim(n,a.Z.evaluate(t.visProp.layer)),t.rendNode=n),n.setAttributeNS(null,"stroke",a.Z.evaluate(t.visProp.strokecolor)),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(t.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",a.Z.evaluate(t.visProp.strokewidth)),this.updatePathPrim(n,l,t.board),this.setObjectViewport(t)},displayCopyright:function(t,e){var r,i=this.createPrim("text","licenseText");i.setAttributeNS(null,"x","20px"),i.setAttributeNS(null,"y",2+e+"px"),i.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+e+"px; fill:#356AA0;  opacity:0.3;"),r=this.container.ownerDocument.createTextNode(t),i.appendChild(r),this.appendChildPrim(i,0)},drawInternalText:function(t){var e=this.createPrim("text",t.id);return e.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),e},updateInternalText:function(t){var e,r=t.plaintext,i=t.getAnchorX(),n=t.getAnchorY();t.rendNode.getAttributeNS(null,"class")!==t.visProp.cssclass&&(t.rendNode.setAttributeNS(null,"class",a.Z.evaluate(t.visProp.cssclass)),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(e=t.coords.scrCoords[1],t.visPropOld.left!==i+e&&(t.rendNode.setAttributeNS(null,"x",e+"px"),"left"===i?t.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===i?t.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===i&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=i+e),e=t.coords.scrCoords[2],t.visPropOld.top===n+e||(t.rendNode.setAttributeNS(null,"y",e+.5*this.vOffsetText+"px"),"bottom"===n?t.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===n?t.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===n&&t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.visPropOld.top=n+e)),t.htmlStr!==r&&(t.rendNodeText.data=r,t.htmlStr=r),this.transformImage(t,t.transformations)},updateInternalTextStyle:function(t,e,r,i){this.setObjectViewport(t),this.setObjectFillColor(t,e,r)},drawImage:function(t){var e=this.createPrim("image",t.id);e.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var r,i,n,o,u=t.rendNode,h="";if(e.length>0&&-1===(r=[(i=this.joinTransforms(t,e))[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0]].join(",")).indexOf("NaN")){if(h+=" matrix("+r+") ",t.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===t.visProp.display){switch(u.style.transform=h,n=-t.coords.scrCoords[1],o=-t.coords.scrCoords[2],a.Z.evaluate(t.visProp.anchorx)){case"right":n+=t.size[0];break;case"middle":n+=.5*t.size[0]}switch(a.Z.evaluate(t.visProp.anchory)){case"bottom":o+=t.size[1];break;case"middle":o+=.5*t.size[1]}u.style["transform-origin"]=n+"px "+o+"px"}else u.setAttributeNS(null,"transform",h)}},updateImageURL:function(t){var e=a.Z.evaluate(t.url);return t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",e),t._src=e,!0)},updateImageStyle:function(t,e){var r=a.Z.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass);t.rendNode.setAttributeNS(null,"class",r)},drawForeignObject:function(t){t.rendNode=this.appendChildPrim(this.createPrim("foreignObject",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"foreignObject"),this.updateForeignObject(t)},updateForeignObject:function(t){t._useUserSize?t.rendNode.style.overflow="hidden":t.rendNode.style.overflow="visible",this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),t.rendNode.innerHTML=t.content,this._updateVisual(t,{stroke:!0,dash:!0},!0)},appendChildPrim:function(t,e){return a.Z.exists(e)?e>=M.Z.layer.numlayers&&(e=M.Z.layer.numlayers-1):e=0,this.layer[e].appendChild(t),t},createPrim:function(t,e){var r=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return r.setAttributeNS(null,"id",this.uniqName(e)),r.style.position="absolute","path"===t&&(r.setAttributeNS(null,"stroke-linecap","round"),r.setAttributeNS(null,"stroke-linejoin","round"),r.setAttributeNS(null,"fill-rule","evenodd")),r},remove:function(t){a.Z.exists(t)&&a.Z.exists(t.parentNode)&&t.parentNode.removeChild(t)},setLayer:function(t,e){a.Z.exists(e)?e>=M.Z.layer.numlayers&&(e=M.Z.layer.numlayers-1):e=0,this.layer[e].appendChild(t.rendNode)},makeArrows:function(t,e){var r,i,n=e.evFirst,o=e.evLast;if(this.isIE&&t.visPropCalc.visible&&(n||o)){t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode);return}r=t.rendNodeTriangleStart,n?(i=this.toStr(this.container.id,"_",t.id,"TriangleStart",e.typeFirst),a.Z.exists(r)&&r.id===i||(null===(r=this.container.ownerDocument.getElementById(i))&&(r=this._createArrowHead(t,"Start",e.typeFirst),this.defs.appendChild(r)),t.rendNodeTriangleStart=r,t.rendNode.setAttributeNS(null,"marker-start",this.toURL(i)))):a.Z.exists(r)&&this.remove(r),r=t.rendNodeTriangleEnd,o?(i=this.toStr(this.container.id,"_",t.id,"TriangleEnd",e.typeLast),a.Z.exists(r)&&r.id===i||(null===(r=this.container.ownerDocument.getElementById(i))&&(r=this._createArrowHead(t,"End",e.typeLast),this.defs.appendChild(r)),t.rendNodeTriangleEnd=r,t.rendNode.setAttributeNS(null,"marker-end",this.toURL(i)))):a.Z.exists(r)&&this.remove(r)},updateEllipsePrim:function(t,e,r,i,n){var o=1e6;e=Math.abs(e)<(o=2e5)?e:o*e/Math.abs(e),r=Math.abs(r)<o?r:o*r/Math.abs(r),i=Math.abs(i)<o?i:o*i/Math.abs(i),n=Math.abs(n)<o?n:o*n/Math.abs(n),t.setAttributeNS(null,"cx",e),t.setAttributeNS(null,"cy",r),t.setAttributeNS(null,"rx",Math.abs(i)),t.setAttributeNS(null,"ry",Math.abs(n))},updateLinePrim:function(t,e,r,i,n){var o=1e6;o=2e5,isNaN(e+r+i+n)||(e=Math.abs(e)<o?e:o*e/Math.abs(e),r=Math.abs(r)<o?r:o*r/Math.abs(r),i=Math.abs(i)<o?i:o*i/Math.abs(i),n=Math.abs(n)<o?n:o*n/Math.abs(n),t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",r),t.setAttributeNS(null,"x2",i),t.setAttributeNS(null,"y2",n))},updatePathPrim:function(t,e){""===e&&(e="M 0 0"),t.setAttributeNS(null,"d",e)},updatePathStringPoint:function(t,e,r){var i="",n=t.coords.scrCoords,o=e*Math.sqrt(3)*.5,s=.5*e;return"x"===r?i=" M "+(n[1]-e)+" "+(n[2]-e)+" L "+(n[1]+e)+" "+(n[2]+e)+" M "+(n[1]+e)+" "+(n[2]-e)+" L "+(n[1]-e)+" "+(n[2]+e):"+"===r?i=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+e)+" "+n[2]+" M "+n[1]+" "+(n[2]-e)+" L "+n[1]+" "+(n[2]+e):"|"===r?i=" M "+n[1]+" "+(n[2]-e)+" L "+n[1]+" "+(n[2]+e):"-"===r?i=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+e)+" "+n[2]:"<>"===r||"<<>>"===r?("<<>>"===r&&(e*=1.41),i=" M "+(n[1]-e)+" "+n[2]+" L "+n[1]+" "+(n[2]+e)+" L "+(n[1]+e)+" "+n[2]+" L "+n[1]+" "+(n[2]-e)+" Z "):"^"===r?i=" M "+n[1]+" "+(n[2]-e)+" L "+(n[1]-o)+" "+(n[2]+s)+" L "+(n[1]+o)+" "+(n[2]+s)+" Z ":"v"===r?i=" M "+n[1]+" "+(n[2]+e)+" L "+(n[1]-o)+" "+(n[2]-s)+" L "+(n[1]+o)+" "+(n[2]-s)+" Z ":">"===r?i=" M "+(n[1]+e)+" "+n[2]+" L "+(n[1]-s)+" "+(n[2]-o)+" L "+(n[1]-s)+" "+(n[2]+o)+" Z ":"<"===r&&(i=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+s)+" "+(n[2]-o)+" L "+(n[1]+s)+" "+(n[2]+o)+" Z "),i},updatePathStringPrim:function(t){var e,r,i,n=" M ",o="";if(t.numberPoints<=0)return"";if(i=Math.min(t.points.length,t.numberPoints),1===t.bezierDegree)for(e=0;e<i;e++)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?n=" M ":(r[1]=Math.max(Math.min(r[1],5e3),-5e3),r[2]=Math.max(Math.min(r[2],5e3),-5e3),o+=n+r[1]+" "+r[2],n=" L ");else if(3===t.bezierDegree)for(e=0;e<i;)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?n=" M ":(o+=n+r[1]+" "+r[2]," C "===n&&(e+=1,o+=" "+(r=t.points[e].scrCoords)[1]+" "+r[2],e+=1,o+=" "+(r=t.points[e].scrCoords)[1]+" "+r[2]),n=" C "),e+=1;return o},updatePathStringBezierPrim:function(t){var e,r,i,n,o,s,u,h=" M ",l="",c=a.Z.evaluate(t.visProp.strokewidth),d="plot"!==a.Z.evaluate(t.visProp.curvetype);if(t.numberPoints<=0)return"";for(d&&t.board.options.curve.RDPsmoothing&&(t.points=p.Z.RamerDouglasPeucker(t.points,.5)),u=Math.min(t.points.length,t.numberPoints),r=1;r<3;r++)for(e=0,h=" M ";e<u;e++)isNaN((n=t.points[e].scrCoords)[1])||isNaN(n[2])?h=" M ":(n[1]=Math.max(Math.min(n[1],5e3),-5e3),n[2]=Math.max(Math.min(n[2],5e3),-5e3)," M "===h?l+=h+n[1]+" "+n[2]:(i=2*r,l+=[h,o+(n[1]-o)*.333+c*(i*Math.random()-r)," ",s+(n[2]-s)*.333+c*(i*Math.random()-r)," ",o+(n[1]-o)*.666+c*(i*Math.random()-r)," ",s+(n[2]-s)*.666+c*(i*Math.random()-r)," ",n[1]," ",n[2]].join("")),h=" C ",o=n[1],s=n[2]);return l},updatePolygonPrim:function(t,e){var r,i,n="",o=e.vertices.length;for(t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"fill-rule","evenodd"),"polygonalchain"===e.elType&&o++,r=0;r<o-1;r++){if(e.vertices[r].isReal)n=n+(i=e.vertices[r].coords.scrCoords)[1]+","+i[2];else{t.setAttributeNS(null,"points","");return}r<o-2&&(n+=" ")}-1===n.indexOf("NaN")&&t.setAttributeNS(null,"points",n)},updateRectPrim:function(t,e,r,i,n){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",r),t.setAttributeNS(null,"width",i),t.setAttributeNS(null,"height",n)},setPropertyPrim:function(t,e,r){"stroked"!==e&&t.setAttributeNS(null,e,r)},display:function(t,e){var r;t&&t.rendNode&&(t.visPropOld.visible=e,r=t.rendNode,e?(r.setAttributeNS(null,"display","inline"),r.style.visibility="inherit"):(r.setAttributeNS(null,"display","none"),r.style.visibility="hidden"))},show:function(t){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(t,!0)},hide:function(t){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(t,!1)},setBuffering:function(t,e){t.rendNode.setAttribute("buffered-rendering",e)},setDashStyle:function(t){var e=a.Z.evaluate(t.visProp.dash),r=a.Z.evaluate(t.visProp.dashscale)?.5*a.Z.evaluate(t.visProp.strokewidth):1,i=t.rendNode;e>0?i.setAttributeNS(null,"stroke-dasharray",this.dashArray[e-1].map(function(t){return t*r}).join(",")):i.hasAttributeNS(null,"stroke-dasharray")&&i.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var e,r,i,n=t.rendNode,o=a.Z.evaluate(t.visProp.gradient);"linear"===o||"radial"===o?(e=this.createPrim(o+"Gradient",t.id+"_gradient"),r=this.createPrim("stop",t.id+"_gradient1"),i=this.createPrim("stop",t.id+"_gradient2"),e.appendChild(r),e.appendChild(i),this.defs.appendChild(e),n.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+t.id+"_gradient")),t.gradNode1=r,t.gradNode2=i,t.gradNode=e):n.removeAttributeNS(null,"style")},updateGradientAngle:function(t,e){var r=1,i=Math.cos(e),n=Math.sin(e);Math.abs(i)>Math.abs(n)?r/=Math.abs(i):r/=Math.abs(n),i>=0?(t.setAttributeNS(null,"x1",0),t.setAttributeNS(null,"x2",i*r)):(t.setAttributeNS(null,"x1",-i*r),t.setAttributeNS(null,"x2",0)),n>=0?(t.setAttributeNS(null,"y1",0),t.setAttributeNS(null,"y2",n*r)):(t.setAttributeNS(null,"y1",-n*r),t.setAttributeNS(null,"y2",0))},updateGradientCircle:function(t,e,r,i,n,o,s){t.setAttributeNS(null,"cx",100*e+"%"),t.setAttributeNS(null,"cy",100*r+"%"),t.setAttributeNS(null,"r",100*i+"%"),t.setAttributeNS(null,"fx",100*n+"%"),t.setAttributeNS(null,"fy",100*o+"%"),t.setAttributeNS(null,"fr",100*s+"%")},updateGradient:function(t){var e,r,i=t.gradNode1,n=t.gradNode2,o=a.Z.evaluate(t.visProp.gradient);a.Z.exists(i)&&a.Z.exists(n)&&(r=(r=a.Z.evaluate(t.visProp.fillopacity))>0?r:0,e=a.Z.evaluate(t.visProp.fillcolor),i.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+r),n.setAttributeNS(null,"style","stop-color:"+a.Z.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+a.Z.evaluate(t.visProp.gradientsecondopacity)),i.setAttributeNS(null,"offset",100*a.Z.evaluate(t.visProp.gradientstartoffset)+"%"),n.setAttributeNS(null,"offset",100*a.Z.evaluate(t.visProp.gradientendoffset)+"%"),"linear"===o?this.updateGradientAngle(t.gradNode,a.Z.evaluate(t.visProp.gradientangle)):"radial"===o&&this.updateGradientCircle(t.gradNode,a.Z.evaluate(t.visProp.gradientcx),a.Z.evaluate(t.visProp.gradientcy),a.Z.evaluate(t.visProp.gradientr),a.Z.evaluate(t.visProp.gradientfx),a.Z.evaluate(t.visProp.gradientfy),a.Z.evaluate(t.visProp.gradientfr)))},setObjectTransition:function(t,e){var r,i,n,o=[],s=0,u=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===e&&(e=a.Z.evaluate(t.visProp.transitionduration)),r=a.Z.evaluate(t.visProp.transitionproperties),e!==t.visPropOld.transitionduration||r!==t.visPropOld.transitionproperties){for(a.Z.exists(r)&&(s=r.length),n=0;n<s;n++)o.push(r[n]+" "+e+"ms");for(n=0,i=o.join(", "),s=u.length;n<s;++n)t[u[n]]&&(t[u[n]].style.transition=i);t.visPropOld.transitionduration=e,t.visPropOld.transitionproperties=r}},setObjectViewport:function(t,e){var r,i,n,o,s,u,h,l,c=a.Z.evaluate(t.visProp.viewport),d=0,f=["rendNode"];for("inherit"===c&&(c=a.Z.evaluate(t.board.attr.viewport)),e&&(n=t.rendNode.getBoundingClientRect(),o=this.container.getBoundingClientRect(),u=parseFloat(c[1]),h=parseFloat(c[2]),l=parseFloat(c[3]),s=parseFloat(c[0]),a.Z.isString(c[1])&&c[1].indexOf("%")>0&&(u=o.height*u/100),a.Z.isString(c[2])&&c[2].indexOf("%")>0&&(h=o.width*h/100),a.Z.isString(c[3])&&c[3].indexOf("%")>0&&(l=o.height*l/100),a.Z.isString(c[0])&&c[0].indexOf("%")>0&&(s=o.width*s/100),u=parseFloat(o.top)-parseFloat(n.top)+u,h=parseFloat(n.right)-parseFloat(o.right)+h,l=parseFloat(n.bottom)-parseFloat(o.bottom)+l,c=[s=parseFloat(o.left)-parseFloat(n.left)+s,u,h,l]),r=["number"==typeof c[1]?c[1]+"px":c[1],"number"==typeof c[2]?c[2]+"px":c[2],"number"==typeof c[3]?c[3]+"px":c[3],"number"==typeof c[0]?c[0]+"px":c[0]].join(" "),d=f.length,i=0;i<d;++i)t[f[i]]&&(e?t[f[i]].style.clipPath="inset("+r+")":t[f[i]].setAttributeNS(null,"clip-path","view-box inset("+r+")"))},_setAttribute:function(t,e){""===e?t():window.setTimeout(t,1)},setObjectFillColor:function(t,e,r,i){var o,s,u,h,l=a.Z.evaluate(e),c=a.Z.evaluate(r),d=a.Z.evaluate(t.visProp.gradient);c=c>0?c:0,(t.visPropOld.fillcolor!==l||t.visPropOld.fillopacity!==c||null!==d)&&(a.Z.exists(l)&&!1!==l&&(9!==l.length?(s=l,h=c):(s=(u=R.Z.rgba2rgbo(l))[0],h=c*u[1]),o=void 0===i?t.rendNode:i,"none"!==s&&this._setAttribute(function(){o.setAttributeNS(null,"fill",s)},t.visPropOld.fillcolor),t.type===n.Z.OBJECT_TYPE_IMAGE?this._setAttribute(function(){o.setAttributeNS(null,"opacity",h)},t.visPropOld.fillopacity):("none"===s?(h=0,o.setAttributeNS(null,"pointer-events","visibleStroke")):o.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){o.setAttributeNS(null,"fill-opacity",h)},t.visPropOld.fillopacity)),("linear"===d||"radial"===d)&&this.updateGradient(t)),t.visPropOld.fillcolor=l,t.visPropOld.fillopacity=c)},setObjectStrokeColor:function(t,e,r){var i,n,o,u,h=a.Z.evaluate(e),l=a.Z.evaluate(r);l=l>0?l:0,(t.visPropOld.strokecolor!==h||t.visPropOld.strokeopacity!==l)&&(a.Z.exists(h)&&!1!==h&&(9!==h.length?(i=h,o=l):(i=(n=R.Z.rgba2rgbo(h))[0],o=l*n[1]),u=t.rendNode,t.elementClass===s.Z.OBJECT_CLASS_TEXT?"html"===a.Z.evaluate(t.visProp.display)?this._setAttribute(function(){u.style.color=i,u.style.opacity=o},t.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"style","fill:"+i),u.setAttributeNS(null,"style","fill-opacity:"+o)},t.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"stroke",i),u.setAttributeNS(null,"stroke-opacity",o)},t.visPropOld.strokecolor),(t.elementClass===s.Z.OBJECT_CLASS_CURVE||t.elementClass===s.Z.OBJECT_CLASS_LINE)&&(a.Z.evaluate(t.visProp.firstarrow)&&this._setArrowColor(t.rendNodeTriangleStart,i,o,t,t.visPropCalc.typeFirst),a.Z.evaluate(t.visProp.lastarrow)&&this._setArrowColor(t.rendNodeTriangleEnd,i,o,t,t.visPropCalc.typeLast))),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,e){var r,i=a.Z.evaluate(e);isNaN(i)||t.visPropOld.strokewidth===i||(r=t.rendNode,this.setPropertyPrim(r,"stroked","true"),a.Z.exists(i)&&this.setPropertyPrim(r,"stroke-width",i+"px"),t.visPropOld.strokewidth=i)},setLineCap:function(t){var e=a.Z.evaluate(t.visProp.linecap);void 0!==e&&""!==e&&t.visPropOld.linecap!==e&&a.Z.exists(t.rendNode)&&(this.setPropertyPrim(t.rendNode,"stroke-linecap",e),t.visPropOld.linecap=e)},setShadow:function(t){var e,r,i,o,s,u,h,l,c=a.Z.evaluate(t.visProp.shadow),d=!0,f=!1;(e=JSON.stringify(c))!==t.visPropOld.shadow&&("boolean"==typeof c?(d=!0,f=c,r="none",i=3,o=.1,s=[5,5],u=1):a.Z.evaluate(c.enabled)?(d=!1,f=!0,r=n.Z.rgbParser(a.Z.evaluate(c.color)),i=a.Z.evaluate(c.blur),o=a.Z.evaluate(c.blend),s=a.Z.evaluate(c.offset),u=a.Z.evaluate(c.opacity)):f=!1,a.Z.exists(t.rendNode)&&(f?d?t.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((l=this.container.ownerDocument.getElementById(h))&&this.defs.removeChild(l),h=t.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(h,r,u,o,i,s)),t.rendNode.setAttributeNS(null,"filter",this.toURL(h))):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=e)},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(t,e){this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(e))},createTouchpoints:function(t){var e,r,i,n;for(e=0,this.touchpoints=[];e<t;e++)r="touchpoint1_"+e,n=this.createPrim("path",r),this.appendChildPrim(n,19),n.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"display","none"),i="touchpoint2_"+e,n=this.createPrim("ellipse",i),this.appendChildPrim(n,19),this.updateEllipsePrim(n,0,0,0,0),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"fill","#ffffff"),n.setAttributeNS(null,"fill-opacity",0),n.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,e){var r,i;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(r=e[0],i=e[1],this.touchpoints[2*t].setAttributeNS(null,"d","M "+(r-37)+" "+i+" L "+(r+37)+" "+i+" M "+r+" "+(i-37)+" L "+r+" "+(i+37)),this.updateEllipsePrim(this.touchpoints[2*t+1],e[0],e[1],25,25))},_getValuesOfDOMElements:function(t){var e=[];if(1===t.nodeType)for(t=t.firstChild;t;)void 0!==t.id&&void 0!==t.value&&e.push([t.id,t.value]),e=e.concat(this._getValuesOfDOMElements(t)),t=t.nextSibling;return e},_getDataUri:function(t,e){var r=new Image;r.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0),e(t.toDataURL("image/png")),t.remove()},r.src=t},_getImgDataURL:function(t){var e,r,i,n,o,s;if((r=(e=t.getElementsByTagName("image")).length)>0)for(s=0,i=document.createElement("canvas");s<r;s++){e[s].setAttribute("crossorigin","anonymous"),n=i.getContext("2d"),i.width=e[s].getAttribute("width"),i.height=e[s].getAttribute("height");try{n.drawImage(e[s],0,0,i.width,i.height),o=i.toDataURL(),e[s].setAttribute("xlink:href",o)}catch(t){console.log("CORS problem! Image can not be used",t)}}return!0},dumpToDataURI:function(t){var e,r,i,n=this.svgRoot,o=window.btoa||A.encode,s=[];if(this.container.hasChildNodes()&&a.Z.exists(this.foreignObjLayer)&&!t)for(this.foreignObjLayer.setAttribute("display","inline");n.nextSibling;)s=s.concat(this._getValuesOfDOMElements(n.nextSibling)),this.foreignObjLayer.appendChild(n.nextSibling);if(this._getImgDataURL(n),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),e=new XMLSerializer().serializeToString(n),!0!==t)for(r=0,i=s.length;r<i;r++)e=e.replace('id="'+s[r][0]+'"','id="'+s[r][0]+'" value="'+s[r][1]+'"');if((e.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(e=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),e=(e=e.replace(/&nbsp;/g," ")).replace(/url\(&quot;(.*)&quot;\)/g,"url($1)"),a.Z.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+o(unescape(encodeURIComponent(e)))},dumpToCanvas:function(t,e,r,i){var n,o,s,a;return((s=this.container.ownerDocument.getElementById(t)).width=s.width,a=s.getContext("2d"),void 0!==e&&void 0!==r&&(s.style.width=parseFloat(e)+"px",s.style.height=parseFloat(r)+"px",s.setAttribute("width",parseFloat(e)),s.setAttribute("height",parseFloat(r))),o=new Image,n=this.dumpToDataURI(i),o.src=n,"Promise"in window)?new Promise(function(t,i){try{o.onload=function(){a.drawImage(o,0,0,e,r),t()}}catch(t){i(t)}}):(o.onload=function(){window.setTimeout(function(){try{a.drawImage(o,0,0,e,r)}catch(t){console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(t,e,r){var i,n,o,s,u,h,l,c,d,f,p,m,v=this.container.ownerDocument,g=this.container.parentNode,b=t.attr.screenshot,y=!1;return"no"===this.type||(l=b.scale*this.container.getBoundingClientRect().width,c=b.scale*this.container.getBoundingClientRect().height,void 0===e||""===e?(y=!0,(s=new Image).style.width=l+"px",s.style.height=c+"px"):(y=!1,s=v.getElementById(e)),y&&((i=v.createElement("div")).style.cssText=b.css,i.style.width=l+"px",i.style.height=c+"px",i.style.zIndex=this.container.style.zIndex+120,i.style.position="absolute",i.style.top=this.container.offsetTop+"px",i.style.left=this.container.offsetLeft+"px"),n=v.createElement("canvas"),o=Math.random().toString(36).slice(2,7),n.setAttribute("id",o),n.setAttribute("width",l),n.setAttribute("height",c),n.style.width=l+"px",n.style.height=l+"px",n.style.display="none",g.appendChild(n),y&&(u=v.createElement("span"),h=v.createTextNode(""),u.style.cssText=b.cssButton,u.appendChild(h),u.onclick=function(){i.parentNode.removeChild(i)},i.appendChild(s),i.appendChild(u),g.insertBefore(i,this.container.nextSibling)),d=v.getElementById(this.uniqName("navigationbar")),a.Z.exists(d)&&(f=d.style.display,d.style.display="none",p=this.removeToInsertLater(d)),m=function(){s.src=n.toDataURL("image/png"),g.removeChild(n)},"Promise"in window?this.dumpToCanvas(o,l,c,r).then(m):(this.dumpToCanvas(o,l,c,r),window.setTimeout(m,200)),a.Z.exists(d)&&(d.style.display=f,p())),this}});var L=n.Z.SVGRenderer;n.Z.VMLRenderer=function(t){this.type="vml",this.container=t,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,a.Z.exists(n.Z.vmlStylesheet)||(t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),n.Z.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),n.Z.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{t.ownerDocument.namespaces.jxgvml||t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(e){return t.ownerDocument.createElement("<jxgvml:"+e+' class="jxgvml">')}}catch(e){this.createNode=function(e){return t.ownerDocument.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},n.Z.VMLRenderer.prototype=new O,n.Z.extend(n.Z.VMLRenderer.prototype,{_setAttr:function(t,e,r,i){try{8===this.container.ownerDocument.documentMode?t[e]=r:t.setAttribute(e,r,i)}catch(t){n.Z.debug("_setAttr: "+e+" "+r+"<br>\n")}},updateTicks:function(t){var e,r,i,n,o,s=this.resolution,u=[];for(e=0,r=t.ticks.length;e<r;e++)n=(i=t.ticks[e])[0],o=i[1],a.Z.isNumber(n[0])&&a.Z.isNumber(n[1])&&u.push(" m "+Math.round(s*n[0])+", "+Math.round(s*o[0])+" l "+Math.round(s*n[1])+", "+Math.round(s*o[1])+" ");a.Z.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,a.Z.evaluate(t.visProp.layer))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",a.Z.evaluate(t.visProp.strokecolor),1),this._setAttr(t.rendNode,"strokeweight",a.Z.evaluate(t.visProp.strokewidth)),this._setAttr(t.rendNodeStroke,"opacity",100*a.Z.evaluate(t.visProp.strokeopacity)+"%"),this.updatePathPrim(t.rendNode,u,t.board)},displayCopyright:function(t,e){var r,i;(r=this.createNode("textbox")).style.position="absolute",this._setAttr(r,"id",this.container.id+"_licenseText"),r.style.left=20,r.style.top=2,r.style.fontSize=e,r.style.color="#356AA0",r.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(r,"opacity","30%"),r.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",i=this.container.ownerDocument.createTextNode(t),r.appendChild(i),this.appendChildPrim(r,0)},drawInternalText:function(t){var e;return(e=this.createNode("textbox")).style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,9),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e},updateInternalText:function(t){var e,r,i,n,o,s,a=t.plaintext,h=this.joinTransforms(t,t.transformations),l=[0,0],c=t.rendNode,d=[],f=t.getAnchorX(),p=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for("right"===f?l[0]=1:"middle"===f&&(l[0]=.5),"bottom"===p?l[1]=1:"middle"===p&&(l[1]=.5),d[0]=u.Z.matVecMult(h,[1,t.coords.scrCoords[1]-l[0]*t.size[0],t.coords.scrCoords[2]+(1-l[1])*t.size[1]+this.vOffsetText]),d[0][1]/=d[0][0],d[0][2]/=d[0][0],d[1]=u.Z.matVecMult(h,[1,t.coords.scrCoords[1]+(1-l[0])*t.size[0],t.coords.scrCoords[2]+(1-l[1])*t.size[1]+this.vOffsetText]),d[1][1]/=d[1][0],d[1][2]/=d[1][0],d[2]=u.Z.matVecMult(h,[1,t.coords.scrCoords[1]+(1-l[0])*t.size[0],t.coords.scrCoords[2]-l[1]*t.size[1]+this.vOffsetText]),d[2][1]/=d[2][0],d[2][2]/=d[2][0],d[3]=u.Z.matVecMult(h,[1,t.coords.scrCoords[1]-l[0]*t.size[0],t.coords.scrCoords[2]-l[1]*t.size[1]+this.vOffsetText]),d[3][1]/=d[3][0],d[3][2]/=d[3][0],r=d[0][1],n=d[0][1],i=d[0][2],o=d[0][2],s=1;s<4;s++)r=Math.max(r,d[s][1]),n=Math.min(n,d[s][1]),i=Math.max(i,d[s][2]),o=Math.min(o,d[s][2]);e=1===l[0]?Math.floor(t.board.canvasWidth-r):Math.floor(n),t.visPropOld.left!==f+e&&(1===l[0]?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=f+e),e=1===l[1]?Math.floor(t.board.canvasHeight-i):Math.floor(o),t.visPropOld.top!==p+e&&(1===l[1]?(t.rendNode.style.bottom=e+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=e+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=p+e)}t.htmlStr!==a&&(t.rendNodeText.data=a,t.htmlStr=a),c.filters.item(0).M11=h[1][1],c.filters.item(0).M12=h[1][2],c.filters.item(0).M21=h[2][1],c.filters.item(0).M22=h[2][2],c.filters.item(0).enabled=!0},drawImage:function(t){var e;(e=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(e,"id",this.container.id+"_"+t.id),this.container.appendChild(e),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var r,i,n,o,s,a,h=t.rendNode,l=[];if(e.length>0){for(r=this.joinTransforms(t,e),l[0]=u.Z.matVecMult(r,t.coords.scrCoords),l[0][1]/=l[0][0],l[0][2]/=l[0][0],l[1]=u.Z.matVecMult(r,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),l[1][1]/=l[1][0],l[1][2]/=l[1][0],l[2]=u.Z.matVecMult(r,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),l[2][1]/=l[2][0],l[2][2]/=l[2][0],l[3]=u.Z.matVecMult(r,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),l[3][1]/=l[3][0],l[3][2]/=l[3][0],i=l[0][1],o=l[0][1],n=l[0][2],s=l[0][2],a=1;a<4;a++)i=Math.max(i,l[a][1]),o=Math.min(o,l[a][1]),n=Math.max(n,l[a][2]),s=Math.min(s,l[a][2]);h.style.left=Math.floor(o)+"px",h.style.top=Math.floor(s)+"px",h.filters.item(0).M11=r[1][1],h.filters.item(0).M12=r[1][2],h.filters.item(0).M21=r[2][1],h.filters.item(0).M22=r[2][2],h.filters.item(0).enabled=!0}},updateImageURL:function(t){var e=a.Z.evaluate(t.url);this._setAttr(t.rendNode,"src",e)},appendChildPrim:function(t,e){return a.Z.exists(e)||(e=0),t.style.zIndex=e,this.container.appendChild(t),t},appendNodesToElement:function(t,e){("shape"===e||"path"===e||"polygon"===e)&&(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,e){var r,i,n=this.createNode("fill"),o=this.createNode("stroke"),s=this.createNode("shadow");return this._setAttr(n,"id",this.container.id+"_"+e+"_fill"),this._setAttr(o,"id",this.container.id+"_"+e+"_stroke"),this._setAttr(s,"id",this.container.id+"_"+e+"_shadow"),"circle"===t||"ellipse"===t?((r=this.createNode("oval")).appendChild(n),r.appendChild(o),r.appendChild(s)):"polygon"===t||"path"===t||"shape"===t||"line"===t?((r=this.createNode("shape")).appendChild(n),r.appendChild(o),r.appendChild(s),i=this.createNode("path"),this._setAttr(i,"id",this.container.id+"_"+e+"_path"),r.appendChild(i)):((r=this.createNode(t)).appendChild(n),r.appendChild(o),r.appendChild(s)),r.style.position="absolute",r.style.left="0px",r.style.top="0px",this._setAttr(r,"id",this.container.id+"_"+e),r},remove:function(t){a.Z.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var e,r=a.Z.evaluate(t.visProp.firstarrow),i=a.Z.evaluate(t.visProp.lastarrow);(t.visPropOld.firstarrow!==r||t.visPropOld.lastarrow!==i)&&(r?(e=t.rendNodeStroke,this._setAttr(e,"startarrow","block"),this._setAttr(e,"startarrowlength","long")):(e=t.rendNodeStroke,a.Z.exists(e)&&this._setAttr(e,"startarrow","none")),i?(e=t.rendNodeStroke,this._setAttr(e,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(e,"endarrow","block"),this._setAttr(e,"endarrowlength","long")):(e=t.rendNodeStroke,a.Z.exists(e)&&this._setAttr(e,"endarrow","none")),t.visPropOld.firstarrow=r,t.visPropOld.lastarrow=i)},updateEllipsePrim:function(t,e,r,i,n){t.style.left=Math.floor(e-i)+"px",t.style.top=Math.floor(r-n)+"px",t.style.width=Math.floor(2*Math.abs(i))+"px",t.style.height=Math.floor(2*Math.abs(n))+"px"},updateLinePrim:function(t,e,r,i,n,o){var s=this.resolution;isNaN(e+r+i+n)||this.updatePathPrim(t,["m ",Math.floor(s*e),", ",Math.floor(s*r)," l ",Math.floor(s*i),", ",Math.floor(s*n)],o)},updatePathPrim:function(t,e,r){var i=r.canvasWidth,n=r.canvasHeight;e.length<=0&&(e=["m 0,0"]),t.style.width=i,t.style.height=n,this._setAttr(t,"coordsize",[Math.floor(this.resolution*i),Math.floor(this.resolution*n)].join(",")),this._setAttr(t,"path",e.join(""))},updatePathStringPoint:function(t,e,r){var i=[],n=Math.round,o=t.coords.scrCoords,s=e*Math.sqrt(3)*.5,a=.5*e,u=this.resolution;return"x"===r?i.push([" m ",n(u*(o[1]-e)),", ",n(u*(o[2]-e))," l ",n(u*(o[1]+e)),", ",n(u*(o[2]+e))," m ",n(u*(o[1]+e)),", ",n(u*(o[2]-e))," l ",n(u*(o[1]-e)),", ",n(u*(o[2]+e))].join("")):"+"===r?i.push([" m ",n(u*(o[1]-e)),", ",n(u*o[2])," l ",n(u*(o[1]+e)),", ",n(u*o[2])," m ",n(u*o[1]),", ",n(u*(o[2]-e))," l ",n(u*o[1]),", ",n(u*(o[2]+e))].join("")):"<>"===r||"<<>>"===r?("<<>>"===r&&(e*=1.41),i.push([" m ",n(u*(o[1]-e)),", ",n(u*o[2])," l ",n(u*o[1]),", ",n(u*(o[2]+e))," l ",n(u*(o[1]+e)),", ",n(u*o[2])," l ",n(u*o[1]),", ",n(u*(o[2]-e))," x e "].join(""))):"^"===r?i.push([" m ",n(u*o[1]),", ",n(u*(o[2]-e))," l ",n(u*(o[1]-s)),", ",n(u*(o[2]+a))," l ",n(u*(o[1]+s)),", ",n(u*(o[2]+a))," x e "].join("")):"v"===r?i.push([" m ",n(u*o[1]),", ",n(u*(o[2]+e))," l ",n(u*(o[1]-s)),", ",n(u*(o[2]-a))," l ",n(u*(o[1]+s)),", ",n(u*(o[2]-a))," x e "].join("")):">"===r?i.push([" m ",n(u*(o[1]+e)),", ",n(u*o[2])," l ",n(u*(o[1]-a)),", ",n(u*(o[2]-s))," l ",n(u*(o[1]-a)),", ",n(u*(o[2]+s))," l ",n(u*(o[1]+e)),", ",n(u*o[2])].join("")):"<"===r&&i.push([" m ",n(u*(o[1]-e)),", ",n(u*o[2])," l ",n(u*(o[1]+a)),", ",n(u*(o[2]-s))," l ",n(u*(o[1]+a)),", ",n(u*(o[2]+s))," x e "].join("")),i},updatePathStringPrim:function(t){var e,r,i=[],n=this.resolution,o=Math.round,s=" m ",a=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(a=Math.min(a,t.points.length),1===t.bezierDegree)for(e=0;e<a;e++)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?s=" m ":(r[1]>2e4?r[1]=2e4:r[1]<-2e4&&(r[1]=-2e4),r[2]>2e4?r[2]=2e4:r[2]<-2e4&&(r[2]=-2e4),i.push([s,o(n*r[1]),", ",o(n*r[2])].join("")),s=" l ");else if(3===t.bezierDegree)for(e=0;e<a;)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?s=" m ":(i.push([s,o(n*r[1]),", ",o(n*r[2])].join(""))," c "===s&&(e+=1,i.push([" ",o(n*(r=t.points[e].scrCoords)[1]),", ",o(n*r[2])].join("")),e+=1,i.push([" ",o(n*(r=t.points[e].scrCoords)[1]),", ",o(n*r[2])].join(""))),s=" c "),e+=1;return i.push(" e"),i},updatePathStringBezierPrim:function(t){var e,r,i,n,o,s,u=[],h=a.Z.evaluate(t.visProp.strokewidth),l=this.resolution,c=Math.round,d=" m ",f="plot"!==a.Z.evaluate(t.visProp.curvetype),m=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(f&&t.board.options.curve.RDPsmoothing&&(t.points=p.Z.RamerDouglasPeucker(t.points,1)),m=Math.min(m,t.points.length),r=1;r<3;r++)for(e=0,d=" m ";e<m;e++)isNaN((n=t.points[e].scrCoords)[1])||isNaN(n[2])?d=" m ":(n[1]>2e4?n[1]=2e4:n[1]<-2e4&&(n[1]=-2e4),n[2]>2e4?n[2]=2e4:n[2]<-2e4&&(n[2]=-2e4)," m "===d?u.push([d,c(l*n[1])," ",c(l*n[2])].join("")):(i=2*r,u.push([d,c(l*(o+(n[1]-o)*.333+h*(i*Math.random()-r)))," ",c(l*(s+(n[2]-s)*.333+h*(i*Math.random()-r)))," ",c(l*(o+(n[1]-o)*.666+h*(i*Math.random()-r)))," ",c(l*(s+(n[2]-s)*.666+h*(i*Math.random()-r)))," ",c(l*n[1])," ",c(l*n[2])].join(""))),d=" c ",o=n[1],s=n[2]);return u.push(" e"),u},updatePolygonPrim:function(t,e){var r,i,n=e.vertices.length,o=this.resolution,s=[];if(this._setAttr(t,"stroked","false"),!isNaN((i=e.vertices[0].coords.scrCoords)[1]+i[2])){for(s.push(["m ",Math.floor(o*i[1]),",",Math.floor(o*i[2])," l "].join("")),r=1;r<n-1;r++){if(e.vertices[r].isReal){if(isNaN((i=e.vertices[r].coords.scrCoords)[1]+i[2]))return;s.push(Math.floor(o*i[1])+","+Math.floor(o*i[2]))}else{this.updatePathPrim(t,"",e.board);return}r<n-2&&s.push(", ")}s.push(" x e"),this.updatePathPrim(t,s,e.board)}},updateRectPrim:function(t,e,r,i,n){t.style.left=Math.floor(e)+"px",t.style.top=Math.floor(r)+"px",i>=0&&(t.style.width=i+"px"),n>=0&&(t.style.height=n+"px")},setPropertyPrim:function(t,e,r){var i,n="";switch(e){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle"}""!==n&&(i=a.Z.evaluate(r),this._setAttr(t,n,i))},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,e?t.rendNode.style.visibility="inherit":t.rendNode.style.visibility="hidden")},show:function(t){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="inherit")},hide:function(t){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="hidden")},setDashStyle:function(t,e){var r;e.dash>=0&&(r=t.rendNodeStroke,this._setAttr(r,"dashstyle",this.dashArray[e.dash]))},setGradient:function(t){var e=t.rendNodeFill,r=a.Z.evaluate(t.visProp.gradient);"linear"===r?(this._setAttr(e,"type","gradient"),this._setAttr(e,"color2",a.Z.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",a.Z.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"angle",a.Z.evaluate(t.visProp.gradientangle))):"radial"===r?(this._setAttr(e,"type","gradientradial"),this._setAttr(e,"color2",a.Z.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",a.Z.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"focusposition",100*a.Z.evaluate(t.visProp.gradientpositionx)+"%,"+100*a.Z.evaluate(t.visProp.gradientpositiony)+"%"),this._setAttr(e,"focussize","0,0")):this._setAttr(e,"type","solid")},setObjectFillColor:function(t,e,r){var i,n,o,u=a.Z.evaluate(e),h=a.Z.evaluate(r),l=t.rendNode;h=h>0?h:0,(t.visPropOld.fillcolor!==u||t.visPropOld.fillopacity!==h)&&(a.Z.exists(u)&&!1!==u&&(9!==u.length?(i=u,o=h):(i=(n=R.Z.rgba2rgbo(u))[0],o=h*n[1]),"none"===i||!1===i?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",i),a.Z.exists(o)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",100*o+"%")),t.type===s.Z.OBJECT_TYPE_IMAGE&&l.filters.length>1&&(l.filters.item(1).opacity=Math.round(100*o),l.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=u,t.visPropOld.fillopacity=h)},setObjectStrokeColor:function(t,e,r){var i,n,o,u,h=a.Z.evaluate(e),l=a.Z.evaluate(r),c=t.rendNode;l=l>0?l:0,(t.visPropOld.strokecolor!==h||t.visPropOld.strokeopacity!==l)&&(a.Z.exists(h)&&!1!==h&&(9!==h.length?(i=h,o=l):(i=(n=e.rgba2rgbo(h))[0],o=l*n[1]),t.elementClass===s.Z.OBJECT_CLASS_TEXT?(c.filters.length>1&&(c.filters.item(1).opacity=Math.round(100*o),c.filters.item(1).enabled=!0),c.style.color=i):(!1!==i&&(this._setAttr(c,"stroked","true"),this._setAttr(c,"strokecolor",i)),u=t.rendNodeStroke,a.Z.exists(o)&&t.type!==s.Z.OBJECT_TYPE_IMAGE&&this._setAttr(u,"opacity",100*o+"%"))),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,e){var r,i=a.Z.evaluate(e);isNaN(i)||t.visPropOld.strokewidth===i||(r=t.rendNode,this.setPropertyPrim(r,"stroked","true"),a.Z.exists(i)&&(this.setPropertyPrim(r,"stroke-width",i),0===i&&a.Z.exists(t.rendNodeStroke)&&this._setAttr(r,"stroked","false")),t.visPropOld.strokewidth=i)},setShadow:function(t){var e=t.rendNodeShadow,r=a.Z.evaluate(t.visProp.shadow);e&&t.visPropOld.shadow!==r&&(r?(this._setAttr(e,"On","True"),this._setAttr(e,"Offset","3pt,3pt"),this._setAttr(e,"Opacity","60%"),this._setAttr(e,"Color","#aaaaaa")):this._setAttr(e,"On","False"),t.visPropOld.shadow=r)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});var k=n.Z.VMLRenderer,I="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");n.Z.Util=n.Z.Util||{},n.Z.Util.genUUID=function(t){var e,r,i=[],n=0;for(""!==(t=t||"")&&"-"!==t.slice(t.length-1)&&(t+="-"),r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,i[r]=I[19===r?3&e|8:e]);return t+i.join("")};var Y=n.Z.Util;n.Z.CanvasRenderer=function(t,e){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=Y.genUUID(),this.canvasNamespace=null,o.Z.isBrowser)this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',e.width,'px" height="',e.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(o.Z.isNode())try{this.canvasRoot=n.Z.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch(t){throw Error('JXG.createCanvas not available.\nInstall the npm package `canvas`\nand call:\n    import { createCanvas } from "canvas";\n    JXG.createCanvas = createCanvas;\n')}},n.Z.CanvasRenderer.prototype=new O,n.Z.extend(n.Z.CanvasRenderer.prototype,{_drawPolygon:function(t,e,r){var i,n=t.length,o=this.context;if(n>0){if(r&&(o.lineWidth=0),o.beginPath(),o.moveTo(t[0][0],t[0][1]),1===e)for(i=1;i<n;i++)o.lineTo(t[i][0],t[i][1]);else for(i=1;i<n;i+=3)o.bezierCurveTo(t[i][0],t[i][1],t[i+1][0],t[i+1][1],t[i+2][0],t[i+2][1]);r?(o.lineTo(t[0][0],t[0][1]),o.closePath(),o.fill("evenodd")):o.stroke()}},_fill:function(t){var e=this.context;e.save(),this._setColor(t,"fill")&&e.fill("evenodd"),e.restore()},_rotatePoint:function(t,e,r){return[e*Math.cos(t)-r*Math.sin(t),e*Math.sin(t)+r*Math.cos(t)]},_rotateShape:function(t,e){var r,i=[],n=t.length;if(n<=0)return t;for(r=0;r<n;r++)i.push(this._rotatePoint(e,t[r][0],t[r][1]));return i},updateGradientAngle:function(t,e){var r,i,n,o,a,u,h,l,c,d,f,p,v=1,g=Math.cos(-e),b=Math.sin(-e),y=t.getBoundingBox();return Math.abs(g)>Math.abs(b)?v/=Math.abs(g):v/=Math.abs(b),g>=0?(n=0,o=g*v):(n=-g*v,o=0),b>=0?(a=0,u=b*v):(a=-b*v,u=0),r=new m.Z(s.Z.COORDS_BY_USER,[y[0],y[1]],t.board),f=(i=new m.Z(s.Z.COORDS_BY_USER,[y[2],y[3]],t.board)).scrCoords[1]-r.scrCoords[1],p=i.scrCoords[2]-r.scrCoords[2],h=r.scrCoords[1]+f*n,c=r.scrCoords[2]+p*a,l=r.scrCoords[1]+f*o,d=r.scrCoords[2]+p*u,this.context.createLinearGradient(h,c,l,d)},updateGradientCircle:function(t,e,r,i,n,o,a){var u,h,l,c,d,f,p,v,g=t.getBoundingBox();return u=new m.Z(s.Z.COORDS_BY_USER,[g[0],g[1]],t.board),p=(h=new m.Z(s.Z.COORDS_BY_USER,[g[2],g[3]],t.board)).scrCoords[1]-u.scrCoords[1],v=u.scrCoords[2]-h.scrCoords[2],l=u.scrCoords[1]+p*e,c=h.scrCoords[2]+v*r,d=u.scrCoords[1]+p*n,f=h.scrCoords[2]+v*o,this.context.createRadialGradient(d,f,a*(p+v)*.5,l,c,i*(p+v)*.5)},updateGradient:function(t){var e,r,i=a.Z.evaluate(t.visProp.gradient);return e=a.Z.evaluate(t.visProp.fillcolor),"linear"===i?r=this.updateGradientAngle(t,a.Z.evaluate(t.visProp.gradientangle)):"radial"===i&&(r=this.updateGradientCircle(t,a.Z.evaluate(t.visProp.gradientcx),a.Z.evaluate(t.visProp.gradientcy),a.Z.evaluate(t.visProp.gradientr),a.Z.evaluate(t.visProp.gradientfx),a.Z.evaluate(t.visProp.gradientfy),a.Z.evaluate(t.visProp.gradientfr))),r.addColorStop(a.Z.evaluate(t.visProp.gradientstartoffset),e),r.addColorStop(a.Z.evaluate(t.visProp.gradientendoffset),a.Z.evaluate(t.visProp.gradientsecondcolor)),r},_setColor:function(t,e,r){var i,n,o,s,u,h,l,c,d=!0,f=t.visProp;return(e=e||"stroke",r=r||e,i=this._getHighlighted(t),"linear"===(c=a.Z.evaluate(t.visProp.gradient))||"radial"===c)?this.context[r+"Style"]=this.updateGradient(t):("none"!==(o=a.Z.evaluate(f[i+e+"color"]))&&!1!==o?(h=(h=a.Z.evaluate(f[i+e+"opacity"]))>0?h:0,9!==o.length?(u=o,l=h):(u=(s=R.Z.rgba2rgbo(o))[0],l=h*s[1]),this.context.globalAlpha=l,this.context[r+"Style"]=u):d=!1,n=parseFloat(a.Z.evaluate(f[i+"strokewidth"])),"stroke"!==e||isNaN(n)||(0===n?this.context.globalAlpha=0:this.context.lineWidth=n),"stroke"===e&&void 0!==f.linecap&&""!==f.linecap&&(this.context.lineCap=f.linecap)),d},_stroke:function(t){var e=this.context,r=a.Z.evaluate(t.visProp.dash),i=a.Z.evaluate(t.visProp.dashscale)?.5*a.Z.evaluate(t.visProp.strokewidth):1;e.save(),r>0?e.setLineDash&&e.setLineDash(this.dashArray[r-1].map(function(t){return t*i})):this.context.lineDashArray=[],this._setColor(t,"stroke")&&e.stroke(),e.restore()},_translateShape:function(t,e,r){var i,n=[],o=t.length;if(o<=0)return t;for(i=0;i<o;i++)n.push([t[i][0]+e,t[i][1]+r]);return n},drawPoint:function(t){var e=a.Z.evaluate(t.visProp.face),r=a.Z.evaluate(t.visProp.size),i=t.coords.scrCoords,n=r*Math.sqrt(3)*.5,o=.5*r,s=parseFloat(a.Z.evaluate(t.visProp.strokewidth))/2,u=this.context;if(t.visPropCalc.visible)switch(e){case"cross":case"x":u.beginPath(),u.moveTo(i[1]-r,i[2]-r),u.lineTo(i[1]+r,i[2]+r),u.moveTo(i[1]+r,i[2]-r),u.lineTo(i[1]-r,i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"circle":case"o":u.beginPath(),u.arc(i[1],i[2],r+1+s,0,2*Math.PI,!1),u.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(r<=0)break;u.save(),this._setColor(t,"stroke","fill")&&u.fillRect(i[1]-r-s,i[2]-r-s,2*r+3*s,2*r+3*s),u.restore(),u.save(),this._setColor(t,"fill"),u.fillRect(i[1]-r+s,i[2]-r+s,2*r-s,2*r-s),u.restore();break;case"plus":case"+":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+r,i[2]),u.moveTo(i[1],i[2]-r),u.lineTo(i[1],i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"divide":case"|":u.beginPath(),u.moveTo(i[1],i[2]-r),u.lineTo(i[1],i[2]+r),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"minus":case"-":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+r,i[2]),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"diamond2":case"<<>>":r*=1.41;case"diamond":case"<>":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1],i[2]+r),u.lineTo(i[1]+r,i[2]),u.lineTo(i[1],i[2]-r),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"A":case"a":case"^":u.beginPath(),u.moveTo(i[1],i[2]-r),u.lineTo(i[1]-n,i[2]+o),u.lineTo(i[1]+n,i[2]+o),u.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":u.beginPath(),u.moveTo(i[1],i[2]+r),u.lineTo(i[1]-n,i[2]-o),u.lineTo(i[1]+n,i[2]-o),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":u.beginPath(),u.moveTo(i[1]-r,i[2]),u.lineTo(i[1]+o,i[2]-n),u.lineTo(i[1]+o,i[2]+n),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleright":case">":u.beginPath(),u.moveTo(i[1]+r,i[2]),u.lineTo(i[1]-o,i[2]-n),u.lineTo(i[1]-o,i[2]+n),u.closePath(),this._fill(t),this._stroke(t)}},updatePoint:function(t){this.drawPoint(t)},drawArrows:function(t,e,r,i,n){var o,u,h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_,E,w,N,S=this.context,A=6,P=1,D=1,M=1,O=n.evFirst,T=n.evLast;if("none"!==a.Z.evaluate(t.visProp.strokecolor)&&(O||T)){if(t.elementClass===s.Z.OBJECT_CLASS_LINE)o=e.scrCoords[1],u=e.scrCoords[2],h=r.scrCoords[1],w=N=Math.atan2((l=r.scrCoords[2])-u,h-o);else{if(o=t.points[0].scrCoords[1],u=t.points[0].scrCoords[2],(E=t.points.length-1)<1)return;h=t.points[t.points.length-1].scrCoords[1],l=t.points[t.points.length-1].scrCoords[2],C=t.points[1].scrCoords[1]-t.points[0].scrCoords[1],Z=t.points[1].scrCoords[2]-t.points[0].scrCoords[2],x=t.points[E].scrCoords[1]-t.points[E-1].scrCoords[1],_=t.points[E].scrCoords[2]-t.points[E-1].scrCoords[2],O&&(w=Math.atan2(Z,C)),T&&(N=Math.atan2(_,x))}if(c=a.Z.evaluate(t.visProp[i+"strokewidth"]),O){if(d=c*(A=n.sizeFirst),m=P=n.typeFirst,2===P)p=[[d,-(.5*d)],[0,0],[d,.5*d],[.5*d,0]];else if(3===P)p=[[d/3,-(.5*d)],[0,-(.5*d)],[0,.5*d],[d/3,.5*d]];else if(4===P)for(d/=10,D=3,y=(p=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,b=0;b<y;b++)p[b][0]*=-d,p[b][1]*=d,p[b][0]+=10*d,p[b][1]-=3.31*d;else if(5===P)for(d/=10,D=3,y=(p=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,b=0;b<y;b++)p[b][0]*=-d,p[b][1]*=d,p[b][0]+=10*d,p[b][1]-=3.28*d;else if(6===P)for(d/=10,D=3,y=(p=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,b=0;b<y;b++)p[b][0]*=-d,p[b][1]*=d,p[b][0]+=10*d,p[b][1]-=2.84*d;else if(7===P)for(b=0,d=c,D=3,y=(p=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length;b<y;b++)p[b][0]*=-d,p[b][1]*=d,p[b][0]+=10*d,p[b][1]-=5.2*d;else p=[[d,-(.5*d)],[0,0],[d,.5*d]]}if(T){if(d=c*(A=n.sizeLast),v=P=n.typeLast,2===P)f=[[-d,-(.5*d)],[0,0],[-d,.5*d],[-(.5*d),0]];else if(3===P)f=[[-d/3,-(.5*d)],[0,-(.5*d)],[0,.5*d],[-d/3,.5*d]];else if(4===P)for(d/=10,M=3,y=(f=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,b=0;b<y;b++)f[b][0]*=d,f[b][1]*=d,f[b][0]-=10*d,f[b][1]-=3.31*d;else if(5===P)for(d/=10,M=3,y=(f=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,b=0;b<y;b++)f[b][0]*=d,f[b][1]*=d,f[b][0]-=10*d,f[b][1]-=3.28*d;else if(6===P)for(d/=10,M=3,y=(f=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,b=0;b<y;b++)f[b][0]*=d,f[b][1]*=d,f[b][0]-=10*d,f[b][1]-=2.84*d;else if(7===P)for(b=0,d=c,M=3,y=(f=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length;b<y;b++)f[b][0]*=d,f[b][1]*=d,f[b][0]-=10*d,f[b][1]-=5.2*d;else f=[[-d,-(.5*d)],[0,0],[-d,.5*d]]}S.save(),this._setColor(t,"stroke","fill")&&(this._setColor(t,"stroke"),O&&(g=7!==m,this._drawPolygon(this._translateShape(this._rotateShape(p,w),o,u),D,g)),T&&(g=7!==v,this._drawPolygon(this._translateShape(this._rotateShape(f,N),h,l),M,g))),S.restore()}},drawLine:function(t){var e,r,i,n,o,u=new m.Z(s.Z.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),h=new m.Z(s.Z.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),l=null;t.visPropCalc.visible&&(i=this._getHighlighted(t),n=a.Z.evaluate(t.visProp[i+"strokewidth"]),((o=this.getArrowHeadData(t,n,i)).evFirst||o.evLast)&&(l=-4),c.Z.calcStraight(t,u,h,l),this.handleTouchpoints(t,u,h,o),e=new m.Z(s.Z.COORDS_BY_USER,u.usrCoords,t.board),r=new m.Z(s.Z.COORDS_BY_USER,h.usrCoords,t.board),this.getPositionArrowHead(t,u,h,o),this.context.beginPath(),this.context.moveTo(u.scrCoords[1],u.scrCoords[2]),this.context.lineTo(h.scrCoords[1],h.scrCoords[2]),this._stroke(t),(o.evFirst||o.evLast)&&this.drawArrows(t,e,r,i,o))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var e,r,i,n,o,s,a=t.ticks.length,u=this.context;for(u.beginPath(),e=0;e<a;e++)for(i=(r=t.ticks[e])[0],n=r[1],o=i.length,u.moveTo(i[0],n[0]),s=1;s<o;++s)u.lineTo(i[s],n[s]);u.lineCap="round",this._stroke(t)},drawCurve:function(t){var e,r,i;a.Z.evaluate(t.visProp.handdrawing)?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&(e=this._getHighlighted(t),r=a.Z.evaluate(t.visProp[e+"strokewidth"]),((i=this.getArrowHeadData(t,r,e)).evFirst||i.evLast)&&this.drawArrows(t,null,null,e,i))},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var e=t.center.coords.scrCoords[1],r=t.center.coords.scrCoords[2],i=t.board.unitX,n=t.board.unitY,o=2*t.Radius(),s=2*t.Radius(),a=o*i,u=s*n,h=e-a/2,l=r-u/2,c=a/2*.5522848,d=u/2*.5522848,f=h+a,p=l+u,m=h+a/2,v=l+u/2,g=this.context;o>0&&s>0&&!isNaN(e+r)&&(g.beginPath(),g.moveTo(h,v),g.bezierCurveTo(h,v-d,m-c,l,m,l),g.bezierCurveTo(m+c,l,f,v-d,f,v),g.bezierCurveTo(f,v+d,m+c,p,m,p),g.bezierCurveTo(m-c,p,h,v+d,h,v),g.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,e){var r=this.context;r.save(),r.font=e+"px Arial",r.fillStyle="#aaa",r.lineWidth=.5,r.fillText(t,10,2+e),r.restore()},drawInternalText:function(t){var e=a.Z.evaluate(t.visProp.fontsize),r=a.Z.evaluate(t.visProp.fontunit),i=t.getAnchorX(),n=t.getAnchorY(),o=this.context;return o.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(o.font=(e>0?e:0)+r+" Arial",this.transformImage(t,t.transformations),"left"===i?o.textAlign="left":"right"===i?o.textAlign="right":"middle"===i&&(o.textAlign="center"),"bottom"===n?o.textBaseline="bottom":"top"===n?o.textBaseline="top":"middle"===n&&(o.textBaseline="middle"),o.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),o.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,e,r){var i,n,o,u,h=a.Z.evaluate(e),l=a.Z.evaluate(r);l=l>0?l:0,(t.visPropOld.strokecolor!==h||t.visPropOld.strokeopacity!==l)&&(a.Z.exists(h)&&!1!==h&&(9!==h.length?(i=h,o=l):(i=(n=R.Z.rgba2rgbo(h))[0],o=l*n[1]),u=t.rendNode,t.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(t.visProp.display)&&(u.style.color=i,u.style.opacity=o)),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=l)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var e=this.context,r=a.Z.evaluate(t.visProp.fillopacity),i=a.Z.bind(function(){t.imgIsLoaded=!0,t.size[0]<=0||t.size[1]<=0||(e.save(),e.globalAlpha=r,this.transformImage(t,t.transformations),e.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),e.restore())},this);this.updateImageURL(t)?t.rendNode.onload=i:t.imgIsLoaded&&i()},transformImage:function(t,e){var r,i,n,o,h,l=e.length,c=this.context;if(l>0){if(r=this.joinTransforms(t,e),t.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===t.visProp.display){if(-1===(i=" matrix("+[r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0]].join(",")+") ").indexOf("NaN")){switch((h=t.rendNode).style.transform=i,n=-t.coords.scrCoords[1],o=-t.coords.scrCoords[2],a.Z.evaluate(t.visProp.anchorx)){case"right":n+=t.size[0];break;case"middle":n+=.5*t.size[0]}switch(a.Z.evaluate(t.visProp.anchory)){case"bottom":o+=t.size[1];break;case"middle":o+=.5*t.size[1]}h.style["transform-origin"]=n+"px "+o+"px"}}else Math.abs(p.Z.det(r))>=u.Z.eps&&c.transform(r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0])}},updateImageURL:function(t){var e;return e=a.Z.evaluate(t.url),t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.src=e,t._src=e,!0)},remove:function(t){a.Z.exists(t)&&a.Z.exists(t.parentNode)&&t.parentNode.removeChild(t)},updatePathStringPrim:function(t){var e,r,i,n,o,s="M",a=this.context;if(!(t.numberPoints<=0)){if(o=Math.min(t.points.length,t.numberPoints),a.beginPath(),1===t.bezierDegree)for(e=0;e<o;e++)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?s="M":(r[1]>5e3?r[1]=5e3:r[1]<-5e3&&(r[1]=-5e3),r[2]>5e3?r[2]=5e3:r[2]<-5e3&&(r[2]=-5e3),"M"===s?a.moveTo(r[1],r[2]):a.lineTo(r[1],r[2]),s="L");else if(3===t.bezierDegree)for(e=0;e<o;)isNaN((r=t.points[e].scrCoords)[1])||isNaN(r[2])?s="M":("M"===s?a.moveTo(r[1],r[2]):(e+=1,i=t.points[e].scrCoords,e+=1,n=t.points[e].scrCoords,a.bezierCurveTo(r[1],r[2],i[1],i[2],n[1],n[2])),s="C"),e+=1;a.lineCap="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var e,r,i,n,o,s,u,h="M",l=a.Z.evaluate(t.visProp.strokewidth),c="plot"!==a.Z.evaluate(t.visProp.curvetype),d=this.context;if(!(t.numberPoints<=0)){for(c&&t.board.options.curve.RDPsmoothing&&(t.points=p.Z.RamerDouglasPeucker(t.points,.5)),u=Math.min(t.points.length,t.numberPoints),d.beginPath(),r=1;r<3;r++)for(e=0,h="M";e<u;e++)isNaN((n=t.points[e].scrCoords)[1])||isNaN(n[2])?h="M":(n[1]>5e3?n[1]=5e3:n[1]<-5e3&&(n[1]=-5e3),n[2]>5e3?n[2]=5e3:n[2]<-5e3&&(n[2]=-5e3),"M"===h?d.moveTo(n[1],n[2]):(i=2*r,d.bezierCurveTo(o+(n[1]-o)*.333+l*(i*Math.random()-r),s+(n[2]-s)*.333+l*(i*Math.random()-r),o+(n[1]-o)*.666+l*(i*Math.random()-r),s+(n[2]-s)*.666+l*(i*Math.random()-r),n[1],n[2])),h="C",o=n[1],s=n[2]);d.lineCap="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,e){var r,i,n,o=e.vertices.length,s=this.context,a=!0;if(!(o<=0)&&e.visPropCalc.visible){for("polygonalchain"===e.elType&&o++,s.beginPath(),i=0;!e.vertices[i].isReal&&i<o-1;)i++,a=!1;for(r=e.vertices[i].coords.scrCoords,s.moveTo(r[1],r[2]),n=i;n<o-1;n++)e.vertices[n].isReal||(a=!1),r=e.vertices[n].coords.scrCoords,s.lineTo(r[1],r[2]);s.closePath(),a&&this._fill(e)}},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,e?t.rendNode.style.visibility="inherit":t.rendNode.style.visibility="hidden")},show:function(t){n.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),a.Z.exists(t.rendNode)&&(t.rendNode.style.visibility="inherit")},hide:function(t){n.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),a.Z.exists(t.rendNode)&&(t.rendNode.style.visibility="hidden")},setGradient:function(t){},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(t.visProp.display)?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===s.Z.OBJECT_CLASS_TEXT&&"html"===a.Z.evaluate(t.visProp.display)?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(t){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),t&&t.attr.showcopyright&&this.displayCopyright(n.Z.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,e){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(e)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(e)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(e)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});var U=n.Z.CanvasRenderer;n.Z.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},n.Z.extend(n.Z.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,e){},updateInternalTextStyle:function(t,e,r){},drawImage:function(t){},updateImage:function(t){},transformImage:function(t,e){},updateImageURL:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,e,r,i,n){},updateLinePrim:function(t,e,r,i,n,o){},updatePathPrim:function(t,e,r){},updatePathStringPoint:function(t,e,r){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,r,i,n){},setPropertyPrim:function(t,e,r){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,r){},setObjectStrokeColor:function(t,e,r){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t){},getElementById:function(t){return null},resize:function(t,e){},removeToInsertLater:function(){return function(){}}}),n.Z.NoRenderer.prototype=new O;var j=n.Z.NoRenderer;n.Z.JSXGraph={rendererType:(M.Z.board.renderer="no",o.Z.supportsVML()&&(M.Z.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft+document.body.scrollTop),t}),o.Z.supportsCanvas()&&(M.Z.board.renderer="canvas"),o.Z.supportsSVG()&&(M.Z.board.renderer="svg"),o.Z.isNode()&&o.Z.supportsCanvas()&&(M.Z.board.renderer="canvas"),(o.Z.isNode()||"no"===M.Z.renderer)&&(M.Z.text.display="internal",M.Z.infobox.display="internal"),M.Z.board.renderer),initRenderer:function(t,e,r,i){var n;if(a.Z.exists(r)&&!1!==r||"object"!=typeof document||(r=document),"object"==typeof r&&null!==t)for(n=a.Z.isString(t)?r.getElementById(t):t;n.firstChild;)n.removeChild(n.firstChild);else n=t;return(void 0===i||"auto"===i)&&(i=this.rendererType),"svg"===i?new L(n,e):"vml"===i?new k(n):"canvas"===i?new U(n,e):new j},_setAttributes:function(t,e){var r,i,n=a.Z.copyAttributes(t,e,"board"),o=["drag","fullscreen","intl","keyboard","logging","navbar","pan","resize","screenshot","selection","zoom"],s=o.length;for(r=0;r<s;r++)n[i=o[r]]=a.Z.copyAttributes(n,e,"board",i);return n.movetarget=t.moveTarget||t.movetarget||e.board.moveTarget,n},_fillBoard:function(t,e,r){t.initInfobox(e.infobox),t.maxboundingbox=e.maxboundingbox,t.resizeContainer(r.width,r.height,!0,!0),t._createSelectionPolygon(e),t.renderer.drawNavigationBar(t,e.navbar),n.Z.boards[t.id]=t},_setARIA:function(t,e){var r,i,n,s,u,h,l=e.document;if("object"!=typeof l){if(!o.Z.isBrowser)return;l=document}r=(i=a.Z.isString(t)?l.getElementById(t):t).ownerDocument,s=i.parentNode,u=t+"_ARIAlabel",h=t+"_ARIAdescription",(n=r.createElement("div")).innerHTML=e.title,n.setAttribute("id",u),n.style.display="none",s.insertBefore(n,i),(n=r.createElement("div")).innerHTML=e.description,n.setAttribute("id",h),n.style.display="none",s.insertBefore(n,i),i.setAttribute("aria-labelledby",u),i.setAttribute("aria-describedby",h)},_removeARIANodes:function(t){var e,r,i;"object"==typeof(i=t.document||document)&&(r=t.containerObj.getAttribute("aria-labelledby"),(e=i.getElementById(r))&&e.parentNode&&e.parentNode.removeChild(e),r=t.containerObj.getAttribute("aria-describedby"),(e=i.getElementById(r))&&e.parentNode&&e.parentNode.removeChild(e))},initBoard:function(t,e){var r,i,s,h,l,c,d,f,p,m,v,g,b,y,C,Z=0,x=0,_={};return"default"!==(e=e||{}).theme&&a.Z.exists(n.Z.themes[e.theme])&&(_=n.Z.themes[e.theme]),y=a.Z.deepCopy(M.Z,_,!0),m=this._setAttributes(e,y),f=o.Z.getDimensions(t,m.document),m.unitx||m.unity?(r=a.Z.def(m.originx,150),i=a.Z.def(m.originy,150),s=a.Z.def(m.unitx,50),h=a.Z.def(m.unity,50)):((p=m.boundingbox)[0]<m.maxboundingbox[0]&&(p[0]=m.maxboundingbox[0]),p[1]>m.maxboundingbox[1]&&(p[1]=m.maxboundingbox[1]),p[2]>m.maxboundingbox[2]&&(p[2]=m.maxboundingbox[2]),p[3]<m.maxboundingbox[3]&&(p[3]=m.maxboundingbox[3]),l=Math.max(parseInt(f.width,10),u.Z.eps),c=Math.max(parseInt(f.height,10),u.Z.eps),a.Z.exists(p)&&m.keepaspectratio?Math.abs(s=l/(p[2]-p[0]))<Math.abs(h=c/(p[1]-p[3]))?x=(c/(h=Math.abs(s)*h/Math.abs(h))-(p[1]-p[3]))*.5:Z=(l/(s=Math.abs(h)*s/Math.abs(s))-(p[2]-p[0]))*.5:(s=l/(p[2]-p[0]),h=c/(p[1]-p[3])),r=-s*(p[0]-Z),i=h*(p[1]+x)),d=this.initRenderer(t,f,m.document,m.renderer),this._setARIA(t,m),(C=new F.Z(t,d,m.id,[r,i],m.zoomx,m.zoomy,s,h,f.width,f.height,m)).keepaspectratio=m.keepaspectratio,this._fillBoard(C,m,f),C.suspendUpdate(),(m=C.attr).axis&&(v="object"==typeof m.axis?m.axis:{},g=a.Z.deepCopy(y.board.defaultaxes.x,v),b=a.Z.deepCopy(y.board.defaultaxes.y,v),m.defaultaxes.x&&(g=a.Z.deepCopy(g,m.defaultaxes.x)),m.defaultaxes.y&&(b=a.Z.deepCopy(b,m.defaultaxes.y)),C.defaultAxes={},C.defaultAxes.x=C.create("axis",[[0,0],[1,0]],g),C.defaultAxes.y=C.create("axis",[[0,0],[0,1]],b)),m.grid&&C.create("grid",[],"object"==typeof m.grid?m.grid:{}),C.unsuspendUpdate(),C},loadBoardFromFile:function(t,e,r,i,n){var s,a,u,h,l;return i=i||{},s=this._setAttributes(i),h=o.Z.getDimensions(t,s.document),a=this.initRenderer(t,h,s.document,s.renderer),this._setARIA(t,s),u=new F.Z(t,a,"",[150,150],1,1,50,50,h.width,h.height,s),this._fillBoard(u,s,h),l=s.encoding||"iso-8859-1",T.parseFileContent(e,u,r,!0,l,n),u},loadBoardFromString:function(t,e,r,i,n){var s,a,u,h;return i=i||{},s=this._setAttributes(i),h=o.Z.getDimensions(t,s.document),a=this.initRenderer(t,h,s.document,s.renderer),this._setARIA(t,s),u=new F.Z(t,a,"",[150,150],1,1,50,50,h.width,h.height,s),this._fillBoard(u,s,h),T.parseString(e,u,r,!0,n),u},freeBoard:function(t){var e;for(e in"string"==typeof t&&(t=n.Z.boards[t]),this._removeARIANodes(t),t.removeEventHandlers(),t.suspendUpdate(),t.objects)t.objects.hasOwnProperty(e)&&t.objects[e].remove();for(;t.containerObj.firstChild;)t.containerObj.removeChild(t.containerObj.firstChild);for(e in t.objects)t.objects.hasOwnProperty(e)&&delete t.objects[e];delete t.renderer,t.jc.creator.clearCache(),delete t.jc,delete n.Z.boards[t.id]},registerElement:function(t,e){n.Z.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),n.Z.registerElement(t,e)}},o.Z.isBrowser&&"object"==typeof document&&o.Z.addEvent(window,"load",function(){var t,e,r,i,o,s,u,h,l,c,d,f,p,m,v,g,b,y,C=!1,Z=document.getElementsByTagName("script"),x=function(t,e,r){var i=n.Z.JSXGraph.initBoard(o,{boundingbox:r,keepaspectratio:!0,grid:v,axis:m,showReload:!0});if(e.toLowerCase().indexOf("script")>-1)i.construct(t);else try{i.jc.parse(t)}catch(t){n.Z.debug(t)}return i},_=function(t,e,r,i){return function(){var o;n.Z.JSXGraph.freeBoard(t),(o=x(e,r,i)).reload=_(o,e,r,i)}};for(e=0;e<Z.length;e++)if(t=Z[e].getAttribute("type",!1),a.Z.exists(t)&&("text/jessiescript"===t.toLowerCase()||"jessiescript"===t.toLowerCase()||"text/jessiecode"===t.toLowerCase()||"jessiecode"===t.toLowerCase())){if(f=Z[e].getAttribute("class",!1)||"",h=Z[e].getAttribute("width",!1)||"",l=Z[e].getAttribute("height",!1)||"",c=Z[e].getAttribute("maxwidth",!1)||"100%",d=Z[e].getAttribute("aspectratio",!1)||"1/1",p=Z[e].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",o=Z[e].getAttribute("container",!1),b=Z[e].getAttribute("src",!1),4!==(p=p.split(",")).length)p=[-5,5,5,-5];else for(r=0;r<p.length;r++)p[r]=parseFloat(p[r]);if(m=a.Z.str2Bool(Z[e].getAttribute("axis",!1)||"false"),v=a.Z.str2Bool(Z[e].getAttribute("grid",!1)||"false"),a.Z.exists(o))i=document.getElementById(o);else{o="jessiescript_autgen_jxg_"+e,(i=document.createElement("div")).setAttribute("id",o),u=(""!==h?"width:"+h+";":"")+(""!==l?"height:"+l+";":"")+(""!==c?"max-width:"+c+";":"")+(""!==d?"aspect-ratio:"+d+";":""),i.setAttribute("style",u),i.setAttribute("class","jxgbox "+f);try{document.body.insertBefore(i,Z[e])}catch(t){"object"==typeof jQuery&&jQuery(i).insertBefore(Z[e])}}g="",a.Z.exists(b)?(C=!0,(y=new XMLHttpRequest).open("GET",b),y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("load",function(){if(this.status<400)(s=x(g=this.responseText+"\n"+g,t,p)).reload=_(s,g,t,p);else throw Error("\nJSXGraph: failed to load file",b,":",this.responseText)}),y.addEventListener("error",function(t){throw Error("\nJSXGraph: failed to load file",b,":",t)}),y.send()):C=!1,document.getElementById(o)?(g=(g=Z[e].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),Z[e].innerHTML=g,C||((s=x(g,t,p)).reload=_(s,g,t,p))):n.Z.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),n.Z.JSXGraph;var z=r(3154),X=r(7158);n.Z.Point=function(t,e,r){this.constructor(t,r,s.Z.OBJECT_TYPE_POINT,s.Z.OBJECT_CLASS_POINT),this.element=this.board.select(r.anchor),this.coordsConstructor(e),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},n.Z.Point.prototype=new z.Z,a.Z.copyPrototypeMethods(n.Z.Point,X.Z,"coordsConstructor"),n.Z.extend(n.Z.Point.prototype,{hasPoint:function(t,e){var r,i,n,o=this.coords.scrCoords,s=a.Z.evaluate(this.visProp.sizeunit);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(n=this.board._inputDevice,i=a.Z.evaluate(this.visProp.precision[n])):i=this.board.options.precision.hasPoint,r=parseFloat(a.Z.evaluate(this.visProp.size)),"user"===s&&(r*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(r+=.5*parseFloat(a.Z.evaluate(this.visProp.strokewidth)))<i&&(r=i),Math.abs(o[1]-t)<r+2&&Math.abs(o[2]-e)<r+2},update:function(t){return this.needsUpdate&&(this.updateCoords(t),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0)),this},updateTransform:function(t){var e,r;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(e=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(s.Z.COORDS_BY_USER,e)):e=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(s.Z.COORDS_BY_USER,e),r=1;r<this.transformations.length;r++)this.coords.setCoordinates(s.Z.COORDS_BY_USER,this.transformations[r].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,e,r,i){var n;t=this.board.select(t),e=this.board.select(e),n=c.Z.intersectionFunction(this.board,t,e,r,i,this.visProp.alwaysintersect),this.addConstraint([n]);try{t.addChild(this),e.addChild(this)}catch(r){throw Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof e+"'.")}this.type=s.Z.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,e.id,r,i],this.generatePolynomial=function(){var r=t.generatePolynomial(this),i=e.generatePolynomial(this);return 0===r.length||0===i.length?[]:[r[0],i[0]]},this.prepareUpdate().update()},setStyle:function(t){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][t],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(t){return n.Z.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),M.Z.normalizePointFace(t)},face:function(t){n.Z.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:t})},size:function(t){n.Z.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:t})},isOn:function(t,e){var r,i;if(e=e||u.Z.eps,a.Z.isPoint(t))return this.Dist(t)<e;if(t.elementClass===s.Z.OBJECT_CLASS_LINE){if("segment"!==t.elType||a.Z.evaluate(this.visProp.alwaysintersect))return c.Z.distPointLine(this.coords.usrCoords,t.stdform)<e;if((r=n.Z.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords))[1]>=0&&r[1]<=1&&c.Z.distPointLine(this.coords.usrCoords,t.stdform)<e)return!0}else if(t.elementClass===s.Z.OBJECT_CLASS_CIRCLE)return a.Z.evaluate(t.visProp.hasinnerpoints)?this.Dist(t.center)<t.Radius()+e:Math.abs(this.Dist(t.center)-t.Radius())<e;else if(t.elementClass===s.Z.OBJECT_CLASS_CURVE)return i=c.Z.projectPointToCurve(this,t,this.board)[0],c.Z.distance(this.coords.usrCoords,i.usrCoords,3)<e;else if(t.type===s.Z.OBJECT_TYPE_POLYGON)return!!(a.Z.evaluate(t.visProp.hasinnerpoints)&&t.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],n.Z.COORDS_BY_USER))||(r=c.Z.projectCoordsToPolygon(this.coords.usrCoords,t),c.Z.distance(this.coords.usrCoords,r,3)<e);else if(t.type===s.Z.OBJECT_TYPE_TURTLE)return i=c.Z.projectPointToTurtle(this,t,this.board),c.Z.distance(this.coords.usrCoords,i.usrCoords,3)<e;return!1},cloneToBackground:function(){var t={};return t.id=this.id+"T"+this.numTraces,this.numTraces+=1,t.coords=this.coords,t.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.elementClass=s.Z.OBJECT_CLASS_POINT,t.board=this.board,a.Z.clearVisPropOld(t),t.visPropCalc={visible:a.Z.evaluate(t.visProp.visible)},this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}}),n.Z.createPoint=function(t,e,r){var i,o;if(o=a.Z.copyAttributes(r,t.options,"point"),!(i=X.Z.create(n.Z.Point,t,e,o)))throw Error("JSXGraph: Can't create point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return i},n.Z.createGlider=function(t,e,r){var i,n,o=a.Z.copyAttributes(r,t.options,"glider");return n=1===e.length?[0,0]:e.slice(0,2),(i=t.create("point",n,o)).makeGlider(e[e.length-1]),i},n.Z.createIntersectionPoint=function(t,e,r){var i,n,o,u,h,l,d=a.Z.copyAttributes(r,t.options,"intersection");e.push(0,0),n=t.select(e[0]),o=t.select(e[1]),h=e[2]||0,l=e[3]||0,i=t.create("point",[0,0,0],d),u=c.Z.intersectionFunction(t,n,o,h,l,i.visProp.alwaysintersect),i.addConstraint([u]);try{n.addChild(i),o.addChild(i)}catch(t){throw Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.")}return i.type=s.Z.OBJECT_TYPE_INTERSECTION,i.elType="intersection",i.setParents([n.id,o.id]),i.intersectionNumbers=[h,l],i.getParents=function(){return this.parents.concat(this.intersectionNumbers)},i.generatePolynomial=function(){var t=n.generatePolynomial(i),e=o.generatePolynomial(i);return 0===t.length||0===e.length?[]:[t[0],e[0]]},i},n.Z.createOtherIntersectionPoint=function(t,e,r){var i,n,o,h;if(3!==e.length||!a.Z.isPoint(e[2])||e[0].elementClass!==s.Z.OBJECT_CLASS_LINE&&e[0].elementClass!==s.Z.OBJECT_CLASS_CIRCLE||e[1].elementClass!==s.Z.OBJECT_CLASS_LINE&&e[1].elementClass!==s.Z.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof e[0]+"',  '"+typeof e[1]+"'and  '"+typeof e[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return n=t.select(e[0]),o=t.select(e[1]),h=t.select(e[2]),(i=t.create("point",[function(){var t=c.Z.meet(n.stdform,o.stdform,0,n.board);return Math.abs(h.X()-t.usrCoords[1])>u.Z.eps||Math.abs(h.Y()-t.usrCoords[2])>u.Z.eps||Math.abs(h.Z()-t.usrCoords[0])>u.Z.eps?t:c.Z.meet(n.stdform,o.stdform,1,n.board)}],r)).type=s.Z.OBJECT_TYPE_INTERSECTION,i.elType="otherintersection",i.setParents([n.id,o.id,h]),n.addChild(i),o.addChild(i),i.generatePolynomial=function(){var t=n.generatePolynomial(i),e=o.generatePolynomial(i);return 0===t.length||0===e.length?[]:[t[0],e[0]]},i},n.Z.createPolePoint=function(t,e,r){var i,o,a,u,h,l,c;if(e.length>1&&(u=e[0].type===s.Z.OBJECT_TYPE_CONIC||e[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE,h=e[1].type===s.Z.OBJECT_TYPE_CONIC||e[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE,l=e[0].elementClass===s.Z.OBJECT_CLASS_LINE,c=e[1].elementClass===s.Z.OBJECT_CLASS_LINE),2!==e.length||!(u&&c||l&&h))throw Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return c?(o=t.select(e[0]),a=t.select(e[1])):(o=t.select(e[1]),a=t.select(e[0])),(i=t.create("point",[function(){var t=o.quadraticform,e=a.stdform.slice(0,3);return[n.Z.Math.Numerics.det([e,t[1],t[2]]),n.Z.Math.Numerics.det([t[0],e,t[2]]),n.Z.Math.Numerics.det([t[0],t[1],e])]}],r)).elType="polepoint",i.setParents([o.id,a.id]),o.addChild(i),a.addChild(i),i},n.Z.registerElement("point",n.Z.createPoint),n.Z.registerElement("glider",n.Z.createGlider),n.Z.registerElement("intersection",n.Z.createIntersectionPoint),n.Z.registerElement("otherintersection",n.Z.createOtherIntersectionPoint),n.Z.registerElement("polepoint",n.Z.createPolePoint);var J=n.Z.Point;n.Z.Line=function(t,e,r,i){this.constructor(t,i,s.Z.OBJECT_TYPE_LINE,s.Z.OBJECT_CLASS_LINE),this.point1=this.board.select(e),this.point2=this.board.select(r),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=n.Z.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",Slope:"Slope",L:"L",length:"L",setFixedLength:"setFixedLength"})},n.Z.Line.prototype=new z.Z,n.Z.extend(n.Z.Line.prototype,{hasPoint:function(t,e){var r,i,n,o,h,l,d,f,p,v=[],g=[1,t,e],b=a.Z.evaluate(this.visProp.strokewidth);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(p=this.board._inputDevice,f=a.Z.evaluate(this.visProp.precision[p])):f=this.board.options.precision.hasPoint,f+=.5*b,v[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,v[1]=this.stdform[1]/this.board.unitX,v[2]=-(this.stdform[2]/this.board.unitY),!isNaN(r=c.Z.distPointLine(g,v))&&!(r>f)&&(!!(a.Z.evaluate(this.visProp.straightfirst)&&a.Z.evaluate(this.visProp.straightlast))||(n=this.point1.coords,o=this.point2.coords,i=[0,v[1],v[2]],i=u.Z.crossProduct(i,g),i=u.Z.crossProduct(i,v),i[1]/=i[0],i[2]/=i[0],i[0]=1,i=new m.Z(s.Z.COORDS_BY_SCREEN,i.slice(1),this.board).usrCoords,h=n.distance(s.Z.COORDS_BY_USER,o),n=n.usrCoords.slice(0),o=o.usrCoords.slice(0),h<u.Z.eps?l=0:(h===Number.POSITIVE_INFINITY&&(h=1/u.Z.eps,Math.abs(o[0])<u.Z.eps?(h/=c.Z.distance([0,0,0],o),o=[1,n[1]+o[1]*h,n[2]+o[2]*h]):(h/=c.Z.distance([0,0,0],n),n=[1,o[1]+n[1]*h,o[2]+n[2]*h])),Math.abs(h=o[d=1]-n[d])<u.Z.eps&&(h=o[d=2]-n[d]),l=(i[d]-n[d])/h),(!!a.Z.evaluate(this.visProp.straightfirst)||!(l<0))&&!(!a.Z.evaluate(this.visProp.straightlast)&&l>1)))},update:function(){var t;return this.needsUpdate&&(this.constrained&&(a.Z.isFunction(this.funps)?(t=this.funps())&&t.length&&2===t.length&&(this.point1=t[0],this.point2=t[1]):(a.Z.isFunction(this.funp1)&&(t=this.funp1(),a.Z.isPoint(t)?this.point1=t:t&&t.length&&2===t.length&&this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,t)),a.Z.isFunction(this.funp2)&&(t=this.funp2(),a.Z.isPoint(t)?this.point2=t:t&&t.length&&2===t.length&&this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0)),this},updateSegmentFixedLength:function(){var t,e,r,i,n,o,h,l;return this.hasFixedLength&&(t=this.point1.Dist(this.point2),e=Math.abs(this.fixedLength()),r=this.fixedLengthOldCoords[0].distance(s.Z.COORDS_BY_USER,this.point1.coords),i=this.fixedLengthOldCoords[1].distance(s.Z.COORDS_BY_USER,this.point2.coords),(r>u.Z.eps||i>u.Z.eps||t!==e)&&(n=this.point1.isDraggable&&this.point1.type!==s.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point1.visProp.fixed),o=this.point2.isDraggable&&this.point2.type!==s.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point2.visProp.fixed),t>u.Z.eps?r>i&&o||r<=i&&o&&!n?(this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*e/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*e/t]),this.point2.fullUpdate()):(r<=i&&n||r>i&&n&&!o)&&(this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*e/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*e/t]),this.point1.fullUpdate()):(h=Math.random()-.5,l=Math.random()-.5,t=u.Z.hypot(h,l),o?(this.point2.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point1.X()+h*e/t,this.point1.Y()+l*e/t]),this.point2.fullUpdate()):n&&(this.point1.setPositionDirectly(s.Z.COORDS_BY_USER,[this.point2.X()+h*e/t,this.point2.Y()+l*e/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(s.Z.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(s.Z.COORDS_BY_USER,this.point2.coords.usrCoords))),this},updateStdform:function(){var t=u.Z.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&u.Z.innerProduct(this.stdform,this.stdform,3)>=u.Z.eps*u.Z.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},generatePolynomial:function(t){var e=this.point1.symbolic.x,r=this.point1.symbolic.y,i=this.point2.symbolic.x,n=this.point2.symbolic.y,o=t.symbolic.x,s=t.symbolic.y;return[["(",r,")*(",o,")-(",r,")*(",i,")+(",s,")*(",i,")-(",e,")*(",s,")+(",e,")*(",n,")-(",o,")*(",n,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=u.Z.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=u.Z.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(t,e){return this.visProp.straightfirst=t,this.visProp.straightlast=e,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new m.Z(s.Z.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){a.Z.exists(this.label)&&(this.label.relativeCoords=new m.Z(s.Z.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,e,r=0,i=new m.Z(s.Z.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),n=new m.Z(s.Z.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),o=a.Z.evaluate(this.visProp.straightfirst),h=a.Z.evaluate(this.visProp.straightlast);if((o||h)&&c.Z.calcStraight(this,i,n,0),i=i.scrCoords,n=n.scrCoords,!a.Z.exists(this.label))return new m.Z(s.Z.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(a.Z.evaluate(this.label.visProp.position)){case"last":t=n[1],e=n[2];break;case"first":t=i[1],e=i[2];break;case"lft":case"llft":case"ulft":i[1]<=n[1]?(t=i[1],e=i[2]):(t=n[1],e=n[2]);break;case"rt":case"lrt":case"urt":i[1]>n[1]?(t=i[1],e=i[2]):(t=n[1],e=n[2]);break;default:t=.5*(i[1]+n[1]),e=.5*(i[2]+n[2])}return(o||h)&&(a.Z.exists(this.label)&&(r=a.Z.evaluate(this.label.visProp.fontsize)),Math.abs(t)<u.Z.eps?t=r:this.board.canvasWidth+u.Z.eps>t&&t>this.board.canvasWidth-r-u.Z.eps&&(t=this.board.canvasWidth-r),u.Z.eps+r>e&&e>-u.Z.eps?e=r:this.board.canvasHeight+u.Z.eps>e&&e>this.board.canvasHeight-r-u.Z.eps&&(e=this.board.canvasHeight-r)),new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board)},cloneToBackground:function(){var t,e,r,i={};return i.id=this.id+"T"+this.numTraces,i.elementClass=s.Z.OBJECT_CLASS_LINE,this.numTraces++,i.point1=this.point1,i.point2=this.point2,i.stdform=this.stdform,i.board=this.board,i.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),i.visProp.layer=this.board.options.layer.trace,a.Z.clearVisPropOld(i),i.visPropCalc={visible:a.Z.evaluate(i.visProp.visible)},e=this.getSlope(),t=this.getRise(),i.getSlope=function(){return e},i.getRise=function(){return t},r=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(i),this.board.renderer.enhancedRendering=r,this.traces[i.id]=i.rendNode,this},addTransform:function(t){var e,r=a.Z.isArray(t)?t:[t],i=r.length;for(e=0;e<i;e++)this.point1.transformations.push(r[e]),this.point2.transformations.push(r[e]);return this},snapToGrid:function(t){var e,r,i,n,o,u,h,l;return a.Z.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):a.Z.exists(t)&&(h=a.Z.evaluate(this.visProp.snapsizex),l=a.Z.evaluate(this.visProp.snapsizey),o=(e=new m.Z(s.Z.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board)).usrCoords[1],u=e.usrCoords[2],h<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(h=(n=this.board.defaultAxes.x.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),l<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(l=(n=this.board.defaultAxes.y.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),h>0&&l>0&&(r=c.Z.projectPointToLine({coords:e},this,this.board),i=v.Z.subtract([1,Math.round(o/h)*h,Math.round(u/l)*l],r.usrCoords),this.board.create("transform",i.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=a.Z.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var e=this.stdform[2];return(1-Math.abs(t=(t-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1])-t*e},Y:function(t){var e=this.stdform[1];return(1-Math.abs(t=(t-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2])+t*e},Z:function(t){return(1-Math.abs(t=(t-.5)*2))*(Math.abs(this.point1.coords.usrCoords[0])>u.Z.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0])},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(t){return this.hasFixedLength&&(this.fixedLength=a.Z.createFunction(t,this.board),this.board.update()),this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return[Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[1],e[1]),Math.min(t[2],e[2])]},remove:function(){this.removeAllTicks(),z.Z.prototype.remove.call(this)}}),n.Z.createLine=function(t,e,r){var i,o,s,u,h,l,c,d=[],f=!1,p=!1;if(2===e.length){if(l=a.Z.copyAttributes(r,t.options,"line","point1"),a.Z.isArray(e[0])&&e[0].length>1)s=t.create("point",e[0],l);else if(a.Z.isString(e[0])||a.Z.isPoint(e[0]))s=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))s=e[0](),p=!0;else if(a.Z.isFunction(e[0])&&e[0]().length&&e[0]().length>=2)s=n.Z.createPoint(t,e[0](),l),p=!0;else if(a.Z.isObject(e[0])&&a.Z.isTransformationOrArray(e[1]))f=!0,s=t.create("point",[e[0].point1,e[1]],l);else throw Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");if(l=a.Z.copyAttributes(r,t.options,"line","point2"),f)u=t.create("point",[e[0].point2,e[1]],l);else if(a.Z.isArray(e[1])&&e[1].length>1)u=t.create("point",e[1],l);else if(a.Z.isString(e[1])||a.Z.isPoint(e[1]))u=t.select(e[1]);else if(a.Z.isFunction(e[1])&&a.Z.isPoint(e[1]()))u=e[1](),p=!0;else if(a.Z.isFunction(e[1])&&e[1]().length&&e[1]().length>=2)u=n.Z.createPoint(t,e[1](),l),p=!0;else throw Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");l=a.Z.copyAttributes(r,t.options,"line"),o=new n.Z.Line(t,s,u,l),p?(o.constrained=!0,o.funp1=e[0],o.funp2=e[1]):f||(o.isDraggable=!0),o.setParents([s.id,u.id])}else if(3===e.length){for(h=0,c=!0;h<3;h++)if(a.Z.isNumber(e[h]))d[h]=a.Z.createFunction(e[h]);else if(a.Z.isFunction(e[h]))d[h]=e[h],c=!1;else throw Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");l=a.Z.copyAttributes(r,t.options,"line","point1"),s=c?t.create("point",[d[2]()*d[2]()+d[1]()*d[1](),d[2]()-d[1]()*d[0]()+d[2](),-d[1]()-d[2]()*d[0]()-d[1]()],l):t.create("point",[function(){return(d[2]()*d[2]()+d[1]()*d[1]())*.5},function(){return(d[2]()-d[1]()*d[0]()+d[2]())*.5},function(){return(-d[1]()-d[2]()*d[0]()-d[1]())*.5}],l),l=a.Z.copyAttributes(r,t.options,"line","point2"),u=c?t.create("point",[d[2]()*d[2]()+d[1]()*d[1](),-d[1]()*d[0]()+d[2](),-d[2]()*d[0]()-d[1]()],l):t.create("point",[function(){return d[2]()*d[2]()+d[1]()*d[1]()},function(){return-d[1]()*d[0]()+d[2]()},function(){return-d[2]()*d[0]()-d[1]()}],l),s.prepareUpdate().update(),u.prepareUpdate().update(),l=a.Z.copyAttributes(r,t.options,"line"),(o=new n.Z.Line(t,s,u,l)).isDraggable=c,o.setParents([s,u])}else if(1===e.length&&a.Z.isFunction(e[0])&&2===e[0]().length&&a.Z.isPoint(e[0]()[0])&&a.Z.isPoint(e[0]()[1]))i=e[0](),l=a.Z.copyAttributes(r,t.options,"line"),(o=new n.Z.Line(t,i[0],i[1],l)).constrained=!0,o.funps=e[0],o.setParents(i);else if(1===e.length&&a.Z.isFunction(e[0])&&3===e[0]().length&&a.Z.isNumber(e[0]()[0])&&a.Z.isNumber(e[0]()[1])&&a.Z.isNumber(e[0]()[2]))i=e[0],l=a.Z.copyAttributes(r,t.options,"line","point1"),s=t.create("point",[function(){var t=i();return[(t[2]*t[2]+t[1]*t[1])*.5,(t[2]-t[1]*t[0]+t[2])*.5,(-t[1]-t[2]*t[0]-t[1])*.5]}],l),l=a.Z.copyAttributes(r,t.options,"line","point2"),u=t.create("point",[function(){var t=i();return[t[2]*t[2]+t[1]*t[1],-t[1]*t[0]+t[2],-t[2]*t[0]-t[1]]}],l),l=a.Z.copyAttributes(r,t.options,"line"),(o=new n.Z.Line(t,s,u,l)).constrained=!0,o.funps=e[0],o.setParents([s,u]);else throw Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");return o},n.Z.registerElement("line",n.Z.createLine),n.Z.createSegment=function(t,e,r){var i,n;if(r.straightFirst=!1,r.straightLast=!1,n=a.Z.copyAttributes(r,t.options,"segment"),i=t.create("line",e.slice(0,2),n),3===e.length){if(i.hasFixedLength=!0,a.Z.isNumber(e[2]))i.fixedLength=function(){return e[2]};else if(a.Z.isFunction(e[2]))i.fixedLength=a.Z.createFunction(e[2],this.board);else throw Error("JSXGraph: Can't create segment with third parent type '"+typeof e[2]+"'.\nPossible third parent types: number or function");i.getParents=function(){return this.parents.concat(this.fixedLength())},i.fixedLengthOldCoords=[],i.fixedLengthOldCoords[0]=new m.Z(s.Z.COORDS_BY_USER,i.point1.coords.usrCoords.slice(1,3),t),i.fixedLengthOldCoords[1]=new m.Z(s.Z.COORDS_BY_USER,i.point2.coords.usrCoords.slice(1,3),t)}return i.elType="segment",i},n.Z.registerElement("segment",n.Z.createSegment),n.Z.createArrow=function(t,e,r){var i,n;return r.straightFirst=!1,r.straightLast=!1,n=a.Z.copyAttributes(r,t.options,"arrow"),(i=t.create("line",e,n)).type=s.Z.OBJECT_TYPE_VECTOR,i.elType="arrow",i},n.Z.registerElement("arrow",n.Z.createArrow),n.Z.createAxis=function(t,e,r){var i,n,o,u,h;i=a.Z.copyAttributes(r,t.options,"axis");try{o=t.create("line",e,i)}catch(t){throw Error("JSXGraph: Can't create axis with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]")}for(u in o.type=s.Z.OBJECT_TYPE_AXIS,o.isDraggable=!1,o.point1.isDraggable=!1,o.point2.isDraggable=!1,o.ancestors)o.ancestors.hasOwnProperty(u)&&(o.ancestors[u].type=s.Z.OBJECT_TYPE_AXISPOINT);return n=a.Z.copyAttributes(r,t.options,"axis","ticks"),h=a.Z.exists(n.ticksdistance)?n.ticksdistance:a.Z.isArray(n.ticks)?n.ticks:1,o.defaultTicks=t.create("ticks",[o,h],n),o.defaultTicks.dump=!1,o.elType="axis",o.subs={ticks:o.defaultTicks},o.inherits.push(o.defaultTicks),o},n.Z.registerElement("axis",n.Z.createAxis),n.Z.createTangent=function(t,e,r){var i,n,o,h,l,c,d;if(1===e.length)n=(i=e[0]).slideObject;else if(2===e.length){if(a.Z.isPoint(e[0]))i=e[0],n=e[1];else if(a.Z.isPoint(e[1]))n=e[0],i=e[1];else throw Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]")}else throw Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(c=a.Z.copyAttributes(r,t.options,"tangent"),n.elementClass===s.Z.OBJECT_CLASS_LINE?(l=t.create("line",[n.point1,n.point2],c)).glider=i:n.elementClass===s.Z.OBJECT_CLASS_CURVE&&n.type!==s.Z.OBJECT_TYPE_CONIC?("plot"!==a.Z.evaluate(n.visProp.curvetype)?l=t.create("line",[function(){var t=n.X,e=n.Y;return-i.X()*p.Z.D(e)(i.position)+i.Y()*p.Z.D(t)(i.position)},function(){return p.Z.D(n.Y)(i.position)},function(){return-p.Z.D(n.X)(i.position)}],c):(d=function(t,e,r){var n,o,s,a,h,l,c,d,f,p,m,v,g=Math.floor(t);if(1===e.bezierDegree)g===e.numberPoints-1&&g--;else{if(3!==e.bezierDegree)return 0;g=3*Math.floor(t*((v="sector"===e.elType?(m=e.points.slice(3,e.numberPoints-3)).length:(m=e.points).length)-1)/3),s=(t*(v-1)-g)/3,g>=v-1&&(g=v-4,s=1)}if(g<0)return 1;switch(1===e.bezierDegree?(n=e.points[g].usrCoords,o=e.points[g+1].usrCoords):(a=m[g].usrCoords,h=m[g+1].usrCoords,l=m[g+2].usrCoords,c=m[g+3].usrCoords,d=(1-s)*(1-s)*(h[1]-a[1])+2*(1-s)*s*(l[1]-h[1])+s*s*(c[1]-l[1]),f=(1-s)*(1-s)*(h[2]-a[2])+2*(1-s)*s*(l[2]-h[2])+s*s*(c[2]-l[2]),p=u.Z.hypot(d,f),d/=p,f/=p,o=[1,(n=i.coords.usrCoords)[1]+d,n[2]+f]),r){case 0:return n[2]*o[1]-n[1]*o[2];case 1:return o[2]-n[2];case 2:return n[1]-o[1]}return 0},l=t.create("line",[function(){return d(i.position,n,0)},function(){return d(i.position,n,1)},function(){return d(i.position,n,2)}],c)),i.addChild(l),l.glider=i):n.type===s.Z.OBJECT_TYPE_TURTLE?(l=t.create("line",[function(){var t=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((h=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return(t===h.numberPoints-1&&t--,t<0)?1:h.Y(t)*h.X(t+1)-h.X(t)*h.Y(t+1)},function(){var t=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((h=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return(t===h.numberPoints-1&&t--,t<0)?0:h.Y(t+1)-h.Y(t)},function(){var t=Math.floor(i.position);for(o=0;o<n.objects.length;o++)if((h=n.objects[o]).type===s.Z.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return(t===h.numberPoints-1&&t--,t<0)?0:h.X(t)-h.X(t+1)}],c),i.addChild(l),l.glider=i):(n.elementClass===s.Z.OBJECT_CLASS_CIRCLE||n.type===s.Z.OBJECT_TYPE_CONIC)&&(l=t.create("line",[function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[0]},function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[1]},function(){return u.Z.matVecMult(n.quadraticform,i.coords.usrCoords)[2]}],c),i.addChild(l),l.glider=i),!a.Z.exists(l))throw Error("JSXGraph: Couldn't create tangent with the given parents.");return l.elType="tangent",l.type=s.Z.OBJECT_TYPE_TANGENT,l.setParents(e),l},n.Z.createRadicalAxis=function(t,e,r){var i,n,o;if(2!==e.length||e[0].elementClass!==s.Z.OBJECT_CLASS_CIRCLE||e[1].elementClass!==s.Z.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [circle,circle]");return n=t.select(e[0]),o=t.select(e[1]),(i=t.create("line",[function(){var t=n.stdform,e=o.stdform;return u.Z.matVecMult(u.Z.transpose([t.slice(0,3),e.slice(0,3)]),[e[3],-t[3]])}],r)).elType="radicalaxis",i.setParents([n.id,o.id]),n.addChild(i),o.addChild(i),i},n.Z.createPolarLine=function(t,e,r){var i,n,o,u,h,l,c;if(e.length>1&&(u=e[0].type===s.Z.OBJECT_TYPE_CONIC||e[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE,h=e[1].type===s.Z.OBJECT_TYPE_CONIC||e[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE,l=a.Z.isPoint(e[0]),c=a.Z.isPoint(e[1])),2!==e.length||!(u&&c||l&&h))throw Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return c?(n=t.select(e[0]),o=t.select(e[1])):(n=t.select(e[1]),o=t.select(e[0])),(i=t.create("tangent",[n,o],r)).elType="polarline",i},n.Z.registerElement("tangent",n.Z.createTangent),n.Z.registerElement("polar",n.Z.createTangent),n.Z.registerElement("radicalaxis",n.Z.createRadicalAxis),n.Z.registerElement("polarline",n.Z.createPolarLine),n.Z.Line,n.Z.Group=function(t,e,r,i,n){var o,u,h,l;for(this.board=t,this.objects={},o=this.board.numObjects,this.board.numObjects+=1,""!==e&&a.Z.exists(e)?this.id=e:this.id=this.board.id+"Group"+o,this.board.groups[this.id]=this,this.type=s.Z.OBJECT_TYPE_POINT,this.elementClass=s.Z.OBJECT_CLASS_POINT,""!==r&&a.Z.exists(r)?this.name=r:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=n.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],u=a.Z.isArray(i)?i:Array.prototype.slice.call(arguments,3),h=0;h<u.length;h++)l=this.board.select(u[h]),!a.Z.evaluate(l.visProp.fixed)&&a.Z.exists(l.coords)&&this.addPoint(l);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},n.Z.extend(n.Z.Group.prototype,{ungroup:function(){var t,e,r;for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point,a.Z.isArray(e.groups)&&(r=a.Z.indexOf(e.groups,this.id))>=0&&delete e.groups[r]);return this.objects={},this},addParents:function(t){var e,r,i;for(e=0,i=a.Z.isArray(t)?t:arguments,r=i.length;e<r;++e)a.Z.isId(this.board,i[e])?this.parents.push(i[e]):a.Z.exists(i[e].id)&&this.parents.push(i[e].id);this.parents=a.Z.uniqueArray(this.parents)},setParents:function(t){return this.parents=[],this.addParents(t),this},getParents:function(){return a.Z.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var e;""!==t&&a.Z.exists(this.objects[t])&&(e=this.objects[t].point,this.coords[e.id]={usrCoords:e.coords.usrCoords.slice(0)})},update:function(){var t,e,r,i,n,o,s,h,l,d,f=null;if(!this.needsUpdate)return this;if("nothing"===(t=this._update_find_drag_type()).action)return this._updateCoordsCache(t.id),this;if(f=this.objects[t.id].point,"translation"===t.action)l=[f.coords.usrCoords[1]-this.coords[t.id].usrCoords[1],f.coords.usrCoords[2]-this.coords[t.id].usrCoords[2]];else if("rotation"===t.action||"scaling"===t.action){if(r="rotation"===t.action?"rotationCenter":"scaleCenter",a.Z.isPoint(this[r]))d=this[r].coords.usrCoords.slice(1);else if("centroid"===this[r])d=this._update_centroid_center();else if(a.Z.isArray(this[r]))d=this[r];else{if(!a.Z.isFunction(this[r]))return this;d=this[r]()}if("rotation"===t.action)h=c.Z.rad(this.coords[t.id].usrCoords.slice(1),d,this.objects[t.id].point),(l=this.board.create("transform",[h,d[0],d[1]],{type:"rotate"})).update();else{if("scaling"!==t.action||Math.abs(n=c.Z.distance(this.coords[t.id].usrCoords.slice(1),d))<u.Z.eps)return this;n=c.Z.distance(f.coords.usrCoords.slice(1),d)/n,o=this.scaleDirections[t.id].indexOf("x")>=0?n:1,s=this.scaleDirections[t.id].indexOf("y")>=0?n:1,(l=this.board.create("transform",[1,0,0,d[0]*(1-o),o,0,d[1]*(1-s),0,s],{type:"generic"})).update()}}for(e in this._update_apply_transformation(t,l),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(e))for(i in this.objects[e].descendants)this.objects[e].descendants.hasOwnProperty(i)&&(this.objects[e].descendants.needsUpdate=this.objects[e].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(e in this.board.updateElements(t),this.objects)this.objects.hasOwnProperty(e)&&this._updateCoordsCache(e);return this},_update_find_drag_type:function(){var t,e,r,i="nothing",n=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point).coords.distance(s.Z.COORDS_BY_USER,this.coords[t])>u.Z.eps&&n.push(e.id);return 0===n.length?{action:i,id:"",changed:n}:(r=n[0],e=this.objects[r].point,n.length>1?i="translation":a.Z.isInArray(this.rotationPoints,e)&&a.Z.exists(this.rotationCenter)?i="rotation":a.Z.isInArray(this.scalePoints,e)&&a.Z.exists(this.scaleCenter)?i="scaling":a.Z.isInArray(this.translationPoints,e)&&(i="translation"),{action:i,id:r,changed:n})},_update_centroid_center:function(){var t,e,r;for(r in t=[0,0],e=0,this.coords)this.coords.hasOwnProperty(r)&&(t[0]+=this.coords[r].usrCoords[1],t[1]+=this.coords[r].usrCoords[2],++e);return e>0&&(t[0]/=e,t[1]/=e),t},_update_apply_transformation:function(t,e){var r,i;for(r in this.objects)this.objects.hasOwnProperty(r)&&(a.Z.exists(this.board.objects[r])?(i=this.objects[r].point).id!==t.id?"translation"===t.action?a.Z.isInArray(t.changed,i.id)||i.coords.setCoordinates(s.Z.COORDS_BY_USER,[this.coords[r].usrCoords[1]+e[0],this.coords[r].usrCoords[2]+e[1]]):("rotation"===t.action||"scaling"===t.action)&&e.applyOnce([i]):("rotation"===t.action||"scaling"===t.action)&&i.coords.setCoordinates(s.Z.COORDS_BY_USER,u.Z.matVecMult(e.matrix,this.coords[i.id].usrCoords)):delete this.objects[r])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=a.Z.uniqueArray(t.groups),this},addPoints:function(t){var e;for(e=0;e<t.length;e++)this.addPoint(t[e]);return this},addGroup:function(t){var e;for(e in t.objects)t.objects.hasOwnProperty(e)&&this.addPoint(t.objects[e].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,e){var r,i,n;for(i=0,r=a.Z.isArray(t)?t:arguments,n=r.length;i<n;++i)this.scaleDirections[this.board.select(r[i]).id]=e||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,e){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=e||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,e){var r,i,n;for(i=0,r=a.Z.isArray(e)?e:arguments,n=r.length,this[t+"Points"]=[];i<n;++i)this._addActionPoint(t,r[i]);return this},_addActionPoint:function(t,e){return this[t+"Points"].push(this.board.select(e)),this},_removeActionPoint:function(t,e){var r=this[t+"Points"].indexOf(this.board.select(e));return r>-1&&this[t+"Points"].splice(r,1),this},setProperty:function(){n.Z.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}}),n.Z.createGroup=function(t,e,r){var i=a.Z.copyAttributes(r,t.options,"group"),o=new n.Z.Group(t,i.id,i.name,e,i);return o.elType="group",o.setParents(e),o},n.Z.registerElement("group",n.Z.createGroup),n.Z.Group,n.Z.Circle=function(t,e,r,i,n){this.constructor(t,n,s.Z.OBJECT_TYPE_CIRCLE,s.Z.OBJECT_CLASS_CIRCLE),this.method=e,this.midpoint=this.board.select(r),this.center=this.board.select(r),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===e?(this.point2=t.select(i),this.radius=this.Radius()):"pointRadius"===e?(this.gxtterm=i,this.updateRadius=a.Z.createFunction(i,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):"pointLine"===e?(this.line=t.select(i),this.radius=this.line.point1.coords.distance(s.Z.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===e&&(this.circle=t.select(i),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),a.Z.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===e?this.notifyParents(i):"pointLine"===e?this.line.addChild(this):"pointCircle"===e?this.circle.addChild(this):"twoPoints"===e&&(a.Z.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=a.Z.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})},n.Z.Circle.prototype=new z.Z,n.Z.extend(n.Z.Circle.prototype,{hasPoint:function(t,e){var r,i,n,o,h,l=this.center.coords.usrCoords,c=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board),d=this.Radius();return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(i=this.board._inputDevice,r=a.Z.evaluate(this.visProp.precision[i])):r=this.board.options.precision.hasPoint,n=l[1]-c.usrCoords[1],o=l[2]-c.usrCoords[2],h=u.Z.hypot(n,o),r+=.5*a.Z.evaluate(this.visProp.strokewidth),r/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),a.Z.evaluate(this.visProp.hasinnerpoints))?h<d+r:Math.abs(h-d)<r},generatePolynomial:function(t){var e=this.center.symbolic.x,r=this.center.symbolic.y,i=t.symbolic.x,n=t.symbolic.y,o=this.generateRadiusSquared();return""===o?[]:["(("+i+")-("+e+"))^2 + (("+n+")-("+r+"))^2 - ("+o+")"]},generateRadiusSquared:function(){var t,e,r,i,n="";return"twoPoints"===this.method?(t=this.center.symbolic.x,e=this.center.symbolic.y,n="(("+(r=this.point2.symbolic.x)+")-("+t+"))^2 + (("+(i=this.point2.symbolic.y)+")-("+e+"))^2"):"pointRadius"===this.method?a.Z.isNumber(this.radius)&&(n=(this.radius*this.radius).toString()):"pointLine"===this.method?(r=this.line.point1.symbolic.x,i=this.line.point1.symbolic.y,n="(("+r+")-("+this.line.point2.symbolic.x+"))^2 + (("+i+")-("+this.line.point2.symbolic.y+"))^2"):"pointCircle"===this.method&&(n=this.circle.Radius()),n},update:function(){var t,e,r,i,n;if(this.needsUpdate)for(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(s.Z.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),r=this.center.coords.usrCoords[0],t=this.center.coords.usrCoords[1]/r,e=this.center.coords.usrCoords[2]/r,r/=r,i=this.Radius(),n=0,this.numberPoints=13,this.dataX=[t+i,t+i,t+.551915024494*i,t,t-.551915024494*i,t-i,t-i,t-i,t-.551915024494*i,t,t+.551915024494*i,t+i,t+i],this.dataY=[e,e+.551915024494*i,e+i,e+i,e+i,e+.551915024494*i,e,e-.551915024494*i,e-i,e-i,e-i,e-.551915024494*i,e],this.bezierDegree=3;n<this.numberPoints;n++)this.points[n]=new m.Z(s.Z.COORDS_BY_USER,[this.dataX[n],this.dataY[n]],this.board);return this},updateQuadraticform:function(){var t=this.center,e=t.X(),r=t.Y(),i=this.Radius();this.quadraticform=[[e*e+r*r-i*i,-e,-r],[-e,1,0],[-r,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=a.Z.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},notifyParents:function(t){a.Z.isString(t)&&B.Z.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=a.Z.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return a.Z.exists(t)?(this.setRadius(t),this.Radius()):"twoPoints"===this.method?a.Z.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||a.Z.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return n.Z.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,e,r=this.Radius(),i=this.center.coords.usrCoords;switch(a.Z.evaluate(this.visProp.label.position)){case"lft":t=i[1]-r,e=i[2];break;case"llft":t=i[1]-.7071067811865*r,e=i[2]-.7071067811865*r;break;case"rt":t=i[1]+r,e=i[2];break;case"lrt":t=i[1]+.7071067811865*r,e=i[2]-.7071067811865*r;break;case"urt":t=i[1]+.7071067811865*r,e=i[2]+.7071067811865*r;break;case"top":t=i[1],e=i[2]+r;break;case"bot":t=i[1],e=i[2]-r;break;default:t=i[1]-.7071067811865*r,e=i[2]+.7071067811865*r}return new m.Z(s.Z.COORDS_BY_USER,[t,e],this.board)},cloneToBackground:function(){var t,e=this.Radius(),r={id:this.id+"T"+this.numTraces,elementClass:s.Z.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return e},getRadius:function(){return e},board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return r.visProp.layer=this.board.options.layer.trace,this.numTraces++,a.Z.clearVisPropOld(r),r.visPropCalc={visible:a.Z.evaluate(r.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(r),this.board.renderer.enhancedRendering=t,this.traces[r.id]=r.rendNode,this},addTransform:function(t){var e,r=a.Z.isArray(t)?t:[t],i=r.length;for(e=0;e<i;e++)this.center.transformations.push(r[e]),"twoPoints"===this.method&&this.point2.transformations.push(r[e]);return this},snapToGrid:function(){var t=a.Z.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(t,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=a.Z.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(t),"twoPoints"===this.method&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(2*t*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(2*t*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,e=this.Radius();return[t[1]-e,t[2]+e,t[1]+e,t[2]-e]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),n.Z.createCircle=function(t,e,r){var i,o,u,h,l,c=["center","point2"];if(o=[],l=t.select(e[0]),a.Z.isObject(l)&&l.elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isTransformationOrArray(e[1]))return h=a.Z.copyAttributes(r,t.options,"circle"),(i=n.Z.createEllipse(t,[l.center,l.center,function(){return 2*l.Radius()}],h)).addTransform(e[1]),i;for(u=0;u<e.length;u++)if(a.Z.isPointType(t,e[u])){if(!1===(o=e.length<3?o.concat(a.Z.providePoints(t,[e[u]],r,"circle",[c[u]])):o.concat(a.Z.providePoints(t,[e[u]],r,"point")))[o.length-1])throw Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else o.push(e[u]);if(h=a.Z.copyAttributes(r,t.options,"circle"),2===o.length&&a.Z.isPoint(o[0])&&a.Z.isPoint(o[1]))i=new n.Z.Circle(t,"twoPoints",o[0],o[1],h);else if((a.Z.isNumber(o[0])||a.Z.isFunction(o[0])||a.Z.isString(o[0]))&&a.Z.isPoint(o[1]))i=new n.Z.Circle(t,"pointRadius",o[1],o[0],h);else if((a.Z.isNumber(o[1])||a.Z.isFunction(o[1])||a.Z.isString(o[1]))&&a.Z.isPoint(o[0]))i=new n.Z.Circle(t,"pointRadius",o[0],o[1],h);else if(o[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(o[1]))i=new n.Z.Circle(t,"pointCircle",o[1],o[0],h);else if(o[1].elementClass===s.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(o[0]))i=new n.Z.Circle(t,"pointCircle",o[0],o[1],h);else if(o[0].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(o[1]))i=new n.Z.Circle(t,"pointLine",o[1],o[0],h);else if(o[1].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(o[0]))i=new n.Z.Circle(t,"pointLine",o[0],o[1],h);else if(3===e.length&&a.Z.isPoint(o[0])&&a.Z.isPoint(o[1])&&a.Z.isPoint(o[2])){if(n.Z.elements.circumcircle)i=n.Z.elements.circumcircle(t,o,h);else throw Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).")}else throw Error("JSXGraph: Can't create circle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");for(i.isDraggable=!0,i.setParents(o),i.elType="circle",u=0;u<o.length;u++)a.Z.isPoint(o[u])&&i.inherits.push(o[u]);return i},n.Z.registerElement("circle",n.Z.createCircle);var G=n.Z.Circle;n.Z.createEllipse=function(t,e,r){var i,n,o,u,h,l,c,d=[],f=a.Z.copyAttributes(r,t.options,"conic","foci"),p=a.Z.copyAttributes(r,t.options,"conic","center"),v=a.Z.copyAttributes(r,t.options,"conic");for(l=0;l<2;l++)if(e[l].length>1)d[l]=t.create("point",e[l],f);else if(a.Z.isPoint(e[l]))d[l]=t.select(e[l]);else if(a.Z.isFunction(e[l])&&a.Z.isPoint(e[l]()))d[l]=e[l]();else if(a.Z.isString(e[l]))d[l]=t.select(e[l]);else throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");if(a.Z.isNumber(e[2]))h=a.Z.createFunction(e[2],t);else if(a.Z.isFunction(e[2])&&a.Z.isNumber(e[2]()))h=e[2];else{if(a.Z.isPoint(e[2]))u=t.select(e[2]);else if(e[2].length>1)u=t.create("point",e[2],f);else if(a.Z.isFunction(e[2])&&a.Z.isPoint(e[2]()))u=e[2]();else if(a.Z.isString(e[2]))u=t.select(e[2]);else throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");h=function(){return u.Dist(d[0])+u.Dist(d[1])}}for(a.Z.exists(e[4])||(e[4]=2*Math.PI),a.Z.exists(e[3])||(e[3]=0),o=t.create("point",[function(){return(d[0].X()+d[1].X())*.5},function(){return(d[0].Y()+d[1].Y())*.5}],p),(n=t.create("curve",[function(t){return 0},function(t){return 0},e[3],e[4]],v)).majorAxis=h,c=n.hasPoint,i=function(t,e){var r,i,o,s,a,u,l,c,f;e||(i=(r=h())*r,o=d[0].X(),s=d[0].Y(),a=d[1].X(),u=d[1].Y(),l=o-a,c=s-u,f=(i-o*o-s*s+a*a+u*u)/(2*r),n.quadraticform=[[f*f-a*a-u*u,f*l/r+a,f*c/r+u],[f*l/r+a,l*l/i-1,l*c/i],[f*c/r+u,l*c/i,c*c/i-1]])},n.X=function(t,e){var r=h(),n=d[1].Dist(d[0]),o=.5*(n*n-r*r)/(n*Math.cos(t)-r),s=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return e||i(t,e),d[0].X()+Math.cos(s+t)*o},n.Y=function(t,e){var r=h(),i=d[1].Dist(d[0]),n=.5*(i*i-r*r)/(i*Math.cos(t)-r),o=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return d[0].Y()+Math.sin(o+t)*n},n.midpoint=n.center=o,n.type=s.Z.OBJECT_TYPE_CONIC,n.subs={center:n.center},n.inherits.push(n.center,d[0],d[1]),a.Z.isPoint(u)&&n.inherits.push(u),n.hasPoint=function(t,e){var r,i,n,o;return a.Z.evaluate(this.visProp.hasinnerpoints)?(r=d[0].coords,i=d[1].coords,n=this.majorAxis(),(o=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board)).distance(s.Z.COORDS_BY_USER,r)+o.distance(s.Z.COORDS_BY_USER,i)<=n):c.apply(this,arguments)},o.addChild(n),l=0;l<2;l++)a.Z.isPoint(d[l])&&d[l].addChild(n);return a.Z.isPoint(u)&&u.addChild(n),n.setParents(e),n},n.Z.createHyperbola=function(t,e,r){var i,n,o,u,h,l,c=[],d=a.Z.copyAttributes(r,t.options,"conic","foci"),f=a.Z.copyAttributes(r,t.options,"conic","center"),p=a.Z.copyAttributes(r,t.options,"conic");for(l=0;l<2;l++)if(e[l].length>1)c[l]=t.create("point",e[l],d);else if(a.Z.isPoint(e[l]))c[l]=t.select(e[l]);else if(a.Z.isFunction(e[l])&&a.Z.isPoint(e[l]()))c[l]=e[l]();else if(a.Z.isString(e[l]))c[l]=t.select(e[l]);else throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");if(a.Z.isNumber(e[2]))h=a.Z.createFunction(e[2],t);else if(a.Z.isFunction(e[2])&&a.Z.isNumber(e[2]()))h=e[2];else{if(a.Z.isPoint(e[2]))u=t.select(e[2]);else if(e[2].length>1)u=t.create("point",e[2],d);else if(a.Z.isFunction(e[2])&&a.Z.isPoint(e[2]()))u=e[2]();else if(a.Z.isString(e[2]))u=t.select(e[2]);else throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");h=function(){return u.Dist(c[0])-u.Dist(c[1])}}for(a.Z.exists(e[4])||(e[4]=1.0001*Math.PI),a.Z.exists(e[3])||(e[3]=-1.0001*Math.PI),o=t.create("point",[function(){return(c[0].X()+c[1].X())*.5},function(){return(c[0].Y()+c[1].Y())*.5}],f),(n=t.create("curve",[function(t){return 0},function(t){return 0},e[3],e[4]],p)).majorAxis=h,i=function(t,e){var r,i,o,s,a,u,l,d,f;e||(i=(r=h())*r,o=c[0].X(),s=c[0].Y(),a=c[1].X(),u=c[1].Y(),l=o-a,d=s-u,f=(i-o*o-s*s+a*a+u*u)/(2*r),n.quadraticform=[[f*f-a*a-u*u,f*l/r+a,f*d/r+u],[f*l/r+a,l*l/i-1,l*d/i],[f*d/r+u,l*d/i,d*d/i-1]])},n.X=function(t,e){var r=h(),n=c[1].Dist(c[0]),o=.5*(n*n-r*r)/(n*Math.cos(t)+r),s=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return e||i(t,e),c[0].X()+Math.cos(s+t)*o},n.Y=function(t,e){var r=h(),i=c[1].Dist(c[0]),n=.5*(i*i-r*r)/(i*Math.cos(t)+r),o=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return c[0].Y()+Math.sin(o+t)*n},n.midpoint=n.center=o,n.subs={center:n.center},n.inherits.push(n.center,c[0],c[1]),a.Z.isPoint(u)&&n.inherits.push(u),n.type=s.Z.OBJECT_TYPE_CONIC,o.addChild(n),l=0;l<2;l++)a.Z.isPoint(c[l])&&c[l].addChild(n);return a.Z.isPoint(u)&&u.addChild(n),n.setParents(e),n},n.Z.createParabola=function(t,e,r){var i,n,o,u,h=e[0],l=e[1],d=a.Z.copyAttributes(r,t.options,"conic","foci"),f=a.Z.copyAttributes(r,t.options,"conic","center"),p=a.Z.copyAttributes(r,t.options,"conic");if(e[0].length>1)h=t.create("point",e[0],d);else if(a.Z.isPoint(e[0]))h=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))h=e[0]();else if(a.Z.isString(e[0]))h=t.select(e[0]);else throw Error("JSXGraph: Can't create Parabola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");return a.Z.isArray(l)&&2===l.length&&(u=a.Z.copyAttributes(r,t.options,"conic","line"),l=t.create("line",l,u)),a.Z.exists(e[3])||(e[3]=2*Math.PI),a.Z.exists(e[2])||(e[2]=0),o=t.create("point",[function(){return c.Z.projectPointToLine(h,l,t).usrCoords}],f),(n=t.create("curve",[function(t){return 0},function(t){return 0},e[2],e[3]],p)).midpoint=n.center=o,n.subs={center:n.center},n.inherits.push(n.center),i=function(t,e){var r,i,o,s,a,u;e||(r=l.stdform[1],i=l.stdform[2],o=l.stdform[0],s=r*r+i*i,a=h.X(),u=h.Y(),n.quadraticform=[[o*o-s*(a*a+u*u),o*r+s*a,o*i+s*u],[o*r+s*a,-i*i,r*i],[o*i+s*u,r*i,-r*r]])},n.X=function(t,e){var r,n=l.getAngle(),o=c.Z.distPointLine(h.coords.usrCoords,l.stdform),s=l.point1.coords.usrCoords,a=l.point2.coords.usrCoords,u=h.coords.usrCoords;return 0===s[0]?s=[1,a[1]+l.stdform[2],a[2]-l.stdform[1]]:0===a[0]&&(a=[1,s[1]+l.stdform[2],s[2]-l.stdform[1]]),r=((a[1]-s[1])*(u[2]-s[2])-(a[2]-s[2])*(u[1]-s[1])>=0?1:-1)*o/(1-Math.sin(t)),e||i(t,e),h.X()+Math.cos(t+n)*r},n.Y=function(t,e){var r,i=l.getAngle(),n=c.Z.distPointLine(h.coords.usrCoords,l.stdform),o=l.point1.coords.usrCoords,s=l.point2.coords.usrCoords,a=h.coords.usrCoords;return 0===o[0]?o=[1,s[1]+l.stdform[2],s[2]-l.stdform[1]]:0===s[0]&&(s=[1,o[1]+l.stdform[2],o[2]-l.stdform[1]]),r=((s[1]-o[1])*(a[2]-o[2])-(s[2]-o[2])*(a[1]-o[1])>=0?1:-1)*n/(1-Math.sin(t)),h.Y()+Math.sin(t+i)*r},n.type=s.Z.OBJECT_TYPE_CONIC,o.addChild(n),a.Z.isPoint(h)&&(h.addChild(n),n.inherits.push(h)),l.addChild(n),n.setParents(e),n},n.Z.createConic=function(t,e,r){var i,n,o,h,l,c,d,f,m,v,g,b,y=[[1,0,0],[0,1,0],[0,0,1]],C=[[1,0,0],[0,1,0],[0,0,1]],Z=[],x=[],_=a.Z.copyAttributes(r,t.options,"conic","point"),E=a.Z.copyAttributes(r,t.options,"conic","center"),w=a.Z.copyAttributes(r,t.options,"conic");if(5===e.length)b=!0;else if(6===e.length)b=!1;else throw Error("JSXGraph: Can't create generic Conic with "+e.length+" parameters.");if(b)for(v=0;v<5;v++)if(e[v].length>1)Z[v]=t.create("point",e[v],_);else if(a.Z.isPoint(e[v]))Z[v]=t.select(e[v]);else if(a.Z.isFunction(e[v])&&a.Z.isPoint(e[v]()))Z[v]=e[v]();else if(a.Z.isString(e[v]))Z[v]=t.select(e[v]);else throw Error("JSXGraph: Can't create Conic section with parent types '"+typeof e[v]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");else(g=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=a.Z.isFunction(e[2])?function(){return e[2]()}:function(){return e[2]},g[0][1]=a.Z.isFunction(e[4])?function(){return e[4]()}:function(){return e[4]},g[0][2]=a.Z.isFunction(e[5])?function(){return e[5]()}:function(){return e[5]},g[1][1]=a.Z.isFunction(e[0])?function(){return e[0]()}:function(){return e[0]},g[1][2]=a.Z.isFunction(e[3])?function(){return e[3]()}:function(){return e[3]},g[2][2]=a.Z.isFunction(e[1])?function(){return e[1]()}:function(){return e[1]};if(l=function(t){var e,r;for(e=0;e<3;e++)for(r=e;r<3;r++)t[e][r]+=t[r][e];for(e=0;e<3;e++)for(r=0;r<e;r++)t[e][r]=t[r][e];return t},h=function(t,e){var r,i,n=[[0,0,0],[0,0,0],[0,0,0]];for(r=0;r<3;r++)for(i=0;i<3;i++)n[r][i]=t[r]*e[i];return l(n)},o=function(t,e,r){var i,n,o,s,a,h=[[0,0,0],[0,0,0],[0,0,0]];for(i=0,a=u.Z.matVecMult(e,r),o=u.Z.innerProduct(r,a),a=u.Z.matVecMult(t,r),s=u.Z.innerProduct(r,a);i<3;i++)for(n=0;n<3;n++)h[i][n]=o*t[i][n]-s*e[i][n];return h},n=t.create("curve",[function(t){return 0},function(t){return 0},0,2*Math.PI],w),i=function(t,e){var r,i,s;if(!e){if(b){for(r=0;r<5;r++)x[r]=Z[r].coords.usrCoords;C=o(h(u.Z.crossProduct(x[0],x[1]),u.Z.crossProduct(x[2],x[3])),h(u.Z.crossProduct(x[0],x[2]),u.Z.crossProduct(x[1],x[3])),x[4])}else for(r=0;r<3;r++)for(i=r;i<3;i++)C[r][i]=g[r][i](),i>r&&(C[i][r]=C[r][i]);n.quadraticform=C,(c=p.Z.Jacobi(C))[0][0][0]<0&&(c[0][0][0]*=-1,c[0][1][1]*=-1,c[0][2][2]*=-1),y=c[1],m=Math.sqrt(Math.abs(c[0][0][0])),d=Math.sqrt(Math.abs(c[0][1][1])),f=Math.sqrt(Math.abs(c[0][2][2]))}return c[0][1][1]<=0&&c[0][2][2]<=0?s=u.Z.matVecMult(y,[1/m,Math.cos(t)/d,Math.sin(t)/f]):c[0][1][1]<=0&&c[0][2][2]>0?s=u.Z.matVecMult(y,[Math.cos(t)/m,1/d,Math.sin(t)/f]):c[0][2][2]<0&&(s=u.Z.matVecMult(y,[Math.sin(t)/m,Math.cos(t)/d,1/f])),a.Z.exists(s)?(s[1]/=s[0],s[2]/=s[0],s[0]=1):s=[1,NaN,NaN],s},n.X=function(t,e){return i(t,e)[1]},n.Y=function(t,e){return i(t,e)[2]},n.midpoint=t.create("point",[function(){var t=n.quadraticform;return[t[1][1]*t[2][2]-t[1][2]*t[1][2],t[1][2]*t[0][2]-t[2][2]*t[0][1],t[0][1]*t[1][2]-t[1][1]*t[0][2]]}],E),n.type=s.Z.OBJECT_TYPE_CONIC,n.center=n.midpoint,n.subs={center:n.center},n.inherits.push(n.center),n.inherits=n.inherits.concat(Z),b){for(v=0;v<5;v++)a.Z.isPoint(Z[v])&&Z[v].addChild(n);n.setParents(e)}return n.addChild(n.center),n},n.Z.registerElement("ellipse",n.Z.createEllipse),n.Z.registerElement("hyperbola",n.Z.createHyperbola),n.Z.registerElement("parabola",n.Z.createParabola),n.Z.registerElement("conic",n.Z.createConic),n.Z.Polygon=function(t,e,r){this.constructor(t,r,s.Z.OBJECT_TYPE_POLYGON,s.Z.OBJECT_CLASS_AREA);var i,o,u,h,l,c=a.Z.copyAttributes(r,t.options,"polygon","borders");for(i=0,this.withLines=r.withlines,this.attr_line=c,this.vertices=[];i<e.length;i++)this.vertices[i]=this.board.select(e[i]),this.vertices[i]._is_new&&(delete this.vertices[i]._is_new,this.vertices[i]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(h=0,u=this.vertices.length-1;h<u;h++)i=(h+1)%u,c.id=c.ids&&c.ids[i],c.name=c.names&&c.names[i],c.strokecolor=a.Z.isArray(c.colors)&&c.colors[i%c.colors.length]||c.strokecolor,c.visible=a.Z.exists(r.borders.visible)?r.borders.visible:r.visible,!1===c.strokecolor&&(c.strokecolor="none"),(o=t.create("segment",[this.vertices[i],this.vertices[i+1]],c)).dump=!1,this.borders[i]=o,o.parentPolygon=this,this.addChild(o);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),i=0;i<this.vertices.length-1;i++)l=this.board.select(this.vertices[i]),a.Z.exists(l._is_new_pol)?(this.addChild(l),delete l._is_new_pol):l.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=n.Z.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},n.Z.Polygon.prototype=new z.Z,n.Z.extend(n.Z.Polygon.prototype,{pnpoly:function(t,e,r){return c.Z.pnpoly(t,e,this.vertices,r)},hasPoint:function(t,e){var r,i;if(a.Z.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(t,e))return!0;for(r=0,i=this.borders.length;r<i;r++)if(this.borders[r].hasPoint(t,e))return!0;return!1},updateRenderer:function(){var t,e;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(t=0,e=this.vertices.length-("polygonalchain"===this.elType?0:1),this.isReal=!0;t<e;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}if(!this.isReal)for(t in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(t)&&this.childElements[t].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,e,r,i,n;if(0===this.vertices.length)return new m.Z(s.Z.COORDS_BY_USER,[1,0,0],this.board);for(n=0,t=this.vertices[0].X(),e=this.vertices[0].Y(),r=t,i=e;n<this.vertices.length;n++)this.vertices[n].X()<t&&(t=this.vertices[n].X()),this.vertices[n].X()>r&&(r=this.vertices[n].X()),this.vertices[n].Y()>e&&(e=this.vertices[n].Y()),this.vertices[n].Y()<i&&(i=this.vertices[n].Y());return new m.Z(s.Z.COORDS_BY_USER,[(t+r)*.5,(e+i)*.5],this.board)},getLabelAnchor:n.Z.shortcut(n.Z.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,a.Z.clearVisPropOld(e),e.visPropCalc={visible:a.Z.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(t){var e;if(n.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!t)for(e=0;e<this.borders.length;e++)this.borders[e].hideElement();this.hasLabel&&a.Z.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(t){var e;if(n.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!t)for(e=0;e<this.borders.length;e++)this.borders[e].showElement().updateRenderer();return a.Z.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(c.Z.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,e=this.vertices.length,r=0;for(t=1;t<e;++t)r+=this.vertices[t].Dist(this.vertices[t-1]);return r},L:function(){return this.Perimeter()},boundingBox:function(){var t,e,r=[0,0,0,0],i=this.vertices.length-1;if(0===i)return r;for(t=1,r[0]=this.vertices[0].X(),r[2]=r[0],r[1]=this.vertices[0].Y(),r[3]=r[1];t<i;++t)(e=this.vertices[t].X())<r[0]?r[0]=e:e>r[2]&&(r[2]=e),(e=this.vertices[t].Y())>r[1]?r[1]=e:e<r[3]&&(r[3]=e);return r},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);z.Z.prototype.remove.call(this)},findPoint:function(t){var e;if(!a.Z.isPoint(t))return -1;for(e=0;e<this.vertices.length;e++)if(this.vertices[e].id===t.id)return e;return -1},addPoints:function(t){var e,r=Array.prototype.slice.call(arguments);return e="polygonalchain"===this.elType?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[e].concat(r))},insertPoints:function(t,e){var r,i,n,o,s;if(0==arguments.length||(n=this.vertices.length-1,"polygon"===this.elType&&n--,t<-1||t>n))return this;for(r=1,i=arguments.length-1;r<i+1;r++)s=a.Z.providePoints(this.board,[arguments[r]],{},"polygon",["vertices"])[0],s._is_new&&(this.addChild(s),delete s._is_new),this.vertices.splice(t+r,0,s);if(this.withLines)for(o=t+1,"polygon"===this.elType?t<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[t].point2=this.vertices[o]:t>=0&&(t<this.borders.length?this.borders[t].point2=this.vertices[o]:o=t),r=o;r<o+i;r++)this.borders.splice(r,0,this.board.create("segment",[this.vertices[r],this.vertices[r+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(t){var e,r,i,n,o=[],s=[],u=[],h=[];for("polygon"===this.elType&&(n=this.vertices.pop()),e=0;e<arguments.length;e++)i=arguments[e],a.Z.isPoint(i)&&(i=this.findPoint(i)),a.Z.isNumber(i)&&i>-1&&i<this.vertices.length&&-1===a.Z.indexOf(u,i)&&u.push(i);if(0===u.length)return"polygon"===this.elType&&this.vertices.push(n),this;for(e=0;e<u.length;e++)this.vertices[u[e]].removeChild(this);for(u=u.sort(),o=this.vertices.slice(),s=this.borders.slice(),this.withLines&&h.push([u[u.length-1]]),e=u.length-1;e>-1;e--)o[u[e]]=-1,this.withLines&&u.length>1&&u[e]-1>u[e-1]&&(h[h.length-1][1]=u[e],h.push([u[e-1]]));for(this.withLines&&(h[h.length-1][1]=u[0]),this.vertices=[],e=0;e<o.length;e++)a.Z.isPoint(o[e])&&this.vertices.push(o[e]);if("polygon"===this.elType&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(e=0;e<h.length;e++){for(r=h[e][1]-1;r<h[e][0]+1;r++)r<0?"polygon"===this.elType&&(this.board.removeObject(this.borders[s.length-1]),s[s.length-1]=-1):r<s.length&&(this.board.removeObject(this.borders[r]),s[r]=-1);0!==h[e][1]&&h[e][0]!==o.length-1&&(s[h[e][0]-1]=this.board.create("segment",[o[h[e][1]-1],o[h[e][0]+1]],this.attr_line))}for(e=0,this.borders=[];e<s.length;e++)-1!==s[e]&&this.borders.push(s[e]);"polygon"===this.elType&&this.vertices.length>2&&(h[0][1]===this.vertices.length-1||0===h[h.length-1][1])&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=z.Z.prototype.getAttributes.call(this);if(this.withLines)for(t=0,e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[];t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var t,e;for(t=0,e=!!a.Z.evaluate(this.visProp.snaptogrid);t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(e,!0)},setPositionDirectly:function(t,e,r){var i,n,o,s=new m.Z(t,e,this.board),a=new m.Z(t,r,this.board);for(n=0,o=this.vertices.length-1;n<o;n++)if(!this.vertices[n].draggable())return this;return i=v.Z.subtract(s.usrCoords,a.usrCoords),this.board.create("transform",i.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(t){var e,r,i,o,s,a,u,h=n.Z.Math.Geometry.sortVertices(this.vertices),l=n.Z.Math.Geometry.sortVertices(t.vertices),c=h.length-1,d=l.length-1,f=[],p=function(t,e,r){return(e[1]-t[1])*(r[2]-t[2])-(e[2]-t[2])*(r[1]-t[1])>=0};for(i=0;i<d;i++)f.push(l[i]);for(i=0;i<c;i++)for(o=0,e=(r=f.slice(0)).length,f=[],s=r[e-1];o<e;o++)a=r[o],p(h[i],h[i+1],a)?(p(h[i],h[i+1],s)||(u=n.Z.Math.Geometry.meetSegmentSegment(s,a,h[i],h[i+1]),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[0][0]=1,f.push(u[0])),f.push(a)):p(h[i],h[i+1],s)&&(u=n.Z.Math.Geometry.meetSegmentSegment(s,a,h[i],h[i+1]),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[0][0]=1,f.push(u[0])),s=a;return f},intersect:function(t){return this.sutherlandHodgman(t)}}),n.Z.createPolygon=function(t,e,r){var i,o,u,h,l,c,d=[],f=!1;if(l=a.Z.copyAttributes(r,t.options,"polygon"),null===(h=t.select(e[0]))&&(h=e[0]),a.Z.isObject(h)&&h.type===s.Z.OBJECT_TYPE_POLYGON&&a.Z.isTransformationOrArray(e[1]))for(o=0,f=!0,u=h.vertices.length-1,c=a.Z.copyAttributes(r,t.options,"polygon","vertices");o<u;o++)c.withlabel&&(c.name=""===h.vertices[o].name?"":h.vertices[o].name+"'"),d.push(t.create("point",[h.vertices[o],e[1]],c));else if(!1===(d=a.Z.providePoints(t,e,r,"polygon",["vertices"])))throw Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(l=a.Z.copyAttributes(r,t.options,"polygon"),(i=new n.Z.Polygon(t,d,l)).isDraggable=!0,f)for(i.prepareUpdate().update().updateVisibility().updateRenderer(),u=h.vertices.length-1,o=0;o<u;o++)d[o].prepareUpdate().update().updateVisibility().updateRenderer();return i},n.Z.createRegularPolygon=function(t,e,r){var i,n,o,u,h,l,c,d=[];if(h=e.length,o=e[h-1],a.Z.isNumber(o)&&(3!==e.length||o<3))throw Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(a.Z.isNumber(t.select(o))?(h--,l=!1):(o=h,l=!0),!1===(d=a.Z.providePoints(t,e.slice(0,h),r,"regularpolygon",["vertices"])))throw Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(n=2,c=a.Z.copyAttributes(r,t.options,"regularpolygon","vertices");n<o;n++)u=t.create("transform",[Math.PI*(2-(o-2)/o),d[n-1]],{type:"rotate"}),l?(d[n].addTransform(d[n-2],u),d[n].fullUpdate()):(a.Z.isArray(c.ids)&&c.ids.length>=o-2&&(c.id=c.ids[n-2]),d[n]=t.create("point",[d[n-2],u],c),d[n].type=s.Z.OBJECT_TYPE_CAS,d[n].isDraggable=!0,d[n].visProp.fixed=!1);return c=a.Z.copyAttributes(r,t.options,"regularpolygon"),(i=t.create("polygon",d,c)).elType="regularpolygon",i},n.Z.createPolygonalChain=function(t,e,r){var i,n;return i=a.Z.copyAttributes(r,t.options,"polygonalchain"),(n=t.create("polygon",e,i)).elType="polygonalchain",n.vertices.pop(),t.removeObject(n.borders[n.borders.length-1]),n.borders.pop(),n},n.Z.createParallelogram=function(t,e,r){var i,n,o,s,u=[];if(!1===(u=a.Z.providePoints(t,e,r,"polygon",["vertices"]))||u.length<3)throw Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return s=a.Z.copyAttributes(r,t.options,"parallelogram",["parallelpoint"]),n=t.create("parallelpoint",u,s),o=a.Z.copyAttributes(r,t.options,"parallelogram"),(i=t.create("polygon",[u[0],u[1],n,u[2]],o)).parallelPoint=n,i.isDraggable=!0,n.isDraggable=!0,n.visProp.fixed=!1,i},n.Z.registerElement("polygon",n.Z.createPolygon),n.Z.registerElement("regularpolygon",n.Z.createRegularPolygon),n.Z.registerElement("polygonalchain",n.Z.createPolygonalChain),n.Z.registerElement("parallelogram",n.Z.createParallelogram);var H=n.Z.Polygon;n.Z.Curve=function(t,e,r){this.constructor(t,r,s.Z.OBJECT_TYPE_CURVE,s.Z.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,a.Z.exists(e[0])?this.varname=e[0]:this.varname="x",this.xterm=e[1],this.yterm=e[2],this.generateTerm(this.varname,this.xterm,this.yterm,e[3],e[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),a.Z.isString(this.xterm)&&this.notifyParents(this.xterm),a.Z.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=a.Z.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},n.Z.Curve.prototype=new z.Z,n.Z.extend(n.Z.Curve.prototype,{minX:function(){return"polar"===a.Z.evaluate(this.visProp.curvetype)?0:new m.Z(s.Z.COORDS_BY_SCREEN,[-(.1*this.board.canvasWidth),0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===a.Z.evaluate(this.visProp.curvetype)?2*Math.PI:new m.Z(s.Z.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},hasPoint:function(t,e,r){var i,n,o,h,l,d,f,p,v,g,b,y,C,Z,x,_,E=[],w=a.Z.evaluate(this.visProp.numberpointslow),N=(this.maxX()-this.minX())/w,S=1/0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(y=this.board._inputDevice,b=a.Z.evaluate(this.visProp.precision[y])):b=this.board.options.precision.hasPoint,t=(d=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board,!1)).usrCoords[1],e=d.usrCoords[2],1===this.bezierDegree&&a.Z.evaluate(this.visProp.hasinnerpoints)&&0!==c.Z.windingNumber([1,t,e],this.points,!0))return!0;if(b+=.5*a.Z.evaluate(this.visProp.strokewidth),b*=b,C=this.board.unitX*this.board.unitX,Z=this.board.unitY*this.board.unitY,_=this.minX(),this.maxX(),a.Z.exists(this._visibleArea)&&(_=this._visibleArea[0],N=(this._visibleArea[1]-_)/w),"parameter"===(x=a.Z.evaluate(this.visProp.curvetype))||"polar"===x)for(this.transformations.length>0&&(this.updateTransformMatrix(),p=u.Z.inverse(this.transformMat),t=(n=u.Z.matVecMult(p,[1,t,e]))[1],e=n[2]),o=0,i=_;o<w;o++){if((S=(t-(h=this.X(i,!0)))*(t-h)*C+(e-(l=this.Y(i,!0)))*(e-l)*Z)<=b)return!0;i+=N}else if("plot"===x||"functiongraph"===x){for((!a.Z.exists(r)||r<0)&&(r=0),a.Z.exists(this.qdt)&&a.Z.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?f=(v=(g=this.qdt.query(new m.Z(s.Z.COORDS_BY_USER,[t,e],this.board))).points).length:(v=this.points,f=this.numberPoints-1),o=r;o<f;o++)if(3===this.bezierDegree?E=c.Z.projectCoordsToBeziersegment([1,t,e],this,o):g?(v[o].prev&&(E=c.Z.projectCoordsToSegment([1,t,e],v[o].prev.usrCoords,v[o].usrCoords)),v[o].next&&v[o+1]!==v[o].next&&(E=c.Z.projectCoordsToSegment([1,t,e],v[o].usrCoords,v[o].next.usrCoords))):E=c.Z.projectCoordsToSegment([1,t,e],v[o].usrCoords,v[o+1].usrCoords),E[1]>=0&&E[1]<=1&&(t-E[0][1])*(t-E[0][1])*C+(e-E[0][2])*(e-E[0][2])*Z<=b)return!0;return!1}return S<b},allocatePoints:function(){var t,e;if(e=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<e;t++)this.points[t]=new m.Z(s.Z.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&(this.isReal=g.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1),this},updateDataArray:function(){},updateCurve:function(){var t,e,r,i,n,o,u=this.visProp.plotversion,h=!1;if(this.updateTransformMatrix(),this.updateDataArray(),e=this.minX(),r=this.maxX(),a.Z.exists(this.dataX))for(this.numberPoints=this.dataX.length,t=this.numberPoints,this.allocatePoints(),o=0;o<t;o++)i=o,a.Z.exists(this.dataY)?(n=o,this.points[o].setCoordinates(s.Z.COORDS_BY_USER,[this.dataX[o],this.dataY[o]],!1)):(n=this.X(i),this.points[o].setCoordinates(s.Z.COORDS_BY_USER,[this.dataX[o],this.Y(n,h)],!1)),this.points[o]._t=o,h=!0;else if(a.Z.evaluate(this.visProp.doadvancedplot)?1===u||a.Z.evaluate(this.visProp.doadvancedplotold)?g.updateParametricCurveOld(this,e,r):2===u?g.updateParametricCurve_v2(this,e,r):3===u?g.updateParametricCurve_v3(this,e,r):4===u?g.updateParametricCurve_v4(this,e,r):g.updateParametricCurve_v2(this,e,r):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh):this.numberPoints=a.Z.evaluate(this.visProp.numberpointslow),this.allocatePoints(),g.updateParametricCurveNaive(this,e,r,this.numberPoints)),t=this.numberPoints,a.Z.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(o=0,this.qdt=new d(this.board.getBoundingBox());o<this.points.length;o++)this.qdt.insert(this.points[o]),o>0&&(this.points[o].prev=this.points[o-1]),o<t-1&&(this.points[o].next=this.points[o+1]);for("plot"!==a.Z.evaluate(this.visProp.curvetype)&&a.Z.evaluate(this.visProp.rdpsmoothing)&&(this.points=p.Z.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),t=this.numberPoints,o=0;o<t;o++)this.updateTransform(this.points[o]);return this},updateTransformMatrix:function(){var t,e,r=this.transformations.length;for(e=0,this.transformMat=[[1,0,0],[0,1,0],[0,0,1]];e<r;e++)(t=this.transformations[e]).update(),this.transformMat=u.Z.matMatMult(t.matrix,this.transformMat);return this},updateTransform:function(t){var e;return this.transformations.length>0&&(e=u.Z.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(s.Z.COORDS_BY_USER,e,!1,!0)),t},addTransform:function(t){var e,r=a.Z.isArray(t)?t:[t],i=r.length;for(e=0;e<i;e++)this.transformations.push(r[e]);return this},interpolationFunctionFromArray:function(t){var e="data"+t,r=this;return function(t,i){var n,o,s,u,h=r[e],l=h.length,c=[];if(isNaN(t))return NaN;if(t<0)return a.Z.isFunction(h[0])?h[0]():h[0];if(3===r.bezierDegree){if(t>=(l-1)/3)return a.Z.isFunction(h[h.length-1])?h[h.length-1]():h[h.length-1];for(o=0,n=3*Math.floor(t),u=1-(s=t%1);o<4;o++)a.Z.isFunction(h[n+o])?c[o]=h[n+o]():c[o]=h[n+o];return u*u*(u*c[0]+3*s*c[1])+(3*u*c[2]+s*c[3])*s*s}if((n=t>l-2?l-2:parseInt(Math.floor(t),10))===t)return a.Z.isFunction(h[n])?h[n]():h[n];for(o=0;o<2;o++)a.Z.isFunction(h[n+o])?c[o]=h[n+o]():c[o]=h[n+o];return c[0]+(c[1]-c[0])*(t-n)}},generateTerm:function(t,e,r,i,n){var o,s;a.Z.isArray(e)?(this.dataX=e,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot"):(this.X=a.Z.createFunction(e,this.board,t),a.Z.isString(e)?this.visProp.curvetype="functiongraph":(a.Z.isFunction(e)||a.Z.isNumber(e))&&(this.visProp.curvetype="parameter")),this.isDraggable=!0,a.Z.isArray(r)?(this.dataY=r,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=a.Z.createFunction(r,this.board,t),a.Z.isFunction(e)&&a.Z.isArray(r)&&(o=a.Z.createFunction(r[0],this.board,""),s=a.Z.createFunction(r[1],this.board,""),this.X=function(t){return e(t)*Math.cos(t)+o()},this.X.deps=o.deps,this.Y=function(t){return e(t)*Math.sin(t)+s()},this.Y.deps=s.deps,this.visProp.curvetype="polar"),a.Z.exists(i)?this.minX=a.Z.createFunction(i,this.board,""):delete this.minX,a.Z.exists(n)?this.maxX=a.Z.createFunction(n,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(t){var e,r,i,n=!1;for(e in i={xterm:1,yterm:1})if(i.hasOwnProperty(e)&&this.hasOwnProperty(e)&&this[e].origin)for(r in n=!0,this[e].origin.deps)this[e].origin.deps.hasOwnProperty(r)&&this[e].origin.deps[r].addChild(this);n||B.Z.findDependencies(this,t,this.board)},getLabelAnchor:function(){var t,e,r,i=.05*this.board.canvasWidth,n=.05*this.board.canvasHeight,o=.95*this.board.canvasWidth,u=.95*this.board.canvasHeight;switch(a.Z.evaluate(this.visProp.label.position)){case"ulft":e=i,r=n;break;case"llft":e=i,r=u;break;case"rt":e=o,r=.5*u;break;case"lrt":e=o,r=u;break;case"urt":e=o,r=n;break;case"top":e=.5*o,r=n;break;case"bot":e=.5*o,r=u;break;default:e=i,r=.5*u}return t=new m.Z(s.Z.COORDS_BY_SCREEN,[e,r],this.board,!1),c.Z.projectCoordsToCurve(t.usrCoords[1],t.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,e={id:this.id+"T"+this.numTraces,elementClass:s.Z.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return e.visProp.layer=this.board.options.layer.trace,e.visProp.curvetype=this.visProp.curvetype,this.numTraces++,a.Z.clearVisPropOld(e),e.visPropCalc={visible:a.Z.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},bounds:function(){var t,e,r,i=1/0,n=-1/0,o=1/0,s=-1/0,u=this.points.length;if(3===this.bezierDegree){for(t=0;t<u;t++)this.points[t].X=a.Z.bind(function(){return this.usrCoords[1]},this.points[t]),this.points[t].Y=a.Z.bind(function(){return this.usrCoords[2]},this.points[t]);return r=(e=p.Z.bezier(this.points))[3](),i=p.Z.fminbr(function(t){return e[0](t)},[0,r]),n=p.Z.fminbr(function(t){return-e[0](t)},[0,r]),o=p.Z.fminbr(function(t){return e[1](t)},[0,r]),s=p.Z.fminbr(function(t){return-e[1](t)},[0,r]),i=e[0](i),n=e[0](n),o=e[1](o),[i,s=e[1](s),n,o]}for(t=0;t<u;t++)i>this.points[t].usrCoords[1]&&(i=this.points[t].usrCoords[1]),n<this.points[t].usrCoords[1]&&(n=this.points[t].usrCoords[1]),o>this.points[t].usrCoords[2]&&(o=this.points[t].usrCoords[2]),s<this.points[t].usrCoords[2]&&(s=this.points[t].usrCoords[2]);return[i,s,n,o]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(t=this.parents),t},moveTo:function(t){var e,r=[];return this.points.length>0&&!a.Z.evaluate(this.visProp.fixed)&&(e=this.points[0],r=3===t.length?[t[0]-e.usrCoords[0],t[1]-e.usrCoords[1],t[2]-e.usrCoords[2]]:[t[0]-e.usrCoords[1],t[1]-e.usrCoords[2]],this.setPosition(s.Z.COORDS_BY_USER,r)),this},getTransformationSource:function(){var t,e;return a.Z.exists(this._transformationSource)&&(e=this._transformationSource).elementClass===s.Z.OBJECT_CLASS_CURVE&&(t=!0),[t,e]},pnpoly:function(t,e,r){var i,n,o,a,u,h,l=this.points,c=!1;for(r===s.Z.COORDS_BY_USER?(a=(h=new m.Z(s.Z.COORDS_BY_USER,[t,e],this.board)).scrCoords[1],u=h.scrCoords[2]):(a=t,u=e),i=0,n=(o=this.points.length)-2;i<o-1;n=i++)l[i].scrCoords[2]>u!=l[n].scrCoords[2]>u&&a<(l[n].scrCoords[1]-l[i].scrCoords[1])*(u-l[i].scrCoords[2])/(l[n].scrCoords[2]-l[i].scrCoords[2])+l[i].scrCoords[1]&&(c=!c);return c}}),n.Z.createCurve=function(t,e,r){var i,o,u=a.Z.copyAttributes(r,t.options,"curve");return(i=t.select(e[0],!0),a.Z.isTransformationOrArray(e[1])&&a.Z.isObject(i)&&(i.type===s.Z.OBJECT_TYPE_CURVE||i.type===s.Z.OBJECT_TYPE_ANGLE||i.type===s.Z.OBJECT_TYPE_ARC||i.type===s.Z.OBJECT_TYPE_CONIC||i.type===s.Z.OBJECT_TYPE_SECTOR))?(i.type===s.Z.OBJECT_TYPE_SECTOR?u=a.Z.copyAttributes(r,t.options,"sector"):i.type===s.Z.OBJECT_TYPE_ARC?u=a.Z.copyAttributes(r,t.options,"arc"):i.type===s.Z.OBJECT_TYPE_ANGLE?(a.Z.exists(r.withLabel)||(r.withLabel=!1),u=a.Z.copyAttributes(r,t.options,"angle")):u=a.Z.copyAttributes(r,t.options,"curve"),u=a.Z.copyAttributes(u,t.options,"curve"),(o=new n.Z.Curve(t,["x",[],[]],u)).updateDataArray=function(){var t,e=i.numberPoints;for(t=0,this.bezierDegree=i.bezierDegree,this.dataX=[],this.dataY=[];t<e;t++)this.dataX.push(i.points[t].usrCoords[1]),this.dataY.push(i.points[t].usrCoords[2]);return this},o.addTransform(e[1]),i.addChild(o),o.setParents([i]),o._transformationSource=i,o):(u=a.Z.copyAttributes(r,t.options,"curve"),new n.Z.Curve(t,["x"].concat(e),u))},n.Z.registerElement("curve",n.Z.createCurve),n.Z.createFunctiongraph=function(t,e,r){var i,o=["x","x"].concat(e);return i=a.Z.copyAttributes(r,t.options,"functiongraph"),(i=a.Z.copyAttributes(i,t.options,"curve")).curvetype="functiongraph",new n.Z.Curve(t,o,i)},n.Z.registerElement("functiongraph",n.Z.createFunctiongraph),n.Z.registerElement("plot",n.Z.createFunctiongraph),n.Z.createSpline=function(t,e,r){var i,o,s,u,h;return(r=a.Z.copyAttributes(r,t.options,"curve")).curvetype="functiongraph",u=[],h=[],o=[function(t,r){var i,n,o;if(!r){if(u=[],h=[],2===e.length&&a.Z.isArray(e[0])&&a.Z.isArray(e[1])&&e[0].length===e[1].length)for(i=0;i<e[0].length;i++)a.Z.isFunction(e[0][i])?u.push(e[0][i]()):u.push(e[0][i]),a.Z.isFunction(e[1][i])?h.push(e[1][i]()):h.push(e[1][i]);else for(i=0;i<e.length;i++)if(a.Z.isPoint(e[i]))u.push(e[i].X()),h.push(e[i].Y());else if(a.Z.isArray(e[i])&&2===e[i].length)for(n=0;n<e.length;n++)a.Z.isFunction(e[n][0])?u.push(e[n][0]()):u.push(e[n][0]),a.Z.isFunction(e[n][1])?h.push(e[n][1]()):h.push(e[n][1]);else a.Z.isFunction(e[i])&&2===e[i]().length&&(o=e[i](),u.push(o[0]),h.push(o[1]));s=p.Z.splineDef(u,h)}return p.Z.splineEval(t,u,h,s)},function(){return u[0]},function(){return u[u.length-1]}],(i=new n.Z.Curve(t,["x","x",o[0],o[1],o[2]],r)).setParents(e),i.elType="spline",i},n.Z.registerElement("spline",n.Z.createSpline),n.Z.createCardinalSpline=function(t,e,r){var i,o,s,h,l,c,d,f,m,v,g="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!a.Z.exists(e[0])||!a.Z.isArray(e[0]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+g);if(!a.Z.exists(e[1])||!a.Z.isNumber(e[1])&&!a.Z.isFunction(e[1]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+g);if(!a.Z.exists(e[2])||!a.Z.isString(e[2]))throw Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+g);if(r=a.Z.copyAttributes(r,t.options,"curve"),(r=a.Z.copyAttributes(r,t.options,"cardinalspline")).curvetype="parameter",c=e[0],d=[],!r.isarrayofcoordinates&&2===c.length&&a.Z.isArray(c[0])&&a.Z.isArray(c[1])&&c[0].length===c[1].length)for(f=0;f<c[0].length;f++)d[f]=[],a.Z.isFunction(c[0][f])?d[f].push(c[0][f]()):d[f].push(c[0][f]),a.Z.isFunction(c[1][f])?d[f].push(c[1][f]()):d[f].push(c[1][f]);else for(f=0;f<c.length;f++)a.Z.isString(c[f])?d.push(t.select(c[f])):a.Z.isPoint(c[f])?d.push(c[f]):a.Z.isArray(c[f])&&2===c[f].length?(d[f]=[],a.Z.isFunction(c[f][0])?d[f].push(c[f][0]()):d[f].push(c[f][0]),a.Z.isFunction(c[f][1])?d[f].push(c[f][1]()):d[f].push(c[f][1])):a.Z.isFunction(c[f])&&2===c[f]().length&&d.push(e[f]());if(!0===r.createpoints)s=a.Z.providePoints(t,d,r,"cardinalspline",["points"]);else for(f=0,s=[],o=function(t){return{X:function(){return d[t][0]},Y:function(){return d[t][1]},Dist:function(t){var e=this.X()-t.X(),r=this.Y()-t.Y();return u.Z.hypot(e,r)}}};f<d.length;f++)a.Z.isPoint(d[f])?s.push(d[f]):s.push(o(f));for(h=e[1],l=e[2],v=["x"].concat(p.Z.CardinalSpline(s,h,l)),i=new n.Z.Curve(t,v,r),m=s.length,i.setParents(s),f=0;f<m;f++)c=s[f],a.Z.isPoint(c)&&(a.Z.exists(c._is_new)?(i.addChild(c),delete c._is_new):c.addChild(i));return i.elType="cardinalspline",i},n.Z.registerElement("cardinalspline",n.Z.createCardinalSpline),n.Z.createMetapostSpline=function(t,e,r){var i,o,s,u,h,l,c,d,f="\nPossible parent types: [points:array, controls:object";if(!a.Z.exists(e[0])||!a.Z.isArray(e[0]))throw Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+f);if(!a.Z.exists(e[1])||!a.Z.isObject(e[1]))throw Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+f);if(r=a.Z.copyAttributes(r,t.options,"curve"),(r=a.Z.copyAttributes(r,t.options,"metapostspline")).curvetype="parameter",h=e[0],l=[],!r.isarrayofcoordinates&&2===h.length&&a.Z.isArray(h[0])&&a.Z.isArray(h[1])&&h[0].length===h[1].length)for(c=0;c<h[0].length;c++)l[c]=[],a.Z.isFunction(h[0][c])?l[c].push(h[0][c]()):l[c].push(h[0][c]),a.Z.isFunction(h[1][c])?l[c].push(h[1][c]()):l[c].push(h[1][c]);else for(c=0;c<h.length;c++)a.Z.isString(h[c])?l.push(t.select(h[c])):a.Z.isPoint(h[c])?l.push(h[c]):a.Z.isArray(h[c])&&2===h[c].length?(l[c]=[],a.Z.isFunction(h[c][0])?l[c].push(h[c][0]()):l[c].push(h[c][0]),a.Z.isFunction(h[c][1])?l[c].push(h[c][1]()):l[c].push(h[c][1])):a.Z.isFunction(h[c])&&2===h[c]().length&&l.push(e[c]());if(!0===r.createpoints)s=a.Z.providePoints(t,l,r,"metapostspline",["points"]);else for(c=0,s=[],o=function(t){return{X:function(){return l[t][0]},Y:function(){return l[t][1]}}};c<l.length;c++)a.Z.isPoint(l[c])?s.push(l[c]):s.push(o);for(u=e[1],(i=new n.Z.Curve(t,["t",[],[],0,h.length-1],r)).updateDataArray=function(){var t,e,r=s.length,i=[];for(e=0;e<r;e++)i.push([s[e].X(),s[e].Y()]);t=n.Z.Math.Metapost.curve(i,u),this.dataX=t[0],this.dataY=t[1]},i.bezierDegree=3,d=s.length,i.setParents(s),c=0;c<d;c++)a.Z.isPoint(s[c])&&s[c].addChild(i);return i.elType="metapostspline",i},n.Z.registerElement("metapostspline",n.Z.createMetapostSpline),n.Z.createRiemannsum=function(t,e,r){var i,n,o,s,u,h;if((h=a.Z.copyAttributes(r,t.options,"riemannsum")).curvetype="plot",o=e[0],i=a.Z.createFunction(e[1],t,""),!a.Z.exists(i))throw Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(n=a.Z.createFunction(e[2],t,""),!a.Z.exists(n))throw Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return s=[[0],[0]].concat(e.slice(3)),(u=t.create("curve",s,h)).sum=0,u.Value=function(){return this.sum},u.updateDataArray=function(){var t=p.Z.riemann(o,i(),n(),this.minX(),this.maxX());this.dataX=t[0],this.dataY=t[1],this.sum=t[2]},u.addParentsFromJCFunctions([i,n]),u},n.Z.registerElement("riemannsum",n.Z.createRiemannsum),n.Z.createTracecurve=function(t,e,r){var i,n,o,u;if(2!==e.length)throw Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(n=t.select(e[0]),o=t.select(e[1]),n.type!==s.Z.OBJECT_TYPE_GLIDER||!a.Z.isPoint(o))throw Error("JSXGraph: Can't create trace curve with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider, point]");return(u=a.Z.copyAttributes(r,t.options,"tracecurve")).curvetype="plot",(i=t.create("curve",[[0],[0]],u)).updateDataArray=function(){var t,e,r,i,a,h,l,c,d,f=u.numberpoints,p=n.position,m=n.slideObject,v=m.minX();for(e=(m.maxX()-v)/f,this.dataX=[],this.dataY=[],m.elementClass!==s.Z.OBJECT_CLASS_CURVE&&f++,t=0;t<f;t++){for(i in r=v+t*e,h=m.X(r)/m.Z(r),l=m.Y(r)/m.Z(r),n.setPositionDirectly(s.Z.COORDS_BY_USER,[h,l]),c=!1,this.board.objects)if(this.board.objects.hasOwnProperty(i)&&((a=this.board.objects[i])===n&&(c=!0),c&&a.needsRegularUpdate&&(d=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=d,a===o)))break;this.dataX[t]=o.X(),this.dataY[t]=o.Y()}for(i in n.position=p,c=!1,this.board.objects)if(this.board.objects.hasOwnProperty(i)&&((a=this.board.objects[i])===n&&(c=!0),c&&a.needsRegularUpdate&&(d=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=d,a===o)))break},i},n.Z.registerElement("tracecurve",n.Z.createTracecurve),n.Z.createStepfunction=function(t,e,r){var i,n;if(2!==e.length)throw Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return n=a.Z.copyAttributes(r,t.options,"stepfunction"),(i=t.create("curve",e,n)).updateDataArray=function(){var t,e=0,r=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==r)for(this.dataX[e]=this.xterm[0],this.dataY[e]=this.yterm[0],++e,t=1;t<r;++t)this.dataX[e]=this.xterm[t],this.dataY[e]=this.dataY[e-1],++e,this.dataX[e]=this.xterm[t],this.dataY[e]=this.yterm[t],++e},i},n.Z.registerElement("stepfunction",n.Z.createStepfunction),n.Z.createDerivative=function(t,e,r){var i,n,o,u,h;if(1!==e.length&&e[0].class!==s.Z.OBJECT_CLASS_CURVE)throw Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return h=a.Z.copyAttributes(r,t.options,"curve"),n=e[0],o=p.Z.D(n.X),u=p.Z.D(n.Y),(i=t.create("curve",[function(t){return n.X(t)},function(t){return u(t)/o(t)},n.minX(),n.maxX()],h)).setParents(n),i},n.Z.registerElement("derivative",n.Z.createDerivative),n.Z.createCurveIntersection=function(t,e,r){var i;if(2!==e.length)throw Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return(i=t.create("curve",[[],[]],r)).updateDataArray=function(){var t=n.Z.Math.Clip.intersection(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},i},n.Z.createCurveUnion=function(t,e,r){var i;if(2!==e.length)throw Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return(i=t.create("curve",[[],[]],r)).updateDataArray=function(){var t=n.Z.Math.Clip.union(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},i},n.Z.createCurveDifference=function(t,e,r){var i;if(2!==e.length)throw Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return(i=t.create("curve",[[],[]],r)).updateDataArray=function(){var t=n.Z.Math.Clip.difference(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},i},n.Z.registerElement("curvedifference",n.Z.createCurveDifference),n.Z.registerElement("curveintersection",n.Z.createCurveIntersection),n.Z.registerElement("curveunion",n.Z.createCurveUnion),n.Z.createBoxPlot=function(t,e,r){var i,n,o,s=a.Z.copyAttributes(r,t.options,"boxplot");if(3!==e.length)throw Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(e[0].length<5)throw Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to contain at least 5 quantiles.");for(n=0,i=t.create("curve",[[],[]],s),o=e[0].length,i.Q=[];n<o;n++)i.Q[n]=a.Z.createFunction(e[0][n],t);return i.x=a.Z.createFunction(e[1],t),i.w=a.Z.createFunction(e[2],t),i.updateDataArray=function(){var t,e,r,i,n,o,s,u,h;s=a.Z.evaluate(this.visProp.smallwidth),u=a.Z.evaluate(this.visProp.dir),r=(h=this.x())-.5*this.w(),i=h-.5*this.w()*s,n=h+.5*this.w(),o=h+.5*this.w()*s,t=[h,i,o,h,h,r,r,n,n,h,NaN,r,n,NaN,h,h,i,o,h],e=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===u?(this.dataX=t,this.dataY=e):(this.dataX=e,this.dataY=t)},i.addParentsFromJCFunctions([i.Q,i.x,i.w]),i},n.Z.registerElement("boxplot",n.Z.createBoxPlot),n.Z.createImplicitCurve=function(t,e,r){var i,o;if(1!==e.length&&3!==e.length)throw Error("JSXGraph: Can't create curve implicitCurve with given parent'\nPossible parent types: [f] or [f, dfx, dfy]\nwith functions f, dfx, dfy");return o=a.Z.copyAttributes(r,t.options,"implicitcurve"),(i=t.create("curve",[[],[]],o)).f=a.Z.createFunction(e[0],t,"x, y"),i.dfx=a.Z.createFunction(e[1],t,"x, y"),i.dfy=a.Z.createFunction(e[2],t,"x, y"),i.updateDataArray=function(){var t,e,r=this.board.getBoundingBox(),i=[],o=a.Z.evaluate(this.visProp.margin);r[0]-=o,r[1]+=o,r[2]+=o,r[3]-=o,e={resolution_out:Math.max(.01,a.Z.evaluate(this.visProp.resolution_outer)),resolution_in:Math.max(.01,a.Z.evaluate(this.visProp.resolution_inner)),max_steps:a.Z.evaluate(this.visProp.max_steps),alpha_0:a.Z.evaluate(this.visProp.alpha_0),tol_u0:a.Z.evaluate(this.visProp.tol_u0),tol_newton:a.Z.evaluate(this.visProp.tol_newton),tol_cusp:a.Z.evaluate(this.visProp.tol_cusp),tol_progress:a.Z.evaluate(this.visProp.tol_progress),qdt_box:a.Z.evaluate(this.visProp.qdt_box),kappa_0:a.Z.evaluate(this.visProp.kappa_0),delta_0:a.Z.evaluate(this.visProp.delta_0),h_initial:a.Z.evaluate(this.visProp.h_initial),h_critical:a.Z.evaluate(this.visProp.h_critical),h_max:a.Z.evaluate(this.visProp.h_max),loop_dist:a.Z.evaluate(this.visProp.loop_dist),loop_dir:a.Z.evaluate(this.visProp.loop_dir),loop_detection:a.Z.evaluate(this.visProp.loop_detection),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],t=new n.Z.Math.ImplicitPlot(r,e,this.f,this.dfx,this.dfy),this.qdt=t.qdt,i=t.plot(),this.dataX=i[0],this.dataY=i[1]},i.elType="implicitcurve",i},n.Z.registerElement("implicitcurve",n.Z.createImplicitCurve),n.Z.Curve,n.Z.createArc=function(t,e,r){var i,o,h;if(!1===(h=a.Z.providePoints(t,e,r,"arc",["center","radiuspoint","anglepoint"]))||h.length<3)throw Error("JSXGraph: Can't create Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return o=a.Z.copyAttributes(r,t.options,"arc"),(i=t.create("curve",[[0],[0]],o)).elType="arc",i.setParents(h),i.type=s.Z.OBJECT_TYPE_ARC,i.center=h[0],i.radiuspoint=h[1],i.point2=i.radiuspoint,i.anglepoint=h[2],i.point3=i.anglepoint,a.Z.exists(i.center._is_new)?(i.addChild(i.center),delete i.center._is_new):i.center.addChild(i),a.Z.exists(i.radiuspoint._is_new)?(i.addChild(i.radiuspoint),delete i.radiuspoint._is_new):i.radiuspoint.addChild(i),a.Z.exists(i.anglepoint._is_new)?(i.addChild(i.anglepoint),delete i.anglepoint._is_new):i.anglepoint.addChild(i),i.useDirection=o.usedirection,i.updateDataArray=function(){var t,e,r,i,n,o=1,s=this.radiuspoint,u=this.center,l=this.anglepoint,d=a.Z.evaluate(this.visProp.selection);e=c.Z.rad(s,u,l),("minor"===d&&e>Math.PI||"major"===d&&e<Math.PI)&&(o=-1),this.useDirection&&(r=h[1].coords.usrCoords,i=h[3].coords.usrCoords,n=h[2].coords.usrCoords,(r[1]-n[1])*(r[2]-i[2])-(r[2]-n[2])*(r[1]-i[1])<0?(this.radiuspoint=h[1],this.anglepoint=h[2]):(this.radiuspoint=h[2],this.anglepoint=h[1])),s=s.coords.usrCoords,u=u.coords.usrCoords,l=l.coords.usrCoords,t=c.Z.bezierArc(s,u,l,!1,o),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},i.Radius=function(){return this.radiuspoint.Dist(this.center)},i.getRadius=function(){return n.Z.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},i.Value=function(t,e){var r;return e=e||c.Z.rad(this.radiuspoint,this.center,this.anglepoint),""===(t=(t=t||"length").toLocaleLowerCase())||0===t.indexOf("len")?r=e*this.Radius():0===t.indexOf("rad")?r=e:0===t.indexOf("deg")?r=180*e/Math.PI:0===t.indexOf("sem")?r=e/Math.PI:0===t.indexOf("cir")&&(r=.5*e/Math.PI),r},i.L=function(){return this.Value("length")},i.hasPoint=function(t,e){var r,i,n,o,h,l,d=this.Radius();return a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(l=this.board._inputDevice,h=a.Z.evaluate(this.visProp.precision[l])):h=this.board.options.precision.hasPoint,h/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),r=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),n=u.Z.inverse(this.transformMat),o=u.Z.matVecMult(n,r.usrCoords),r=new m.Z(s.Z.COORDS_BY_USER,o,this.board)),(i=Math.abs(this.center.coords.distance(s.Z.COORDS_BY_USER,r)-d)<h)&&(i=c.Z.coordsOnArc(this,r)),i)},i.hasPointSector=function(t,e){var r=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board),i=this.Radius(),n=this.center.coords.distance(s.Z.COORDS_BY_USER,r)<i;return n&&(n=c.Z.coordsOnArc(this,r)),n},i.getTextAnchor=function(){return this.center.coords},i.getLabelAnchor=function(){var t,e,r,i,n,o=c.Z.rad(this.radiuspoint,this.center,this.anglepoint),h=10/this.board.unitX,l=10/this.board.unitY,d=this.point2.coords.usrCoords,f=this.center.coords.usrCoords,p=d[1]-f[1],v=d[2]-f[2],g=a.Z.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&o>Math.PI||"major"===g&&o<Math.PI)&&(o=-(2*Math.PI-o)),r=(t=new m.Z(s.Z.COORDS_BY_USER,[f[1]+Math.cos(.5*o)*p-Math.sin(.5*o)*v,f[2]+Math.sin(.5*o)*p+Math.cos(.5*o)*v],this.board)).usrCoords[1]-f[1],i=t.usrCoords[2]-f[2],n=u.Z.hypot(r,i),r=r*(n+h)/n,i=i*(n+l)/n,e=[f[1]+r,f[2]+i],b.position=c.Z.calcLabelQuadrant(c.Z.rad([1,0],[0,0],e)),new m.Z(s.Z.COORDS_BY_USER,e,this.board)},i.updateQuadraticform=G.prototype.updateQuadraticform,i.updateStdform=G.prototype.updateStdform,i.methodMap=n.Z.deepCopy(i.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),i.prepareUpdate().update(),i},n.Z.registerElement("arc",n.Z.createArc),n.Z.createSemicircle=function(t,e,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(t,e,r,"point"))||2!==s.length)throw Error("JSXGraph: Can't create Semicircle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point]");return o=a.Z.copyAttributes(r,t.options,"semicircle","center"),(n=t.create("midpoint",s,o)).dump=!1,o=a.Z.copyAttributes(r,t.options,"semicircle"),(i=t.create("arc",[n,s[1],s[0]],o)).elType="semicircle",i.setParents([s[0].id,s[1].id]),i.subs={midpoint:n},i.inherits.push(n),i.midpoint=i.center=n,i},n.Z.registerElement("semicircle",n.Z.createSemicircle),n.Z.createCircumcircleArc=function(t,e,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(t,e,r,"point"))||3!==s.length)throw Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return o=a.Z.copyAttributes(r,t.options,"circumcirclearc","center"),(n=t.create("circumcenter",s,o)).dump=!1,(o=a.Z.copyAttributes(r,t.options,"circumcirclearc")).usedirection=!0,(i=t.create("arc",[n,s[0],s[2],s[1]],o)).elType="circumcirclearc",i.setParents([s[0].id,s[1].id,s[2].id]),i.subs={center:n},i.inherits.push(n),i.center=n,i},n.Z.registerElement("circumcirclearc",n.Z.createCircumcircleArc),n.Z.createMinorArc=function(t,e,r){return r.selection="minor",n.Z.createArc(t,e,r)},n.Z.registerElement("minorarc",n.Z.createMinorArc),n.Z.createMajorArc=function(t,e,r){return r.selection="major",n.Z.createArc(t,e,r)},n.Z.registerElement("majorarc",n.Z.createMajorArc),n.Z.createSector=function(t,e,r){var i,o,h,l,d,f,p="invalid";if(e[0].elementClass===s.Z.OBJECT_CLASS_LINE&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(e[2])||a.Z.isNumber(e[2]))&&(a.Z.isArray(e[3])||a.Z.isNumber(e[3]))&&(a.Z.isNumber(e[4])||a.Z.isFunction(e[4])||a.Z.isString(e[4])))p="2lines";else{if(!1===(f=a.Z.providePoints(t,e,r,"sector",["center","radiusPoint","anglePoint"])))throw Error("JSXGraph: Can't create Sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");p="3points"}if(o=a.Z.copyAttributes(r,t.options,"sector"),(i=t.create("curve",[[0],[0]],o)).type=s.Z.OBJECT_TYPE_SECTOR,i.elType="sector",i.autoRadius=function(){var t=20/i.board.unitX,e=1/0,r=50/i.board.unitX;return a.Z.isPoint(i.center)&&(e=.3333*i.center.Dist(i.point2)),Math.max(t,Math.min(e,r))},"2lines"===p)i.Radius=function(){var t=a.Z.evaluate(e[4]);return"auto"===t?this.autoRadius():t},i.line1=t.select(e[0]),i.line2=t.select(e[1]),i.line1.addChild(i),i.line2.addChild(i),i.setParents(e),i.point1={visProp:{}},i.point2={visProp:{}},i.point3={visProp:{}},l=c.Z.meetLineLine(i.line1.stdform,i.line2.stdform,0,t),a.Z.isArray(e[2])?(2===e[2].length&&(e[2]=[1].concat(e[2])),d=c.Z.projectPointToLine({coords:{usrCoords:e[2]}},i.line1,t),d=v.Z.subtract(d.usrCoords,l.usrCoords),i.direction1=u.Z.innerProduct(d,[0,i.line1.stdform[2],-i.line1.stdform[1]],3)>=0?1:-1):i.direction1=e[2]>=0?1:-1,a.Z.isArray(e[3])?(2===e[3].length&&(e[3]=[1].concat(e[3])),d=c.Z.projectPointToLine({coords:{usrCoords:e[3]}},i.line2,t),d=v.Z.subtract(d.usrCoords,l.usrCoords),i.direction2=u.Z.innerProduct(d,[0,i.line2.stdform[2],-i.line2.stdform[1]],3)>=0?1:-1):i.direction2=e[3]>=0?1:-1,i.updateDataArray=function(){var t,e,r,n,o=[0,0,0],a=[0,0,0],h=[0,0,0];if(e=this.line1,r=this.line2,Math.abs((a=u.Z.crossProduct(e.stdform,r.stdform))[0])>u.Z.eps*u.Z.eps&&(a[1]/=a[0],a[2]/=a[0],a[0]/=a[0]),t=this.direction1*this.Radius(),o=v.Z.add(a,[0,t*e.stdform[2],-t*e.stdform[1]]),t=this.direction2*this.Radius(),h=v.Z.add(a,[0,t*r.stdform[2],-t*r.stdform[1]]),this.point2.coords=new m.Z(s.Z.COORDS_BY_USER,o,i.board),this.point1.coords=new m.Z(s.Z.COORDS_BY_USER,a,i.board),this.point3.coords=new m.Z(s.Z.COORDS_BY_USER,h,i.board),Math.abs(o[0])<u.Z.eps||Math.abs(a[0])<u.Z.eps||Math.abs(h[0])<u.Z.eps){this.dataX=[NaN],this.dataY=[NaN];return}n=c.Z.bezierArc(o,a,h,!0,1),this.dataX=n[0],this.dataY=n[1],this.bezierDegree=3};else if("3points"===p){for(h=0,i.point1=f[0],i.point2=f[1],i.point3=f[2];h<3;h++)a.Z.exists(f[h]._is_new)?(i.addChild(f[h]),delete f[h]._is_new):f[h].addChild(i);i.useDirection=r.usedirection,i.setParents(f),a.Z.exists(f[3])&&(i.point4=f[3],i.point4.addChild(i)),i.methodMap=n.Z.deepCopy(i.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),i.updateDataArray=function(){var t,e,r,i,n,o=this.point2,s=this.point1,u=this.point3,h=1,l=a.Z.evaluate(this.visProp.selection);if(!o.isReal||!s.isReal||!u.isReal){this.dataX=[NaN],this.dataY=[NaN];return}n=c.Z.rad(o,s,u),("minor"===l&&n>Math.PI||"major"===l&&n<Math.PI)&&(h=-1),this.useDirection&&a.Z.exists(this.point4)&&(e=this.point2.coords.usrCoords,r=this.point4.coords.usrCoords,i=this.point3.coords.usrCoords,(e[1]-i[1])*(e[2]-r[2])-(e[2]-i[2])*(e[1]-r[1])>=0&&(u=this.point2,o=this.point3)),o=o.coords.usrCoords,s=s.coords.usrCoords,u=u.coords.usrCoords,t=c.Z.bezierArc(o,s,u,!0,h),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},i.Radius=function(){return this.point2.Dist(this.point1)}}return i.center=i.point1,i.radiuspoint=i.point2,i.anglepoint=i.point3,o=a.Z.copyAttributes(r,t.options,"arc"),(o=a.Z.copyAttributes(o,t.options,"sector","arc")).withLabel=!1,o.name+="_arc","2lines"===p?(i.updateDataArray(),i.arc=t.create("arc",[function(){return i.point1.coords.usrCoords},function(){var t=i.point2.coords.distance(s.Z.COORDS_BY_USER,i.point1.coords);return 0===t?[i.point1.coords.usrCoords[1],i.point1.coords.usrCoords[2]]:[i.point1.coords.usrCoords[1]+i.Radius()*(i.point2.coords.usrCoords[1]-i.point1.coords.usrCoords[1])/t,i.point1.coords.usrCoords[2]+i.Radius()*(i.point2.coords.usrCoords[2]-i.point1.coords.usrCoords[2])/t]},function(){return i.point3.coords.usrCoords}],o)):i.arc=t.create("arc",[i.point1,function(){var t=i.point2.Dist(i.point1);return 0===t?[i.point1.X(),i.point1.Y()]:[i.point1.X()+i.Radius()*(i.point2.X()-i.point1.X())/t,i.point1.Y()+i.Radius()*(i.point2.Y()-i.point1.Y())/t]},i.point3],o),i.addChild(i.arc),i.hasPointCurve=function(t,e){var r,i,n,o,u,h,l=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board),d=this.Radius(),f=this.center.coords.distance(s.Z.COORDS_BY_USER,l),p=a.Z.evaluate(this.visProp.selection);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(u=this.board._inputDevice,o=a.Z.evaluate(this.visProp.precision[u])):o=this.board.options.precision.hasPoint,o/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(h=Math.abs(f-d)<o)&&(r=c.Z.rad(this.point2,this.center,l.usrCoords.slice(1)),i=0,n=c.Z.rad(this.point2,this.center,this.point3),("minor"===p&&n>Math.PI||"major"===p&&n<Math.PI)&&(i=n,n=2*Math.PI),(r<i||r>n)&&(h=!1)),h},i.hasPointSector=function(t,e){var r,i,n,o=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board),u=this.Radius(),h=this.point1.coords.distance(s.Z.COORDS_BY_USER,o)<u,l=a.Z.evaluate(this.visProp.selection);return h&&(r=c.Z.rad(this.radiuspoint,this.center,o.usrCoords.slice(1)),i=0,n=c.Z.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===l&&n>Math.PI||"major"===l&&n<Math.PI)&&(i=n,n=2*Math.PI),(r<i||r>n)&&(h=!1)),h},i.hasPoint=function(t,e){return a.Z.evaluate(this.visProp.highlightonsector)||a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):this.hasPointCurve(t,e)},i.getTextAnchor=function(){return this.point1.coords},i.getLabelAnchor=function(){var t,e,r,i,n,o=c.Z.rad(this.point2,this.point1,this.point3),h=13/this.board.unitX,l=13/this.board.unitY,d=this.point2.coords.usrCoords,f=this.point1.coords.usrCoords,p=d[1]-f[1],v=d[2]-f[2],g=a.Z.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&o>Math.PI||"major"===g&&o<Math.PI)&&(o=-(2*Math.PI-o)),r=(t=new m.Z(s.Z.COORDS_BY_USER,[f[1]+Math.cos(.5*o)*p-Math.sin(.5*o)*v,f[2]+Math.sin(.5*o)*p+Math.cos(.5*o)*v],this.board)).usrCoords[1]-f[1],i=t.usrCoords[2]-f[2],n=u.Z.hypot(r,i),r=r*(n+h)/n,i=i*(n+l)/n,e=[f[1]+r,f[2]+i],b.position=c.Z.calcLabelQuadrant(c.Z.rad([1,0],[0,0],e)),new m.Z(s.Z.COORDS_BY_USER,e,this.board)},i.setRadius=function(t){var e=a.Z.evaluate(t);"undefined"!=("auto"===t||"auto"===e?"auto":a.Z.isNumber(t)?"number":a.Z.isFunction(t)&&!a.Z.isString(e)?"function":"undefined")&&(this.visProp.radius=t),i.Radius=function(){var e=a.Z.evaluate(t);return"auto"===e?this.autoRadius():e}},i.getRadius=function(){return n.Z.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},i.Value=function(t){return this.arc.Value(t)},i.L=function(){return this.arc.L()},i.Area=function(){var t=this.Radius();return .5*t*t*this.Value("radians")},i.Perimeter=function(){return this.L()+2*this.Radius()},"3points"===p&&(i.setPositionDirectly=function(t,e,r){var n,o=new m.Z(t,e,this.board),s=new m.Z(t,r,this.board);return i.point1.draggable()&&i.point2.draggable()&&i.point3.draggable()&&(n=v.Z.subtract(o.usrCoords,s.usrCoords),this.board.create("transform",n.slice(1),{type:"translate"}).applyOnce([i.point1,i.point2,i.point3])),this}),i.methodMap=n.Z.deepCopy(i.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),i},n.Z.registerElement("sector",n.Z.createSector),n.Z.createCircumcircleSector=function(t,e,r){var i,n,o,s;if(!1===(s=a.Z.providePoints(t,e,r,"point")))throw Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");return(n=t.create("circumcenter",s.slice(0,3),o)).dump=!1,o=a.Z.copyAttributes(r,t.options,"circumcirclesector"),(i=t.create("sector",[n,s[0],s[2],s[1]],o)).elType="circumcirclesector",i.setParents(s),i.center=n,i.subs={center:n},i},n.Z.registerElement("circumcirclesector",n.Z.createCircumcircleSector),n.Z.createMinorSector=function(t,e,r){return r.selection="minor",n.Z.createSector(t,e,r)},n.Z.registerElement("minorsector",n.Z.createMinorSector),n.Z.createMajorSector=function(t,e,r){return r.selection="major",n.Z.createSector(t,e,r)},n.Z.registerElement("majorsector",n.Z.createMajorSector),n.Z.createAngle=function(t,e,r){var i,n,o,h,l,d,f="invalid";if(e[0].elementClass===s.Z.OBJECT_CLASS_LINE&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(e[2])||a.Z.isNumber(e[2]))&&(a.Z.isArray(e[3])||a.Z.isNumber(e[3])))f="2lines";else{if(o={name:""},!1===(d=a.Z.providePoints(t,e,o,"point")))throw Error("JSXGraph: Can't create angle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");f="3points"}if(o=a.Z.copyAttributes(r,t.options,"angle"),a.Z.exists(o.name)&&""!==o.name||(o.name=t.generateName({type:s.Z.OBJECT_TYPE_ANGLE})),n=a.Z.exists(o.radius)?o.radius:0,t.suspendUpdate(),"2lines"===f?(e.push(n),(i=t.create("sector",e,o)).updateDataArraySector=i.updateDataArray,i.setAngle=function(t){},i.free=function(t){}):((i=t.create("sector",[d[1],d[0],d[2]],o)).arc.visProp.priv=!0,i.point=i.point2=i.radiuspoint=d[0],i.pointsquare=i.point3=i.anglepoint=d[2],i.Radius=function(){var t=a.Z.evaluate(n);return"auto"===t?i.autoRadius():t},i.updateDataArraySector=function(){var t,e,r=this.point2,i=this.point1,n=this.point3,o=this.Radius(),s=i.Dist(r),u=1,h=a.Z.evaluate(this.visProp.selection);e=c.Z.rad(r,i,n),("minor"===h&&e>Math.PI||"major"===h&&e<Math.PI)&&(u=-1),r=r.coords.usrCoords,i=i.coords.usrCoords,n=n.coords.usrCoords,r=[1,i[1]+(r[1]-i[1])*o/s,i[2]+(r[2]-i[2])*o/s],n=[1,i[1]+(n[1]-i[1])*o/s,i[2]+(n[2]-i[2])*o/s],t=c.Z.bezierArc(r,i,n,!0,u),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},i.setAngle=function(t){var e,r,i,n=this.anglepoint,o=this.radiuspoint;return n.draggable()&&(e=this.board.create("transform",[t,this.center],{type:"rotate"}),n.addTransform(o,e),e.update(),n.moveTo(u.Z.matVecMult(e.matrix,o.coords.usrCoords)),i=a.Z.isFunction(t)?function(){return 2*Math.PI-t()}:function(){return 2*Math.PI-t},r=this.board.create("transform",[i,this.center],{type:"rotate"}),n.coords.on("update",function(){r.update(),o.moveTo(u.Z.matVecMult(r.matrix,n.coords.usrCoords))}),n.setParents(o)),this},i.free=function(){var t=this.anglepoint;return t.transformations.length>0&&(t.transformations.pop(),t.isDraggable=!0,t.parents=[],t.coords.off("update")),this},i.setParents(d)),a.Z.exists(i.visProp.text)&&i.label.setText(a.Z.evaluate(i.visProp.text)),i.elType="angle",i.type=s.Z.OBJECT_TYPE_ANGLE,i.subs={},i.updateDataArraySquare=function(){var t,e,r,i,n,o,s,a,h=this.Radius();"2lines"===f&&this.updateDataArraySector(),t=this.point2,e=this.point1,r=this.point3,t=t.coords.usrCoords,e=e.coords.usrCoords,r=r.coords.usrCoords,i=c.Z.distance(t,e,3),n=c.Z.distance(r,e,3),t=[1,e[1]+(t[1]-e[1])*h/i,e[2]+(t[2]-e[2])*h/i],r=[1,e[1]+(r[1]-e[1])*h/n,e[2]+(r[2]-e[2])*h/n],o=u.Z.crossProduct(r,e),s=[-t[1]*o[1]-t[2]*o[2],t[0]*o[1],t[0]*o[2]],o=u.Z.crossProduct(t,e),a=[-r[1]*o[1]-r[2]*o[2],r[0]*o[1],r[0]*o[2]],o=u.Z.crossProduct(s,a),o[1]/=o[0],o[2]/=o[0],this.dataX=[e[1],t[1],o[1],r[1],e[1]],this.dataY=[e[2],t[2],o[2],r[2],e[2]],this.bezierDegree=1},i.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},i.updateDataArray=function(){var t=a.Z.evaluate(this.visProp.type),e=c.Z.trueAngle(this.point2,this.point1,this.point3),r=a.Z.evaluate(this.visProp.selection);("minor"===r&&e>180||"major"===r&&e<180)&&(e=360-e),Math.abs(e-90)<a.Z.evaluate(this.visProp.orthosensitivity)+u.Z.eps&&(t=a.Z.evaluate(this.visProp.orthotype)),"none"===t?this.updateDataArrayNone():"square"===t?this.updateDataArraySquare():"sector"===t?this.updateDataArraySector():"sectordot"!==t||(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==t&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},h=a.Z.copyAttributes(r,t.options,"angle","dot"),i.dot=t.create("point",[function(){var t,e,r,n,o,s,h,l,d;return a.Z.exists(i.dot)&&!i.dot.visProp.visible?[0,0]:(t=i.point2.coords.usrCoords,e=i.point1.coords.usrCoords,r=i.Radius(),n=c.Z.distance(t,e,3),o=c.Z.rad(i.point2,i.point1,i.point3),("minor"===(d=a.Z.evaluate(i.visProp.selection))&&o>Math.PI||"major"===d&&o<Math.PI)&&(o=-(2*Math.PI-o)),o*=.5,s=Math.cos(o),h=Math.sin(o),t=[1,e[1]+(t[1]-e[1])*r/n,e[2]+(t[2]-e[2])*r/n],l=[[1,0,0],[e[1]-.5*e[1]*s+.5*e[2]*h,.5*s,-(.5*h)],[e[2]-.5*e[1]*h-.5*e[2]*s,.5*h,.5*s]],u.Z.matVecMult(l,t))}],h),i.dot.dump=!1,i.subs.dot=i.dot,"2lines"===f)for(l=0;l<2;l++)t.select(e[l]).addChild(i.dot);else for(l=0;l<3;l++)t.select(d[l]).addChild(i.dot);return t.unsuspendUpdate(),i.Value=function(t){return""===(t=t||"radians")&&(t="radians"),i.arc.Value(t)},i.getLabelAnchor=function(){var t,e,r,n,o,h,l,d,f,p=12,v=a.Z.evaluate(i.visProp.selection),g=this.label?this.label.visProp:this.visProp.label;return a.Z.exists(this.label)&&a.Z.exists(this.label.visProp.fontsize)&&(p=a.Z.evaluate(this.label.visProp.fontsize)),p/=this.board.unitX,e=i.point2.coords.usrCoords,r=i.point1.coords.usrCoords,n=i.Radius(),o=c.Z.distance(e,r,3),h=c.Z.rad(i.point2,i.point1,i.point3),("minor"===v&&h>Math.PI||"major"===v&&h<Math.PI)&&(h=-(2*Math.PI-h)),h*=.5,l=Math.cos(h),d=Math.sin(h),e=[1,r[1]+(e[1]-r[1])*n/o,r[2]+(e[2]-r[2])*n/o],f=[[1,0,0],[r[1]-.5*r[1]*l+.5*r[2]*d,.5*l,-(.5*d)],[r[2]-.5*r[1]*d-.5*r[2]*l,.5*d,.5*l]],t=u.Z.matVecMult(f,e),t[1]/=t[0],t[2]/=t[0],t[0]/=t[0],o=c.Z.distance(t,r,3),t=[t[0],r[1]+(t[1]-r[1])*(n+p)/o,r[2]+(t[2]-r[2])*(n+p)/o],g.position=c.Z.calcLabelQuadrant(c.Z.rad([1,0],[0,0],t)),new m.Z(s.Z.COORDS_BY_USER,t,this.board)},i.methodMap=a.Z.deepCopy(i.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),i},n.Z.registerElement("angle",n.Z.createAngle),n.Z.createNonreflexAngle=function(t,e,r){var i;return r.selection="minor",r=a.Z.copyAttributes(r,t.options,"nonreflexangle"),(i=n.Z.createAngle(t,e,r)).Value=function(t){var e=c.Z.rad(this.point2,this.point1,this.point3);return""===(t=t||"radians")&&(t="radians"),e=e<Math.PI?e:2*Math.PI-e,this.arc.Value(t,e)},i},n.Z.registerElement("nonreflexangle",n.Z.createNonreflexAngle),n.Z.createReflexAngle=function(t,e,r){var i;return r.selection="major",r=a.Z.copyAttributes(r,t.options,"reflexangle"),(i=n.Z.createAngle(t,e,r)).Value=function(t){var e=c.Z.rad(this.point2,this.point1,this.point3);return""===(t=t||"radians")&&(t="radians"),e=e>=Math.PI?e:2*Math.PI-e,this.arc.Value(t,e)},i},n.Z.registerElement("reflexangle",n.Z.createReflexAngle);var V=r(2697);n.Z.createOrthogonalProjection=function(t,e,r){var i,n,o,u;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[0]],r,"point")[0],i=e[1];else if(a.Z.isPointType(t,e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[1]],r,"point")[0],i=e[0];else throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");return u=a.Z.copyAttributes(r,t.options,"orthogonalprojection"),o=t.create("point",[function(){return c.Z.projectPointToLine(n,i,t)}],u),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),i.addChild(o),o.elType="orthogonalprojection",o.setParents([n.id,o.id]),o.update(),o.generatePolynomial=function(){var t=i.point1.symbolic.x,e=i.point1.symbolic.y,r=i.point2.symbolic.x,s=i.point2.symbolic.y,a=n.symbolic.x,u=n.symbolic.y,h=o.symbolic.x,l=o.symbolic.y;return["("+e+")*("+h+")-("+e+")*("+r+")+("+l+")*("+r+")-("+t+")*("+l+")+("+t+")*("+s+")-("+h+")*("+s+")","("+u+")*("+e+")-("+u+")*("+s+")-("+l+")*("+e+")+("+l+")*("+s+")+("+a+")*("+t+")-("+a+")*("+r+")-("+h+")*("+t+")+("+h+")*("+r+")"]},o},n.Z.createPerpendicular=function(t,e,r){var i,o,u,h;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=e[1],i=a.Z.providePoints(t,[e[0]],r,"point")[0];else if(a.Z.isPointType(t,e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=e[0],i=a.Z.providePoints(t,[e[1]],r,"point")[0];else throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");return h=a.Z.copyAttributes(r,t.options,"perpendicular"),(u=n.Z.createLine(t,[function(){return o.stdform[2]*i.X()-o.stdform[1]*i.Y()},function(){return-o.stdform[2]*i.Z()},function(){return o.stdform[1]*i.Z()}],h)).elType="perpendicular",u.setParents([o.id,i.id]),a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),o.addChild(u),u},n.Z.createPerpendicularPoint=function(t,e,r){var i,n,o;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[0]],r,"point")[0],i=e[1];else if(a.Z.isPointType(t,e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[1]],r,"point")[0],i=e[0];else throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");return o=t.create("point",[function(){return c.Z.perpendicular(i,n,t)[0]}],r),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),i.addChild(o),o.elType="perpendicularpoint",o.setParents([n.id,i.id]),o.update(),o.generatePolynomial=function(){var t=i.point1.symbolic.x,e=i.point1.symbolic.y,r=i.point2.symbolic.x,s=i.point2.symbolic.y,a=n.symbolic.x,u=n.symbolic.y,h=o.symbolic.x,l=o.symbolic.y;return["("+e+")*("+h+")-("+e+")*("+r+")+("+l+")*("+r+")-("+t+")*("+l+")+("+t+")*("+s+")-("+h+")*("+s+")","("+u+")*("+e+")-("+u+")*("+s+")-("+l+")*("+e+")+("+l+")*("+s+")+("+a+")*("+t+")-("+a+")*("+r+")-("+h+")*("+t+")+("+h+")*("+r+")"]},o},n.Z.createPerpendicularSegment=function(t,e,r){var i,o,u,h,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=e[1],i=a.Z.providePoints(t,[e[0]],r,"point")[0];else if(a.Z.isPointType(t,e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=e[0],i=a.Z.providePoints(t,[e[1]],r,"point")[0];else throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");return l=a.Z.copyAttributes(r,t.options,"perpendicularsegment","point"),(h=n.Z.createPerpendicularPoint(t,[o,i],l)).dump=!1,a.Z.exists(r.layer)||(r.layer=t.options.layer.line),l=a.Z.copyAttributes(r,t.options,"perpendicularsegment"),(u=n.Z.createLine(t,[function(){return c.Z.perpendicular(o,i,t)[1]?[h,i]:[i,h]}],l)).point=h,a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),o.addChild(u),u.elType="perpendicularsegment",u.setParents([i.id,o.id]),u.subs={point:h},u.inherits.push(h),u},n.Z.createMidpoint=function(t,e,r){var i,n,o,h,l;for(h=0;h<e.length;++h)e[h]=t.select(e[h]);if(2===e.length&&a.Z.isPointType(t,e[0])&&a.Z.isPointType(t,e[1]))i=(e=a.Z.providePoints(t,e,r,"point"))[0],n=e[1];else if(1===e.length&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)i=e[0].point1,n=e[0].point2;else throw Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");return l=a.Z.copyAttributes(r,t.options,"midpoint"),o=t.create("point",[function(){var t=i.coords.usrCoords[1]+n.coords.usrCoords[1];return isNaN(t)||Math.abs(i.coords.usrCoords[0])<u.Z.eps||Math.abs(n.coords.usrCoords[0])<u.Z.eps?NaN:.5*t},function(){var t=i.coords.usrCoords[2]+n.coords.usrCoords[2];return isNaN(t)||Math.abs(i.coords.usrCoords[0])<u.Z.eps||Math.abs(n.coords.usrCoords[0])<u.Z.eps?NaN:.5*t}],l),a.Z.exists(i._is_new)?(o.addChild(i),delete i._is_new):i.addChild(o),a.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),o.elType="midpoint",o.setParents([i.id,n.id]),o.prepareUpdate().update(),o.generatePolynomial=function(){var t=i.symbolic.x,e=i.symbolic.y,r=n.symbolic.x,s=n.symbolic.y,a=o.symbolic.x,u=o.symbolic.y;return["("+e+")*("+a+")-("+e+")*("+r+")+("+u+")*("+r+")-("+t+")*("+u+")+("+t+")*("+s+")-("+a+")*("+s+")","("+t+")^2 - 2*("+t+")*("+a+")+("+e+")^2-2*("+e+")*("+u+")-("+r+")^2+2*("+r+")*("+a+")-("+s+")^2+2*("+s+")*("+u+")"]},o},n.Z.createParallelPoint=function(t,e,r){var i,n,o,u,h,l;for(h=0;h<e.length;++h)e[h]=t.select(e[h]);if(3===e.length&&a.Z.isPointType(t,e[0])&&a.Z.isPointType(t,e[1])&&a.Z.isPointType(t,e[2]))i=(e=a.Z.providePoints(t,e,r,"point"))[0],n=e[1],o=e[2];else if(a.Z.isPointType(t,e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_LINE)o=a.Z.providePoints(t,[e[0]],r,"point")[0],i=e[1].point1,n=e[1].point2;else if(a.Z.isPointType(t,e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE)o=a.Z.providePoints(t,[e[1]],r,"point")[0],i=e[0].point1,n=e[0].point2;else throw Error("JSXGraph: Can't create parallel point with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [line,point], [point,point,point]");return l=a.Z.copyAttributes(r,t.options,"parallelpoint"),u=t.create("point",[function(){return o.coords.usrCoords[1]+n.coords.usrCoords[1]-i.coords.usrCoords[1]},function(){return o.coords.usrCoords[2]+n.coords.usrCoords[2]-i.coords.usrCoords[2]}],l),a.Z.exists(i._is_new)?(u.addChild(i),delete i._is_new):i.addChild(u),a.Z.exists(n._is_new)?(u.addChild(n),delete n._is_new):n.addChild(u),a.Z.exists(o._is_new)?(u.addChild(o),delete o._is_new):o.addChild(u),u.elType="parallelpoint",u.setParents([i.id,n.id,o.id]),u.prepareUpdate().update(),u.generatePolynomial=function(){var t=i.symbolic.x,e=i.symbolic.y,r=n.symbolic.x,s=n.symbolic.y,a=o.symbolic.x,h=o.symbolic.y,l=u.symbolic.x,c=u.symbolic.y;return["("+s+")*("+l+")-("+s+")*("+a+")-("+e+")*("+l+")+("+e+")*("+a+")-("+c+")*("+r+")+("+c+")*("+t+")+("+h+")*("+r+")-("+h+")*("+t+")","("+c+")*("+t+")-("+c+")*("+a+")-("+s+")*("+t+")+("+s+")*("+a+")-("+l+")*("+e+")+("+l+")*("+h+")+("+r+")*("+e+")-("+r+")*("+h+")"]},u},n.Z.createParallel=function(t,e,r){var i,n,o,s,h,l,c=1;for(h=0;h<e.length;++h)e[h]=t.select(e[h]);return i=null,3===e.length?(i=(e=a.Z.providePoints(t,e,r,"point"))[2],c=0):a.Z.isPointType(t,e[0])?(i=a.Z.providePoints(t,[e[0]],r,"point")[0],s=function(){return e[1].stdform}):a.Z.isPointType(t,e[1])&&(i=a.Z.providePoints(t,[e[1]],r,"point")[0],s=function(){return e[0].stdform}),a.Z.exists(r.layer)||(r.layer=t.options.layer.line),l=a.Z.copyAttributes(r,t.options,"parallel","point"),(n=1===c?t.create("point",[function(){return u.Z.crossProduct([1,0,0],s())}],l):t.create("parallelpoint",e,l)).isDraggable=!0,l=a.Z.copyAttributes(r,t.options,"parallel"),(o=t.create("line",[i,n],l)).elType="parallel",o.subs={point:n},o.inherits.push(n),o.setParents([e[0].id,e[1].id]),3===e.length&&o.addParents(e[2].id),o.point=n,o},n.Z.createArrowParallel=function(t,e,r){var i,o;try{return(o=a.Z.copyAttributes(r,t.options,"arrowparallel")).firstArrow=!1,o.lastArrow=!0,(i=n.Z.createParallel(t,e,o).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",i}catch(t){throw Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},n.Z.createNormal=function(t,e,r){var i,n,o,h,l,c,d,f,m;for(h=0;h<e.length;++h)e[h]=t.select(e[h]);if(1===e.length)n=(i=e[0]).slideObject;else if(2===e.length){if(a.Z.isPointType(t,e[0]))i=a.Z.providePoints(t,[e[0]],r,"point")[0],n=e[1];else if(a.Z.isPointType(t,e[1]))n=e[0],i=a.Z.providePoints(t,[e[1]],r,"point")[0];else throw Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]")}else throw Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(d=a.Z.copyAttributes(r,t.options,"normal"),n.elementClass===s.Z.OBJECT_CLASS_LINE)m=a.Z.copyAttributes(r,t.options,"normal","point"),(f=t.create("point",[function(){var t=u.Z.crossProduct([1,0,0],n.stdform);return[t[0],-t[2],t[1]]}],m)).isDraggable=!0,(o=t.create("line",[i,f],d)).point=f,o.subs={point:f},o.inherits.push(f);else if(n.elementClass===s.Z.OBJECT_CLASS_CIRCLE)o=t.create("line",[n.midpoint,i],d);else if(n.elementClass===s.Z.OBJECT_CLASS_CURVE)"plot"!==a.Z.evaluate(n.visProp.curvetype)?(l=n.X,c=n.Y,o=t.create("line",[function(){return-i.X()*p.Z.D(l)(i.position)-i.Y()*p.Z.D(c)(i.position)},function(){return p.Z.D(l)(i.position)},function(){return p.Z.D(c)(i.position)}],d)):o=t.create("line",[function(){var t,e,r,o,s,a,h,l,c,d,f=Math.floor(i.position),p=i.position-f;if(1===n.bezierdegree)f===n.numberPoints-1&&(f-=1,p=1);else{if(3!==n.bezierDegree)return 0;f=3*Math.floor(i.position*(n.numberPoints-1)/3),r=(i.position*(n.numberPoints-1)-f)/3,f>=n.numberPoints-1&&(f=n.numberPoints-4,r=1)}return f<0?1:1===n.bezierDegree?(n.Y(f)+p*(n.Y(f+1)-n.Y(f)))*(n.Y(f)-n.Y(f+1))-(n.X(f)+p*(n.X(f+1)-n.X(f)))*(n.X(f+1)-n.X(f)):(o=n.points[f].usrCoords,s=n.points[f+1].usrCoords,a=n.points[f+2].usrCoords,h=n.points[f+3].usrCoords,l=(1-r)*(1-r)*(s[1]-o[1])+2*(1-r)*r*(a[1]-s[1])+r*r*(h[1]-a[1]),c=(1-r)*(1-r)*(s[2]-o[2])+2*(1-r)*r*(a[2]-s[2])+r*r*(h[2]-a[2]),d=u.Z.hypot(l,c),l/=d,c/=d,e=[1,(t=i.coords.usrCoords)[1]-c,t[2]+l],t[2]*e[1]-t[1]*e[2])},function(){var t,e,r,o,s,a,h,l,c,d=Math.floor(i.position);if(1===n.bezierdegree)d===n.numberPoints-1&&(d-=1);else{if(3!==n.bezierDegree)return 0;d=3*Math.floor(i.position*(n.numberPoints-1)/3),e=(i.position*(n.numberPoints-1)-d)/3,d>=n.numberPoints-1&&(d=n.numberPoints-4,e=1)}return d<0?0:1===n.bezierDegree?n.X(d+1)-n.X(d):(r=n.points[d].usrCoords,o=n.points[d+1].usrCoords,s=n.points[d+2].usrCoords,a=n.points[d+3].usrCoords,h=(1-e)*(1-e)*(o[1]-r[1])+2*(1-e)*e*(s[1]-o[1])+e*e*(a[1]-s[1]),l=(1-e)*(1-e)*(o[2]-r[2])+2*(1-e)*e*(s[2]-o[2])+e*e*(a[2]-s[2]),c=u.Z.hypot(h,l),h/=c,l/=c,(t=i.coords.usrCoords)[1],t[2]+h-t[2])},function(){var t,e,r,o,s,a,h,l,c,d,f=Math.floor(i.position);if(1===n.bezierdegree)f===n.numberPoints-1&&(f-=1);else{if(3!==n.bezierDegree)return 0;f=3*Math.floor(i.position*(n.numberPoints-1)/3),r=(i.position*(n.numberPoints-1)-f)/3,f>=n.numberPoints-1&&(f=n.numberPoints-4,r=1)}return f<0?0:1===n.bezierDegree?n.Y(f+1)-n.Y(f):(o=n.points[f].usrCoords,s=n.points[f+1].usrCoords,a=n.points[f+2].usrCoords,h=n.points[f+3].usrCoords,l=(1-r)*(1-r)*(s[1]-o[1])+2*(1-r)*r*(a[1]-s[1])+r*r*(h[1]-a[1]),c=(1-r)*(1-r)*(s[2]-o[2])+2*(1-r)*r*(a[2]-s[2])+r*r*(h[2]-a[2]),d=u.Z.hypot(l,c),l/=d,c/=d,e=[1,(t=i.coords.usrCoords)[1]-c,t[2]+l],t[1]-e[1])}],d);else if(n.type===s.Z.OBJECT_TYPE_TURTLE)o=t.create("line",[function(){var t,e,r=Math.floor(i.position),o=i.position-r;for(e=0;e<n.objects.length;e++)if((t=n.objects[e]).type===s.Z.OBJECT_TYPE_CURVE){if(r<t.numberPoints)break;r-=t.numberPoints}return(r===t.numberPoints-1&&(r-=1,o=1),r<0)?1:(t.Y(r)+o*(t.Y(r+1)-t.Y(r)))*(t.Y(r)-t.Y(r+1))-(t.X(r)+o*(t.X(r+1)-t.X(r)))*(t.X(r+1)-t.X(r))},function(){var t,e,r=Math.floor(i.position);for(e=0;e<n.objects.length;e++)if((t=n.objects[e]).type===s.Z.OBJECT_TYPE_CURVE){if(r<t.numberPoints)break;r-=t.numberPoints}return(r===t.numberPoints-1&&(r-=1),r<0)?0:t.X(r+1)-t.X(r)},function(){var t,e,r=Math.floor(i.position);for(e=0;e<n.objects.length;e++)if((t=n.objects[e]).type===s.Z.OBJECT_TYPE_CURVE){if(r<t.numberPoints)break;r-=t.numberPoints}return(r===t.numberPoints-1&&(r-=1),r<0)?0:t.Y(r+1)-t.Y(r)}],d);else throw Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");return o.elType="normal",o.setParents(e),a.Z.exists(i._is_new)?(o.addChild(i),delete i._is_new):i.addChild(o),n.addChild(o),o},n.Z.createBisector=function(t,e,r){var i,o,s,u;if(e=a.Z.providePoints(t,e,r,"point"),a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])){for(s=0,(u=a.Z.copyAttributes(r,t.options,"bisector","point")).snapToGrid=!1,(i=t.create("point",[function(){return c.Z.angleBisector(e[0],e[1],e[2],t)}],u)).dump=!1;s<3;s++)a.Z.exists(e[s]._is_new)?(i.addChild(e[s]),delete e[s]._is_new):e[s].addChild(i);return a.Z.exists(r.layer)||(r.layer=t.options.layer.line),u=a.Z.copyAttributes(r,t.options,"bisector"),(o=n.Z.createLine(t,[e[1],i],u)).point=i,o.elType="bisector",o.setParents(e),o.subs={point:i},o.inherits.push(i),o}throw Error("JSXGraph: Can't create angle bisector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point]")},n.Z.createAngularBisectorsOfTwoLines=function(t,e,r){var i,n,o,h,l=t.select(e[0]),c=t.select(e[1]);if(l.elementClass!==s.Z.OBJECT_CLASS_LINE||c.elementClass!==s.Z.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,line]");return a.Z.exists(r.layer)||(r.layer=t.options.layer.line),o=a.Z.copyAttributes(r,t.options,"bisectorlines","line1"),i=t.create("line",[function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[0]/t-c.stdform[0]/e},function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[1]/t-c.stdform[1]/e},function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[2]/t-c.stdform[2]/e}],o),a.Z.exists(r.layer)||(r.layer=t.options.layer.line),o=a.Z.copyAttributes(r,t.options,"bisectorlines","line2"),n=t.create("line",[function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[0]/t+c.stdform[0]/e},function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[1]/t+c.stdform[1]/e},function(){var t=u.Z.hypot(l.stdform[1],l.stdform[2]),e=u.Z.hypot(c.stdform[1],c.stdform[2]);return l.stdform[2]/t+c.stdform[2]/e}],o),h=new V.Z({line1:i,line2:n}),i.dump=!1,n.dump=!1,h.elType="bisectorlines",h.setParents([l.id,c.id]),h.subs={line1:i,line2:n},h},n.Z.createCircumcenter=function(t,e,r){var i,o,s,u,h;if(e=a.Z.providePoints(t,e,r,"point"),a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])){for(o=0,s=e[0],u=e[1],h=e[2],i=n.Z.createPoint(t,[function(){return c.Z.circumcenter(s,u,h,t)}],r);o<3;o++)a.Z.exists(e[o]._is_new)?(i.addChild(e[o]),delete e[o]._is_new):e[o].addChild(i);return i.elType="circumcenter",i.setParents(e),i.generatePolynomial=function(){var t=s.symbolic.x,e=s.symbolic.y,r=u.symbolic.x,n=u.symbolic.y,o=h.symbolic.x,a=h.symbolic.y,l=i.symbolic.x,c=i.symbolic.y;return[["((",l,")-(",t,"))^2+((",c,")-(",e,"))^2-((",l,")-(",r,"))^2-((",c,")-(",n,"))^2"].join(""),["((",l,")-(",t,"))^2+((",c,")-(",e,"))^2-((",l,")-(",o,"))^2-((",c,")-(",a,"))^2"].join("")]},i}throw Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")},n.Z.createIncenter=function(t,e,r){var i,n,o,h,l;if((e=a.Z.providePoints(t,e,r,"point")).length>=3&&a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])){for(l=0,n=e[0],o=e[1],h=e[2],i=t.create("point",[function(){var e,r,i;return e=u.Z.hypot(o.X()-h.X(),o.Y()-h.Y()),r=u.Z.hypot(n.X()-h.X(),n.Y()-h.Y()),i=u.Z.hypot(o.X()-n.X(),o.Y()-n.Y()),new m.Z(s.Z.COORDS_BY_USER,[(e*n.X()+r*o.X()+i*h.X())/(e+r+i),(e*n.Y()+r*o.Y()+i*h.Y())/(e+r+i)],t)}],r);l<3;l++)a.Z.exists(e[l]._is_new)?(i.addChild(e[l]),delete e[l]._is_new):e[l].addChild(i);i.elType="incenter",i.setParents(e)}else throw Error("JSXGraph: Can't create incenter with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return i},n.Z.createCircumcircle=function(t,e,r){var i,o,s,u;if(!1===(e=a.Z.providePoints(t,e,r,"point")))throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");try{for(s=a.Z.copyAttributes(r,t.options,"circumcircle","center"),(i=n.Z.createCircumcenter(t,e,s)).dump=!1,a.Z.exists(r.layer)||(r.layer=t.options.layer.circle),s=a.Z.copyAttributes(r,t.options,"circumcircle"),(o=n.Z.createCircle(t,[i,e[0]],s)).elType="circumcircle",o.setParents(e),o.subs={center:i},o.inherits.push(o),u=0;u<3;u++)a.Z.exists(e[u]._is_new)?(o.addChild(e[u]),delete e[u]._is_new):e[u].addChild(o)}catch(t){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")}return o},n.Z.createIncircle=function(t,e,r){var i,o,s,h;if(!1===(e=a.Z.providePoints(t,e,r,"point")))throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");try{for(h=a.Z.copyAttributes(r,t.options,"incircle","center"),(o=n.Z.createIncenter(t,e,h)).dump=!1,a.Z.exists(r.layer)||(r.layer=t.options.layer.circle),h=a.Z.copyAttributes(r,t.options,"incircle"),(s=n.Z.createCircle(t,[o,function(){var t=u.Z.hypot(e[1].X()-e[2].X(),e[1].Y()-e[2].Y()),r=u.Z.hypot(e[0].X()-e[2].X(),e[0].Y()-e[2].Y()),i=u.Z.hypot(e[1].X()-e[0].X(),e[1].Y()-e[0].Y()),n=(t+r+i)/2;return Math.sqrt((n-t)*(n-r)*(n-i)/n)}],h)).elType="incircle",s.setParents(e),i=0;i<3;i++)a.Z.exists(e[i]._is_new)?(s.addChild(e[i]),delete e[i]._is_new):e[i].addChild(s);s.center=o,s.subs={center:s.center},s.inherits.push(o)}catch(t){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")}return s},n.Z.createReflection=function(t,e,r){var i,o,u,h,l,c,d,f,p="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(c=0;c<e.length;++c)e[c]=t.select(e[c]);if(d=a.Z.copyAttributes(r,t.options,"reflection"),a.Z.isPoint(e[0]))o=a.Z.providePoints(t,[e[0]],f)[0];else if(e[0].elementClass===s.Z.OBJECT_CLASS_CURVE||e[0].elementClass===s.Z.OBJECT_CLASS_LINE||e[0].type===s.Z.OBJECT_TYPE_POLYGON||e[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE)o=e[0];else throw Error("JSXGraph: Can't create reflection element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);if(e[1].elementClass===s.Z.OBJECT_CLASS_LINE)i=e[1];else throw Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);if(l=n.Z.createTransform(t,[i],{type:"reflect"}),a.Z.isPoint(o))u=n.Z.createPoint(t,[o,l],d);else if(o.elementClass===s.Z.OBJECT_CLASS_CURVE)u=n.Z.createCurve(t,[o,l],d);else if(o.elementClass===s.Z.OBJECT_CLASS_LINE)u=n.Z.createLine(t,[o,l],d);else if(o.type===s.Z.OBJECT_TYPE_POLYGON)u=n.Z.createPolygon(t,[o,l],d);else if(o.elementClass===s.Z.OBJECT_CLASS_CIRCLE)"euclidean"===d.type.toLowerCase()?(f=a.Z.copyAttributes(r,t.options,"reflection","center"),(h=n.Z.createPoint(t,[o.center,l],f)).prepareUpdate().update().updateVisibility(a.Z.evaluate(h.visProp.visible)).updateRenderer(),u=n.Z.createCircle(t,[h,function(){return o.Radius()}],d)):u=n.Z.createCircle(t,[o,l],d);else throw Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);return a.Z.exists(o._is_new)&&(u.addChild(o),delete o._is_new),i.addChild(u),u.elType="reflection",u.addParents(i),u.prepareUpdate().update(),a.Z.isPoint(u)&&(u.generatePolynomial=function(){var t=i.point1.symbolic.x,e=i.point1.symbolic.y,r=i.point2.symbolic.x,n=i.point2.symbolic.y,s=o.symbolic.x,a=o.symbolic.y,h=u.symbolic.x,l=u.symbolic.y;return[["((",l,")-(",a,"))*((",e,")-(",n,"))+((",t,")-(",r,"))*((",h,")-(",s,"))"].join(""),["((",h,")-(",t,"))^2+((",l,")-(",e,"))^2-((",s,")-(",t,"))^2-((",a,")-(",e,"))^2"].join("")]}),u},n.Z.createMirrorElement=function(t,e,r){var i,o,u,h,l,c,d,f,p="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(o=0;o<e.length;++o)e[o]=t.select(e[o]);if(d=a.Z.copyAttributes(r,t.options,"mirrorelement"),a.Z.isPoint(e[0]))i=a.Z.providePoints(t,[e[0]],d)[0];else if(e[0].elementClass===s.Z.OBJECT_CLASS_CURVE||e[0].elementClass===s.Z.OBJECT_CLASS_LINE||e[0].type===s.Z.OBJECT_TYPE_POLYGON||e[0].elementClass===s.Z.OBJECT_CLASS_CIRCLE)i=e[0];else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);if(a.Z.isPoint(e[1]))f=a.Z.copyAttributes(r,t.options,"mirrorelement","point"),u=a.Z.providePoints(t,[e[1]],f)[0];else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);if(c=n.Z.createTransform(t,[Math.PI,u],{type:"rotate"}),a.Z.isPoint(i))h=n.Z.createPoint(t,[i,c],d);else if(i.elementClass===s.Z.OBJECT_CLASS_CURVE)h=n.Z.createCurve(t,[i,c],d);else if(i.elementClass===s.Z.OBJECT_CLASS_LINE)h=n.Z.createLine(t,[i,c],d);else if(i.type===s.Z.OBJECT_TYPE_POLYGON)h=n.Z.createPolygon(t,[i,c],d);else if(i.elementClass===s.Z.OBJECT_CLASS_CIRCLE)"euclidean"===d.type.toLowerCase()?(f=a.Z.copyAttributes(r,t.options,"mirrorelement","center"),(l=n.Z.createPoint(t,[i.center,c],f)).prepareUpdate().update().updateVisibility(a.Z.evaluate(l.visProp.visible)).updateRenderer(),h=n.Z.createCircle(t,[l,function(){return i.Radius()}],d)):h=n.Z.createCircle(t,[i,c],d);else throw Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+p);return a.Z.exists(i._is_new)&&(h.addChild(i),delete i._is_new),u.addChild(h),h.elType="mirrorelement",h.addParents(u),h.prepareUpdate().update(),h},n.Z.createMirrorPoint=function(t,e,r){var i=n.Z.createMirrorElement(t,e,r);return i.elType="mirrorpoint",i},n.Z.createIntegral=function(t,e,r){var i,o,u,h,l,c,d,f,v,g,b,y,C,Z,x=null;if(a.Z.isArray(e[0])&&e[1].elementClass===s.Z.OBJECT_CLASS_CURVE)i=e[0],o=e[1];else if(a.Z.isArray(e[1])&&e[0].elementClass===s.Z.OBJECT_CLASS_CURVE)i=e[1],o=e[0];else throw Error("JSXGraph: Can't create integral with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");return(u=a.Z.copyAttributes(r,t.options,"integral")).withLabel=!1,Z=t.create("curve",[[0],[0]],u),h=i[0],l=i[1],a.Z.isFunction(h)?(c=h,d=function(){return o.Y(c())},h=c()):(c=h,d=o.Y(h)),a.Z.isFunction(l)?(f=l,v=function(){return o.Y(f())},l=f()):(f=l,v=o.Y(l)),u=a.Z.copyAttributes(r,t.options,"integral","curveLeft"),g=t.create("glider",[c,d,o],u),a.Z.isFunction(c)&&g.hideElement(),u=a.Z.copyAttributes(r,t.options,"integral","baseLeft"),b=t.create("point",[function(){return"y"===a.Z.evaluate(Z.visProp.axis)?0:g.X()},function(){return"y"===a.Z.evaluate(Z.visProp.axis)?g.Y():0}],u),u=a.Z.copyAttributes(r,t.options,"integral","curveRight"),y=t.create("glider",[f,v,o],u),a.Z.isFunction(f)&&y.hideElement(),u=a.Z.copyAttributes(r,t.options,"integral","baseRight"),C=t.create("point",[function(){return"y"===a.Z.evaluate(Z.visProp.axis)?0:y.X()},function(){return"y"===a.Z.evaluate(Z.visProp.axis)?y.Y():0}],u),!1!==(u=a.Z.copyAttributes(r,t.options,"integral")).withlabel&&"y"!==u.axis&&(u=a.Z.copyAttributes(r,t.options,"integral","label"),u=a.Z.copyAttributes(u,t.options,"label"),(x=t.create("text",[function(){var t=new m.Z(s.Z.COORDS_BY_SCREEN,[a.Z.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),e=this.board.getBoundingBox(),r=(e[2]-e[0])*.1,i=y.X();return i<e[0]?i=e[0]+r:i>e[2]&&(i=e[2]-r),i+t.usrCoords[1]},function(){var t=new m.Z(s.Z.COORDS_BY_SCREEN,[0,a.Z.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),e=this.board.getBoundingBox(),r=(e[1]-e[3])*.1,i=y.Y();return i>e[1]?i=e[1]-r:i<e[3]&&(i=e[3]+r),i+t.usrCoords[2]},""],u)).setText(function(){var t=p.Z.NewtonCotes([b.X(),C.X()],o.Y),e=a.Z.evaluate(x.visProp.digits);return"&int; = "+(x.useLocale()?x.formatNumberLocale(t,e):a.Z.toFixed(t,e))}),x.dump=!1,g.addChild(x),y.addChild(x)),g.dump=!1,b.dump=!1,y.dump=!1,C.dump=!1,Z.elType="integral",Z.setParents([o.id,i]),Z.subs={curveLeft:g,baseLeft:b,curveRight:y,baseRight:C},Z.inherits.push(g,b,y,C),u.withLabel&&(Z.subs.label=x,Z.inherits.push(x)),Z.Value=function(){return p.Z.I([b.X(),C.X()],o.Y)},Z.updateDataArray=function(){var t,e,r,i,n,s,u,h,l;if("y"===a.Z.evaluate(this.visProp.axis)){for(g.Y()<y.Y()?(s=g.X(),h=g.Y(),u=y.X(),l=y.Y()):(s=y.X(),h=y.Y(),u=g.X(),l=g.Y()),i=Math.min(s,u),n=Math.max(s,u),t=[0,s],e=[h,h],r=0;r<o.numberPoints;r++)h<=o.points[r].usrCoords[2]&&i<=o.points[r].usrCoords[1]&&o.points[r].usrCoords[2]<=l&&o.points[r].usrCoords[1]<=n&&(t.push(o.points[r].usrCoords[1]),e.push(o.points[r].usrCoords[2]));t.push(u),e.push(l),t.push(0),e.push(l),t.push(0),e.push(h)}else{for(b.X()<C.X()?(i=b.X(),n=C.X()):(i=C.X(),n=b.X()),t=[i,i],e=[0,o.Y(i)],r=0;r<o.numberPoints;r++)i<=o.points[r].usrCoords[1]&&o.points[r].usrCoords[1]<=n&&(t.push(o.points[r].usrCoords[1]),e.push(o.points[r].usrCoords[2]));t.push(n),e.push(o.Y(n)),t.push(n),e.push(0),t.push(i),e.push(0)}this.dataX=t,this.dataY=e},g.addChild(Z),y.addChild(Z),b.addChild(Z),C.addChild(Z),Z.baseLeft=b,Z.baseRight=C,Z.curveLeft=g,Z.curveRight=y,Z.methodMap=n.Z.deepCopy(Z.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),Z.label=x,Z},n.Z.createGrid=function(t,e,r){var i,n;return n=a.Z.copyAttributes(r,t.options,"grid"),(i=t.create("curve",[[null],[null]],n)).elType="grid",i.type=s.Z.OBJECT_TYPE_GRID,i.updateDataArray=function(){var e,r,n,o,u,h,l=a.Z.evaluate(this.visProp.gridx),c=a.Z.evaluate(this.visProp.gridy);for(u=a.Z.isArray(this.visProp.topleft)?new m.Z(a.Z.evaluate(this.visProp.tltype)||s.Z.COORDS_BY_USER,this.visProp.topleft,t):new m.Z(s.Z.COORDS_BY_SCREEN,[0,0],t),h=a.Z.isArray(this.visProp.bottomright)?new m.Z(a.Z.evaluate(this.visProp.brtype)||s.Z.COORDS_BY_USER,this.visProp.bottomright,t):new m.Z(s.Z.COORDS_BY_SCREEN,[t.canvasWidth,t.canvasHeight],t),t.options.grid.hasGrid=!0,i.dataX=[],i.dataY=[],e=Math.floor(u.usrCoords[2]/c)*c,r=Math.ceil(h.usrCoords[2]/c)*c,u.usrCoords[2]<h.usrCoords[2]&&(e=Math.ceil(h.usrCoords[2]/c)*c,r=Math.floor(u.usrCoords[2]/c)*c),o=!(!isFinite(e)||!isFinite(r)||Math.abs(r)>Math.abs(5e3*c)),n=e;o&&n>r-c;n-=c)i.dataX.push(u.usrCoords[1],h.usrCoords[1],NaN),i.dataY.push(n,n,NaN);for(e=Math.ceil(u.usrCoords[1]/l)*l,r=Math.floor(h.usrCoords[1]/l)*l,u.usrCoords[1]>h.usrCoords[1]&&(e=Math.floor(h.usrCoords[1]/l)*l,r=Math.ceil(u.usrCoords[1]/l)*l),o=!(!isFinite(e)||!isFinite(r)||Math.abs(r)>Math.abs(5e3*l)),n=e;o&&n<r+l;n+=l)i.dataX.push(n,n,NaN),i.dataY.push(u.usrCoords[2],h.usrCoords[2],NaN)},i.hasPoint=function(){return!1},t.grids.push(i),i},n.Z.createInequality=function(t,e,r){var i,n,o;if(o=a.Z.copyAttributes(r,t.options,"inequality"),e[0].elementClass===s.Z.OBJECT_CLASS_LINE)(n=t.create("curve",[[],[]],o)).hasPoint=function(){return!1},n.updateDataArray=function(){var r,i,n,o=t.getBoundingBox(),h=a.Z.evaluate(this.visProp.inverse),l=1.5*Math.max(o[2]-o[0],o[1]-o[3]),d={coords:{usrCoords:[1,(o[0]+o[2])*.5,h?o[1]:o[3]]}},f=e[0].stdform.slice(1);n=1.5*Math.max(c.Z.perpendicular(e[0],d,t)[0].distance(s.Z.COORDS_BY_USER,d.coords),l)*(h?-1:1),d={coords:{usrCoords:[1,(o[0]+o[2])*.5,(o[1]+o[3])*.5]}},r=[1,(d=Math.abs(u.Z.innerProduct(d.coords.usrCoords,e[0].stdform,3))>=u.Z.eps?c.Z.perpendicular(e[0],d,t)[0].usrCoords:d.coords.usrCoords)[1]+f[1]*l,d[2]-f[0]*l],i=[1,d[1]-f[1]*l,d[2]+f[0]*l],this.dataX=[r[1],r[1]+f[0]*n,i[1]+f[0]*n,i[1],r[1]],this.dataY=[r[2],r[2]+f[1]*n,i[2]+f[1]*n,i[2],r[2]]};else if(e[0].elementClass===s.Z.OBJECT_CLASS_CURVE&&"functiongraph"===e[0].visProp.curvetype)(n=t.create("curve",[[],[]],o)).updateDataArray=function(){var t,r,i,n,o,s,u,h,l,c=this.board.getBoundingBox(),d=[],f=e[0].minX(),p=e[0].maxX(),m=(c[1]-c[3])*.3;if(t=a.Z.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(n=e[0].points.length))for(c[1]+=m,c[3]-=m,i=-1;i<n-1;){for(o=i+1,r=n;o<n;o++)if(e[0].points[o].isReal()){r=o;break}if(r>=n)break;for(o=r,i=n-1;o<n-1;o++)if(!e[0].points[o+1].isReal()){i=o;break}for(h=e[0].points[r].usrCoords[1],l=e[0].points[i].usrCoords[1],s=c[0]<f?f:c[0],u=c[2]>p?p:c[2],s=0===r?s:Math.max(s,h),u=i===n-1?u:Math.min(u,l),s=0===r?f:h,u=i===n-1?p:l,(d=[]).push([1,s,c[t]]),d.push([1,s,e[0].points[r].usrCoords[2]]),o=r;o<=i;o++)d.push(e[0].points[o].usrCoords);for(d.push([1,u,e[0].points[i].usrCoords[2]]),d.push([1,u,c[t]]),d.push(d[0]),o=0;o<d.length;o++)this.dataX.push(d[o][1]),this.dataY.push(d[o][2]);i<n-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},n.hasPoint=function(){return!1};else if(i=a.Z.createFunction(e[0]),n.addParentsFromJCFunctions([i]),!a.Z.exists(i))throw Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return n.addParents(e[0]),n},n.Z.registerElement("arrowparallel",n.Z.createArrowParallel),n.Z.registerElement("bisector",n.Z.createBisector),n.Z.registerElement("bisectorlines",n.Z.createAngularBisectorsOfTwoLines),n.Z.registerElement("msector",n.Z.createMsector),n.Z.registerElement("circumcircle",n.Z.createCircumcircle),n.Z.registerElement("circumcirclemidpoint",n.Z.createCircumcenter),n.Z.registerElement("circumcenter",n.Z.createCircumcenter),n.Z.registerElement("incenter",n.Z.createIncenter),n.Z.registerElement("incircle",n.Z.createIncircle),n.Z.registerElement("integral",n.Z.createIntegral),n.Z.registerElement("midpoint",n.Z.createMidpoint),n.Z.registerElement("mirrorelement",n.Z.createMirrorElement),n.Z.registerElement("mirrorpoint",n.Z.createMirrorPoint),n.Z.registerElement("normal",n.Z.createNormal),n.Z.registerElement("orthogonalprojection",n.Z.createOrthogonalProjection),n.Z.registerElement("parallel",n.Z.createParallel),n.Z.registerElement("parallelpoint",n.Z.createParallelPoint),n.Z.registerElement("perpendicular",n.Z.createPerpendicular),n.Z.registerElement("perpendicularpoint",n.Z.createPerpendicularPoint),n.Z.registerElement("perpendicularsegment",n.Z.createPerpendicularSegment),n.Z.registerElement("reflection",n.Z.createReflection),n.Z.registerElement("grid",n.Z.createGrid),n.Z.registerElement("inequality",n.Z.createInequality),n.Z.createLocus=function(t,e,r){var i,n;if(a.Z.isArray(e)&&1===e.length&&a.Z.isPoint(e[0]))n=e[0];else throw Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return(i=t.create("curve",[[null],[null]],r)).dontCallServer=!1,i.elType="locus",i.setParents([n.id]),i.updateDataArray=function(){var e,r,o;i.board.mode>0||(e=D.generatePolynomials(t,n,!0).join("|"))===i.spe||(i.spe=e,r=function(t,e,r,n){i.dataX=t,i.dataY=e,i.eq=r,i.ctime=n,i.generatePolynomial=function(t){var e,i="("+t.symbolic.x+")",n="("+t.symbolic.y+")",o=[];for(e=0;e<r.length;e++)o[e]=r[e].replace(/\*\*/g,"^").replace(/x/g,i).replace(/y/g,n);return o}},o=D.geometricLocusByGroebnerBase(t,n,r),r(o.datax,o.datay,o.polynomial,o.exectime))},i},n.Z.registerElement("locus",n.Z.createLocus),r(58),n.Z.Image=function(t,e,r,i,o){this.constructor(t,r,s.Z.OBJECT_TYPE_IMAGE,s.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(e),this.W=a.Z.createFunction(o[0],this.board,""),this.H=a.Z.createFunction(o[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*t.unitX),Math.abs(this.usrSize[1]*t.unitY)],this.url=i,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=n.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},n.Z.Image.prototype=new z.Z,a.Z.copyPrototypeMethods(n.Z.Image,X.Z,"coordsConstructor"),n.Z.extend(n.Z.Image.prototype,{hasPoint:function(t,e){var r,i,n,o,h,l,c,d,f,p=this.transformations.length;return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,h=a.Z.evaluate(this.visProp.precision[o])):h=this.board.options.precision.hasPoint,0===p)?(r=t-this.coords.scrCoords[1],i=this.coords.scrCoords[2]-e,r>=-(n=h)&&r-this.size[0]<=n&&i>=-n&&i-this.size[1]<=n):(c=[(l=(l=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],l[1]-this.span[0][1],l[2]-this.span[0][2]],!!(0<=(d=(f=u.Z.innerProduct)(c,this.span[1]))&&d<=f(this.span[1],this.span[1])&&0<=(d=f(c,this.span[2]))&&d<=f(this.span[2],this.span[2])))},update:function(t){return this.needsUpdate&&(this.updateCoords(t),this.updateSize(),this.updateSpan()),this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,e,r=this.transformations.length,i=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(t=0,i[0]=[this.Z(),this.X(),this.Y()],i[1]=[this.Z(),this.X()+this.W(),this.Y()],i[2]=[this.Z(),this.X(),this.Y()+this.H()];t<r;t++)for(e=0;e<3;e++)i[e]=u.Z.matVecMult(this.transformations[t].matrix,i[e]);for(e=0;e<3;e++)i[e][1]/=i[e][0],i[e][2]/=i[e][0],i[e][0]/=i[e][0];for(e=1;e<3;e++)i[e][0]-=i[0][0],i[e][1]-=i[0][1],i[e][2]-=i[0][2];this.span=i}return this},addTransform:function(t){var e;if(a.Z.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=a.Z.createFunction(t,this.board,""),this.H=a.Z.createFunction(e,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),n.Z.createImage=function(t,e,r){var i,o,s=e[0],u=e[1],h=e[2];if(i=a.Z.copyAttributes(r,t.options,"image"),!(o=X.Z.create(n.Z.Image,t,u,i,s,h)))throw Error("JSXGraph: Can't create image with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==i.rotate&&o.addRotation(i.rotate),o},n.Z.registerElement("image",n.Z.createImage),n.Z.Image,n.Z.createSlider=function(t,e,r){var i,n,o,h,l,c,d,f,p,v,g,b,y,C,Z,x,_,E,w,N,S,A,P;return _=(P=a.Z.copyAttributes(r,t.options,"slider")).withticks,x=P.withlabel,N=P.snapwidth,E=P.snapvalues,w=P.snapvaluedistance,P=a.Z.copyAttributes(r,t.options,"slider","point1"),d=t.create("point",e[0],P),P=a.Z.copyAttributes(r,t.options,"slider","point2"),f=t.create("point",e[1],P),P=a.Z.copyAttributes(r,t.options,"slider","baseline"),(v=t.create("segment",[d,f],P)).updateStdform(),i=d.coords.usrCoords.slice(1),n=f.coords.usrCoords.slice(1),o=e[2][0],h=e[2][1],c=(l=e[2][2])-o,A=-1===(S=a.Z.evaluate(N))?h:Math.round(h/S)*S,C=i[0]+(n[0]-i[0])*(A-o)/(l-o),Z=i[1]+(n[1]-i[1])*(A-o)/(l-o),(P=a.Z.copyAttributes(r,t.options,"slider")).withLabel=!1,(p=t.create("glider",[C,Z,v],P)).setAttribute({snapwidth:N,snapvalues:E,snapvaluedistance:w}),P=a.Z.copyAttributes(r,t.options,"slider","highline"),g=t.create("segment",[d,p],P),p.Value=function(){var t=this._smax-this._smin,e=a.Z.evaluate(this.visProp.snapwidth);return -1===e?this.position*t+this._smin:Math.round((this.position*t+this._smin)/e)*e},p.methodMap=a.Z.deepCopy(p.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),p._smax=l,p._smin=o,p.setMax=function(t){return this._smax=t,this},p.setValue=function(t){var e=this._smax-this._smin;return Math.abs(e)>u.Z.eps?this.position=(t-this._smin)/e:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},p.setMin=function(t){return this._smin=t,this},x&&(P=a.Z.copyAttributes(r,t.options,"slider","label"),y=t.create("text",[function(){return(f.X()-d.X())*.05+f.X()},function(){return(f.Y()-d.Y())*.05+f.Y()},function(){var t,e=a.Z.evaluate(p.visProp.digits),r=a.Z.evaluate(p.visProp.suffixlabel),i=a.Z.evaluate(p.visProp.unitlabel),n=a.Z.evaluate(p.visProp.postlabel);return 2===e&&2!==a.Z.evaluate(p.visProp.precision)&&(e=a.Z.evaluate(p.visProp.precision)),t=null!==r?r:p.name&&""!==p.name?p.name+" = ":"",p.useLocale()?t+=p.formatNumberLocale(p.Value(),e):t+=a.Z.toFixed(p.Value(),e),null!==i&&(t+=i),null!==n&&(t+=n),t}],P),p.label=y,p.visProp.withlabel=!0,p.hasLabel=!0),p.point1=d,p.point2=f,p.baseline=v,p.highline=g,_&&(P=a.Z.copyAttributes(r,t.options,"slider","ticks"),a.Z.exists(P.generatelabeltext)||(P.generateLabelText=function(t,e,r){var i=p.point1.Dist(p.point2),n=p._smin,o=p._smax,s=this.getDistanceFromZero(e,t)*(o-n)/i+n;return i<u.Z.eps||Math.abs(s)<u.Z.eps?"0":this.formatLabelText(s)}),b=t.create("ticks",[p.baseline,p.point1.Dist(d)/2,function(t){var e=p.point1.Dist(p.point2),r=p.point1.coords.distance(s.Z.COORDS_BY_USER,t);return e<u.Z.eps?0:r/e*c+o}],P),p.ticks=b),p.remove=function(){x&&t.removeObject(y),t.removeObject(g),t.removeObject(v),t.removeObject(f),t.removeObject(d),J.prototype.remove.call(p)},d.dump=!1,f.dump=!1,v.dump=!1,g.dump=!1,x&&(y.dump=!1),p.elType="slider",p.parents=e,p.subs={point1:d,point2:f,baseLine:v,highLine:g},p.inherits.push(d,f,v,g),_&&(b.dump=!1,p.subs.ticks=b,p.inherits.push(b)),p.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},p.baseline.on("up",function(t){var e,r;a.Z.evaluate(p.visProp.moveonup)&&!a.Z.evaluate(p.visProp.fixed)&&(e=v.board.getMousePosition(t,0),r=new m.Z(s.Z.COORDS_BY_SCREEN,e,this.board),p.moveTo([r.usrCoords[1],r.usrCoords[2]]),p.triggerEventHandlers(["drag"],[t]))}),p.prepareUpdate().update(),!t.isSuspendedUpdate&&(p.updateVisibility().updateRenderer(),p.baseline.updateVisibility().updateRenderer(),p.highline.updateVisibility().updateRenderer(),_&&p.ticks.updateVisibility().updateRenderer()),p},n.Z.registerElement("slider",n.Z.createSlider),n.Z.PrefixParser={parse:function(t,e){var r,i,n,o,s,h;if(a.Z.isNumber(t)||a.Z.isString(t))return t;if(!a.Z.isArray(t)||t.length<2)throw Error("prefixParser.parse: term is not an array, number or string");if(r=t[0],n=t.length,"execute"===e){if(a.Z.isInArray(["+","-","*","/"],r))for(i=2,o=this.parse(t[1],e);i<n;i++)switch(h=this.parse(t[i],e),r){case"+":o+=h;break;case"-":o-=h;break;case"*":o*=h;break;case"/":o/=h}else if("exec"===r){for(i=2,s=t[1],h=[];i<n;i++)h.push(this.parse(t[i],e));if(a.Z.exists(Math[s]))o=Math[s].apply(this,h);else if(a.Z.exists(u.Z[s]))o=u.Z[s].apply(this,h);else throw Error("PrefixParser.parse: "+s+" is not allowed")}else{if("V"===(s=t[0])&&(s="Value"),!a.Z.exists(t[1][s]))throw Error("PrefixParser.parse: "+s+" is not a method of "+t[1]);for(i=2,h=[];i<n;i++)h.push(this.parse(t[i],e));o=t[1][s].apply(t[1],h)}}return o},dimension:function(t){var e,r,i,n,o,u,h,l;if(a.Z.isNumber(t))return 0;if(!a.Z.isArray(t)||t.length<2)throw Error("PrefixParser.dimension: term is not an array");if(e=t[0],i=t.length,a.Z.isInArray(["+","-","*","/"],e))for(r=2,n=this.dimension(t[1]);r<i;r++)switch(h=this.dimension(t[r]),e){case"+":case"-":h!==n&&(n=NaN);break;case"*":n+=h;break;case"/":n-=h}else if("exec"===e)t[2].type===a.Z.OBJECT_TYPE_MEASUREMENT?(n=t[2].Dimension(),a.Z.exists(t[2].visProp.dim)&&null!==(u=a.Z.evaluate(t[2].visProp.dim))&&(n=u)):n=0;else switch(o=t[0]){case"L":case"Length":case"Perimeter":case"Radius":case"R":n=1;break;case"Area":case"A":n=2;break;default:t[1].type===a.Z.OBJECT_TYPE_MEASUREMENT?(n=t[1].Dimension(),a.Z.exists(t[1].visProp.dim)&&null!==(u=a.Z.evaluate(t[1].visProp.dim))&&(n=u)):(n=0,("Value"===o||"V"===o)&&[s.Z.OBJECT_TYPE_ARC,s.Z.OBJECT_TYPE_SECTOR,s.Z.OBJECT_TYPE_ANGLE].indexOf(t[1].type)>=0&&(l="",3===t.length&&a.Z.isString(t[2])&&(l=t[2].toLowerCase()),n=""===l?t[1].type===s.Z.OBJECT_TYPE_ANGLE?0:1:0===l.indexOf("len")?1:0))}return n},toPrefix:function(t){var e,r,i,n;if(a.Z.isNumber(t))return t;if(!a.Z.isArray(t)||t.length<2)throw Error("PrefixParser.toPrefix: term is not an array");for(r=1,e=t[0],i=t.length,n=[e];r<i;r++)a.Z.isInArray(["+","-","*","/"],e)?n.push(this.toPrefix(t[r])):"V"===e&&t[r].type===a.Z.OBJECT_TYPE_MEASUREMENT?n=t[r].toPrefix():"exec"===e?1===r?n.push(t[r]):n.push(this.toPrefix(t[r])):n=[e,t[r].id];return n},getParents:function(t){var e,r,i,n;if(a.Z.isNumber(t))return[];if(!a.Z.isArray(t)||t.length<2)throw Error("PrefixParser.getParents: term is not an array");for(r=1,e=t[0],i=t.length,n=[];r<i;r++)a.Z.isInArray(["+","-","*","/"],e)?n=n.concat(this.getParents(t[r])):"V"===e&&t[r].type===a.Z.OBJECT_TYPE_MEASUREMENT?n=n.concat(t[r].getParents()):"exec"===e?r>1&&(n=n.concat(this.getParents(t[r]))):n.push(t[r]);return n}};var q=n.Z.PrefixParser;n.Z.createTapemeasure=function(t,e,r){var i,o,s,u,h,l,c,d,f,p;return i=e[0],o=e[1],s=a.Z.copyAttributes(r,t.options,"tapemeasure","point1"),c=t.create("point",i,s),s=a.Z.copyAttributes(r,t.options,"tapemeasure","point2"),d=t.create("point",o,s),c.setAttribute({ignoredSnapToPoints:[d]}),d.setAttribute({ignoredSnapToPoints:[c]}),u=(s=a.Z.copyAttributes(r,t.options,"tapemeasure")).withticks,h=s.withlabel,2===s.digits&&2!==s.precision&&s.precision,h&&(s.withlabel=!0),l=t.create("segment",[c,d],s),h&&(f=r.name&&""!==r.name?r.name+" = ":"",l.label.setText(function(){var t=a.Z.evaluate(l.label.visProp.digits);return l.label.useLocale()?f+l.label.formatNumberLocale(c.Dist(d),t):f+a.Z.toFixed(c.Dist(d),t)})),u&&(s=a.Z.copyAttributes(r,t.options,"tapemeasure","ticks"),p=t.create("ticks",[l,.1],s),l.inherits.push(p)),l.remove=function(){u&&l.removeTicks(p),t.removeObject(d),t.removeObject(c),z.Z.prototype.remove.call(this)},l.Value=function(){return c.Dist(d)},c.dump=!1,d.dump=!1,l.elType="tapemeasure",l.getParents=function(){return[[c.X(),c.Y()],[d.X(),d.Y()]]},l.subs={point1:c,point2:d},u&&(p.dump=!1),l.methodMap=n.Z.deepCopy(l.methodMap,{Value:"Value"}),l.prepareUpdate().update(),t.isSuspendedUpdate||(l.updateVisibility().updateRenderer(),l.point1.updateVisibility().updateRenderer(),l.point2.updateVisibility().updateRenderer()),l},n.Z.registerElement("tapemeasure",n.Z.createTapemeasure),n.Z.createMeasurement=function(t,e,r){var i,n,o,s,u,h;for(n=a.Z.copyAttributes(r,t.options,"measurement"),o=e[0],s=e[1],u=e[2],(i=t.create("text",[o,s,""],n)).type=a.Z.OBJECT_TYPE_MEASUREMENT,i.elType="measurement",i.Value=function(){return q.parse(u,"execute")},i.Dimension=function(){var t=a.Z.evaluate(i.visProp.dim);return null!==t?t:q.dimension(u)},i.toInfix=function(t){return q.toInfix(u,t)},i.toPrefix=function(){return q.toPrefix(u)},i.getParents=function(){return q.getParents(u)},i.addParents(i.getParents()),h=0;h<i.parents.length;h++)t.select(i.parents[h]).addChild(i);return i.setText(function(){var t="",e="",r=i.Dimension(),n="",o=a.Z.evaluate(i.visProp.units),s=i.Value();return(a.Z.isNumber(s)&&(s=s.toFixed(a.Z.evaluate(i.visProp.digits))),a.Z.evaluate(i.visProp.showprefix)&&(t=a.Z.evaluate(i.visProp.prefix)),a.Z.evaluate(i.visProp.showsuffix)&&(e=a.Z.evaluate(i.visProp.suffix)),a.Z.isString(r))?t+s+e:isNaN(r)?t+"NaN"+e:(a.Z.isObject(o)&&a.Z.exists(o[r])?n=a.Z.evaluate(o[r]):a.Z.isObject(o)&&a.Z.exists(o["dim"+r])?n=a.Z.evaluate(o["dim"+r]):(n=a.Z.evaluate(i.visProp.baseunit),0===r?n="":r>1&&""!==n&&(n=n+"^{"+r+"}")),""!==n&&(n=" "+n),t+s+n+e)}),i.methodMap=a.Z.deepCopy(i.methodMap,{Value:"Value",Dimension:"Dimension",toPrefix:"toPrefix",getParents:"getParents"}),i},n.Z.registerElement("measurement",n.Z.createMeasurement),n.Z.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},n.Z.extend(n.Z.DataSource.prototype,{loadFromArray:function(t,e,r){var i,n,o;if(a.Z.isArray(e)&&(this.columnHeaders=e,e=!1),a.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],e&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),a.Z.exists(t)){for(i=0,this.data=[];i<t.length;i++)for(n=0,this.data[i]=[];n<t[i].length;n++)parseFloat(o=t[i][n]).toString()===o?this.data[i][n]=parseFloat(o):"-"!==o?this.data[i][n]=o:this.data[i][n]=NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(i=0,this.rowHeaders=[];i<this.data.length;i++)this.rowHeaders.push(this.data[i][0]),this.data[i]=this.data[i].slice(1)}return this},loadFromTable:function(t,e,r){var i,n,o,s,u;if(a.Z.isArray(e)&&(this.columnHeaders=e,e=!1),a.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],e&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),t=document.getElementById(t),a.Z.exists(t)){for(n=0,i=t.getElementsByTagName("tr"),this.data=[];n<i.length;n++)for(o=0,s=i[n].getElementsByTagName("td"),this.data[n]=[];o<s.length;o++)parseFloat(u=s[o].innerHTML).toString()===u?this.data[n][o]=parseFloat(u):"-"!==u?this.data[n][o]=u:this.data[n][o]=NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(n=0,this.rowHeaders=[];n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},addColumn:function(t,e,r){throw Error("not implemented")},addRow:function(t,e,r){throw Error("not implemented")},getColumn:function(t){var e,r=[];if(a.Z.isString(t)){for(e=0;e<this.columnHeaders.length;e++)if(t===this.columnHeaders[e]){t=e;break}}for(e=0;e<this.data.length;e++)this.data[e].length>t&&(r[e]=parseFloat(this.data[e][t]));return r},getRow:function(t){var e,r;if(a.Z.isString(t)){for(r=0;r<this.rowHeaders.length;r++)if(t===this.rowHeaders[r]){t=r;break}}for(r=0,e=[];r<this.data[t].length;r++)e[r]=this.data[t][r];return e}});var W=n.Z.DataSource;n.Z.Chart=function(t,e,r){var i,n,o,s,u,h;if(this.constructor(t,r),!a.Z.isArray(e)||0===e.length)throw Error("JSXGraph: Can't create a chart without data");if(this.elements=[],a.Z.isNumber(e[0]))for(o=0,n=e,i=[];o<n.length;o++)i[o]=o+1;else if(1===e.length&&a.Z.isArray(e[0]))for(o=0,n=e[0],i=[],h=a.Z.evaluate(n).length;o<h;o++)i[o]=o+1;else 2===e.length&&(h=Math.min(e[0].length,e[1].length),i=e[0].slice(0,h),n=e[1].slice(0,h));if(a.Z.isArray(n)&&0===n.length)throw Error("JSXGraph: Can't create charts without data.");for(o=0,u=r.chartstyle.replace(/ /g,"").split(",");o<u.length;o++){switch(u[o]){case"bar":s=this.drawBar(t,i,n,r);break;case"line":s=this.drawLine(t,i,n,r);break;case"fit":s=this.drawFit(t,i,n,r);break;case"spline":s=this.drawSpline(t,i,n,r);break;case"pie":s=this.drawPie(t,n,r);break;case"point":s=this.drawPoints(t,i,n,r);break;case"radar":s=this.drawRadar(t,e,r)}this.elements.push(s)}return this.id=this.board.setId(this,"Chart"),this.elements},n.Z.Chart.prototype=new z.Z,n.Z.extend(n.Z.Chart.prototype,{drawLine:function(t,e,r,i){return i.fillcolor="none",i.highlightfillcolor="none",t.create("curve",[e,r],i)},drawSpline:function(t,e,r,i){return i.fillColor="none",i.highlightfillcolor="none",t.create("spline",[e,r],i)},drawFit:function(t,e,r,i){var n=i.degree;return n=Math.max(parseInt(n,10),1)||1,i.fillcolor="none",i.highlightfillcolor="none",t.create("functiongraph",[p.Z.regressionPolynomial(n,e,r)],i)},drawBar:function(t,e,r,i){var n,o,s,u,h,l,c,d,f,p,m=[],v=[],g=function(t,r){return function(){return e[t]()-r*s}},b={fixed:!0,withLabel:!1,visible:!1,name:""};if((f=a.Z.copyAttributes(i,t.options,"chart"))&&f.width)s=f.width;else{if(e.length<=1)s=1;else for(n=1,s=e[1]-e[0];n<e.length-1;n++)s=e[n+1]-e[n]<s?e[n+1]-e[n]:s;s*=.8}for(n=0,p=a.Z.copyAttributes(i,t.options,"chart","label");n<e.length;n++)a.Z.isFunction(e[n])?(u=g(n,-.5),h=g(n,0),l=g(n,.5)):(u=e[n]-.5*s,h=e[n],l=e[n]+.5*s),c=a.Z.isFunction(r[n])?r[n]():r[n],c=r[n],"horizontal"===f.dir?(v[0]=t.create("point",[0,u],b),v[1]=t.create("point",[c,u],b),v[2]=t.create("point",[c,l],b),v[3]=t.create("point",[0,l],b),a.Z.exists(f.labels)&&a.Z.exists(f.labels[n])&&(p.anchorY="middle",(o=t.create("text",[c,h,f.labels[n]],p)).visProp.anchorx=function(t){return function(){return t.X()>=0?"left":"right"}}(o))):(v[0]=t.create("point",[u,0],b),v[1]=t.create("point",[u,c],b),v[2]=t.create("point",[l,c],b),v[3]=t.create("point",[l,0],b),a.Z.exists(f.labels)&&a.Z.exists(f.labels[n])&&(p.anchorX="middle",(o=t.create("text",[h,c,f.labels[n]],p)).visProp.anchory=function(t){return function(){return t.Y()>=0?"bottom":"top"}}(o))),a.Z.isArray(f.colors)&&(d=f.colors,f.fillcolor=d[n%d.length]),m[n]=t.create("polygon",v,f),a.Z.exists(f.labels)&&a.Z.exists(f.labels[n])&&(m[n].text=o);return m},drawPoints:function(t,e,r,i){var n,o=[],s=i.infoboxarray;for(n=0,i.fixed=!0,i.name="";n<e.length;n++)i.infoboxtext=!!s&&s[n%s.length],o[n]=t.create("point",[e[n],r[n]],i);return o},drawPie:function(t,e,r){var i,n,o=[],u=[],h=(v.Z.sum(e),r.colors),l=r.highlightcolors,c=r.labels,d=r.radius||4,f=d,p=r.center||[0,0],g=p[0],b=p[1],y=function(t,r,i){return function(){var n,o,s,u=0;for(o=0;o<=t;o++)u+=parseFloat(a.Z.evaluate(e[o]));for(n=u,o=t+1;o<e.length;o++)n+=parseFloat(a.Z.evaluate(e[o]));return s=0!==n?2*Math.PI*u/n:0,f()*Math[r](s)+i}},C=function(t,e){var r=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],i=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];a.Z.exists(this.label)&&(this.label.rendNode.style.fontSize=e*a.Z.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new m.Z(s.Z.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+r*t,this.point1.coords.usrCoords[2]+i*t],this.board),this.fullUpdate()},Z=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),C.call(this,1.1,2))},x=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),C.call(this,.9090909,1))},_={fixed:!0,withLabel:!1,visible:!1,name:""};if(!a.Z.isArray(c))for(i=0,c=[];i<e.length;i++)c[i]="";for(a.Z.isFunction(d)||(f=function(){return d}),r.highlightonsector=r.highlightonsector||!1,r.straightfirst=!1,r.straightlast=!1,n=t.create("point",[g,b],_),o[0]=t.create("point",[function(){return f()+g},function(){return b}],_),i=0;i<e.length;i++)o[i+1]=t.create("point",[y(i,"cos",g),y(i,"sin",b)],_),r.name=c[i],r.withlabel=""!==r.name,r.fillcolor=h&&h[i%h.length],r.labelcolor=h&&h[i%h.length],r.highlightfillcolor=l&&l[i%l.length],u[i]=t.create("sector",[n,o[i],o[i+1]],r),r.highlightonsector&&(u[i].hasPoint=u[i].hasPointSector),r.highlightbysize&&(u[i].highlight=Z,u[i].noHighlight=x);return{sectors:u,points:o,midpoint:n}},drawRadar:function(t,e,r){var i,o,u,h,l,c,d,f,p,v,g,b,y,C,Z,x,_,E,w,N,S,A,P,D,M,O,T,B,F,R,L,k,I,Y,U,j,z,X,J,G,H,V,q=e.length,W=function(){var t,e,r,i,n=a.Z.evaluate(this.visProp.label.offset).slice(0);return t=this.point1.X(),e=this.point2.X(),r=this.point1.Y(),i=this.point2.Y(),e<t&&(n[0]=-n[0]),i<r&&(n[1]=-n[1]),this.setLabelRelativeCoords(n),new m.Z(s.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Q=function(e,r){var i,n,o;return i=t.create("transform",[-(Z[r]-y[r]),0],{type:"translate"}),n=t.create("transform",[w/(x[r]+C[r]-(Z[r]-y[r])),1],{type:"scale"}),i.melt(n),o=t.create("transform",[e],{type:"rotate"}),i.melt(o),i};if(q<=0)throw Error("JSXGraph radar chart: no data");if(u=r.paramarray,!a.Z.exists(u))throw Error("JSXGraph radar chart: need paramArray attribute");if((h=u.length)<=1)throw Error("JSXGraph radar chart: need more than one param in paramArray");for(i=0;i<q;i++)if(h!==e[i].length)throw Error("JSXGraph radar chart: use data length equal to number of params ("+e[i].length+" != "+h+")");for(o=0,l=[],c=[];o<h;o++)l[o]=e[0][o],c[o]=l[o];for(i=1;i<q;i++)for(o=0;o<h;o++)e[i][o]>l[o]&&(l[o]=e[i][o]),e[i][o]<c[o]&&(c[o]=e[i][o]);for(i=0,d=[],f=[];i<q;i++)d[i]="",f[i]=[];for(i=0,p=[],v=[],g=r.startshiftratio||0,b=r.endshiftratio||0;i<h;i++)p[i]=(l[i]-c[i])*g,v[i]=(l[i]-c[i])*b;if(y=r.startshiftarray||p,C=r.endshiftarray||v,Z=r.startarray||c,a.Z.exists(r.start))for(i=0;i<h;i++)Z[i]=r.start;if(x=r.endarray||l,a.Z.exists(r.end))for(i=0;i<h;i++)x[i]=r.end;if(y.length!==h)throw Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(C.length!==h)throw Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(Z.length!==h)throw Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(x.length!==h)throw Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(_=r.labelarray||d,E=r.colors,r.highlightcolors,w=r.radius||10,H=r.strokewidth||1,a.Z.exists(r.highlightonsector)||(r.highlightonsector=!1),N={name:r.name,id:r.id,strokewidth:H,polystrokewidth:r.polystrokewidth||H,strokecolor:r.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:r.fillColor||"#FFFF88",fillopacity:r.fillOpacity||.4,highlightfillcolor:r.highlightFillColor||"#FF7400",highlightstrokecolor:r.highlightStrokeColor||"black",gradient:r.gradient||"none"},A=(S=r.center||[0,0])[0],P=S[1],D=t.create("point",[A,P],{name:"",fixed:!0,withlabel:!1,visible:!1}),M=Math.PI/2-Math.PI/h,O=M=r.startangle||0,T=[],B=[],i=0;i<h;i++)for(O+=2*Math.PI/h,R=w*Math.cos(O)+A,L=w*Math.sin(O)+P,T[i]=t.create("point",[R,L],{name:"",fixed:!0,withlabel:!1,visible:!1}),B[i]=t.create("line",[D,T[i]],{name:u[i],strokeColor:N.strokecolor,strokeWidth:N.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:N.highlightstrokecolor}),B[i].getLabelAnchor=W,F=Q(O,i),o=0;o<e.length;o++)V=e[o][i],f[o][i]=t.create("point",[V,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),f[o][i].addTransform(f[o][i],F);for(i=0,k=[];i<q;i++)for(o=0,N.labelcolor=E&&E[i%E.length],N.strokecolor=E&&E[i%E.length],N.fillcolor=E&&E[i%E.length],k[i]=t.create("polygon",f[i],{withLines:!0,withLabel:!1,fillColor:N.fillcolor,fillOpacity:N.fillopacity,highlightFillColor:N.highlightfillcolor});o<h;o++)k[i].borders[o].setAttribute("strokecolor:"+E[i%E.length]),k[i].borders[o].setAttribute("strokewidth:"+N.polystrokewidth);switch(r.legendposition||"none"){case"right":Y=r.legendleftoffset||2,U=r.legendtopoffset||1,this.legend=t.create("legend",[A+w+Y,P+w-U],{labels:_,colors:E});break;case"none":break;default:n.Z.debug("Unknown legend position")}if(I=[],r.showcircles){for(i=0,j=[];i<6;i++)j[i]=20*i;if(j[0]="0",(X=(z=r.circlelabelarray||j).length)<2)throw Error("JSXGraph radar chart: too less circles in circleLabelArray");for(i=0,J=[],F=Q(M+Math.PI/h,0),N.fillcolor="none",N.highlightfillcolor="none",N.strokecolor=r.strokecolor||"black",N.strokewidth=r.circlestrokewidth||.5,N.layer=0,G=(x[0]-Z[0])/(X-1);i<X;i++)J[i]=t.create("point",[Z[0]+i*G,0],{name:z[i],size:0,fixed:!0,withLabel:!0,visible:!0}),J[i].addTransform(J[i],F),I[i]=t.create("circle",[D,J[i]],N)}return this.rendNode=k[0].rendNode,{circles:I,lines:B,points:f,midpoint:D,polygons:k}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),n.Z.createChart=function(t,e,r){var i,s,u,h,l,c,d,f,p,m,v,g,b,y,C,Z,x=[],_=o.Z.isBrowser?t.document.getElementById(e[0]):null;if(1===e.length&&a.Z.isString(e[0])){if(a.Z.exists(_)){if(p=a.Z.copyAttributes(r,t.options,"chart"),i=(_=new W().loadFromTable(e[0],p.withheaders,p.withheaders)).data,l=_.columnHeaders,s=_.rowHeaders,m=p.width,v=p.name,g=p.strokecolor,b=p.fillcolor,y=p.highlightstrokecolor,C=p.highlightfillcolor,t.suspendUpdate(),Z=i.length,f=[],p.rows&&a.Z.isArray(p.rows)){for(u=0;u<Z;u++)for(h=0;h<p.rows.length;h++)if(p.rows[h]===u||p.withheaders&&p.rows[h]===s[u]){f.push(i[u]);break}}else f=i;for(u=0,Z=f.length;u<Z;u++){if(d=[],p.chartstyle&&-1!==p.chartstyle.indexOf("bar")){for(c=m||.8,d.push(1-c/2+(u+.5)*c/Z),h=1;h<f[u].length;h++)d.push(d[h-1]+1);p.width=c/Z}v&&v.length===Z?p.name=v[u]:p.withheaders&&(p.name=l[u]),g&&g.length===Z?p.strokecolor=g[u]:p.strokecolor=R.Z.hsv2rgb((u+1)/Z*360,.9,.6),b&&b.length===Z?p.fillcolor=b[u]:p.fillcolor=R.Z.hsv2rgb((u+1)/Z*360,.9,1),y&&y.length===Z?p.highlightstrokecolor=y[u]:p.highlightstrokecolor=R.Z.hsv2rgb((u+1)/Z*360,.9,1),C&&C.length===Z?p.highlightfillcolor=C[u]:p.highlightfillcolor=R.Z.hsv2rgb((u+1)/Z*360,.9,.6),p.chartstyle&&-1!==p.chartstyle.indexOf("bar")?x.push(new n.Z.Chart(t,[d,f[u]],p)):x.push(new n.Z.Chart(t,[f[u]],p))}t.unsuspendUpdate()}return x}return p=a.Z.copyAttributes(r,t.options,"chart"),new n.Z.Chart(t,e,p)},n.Z.registerElement("chart",n.Z.createChart),n.Z.Legend=function(t,e,r){var i;if(this.constructor(),i=a.Z.copyAttributes(r,t.options,"legend"),this.board=t,this.coords=new m.Z(s.Z.COORDS_BY_USER,e,this.board),this.myAtts={},this.label_array=i.labelarray||i.labels,this.color_array=i.colorarray||i.colors,this.lines=[],this.myAtts.strokewidth=i.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=i.legendstyle||i.style,"vertical"===this.style)this.drawVerticalLegend(t,i);else throw Error("JSXGraph: Unknown legend style: "+this.style)},n.Z.Legend.prototype=new z.Z,n.Z.Legend.prototype.drawVerticalLegend=function(t,e){var r,i=e.linelength||1,n=(e.rowheight||20)/this.board.unitY,o=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new m.Z(s.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(r=0;r<this.label_array.length;r++)this.myAtts.name=this.label_array[r],this.myAtts.strokecolor=this.color_array[r%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[r%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[r%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[r]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-r*n],[this.coords.usrCoords[1]+i,this.coords.usrCoords[2]-r*n]],this.myAtts),this.lines[r].getLabelAnchor=o,this.lines[r].prepareUpdate().update().updateVisibility(a.Z.evaluate(this.lines[r].visProp.visible)).updateRenderer()},n.Z.createLegend=function(t,e,r){var i=[0,0];if(a.Z.exists(e)&&2===e.length)i=e;else throw Error("JSXGraph: Legend element needs two numbers as parameters");return new n.Z.Legend(t,i,r)},n.Z.registerElement("legend",n.Z.createLegend),n.Z.Chart,n.Z.Legend,n.Z.Transformation=function(t,e,r){this.elementClass=s.Z.OBJECT_CLASS_OTHER,this.type=s.Z.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=t,this.isNumericMatrix=!1,this.setMatrix(t,e,r),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},n.Z.Transformation.prototype={},n.Z.extend(n.Z.Transformation.prototype,{update:function(){return this},setMatrix:function(t,e,r){var i;for(i=0,this.isNumericMatrix=!0;i<r.length;i++)if("number"!=typeof r[i]){this.isNumericMatrix=!1;break}if("translate"===e){if(2!==r.length)throw Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,r,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===e){if(2!==r.length)throw Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,r,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===e)r.length<4&&(r[0]=t.select(r[0])),2===r.length&&(r[1]=t.select(r[1])),4===r.length&&(this.evalParam=a.Z.createEvalFunction(t,r,4)),this.update=function(){var t,e,i,n,o,s,a,h;1===r.length?a=r[0].stdform:2===r.length?a=u.Z.crossProduct(r[1].coords.usrCoords,r[0].coords.usrCoords):4===r.length&&(a=u.Z.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),t=a[1],e=a[2],s=(h=[-(i=a[0])*t,-i*e,t*t+e*e])[2],n=h[0]/h[2],o=h[1]/h[2],t=-a[2],e=a[1],this.matrix[1][1]=(t*t-e*e)/s,this.matrix[1][2]=2*t*e/s,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=n*(1-this.matrix[1][1])-o*this.matrix[1][2],this.matrix[2][0]=o*(1-this.matrix[2][2])-n*this.matrix[2][1]};else if("rotate"===e)3===r.length?this.evalParam=a.Z.createEvalFunction(t,r,3):r.length>0&&r.length<=2&&(this.evalParam=a.Z.createEvalFunction(t,r,1),2!==r.length||a.Z.isArray(r[1])||(r[1]=t.select(r[1]))),this.update=function(){var t,e,i=this.evalParam(0),n=Math.cos(i),o=Math.sin(i);this.matrix[1][1]=n,this.matrix[1][2]=-o,this.matrix[2][1]=o,this.matrix[2][2]=n,r.length>1&&(3===r.length?(t=this.evalParam(1),e=this.evalParam(2)):a.Z.isArray(r[1])?(t=r[1][0],e=r[1][1]):(t=r[1].X(),e=r[1].Y()),this.matrix[1][0]=t*(1-n)+e*o,this.matrix[2][0]=e*(1-n)-t*o)};else if("shear"===e){if(2!==r.length)throw Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,r,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===e){if(9!==r.length)throw Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=a.Z.createEvalFunction(t,r,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(t,e){return(this.update(),a.Z.exists(e))?u.Z.matVecMult(this.matrix,t.initialCoords.usrCoords):u.Z.matVecMult(this.matrix,t.coords.usrCoords)},applyOnce:function(t){var e,r,i;for(a.Z.isArray(t)||(t=[t]),r=t.length,i=0;i<r;i++)this.update(),e=u.Z.matVecMult(this.matrix,t[i].coords.usrCoords),t[i].coords.setCoordinates(s.Z.COORDS_BY_USER,e)},bindTo:function(t){var e,r;if(a.Z.isArray(t))for(e=0,r=t.length;e<r;e++)t[e].transformations.push(this);else t.transformations.push(this)},setProperty:function(t){n.Z.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var e,r,i,n,o,s,a=[];for(e=0,r=t.matrix.length,i=this.matrix[0].length;e<r;e++)a[e]=[];for(this.update(),t.update(),e=0;e<r;e++)for(s=0;s<i;s++){for(n=0,o=0;n<r;n++)o+=t.matrix[e][n]*this.matrix[n][s];a[e][s]=o}return this.update=function(){var t=this.matrix.length,r=this.matrix[0].length;for(e=0;e<t;e++)for(s=0;s<r;s++)this.matrix[e][s]=a[e][s]},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(t=this.parents),t}}),n.Z.createTransform=function(t,e,r){return new n.Z.Transformation(t,r.type,e)},n.Z.registerElement("transform",n.Z.createTransform),n.Z.Transformation,n.Z.Turtle=function(t,e,r){var i,n,o;return this.constructor(t,r,s.Z.OBJECT_TYPE_TURTLE,s.Z.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=a.Z.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,i=0,n=0,o=90,0!==e.length&&(3===e.length?(i=e[0],n=e[1],o=e[2]):2===e.length?a.Z.isArray(e[0])?(i=e[0][0],n=e[0][1],o=e[1]):(i=e[0],n=e[1]):(i=e[0][0],n=e[0][1])),this.init(i,n,o),this.methodMap=a.Z.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",getPenColor:"getPenColor",getHighlightPenColor:"getHighlightPenColor",getPenSize:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},n.Z.Turtle.prototype=new z.Z,n.Z.extend(n.Z.Turtle.prototype,{init:function(t,e,r){var i={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/u.Z.hypot(this.board.unitX,this.board.unitY),this.pos=[t,e],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,i),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],i),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-r),this.board.update()},forward:function(t){if(0===t)return this;var e,r=t*Math.cos(this.dir*Math.PI/180),i=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((e=this.board.create("transform",[r,i],{type:"translate"})).applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=r,this.pos[1]+=i,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){return this.dir-=t,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,e;for(t=0;t<this.objects.length;t++)(e=this.objects[t]).type===s.Z.OBJECT_TYPE_CURVE&&(this.board.removeObject(e),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var t,e,r=this.objects.length;for(t=0;t<r;t++)e=this.objects[t],this.board.removeObject(e);return this.init(0,0,90),this},setPos:function(t,e){return a.Z.isArray(t)?this.pos=t:this.pos=[t,e],this.turtleIsHidden||(this.turtle.setPositionDirectly(s.Z.COORDS_BY_USER,[t,e]),this.turtle2.setPositionDirectly(s.Z.COORDS_BY_USER,[t,e+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},getPenAttribute:function(t){var e=this.objects.length;return a.Z.evaluate(this.objects[4===e?0:e-1].visProp[t])},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var e,r,i,n=this.objects.length;for(e=0;e<n;e++)(r=this.objects[e]).type===s.Z.OBJECT_TYPE_CURVE&&r.setAttribute(t);return i=this.visProp.id,this.visProp=a.Z.deepCopy(this.curve.visProp),this.visProp.id=i,this._attributes=a.Z.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,e){return this._attributes[t.toLowerCase()]=e,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var e,r,i,n;return a.Z.isArray(t)?(e=this.pos[0],r=this.pos[1],i=t[0],n=Math.atan2(t[1]-r,i-e),this.right(this.dir-180*n/Math.PI)):a.Z.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var e,r,i;return a.Z.isArray(t)&&(e=t[0]-this.pos[0],r=t[1]-this.pos[1],this.turtleIsHidden||((i=this.board.create("transform",[e,r],{type:"translate"})).applyOnce(this.turtle),i.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,e){var r,i,n,o,a=this.objects.length;for(r=0,i=0;r<a;r++)if((n=this.objects[r]).elementClass===s.Z.OBJECT_CLASS_CURVE){if(i<=t&&t<i+n.numberPoints)return o=t-i,n[e](o);i+=n.numberPoints}return this[e]()},X:function(t){return a.Z.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return a.Z.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,e=this.objects.length,r=0;for(t=0;t<e;t++)this.objects[t].elementClass===s.Z.OBJECT_CLASS_CURVE&&(r+=this.objects[t].numberPoints);return r},hasPoint:function(t,e){var r,i;for(r=0;r<this.objects.length;r++)if((i=this.objects[r]).type===s.Z.OBJECT_TYPE_CURVE&&i.hasPoint(t,e))return!0;return!1}}),n.Z.createTurtle=function(t,e,r){var i;return e=e||[],i=a.Z.copyAttributes(r,t.options,"turtle"),new n.Z.Turtle(t,e,i)},n.Z.registerElement("turtle",n.Z.createTurtle),n.Z.Turtle,n.Z.Ticks=function(t,e,r){if(this.constructor(t.board,r,s.Z.OBJECT_TYPE_TICKS,s.Z.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],a.Z.isFunction(e))throw this.ticksFunction=e,Error("Function arguments are no longer supported.");a.Z.isArray(e)?this.fixedTicks=e:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},n.Z.Ticks.prototype=new z.Z,n.Z.extend(n.Z.Ticks.prototype,{hasPoint:function(t,e){var r,i,n,o,h=this.ticks&&this.ticks.length||0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,n=a.Z.evaluate(this.visProp.precision[o])):n=this.board.options.precision.hasPoint,n+=.5*a.Z.evaluate(this.visProp.strokewidth),!a.Z.evaluate(this.line.visProp.scalable)||this.line.elementClass===s.Z.OBJECT_CLASS_CURVE||0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==s.Z.OBJECT_TYPE_AXIS)return!1;for(r=0;r<h;r++)if((i=this.ticks[r])[2]&&!(0===this.line.stdform[1]&&Math.abs(i[0][0]-this.line.point1.coords.scrCoords[1])<u.Z.eps||0===this.line.stdform[2]&&Math.abs(i[1][0]-this.line.point1.coords.scrCoords[2])<u.Z.eps)&&(Math.abs(i[0][0]-i[0][1])>=1||Math.abs(i[1][0]-i[1][1])>=1)){if(0===this.line.stdform[1]){if(Math.abs(e-this.line.point1.coords.scrCoords[2])<2*n&&i[0][0]-n<t&&t<i[0][1]+n)return!0}else if(0===this.line.stdform[2]&&Math.abs(t-this.line.point1.coords.scrCoords[1])<2*n&&i[1][0]-n<e&&e<i[1][1]+n)return!0}return!1},setPositionDirectly:function(t,e,r){var i,n,o=new m.Z(t,e,this.board),h=new m.Z(t,r,this.board),l=this.board.getBoundingBox();return this.line.type===s.Z.OBJECT_TYPE_AXIS&&a.Z.evaluate(this.line.visProp.scalable)&&(Math.abs(this.line.stdform[1])<u.Z.eps&&Math.abs(o.usrCoords[1]*h.usrCoords[1])>u.Z.eps?(i=h.usrCoords[1]/o.usrCoords[1],l[0]*=i,l[2]*=i,this.board.setBoundingBox(l,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<u.Z.eps&&Math.abs(o.usrCoords[2]*h.usrCoords[2])>u.Z.eps&&(n=h.usrCoords[2]/o.usrCoords[2],l[3]*=n,l[1]*=n,this.board.setBoundingBox(l,this.board.keepaspectratio,"update"))),this},calculateTicksCoordinates:function(){var t,e,r,i;if(!(this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<u.Z.eps&&Math.abs(this.dy)<u.Z.eps)))return t=this.getZeroCoordinates(),e=this.line.elementClass===s.Z.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(t,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},"polar"===a.Z.evaluate(this.visProp.type)&&(i=this.board.getBoundingBox(),r=Math.max(u.Z.hypot(i[0],i[1]),u.Z.hypot(i[2],i[3])),e.upper=r),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,e):this.generateFixedTicks(t,e),this},setTicksSizeVariables:function(t){var e,r,i,n,o=.5*a.Z.evaluate(this.visProp.majorheight),s=.5*a.Z.evaluate(this.visProp.minorheight);a.Z.exists(t)?(r=this.line.minX(),i=this.line.maxX(),(n=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):u.Z.relDif(t,r)<u.Z.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):u.Z.relDif(t,i)<u.Z.eps?(this.dxMaj=this.line.points[n-2].usrCoords[2]-this.line.points[n-1].usrCoords[2],this.dyMaj=this.line.points[n-1].usrCoords[1]-this.line.points[n-2].usrCoords[1]):(this.dxMaj=-p.Z.D(this.line.Y)(t),this.dyMaj=p.Z.D(this.line.X)(t))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,e=u.Z.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=o/e*this.board.unitX,this.dyMaj*=o/e*this.board.unitY,this.dxMin*=s/e*this.board.unitX,this.dyMin*=s/e*this.board.unitY,this.minStyle=0>a.Z.evaluate(this.visProp.minorheight)?"infinite":"finite",this.majStyle=0>a.Z.evaluate(this.visProp.majorheight)?"infinite":"finite"},getZeroCoordinates:function(){var t,e,r,i,n,o,u,h,l=a.Z.evaluate(this.visProp.anchor);return this.line.elementClass===s.Z.OBJECT_CLASS_LINE?this.line.type===s.Z.OBJECT_TYPE_AXIS?c.Z.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(r=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],e=this.line.point1.coords.usrCoords[2],o=this.line.point2.coords.usrCoords[0],i=this.line.point2.coords.usrCoords[1],n=this.line.point2.coords.usrCoords[2],"right"===l)?this.line.point2.coords:"middle"===l?new m.Z(s.Z.COORDS_BY_USER,[(r+o)*.5,(t+i)*.5,(e+n)*.5],this.board):a.Z.isNumber(l)?new m.Z(s.Z.COORDS_BY_USER,[r+(o-r)*l,t+(i-t)*l,e+(n-e)*l],this.board):this.line.point1.coords:(u=this.line.minX(),h=this.line.maxX(),"right"===l?h:"middle"===l?(u+h)*.5:a.Z.isNumber(l)?u*(1-l)+h*l:u)},getLowerAndUpperBounds:function(t,e){var r,i,n,o,h,l,d,f,p,v,g,b,y,C,Z,x,_=10*u.Z.eps,E=a.Z.evaluate(this.line.visProp.straightfirst),w=a.Z.evaluate(this.line.visProp.straightlast),N=a.Z.evaluate(this.visProp.includeboundaries);return this.line.elementClass===s.Z.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(h=new m.Z(s.Z.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),l=new m.Z(s.Z.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),d=Math.abs(h.usrCoords[0])>=u.Z.eps&&h.scrCoords[1]>=0&&h.scrCoords[1]<=this.board.canvasWidth&&h.scrCoords[2]>=0&&h.scrCoords[2]<=this.board.canvasHeight,f=Math.abs(l.usrCoords[0])>=u.Z.eps&&l.scrCoords[1]>=0&&l.scrCoords[1]<=this.board.canvasWidth&&l.scrCoords[2]>=0&&l.scrCoords[2]<=this.board.canvasHeight,a.Z.exists(e)&&"ticksdistance"===e?(c.Z.calcStraight(this.line,h,l,0),Z=this.getDistanceFromZero(t,h),x=this.getDistanceFromZero(t,l),c.Z.calcStraight(this.line,h,l,a.Z.evaluate(this.line.visProp.margin)),Z=this.getDistanceFromZero(t,h)-Z,x=this.getDistanceFromZero(t,l).m2):c.Z.calcLineDelimitingPoints(this.line,h,l),(b=((b=Math.atan2(this.line.point2.Y()-this.line.point1.Y(),this.line.point2.X()-this.line.point1.X()))+2*Math.PI)%(2*Math.PI))>.5*Math.PI&&b<3*Math.PI*.5&&(h.usrCoords[1]*=-1,l.usrCoords[1]*=-1,h.usr2screen(),l.usr2screen()),b>Math.PI&&b<2*Math.PI&&(h.usrCoords[2]*=-1,l.usrCoords[2]*=-1,h.usr2screen(),l.usr2screen()),n=a.Z.evaluate(this.line.visProp.firstarrow),o=a.Z.evaluate(this.line.visProp.lastarrow),y=this.getDistanceFromZero(t,h),C=this.getDistanceFromZero(t,l),(n||o)&&(g=this.board.renderer.getArrowHeadData(this.line,a.Z.evaluate(this.line.visProp.strokewidth),""),this.board.renderer.getPositionArrowHead(this.line,h,l,g)),p=this.getDistanceFromZero(t,h),v=this.getDistanceFromZero(t,l),y=p-y,C=p-C,p<v?(r=p,i=v,E||!d||N||(r+=_),w||!f||N||(i-=_)):v<p?(r=v,i=p,w||!f||N||(r+=_),E||!d||N||(i-=_)):(r=0,i=0),{lower:r,upper:i,a1:y,a2:C,m1:Z,m2:x})},getDistanceFromZero:function(t,e){var r,i,n,o,a;return r=this.line.point1.coords,i=this.line.point2.coords,a=t.distance(s.Z.COORDS_BY_USER,e),n=[i.usrCoords[0]-r.usrCoords[0],i.usrCoords[1]-r.usrCoords[1],i.usrCoords[2]-r.usrCoords[2]],o=[e.usrCoords[0]-t.usrCoords[0],e.usrCoords[1]-t.usrCoords[1],e.usrCoords[2]-t.usrCoords[2]],0>u.Z.innerProduct(n,o,3)&&(a*=-1),a},generateEquidistantTicks:function(t,e){var r,i,n,o=u.Z.eps,h=a.Z.evaluate(this.visProp.minorticks);if(n=this.getDistanceMajorTicks(),this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(i=this.getXandYdeltas()),n*=a.Z.evaluate(this.visProp.scale),n/=h+1,this.ticksDelta=n,!(n<u.Z.eps)){for(r=0,a.Z.evaluate(this.visProp.drawzero)||(r=n);r<=e.upper+o&&(r>=e.lower-o&&this.processTickPosition(t,r,n,i),r+=n,!(e.upper-r>1e4*n)););for(r=-n;r>=e.lower-o&&(r<=e.upper+o&&this.processTickPosition(t,r,n,i),!((r-=n)-e.lower>1e4*n)););}},getDistanceMajorTicks:function(){var t,e,r,i,n,o,s,h;return a.Z.evaluate(this.visProp.insertticks)?(o=((r=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-r.lower)/6/(n=a.Z.evaluate(this.visProp.scale)),s=a.Z.evaluate(this.visProp.minticksdistance)/n,h=a.Z.evaluate(this.visProp.minorticks),i=this.getXandYdeltas(),i.x*=this.board.unitX,i.y*=this.board.unitY,s/=u.Z.hypot(i.x,i.y),s*=h+1,2*(t=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)))>=s?t*=2:5*t>=s&&(t*=5),5*(e=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)))<o?e*=5:2*e<o&&(e*=2),t=Math.max(t,e)):a.Z.evaluate(this.visProp.ticksdistance)},processTickPosition:function(t,e,r,i){var n,o,u,h,l,c=a.Z.evaluate(this.visProp.ticksperlabel),d=null;this.line.elementClass===s.Z.OBJECT_CLASS_LINE?(n=t.usrCoords[1]+e*i.x,o=t.usrCoords[2]+e*i.y):(n=this.line.X(t+e),o=this.line.Y(t+e)),u=new m.Z(s.Z.COORDS_BY_USER,[n,o],this.board),this.line.elementClass===s.Z.OBJECT_CLASS_CURVE&&(d=t+e,this.setTicksSizeVariables(d)),u.major=Math.round(e/r)%(a.Z.evaluate(this.visProp.minorticks)+1)==0,c||(c=a.Z.evaluate(this.visProp.minorticks)+1),l=Math.round(e/r)%c==0,3===(h=this.createTickPath(u,u.major)).length&&(this.ticks.push(h),l&&a.Z.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(u,t,d),u,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,e){var r,i,n,o,h,l,c,d,f=u.Z.eps,p=a.Z.isArray(this.visProp.labels),v=a.Z.evaluate(this.visProp.drawlabels);for(this.line.elementClass===s.Z.OBJECT_CLASS_LINE&&(d=this.getXandYdeltas()),n=0;n<this.fixedTicks.length;n++)this.line.elementClass===s.Z.OBJECT_CLASS_LINE?(c=this.fixedTicks[n],h=t.usrCoords[1]+c*d.x,l=t.usrCoords[2]+c*d.y):(c=t+this.fixedTicks[n],h=this.line.X(c),l=this.line.Y(c)),r=new m.Z(s.Z.COORDS_BY_USER,[h,l],this.board),this.line.elementClass===s.Z.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(c),3===(o=this.createTickPath(r,!0)).length&&c>=e.lower-f&&c<=e.upper+f&&(this.ticks.push(o),v&&(p||a.Z.exists(this.visProp.labels[n]))?(i=p?a.Z.evaluate(this.visProp.labels[n]):c,this.labelsData.push(this.generateLabelData(this.generateLabelText(r,t,i),r,n))):this.labelsData.push(null))},getXandYdeltas:function(){var t,e,r=this.line.point1.Dist(this.line.point2);return this.line.type===s.Z.OBJECT_TYPE_AXIS?(t=this.line.point1.coords.usrCoords,e=this.line.point2.coords.usrCoords,(t[1]>e[1]||Math.abs(t[1]-e[1])<u.Z.eps&&t[2]>e[2])&&(t=this.line.point2.coords.usrCoords,e=this.line.point1.coords.usrCoords)):(t=this.line.point1.coords.usrCoords,e=this.line.point2.coords.usrCoords),{x:(e[1]-t[1])/r,y:(e[2]-t[2])/r}},_isInsideCanvas:function(t,e,r){var i=this.board.canvasWidth,n=this.board.canvasHeight;return void 0===r&&(r=0),t[0]>=r&&t[0]<=i-r&&e[0]>=r&&e[0]<=n-r||t[1]>=r&&t[1]<=i-r&&e[1]>=r&&e[1]<=n-r},createTickPath:function(t,e){var r,i,n,o,s,h,l,d,f,p,m,v,g,b,y,C,Z,x=[-2e6,-2e6],_=[-2e6,-2e6];if(r=t.scrCoords,e?(o=this.dxMaj,s=this.dyMaj,f=this.majStyle,y=a.Z.evaluate(this.visProp.majortickendings[0])>0,C=a.Z.evaluate(this.visProp.majortickendings[1])>0):(o=this.dxMin,s=this.dyMin,f=this.minStyle,y=a.Z.evaluate(this.visProp.tickendings[0])>0,C=a.Z.evaluate(this.visProp.tickendings[1])>0),i=[-s*r[1]-o*r[2],s,o],e&&"polar"===a.Z.evaluate(this.visProp.type)){if(v=this.board.getBoundingBox(),b=(g=2*Math.PI)/180,r=t.usrCoords,(m=u.Z.hypot(r[1],r[2]))<Math.max(u.Z.hypot(v[0],v[1]),u.Z.hypot(v[2],v[3]))){for(p=0,x=[],_=[];p<=g;p+=b)x.push(this.board.origin.scrCoords[1]+m*Math.cos(p)*this.board.unitX),_.push(this.board.origin.scrCoords[2]+m*Math.sin(p)*this.board.unitY);return[x,_,e]}}else{if("infinite"===f){if(a.Z.evaluate(this.visProp.ignoreinfinitetickendings)&&(y=C=!0),n=c.Z.meetLineBoard(i,this.board),y&&C)x[0]=n[0].scrCoords[1],x[1]=n[1].scrCoords[1],_[0]=n[0].scrCoords[2],_[1]=n[1].scrCoords[2];else if((Z=[u.Z.innerProduct(n[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],u.Z.innerProduct(n[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<Z[1]&&(n.reverse(),Z.reverse()),y){if(Z[0]<0)return[];Z[1]<0?(x[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2],x[1]=r[1],_[1]=r[2]):(x[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2],x[1]=n[1].scrCoords[1],_[1]=n[1].scrCoords[2])}else if(C){if(Z[1]>0)return[];Z[0]>0?(x[0]=r[1],_[0]=r[2]):(x[0]=n[0].scrCoords[1],_[0]=n[0].scrCoords[2]),x[1]=n[1].scrCoords[1],_[1]=n[1].scrCoords[2]}}else h=Math.cos(d=">"===a.Z.evaluate(this.visProp.face)?Math.PI/4:"<"===a.Z.evaluate(this.visProp.face)?-Math.PI/4:0)*o-Math.sin(d)*s,l=Math.sin(d)*o+Math.cos(d)*s,x[0]=r[1]+h*y,_[0]=r[2]-l*y,x[1]=r[1],_[1]=r[2],h=Math.cos(d=-d)*o-Math.sin(d)*s,l=Math.sin(d)*o+Math.cos(d)*s,x[2]=r[1]-h*C,_[2]=r[2]+l*C;if(this._isInsideCanvas(x,_))return[x,_,e]}return[]},formatLabelText:function(t){var e,r,i=a.Z.evaluate(this.visProp.scalesymbol);return a.Z.isNumber(t)?(r=a.Z.evaluate(this.visProp.digits),this.useLocale()?e=this.formatNumberLocale(t,r):((e=(Math.round(1e11*t)/1e11).toString()).length>a.Z.evaluate(this.visProp.maxlabellength)||-1!==e.indexOf("e"))&&(3!==a.Z.evaluate(this.visProp.precision)&&3===r&&(r=a.Z.evaluate(this.visProp.precision)),e=t.toExponential(r).toString()),a.Z.evaluate(this.visProp.beautifulscientificticklabels)&&(e=this.beautifyScientificNotationLabel(e)),e.indexOf(".")>-1&&-1===e.indexOf("e")&&(e=(e=e.replace(/0+$/,"")).replace(/\.$/,""))):e=t.toString(),i.length>0&&("1"===e?e=i:"-1"===e?e="-"+i:"0"!==e&&(e+=i)),a.Z.evaluate(this.visProp.useunicodeminus)&&(e=e.replace(/-/g,"")),e},beautifyScientificNotationLabel:function(t){return -1===t.indexOf("e")?t:(parseFloat(t.substring(0,t.indexOf("e")))+t.substring(t.indexOf("e"))).replace(/e(.*)$/g,function(t,e){return"10"+e.replace(/-/g,"").replace(/\+/g,"").replace(/0/g,"").replace(/1/g,"\xb9").replace(/2/g,"\xb2").replace(/3/g,"\xb3").replace(/4/g,"").replace(/5/g,"").replace(/6/g,"").replace(/7/g,"").replace(/8/g,"").replace(/9/g,"")})},generateLabelText:function(t,e,r){var i;if(!a.Z.exists(r)){if(Math.abs(i=this.getDistanceFromZero(e,t))<u.Z.eps)return"0";r=i/a.Z.evaluate(this.visProp.scale)}return this.formatLabelText(r)},generateLabelData:function(t,e,r){var i,n,o;return(o=a.Z.evaluate(this.visProp.label.fontsize),i=[e.scrCoords[1],e.scrCoords[1]],n=[e.scrCoords[2],e.scrCoords[2]],this._isInsideCanvas(i,n,(void 0===o?12:o)*.5))?(i=a.Z.evaluate(this.visProp.label.offset[0]),n=a.Z.evaluate(this.visProp.label.offset[1]),{x:e.usrCoords[1]+i/this.board.unitX,y:e.usrCoords[2]+n/this.board.unitY,t:t,i:r}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate&&(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1),this},updateRendererLabels:function(){var t,e,r,i,o,s,u,h;for(t=0,r=this.labelsData.length,i=this.labels.length,e=0;t<r;t++)null!==this.labelsData[t]&&(u=this.labelsData[t],e<i?((s=this.labels[e]).setText(u.t),s.setCoords(u.x,u.y),e++):(this.labelCounter+=1,o={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},(o=a.Z.deepCopy(o,this.visProp.label)).id=this.id+u.i+"Label"+this.labelCounter,s=n.Z.createText(this.board,[u.x,u.y,u.t],o),this.addChild(s),s.setParents(this),s.isDraggable=!1,s.dump=!1,this.labels.push(s)),"inherit"===(h=a.Z.evaluate(this.visProp.label.visible))&&(h=this.visPropCalc.visible),s.prepareUpdate().updateVisibility(h).updateRenderer(),s.distanceX=a.Z.evaluate(this.visProp.label.offset[0]),s.distanceY=a.Z.evaluate(this.visProp.label.offset[1]));for(e=r=e;e<i;e++)this.board.renderer.display(this.labels[e],!1),this.labels[e].visProp.visible=this.labels[e].visPropCalc.visible=!1;return this},hideElement:function(){var t;for(n.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)a.Z.exists(this.labels[t])&&this.labels[t].hideElement();return this},showElement:function(){var t;for(n.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)a.Z.exists(this.labels[t])&&this.labels[t].showElement();return this}}),n.Z.createTicks=function(t,e,r){var i,o,u=a.Z.copyAttributes(r,t.options,"ticks");if(o=e.length<2?u.ticksdistance:e[1],e[0].elementClass===s.Z.OBJECT_CLASS_LINE||e[0].elementClass===s.Z.OBJECT_CLASS_CURVE)i=new n.Z.Ticks(e[0],o,u);else throw Error("JSXGraph: Can't create Ticks with parent types '"+typeof e[0]+"'.");return a.Z.isFunction(u.generatelabelvalue)&&(i.generateLabelText=u.generatelabelvalue),a.Z.isFunction(u.generatelabeltext)&&(i.generateLabelText=u.generatelabeltext),i.setParents(e[0]),i.isDraggable=!0,i.fullUpdate(e[0].visPropCalc.visible),i},n.Z.createHatchmark=function(t,e,r){var i,n,o,u,h,l=[],c=a.Z.copyAttributes(r,t.options,"hatch");if(e[0].elementClass!==s.Z.OBJECT_CLASS_LINE&&e[0].elementClass!==s.Z.OBJECT_CLASS_CURVE||"number"!=typeof e[1])throw Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof e[0]+"' and '"+typeof e[1]+" and ''"+typeof e[2]+"'.");for(n=0,o=-(((i=e[1])-1)*(u=c.ticksdistance)*.5);n<i;n++)l[n]=o+n*u;return(h=t.create("ticks",[e[0],l],c)).elType="hatch",e[0].inherits.push(h),h},n.Z.registerElement("ticks",n.Z.createTicks),n.Z.registerElement("hash",n.Z.createHatchmark),n.Z.registerElement("hatch",n.Z.createHatchmark),n.Z.Ticks,r(3156),n.Z.CA=function(t,e,r){this.node=t,this.createNode=e,this.parser=r},n.Z.extend(n.Z.CA.prototype,{findMapNode:function(t,e){var r,i,n;if("op_assign"===e.value&&e.children[0].value===t)return e.children[1];if(e.children){for(r=0,i=e.children.length;r<i;++r)if(null!==(n=this.findMapNode(t,e.children[r])))return n}return null},setMath:function(t){var e,r;if(("node_op"==t.type&&("op_add"==t.value||"op_sub"==t.value||"op_mul"==t.value||"op_div"==t.value||"op_neg"==t.value||"op_execfun"==t.value||"op_exp"==t.value)||"node_var"==t.type||"node_const"==t.type)&&(t.isMath=!0),t.children)for(e=0,r=t.children.length;e<r;++e)this.setMath(t.children[e])},deriveElementary:function(t,e){var r,i=t.children[0].value,n=t.children[1];switch(i){case"abs":r=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))]));break;case"sqrt":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1]))));break;case"sin":r=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n));break;case"cos":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)));break;case"tan":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n)),this.createNode("node_const",2)));break;case"cot":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)),this.createNode("node_const",2))));break;case"exp":r=this.createNode(t.type,t.value,a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1]));break;case"pow":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],e),this.createNode("node_op","op_div",a.Z.deepCopy(t.children[1][1]),a.Z.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(t.children[1][0])]))));break;case"log":case"ln":r=this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0]));break;case"log2":case"lb":case"ld":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":r=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))]));break;case"acos":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))])));break;case"atan":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;case"acot":r=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))));break;case"sinh":r=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[a.Z.deepCopy(n[0])]);break;case"cosh":r=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[a.Z.deepCopy(n[0])]);break;case"tanh":r=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[a.Z.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":r=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;default:throw r=this.createNode("node_const",0),console.log('Derivative of "'+i+'" not yet implemented'),Error("Error("+this.line+"): ")}return r},derivative:function(t,e){var r;switch(t.type){case"node_op":switch(t.value){case"op_execfun":r="pow"==t.children[0].value?this.deriveElementary(t,e):0===t.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(t,e),this.derivative(t.children[1][0],e));break;case"op_div":r=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),a.Z.deepCopy(t.children[1])),this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[0]),this.derivative(t.children[1],e))),this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[1]),a.Z.deepCopy(t.children[1])));break;case"op_mul":r=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[0]),this.derivative(t.children[1],e)),this.createNode("node_op","op_mul",this.derivative(t.children[0],e),a.Z.deepCopy(t.children[1])));break;case"op_neg":r=this.createNode("node_op","op_neg",this.derivative(t.children[0],e));break;case"op_add":case"op_sub":r=this.createNode("node_op",t.value,this.derivative(t.children[0],e),this.derivative(t.children[1],e));break;case"op_exp":r=this.createNode("node_op","op_mul",a.Z.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),this.createNode("node_op","op_div",a.Z.deepCopy(t.children[1]),a.Z.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(t.children[0])]))))}break;case"node_var":r=t.value===e?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":r=this.createNode("node_const",0)}return r},expandDerivatives:function(t,e,r){var i,n,o,s,u,h,l,c,d,f,p,m;if(!t)return 0;for(n=0,this.line=t.line,this.col=t.col,i=t.children.length;n<i;++n)if(t.children[n]&&t.children[n].type)t.children[n]=this.expandDerivatives(t.children[n],t,r);else if(a.Z.isArray(t.children[n]))for(o=0;o<t.children[n].length;++o)t.children[n][o]&&t.children[n][o].type&&(t.children[n][o]=this.expandDerivatives(t.children[n][o],t,r));if("node_op"===t.type&&"op_execfun"===t.value&&t.children[0]&&"D"===t.children[0].value){if(m=!1,"node_var"==t.children[1][0].type&&(c=t.children[1][0].value,null!==(s=this.findMapNode(c,r))&&(m=!0)),m?(f=s.children[0],d=t.children[1].length>=2?t.children[1][1].value:s.children[0][0],u=s.children[1]):(u=t.children[1][0],f=["x"],d=t.children[1].length>=2?t.children[1][1].value:"x"),p=t.children[1].length>=3?t.children[1][2].value:1,l=u,p>=1)for(;p>=1;)l=this.derivative(l,d),l=this.removeTrivialNodes(l),p--;h="node_op"==e.type&&"op_assign"==e.value?this.createNode("node_op","op_map",f,l):l,this.setMath(h),t.type=h.type,t.value=h.value,h.children.length>0&&(t.children[0]=h.children[0]),h.children.length>1&&(t.children[1]=h.children[1])}return t},removeTrivialNodes:function(t){var e,r,i,n,o;if(a.Z.isArray(t))for(e=0,r=t.length;e<r;++e)t[e]=this.removeTrivialNodes(t[e]);if("node_op"!=t.type||!t.children)return t;for(e=0,r=t.children.length;e<r;++e){this.mayNotBeSimplified=!1;do t.children[e]=this.removeTrivialNodes(t.children[e]);while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(i=t.children[0],"node_var"==(n=t.children[1]).type){for(e=0;e<i.length;++e)if(i[e]==n.value){n.isMath=!0;break}}break;case"op_add":if(i=t.children[0],n=t.children[1],"node_const"==i.type&&0===i.value)return n;if("node_const"==n.type&&0===n.value)return i;if("node_const"==i.type&&"node_const"==n.type)return i.value+=n.value,i;break;case"op_mul":if(i=t.children[0],n=t.children[1],"node_const"==i.type&&1==i.value)return n;if("node_const"==n.type&&1==n.value||"node_const"==i.type&&0===i.value)return i;if("node_const"==n.type&&0===n.value||"node_const"==n.type&&0===n.value)return n;if("node_op"==i.type&&"op_neg"==i.value&&"node_op"==n.type&&"op_neg"==n.value)return t.children=[i.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==i.value&&"op_neg"!=n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",i.children[0],n)],this.mayNotBeSimplified=!0,t;if("op_neg"!=i.value&&"op_neg"==n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",i,n.children[0])],this.mayNotBeSimplified=!0,t;if("op_div"==i.value&&"node_const"==i.children[0].type&&1==i.children[0].value)return t.type="node_op",t.value="op_div",t.children=[n,i.children[1]],this.mayNotBeSimplified=!0,t;if("op_div"==n.value&&"node_const"==n.children[0].type&&1==n.children[0].value)return t.type="node_op",t.value="op_div",t.children=[i,n.children[1]],this.mayNotBeSimplified=!0,t;if("node_const"!=i.type&&"node_const"==n.type||"node_const"!=i.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_const"==n.children[0].type||"node_op"==i.type&&"op_execfun"!=i.value&&("node_var"==n.type||"node_op"==n.type&&"op_execfun"==n.value)||"node_op"!=i.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_var"==n.children[0].type)return t.children=[n,i],this.mayNotBeSimplified=!0,t;if("node_const"!=i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return o=n.children[0],n.children[0]=i,t.children=[o,n],this.mayNotBeSimplified=!0,t;if("node_const"!=n.type&&"node_op"==i.type&&"op_mul"==i.value&&"node_const"==i.children[0].type)return t.children=[i.children[0],this.createNode("node_op","op_mul",i.children[1],n)],this.mayNotBeSimplified=!0,t;if("node_const"==i.type&&"node_const"==n.type)return i.value*=n.value,i;if("node_const"==i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=i.value,n;if(i.hash=this.parser.compile(i),n.hash=this.parser.compile(n),i.hash===n.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if("node_const"==i.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=i.value,n;if("node_op"==n.type&&"op_exp"==n.value&&(i.hash||(i.hash=this.parser.compile(i)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),i.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if("node_op"==i.type&&"op_exp"==i.value&&"node_op"==n.type&&"op_exp"==n.value&&(i.children[0].hash=this.parser.compile(i.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),i.children[0].hash===n.children[0].hash))return i.children[1]=this.createNode("node_op","op_add",i.children[1],n.children[1]),this.mayNotBeSimplified=!0,i;break;case"op_sub":if(i=t.children[0],n=t.children[1],"node_const"==i.type&&0===i.value)return t.value="op_neg",t.children[0]=n,t;if("node_const"==n.type&&0===n.value)return i;if("node_const"==i.type&&"node_const"==n.type&&i.value==n.value||"node_var"==i.type&&"node_var"==n.type&&i.value==n.value)return this.createNode("node_const",0);if("node_const"==i.type&&"node_const"==n.type)return i.value-=n.value,i;if("node_op"==i.type&&"op_mul"==i.value&&"node_op"==n.type&&"op_mul"==n.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),i.children[1].hash===n.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",i.children[0],n.children[0]),i.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==i.type&&"op_mul"==i.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.hash=this.parser.compile(n),i.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",i.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,t;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),i.hash=this.parser.compile(i),n.children[1].hash===i.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),n.children[0]),i],this.mayNotBeSimplified=!0,t;break;case"op_neg":if("node_const"==(i=t.children[0]).type&&0===i.value)return i;if("node_op"==i.type&&"op_neg"==i.value)return i.children[0];break;case"op_div":if(i=t.children[0],n=t.children[1],"node_const"==i.type&&"node_const"==n.type&&i.value==n.value&&0!==i.value)return i.value=1,i;if("node_const"==i.type&&0===i.value&&"node_const"==n.type&&0!==n.value)return i.value=0,i;if("node_const"==i.type&&0===i.value&&("node_op"==n.type||"node_var"==n.type))return t.type="node_const",t.value=0,t;if("node_var"==i.type&&"node_var"==n.type&&i.value==n.value)return this.createNode("node_const",1);if("node_const"==i.type&&0!==i.value&&"node_const"==n.type&&0===n.value)return i.value>0?i.value=1/0:i.value=-1/0,i;if("node_op"==i.type&&"op_neg"==i.value&&"node_op"==n.type&&"op_neg"==n.value)return t.children=[i.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==i.value&&"op_neg"!=n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",i.children[0],n)],this.mayNotBeSimplified=!0,t;if("op_neg"!=i.value&&"op_neg"==n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",i,n.children[0])],this.mayNotBeSimplified=!0,t;if("node_op"==i.type&&"op_exp"==i.value&&(n.hash||(n.hash=this.parser.compile(n)),i.children[0].hash||(i.children[0].hash=this.parser.compile(i.children[0])),n.hash===i.children[0].hash))return i.children[1]=this.createNode("node_op","op_sub",i.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,i;if("node_const"!=n.type&&"node_op"==i.type&&"op_mul"==i.value&&"node_const"==i.children[0].type)return t.value="op_mul",t.children=[i.children[0],this.createNode("node_op","op_div",i.children[1],n)],this.mayNotBeSimplified=!0,t;if("node_op"==i.type&&"op_exp"==i.value&&"node_op"==n.type&&"op_exp"==n.value&&(i.children[0].hash=this.parser.compile(i.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),i.children[0].hash===n.children[0].hash))return i.children[1]=this.createNode("node_op","op_sub",i.children[1],n.children[1]),this.mayNotBeSimplified=!0,i;break;case"op_exp":if(i=t.children[0],"node_const"==(n=t.children[1]).type&&0===n.value)return n.value=1,n;if("node_const"==n.type&&1==n.value||"node_const"==i.type&&1==i.value||"node_const"==i.type&&0===i.value&&"node_const"==n.type&&0!==n.value)return i;if("node_op"==i.type&&"op_exp"==i.value)return t.children=[i.children[0],this.createNode("node_op","op_mul",i.children[1],n)],t}switch(t.value){case"op_add":if(i=t.children[0],n=t.children[1],"node_const"==i.type&&"node_const"==n.type&&i.value==n.value)return i.value+=n.value,i;if("node_var"==i.type&&"node_var"==n.type&&i.value==n.value){t.children[0]=this.createNode("node_const",2),t.value="op_mul";break}if("node_op"==i.type&&"op_neg"==i.value){t.value="op_sub",t.children[0]=n,t.children[1]=i.children[0],this.mayNotBeSimplified=!0;break}if("node_op"==n.type&&"op_neg"==n.value){t.value="op_sub",t.children[1]=n.children[0],this.mayNotBeSimplified=!0;break}if("node_op"==i.type&&"op_mul"==i.value&&"node_op"==n.type&&"op_mul"==n.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),i.children[1].hash===n.children[1].hash)){t.value="op_mul",t.children=[this.createNode("node_op","op_add",i.children[0],n.children[0]),i.children[1]],this.mayNotBeSimplified=!0;break}if("node_op"==i.type&&"op_mul"==i.value&&(i.children[1].hash=this.parser.compile(i.children[1]),n.hash=this.parser.compile(n),i.children[1].hash===n.hash)){t.value="op_mul",t.children=[this.createNode("node_op","op_add",i.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0;break}"node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),i.hash=this.parser.compile(i),n.children[1].hash===i.hash)&&(t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),n.children[0]),i],this.mayNotBeSimplified=!0);break;case"op_sub":i=t.children[0],"node_op"==(n=t.children[1]).type&&"op_neg"==n.value&&(t.value="op_add",t.children[1]=n.children[0],this.mayNotBeSimplified=!0);break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var e=t.children[0].value,r=t.children[1];if(0==r.length)return t;switch(e){case"sin":case"tan":("node_const"==r[0].type&&0===r[0].value||"node_var"==r[0].type&&"PI"==r[0].value||"node_op"==r[0].type&&"op_mul"==r[0].value&&"node_const"==r[0].children[0].type&&r[0].children[0].value%1==0&&"node_var"==r[0].children[1].type&&"PI"==r[0].children[1].value)&&(t.type="node_const",t.value=0);break;case"cos":if("node_const"==r[0].type&&0===r[0].value){t.type="node_const",t.value=1;break}"node_var"==r[0].type&&"PI"==r[0].value&&(t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)]);break;case"exp":"node_const"==r[0].type&&0===r[0].value&&(t.type="node_const",t.value=1);break;case"pow":"node_const"==r[1].type&&0===r[1].value&&(t.type="node_const",t.value=1)}return t}}),n.Z.CA,n.Z.Dump={addMarkers:function(t,e,r){var i,n,o;for(i in a.Z.isArray(e)||(e=[e]),a.Z.isArray(r)||(r=[r]),n=Math.min(e.length,r.length),e.length=n,r.length=n,t.objects)if(t.objects.hasOwnProperty(i))for(o=0;o<n;o++)t.objects[i][e[o]]=r[o]},deleteMarkers:function(t,e){var r,i,n;for(r in a.Z.isArray(e)||(e=[e]),i=e.length,e.length=i,t.objects)if(t.objects.hasOwnProperty(r))for(n=0;n<i;n++)delete t.objects[r][e[n]]},str:function(t){return"string"==typeof t&&"function"!==t.slice(0,7)&&(t='"'+t+'"'),t},minimizeObject:function(t,e){var r,i,o,s={},u=a.Z.deepCopy(t),h=[];for(o=1;o<arguments.length;o++)h.push(arguments[o]);for(s=a.Z.deepCopy(s,n.Z.Options.elements,!0),o=h.length;o>0;o--)s=a.Z.deepCopy(s,h[o-1],!0);for(r in s)s.hasOwnProperty(r)&&(i=r.toLowerCase(),"object"!=typeof s[r]&&s[r]===u[i]&&delete u[i]);return u},prepareAttributes:function(t,e){var r,i;for(i in r=this.minimizeObject(e.getAttributes(),n.Z.Options[e.elType]),e.subs)e.subs.hasOwnProperty(i)&&(r[i]=this.minimizeObject(e.subs[i].getAttributes(),n.Z.Options[e.elType][i],n.Z.Options[e.subs[i].elType]),r[i].id=e.subs[i].id,r[i].name=e.subs[i].name);return r.id=e.id,r.name=e.name,r},setBoundingBox:function(t,e,r){return t.push({obj:r,method:"setBoundingBox",params:[e.getBoundingBox(),e.keepaspectratio]}),t},dump:function(t){var e,r,i,n,o=[],s=[],u=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),e=0;e<u;e++)if(r=t.objectsList[e],i={},!r.dumped&&r.dump){for(i.type=r.getType(),i.parents=r.getParents().slice(),"point"===i.type&&1===i.parents[0]&&(i.parents=i.parents.slice(1)),n=0;n<i.parents.length;n++)a.Z.isString(i.parents[n])&&"'"!==i.parents[n][0]&&'"'!==i.parents[n][0]?i.parents[n]='"'+i.parents[n]+'"':a.Z.isArray(i.parents[n])&&(i.parents[n]="["+i.parents[n].toString()+"]");i.attributes=this.prepareAttributes(t,r),"glider"===i.type&&r.onPolygon&&o.push({obj:r.id,prop:"onPolygon",val:!0}),s.push(i)}return this.deleteMarkers(t,"dumped"),{elements:s,props:o,methods:[]}},arrayToParamStr:function(t,e){var r,i=[];for(r=0;r<t.length;r++)i.push(e.call(this,t[r]));return i.join(", ")},toJCAN:function(t){var e,r,i;switch(typeof t){case"object":if(t){if(r=[],a.Z.isArray(t)){for(e=0;e<t.length;e++)r.push(this.toJCAN(t[e]));return"["+r.join(",")+"]"}for(i in t)t.hasOwnProperty(i)&&r.push(i+": "+this.toJCAN(t[i]));return"<<"+r.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var e,r,i,n=this.dump(t),o=[];for(e=0,n.methods=this.setBoundingBox(n.methods,t,"$board"),r=n.elements;e<r.length;e++)r[e].attributes.name.length>0&&o.push("// "+r[e].attributes.name),o.push("s"+e+" = "+r[e].type+"("+r[e].parents.join(", ")+") "+this.toJCAN(r[e].attributes).replace(/\n/,"\\n")+";"),"axis"===r[e].type&&(i=r[e].attributes.id,null===t.objects[i].defaultTicks&&o.push("s"+e+".removeAllTicks();")),o.push("");for(e=0;e<n.methods.length;e++)o.push(n.methods[e].obj+"."+n.methods[e].method+"("+this.arrayToParamStr(n.methods[e].params,this.toJCAN)+");"),o.push("");for(e=0;e<n.props.length;e++)o.push(n.props[e].obj+"."+n.props[e].prop+" = "+this.toJCAN(n.props[e].val)+";"),o.push("");return o.join("\n")},toJavaScript:function(t){var e,r,i,n=this.dump(t),o=[];for(e=0,n.methods=this.setBoundingBox(n.methods,t,"board"),r=n.elements;e<r.length;e++)o.push('board.create("'+r[e].type+'", ['+r[e].parents.join(", ")+"], "+a.Z.toJSON(r[e].attributes)+");"),"axis"===r[e].type&&(i=r[e].attributes.id,null===t.objects[i].defaultTicks&&o.push('board.objects["'+i+'"].removeTicks(board.objects["'+i+'"].defaultTicks);'));for(e=0;e<n.methods.length;e++)o.push(n.methods[e].obj+"."+n.methods[e].method+"("+this.arrayToParamStr(n.methods[e].params,a.Z.toJSON)+");"),o.push("");for(e=0;e<n.props.length;e++)o.push(n.props[e].obj+"."+n.props[e].prop+" = "+a.Z.toJSON(n.props[e].val)+";"),o.push("");return o.join("\n")}},n.Z.Dump,n.Z.createComb=function(t,e,r){var i,o,s,u;if(2===e.length){if(a.Z.isArray(e[0])&&e[0].length>1)u=a.Z.copyAttributes(r,t.options,"comb","point1"),i=t.create("point",e[0],u);else if(a.Z.isString(e[0])||a.Z.isPoint(e[0]))i=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))i=e[0]();else if(a.Z.isFunction(e[0])&&e[0]().length&&e[0]().length>=2)u=a.Z.copyAttributes(r,t.options,"comb","point1"),i=n.Z.createPoint(t,e[0](),u);else throw Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(a.Z.isArray(e[1])&&e[1].length>1)u=a.Z.copyAttributes(r,t.options,"comb","point2"),o=t.create("point",e[1],u);else if(a.Z.isString(e[1])||a.Z.isPoint(e[1]))o=t.select(e[1]);else if(a.Z.isFunction(e[1])&&a.Z.isPoint(e[1]()))o=e[1]();else if(a.Z.isFunction(e[1])&&e[1]().length&&e[1]().length>=2)u=a.Z.copyAttributes(r,t.options,"comb","point2"),o=n.Z.createPoint(t,e[1](),u);else throw Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]")}else throw Error("JSXGraph: Can't create comb with parent types "+e.map(function(t){return"'"+typeof t+"'"}).join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");return u=a.Z.copyAttributes(r,t.options,"comb"),(s=t.create("curve",[[0],[0]],u)).updateDataArray=function(){var t,e,r,n,u,h,l,c,d,f,p=0,m=i.Dist(o),v=i,g=o;for(c=a.Z.evaluate(s.visProp.frequency),d=-a.Z.evaluate(s.visProp.angle),f=a.Z.evaluate(s.visProp.width),a.Z.evaluate(s.visProp.reverse)&&(v=o,g=i,d=-d),t=Math.cos(d),e=Math.sin(d),r=(g.X()-v.X())/m,n=(g.Y()-v.Y())/m,t*=f/Math.abs(e),e*=f/Math.abs(e),this.dataX=[],this.dataY=[];p<m;)u=v.X()+r*p,h=v.Y()+n*p,e*=l=Math.min(t,m-p)/Math.abs(t),t*=l,this.dataX.push(u),this.dataY.push(h),this.dataX.push(u+r*t+n*e),this.dataY.push(h-r*e+n*t),this.dataX.push(NaN),this.dataY.push(NaN),p+=c},s},n.Z.registerElement("comb",n.Z.createComb);var Q={removeSlopeTriangle:function(){H.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()}};n.Z.createSlopeTriangle=function(t,e,r){var i,o,u,h,l,c,d,f,p,m=!1;if(1===e.length&&e[0].type===s.Z.OBJECT_TYPE_TANGENT)u=(o=e[0]).glider;else if(1===e.length&&e[0].type===s.Z.OBJECT_TYPE_GLIDER)u=e[0],p=a.Z.copyAttributes(r,t.options,"slopetriangle","tangent"),o=t.create("tangent",[u],p),m=!0;else if(2===e.length&&e[0].elementClass===s.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(e[1]))o=e[0],u=e[1];else throw Error("JSXGraph: Can't create slope triangle with parent types '"+typeof e[0]+"'.");return p=a.Z.copyAttributes(r,t.options,"slopetriangle","basepoint"),d=t.create("point",[function(){return[u.X()+1,u.Y()]}],p),p=a.Z.copyAttributes(r,t.options,"slopetriangle","baseline"),c=t.create("line",[u,d],p),p=a.Z.copyAttributes(r,t.options,"slopetriangle","glider"),h=t.create("glider",[u.X()+1,u.Y(),c],p),p=a.Z.copyAttributes(r,t.options,"slopetriangle","toppoint"),l=t.create("point",[function(){return[h.X(),h.Y()+(h.X()-u.X())*o.getSlope()]}],p),p=a.Z.copyAttributes(r,t.options,"slopetriangle"),(i=t.create("polygon",[u,h,l],p)).Value=Q.Value,i.tangent=o,i._isPrivateTangent=m,i.borders[2].setArrow(!1,!1),p=a.Z.copyAttributes(r,t.options,"slopetriangle","label"),(f=t.create("text",[function(){return h.X()+.1},function(){return(h.Y()+l.Y())*.5},function(){return""}],p))._setText(function(){var t=a.Z.evaluate(f.visProp.digits);return f.useLocale()?f.formatNumberLocale(i.Value(),t):a.Z.toFixed(i.Value(),t)}),f.fullUpdate(),i.glider=h,i.basepoint=d,i.baseline=c,i.toppoint=l,i.label=f,i.subs={glider:h,basePoint:d,baseLine:c,topPoint:l,label:f},i.inherits.push(h,d,c,l,f),i.methodMap=n.Z.deepCopy(i.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),i.remove=Q.removeSlopeTriangle,i},n.Z.registerElement("slopetriangle",n.Z.createSlopeTriangle);var $={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};n.Z.createCheckbox=function(t,e,r){var i,s,u=a.Z.copyAttributes(r,t.options,"checkbox");return s=[e[0],e[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(i=t.create("text",s,u)).type=a.Z.OBJECT_TYPE_CHECKBOX,i.rendNodeCheckbox=i.rendNode.childNodes[0].childNodes[0],i.rendNodeLabel=i.rendNode.childNodes[0].childNodes[1],i.rendNodeTag=i.rendNodeCheckbox,i.rendNodeTag.disabled=!!u.disabled,i.rendNodeCheckbox.id=i.rendNode.id+"_checkbox",i.rendNodeLabel.id=i.rendNode.id+"_label",i.rendNodeLabel.setAttribute("for",i.rendNodeCheckbox.id),i.setText(e[2]),i.visPropOld.fontsize="0px",t.renderer.updateTextStyle(i,!1),i.rendNodeCheckbox.checked=u.checked,i._value=u.checked,i.Value=function(){return this._value},i.update=function(){return this.needsUpdate&&(n.Z.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},o.Z.addEvent(i.rendNodeCheckbox,"change",$.CheckboxChangeEventHandler,i),i},n.Z.registerElement("checkbox",n.Z.createCheckbox);var K={InputInputEventHandler:function(t){this._value=this.rendNodeInput.value,this.board.update()}};n.Z.createInput=function(t,e,r){var i,s,u=a.Z.copyAttributes(r,t.options,"input");return s=[e[0],e[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+u.maxlength+'" style="width:100%"/></span>'],(i=t.create("text",s,u)).type=a.Z.OBJECT_TYPE_INPUT,i.rendNodeLabel=i.rendNode.childNodes[0].childNodes[0],i.rendNodeInput=i.rendNode.childNodes[0].childNodes[1],i.rendNodeInput.value=e[2],i.rendNodeTag=i.rendNodeInput,i.rendNodeTag.disabled=!!u.disabled,i.rendNodeLabel.id=i.rendNode.id+"_label",i.rendNodeInput.id=i.rendNode.id+"_input",i.setText(e[3]),i._value=e[2],i.update=function(){return this.needsUpdate&&(n.Z.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},i.Value=function(){return this._value},i.set=function(t){return this._value=t,this.rendNodeInput.value=t,this},o.Z.addEvent(i.rendNodeInput,"input",K.InputInputEventHandler,i),o.Z.addEvent(i.rendNodeInput,"mousedown",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),o.Z.addEvent(i.rendNodeInput,"touchstart",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),o.Z.addEvent(i.rendNodeInput,"pointerdown",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),i.visPropOld.fontsize="0px",t.renderer.updateTextStyle(i,!1),i},n.Z.registerElement("input",n.Z.createInput);var tt={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};n.Z.createButton=function(t,e,r){var i,s,u=a.Z.copyAttributes(r,t.options,"button");return s=[e[0],e[1],'<button type="button" style="width:100%;"></button>'],(i=t.create("text",s,u)).type=a.Z.OBJECT_TYPE_BUTTON,i.rendNodeButton=i.rendNode.childNodes[0],i.rendNodeButton.id=i.rendNode.id+"_button",i.rendNodeTag=i.rendNodeButton,i.rendNodeTag.disabled=!!u.disabled,i.setText(e[2]),i.visPropOld.fontsize="0px",t.renderer.updateTextStyle(i,!1),e[3]&&(a.Z.isString(e[3])?(i._jc=new n.Z.JessieCode,i._jc.use(t),i._handler=function(){i._jc.parse(e[3])}):i._handler=e[3]),o.Z.addEvent(i.rendNodeButton,"click",tt.ButtonClickEventHandler,i),o.Z.addEvent(i.rendNodeButton,"mousedown",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),o.Z.addEvent(i.rendNodeButton,"touchstart",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),o.Z.addEvent(i.rendNodeButton,"pointerdown",function(t){a.Z.exists(t.stopPropagation)&&t.stopPropagation()},i),i},n.Z.registerElement("button",n.Z.createButton),n.Z.createVectorField=function(t,e,r){var i,n;if(!(e.length>=3&&(a.Z.isArray(e[0])||a.Z.isFunction(e[0])||a.Z.isString(e[0]))&&a.Z.isArray(e[1])&&3===e[1].length&&a.Z.isArray(e[2])&&3===e[2].length))throw Error("JSXGraph: Can't create vector field with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.");return n=a.Z.copyAttributes(r,t.options,"vectorfield"),(i=t.create("curve",[[],[]],n)).elType="vectorfield",i.setF=function(t,e){var r,n;return a.Z.isArray(t)?(r=a.Z.createFunction(t[0],this.board,e),n=a.Z.createFunction(t[1],this.board,e),this.F=function(t,e){return[r(t,e),n(t,e)]}):this.F=a.Z.createFunction(t,i.board,e),this},i.setF(e[0],"x, y"),i.xData=e[1],i.yData=e[2],i.updateDataArray=function(){var e,r,i,n,o,s,u,h,l,c,d,f,p=a.Z.evaluate(this.visProp.scale),m=a.Z.evaluate(this.xData[0]),v=a.Z.evaluate(this.xData[1]),g=(a.Z.evaluate(this.xData[2])-m)/v,b=a.Z.evaluate(this.yData[0]),y=a.Z.evaluate(this.yData[1]),C=(a.Z.evaluate(this.yData[2])-b)/y,Z=a.Z.evaluate(this.visProp.arrowhead.enabled);for(Z&&(c=(l=a.Z.evaluate(this.visProp.arrowhead.size))/t.unitX,d=l/t.unitY,f=a.Z.evaluate(this.visProp.arrowhead.angle)),this.dataX=[],this.dataY=[],i=0,e=m;i<=v;e+=g,i++)for(n=0,r=b;n<=y;r+=C,n++)o=this.F(e,r),o[0]*=p,o[1]*=p,this.dataX=this.dataX.concat([e,e+o[0],NaN]),this.dataY=this.dataY.concat([r,r+o[1],NaN]),Z&&Math.abs(o[0])+Math.abs(o[1])>0&&(u=(s=Math.atan2(o[1],o[0]))+f,h=s-f,this.dataX=this.dataX.concat([e+o[0]-Math.cos(u)*c,e+o[0],e+o[0]-Math.cos(h)*c,NaN]),this.dataY=this.dataY.concat([r+o[1]-Math.sin(u)*d,r+o[1],r+o[1]-Math.sin(h)*d,NaN]))},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("vectorfield",n.Z.createVectorField),n.Z.createSlopeField=function(t,e,r){var i,n,o;if(!(e.length>=3&&(a.Z.isFunction(e[0])||a.Z.isString(e[0]))&&a.Z.isArray(e[1])&&3===e[1].length&&a.Z.isArray(e[2])&&3===e[2].length))throw Error("JSXGraph: Can't create slope field with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.");return n=a.Z.createFunction(e[0],t,"x, y"),e[0]=function(t,e){var r=n(t,e),i=Math.sqrt(1+r*r);return[1/i,r/i]},o=a.Z.copyAttributes(r,t.options,"slopefield"),(i=t.create("vectorfield",e,o)).elType="slopefield",i.setF=function(t,e){var r=a.Z.createFunction(t,i.board,e);this.F=function(t,e){var i=r(t,e),n=Math.sqrt(1+i*i);return[1/n,i/n]}},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("slopefield",n.Z.createSlopeField),n.Z.createSmartLabel=function(t,e,r){var i,n,o,u,h,l;if(0===e.length||0>[s.Z.OBJECT_CLASS_POINT,s.Z.OBJECT_CLASS_LINE,s.Z.OBJECT_CLASS_CIRCLE].indexOf(e[0].elementClass)&&0>[s.Z.OBJECT_TYPE_POLYGON,s.Z.OBJECT_TYPE_ANGLE].indexOf(e[0].type))throw Error("JSXGraph: Can't create smartlabel with parent types '"+typeof e[0]+"', '"+typeof e[1]+"'.");return o=e[0],u=e[1]||"",o.elementClass===s.Z.OBJECT_CLASS_POINT?n=a.Z.copyAttributes(r,t.options,"smartlabelpoint"):o.elementClass===s.Z.OBJECT_CLASS_LINE?((n=a.Z.copyAttributes(r,t.options,"smartlabelline")).rotate=function(){return 180*Math.atan(o.getSlope())/Math.PI},n.visible=function(){return!(1.5>o.L())}):o.elementClass===s.Z.OBJECT_CLASS_CIRCLE?(n=a.Z.copyAttributes(r,t.options,"smartlabelcircle")).visible=function(){return!(1.5>o.Radius())}:o.type===s.Z.OBJECT_TYPE_POLYGON?n=a.Z.copyAttributes(r,t.options,"smartlabelpolygon"):o.type===s.Z.OBJECT_TYPE_ANGLE&&((n=a.Z.copyAttributes(r,t.options,"smartlabelangle")).rotate=function(){var t=o.center.coords.usrCoords,e=o.getLabelAnchor().usrCoords,r=180*Math.atan2(e[2]-t[2],e[1]-t[1])/Math.PI;return r>90&&r<270?r+180:r},n.anchorX=function(){var t=o.center.coords.usrCoords,e=o.getLabelAnchor().usrCoords,r=180*Math.atan2(e[2]-t[2],e[1]-t[1])/Math.PI;return r>90&&r<270?"right":"left"}),h=function(t,e,r,i){var n;switch(i){case"length":n=function(){return e.L()};break;case"slope":n=function(){return e.Slope()};break;case"area":n=function(){return e.Area()};break;case"radius":n=function(){return e.Radius()};break;case"perimeter":n=function(){return e.Perimeter()};break;case"rad":n=function(){return e.Value()};break;case"deg":n=function(){return 180*e.Value()/Math.PI};break;default:n=function(){return 0}}return function(){var e,r="",i=a.Z.evaluate(u),o=a.Z.evaluate(t.visProp.digits),s=a.Z.evaluate(t.visProp.unit),h=a.Z.evaluate(t.visProp.prefix),l=a.Z.evaluate(t.visProp.suffix),c=a.Z.evaluate(t.visProp.usemathjax)||a.Z.evaluate(t.visProp.usekatex);return""===i?(e=t.useLocale()?t.formatNumberLocale(n(),o):a.Z.toFixed(n(),o),r=c?["\\(",h,e,"\\,",s,l,"\\)"].join(""):[h,e,s,l].join("")):r=i,r}},o.elementClass===s.Z.OBJECT_CLASS_POINT?(i=t.create("text",[function(){return o.X()},function(){return o.Y()},""],n),l=function(){var t,e,r="",n=a.Z.evaluate(u),s=a.Z.evaluate(i.visProp.digits),h=a.Z.evaluate(i.visProp.unit),l=a.Z.evaluate(i.visProp.prefix),c=a.Z.evaluate(i.visProp.suffix),d=a.Z.evaluate(i.visProp.dir),f=a.Z.evaluate(i.visProp.usemathjax)||a.Z.evaluate(i.visProp.usekatex);return i.useLocale()?(t=i.formatNumberLocale(o.X(),s),e=i.formatNumberLocale(o.Y(),s)):(t=a.Z.toFixed(o.X(),s),e=a.Z.toFixed(o.Y(),s)),""===n?"row"===d?r=f?["\\(",l,t,"\\,",h," / ",e,"\\,",h,c,"\\)"].join(""):[l,t," ",h," / ",e," ",h,c].join(""):0===d.indexOf("col")&&(r=f?["\\(",l,"\\left(\\array{",t,"\\,",h,"\\\\ ",e,"\\,",h,"}\\right)",c,"\\)"].join(""):[l,t," ",h,"<br/>",e," ",h,c].join("")):r=n,r}):o.elementClass===s.Z.OBJECT_CLASS_LINE?"length"===n.measure?l=h(i=t.create("text",[function(){return(o.point1.X()+o.point2.X())*.5},function(){return(o.point1.Y()+o.point2.Y())*.5},""],n),o,"line","length"):"slope"===n.measure&&(l=h(i=t.create("text",[function(){return .25*o.point1.X()+.75*o.point2.X()},function(){return .25*o.point1.Y()+.75*o.point2.Y()},""],n),o,"line","slope")):o.elementClass===s.Z.OBJECT_CLASS_CIRCLE?"radius"===n.measure?l=h(i=t.create("text",[function(){return o.center.X()+.5*o.Radius()},function(){return o.center.Y()},""],n),o,"circle","radius"):"area"===n.measure?l=h(i=t.create("text",[function(){return o.center.X()},function(){return o.center.Y()+.5*o.Radius()},""],n),o,"circle","area"):("circumference"===n.measure||"perimeter"===n.measure)&&(l=h(i=t.create("text",[function(){return o.getLabelAnchor()},""],n),o,"circle","perimeter")):o.type===s.Z.OBJECT_TYPE_POLYGON?"area"===n.measure?l=h(i=t.create("text",[function(){return o.getTextAnchor()},""],n),o,"polygon","area"):"perimeter"===n.measure&&(l=h(i=t.create("text",[function(){var t=o.borders.length-1;return t>=0?[(o.borders[t].point1.X()+o.borders[t].point2.X())*.5,(o.borders[t].point1.Y()+o.borders[t].point2.Y())*.5]:o.getTextAnchor()},""],n),o,"polygon","perimeter")):o.type===s.Z.OBJECT_TYPE_ANGLE&&(l=h(i=t.create("text",[function(){return o.getLabelAnchor()},""],n),o,"angle",n.measure)),a.Z.exists(i)&&(i.setText(l),o.addChild(i),i.setParents([o])),i},n.Z.registerElement("smartlabel",n.Z.createSmartLabel),n.Z.ForeignObject=function(t,e,r,i,o){this.constructor(t,r,s.Z.OBJECT_TYPE_FOREIGNOBJECT,s.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(e),this._useUserSize=!1,this.size=[1,1],a.Z.exists(o)&&o.length>0&&(this._useUserSize=!0,this.W=a.Z.createFunction(o[0],this.board,""),this.H=a.Z.createFunction(o[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=i,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=n.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},n.Z.ForeignObject.prototype=new z.Z,a.Z.copyPrototypeMethods(n.Z.ForeignObject,X.Z,"coordsConstructor"),n.Z.extend(n.Z.ForeignObject.prototype,{hasPoint:function(t,e){var r,i,n,o,h,l,c,d,f,p=this.transformations.length;return(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(o=this.board._inputDevice,h=a.Z.evaluate(this.visProp.precision[o])):h=this.board.options.precision.hasPoint,0===p)?(r=t-this.coords.scrCoords[1],i=this.coords.scrCoords[2]-e,r>=-(n=h)&&r-this.size[0]<=n&&i>=-n&&i-this.size[1]<=n):(c=[(l=(l=new m.Z(s.Z.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],l[1]-this.span[0][1],l[2]-this.span[0][2]],!!(0<=(d=(f=u.Z.innerProduct)(c,this.span[1]))&&d<=f(this.span[1],this.span[1])&&0<=(d=f(c,this.span[2]))&&d<=f(this.span[2],this.span[2])))},update:function(t){return this.needsUpdate&&(this.updateCoords(t),this.updateSize()),this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var t=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(t=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[t.width,t.height]),this},updateSpan:function(){var t,e,r=this.transformations.length,i=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(t=0,i[0]=[this.Z(),this.X(),this.Y()],i[1]=[this.Z(),this.X()+this.W(),this.Y()],i[2]=[this.Z(),this.X(),this.Y()+this.H()];t<r;t++)for(e=0;e<3;e++)i[e]=u.Z.matVecMult(this.transformations[t].matrix,i[e]);for(e=0;e<3;e++)i[e][1]/=i[e][0],i[e][2]/=i[e][0],i[e][0]/=i[e][0];for(e=1;e<3;e++)i[e][0]-=i[0][0],i[e][1]-=i[0][1],i[e][2]-=i[0][2];this.span=i}return this},addTransform:function(t){var e;if(a.Z.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=a.Z.createFunction(t,this.board,""),this.H=a.Z.createFunction(e,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),n.Z.createForeignObject=function(t,e,r){var i,o,s=e[0],u=e[1],h=[];if(e.length>=2&&(h=e[2]),i=a.Z.copyAttributes(r,t.options,"foreignobject"),!(o=X.Z.create(n.Z.ForeignObject,t,u,i,s,h)))throw Error("JSXGraph: Can't create foreignObject with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return o},n.Z.registerElement("foreignobject",n.Z.createForeignObject),n.Z.registerElement("fo",n.Z.createForeignObject),n.Z.ForeignObject,n.Z.extend(M.Z,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},view3d:{needsRegularUpdate:!0,projection:"parallel",verticalDrag:{enabled:!0,key:"shift"}}}),n.Z.Options,n.Z.View3D=function(t,e,r){this.constructor(t,r,s.Z.OBJECT_TYPE_VIEW3D,s.Z.OBJECT_CLASS_3D),this.objects={},this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.llftCorner=e[0],this.size=e[1],this.bbox3D=e[2],this.r=-1,this.projectionType="parallel",this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.View3D.prototype=new z.Z,n.Z.extend(n.Z.View3D.prototype,{create:function(t,e,r){var i=[];return t.indexOf("3d")>0&&i.push(this),this.board.create(t,i.concat(e),r)},select:function(t,e){var r,i,n,o,s=t;if(null===s)return s;if(a.Z.isString(s)&&""!==s)a.Z.exists(this.objects[s])?s=this.objects[s]:a.Z.exists(this.elementsByName[s])&&(s=this.elementsByName[s]);else if(!e&&(a.Z.isFunction(s)||a.Z.isObject(s)&&!a.Z.isFunction(s.setAttribute))){for(n=0,r=a.Z.filterElements(this.objectsList,s),i={},o=r.length;n<o;n++)i[r[n].id]=r[n];s=new V.Z(i)}else a.Z.isObject(s)&&a.Z.exists(s.id)&&!a.Z.exists(this.objects[s.id])&&(s=null);return s},updateParallelProjection:function(){var t,e,r,i,n=[[1,0,0,0],[0,1,0,0],[0,0,1,0]];return r=this.el_slide.Value(),t=this.r,e=this.az_slide.Value(),i=t*Math.sin(r),n[1][1]=t*Math.cos(e),n[1][2]=-t*Math.sin(e),n[2][1]=i*Math.sin(e),n[2][2]=i*Math.cos(e),n[2][3]=Math.cos(r),n},updateCentralProjection:function(){var t,e,r,i,n,o,s,a,h,l,c=1/Math.tan(.5*Math.PI/2),d=[.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[0][0]+this.bbox3D[0][1])],f=[0,0,1],p=[[0,0,0,-1],[0,c,0,0],[0,0,c,0],[-26.666666666666668,0,0,-28/12]];return e=this.az_slide.Value(),t=2*this.el_slide.Value(),e+=3*Math.PI*.5,l=[(h=[12*Math.cos(e)*Math.cos(t),-12*Math.sin(e)*Math.cos(t),12*Math.sin(t)])[0]-d[0],h[1]-d[1],h[2]-d[2]],s=u.Z.norm(l,3),r=[l[0]/s,l[1]/s,l[2]/s],s=u.Z.norm(f,3),o=[f[0]/s,f[1]/s,f[2]/s],i=u.Z.crossProduct(o,r),n=u.Z.crossProduct(r,i),a=[[1,0,0,0],[-(o=u.Z.matVecMult([i,n,r],h))[0],i[0],i[1],i[2]],[-o[1],n[0],n[1],n[2]],[-o[2],r[0],r[1],r[2]]],p=u.Z.matMatMult(p,a)},update:function(){var t,e;return a.Z.exists(this.el_slide)&&a.Z.exists(this.az_slide)&&this.needsUpdate&&((t=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=a.Z.evaluate(this.visProp.projection),"parallel"===this.projectionType)?(e=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],t[1][1]=this.size[0]/(this.bbox3D[0][1]-this.bbox3D[0][0]),t[2][2]=this.size[1]/(this.bbox3D[1][1]-this.bbox3D[1][0]),t[1][0]=this.llftCorner[0]+.5*t[1][1]*(this.bbox3D[0][1]-this.bbox3D[0][0]),t[2][0]=this.llftCorner[1]+.5*t[2][2]*(this.bbox3D[1][1]-this.bbox3D[1][0]),this.matrix3D=this.updateParallelProjection(),this.matrix3D=u.Z.matMatMult(t,u.Z.matMatMult(this.matrix3D,e))):(this.matrix3D=this.updateCentralProjection(),t[1][1]=this.size[0]/.8,t[2][2]=this.size[1]/.8,t[1][0]=this.llftCorner[0]+.5*t[1][1]*.8,t[2][0]=this.llftCorner[1]+.5*t[2][2]*.8,this.viewPortTransform=t)),this},updateRenderer:function(){return this.needsUpdate=!1,this},removeObject:function(t,e){var r;if(a.Z.isArray(t)){for(r=0;r<t.length;r++)this.removeObject(t[r]);return this}if(t=this.select(t),!a.Z.exists(t)||a.Z.isString(t))return this;try{delete this.objects[t.id]}catch(e){n.Z.debug("View3D "+t.id+": Could not be removed: "+e)}return this.board.removeObject(t,e),this},project3DTo2D:function(t,e,r){var i,n;return(i=3==arguments.length?[1,t,e,r]:3===t.length?[1].concat(t):t,n=u.Z.matVecMult(this.matrix3D,i),"parallel"===this.projectionType)?n:(n[1]/=n[0],n[2]/=n[0],n[3]/=n[0],n[0]/=n[0],u.Z.matVecMult(this.viewPortTransform,n.slice(0,3)))},project2DTo3DPlane:function(t,e,r){var i,n,o,s,a=e.slice(1),h=[1,0,0,0];r=r||[1,0,0,0],s=u.Z.norm(a,3),o=u.Z.innerProduct(r.slice(1),a,3)/s,(i=this.matrix3D.slice(0,3)).push([0].concat(a)),n=t.coords.usrCoords.concat([o]);try{1===i[2][3]&&(i[2][1]=i[2][2]=.001*u.Z.eps),h=u.Z.Numerics.Gauss(i,n)}catch(t){h=[0,NaN,NaN,NaN]}return h},project2DTo3DVertical:function(t,e){var r=this.matrix3D[2],i=r[3],n=t.coords.usrCoords[2];return(n-=r[0]*r[0]+r[1]*e[1]+r[2]*e[2],Math.abs(i)<u.Z.eps)?e:e.slice(0,3).concat([n/i])},project3DToCube:function(t){var e=this.bbox3D;return t[1]<e[0][0]&&(t[1]=e[0][0]),t[1]>e[0][1]&&(t[1]=e[0][1]),t[2]<e[1][0]&&(t[2]=e[1][0]),t[2]>e[1][1]&&(t[2]=e[1][1]),t[3]<e[2][0]&&(t[3]=e[2][0]),t[3]>e[2][1]&&(t[3]=e[2][1]),t},intersectionLineCube:function(t,e,r){var i,n,o,s;for(n=0,i=r;n<3;n++)0!==e[n]&&(o=(this.bbox3D[n][0]-t[n])/e[n],s=(this.bbox3D[n][1]-t[n])/e[n],i=r<0?Math.max(i,Math.min(o,s)):Math.min(i,Math.max(o,s)));return i},isInCube:function(t){return t[0]>this.bbox3D[0][0]-u.Z.eps&&t[0]<this.bbox3D[0][1]+u.Z.eps&&t[1]>this.bbox3D[1][0]-u.Z.eps&&t[1]<this.bbox3D[1][1]+u.Z.eps&&t[2]>this.bbox3D[2][0]-u.Z.eps&&t[2]<this.bbox3D[2][1]+u.Z.eps},intersectionPlanePlane:function(t,e,r){var i,n,o,s,a=[[],[]];return r=r||e.d,i=u.Z.Geometry.meet3Planes(t.normal,t.d,e.normal,r,u.Z.crossProduct(t.normal,e.normal),0),n=u.Z.Geometry.meetPlanePlane(t.vec1,t.vec2,e.vec1,e.vec2),o=this.intersectionLineCube(i,n,1/0),s=u.Z.axpy(o,n,i),this.isInCube(s)&&(a[0]=s),o=this.intersectionLineCube(i,n,-1/0),s=u.Z.axpy(o,n,i),this.isInCube(s)&&(a[1]=s),a},getMesh:function(t,e,r){var i,n,o,s,u,h,l,c=[0,0,0],d=e[2],f=r[2],p=[],m=[];for(i=0,h=(a.Z.evaluate(e[1])-a.Z.evaluate(e[0]))/d,l=(a.Z.evaluate(r[1])-a.Z.evaluate(r[0]))/f;i<=d;i++){for(n=0,o=e[0]+h*i;n<=f;n++)s=r[0]+l*n,c=a.Z.isFunction(t)?t(o,s):[t[0](o,s),t[1](o,s),t[2](o,s)],u=this.project3DTo2D(c),p.push(u[1]),m.push(u[2]);p.push(NaN),m.push(NaN)}for(n=0;n<=f;n++){for(i=0,s=r[0]+l*n;i<=d;i++)o=e[0]+h*i,c=a.Z.isFunction(t)?t(o,s):[t[0](o,s),t[1](o,s),t[2](o,s)],u=this.project3DTo2D(c),p.push(u[1]),m.push(u[2]);p.push(NaN),m.push(NaN)}return[p,m]},animateAzimuth:function(){var t=this.az_slide._smin,e=this.az_slide._smax,r=this.az_slide.Value()+.1;this.az_slide.position=(r-t)/(e-t),this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var t=this.board;return!!a.Z.evaluate(this.visProp.verticaldrag.enabled)&&t["_"+a.Z.evaluate(this.visProp.verticaldrag.key)+"Key"]}}),n.Z.createView3D=function(t,e,r){var i,o,s,u,h,l,c=e[0],d=e[1];return o=a.Z.copyAttributes(r,t.options,"view3d"),(i=new n.Z.View3D(t,e,o)).defaultAxes=i.create("axes3d",e,r),s=c[0],u=c[1],h=d[0],l=d[1],i.az_slide=t.create("slider",[[s-1,u-2],[s+h+1,u-2],[0,1,2*Math.PI]],{style:6,name:"az",point1:{frozen:!0},point2:{frozen:!0}}),i.el_slide=t.create("slider",[[s-1,u],[s-1,u+l],[0,.3,Math.PI/2]],{style:6,name:"el",point1:{frozen:!0},point2:{frozen:!0}}),i.board.highlightInfobox=function(t,e,r){var n,o,s,u,h,l,c='<span style="color:black; font-size:200%"> &nbsp;</span>',d=r.board,f=null;for(i.isVerticalDrag()&&(c='<span style="color:black; font-size:200%"> &nbsp;</span>'),o=0;o<r.parents.length&&!(f=d.objects[r.parents[o]]).is3D;o++);if(f){if(u=[1,0,0,f.coords[3]],s=i.project2DTo3DPlane(f.element2D,[1,0,0,1],u),!i.isInCube(s)){i.board.highlightCustomInfobox("",f);return}n=a.Z.evaluate(f.visProp.infoboxdigits),l=i.board.infobox,h="auto"===n?l.useLocale()?[c,"(",l.formatNumberLocale(f.X())," | ",l.formatNumberLocale(f.Y())," | ",l.formatNumberLocale(f.Z()),")"]:[c,"(",a.Z.autoDigits(f.X())," | ",a.Z.autoDigits(f.Y())," | ",a.Z.autoDigits(f.Z()),")"]:l.useLocale()?[c,"(",l.formatNumberLocale(f.X(),n)," | ",l.formatNumberLocale(f.Y(),n)," | ",l.formatNumberLocale(f.Z(),n),")"]:[c,"(",a.Z.toFixed(f.X(),n)," | ",a.Z.toFixed(f.Y(),n)," | ",a.Z.toFixed(f.Z(),n),")"],i.board.highlightCustomInfobox(h.join(""),f)}else i.board.highlightCustomInfobox("("+t+", "+e+")",r)},i.board.update(),i},n.Z.registerElement("view3d",n.Z.createView3D),n.Z.View3D,n.Z.GeometryElement3D=function(t,e){this.elType=e,this.id=this.board.setId(this,e),this.view=t,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,""!==this.name&&(this.view.elementsByName[this.name]=this)},n.Z.extend(n.Z.GeometryElement3D.prototype,{setAttr2D:function(t){return t.name=this.name,t},setAttribute:function(t){var e,r,i,o,s,u={};for(e=0;e<arguments.length;e++)o=arguments[e],a.Z.isString(o)?(s=o.split(":"),u[a.Z.trim(s[0])]=a.Z.trim(s[1])):a.Z.isArray(o)?u[o[0]]=o[1]:n.Z.extend(u,o);for(e in u)if(u.hasOwnProperty(e))switch(r=e.replace(/\s+/g,"").toLowerCase(),i=u[e],r){case"numberpointshigh":case"stepsu":case"stepsv":a.Z.exists(this.visProp[r])&&(!n.Z.Validator[r]||n.Z.Validator[r]&&n.Z.Validator[r](i)||n.Z.Validator[r]&&a.Z.isFunction(i)&&n.Z.Validator[r](i()))&&(i=(!i.toLowerCase||"false"!==i.toLowerCase())&&i,this._set(r,i));break;default:a.Z.exists(this.element2D)&&this.element2D.setAttribute(u)}},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":e=this.visProp[t];break;default:a.Z.exists(this.element2D)&&(e=this.element2D.getAttribute(t))}return e},getAttributes:function(){var t,e,r={},i=["numberpointshigh","stepsu","stepsv"],n=i.length;for(a.Z.exists(this.element2D)&&(r=a.Z.merge(this.element2D.getAttributes())),t=0;t<n;t++)e=i[t],a.Z.exists(this.visProp[e])&&(r[e]=this.visProp[e]);return r},remove:function(){}}),n.Z.GeometryElement3D,n.Z.createAxes3D=function(t,e,r){var i,n,o,s,u,h,l,c,d,f,p,m,v,g,b,y,C,Z=e[0],x=["x","y","z"],_="Axis",E=["Rear","Front"],w=[0,0,0],N=[0,0,0],S={};if(a.Z.exists(Z.bbox3D))for(i=0;i<x.length;i++)w[i]=Z.bbox3D[i][0],N[i]=Z.bbox3D[i][1];else for(i=0;i<x.length;i++)w[i]=e[1][i],N[i]=e[2][1];for(i=0,l=(h=a.Z.copyAttributes(r,t.options,"axes3d")).axesposition;i<x.length;i++)b=(c=x[i])+_,"center"===l?(d=[0,0,0],(f=[0,0,0])[i]=N[i],S[b]=Z.create("axis3d",[d,f],h[b.toLowerCase()])):(b+="Border",d=w.slice(),f=N.slice(),2===i?(d[1]=N[1],f[0]=w[0]):(d[i]=N[i],f[2]=w[2]),f[i]=N[i],h[b.toLowerCase()].lastArrow=!1,S[b]=Z.create("axis3d",[d,f],h[b.toLowerCase()]),C={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},2===i&&(C.tickEndings=[1,0]),S[b+"Ticks"]=Z.create("ticks",[S[b],1],C));for(i=0,S.O=Z.create("intersection",[S[x[0]+_],S[x[1]+_]],{name:"",visible:!1,withLabel:!1});i<x.length;i++)for(n=0,s=(i+1)%3,u=(i+2)%3,c=x[i];n<E.length;n++)(d=[0,0,0])[i]=0===n?w[i]:N[i],m=[0,0,0],(p=[0,0,0])[s]=1,m[u]=1,v=[w[s],N[s]],g=[w[u],N[u]],b=c+"Plane"+E[n],h=a.Z.copyAttributes(r,t.options,"axes3d",b),S[b]=Z.create("plane3d",[d,p,m,v,g],h),S[b].elType="axisplane3d";for(i=0;i<x.length;i++)for(n=0,c=x[i];n<E.length;n++)for(o=1;o<=2;o++)b=c+"Plane"+E[n]+x[s=(i+o)%3].toUpperCase()+"Axis",y=c+"Plane"+E[n],f=[0,0,0],(d=[0,0,0])[i]=f[i]=0===n?w[i]:N[i],d[s]=w[s],f[s]=N[s],h=a.Z.copyAttributes(r,t.options,"axes3d",b),S[b]=Z.create("axis3d",[d,f],h),S[y].addChild(S[b]),S[y].element2D.inherits.push(S[b]);return S},n.Z.registerElement("axes3d",n.Z.createAxes3D),n.Z.createAxis3D=function(t,e,r){var i,n,o,s,u,h,l,c,d,f,p,m,v,g,b,y=e[0],C=e[1],Z=e[2];return v=a.Z.copyAttributes(r.point1,t.options,"axis3d","point1"),g=y.create("point",[(i=C[0],n=C[1],o=C[2],function(){return y.project3DTo2D(i,n,o)[1]}),(s=C[0],u=C[1],h=C[2],function(){return y.project3DTo2D(s,u,h)[2]})],v),v=a.Z.copyAttributes(r.point2,t.options,"axis3d","point2"),b=y.create("point",[(l=Z[0],c=Z[1],d=Z[2],function(){return y.project3DTo2D(l,c,d)[1]}),(f=Z[0],p=Z[1],m=Z[2],function(){return y.project3DTo2D(f,p,m)[2]})],v),v=a.Z.copyAttributes(r,t.options,"axis3d"),y.create("arrow",[g,b],v)},n.Z.registerElement("axis3d",n.Z.createAxis3D),n.Z.createMesh3D=function(t,e,r){var i,o=e[0],s=e[1],u=e[2],h=e[3],l=e[4],c=e[5];return(i=o.create("curve",[[],[]],r)).updateDataArray=function(){var t,e,r,i,d=h[0],f=h[1],p=c[0],m=c[1],v=[0,0,0],g=[0,0,0],b=[0,0,0];if(this.dataX=[],this.dataY=[],a.Z.isFunction(s))b=s().slice(1);else for(i=0;i<3;i++)b[i]=a.Z.evaluate(s[i]);for(i=0;i<3;i++)v[i]=a.Z.evaluate(u[i]),g[i]=a.Z.evaluate(l[i]);for(i=0,t=n.Z.Math.norm(v,3),e=n.Z.Math.norm(g,3);i<3;i++)v[i]/=t,g[i]/=e;r=o.getMesh([function(t,e){return b[0]+t*v[0]+e*g[0]},function(t,e){return b[1]+t*v[1]+e*g[1]},function(t,e){return b[2]+t*v[2]+e*g[2]}],[Math.ceil(d),Math.floor(f),(Math.ceil(f)-Math.floor(d))/1],[Math.ceil(p),Math.floor(m),(Math.ceil(m)-Math.floor(p))/1]),this.dataX=r[0],this.dataY=r[1]},i},n.Z.registerElement("mesh3d",n.Z.createMesh3D),n.Z.Point3D=function(t,e,r,i){this.constructor(t.board,i,s.Z.OBJECT_TYPE_POINT3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(t,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=e,this.slide=r,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=null,this._c2d=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Point3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Point3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Point3D.prototype,{updateCoords:function(){var t;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(t=0,this.coords[0]=1;t<3;t++)a.Z.isFunction(this.F[t])&&(this.coords[t+1]=a.Z.evaluate(this.F[t]));return this},initCoords:function(){var t;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(t=0,this.coords[0]=1;t<3;t++)this.coords[t+1]=a.Z.evaluate(this.F[t]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>u.Z.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(t,e){var r=this.coords;return this.coords.slice(),3===t.length?(r[0]=1,r[1]=t[0],r[2]=t[1],r[3]=t[2]):(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[2],this.normalizeCoords()),this},update:function(t){var e,r;return this.element2D.draggable()&&0!==c.Z.distance(this._c2d,this.element2D.coords.usrCoords)?this.slide?this.projectCoords2Surface():(this.view.isVerticalDrag()?e=this.view.project2DTo3DVertical(this.element2D,this.coords):(r=[1,0,0,this.coords[3]],e=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],r)),0!==e[0]&&(this.coords=this.view.project3DToCube(e))):(this.updateCoords(),this.element2D.coords.setCoordinates(s.Z.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords2Surface:function(){var t,e,r=[0,0],i=this.slide,n=this;null!==i&&(a.Z.exists(this._params)&&(r=this._params.slice()),u.Z.Nlp.FindMinimum(function(t,e,r,o){var s=[1,i.X(r[0],r[1]),i.Y(r[0],r[1]),i.Z(r[0],r[1])],a=n.view.project3DTo2D(s);return o[0]=n.element2D.X()-a[1],o[1]=n.element2D.Y()-a[2],o[0]*o[0]+o[1]*o[1]},2,2,r,5,1e-6,0,200),t=[1,i.X(r[0],r[1]),i.Y(r[0],r[1]),i.Z(r[0],r[1])],e=this.view.project3DTo2D(t),this._params=r,this.coords=t,this.element2D.coords.setCoordinates(s.Z.COORDS_BY_USER,e),this._c2d=e)},__evt__update3D:function(t){}}),n.Z.createPoint3D=function(t,e,r){var i,o,s,u,h,l=e[0];if(s=e.length>2&&a.Z.exists(e[e.length-1].is3D)?e.pop():null,2===e.length)o=e[1];else if(4===e.length)o=e.slice(1);else throw Error("JSXGraph: Can't create point3d with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [[x,y,z]], [x,y,z]");return i=a.Z.copyAttributes(r,t.options,"point3d"),(h=new n.Z.Point3D(l,o,s,i)).initCoords(),u=l.project3DTo2D(h.coords),i=h.setAttr2D(i),h.element2D=l.create("point",u,i),h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),h._c2d=h.element2D.coords.usrCoords.slice(),h},n.Z.registerElement("point3d",n.Z.createPoint3D),n.Z.Curve3D=function(t,e,r,i,n,o,u){this.constructor(t.board,u,s.Z.OBJECT_TYPE_CURVE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(t,"curve3d"),this.board.finalizeAdding(this),this.F=e,this.X=r,this.Y=i,this.Z=n,this.dataX=null,this.dataY=null,this.dataZ=null,null!==this.F&&(this.X=function(t){return this.F(t)[0]},this.Y=function(t){return this.F(t)[1]},this.Z=function(t){return this.F(t)[2]}),this.range=o,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Curve3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Curve3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Curve3D.prototype,{updateDataArray2D:function(){var t,e,r,i,n,o,s,u,h,l=a.Z.evaluate(this.visProp.numberpointshigh),c=[0,0,0];if(s=[],u=[],a.Z.exists(this.dataX))for(o=0,l=this.dataX.length;o<l;o++)c=[this.dataX[o],this.dataY[o],this.dataZ[o]],n=this.view.project3DTo2D(c),s.push(n[1]),u.push(n[2]);else if(a.Z.isArray(this.X))for(o=0,l=this.X.length;o<l;o++)c=[this.X[o],this.Y[o],this.Z[o]],n=this.view.project3DTo2D(c),s.push(n[1]),u.push(n[2]);else for(h=0,t=a.Z.evaluate(this.range),e=a.Z.evaluate(t[0]),i=((r=a.Z.evaluate(t[1]))-e)/(l-1),o=e;h<l&&o<=r;h++,o+=i)c=null!==this.F?this.F(o):[this.X(o),this.Y(o),this.Z(o)],n=this.view.project3DTo2D(c),s.push(n[1]),u.push(n[2]);return{X:s,Y:u}},updateDataArray:function(){},update:function(){return this.updateDataArray(),this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createCurve3D=function(t,e,r){var i,o,s,u,h,l,c,d=e[0];return 3===e.length?(i=e[1],h=e[2],o=null,s=null,u=null):(o=e[1],s=e[2],u=e[3],h=e[4],i=null),l=a.Z.copyAttributes(r,t.options,"curve3d"),l=(c=new n.Z.Curve3D(d,i,o,s,u,h,l)).setAttr2D(l),c.element2D=d.create("curve",[[],[]],l),c.element2D.updateDataArray=function(){var t=c.updateDataArray2D();this.dataX=t.X,this.dataY=t.Y},c.addChild(c.element2D),c.inherits.push(c.element2D),c.element2D.setParents(c),c.element2D.prepareUpdate().update(),t.isSuspendedUpdate||c.element2D.updateVisibility().updateRenderer(),c},n.Z.registerElement("curve3d",n.Z.createCurve3D),n.Z.createVectorfield3D=function(t,e,r){var i,n,o=e[0];if(!(e.length>=5&&(a.Z.isArray(e[1])||a.Z.isFunction(e[0])||a.Z.isString(e[0]))&&a.Z.isArray(e[2])&&3===e[1].length&&a.Z.isArray(e[3])&&3===e[2].length&&a.Z.isArray(e[4])&&3===e[3].length))throw Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.'"+typeof e[1]+"', ");return n=a.Z.copyAttributes(r,t.options,"vectorfield3d"),(i=o.create("curve3d",[[],[],[]],n)).setF=function(t,e){var r,n,o;return a.Z.isArray(t)?(r=a.Z.createFunction(t[0],this.board,e),n=a.Z.createFunction(t[1],this.board,e),o=a.Z.createFunction(t[2],this.board,e),this.F=function(t,e,i){return[r(t,e,i),n(t,e,i),o(t,e,i)]}):this.F=a.Z.createFunction(t,i.board,e),this},i.setF(e[1],"x, y, z"),i.xData=e[2],i.yData=e[3],i.zData=e[4],i.updateDataArray=function(){var e,r,i,n,o,s,h,l,c,d,f,p,m,v,g,b,y,C=a.Z.evaluate(this.visProp.scale),Z=[a.Z.evaluate(this.xData[0]),a.Z.evaluate(this.yData[0]),a.Z.evaluate(this.zData[0])],x=[a.Z.evaluate(this.xData[1]),a.Z.evaluate(this.yData[1]),a.Z.evaluate(this.zData[1])],_=[a.Z.evaluate(this.xData[2]),a.Z.evaluate(this.yData[2]),a.Z.evaluate(this.zData[2])],E=[(_[0]-Z[0])/x[0],(_[1]-Z[1])/x[1],(_[2]-Z[2])/x[2]],w=a.Z.evaluate(this.visProp.arrowhead.enabled);for(w&&(m=a.Z.evaluate(this.visProp.arrowhead.size),y=a.Z.evaluate(this.visProp.arrowhead.angle),v=m/t.unitX,g=m/t.unitY,b=m/Math.sqrt(t.unitX*t.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],r=0,s=Z[0];r<=x[0];s+=E[0],r++)for(i=0,h=Z[1];i<=x[1];h+=E[1],i++)for(e=0,l=Z[2];e<=x[2];l+=E[2],e++)n=this.F(s,h,l),!((o=u.Z.norm(n))<Number.EPSILON)&&(n[0]*=C,n[1]*=C,n[2]*=C,this.dataX=this.dataX.concat([s,s+n[0],NaN]),this.dataY=this.dataY.concat([h,h+n[1],NaN]),this.dataZ=this.dataZ.concat([l,l+n[2],NaN]),w&&(o*=C,c=Math.atan2(n[1],n[0]),d=(p=Math.asin(n[2]/o))-y,f=p+y,this.dataX=this.dataX.concat([s+n[0]-v*Math.cos(c)*Math.cos(d),s+n[0],s+n[0]-v*Math.cos(c)*Math.cos(f),NaN]),this.dataY=this.dataY.concat([h+n[1]-g*Math.sin(c)*Math.cos(d),h+n[1],h+n[1]-g*Math.sin(c)*Math.cos(f),NaN]),this.dataZ=this.dataZ.concat([l+n[2]-b*Math.sin(f),l+n[2],l+n[2]-b*Math.sin(d),NaN])))},i.methodMap=a.Z.deepCopy(i.methodMap,{setF:"setF"}),i},n.Z.registerElement("vectorfield3D",n.Z.createVectorfield3D),n.Z.Line3D=function(t,e,r,i,n){this.constructor(t.board,n,s.Z.OBJECT_TYPE_LINE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(t,"line3d"),this.board.finalizeAdding(this),this.point=e,this.direction=r,this.range=i||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Line3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Line3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Line3D.prototype,{getPointCoords:function(t){var e,r,i=[],n=[];if(i=[this.point.X(),this.point.Y(),this.point.Z()],a.Z.isFunction(this.direction))n=this.direction();else for(e=1;e<4;e++)n.push(a.Z.evaluate(this.direction[e]));return Math.abs(r=a.Z.evaluate(t))===1/0&&(t=this.view.intersectionLineCube(i,n,r)),[i[0]+n[0]*r,i[1]+n[1]*r,i[2]+n[2]*r]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createLine3D=function(t,e,r){var i,o,s,u,h,l,c,d,f=e[0];return i=a.Z.copyAttributes(r,t.options,"line3d"),a.Z.isPoint3D(e[2])||3===e.length&&(a.Z.isArray(e[2])||a.Z.isFunction(e[2]))?(l=a.Z.providePoints3D(f,[e[1]],r,"line3d",["point1"])[0],c=a.Z.providePoints3D(f,[e[2]],r,"line3d",["point2"])[0],u=function(){return[c.X()-l.X(),c.Y()-l.Y(),c.Z()-l.Z()]},h=[0,1],d=new n.Z.Line3D(f,l,u,h,i)):(s=a.Z.providePoints3D(f,[e[1]],r,"line3d",["point"])[0],a.Z.isFunction(e[2])?u=e[2]:3===e[2].length?u=[1].concat(e[2]):4===e[2].length&&(u=e[2]),h=e[3],o=a.Z.providePoints3D(f,[[0,0,0],[0,0,0]],r,"line3d",["point1","point2"]),d=new n.Z.Line3D(f,s,u,h,i),o[0].F=function(){return d.getPointCoords(a.Z.evaluate(d.range[0]))},o[0].prepareUpdate().update(),l=o[0],o[1].F=function(){return d.getPointCoords(a.Z.evaluate(d.range[1]))},o[1].prepareUpdate().update(),c=o[1]),i=d.setAttr2D(i),d.element2D=f.create("segment",[l.element2D,c.element2D],i),d.addChild(d.element2D),d.inherits.push(d.element2D),d.element2D.setParents(d),d.point1=l,d.point2=c,d.point1._is_new?(d.addChild(d.point1),delete d.point1._is_new):d.point1.addChild(d),d.point2._is_new?(d.addChild(d.point2),delete d.point2._is_new):d.point2.addChild(d),a.Z.exists(s)&&(s._is_new?(d.addChild(s),delete s._is_new):s.addChild(d)),d.update(),d.element2D.prepareUpdate().update().updateRenderer(),d},n.Z.registerElement("line3d",n.Z.createLine3D),n.Z.Plane3D=function(t,e,r,i,n,o,u){this.constructor(t.board,u,s.Z.OBJECT_TYPE_PLANE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(t,"plane3d"),this.board.finalizeAdding(this),this.point=e,this.direction1=r,this.direction2=n,this.range1=i||[-1/0,1/0],this.range2=o||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Plane3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Plane3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Plane3D.prototype,{updateNormal:function(){var t,e;for(t=0;t<3;t++)this.vec1[t]=a.Z.evaluate(this.direction1[t]),this.vec2[t]=a.Z.evaluate(this.direction2[t]);if(this.normal=u.Z.crossProduct(this.vec1,this.vec2),Math.abs(e=u.Z.norm(this.normal))>u.Z.eps)for(t=0;t<3;t++)this.normal[t]/=e;return this.d=u.Z.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var t,e,r,i,n,o,s,h,l,d,f,p,m,v,g=["xPlaneRear","yPlaneRear","zPlaneRear"],b=[],y=[0,0,0],C=[0,0,0],Z=[0,0,0],x=[0,0,0],_=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),"axisplane3d"!==this.elType&&_.defaultAxes&&a.Z.evaluate(this.range1[0])===-1/0&&a.Z.evaluate(this.range1[1])===1/0&&a.Z.evaluate(this.range2[0])===-1/0&&a.Z.evaluate(this.range2[1])===1/0){for(d=0;d<g.length;d++)if(3===(x=_.intersectionPlanePlane(this,_.defaultAxes[g[d]]))[0].length&&3===x[1].length||((x=[0,0,0])[d]=_.bbox3D[d][1],h=u.Z.innerProduct(x,_.defaultAxes[g[d]].normal,3),3===(x=_.intersectionPlanePlane(this,_.defaultAxes[g[d]],h))[0].length&&3===x[1].length)){for(l=0;l<b.length&&!(c.Z.distance(x[0],b[l][0],3)<u.Z.eps&&c.Z.distance(x[1],b[l][1],3)<u.Z.eps||c.Z.distance(x[0],b[l][1],3)<u.Z.eps&&c.Z.distance(x[1],b[l][0],3)<u.Z.eps);l++);l===b.length&&b.push(x.slice())}m=0,l=0;do{for(3===(x=b[m][l]).length&&(n=_.project3DTo2D(x),this.dataX.push(n[1]),this.dataY.push(n[2])),l=(l+1)%2,x=b[m][l],v=m,d=0;d<b.length;d++){if(d!==m&&c.Z.distance(x,b[d][0])<u.Z.eps){m=d,l=0;break}if(d!==m&&c.Z.distance(x,b[d][1])<u.Z.eps){m=d,l=1;break}}if(m===v){console.log("Error: update plane3d: did not find next",m);break}}while(0!==m);n=_.project3DTo2D(b[0][0]),this.dataX.push(n[1]),this.dataY.push(n[2])}else{for(l=0,t=a.Z.evaluate(this.range1[0]),e=a.Z.evaluate(this.range1[1]),r=a.Z.evaluate(this.range2[0]),i=a.Z.evaluate(this.range2[1]),Z=this.point.coords.slice(1),y=this.vec1.slice(),C=this.vec2.slice(),o=u.Z.norm(y,3),s=u.Z.norm(C,3);l<3;l++)y[l]/=o,C[l]/=s;for(d=0;d<4;d++){switch(d){case 0:f=t,p=r;break;case 1:f=e,p=r;break;case 2:f=e,p=i;break;case 3:f=t,p=i}for(l=0;l<3;l++)x[l]=Z[l]+f*y[l]+p*C[l];n=_.project3DTo2D(x),this.dataX.push(n[1]),this.dataY.push(n[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createPlane3D=function(t,e,r){var i,o,s,u,h=e[0],l=e[2],c=e[3],d=e[4]||[-1/0,1/0],f=e[5]||[-1/0,1/0];return o=a.Z.providePoints3D(h,[e[1]],r,"plane3d",["point"])[0],i=a.Z.copyAttributes(r,t.options,"plane3d"),s=new n.Z.Plane3D(h,o,l,d,c,f,i),o.addChild(s),i=s.setAttr2D(i),s.element2D=h.create("curve",[[],[]],i),s.element2D.updateDataArray=function(){var t=s.updateDataArray();this.dataX=t.X,this.dataY=t.Y},s.addChild(s.element2D),s.inherits.push(s.element2D),s.element2D.setParents(s),i=a.Z.copyAttributes(r.mesh3d,t.options,"mesh3d"),Math.abs(s.range1[0])!==1/0&&Math.abs(s.range1[1])!==1/0&&Math.abs(s.range2[0])!==1/0&&Math.abs(s.range2[1])!==1/0&&(u=h.create("mesh3d",[function(){return o.coords},l,d,c,f],i),s.grid=u,s.addChild(u),s.inherits.push(u),u.setParents(s)),s.element2D.prepareUpdate().update(),t.isSuspendedUpdate||s.element2D.updateVisibility().updateRenderer(),s},n.Z.registerElement("plane3d",n.Z.createPlane3D),n.Z.Surface3D=function(t,e,r,i,n,o,u,h){this.constructor(t.board,h,s.Z.OBJECT_TYPE_SURFACE3D,s.Z.OBJECT_CLASS_3D),this.constructor3D(t,"surface3d"),this.board.finalizeAdding(this),this.F=e,this.X=r,this.Y=i,this.Z=n,null!==this.F&&(this.X=function(t,e){return this.F(t,e)[0]},this.Y=function(t,e){return this.F(t,e)[1]},this.Z=function(t,e){return this.F(t,e)[2]}),this.range_u=o,this.range_v=u,this.methodMap=a.Z.deepCopy(this.methodMap,{})},n.Z.Surface3D.prototype=new n.Z.GeometryElement,a.Z.copyPrototypeMethods(n.Z.Surface3D,n.Z.GeometryElement3D,"constructor3D"),n.Z.extend(n.Z.Surface3D.prototype,{updateDataArray:function(){var t,e,r=a.Z.evaluate(this.visProp.stepsu),i=a.Z.evaluate(this.visProp.stepsv),n=a.Z.evaluate(this.range_u),o=a.Z.evaluate(this.range_v);return t=null!==this.F?this.F:[this.X,this.Y,this.Z],{X:(e=this.view.getMesh(t,n.concat([r]),o.concat([i])))[0],Y:e[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),n.Z.createParametricSurface3D=function(t,e,r){var i,o,s,u,h,l,c,d,f=e[0];return 4===e.length?(i=e[1],h=e[2],l=e[3],o=null,s=null,u=null):(o=e[1],s=e[2],u=e[3],h=e[4],l=e[5],i=null),c=a.Z.copyAttributes(r,t.options,"surface3d"),c=(d=new n.Z.Surface3D(f,i,o,s,u,h,l,c)).setAttr2D(c),d.element2D=f.create("curve",[[],[]],c),d.element2D.updateDataArray=function(){var t=d.updateDataArray();this.dataX=t.X,this.dataY=t.Y},d.addChild(d.element2D),d.inherits.push(d.element2D),d.element2D.setParents(d),d.element2D.prepareUpdate().update(),t.isSuspendedUpdate||d.element2D.updateVisibility().updateRenderer(),d},n.Z.registerElement("parametricsurface3d",n.Z.createParametricSurface3D),n.Z.createFunctiongraph3D=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=e[3];return i.create("parametricsurface3d",[function(t,e){return t},function(t,e){return e},n,o,s],r)},n.Z.registerElement("functiongraph3d",n.Z.createFunctiongraph3D);let te="#000";n.Z.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:te,highlightStrokeColor:te,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:te,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:te}},arc:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75},axis:{},boxplot:{strokeWidth:.75,strokeColor:te,fillColor:te,fillOpacity:.2,highlightStrokeWidth:.75,highlightStrokeColor:te,highlightFillColor:te,highlightFillOpacity:.1},circle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:te,highlightFillColor:"none",highlightStrokeColor:te,center:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},point2:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te}},circumcircle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:te,highlightFillColor:"none",highlightStrokeColor:te,center:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te}},circumcirclearc:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75},circumcirclesector:{strokeColor:te,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:te,strokeWidth:.75},conic:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:te,highlightStrokeColor:te,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75},grid:{strokeWidth:.75},hatch:{strokeColor:te,strokeWidth:.75},incircle:{strokeWidth:.75,highlightStrokeWidth:1.125,strokeColor:te,highlightFillColor:"none",highlightStrokeColor:te,center:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},label:{strokeColor:te},line:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75,point1:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},point2:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te}},normal:{strokeColor:te},parallel:{strokeColor:te},perpendicular:{strokeColor:te},perpendicularsegment:{strokeColor:te},point:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},borders:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75}},sector:{strokeColor:te,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te}},slider:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te,baseline:{strokeWidth:.75,strokeColor:te,highlightStrokeColor:te},label:{strokeColor:te},highline:{strokeWidth:2.25,name:"",strokeColor:te,highlightStrokeColor:te},ticks:{strokeColor:te}},slopefield:{strokeWidth:.5625,highlightStrokeWidth:.75,highlightStrokeColor:te,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:te,strokeWidth:.75,highlightStrokeColor:te,highlightStrokeWidth:.75,point1:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},point2:{size:.75,fillColor:te,strokeColor:te,highlightStrokeWidth:3,highlightFillColor:te,highlightStrokeColor:te},ticks:{strokeWidth:.75}},text:{strokeColor:te},tracecurve:{strokeColor:te},turtle:{strokeWidth:.75,strokeColor:te,arrow:{strokeWidth:1.5,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.5625,highlightStrokeWidth:.75,highlightStrokeColor:te,highlightStrokeOpacity:.8}},n.Z.COORDS_BY_SCREEN,n.Z.COORDS_BY_USER,n.Z.Dump,n.Z.Expect,n.Z.JSXGraph,n.Z.Math,n.Z.Options,n.Z.boards,n.Z.elements,n.Z.palette,n.Z.paletteWong,n.Z.Board,n.Z.Chart,n.Z.Circle,n.Z.Complex,n.Z.Composition,n.Z.Coords,n.Z.CoordsElement,n.Z.Curve,n.Z.GeometryElement,n.Z.Group,n.Z.Image,n.Z.JessieCode,n.Z.PrefixParser,n.Z.Line,n.Z.Point,n.Z.Polygon,n.Z.Text,n.Z.Ticks,n.Z.Transformation,n.Z.Turtle,n.Z.View3D,n.Z.LMS2rgb,n.Z.addEvent,n.Z.autoDigits,n.Z.autoHighlight,n.Z.bind;let tr=n.Z.capitalize;n.Z.clearVisPropOld,n.Z.clone,n.Z.cloneAndCopy,n.Z.cmpArrays,n.Z.coordsArrayToMatrix,n.Z.copyAttributes,n.Z.createEvalFunction,n.Z.createFunction,n.Z.createHTMLSlider,n.Z.debug,n.Z.debugInt,n.Z.debugLine,n.Z.debugWST,n.Z.deepCopy,n.Z.def,n.Z.deprecated,n.Z.eliminateDuplicates,n.Z.escapeHTML,n.Z.evalSlider,n.Z.evaluate,n.Z.filterElements,n.Z.getBoardByContainerId,n.Z.getCSSTransformMatrix,n.Z.getCSSTransform,n.Z.getDimensions,n.Z.getOffset,n.Z.getPosition,n.Z.getProp,n.Z.hex2rgb,n.Z.hsv2rgb,n.Z.isAndroid,n.Z.isApple,n.Z.isArray,n.Z.isInArray,n.Z.isInObject,n.Z.isMetroApp,n.Z.isMozilla,n.Z.isBoard,n.Z.isName,n.Z.isNode,n.Z.isNumber,n.Z.isObject,n.Z.isPointType,n.Z.isString,n.Z.isTouchDevice,n.Z.isTransformationOrArray,n.Z.isWebWorker,n.Z.isWebkitAndroid,n.Z.isWebkitApple,n.Z.keys,n.Z.merge,n.Z.normalizePointFace,n.Z.providePoints,n.Z.registerElement,n.Z.registerReader,n.Z.removeAllEvents,n.Z.removeElementFromArray,n.Z.removeEvent,n.Z.rgb2LMS,n.Z.rgb2bw,n.Z.rgb2cb,n.Z.rgb2css,n.Z.rgb2hex,n.Z.rgb2hsv,n.Z.rgbParser,n.Z.rgba2rgbo,n.Z.rgbo2rgba,n.Z.sanitizeHTML,n.Z.shortcut,n.Z.str2Bool,n.Z.supportsCanvas,n.Z.supportsPointerEvents,n.Z.supportsSVG,n.Z.supportsVML,n.Z.swap,n.Z.timedChunk,n.Z.toFixed,n.Z.toFullscreen,n.Z.toJSON,n.Z.trim,n.Z.trimNumber,n.Z.truncate,n.Z.unescapeHTML,n.Z.uniqueArray,n.Z.useBlackWhiteOptions,n.Z.useStandardOptions,n.Z.warn,o.Z.isBrowser?window.JXG=n.Z:o.Z.isWebWorker()&&(self.JXG=n.Z);var ti=n.Z},7901:function(t,e){"use strict";var r={};try{"object"!=typeof JXG||JXG.extend||(r=JXG)}catch(t){}r.extend=function(t,e,r,i){var n;for(n in r=r||!1,i=i||!1,e)(!r||r&&e.hasOwnProperty(n))&&(t[i?n.toLowerCase():n]=e[n])},r.defineConstant=function(t,e,i,n){(n=n||!1)&&r.exists(t[e])||Object.defineProperty(t,e,{value:i,writable:!1,enumerable:!0,configurable:!1})},r.extendConstants=function(t,e,r,i){var n,o;for(n in r=r||!1,i=i||!1,e)(!r||r&&e.hasOwnProperty(n))&&(o=i?n.toUpperCase():n,this.defineConstant(t,o,e[n]))},r.extend(r,{boards:{},readers:{},elements:{},registerElement:function(t,e){t=t.toLowerCase(),this.elements[t]=e},registerReader:function(t,e){var r,i;for(r=0;r<e.length;r++)i=e[r].toLowerCase(),"function"!=typeof this.readers[i]&&(this.readers[i]=t)},shortcut:function(t,e){return function(){return t[e].apply(this,arguments)}},getRef:function(t,e){return r.deprecated("JXG.getRef()","Board.select()"),t.select(e)},getReference:function(t,e){return r.deprecated("JXG.getReference()","Board.select()"),t.select(e)},getBoardByContainerId:function(t){var e;for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t)return JXG.boards[e];return null},deprecated:function(t,e){var i=t+" is deprecated.";e&&(i+=" Please use "+e+" instead."),r.warn(i)},warn:function(t){window.console&&console.warn?console.warn("WARNING:",t):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+t+"<br />")},debugInt:function(t){var e,r;for(e=0;e<arguments.length;e++)r=arguments[e],window.console&&console.log?console.log(r):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=r+"<br/>")},debugWST:function(t){var e=Error();r.debugInt.apply(this,arguments),e&&e.stack&&(r.debugInt("stacktrace"),r.debugInt(e.stack.split("\n").slice(1).join("\n")))},debugLine:function(t){var e=Error();r.debugInt.apply(this,arguments),e&&e.stack&&r.debugInt("Called from",e.stack.split("\n").slice(2,3).join("\n"))},debug:function(t){r.debugInt.apply(this,arguments)},themes:{}}),e.Z=r},2971:function(t,e,r){"use strict";var i=r(7901),n=r(1013);i.Z.Complex=function(t,e){this.isComplex=!0,t&&t.isComplex&&(e=t.imaginary,t=t.real),this.real=t||0,this.imaginary=e||0,this.absval=0,this.angle=0},i.Z.extend(i.Z.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return n.Z.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return n.Z.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var e,r;return n.Z.isNumber(t)?(this.real*=t,this.imaginary*=t):(e=this.real,r=this.imaginary,this.real=e*t.real-r*t.imaginary,this.imaginary=e*t.imaginary+r*t.real),this},div:function(t){var e,r,i;if(n.Z.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;e=t.real*t.real+t.imaginary*t.imaginary,i=this.real,r=this.imaginary,this.real=(i*t.real+r*t.imaginary)/e,this.imaginary=(r*t.real-i*t.imaginary)/e}return this},conj:function(){return this.imaginary*=-1,this}}),i.Z.C={},i.Z.C.add=function(t,e){var r=new i.Z.Complex(t);return r.add(e),r},i.Z.C.sub=function(t,e){var r=new i.Z.Complex(t);return r.sub(e),r},i.Z.C.mult=function(t,e){var r=new i.Z.Complex(t);return r.mult(e),r},i.Z.C.div=function(t,e){var r=new i.Z.Complex(t);return r.div(e),r},i.Z.C.conj=function(t){var e=new i.Z.Complex(t);return e.conj(),e},i.Z.C.abs=function(t){var e=new i.Z.Complex(t);return e.conj(),e.mult(t),Math.sqrt(e.real)},i.Z.C.copy=function(t){return new i.Z.Complex(t)},i.Z.Complex.C=i.Z.C,e.Z=i.Z.Complex},7895:function(t,e,r){"use strict";var i=r(7901),n=r(2840),o=r(9401),s=r(4204),a=r(6692),u=r(1013),h=r(2285);s.Z.Geometry={},i.Z.extend(s.Z.Geometry,{angle:function(t,e,r){var n,o,s,a,u=[],h=[],l=[];return i.Z.deprecated("Geometry.angle()","Geometry.rad()"),t.coords?(u[0]=t.coords.usrCoords[1],u[1]=t.coords.usrCoords[2]):(u[0]=t[0],u[1]=t[1]),e.coords?(h[0]=e.coords.usrCoords[1],h[1]=e.coords.usrCoords[2]):(h[0]=e[0],h[1]=e[1]),r.coords?(l[0]=r.coords.usrCoords[1],l[1]=r.coords.usrCoords[2]):(l[0]=r[0],l[1]=r[1]),n=u[0]-h[0],o=u[1]-h[1],s=l[0]-h[0],Math.atan2(n*(a=l[1]-h[1])-o*s,n*s+o*a)},trueAngle:function(t,e,r){return 57.29577951308232*this.rad(t,e,r)},rad:function(t,e,r){var i,n,o,s,a,u,h;return t.coords?(i=t.coords.usrCoords[1],n=t.coords.usrCoords[2]):(i=t[0],n=t[1]),e.coords?(o=e.coords.usrCoords[1],s=e.coords.usrCoords[2]):(o=e[0],s=e[1]),r.coords?(a=r.coords.usrCoords[1],u=r.coords.usrCoords[2]):(a=r[0],u=r[1]),(h=Math.atan2(u-s,a-o)-Math.atan2(n-s,i-o))<0&&(h+=6.283185307179586),h},angleBisector:function(t,e,r,i){var s,a,h,l,c,d=t.coords.usrCoords,f=e.coords.usrCoords,p=r.coords.usrCoords;return(u.Z.exists(i)||(i=t.board),0===f[0])?new o.Z(n.Z.COORDS_BY_USER,[1,(d[1]+p[1])*.5,(d[2]+p[2])*.5],i):(l=d[1]-f[1],s=Math.atan2(c=d[2]-f[2],l),l=p[1]-f[1],h=(s+(a=Math.atan2(c=p[2]-f[2],l)))*.5,s>a&&(h+=Math.PI),l=Math.cos(h)+f[1],c=Math.sin(h)+f[2],new o.Z(n.Z.COORDS_BY_USER,[1,l,c],i))},reflection:function(t,e,r){var i,s,a,h,l,c,d=e.coords.usrCoords,f=t.point1.coords.usrCoords,p=t.point2.coords.usrCoords;return u.Z.exists(r)||(r=e.board),h=p[1]-f[1],l=p[2]-f[2],i=d[1]-f[1],c=(h*(d[2]-f[2])-l*i)/(h*h+l*l),s=d[1]+2*c*l,a=d[2]-2*c*h,new o.Z(n.Z.COORDS_BY_USER,[s,a],r)},rotation:function(t,e,r,i){var s,a,h,l,c,d,f=e.coords.usrCoords,p=t.coords.usrCoords;return u.Z.exists(i)||(i=e.board),s=f[1]-p[1],a=f[2]-p[2],c=s*(h=Math.cos(r))-a*(l=Math.sin(r))+p[1],d=s*l+a*h+p[2],new o.Z(n.Z.COORDS_BY_USER,[c,d],i)},perpendicular:function(t,e,r){var i,a,h,l,c,d=t.point1.coords.usrCoords,f=t.point2.coords.usrCoords,p=e.coords.usrCoords;return u.Z.exists(r)||(r=e.board),e===t.point1?(i=d[1]+f[2]-d[2],a=d[2]-f[1]+d[1],Math.abs(c=d[0]*f[0])<s.Z.eps&&(i=f[2],a=-f[1]),l=[c,i,a],h=!0):e===t.point2?(i=f[1]+d[2]-f[2],a=f[2]-d[1]+f[1],Math.abs(c=d[0]*f[0])<s.Z.eps&&(i=d[2],a=-d[1]),l=[c,i,a],h=!1):Math.abs(s.Z.innerProduct(p,t.stdform,3))<s.Z.eps?(i=p[1]+f[2]-p[2],a=p[2]-f[1]+p[1],Math.abs(c=f[0])<s.Z.eps&&(i=f[2],a=-f[1]),h=!0,Math.abs(c)>s.Z.eps&&Math.abs(i-p[1])<s.Z.eps&&Math.abs(a-p[2])<s.Z.eps&&(i=p[1]+d[2]-p[2],a=p[2]-d[1]+p[1],h=!1),l=[c,i,a]):(l=[0,t.stdform[1],t.stdform[2]],l=s.Z.crossProduct(l,p),l=s.Z.crossProduct(l,t.stdform),h=!0),[new o.Z(n.Z.COORDS_BY_USER,l,r),h]},circumcenterMidpoint:function(){i.Z.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(t,e,r,i){var a,h,l,c,d=t.coords.usrCoords,f=e.coords.usrCoords,p=r.coords.usrCoords;return u.Z.exists(i)||(i=t.board),a=[f[0]-d[0],-f[2]+d[2],f[1]-d[1]],h=[(d[0]+f[0])*.5,(d[1]+f[1])*.5,(d[2]+f[2])*.5],l=s.Z.crossProduct(a,h),a=[p[0]-f[0],-p[2]+f[2],p[1]-f[1]],h=[(f[0]+p[0])*.5,(f[1]+p[1])*.5,(f[2]+p[2])*.5],c=s.Z.crossProduct(a,h),new o.Z(n.Z.COORDS_BY_USER,s.Z.crossProduct(l,c),i)},distance:function(t,e,r){var i,n=0;for(r||(r=Math.min(t.length,e.length)),i=0;i<r;i++)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},affineDistance:function(t,e,r){var i;return(i=this.distance(t,e,r))>s.Z.eps&&(Math.abs(t[0])<s.Z.eps||Math.abs(e[0])<s.Z.eps)?1/0:i},affineRatio:function(t,e,r){var i;return u.Z.exists(t.usrCoords)&&(t=t.usrCoords),u.Z.exists(e.usrCoords)&&(e=e.usrCoords),u.Z.exists(r.usrCoords)&&(r=r.usrCoords),Math.abs(i=e[1]-t[1])>s.Z.eps?(r[1]-t[1])/i:(r[2]-t[2])/(e[2]-t[2])},sortVertices:function(t){for(var e,r=h.Z.each(t,h.Z.coordsArray),i=r.length,n=null;r[0][0]===r[i-1][0]&&r[0][1]===r[i-1][1]&&r[0][2]===r[i-1][2];)n=r.pop(),i--;return e=r[0],r.sort(function(t,r){return(t[2]===e[2]&&t[1]===e[1]?-1/0:Math.atan2(t[2]-e[2],t[1]-e[1]))-(r[2]===e[2]&&r[1]===e[1]?-1/0:Math.atan2(r[2]-e[2],r[1]-e[1]))}),null!==n&&r.push(n),r},signedTriangle:function(t,e,r){var i=h.Z.coordsArray(t),n=h.Z.coordsArray(e),o=h.Z.coordsArray(r);return .5*((n[1]-i[1])*(o[2]-i[2])-(n[2]-i[2])*(o[1]-i[1]))},signedPolygon:function(t,e){var r,i,n=0,o=h.Z.each(t,h.Z.coordsArray);for(void 0===e&&(e=!0),e?o.unshift(o[o.length-1]):o=this.sortVertices(o),i=o.length,r=1;r<i;r++)n+=o[r-1][1]*o[r][2]-o[r][1]*o[r-1][2];return .5*n},GrahamScan:function(t){var e,r=1,i=h.Z.each(t,h.Z.coordsArray),n=i.length;for(e=2,n=(i=this.sortVertices(i)).length;e<n;e++){for(;0>=this.signedTriangle(i[r-1],i[r],i[e]);){if(r>1)r-=1;else if(e===n-1)break;e+=1}r+=1,i=u.Z.swap(i,r,e)}return i.slice(0,r)},calcStraight:function(t,e,r,i){var o,a,h,l,c,d,f,p,m,v;u.Z.exists(i)||(i=10),d=u.Z.evaluate(t.visProp.straightfirst),f=u.Z.evaluate(t.visProp.straightlast),Math.abs(e.scrCoords[0])<s.Z.eps&&(d=!0),Math.abs(r.scrCoords[0])<s.Z.eps&&(f=!0),!(!d&&!f||((p=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,p[1]=t.stdform[1]/t.board.unitX,p[2]=-t.stdform[2]/t.board.unitY,isNaN(p[0]+p[1]+p[2])))&&(o=!1,a=!1,o=!d&&Math.abs(e.usrCoords[0])>=s.Z.eps&&e.scrCoords[1]>=0&&e.scrCoords[1]<=t.board.canvasWidth&&e.scrCoords[2]>=0&&e.scrCoords[2]<=t.board.canvasHeight,a=!f&&Math.abs(r.usrCoords[0])>=s.Z.eps&&r.scrCoords[1]>=0&&r.scrCoords[1]<=t.board.canvasWidth&&r.scrCoords[2]>=0&&r.scrCoords[2]<=t.board.canvasHeight,l=(h=this.meetLineBoard(p,t.board,i))[0],c=h[1],(o||a||(d||!f||this.isSameDirection(e,r,l)||this.isSameDirection(e,r,c))&&(!d||f||this.isSameDirection(r,e,l)||this.isSameDirection(r,e,c)))&&(o?a||(v=this.isSameDir(e,r,l,c)?c:l):a?m=this.isSameDir(e,r,l,c)?l:c:this.isSameDir(e,r,l,c)?(m=l,v=c):(v=l,m=c),m&&e.setCoordinates(n.Z.COORDS_BY_USER,m.usrCoords),v&&r.setCoordinates(n.Z.COORDS_BY_USER,v.usrCoords)))},calcLineDelimitingPoints:function(t,e,r){var i,o,a,h,l,c,d,f,p,m=!1,v=!1;l=u.Z.evaluate(t.visProp.straightfirst),c=u.Z.evaluate(t.visProp.straightlast),Math.abs(e.scrCoords[0])<s.Z.eps&&(l=!0),Math.abs(r.scrCoords[0])<s.Z.eps&&(c=!0),(d=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,d[1]=t.stdform[1]/t.board.unitX,d[2]=-t.stdform[2]/t.board.unitY,!isNaN(d[0]+d[1]+d[2])&&(m=!l,v=!c,o=t.board.getBoundingBox(),t.getSlope()>=0?(a=this.projectPointToLine({coords:{usrCoords:[1,o[2],o[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,o[0],o[3]]}},t,t.board)):(a=this.projectPointToLine({coords:{usrCoords:[1,o[0],o[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,o[2],o[3]]}},t,t.board)),!(!m&&!v&&(!l&&!c&&(i=e.distance(n.Z.COORDS_BY_USER,r),Math.abs(e.distance(n.Z.COORDS_BY_USER,a)+a.distance(n.Z.COORDS_BY_USER,r)-i)>s.Z.eps||Math.abs(e.distance(n.Z.COORDS_BY_USER,h)+h.distance(n.Z.COORDS_BY_USER,r)-i)>s.Z.eps)||!l&&c&&!this.isSameDirection(e,r,a)&&!this.isSameDirection(e,r,h)||l&&!c&&!this.isSameDirection(r,e,a)&&!this.isSameDirection(r,e,h)))&&(m?v||(p=this.isSameDir(e,r,a,h)?h:a):v?f=this.isSameDir(e,r,a,h)?a:h:this.isSameDir(e,r,a,h)?(f=a,p=h):(p=a,f=h),f&&e.setCoordinates(n.Z.COORDS_BY_USER,f.usrCoords),p&&r.setCoordinates(n.Z.COORDS_BY_USER,p.usrCoords)))},calcLabelQuadrant:function(t){return t<0&&(t+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((t+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(t,e,r,i){var n=e.usrCoords[1]-t.usrCoords[1],o=e.usrCoords[2]-t.usrCoords[2],a=i.usrCoords[1]-r.usrCoords[1],u=i.usrCoords[2]-r.usrCoords[2];return Math.abs(e.usrCoords[0])<s.Z.eps&&(n=e.usrCoords[1],o=e.usrCoords[2]),Math.abs(t.usrCoords[0])<s.Z.eps&&(n=-t.usrCoords[1],o=-t.usrCoords[2]),n*a+o*u>=0},isSameDirection:function(t,e,r){var i,n,o,a,u=!1;return i=e.usrCoords[1]-t.usrCoords[1],n=e.usrCoords[2]-t.usrCoords[2],o=r.usrCoords[1]-t.usrCoords[1],a=r.usrCoords[2]-t.usrCoords[2],Math.abs(i)<s.Z.eps&&(i=0),Math.abs(n)<s.Z.eps&&(n=0),Math.abs(o)<s.Z.eps&&(o=0),Math.abs(a)<s.Z.eps&&(a=0),i>=0&&o>=0?u=n>=0&&a>=0||n<=0&&a<=0:i<=0&&o<=0&&(u=n>=0&&a>=0||n<=0&&a<=0),u},det3p:function(t,e,r){return(t[1]-r[1])*(e[2]-r[2])-(e[1]-r[1])*(t[2]-r[2])},windingNumber:function(t,e,r){var i,n,o,a,h,l,c=0,d=e.length,f=t[1],p=t[2],m=0;if(0===d)return 0;if((r=r||!1)&&(m=1),isNaN(f)||isNaN(p)||(u.Z.exists(e[0].coords)?(i=e[0].coords,n=e[d-1].coords):(i=e[0],n=e[d-1]),i.usrCoords[1]===f&&i.usrCoords[2]===p))return 1;for(l=0;l<d-m;l++)if(u.Z.exists(e[l].coords)?(n=e[l].coords.usrCoords,o=e[(l+1)%d].coords.usrCoords):(n=e[l].usrCoords,o=e[(l+1)%d].usrCoords),!(0===n[0]||0===o[0]||isNaN(n[1])||isNaN(o[1])||isNaN(n[2])||isNaN(o[2]))){if(o[2]===p){if(o[1]===f)return 1;if(n[2]===p&&o[1]>f==n[1]<f)return 0}if(n[2]<p!=o[2]<p){if(h=2*(o[2]>n[2]?1:0)-1,n[1]>=f){if(o[1]>f)c+=h;else{if(0===(a=this.det3p(n,o,t)))return 0;a>0+s.Z.eps==o[2]>n[2]&&(c+=h)}}else o[1]>f&&(a=this.det3p(n,o,t))>0+s.Z.eps==o[2]>n[2]&&(c+=h)}}return c},pnpoly:function(t,e,r,i){var s,a,h,l,c,d,f,p,m=!1;for(i===n.Z.COORDS_BY_USER?(l=(d=new o.Z(n.Z.COORDS_BY_USER,[t,e],this.board)).scrCoords[1],c=d.scrCoords[2]):(l=t,c=e),s=0,a=(h=r.length)-2;s<h-1;a=s++)f=u.Z.exists(r[s].coords)?r[s].coords:r[s],p=u.Z.exists(r[a].coords)?r[a].coords:r[a],f.scrCoords[2]>c!=p.scrCoords[2]>c&&l<(p.scrCoords[1]-f.scrCoords[1])*(c-f.scrCoords[2])/(p.scrCoords[2]-f.scrCoords[2])+f.scrCoords[1]&&(m=!m);return m},intersectionFunction:function(t,e,r,a,h,l){var c=this,d=!1,f=!1;return d=e.elementClass===n.Z.OBJECT_CLASS_CURVE&&(e.type===n.Z.OBJECT_TYPE_ARC||e.type===n.Z.OBJECT_TYPE_SECTOR),f=r.elementClass===n.Z.OBJECT_CLASS_CURVE&&(r.type===n.Z.OBJECT_TYPE_ARC||r.type===n.Z.OBJECT_TYPE_SECTOR),(e.elementClass===n.Z.OBJECT_CLASS_CURVE||r.elementClass===n.Z.OBJECT_CLASS_CURVE)&&(e.elementClass===n.Z.OBJECT_CLASS_CURVE||e.elementClass===n.Z.OBJECT_CLASS_CIRCLE)&&(r.elementClass===n.Z.OBJECT_CLASS_CURVE||r.elementClass===n.Z.OBJECT_CLASS_CIRCLE)?function(){return c.meetCurveCurve(e,r,a,h,e.board)}:(e.elementClass!==n.Z.OBJECT_CLASS_CURVE||d||r.elementClass!==n.Z.OBJECT_CLASS_LINE)&&(r.elementClass!==n.Z.OBJECT_CLASS_CURVE||f||e.elementClass!==n.Z.OBJECT_CLASS_LINE)?e.type===n.Z.OBJECT_TYPE_POLYGON||r.type===n.Z.OBJECT_TYPE_POLYGON?e.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var t,i=u.Z.evaluate(e.visProp.straightfirst),n=u.Z.evaluate(e.visProp.straightlast),o=u.Z.evaluate(r.visProp.straightfirst),s=u.Z.evaluate(r.visProp.straightlast);return t=!u.Z.evaluate(l)&&(!i||!n||!o||!s),c.meetPolygonLine(r,e,a,e.board,t)}:r.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var t,i=u.Z.evaluate(e.visProp.straightfirst),n=u.Z.evaluate(e.visProp.straightlast),o=u.Z.evaluate(r.visProp.straightfirst),s=u.Z.evaluate(r.visProp.straightlast);return t=!u.Z.evaluate(l)&&(!i||!n||!o||!s),c.meetPolygonLine(e,r,a,e.board,t)}:function(){return c.meetPathPath(e,r,a,e.board)}:e.elementClass===n.Z.OBJECT_CLASS_LINE&&r.elementClass===n.Z.OBJECT_CLASS_LINE?function(){var t,i,s=u.Z.evaluate(e.visProp.straightfirst),h=u.Z.evaluate(e.visProp.straightlast),d=u.Z.evaluate(r.visProp.straightfirst),f=u.Z.evaluate(r.visProp.straightlast);return u.Z.evaluate(l)||s&&h&&d&&f?c.meet(e.stdform,r.stdform,a,e.board):(t=c.meetSegmentSegment(e.point1.coords.usrCoords,e.point2.coords.usrCoords,r.point1.coords.usrCoords,r.point2.coords.usrCoords),i=!s&&t[1]<0||!h&&t[1]>1||!d&&t[2]<0||!f&&t[2]>1?[0,NaN,NaN]:t[0],new o.Z(n.Z.COORDS_BY_USER,i,e.board))}:function(){var t,h,p,m=c.meet(e.stdform,r.stdform,a,e.board),v=!0;return u.Z.evaluate(l)?m:(e.elementClass!==n.Z.OBJECT_CLASS_LINE||(t=u.Z.evaluate(e.visProp.straightfirst),h=u.Z.evaluate(e.visProp.straightlast),t&&h||(p=c.affineRatio(e.point1.coords,e.point2.coords,m),(h||!(p>1+s.Z.eps))&&(t||!(p<0-s.Z.eps)))))&&(r.elementClass!==n.Z.OBJECT_CLASS_LINE||(t=u.Z.evaluate(r.visProp.straightfirst),h=u.Z.evaluate(r.visProp.straightlast),t&&h||(p=c.affineRatio(r.point1.coords,r.point2.coords,m),(h||!(p>1+s.Z.eps))&&(t||!(p<0-s.Z.eps)))))&&(!d||((v=c.coordsOnArc(e,m))&&f&&(v=c.coordsOnArc(r,m)),v))?m:new o.Z(i.Z.COORDS_BY_USER,[0,NaN,NaN],e.board)}:function(){return c.meetCurveLine(e,r,a,e.board,u.Z.evaluate(l))}},coordsOnArc:function(t,e){var r=this.rad(t.radiuspoint,t.center,e.usrCoords.slice(1)),i=0,n=this.rad(t.radiuspoint,t.center,t.anglepoint),o=u.Z.evaluate(t.visProp.selection);return("minor"===o&&n>Math.PI||"major"===o&&n<Math.PI)&&(i=n,n=2*Math.PI),!(r<i)&&!(r>n)},meet:function(t,e,r,i){var n=s.Z.eps;return Math.abs(t[3])<n&&Math.abs(e[3])<n?this.meetLineLine(t,e,r,i):Math.abs(t[3])>=n&&Math.abs(e[3])<n?this.meetLineCircle(e,t,r,i):Math.abs(t[3])<n&&Math.abs(e[3])>=n?this.meetLineCircle(t,e,r,i):this.meetCircleCircle(t,e,r,i)},meetLineBoard:function(t,e,r){var i,a,h,l,c=[];for(u.Z.exists(r)||(r=0),c[0]=s.Z.crossProduct(t,[r,0,1]),c[1]=s.Z.crossProduct(t,[r,1,0]),c[2]=s.Z.crossProduct(t,[-r-e.canvasHeight,0,1]),c[3]=s.Z.crossProduct(t,[-r-e.canvasWidth,1,0]),h=0;h<4;h++)if(Math.abs(c[h][0])>s.Z.eps){for(l=2;l>0;l--)c[h][l]/=c[h][0];c[h][0]=1}return Math.abs(c[1][0])<s.Z.eps?(i=c[0],a=c[2]):Math.abs(c[0][0])<s.Z.eps?(i=c[1],a=c[3]):c[1][2]<0?(i=c[0],a=c[3][2]>e.canvasHeight?c[2]:c[3]):c[1][2]>e.canvasHeight?(i=c[2],a=c[3][2]<0?c[0]:c[3]):(i=c[1],a=c[3][2]<0?c[0]:c[3][2]>e.canvasHeight?c[2]:c[3]),[new o.Z(n.Z.COORDS_BY_SCREEN,i.slice(1),e),new o.Z(n.Z.COORDS_BY_SCREEN,a.slice(1),e)]},meetLineLine:function(t,e,r,i){var a=isNaN(t[5]+e[5])?[0,0,0]:s.Z.crossProduct(t,e);return 1e-14>Math.abs(a[0])&&(a[0]=0),new o.Z(n.Z.COORDS_BY_USER,a,i)},meetLineCircle:function(t,e,r,i){var a,h,l,c,d,f,p,m,v;return e[4]<s.Z.eps?Math.abs(s.Z.innerProduct([1,e[6],e[7]],t,3))<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,e.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[NaN,NaN],i):(l=e[0],h=e.slice(1,3),a=e[3],c=t[0],d=t.slice(1,3),f=h[0]*d[1]-h[1]*d[0],p=a*c*c-(h[0]*d[0]+h[1]*d[1])*c+l,(m=f*f-4*a*p)>-s.Z.eps*s.Z.eps)?(v=[(-f+(m=Math.sqrt(Math.abs(m))))/(2*a),(-f-m)/(2*a)],0===u.Z.evaluate(r)?new o.Z(n.Z.COORDS_BY_USER,[-(-v[0]*d[1])-c*d[0],-v[0]*d[0]-c*d[1]],i):new o.Z(n.Z.COORDS_BY_USER,[-(-v[1]*d[1])-c*d[0],-v[1]*d[0]-c*d[1]],i)):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i)},meetCircleCircle:function(t,e,r,i){var a;return t[4]<s.Z.eps?Math.abs(this.distance(t.slice(6,2),e.slice(6,8))-e[4])<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,t.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i):e[4]<s.Z.eps?Math.abs(this.distance(e.slice(6,2),t.slice(6,8))-t[4])<s.Z.eps?new o.Z(n.Z.COORDS_BY_USER,e.slice(6,8),i):new o.Z(n.Z.COORDS_BY_USER,[0,0,0],i):(a=[e[3]*t[0]-t[3]*e[0],e[3]*t[1]-t[3]*e[1],e[3]*t[2]-t[3]*e[2],0,1,1/0,1/0,1/0],a=s.Z.normalize(a),this.meetLineCircle(a,t,r,i))},meetCurveCurve:function(t,e,r,i,s,h){var l;return l=u.Z.exists(h)&&"newton"===h?a.Z.generalizedNewton(t,e,u.Z.evaluate(r),i):3===t.bezierDegree||3===e.bezierDegree?this.meetBezierCurveRedBlueSegments(t,e,r):this.meetCurveRedBlueSegments(t,e,r),new o.Z(n.Z.COORDS_BY_USER,l,s)},meetCurveLine:function(t,e,r,i,o){var s,a;return u.Z.exists(i)||(i=t.board),t.elementClass===n.Z.OBJECT_CLASS_CURVE?(s=t,a=e):(s=e,a=t),this.meetCurveLineDiscrete(s,a,r,i,!o)},meetCurveLineContinuous:function(t,e,r,i,u){var h,l,c,d,f,p,m,v,g,b,y,C,Z,x=s.Z.eps,_=s.Z.eps;for(f=(d=this.meetCurveLineDiscrete(t,e,r,i,u)).usrCoords[1],p=d.usrCoords[2],l=function(e){var r,i;return e>t.maxX()||e<t.minX()?1/0:(r=f-t.X(e))*r+(i=p-t.Y(e))*i},c=function(r){var i=e.stdform[0]+e.stdform[1]*t.X(r)+e.stdform[2]*t.Y(r);return i*i},b=0,v=(t.maxX()-t.minX())/50,g=t.minX(),C=1e-4,y=NaN;b<50&&(h=a.Z.root(l,[Math.max(g,t.minX()),Math.min(g+v,t.maxX())]),!((Z=Math.abs(l(h)))<=C)||(C=Z,y=h,!(C<x)));b++)g+=v;return h=y,h=a.Z.root(c,[Math.max(h-v,t.minX()),Math.min(h+v,t.maxX())]),m=isNaN(Z=c(h))||Math.abs(Z)>_?0:1,new o.Z(n.Z.COORDS_BY_USER,[m,t.X(h),t.Y(h)],i)},meetCurveLineDiscrete:function(t,e,r,i,a){var h,l,c,d,f,p,m,v=u.Z.evaluate(r),g=e.point1.coords.usrCoords,b=e.point2.coords.usrCoords,y=0,C=t.numberPoints,Z=u.Z.evaluate(e.visProp.straightfirst),x=u.Z.evaluate(e.visProp.straightlast);for(p=new o.Z(n.Z.COORDS_BY_USER,[0,NaN,NaN],i),0===g[0]?g=[1,b[1]+e.stdform[2],b[2]-e.stdform[1]]:0===b[0]&&(b=[1,g[1]+e.stdform[2],g[2]-e.stdform[1]]),d=t.points[0].usrCoords,h=1;h<C;h+=t.bezierDegree)if(c=d.slice(0),d=t.points[h].usrCoords,this.distance(c,d)>s.Z.eps){for(l=0,m=3===t.bezierDegree?this.meetBeziersegmentBeziersegment([t.points[h-1].usrCoords.slice(1),t.points[h].usrCoords.slice(1),t.points[h+1].usrCoords.slice(1),t.points[h+2].usrCoords.slice(1)],[g.slice(1),b.slice(1)],a):[this.meetSegmentSegment(c,d,g,b)];l<m.length;l++)if(0<=(f=m[l])[1]&&f[1]<=1){if(y===v){if(a&&(!Z&&f[2]<0||!x&&f[2]>1))return p;return new o.Z(n.Z.COORDS_BY_USER,f[0],i)}y+=1}}return p},meetCurveRedBlueSegments:function(t,e,r){var i,n,o,s,a,h,l,c,d,f=u.Z.evaluate(r),p=0,m=e.numberPoints,v=t.numberPoints;if(m<=1||v<=1)return[0,NaN,NaN];for(i=1;i<v;i++)for(n=1,o=t.points[i-1].usrCoords,s=t.points[i].usrCoords,c=Math.min(o[1],s[1]),d=Math.max(o[1],s[1]),h=e.points[0].usrCoords;n<m;n++)if(a=h,h=e.points[n].usrCoords,Math.min(a[1],h[1])<d&&Math.max(a[1],h[1])>c&&(l=this.meetSegmentSegment(o,s,a,h))[1]>=0&&l[2]>=0&&(l[1]<1&&l[2]<1||i===v-1&&1===l[1]||n===m-1&&1===l[2])){if(p===f)return l[0];p++}return[0,NaN,NaN]},meetSegmentSegment:function(t,e,r,i){var n,o,a,u,h=s.Z.crossProduct(t,e),l=s.Z.crossProduct(r,i),c=s.Z.crossProduct(h,l);return Math.abs(c[0])<s.Z.eps?[c,1/0,1/0]:(c[1]/=c[0],c[2]/=c[0],c[0]/=c[0],a=Math.abs(e[1]-e[0]*t[1])<s.Z.eps?2:1,u=t[a]/t[0],n=(c[a]-u)/(0!==e[0]?e[a]/e[0]-u:e[a]),a=Math.abs(i[1]-i[0]*r[1])<s.Z.eps?2:1,u=r[a]/r[0],o=(c[a]-u)/(0!==i[0]?i[a]/i[0]-u:i[a]),[c,n,o])},meetPathPath:function(t,e,r,a){var h,l,c,d,f=u.Z.evaluate(r);return((c=(h=i.Z.Math.Clip._getPath(t,a)).length)>0&&this.distance(h[0].coords.usrCoords,h[c-1].coords.usrCoords,3)<s.Z.eps&&h.pop(),(c=(l=i.Z.Math.Clip._getPath(e,a)).length)>0&&this.distance(l[0].coords.usrCoords,l[c-1].coords.usrCoords,3)<s.Z.eps*s.Z.eps&&l.pop(),r<0||i.Z.Math.Clip.isEmptyCase(h,l,"intersection"))?new o.Z(n.Z.COORDS_BY_USER,[0,0,0],a):(i.Z.Math.Clip.makeDoublyLinkedList(h),i.Z.Math.Clip.makeDoublyLinkedList(l),f<(d=i.Z.Math.Clip.findIntersections(h,l,a)[0]).length)?d[f].coords:new o.Z(n.Z.COORDS_BY_USER,[0,0,0],a)},meetPolygonLine:function(t,e,r,i,s){var a,h,l,c=u.Z.evaluate(r),d=[0,0,0],f=t.borders.length,p=[];for(a=0;a<f;a++)l=t.borders[a],h=this.meetSegmentSegment(l.point1.coords.usrCoords,l.point2.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),(!s||h[2]>=0&&h[2]<1)&&h[1]>=0&&h[1]<1&&p.push(h[0]);return c>=0&&c<p.length&&(d=p[c]),new o.Z(n.Z.COORDS_BY_USER,d,i)},_bezierSplit:function(t){var e,r,i,n,o,s;return e=[(t[0][0]+t[1][0])*.5,(t[0][1]+t[1][1])*.5],r=[(t[1][0]+t[2][0])*.5,(t[1][1]+t[2][1])*.5],i=[(t[2][0]+t[3][0])*.5,(t[2][1]+t[3][1])*.5],n=[(e[0]+r[0])*.5,(e[1]+r[1])*.5],o=[(r[0]+i[0])*.5,(r[1]+i[1])*.5],s=[(n[0]+o[0])*.5,(n[1]+o[1])*.5],[[t[0],e,n,s],[s,o,i,t[3]]]},_bezierBbox:function(t){var e=[];return 4===t.length?(e[0]=Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),e[1]=Math.max(t[0][1],t[1][1],t[2][1],t[3][1]),e[2]=Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),e[3]=Math.min(t[0][1],t[1][1],t[2][1],t[3][1])):(e[0]=Math.min(t[0][0],t[1][0]),e[1]=Math.max(t[0][1],t[1][1]),e[2]=Math.max(t[0][0],t[1][0]),e[3]=Math.min(t[0][1],t[1][1])),e},_bezierOverlap:function(t,e){return t[2]>=e[0]&&t[0]<=e[2]&&t[1]>=e[3]&&t[3]<=e[1]},_bezierListConcat:function(t,e,r,i){var n,o=u.Z.exists(i),s=0,a=e.length,h=t.length;for(h>0&&a>0&&(1===t[h-1][1]&&0===e[0][1]||o&&1===t[h-1][2]&&0===e[0][2])&&(s=1),n=s;n<a;n++)o&&(e[n][2]*=.5,e[n][2]+=i),e[n][1]*=.5,e[n][1]+=r,t.push(e[n])},_bezierMeetSubdivision:function(t,e,r){var i,n,o,s,a,u,h,l,c,d,f,p,m=[];return(n=this._bezierBbox(e),i=this._bezierBbox(t),this._bezierOverlap(n,i))?r<5?(u=(o=this._bezierSplit(t))[0],h=o[1],s=(o=this._bezierSplit(e))[0],a=o[1],this._bezierListConcat(m,this._bezierMeetSubdivision(u,s,r+1),0,0),this._bezierListConcat(m,this._bezierMeetSubdivision(u,a,r+1),0,.5),this._bezierListConcat(m,this._bezierMeetSubdivision(h,s,r+1),.5,0),this._bezierListConcat(m,this._bezierMeetSubdivision(h,a,r+1),.5,.5),m):(f=[1].concat(t[0]),p=[1].concat(t[3]),c=[1].concat(e[0]),d=[1].concat(e[3]),(l=this.meetSegmentSegment(f,p,c,d))[1]>=0&&l[2]>=0&&l[1]<=1&&l[2]<=1)?[l]:[]:[]},_bezierLineMeetSubdivision:function(t,e,r,i){var n,o,s,a,u,h,l,c,d,f,p=[];return(n=this._bezierBbox(e),o=this._bezierBbox(t),i&&!this._bezierOverlap(o,n))?[]:r<5?(a=(s=this._bezierSplit(t))[0],u=s[1],this._bezierListConcat(p,this._bezierLineMeetSubdivision(a,e,r+1),0),this._bezierListConcat(p,this._bezierLineMeetSubdivision(u,e,r+1),.5),p):(d=[1].concat(t[0]),f=[1].concat(t[3]),l=[1].concat(e[0]),c=[1].concat(e[1]),(h=this.meetSegmentSegment(d,f,l,c))[1]>=0&&h[1]<=1&&(!i||h[2]>=0&&h[2]<=1))?[h]:[]},meetBeziersegmentBeziersegment:function(t,e,r){var i,n,o;for((i=4===t.length&&4===e.length?this._bezierMeetSubdivision(t,e,0):this._bezierLineMeetSubdivision(t,e,0,r)).sort(function(t,e){return(t[1]-e[1])*1e7+(t[2]-e[2])}),n=[],o=0;o<i.length;o++)(0===o||i[o][1]!==i[o-1][1]||i[o][2]!==i[o-1][2])&&n.push(i[o]);return n},meetBezierCurveRedBlueSegments:function(t,e,r){var i,o,a,h,l,c,d,f,p,m,v,g,b,y=u.Z.evaluate(r),C=0,Z=0,x=[];if(e.numberPoints<e.bezierDegree+1||t.numberPoints<t.bezierDegree+1)return[0,NaN,NaN];for(1===t.bezierDegree&&3===e.bezierDegree&&(c=t,t=e,e=c),g=e.numberPoints-e.bezierDegree,b=t.numberPoints-t.bezierDegree,t.type===n.Z.OBJECT_TYPE_SECTOR&&(C=3,b-=3),e.type===n.Z.OBJECT_TYPE_SECTOR&&(Z=3,g-=3),o=C;o<b;o+=t.bezierDegree)for(d=[(i=t.points)[o].usrCoords.slice(1),i[o+1].usrCoords.slice(1)],3===t.bezierDegree&&(d[2]=i[o+2].usrCoords.slice(1),d[3]=i[o+3].usrCoords.slice(1)),p=this._bezierBbox(d),a=Z;a<g;a+=e.bezierDegree)if(f=[(i=e.points)[a].usrCoords.slice(1),i[a+1].usrCoords.slice(1)],3===e.bezierDegree&&(f[2]=i[a+2].usrCoords.slice(1),f[3]=i[a+3].usrCoords.slice(1)),m=this._bezierBbox(f),this._bezierOverlap(p,m)){if(0===(v=this.meetBeziersegmentBeziersegment(d,f)).length)continue;for(h=0;h<v.length;h++)(l=v[h])[1]<-s.Z.eps||l[1]>1+s.Z.eps||l[2]<-s.Z.eps||l[2]>1+s.Z.eps||x.push(l);if(x.length>y)return x[y][0]}return x.length>y?x[y][0]:[0,NaN,NaN]},bezierSegmentEval:function(t,e){var r,i,n,o=1-t;return n=0,i=0+(r=o*o*o)*e[0][0],n+=r*e[0][1],i+=(r=3*t*o*o)*e[1][0],n+=r*e[1][1],i+=(r=3*t*t*o)*e[2][0],n+=r*e[2][1],[1,i+=(r=t*t*t)*e[3][0],n+=r*e[3][1]]},bezierArc:function(t,e,r,i,n){var o,a,u,h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_=.5*Math.PI,E=e[1],w=e[2],N=e[0],S=[],A=[];for(l=this.distance(e,t),E/=N,w/=N,c=this.rad(t.slice(1),e.slice(1),r.slice(1)),-1===n&&(c=2*Math.PI-c),o=t,o[1]/=o[0],o[2]/=o[0],o[0]/=o[0],h=o.slice(0),i?(S=[E,E+.333*(o[1]-E),E+.666*(o[1]-E),o[1]],A=[w,w+.333*(o[2]-w),w+.666*(o[2]-w),o[2]]):(S=[o[1]],A=[o[2]]);c>s.Z.eps;)c>_?(d=_,c-=_):(d=c,c=0),x=[[1,0,0],[E*(1-(f=Math.cos(n*d)))+w*(p=Math.sin(n*d)),f,-p],[w*(1-f)-E*p,p,f]],h=[(C=s.Z.matVecMult(x,o))[0]/C[0],C[1]/C[0],C[2]/C[0]],m=o[1]-E,v=o[2]-w,g=h[1]-E,b=h[2]-w,Z=s.Z.hypot(m+g,v+b),y=Math.abs(b-v)>s.Z.eps?(m+g)*(l/Z-.5)/(b-v)*8/3:(v+b)*(l/Z-.5)/(m-g)*8/3,a=[1,o[1]-y*v,o[2]+y*m],u=[1,h[1]+y*b,h[2]-y*g],S=S.concat([a[1],u[1],h[1]]),A=A.concat([a[2],u[2],h[2]]),o=h.slice(0);return i&&(S=S.concat([h[1]+.333*(E-h[1]),h[1]+.666*(E-h[1]),E]),A=A.concat([h[2]+.333*(w-h[2]),h[2]+.666*(w-h[2]),w])),[S,A]},projectPointToCircle:function(t,e,r){var i,a,h,l,c,d=e.center.coords.usrCoords;return u.Z.exists(r)||(r=t.board),u.Z.isPoint(t)?(i=t.coords.distance(n.Z.COORDS_BY_USER,e.center.coords),a=t.coords.usrCoords):(i=t.distance(n.Z.COORDS_BY_USER,e.center.coords),a=t.usrCoords),Math.abs(i)<s.Z.eps&&(i=s.Z.eps),c=e.Radius()/i,h=d[1]+c*(a[1]-d[1]),l=d[2]+c*(a[2]-d[2]),new o.Z(n.Z.COORDS_BY_USER,[h,l],r)},projectPointToLine:function(t,e,r){var i,a=[0,e.stdform[1],e.stdform[2]];return u.Z.exists(r)||(r=u.Z.exists(t.coords)?t.board:e.board),i=u.Z.exists(t.coords)?t.coords.usrCoords:t.usrCoords,a=s.Z.crossProduct(a,i),new o.Z(n.Z.COORDS_BY_USER,s.Z.crossProduct(a,e.stdform),r)},projectCoordsToSegment:function(t,e,r){var i,n=[r[1]-e[1],r[2]-e[2]],o=[t[1]-e[1],t[2]-e[2]];return Math.abs(n[0])<s.Z.eps&&Math.abs(n[1])<s.Z.eps?[e,0]:[[1,(i=s.Z.innerProduct(o,n)/s.Z.innerProduct(n,n))*n[0]+e[1],i*n[1]+e[2]],i]},projectCoordsToBeziersegment:function(t,e,r){var n;return n=i.Z.Math.Numerics.fminbr(function(i){var n=[1,e.X(r+i),e.Y(r+i)];return n[1]-=t[1],n[2]-=t[2],n[1]*n[1]+n[2]*n[2]},[0,1]),[[1,e.X(n+r),e.Y(n+r)],n]},projectPointToCurve:function(t,e,r){u.Z.exists(r)||(r=t.board);var i=t.X(),n=t.Y(),o=t.position||0;return this.projectCoordsToCurve(i,n,o,e,r)},projectCoordsToCurve:function(t,e,r,i,s){var h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_,E,w,N,S,A,P,D,M=Number.POSITIVE_INFINITY;if(u.Z.exists(s)||(s=i.board),"plot"===u.Z.evaluate(i.visProp.curvetype)){if(r=0,f=M,h=0===i.numberPoints?[0,1,1]:[i.Z(0),i.X(0),i.Y(0)],i.numberPoints>1)for(v=[1,t,e],3===i.bezierDegree?d=0:y=[i.Z(0),i.X(0),i.Y(0)],c=0;c<i.numberPoints-1;c++)3===i.bezierDegree?Z=this.projectCoordsToBeziersegment(v,i,d):(C=[i.Z(c+1),i.X(c+1),i.Y(c+1)],Z=this.projectCoordsToSegment(v,y,C)),m=Z[1],g=Z[0],0<=m&&m<=1?(p=this.distance(g,v),b=c+m):m<0?(g=y,p=this.distance(y,v),b=c):m>1&&c===i.numberPoints-2&&(g=C,p=this.distance(g,v),b=i.numberPoints-1),p<f&&(f=p,r=b,h=g),3===i.bezierDegree?(d++,c+=2):y=C;l=new o.Z(n.Z.COORDS_BY_USER,h,s)}else{for(c=0,w=(x=function(r){var n,o;return r<i.minX()||r>i.maxX()?1/0:(n=t-i.X(r))*n+(o=e-i.Y(r))*o})(r),P=i.minX(),N=((D=i.maxX())-P)/50,_=P;c<50;c++)((E=x(_))<w||w===1/0||isNaN(w))&&(r=_,w=E),_+=N;for(c=0,S=N;c<20&&isNaN(x(r-S));c++,S*=.5);for(isNaN(x(r-S))&&(S=0),A=N,c=0;c<20&&isNaN(x(r+A));c++,A*=.5);isNaN(x(r+A))&&(A=0),r=(r=(r=a.Z.fminbr(x,[Math.max(r-S,P),Math.min(r+A,D)]))<P?P:r)>D?D:r,l=new o.Z(n.Z.COORDS_BY_USER,[i.X(r),i.Y(r)],s)}return[i.updateTransform(l),r]},projectCoordsToPolygon:function(t,e){var r,n,o,s,a,u=e.vertices.length,h=1/0;for(r=0;r<u-1;r++)0<=(o=i.Z.Math.Geometry.projectCoordsToSegment(t,e.vertices[r].coords.usrCoords,e.vertices[r+1].coords.usrCoords))[1]&&o[1]<=1?(n=i.Z.Math.Geometry.distance(o[0],t,3),s=o[0]):o[1]<0?(n=i.Z.Math.Geometry.distance(e.vertices[r].coords.usrCoords,t,3),s=e.vertices[r].coords.usrCoords):(n=i.Z.Math.Geometry.distance(e.vertices[r+1].coords.usrCoords,t,3),s=e.vertices[r+1].coords.usrCoords),n<h&&(a=s.slice(0),h=n);return a},projectPointToTurtle:function(t,e,r){var i,s,a,h,l,c,d,f,p,m,v=0,g=0,b=Number.POSITIVE_INFINITY,y=e.objects.length;for(u.Z.exists(r)||(r=t.board),l=0;l<y;l++)(d=e.objects[l]).elementClass===n.Z.OBJECT_CLASS_CURVE&&(i=(p=this.projectPointToCurve(t,d))[0],m=p[1],(c=this.distance(i.usrCoords,t.coords.usrCoords))<b&&(a=i.usrCoords[1],h=i.usrCoords[2],s=m,b=c,f=d,g=v),v+=d.numberPoints);return i=new o.Z(n.Z.COORDS_BY_USER,[a,h],r),[f.updateTransform(i),s+g]},projectPointToPoint:function(t,e){return e.coords},projectPointToBoard:function(t,e){var r,i,n,o=e||t.board,a=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],u=t.coords||t,h=o.getBoundingBox();for(r=0;r<4;r++)(n=a[r])[0]*u.usrCoords[n[1]]<n[0]*h[n[2]]&&((i=s.Z.crossProduct([1,h[n[3]],h[n[4]]],[1,h[n[5]],h[n[6]]]))[3]=0,i=s.Z.normalize(i),u=this.projectPointToLine({coords:u},{stdform:i},o));return u},distPointLine:function(t,e){var r,i=e[1],n=e[2],o=e[0];return Math.abs(i)+Math.abs(n)<s.Z.eps?Number.POSITIVE_INFINITY:(r=i*t[1]+n*t[2]+o,i*=i,n*=n,Math.abs(r)/Math.sqrt(i+n))},distPointSegment:function(t,e,r){var i,n,o,a,u,h,l=s.Z.eps*s.Z.eps;return i=t[1]-e[1],n=t[2]-e[2],i=i===1/0?1e6:i===-1/0?-1e6:i,n=n===1/0?1e6:n===-1/0?-1e6:n,(u=(o=(o=r[1]-e[1])==1/0?1e6:o===-1/0?-1e6:o)*o+(a=(a=r[2]-e[2])==1/0?1e6:a===-1/0?-1e6:a)*a)>l&&((h=(i*o+n*a)/u)<0?h=0:h>1&&(h=1),i-=h*o,n-=h*a),s.Z.hypot(i,n)},reuleauxPolygon:function(t,e){var r,i=2*Math.PI,n=i/e,o=(e-1)/2,a=0,u=function(u,h){return function(l,c){var d=(l%i+i)%i,f=Math.floor(d/n)%e;return(c||(a=t[0].Dist(t[o]),r=s.Z.Geometry.rad([t[0].X()+1,t[0].Y()],t[0],t[o%e])),isNaN(f))?f:(d=.5*d+f*n*.5+r,t[f][u]()+a*Math[h](d))}};return[u("X","cos"),u("Y","sin"),0,i]},meet3Planes:function(t,e,r,i,n,o){var a,u,h,l,c,d=[0,0,0];for(c=0,a=s.Z.crossProduct(n,t),u=s.Z.crossProduct(t,r),h=s.Z.crossProduct(r,n),l=s.Z.innerProduct(t,h,3);c<3;c++)d[c]=(e*h[c]+i*a[c]+o*u[c])/l;return d},meetPlanePlane:function(t,e,r,i){var n,o,a,h=[0,0,0],l=[0,0,0];for(n=0;n<3;n++)h[n]=u.Z.evaluate(t[n]),l[n]=u.Z.evaluate(e[n]);for(n=0,o=s.Z.crossProduct(h,l);n<3;n++)h[n]=u.Z.evaluate(r[n]),l[n]=u.Z.evaluate(i[n]);return a=s.Z.crossProduct(h,l),s.Z.crossProduct(o,a)},project3DTo3DPlane:function(t,e,r){var i,n,o;return r=r||[0,0,0],i=s.Z.norm(e),n=s.Z.innerProduct(t,e,3),o=s.Z.innerProduct(r,e,3),s.Z.axpy(-((n-o)/i),e,t)},getPlaneBounds:function(t,e,r,i,n){var o,s,u,h,l;return t[2]+e[0]!==0?(u=[[t[0],e[0]],[t[1],e[1]]],h=[i-r[0],i-r[1]],o=(l=a.Z.Gauss(u,h))[0],s=l[1],h=[n-r[0],n-r[1]],[o,(l=a.Z.Gauss(u,h))[0],s,l[1]]):null}}),e.Z=s.Z.Geometry},9641:function(t,e,r){"use strict";var i=r(7901),n=r(4204),o=r(1013);i.Z.Math.DoubleBits=function(){var t=new Float64Array(1),e=new Uint32Array(t.buffer);void 0!==Float64Array&&(t[0]=1,1072693248===e[1]?(this.doubleBits=function(r){return t[0]=r,[e[0],e[1]]},this.pack=function(r,i){return e[0]=r,e[1]=i,t[0]},this.lo=function(r){return t[0]=r,e[0]},this.hi=function(r){return t[0]=r,e[1]}):1072693248===e[0]&&(this.doubleBits=function(r){return t[0]=r,[e[1],e[0]]},this.pack=function(r,i){return e[1]=r,e[0]=i,t[0]},this.lo=function(r){return t[0]=r,e[1]},this.hi=function(r){return t[0]=r,e[0]}))},i.Z.extend(i.Z.Math.DoubleBits.prototype,{sign:function(t){return this.hi(t)>>>31},exponent:function(t){return(this.hi(t)<<1>>>21)-1023},fraction:function(t){var e=this.lo(t),r=this.hi(t),i=1048575&r;return 2146435072&r&&(i+=1048576),[e,i]},denormalized:function(t){return!(2146435072&this.hi(t))}});var s=new i.Z.Math.DoubleBits,a=function(t,e){if(void 0!==t&&void 0!==e){if(n.Z.IntervalArithmetic.isInterval(t)){if(!n.Z.IntervalArithmetic.isSingleton(t))throw TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=t.lo}else this.lo=t;if(n.Z.IntervalArithmetic.isInterval(e)){if(!n.Z.IntervalArithmetic.isSingleton(e))throw TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=e.hi}else this.hi=e}else{if(void 0!==t)return Array.isArray(t)?new a(t[0],t[1]):new a(t,t);this.lo=this.hi=0}};i.Z.extend(a.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(t,e){return this.lo=t,this.hi=e,this},bounded:function(t,e){return this.set(n.Z.IntervalArithmetic.prev(t),n.Z.IntervalArithmetic.next(e))},boundedSingleton:function(t){return this.bounded(t,t)},assign:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(t)||isNaN(e)||t>e?this.setEmpty():this.set(t,e)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(t,e){return this.assign(n.Z.IntervalArithmetic.next(t),n.Z.IntervalArithmetic.prev(e))},halfOpenLeft:function(t,e){return this.assign(n.Z.IntervalArithmetic.next(t),e)},halfOpenRight:function(t,e){return this.assign(t,n.Z.IntervalArithmetic.prev(e))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new a().set(this.lo,this.hi)}}),i.Z.Math.IntervalArithmetic={Interval:function(t,e){return new a(t,e)},isInterval:function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.lo&&"number"==typeof t.hi},isSingleton:function(t){return t.lo===t.hi},add:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),new a(this.addLo(t.lo,e.lo),this.addHi(t.hi,e.hi))},sub:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),new a(this.subLo(t.lo,e.hi),this.subHi(t.hi,e.lo))},mul:function(t,e){var r,i,n,s,u;return(o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e))?this.EMPTY.clone():(r=t.lo,i=t.hi,n=e.lo,s=e.hi,u=new a,r<0?i>0?n<0?s>0?(u.lo=Math.min(this.mulLo(r,s),this.mulLo(i,n)),u.hi=Math.max(this.mulHi(r,n),this.mulHi(i,s))):(u.lo=this.mulLo(i,n),u.hi=this.mulHi(r,n)):s>0?(u.lo=this.mulLo(r,s),u.hi=this.mulHi(i,s)):(u.lo=0,u.hi=0):n<0?(s>0?u.lo=this.mulLo(r,s):u.lo=this.mulLo(i,s),u.hi=this.mulHi(r,n)):s>0?(u.lo=this.mulLo(r,s),u.hi=this.mulHi(i,n)):(u.lo=0,u.hi=0):i>0?n<0?s>0?(u.lo=this.mulLo(i,n),u.hi=this.mulHi(i,s)):(u.lo=this.mulLo(i,n),u.hi=this.mulHi(r,s)):s>0?(u.lo=this.mulLo(r,n),u.hi=this.mulHi(i,s)):(u.lo=0,u.hi=0):(u.lo=0,u.hi=0),u)},div:function(t,e){return(o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e))?this.EMPTY.clone():this.zeroIn(e)?0!==e.lo?0!==e.hi?this.divZero(t):this.divNegative(t,e.lo):0!==e.hi?this.divPositive(t,e.hi):this.EMPTY.clone():this.divNonZero(t,e)},positive:function(t){return new a(t.lo,t.hi)},negative:function(t){return o.Z.isNumber(t)?new a(-t):new a(-t.hi,-t.lo)},isEmpty:function(t){return t.lo>t.hi},isWhole:function(t){return t.lo===-1/0&&t.hi===1/0},zeroIn:function(t){return this.hasValue(t,0)},hasValue:function(t,e){return!this.isEmpty(t)&&t.lo<=e&&e<=t.hi},hasInterval:function(t,e){return!!this.isEmpty(t)||!this.isEmpty(e)&&e.lo<=t.lo&&t.hi<=e.hi},intervalsOverlap:function(t,e){return!(this.isEmpty(t)||this.isEmpty(e))&&(t.lo<=e.lo&&e.lo<=t.hi||e.lo<=t.lo&&t.lo<=e.hi)},divNonZero:function(t,e){var r=t.lo,i=t.hi,n=e.lo,o=e.hi,s=new a;return i<0?o<0?(s.lo=this.divLo(i,n),s.hi=this.divHi(r,o)):(s.lo=this.divLo(r,n),s.hi=this.divHi(i,o)):r<0?o<0?(s.lo=this.divLo(i,o),s.hi=this.divHi(r,o)):(s.lo=this.divLo(r,n),s.hi=this.divHi(i,n)):o<0?(s.lo=this.divLo(i,o),s.hi=this.divHi(r,n)):(s.lo=this.divLo(r,o),s.hi=this.divHi(i,n)),s},divPositive:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new a(Number.NEGATIVE_INFINITY,this.divHi(t.hi,e)):new a(this.divLo(t.lo,e),Number.POSITIVE_INFINITY)},divNegative:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new a(this.divLo(t.hi,e),Number.POSITIVE_INFINITY):new a(Number.NEGATIVE_INFINITY,this.divHi(t.lo,e))},divZero:function(t){return 0===t.lo&&0===t.hi?t:this.WHOLE},fmod:function(t,e){var r,i;return(o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e))?this.EMPTY.clone():(r=t.lo<0?e.lo:e.hi,i=(i=t.lo/r)<0?Math.ceil(i):Math.floor(i),this.sub(t,this.mul(e,new a(i))))},multiplicativeInverse:function(t){return(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))?this.EMPTY.clone():this.zeroIn(t)?0!==t.lo?0!==t.hi?this.WHOLE:new a(Number.NEGATIVE_INFINITY,this.divHi(1,t.lo)):0!==t.hi?new a(this.divLo(1,t.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new a(this.divLo(1,t.hi),this.divHi(1,t.lo))},pow:function(t,e){var r,i;if(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return 0===e?0===t.lo&&0===t.hi?this.EMPTY.clone():this.ONE.clone():e<0?this.pow(this.multiplicativeInverse(t),-e):e%1==0?t.hi<0?(r=this.powLo(-t.hi,e),i=this.powHi(-t.lo,e),(1&e)==1)?new a(-i,-r):new a(r,i):t.lo<0?(1&e)==1?new a(-this.powLo(-t.lo,e),this.powHi(t.hi,e)):new a(0,this.powHi(Math.max(-t.lo,t.hi),e)):new a(this.powLo(t.lo,e),this.powHi(t.hi,e)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(t){return o.Z.isNumber(t)&&(t=this.Interval(t)),this.nthRoot(t,2)},nthRoot:function(t,e){var r,i;if(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)||e<0)return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return(r=1/e,t.hi<0)?e%1==0&&(1&e)==1?new a(-this.powHi(-t.lo,r),-this.powLo(-t.hi,r)):this.EMPTY.clone():t.lo<0?(i=this.powHi(t.hi,r),e%1==0&&(1&e)==1)?new a(-this.powHi(-t.lo,r),i):new a(0,i):new a(this.powLo(t.lo,r),this.powHi(t.hi,r))},exp:function(t){return(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))?this.EMPTY.clone():new a(this.expLo(t.lo),this.expHi(t.hi))},log:function(t){return(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))?this.EMPTY.clone():new a(t.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(t.lo),this.logHi(t.hi))},ln:function(t){return this.log(t)},log10:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new a(10,10)))},log2:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new a(2,2)))},hull:function(t,e){var r=this.isEmpty(t),i=this.isEmpty(e);return r&&i?this.EMPTY.clone():r?e.clone():i?t.clone():new a(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},intersection:function(t,e){var r,i;return this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(r=Math.max(t.lo,e.lo))<=(i=Math.min(t.hi,e.hi))?new a(r,i):this.EMPTY.clone()},union:function(t,e){if(!this.intervalsOverlap(t,e))throw Error("Interval#unions do not overlap");return new a(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},difference:function(t,e){if(this.isEmpty(t)||this.isWhole(e))return this.EMPTY.clone();if(this.intervalsOverlap(t,e)){if(t.lo<e.lo&&e.hi<t.hi)throw Error("Interval.difference: difference creates multiple intervals");return e.lo<=t.lo&&e.hi===1/0||e.hi>=t.hi&&e.lo===-1/0?this.EMPTY.clone():e.lo<=t.lo?new a().halfOpenLeft(e.hi,t.hi):new a().halfOpenRight(t.lo,e.lo)}return t.clone()},width:function(t){return this.isEmpty(t)?0:this.subHi(t.hi,t.lo)},abs:function(t){return(o.Z.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))?this.EMPTY.clone():t.lo>=0?t.clone():t.hi<=0?this.negative(t):new a(0,Math.max(-t.lo,t.hi))},max:function(t,e){var r=this.isEmpty(t),i=this.isEmpty(e);return r&&i?this.EMPTY.clone():r?e.clone():i?t.clone():new a(Math.max(t.lo,e.lo),Math.max(t.hi,e.hi))},min:function(t,e){var r=this.isEmpty(t),i=this.isEmpty(e);return r&&i?this.EMPTY.clone():r?e.clone():i?t.clone():new a(Math.min(t.lo,e.lo),Math.min(t.hi,e.hi))},onlyInfinity:function(t){return!isFinite(t.lo)&&t.lo===t.hi},_handleNegative:function(t){var e;return t.lo<0&&(t.lo===-1/0?(t.lo=0,t.hi=1/0):(e=Math.ceil(-t.lo/this.piTwiceLow),t.lo+=this.piTwiceLow*e,t.hi+=this.piTwiceLow*e)),t},cos:function(t){var e,r,i,n,o,s,u,h;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=new a().set(t.lo,t.hi),this._handleNegative(e),r=this.PI_TWICE,i=this.fmod(e,r),this.width(i)>=r.lo)?new a(-1,1):i.lo>=this.piHigh?(n=this.cos(this.sub(i,this.PI)),this.negative(n)):(o=i.lo,s=i.hi,u=this.cosLo(s),h=this.cosHi(o),s<=this.piLow)?new a(u,h):s<=r.lo?new a(-1,Math.max(u,h)):new a(-1,1)},sin:function(t){return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():this.cos(this.sub(t,this.PI_HALF))},tan:function(t){var e,r,i;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=new a().set(t.lo,t.hi),this._handleNegative(e),i=this.PI,(r=this.fmod(e,i)).lo>=this.piHalfLow&&(r=this.sub(r,i)),r.lo<=-this.piHalfLow||r.hi>=this.piHalfLow)?this.WHOLE.clone():new a(this.tanLo(r.lo),this.tanHi(r.hi))},asin:function(t){return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():new a(t.lo<=-1?-this.piHalfHigh:this.asinLo(t.lo),t.hi>=1?this.piHalfHigh:this.asinHi(t.hi))},acos:function(t){return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():new a(t.hi>=1?0:this.acosLo(t.hi),t.lo<=-1?this.piHigh:this.acosHi(t.lo))},acot:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.acotLo(t.lo),this.acotHi(t.hi))},atan:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.atanLo(t.lo),this.atanHi(t.hi))},sinh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.sinhLo(t.lo),this.sinhHi(t.hi))},cosh:function(t){return this.isEmpty(t)?this.EMPTY.clone():t.hi<0?new a(this.coshLo(t.hi),this.coshHi(t.lo)):t.lo>=0?new a(this.coshLo(t.lo),this.coshHi(t.hi)):new a(1,this.coshHi(-t.lo>t.hi?t.lo:t.hi))},tanh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.tanhLo(t.lo),this.tanhHi(t.hi))},equal:function(t,e){return this.isEmpty(t)?this.isEmpty(e):!this.isEmpty(e)&&t.lo===e.lo&&t.hi===e.hi},notEqual:function(t,e){return this.isEmpty(t)?!this.isEmpty(e):this.isEmpty(e)||t.hi<e.lo||t.lo>e.hi},lt:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),!(this.isEmpty(t)||this.isEmpty(e))&&t.hi<e.lo},gt:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),!(this.isEmpty(t)||this.isEmpty(e))&&t.lo>e.hi},leq:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),!(this.isEmpty(t)||this.isEmpty(e))&&t.hi<=e.lo},geq:function(t,e){return o.Z.isNumber(t)&&(t=this.Interval(t)),o.Z.isNumber(e)&&(e=this.Interval(e)),!(this.isEmpty(t)||this.isEmpty(e))&&t.lo>=e.hi},piLow:(3373259426+273688/2097152)/1073741824,piHigh:(3373259426+273689/2097152)/1073741824,piHalfLow:(3373259426+273688/2097152)/1073741824*.5,piHalfHigh:(3373259426+273689/2097152)/1073741824*.5,piTwiceLow:(3373259426+273688/2097152)/1073741824*2,piTwiceHigh:(3373259426+273689/2097152)/1073741824*2,identity:function(t){return t},_prev:function(t){return t===1/0?t:this.nextafter(t,-1/0)},_next:function(t){return t===-1/0?t:this.nextafter(t,1/0)},prev:function(t){return this._prev(t)},next:function(t){return this._next(t)},toInteger:function(t){return t<0?Math.ceil(t):Math.floor(t)},addLo:function(t,e){return this.prev(t+e)},addHi:function(t,e){return this.next(t+e)},subLo:function(t,e){return this.prev(t-e)},subHi:function(t,e){return this.next(t-e)},mulLo:function(t,e){return this.prev(t*e)},mulHi:function(t,e){return this.next(t*e)},divLo:function(t,e){return this.prev(t/e)},divHi:function(t,e){return this.next(t/e)},intLo:function(t){return this.toInteger(this.prev(t))},intHi:function(t){return this.toInteger(this.next(t))},logLo:function(t){return this.prev(Math.log(t))},logHi:function(t){return this.next(Math.log(t))},expLo:function(t){return this.prev(Math.exp(t))},expHi:function(t){return this.next(Math.exp(t))},sinLo:function(t){return this.prev(Math.sin(t))},sinHi:function(t){return this.next(Math.sin(t))},cosLo:function(t){return this.prev(Math.cos(t))},cosHi:function(t){return this.next(Math.cos(t))},tanLo:function(t){return this.prev(Math.tan(t))},tanHi:function(t){return this.next(Math.tan(t))},asinLo:function(t){return this.prev(Math.asin(t))},asinHi:function(t){return this.next(Math.asin(t))},acosLo:function(t){return this.prev(Math.acos(t))},acosHi:function(t){return this.next(Math.acos(t))},acotLo:function(t){return this.prev(n.Z.acot(t))},acotHi:function(t){return this.next(n.Z.acot(t))},atanLo:function(t){return this.prev(Math.atan(t))},atanHi:function(t){return this.next(Math.atan(t))},sinhLo:function(t){return this.prev(n.Z.sinh(t))},sinhHi:function(t){return this.next(n.Z.sinh(t))},coshLo:function(t){return this.prev(n.Z.cosh(t))},coshHi:function(t){return this.next(n.Z.cosh(t))},tanhLo:function(t){return this.prev(n.Z.tanh(t))},tanhHi:function(t){return this.next(n.Z.tanh(t))},sqrtLo:function(t){return this.prev(Math.sqrt(t))},sqrtHi:function(t){return this.next(Math.sqrt(t))},powLo:function(t,e){var r;if(e%1!=0)return this.prev(Math.pow(t,e));for(r=(1&e)==1?t:1,e>>=1;e>0;)t=this.mulLo(t,t),(1&e)==1&&(r=this.mulLo(t,r)),e>>=1;return r},powHi:function(t,e){var r;if(e%1!=0)return this.next(Math.pow(t,e));for(r=(1&e)==1?t:1,e>>=1;e>0;)t=this.mulHi(t,t),(1&e)==1&&(r=this.mulHi(t,r)),e>>=1;return r},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(t){return this._prev(t)},this.next=function(t){return this._next(t)}},SMALLEST_DENORM:5e-324,UINT_MAX:4294967295,nextafter:function(t,e){var r,i;return isNaN(t)||isNaN(e)?NaN:t===e?t:0===t?e<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(i=s.hi(t),r=s.lo(t),e>t==t>0?r===this.UINT_MAX?(i+=1,r=0):r+=1:0===r?(r=this.UINT_MAX,i-=1):r-=1,s.pack(r,i))}},i.Z.Math.IntervalArithmetic.PI=new a(n.Z.IntervalArithmetic.piLow,n.Z.IntervalArithmetic.piHigh),i.Z.Math.IntervalArithmetic.PI_HALF=new a(n.Z.IntervalArithmetic.piHalfLow,n.Z.IntervalArithmetic.piHalfHigh),i.Z.Math.IntervalArithmetic.PI_TWICE=new a(n.Z.IntervalArithmetic.piTwiceLow,n.Z.IntervalArithmetic.piTwiceHigh),i.Z.Math.IntervalArithmetic.ZERO=new a(0),i.Z.Math.IntervalArithmetic.ONE=new a(1),i.Z.Math.IntervalArithmetic.WHOLE=new a().setWhole(),i.Z.Math.IntervalArithmetic.EMPTY=new a().setEmpty(),e.Z=i.Z.Math.IntervalArithmetic},4204:function(t,e,r){"use strict";var i,n=r(7901),o=r(1013),s=function(t){var e,r;return t.memo||(e={},r=Array.prototype.join,t.memo=function(){var n=r.call(arguments);return e[n]!==i?e[n]:e[n]=t.apply(this,arguments)}),t.memo};n.Z.Math={eps:1e-6,relDif:function(t,e){var r=Math.abs(e);return 0===(r=Math.max(Math.abs(t),r))?0:Math.abs(t-e)/r},mod:function(t,e){return t-Math.floor(t/e)*e},vector:function(t,e){var r,i;for(i=0,e=e||0,r=[];i<t;i++)r[i]=e;return r},matrix:function(t,e,r){var i,n,o;for(n=0,r=r||0,e=e||t,i=[];n<t;n++)for(o=0,i[n]=[];o<e;o++)i[n][o]=r;return i},identity:function(t,e){var r,n;for(e===i&&"number"!=typeof e&&(e=t),r=this.matrix(t,e),n=0;n<Math.min(t,e);n++)r[n][n]=1;return r},frustum:function(t,e,r,i,n,o){var s=this.matrix(4,4);return s[0][0]=2*n/(e-t),s[0][1]=0,s[0][2]=(e+t)/(e-t),s[0][3]=0,s[1][0]=0,s[1][1]=2*n/(i-r),s[1][2]=(i+r)/(i-r),s[1][3]=0,s[2][0]=0,s[2][1]=0,s[2][2]=-(o+n)/(o-n),s[2][3]=-(o*n*2)/(o-n),s[3][0]=0,s[3][1]=0,s[3][2]=-1,s[3][3]=0,s},projection:function(t,e,r,i){var n=r*Math.tan(t/2),o=n*e;return this.frustum(-o,o,-n,n,r,i)},matVecMult:function(t,e){var r,i,n,o=t.length,s=e.length,a=[];if(3===s)for(r=0;r<o;r++)a[r]=t[r][0]*e[0]+t[r][1]*e[1]+t[r][2]*e[2];else for(r=0;r<o;r++){for(n=0,i=0;n<s;n++)i+=t[r][n]*e[n];a[r]=i}return a},matMatMult:function(t,e){var r,i,n,o,s=t.length,a=s>0?e[0].length:0,u=e.length,h=this.matrix(s,a);for(r=0;r<s;r++)for(i=0;i<a;i++){for(o=0,n=0;o<u;o++)n+=t[r][o]*e[o][i];h[r][i]=n}return h},transpose:function(t){var e,r,i,n,o;for(r=0,n=t.length,o=t.length>0?t[0].length:0,e=this.matrix(o,n);r<o;r++)for(i=0;i<n;i++)e[r][i]=t[i][r];return e},inverse:function(t){var e,r,i,n,o,s,a,u=t.length,h=[],l=[],c=[];for(e=0;e<u;e++){for(r=0,h[e]=[];r<u;r++)h[e][r]=t[e][r];l[e]=e}for(r=0;r<u;r++){for(o=Math.abs(h[r][r]),s=r,e=r+1;e<u;e++)Math.abs(h[e][r])>o&&(o=Math.abs(h[e][r]),s=e);if(o<=this.eps)return[];if(s>r){for(i=0;i<u;i++)a=h[r][i],h[r][i]=h[s][i],h[s][i]=a;a=l[r],l[r]=l[s],l[s]=a}for(e=0,n=1/h[r][r];e<u;e++)h[e][r]*=n;for(i=0,h[r][r]=n;i<u;i++)if(i!==r){for(e=0;e<u;e++)e!==r&&(h[e][i]-=h[e][r]*h[r][i]);h[r][i]=-n*h[r][i]}}for(e=0;e<u;e++){for(i=0;i<u;i++)c[l[i]]=h[e][i];for(i=0;i<u;i++)h[e][i]=c[i]}return h},innerProduct:function(t,e,r){var n,s=0;for(r!==i&&o.Z.isNumber(r)||(r=t.length),n=0;n<r;n++)s+=t[n]*e[n];return s},crossProduct:function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},norm:function(t,e){var r,n=0;for(e!==i&&o.Z.isNumber(e)||(e=t.length),r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)},axpy:function(t,e,r){var i,n=e.length,o=[];for(i=0;i<n;i++)o[i]=t*e[i]+r[i];return o},factorial:s(function(t){return t<0?NaN:0===(t=Math.floor(t))||1===t?1:t*this.factorial(t-1)}),binomial:s(function(t,e){var r,i;if(e>t||e<0)return NaN;if(e=Math.round(e),t=Math.round(t),0===e||e===t)return 1;for(i=0,r=1;i<e;i++)r*=t-i,r/=i+1;return r}),cosh:Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))*.5},sinh:Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))*.5},acosh:Math.acosh||function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:Math.asinh||function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},cot:function(t){return 1/Math.tan(t)},acot:function(t){return(t>=0?.5:-.5)*Math.PI-Math.atan(t)},nthroot:function(t,e){var r=1/e;return e<=0||Math.floor(e)!==e?NaN:0===t?0:t>0?Math.exp(r*Math.log(t)):e%2==1?-Math.exp(r*Math.log(-t)):NaN},cbrt:Math.cbrt||function(t){return this.nthroot(t,3)},pow:function(t,e){return 0===t?0===e?1:0:Math.floor(e)===e?Math.pow(t,e):t>0?Math.exp(e*Math.log(t)):NaN},ratpow:function(t,e,r){var i;return 0===e?1:0===r?NaN:(i=this.gcd(e,r),this.nthroot(this.pow(t,e/i),r/i))},log10:function(t){return Math.log(t)/Math.log(10)},log2:function(t){return Math.log(t)/Math.log(2)},log:function(t,e){return void 0!==e&&o.Z.isNumber(e)?Math.log(t)/Math.log(e):Math.log(t)},sign:Math.sign||function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},squampow:function(t,e){var r;if(Math.floor(e)===e){for(r=1,e<0&&(t=1/t,e*=-1);0!==e;)1&e&&(r*=t),e>>=1,t*=t;return r}return this.pow(t,e)},gcd:function(t,e){var r;if(t=Math.abs(t),e=Math.abs(e),!(o.Z.isNumber(t)&&o.Z.isNumber(e)))return NaN;for(e>t&&(r=t,t=e,e=r);;){if(0==(t%=e))return e;if(0==(e%=t))return t}},lcm:function(t,e){var r;return o.Z.isNumber(t)&&o.Z.isNumber(e)?0!=(r=t*e)?r/this.gcd(t,e):0:NaN},erf:function(t){return this.ProbFuncs.erf(t)},erfc:function(t){return this.ProbFuncs.erfc(t)},erfi:function(t){return this.ProbFuncs.erfi(t)},ndtr:function(t){return this.ProbFuncs.ndtr(t)},ndtri:function(t){return this.ProbFuncs.ndtri(t)},hypot:function(){var t,e,r,i;for(t=0,e=arguments.length,i=0;t<e;t++)r=arguments[t],i+=r*r;return Math.sqrt(i)},hstep:function(t){return t>0?1:t<0?0:.5},lt:function(t,e){return t<e},leq:function(t,e){return t<=e},gt:function(t,e){return t>e},geq:function(t,e){return t>=e},eq:function(t,e){return t===e},neq:function(t,e){return t!==e},and:function(t,e){return t&&e},not:function(t){return!t},or:function(t,e){return t||e},xor:function(t,e){return(t||e)&&!(t&&e)},normalize:function(t){var e,r,i=2*t[3],n=t[4]/i;return t[5]=n,t[6]=-t[1]/i,t[7]=-t[2]/i,isFinite(n)?Math.abs(n)>=1?(t[0]=(t[6]*t[6]+t[7]*t[7]-n*n)/(2*n),t[1]=-t[6]/n,t[2]=-t[7]/n,t[3]=1/(2*n),t[4]=1):(r=n<=0?-1:1,t[0]=r*(t[6]*t[6]+t[7]*t[7]-n*n)*.5,t[1]=-r*t[6],t[2]=-r*t[7],t[3]=r/2,t[4]=r*n):(e=this.hypot(t[1],t[2]),t[0]/=e,t[1]/=e,t[2]/=e,t[3]=0,t[4]=1),t},toGL:function(t){var e,r,i;if(e="function"==typeof Float32Array?new Float32Array(16):Array(16),4!==t.length&&4!==t[0].length)return e;for(r=0;r<4;r++)for(i=0;i<4;i++)e[r+4*i]=t[r][i];return e},Vieta:function(t){var e,r,i,n=t.length,o=[];for(e=1,o=t.slice();e<n;++e){for(i=o[e],o[e]*=o[e-1],r=e-1;r>=1;--r)o[r]+=o[r-1]*i;o[0]+=i}return o}},e.Z=n.Z.Math},4401:function(t,e,r){"use strict";var i=r(7901),n=r(4204),o=r(1013);n.Z.Statistics={sum:function(t){var e,r=t.length,i=0;for(e=0;e<r;e++)i+=t[e];return i},prod:function(t){var e,r=t.length,i=1;for(e=0;e<r;e++)i*=t[e];return i},mean:function(t){return t.length>0?this.sum(t)/t.length:0},median:function(t){var e,r;return t.length>0?(ArrayBuffer.isView(t)?(e=new Float64Array(t)).sort():(e=t.slice(0)).sort(function(t,e){return t-e}),1&(r=e.length))?e[parseInt(.5*r,10)]:(e[.5*r-1]+e[.5*r])*.5:0},percentile:function(t,e){var r,i,n,s,a,u=[];if(t.length>0){for(ArrayBuffer.isView(t)?(r=new Float64Array(t)).sort():(r=t.slice(0)).sort(function(t,e){return t-e}),i=r.length,s=o.Z.isArray(e)?e:[e],n=0;n<s.length;n++)parseInt(a=i*s[n]*.01,10)===a?u.push((r[a-1]+r[a])*.5):u.push(r[parseInt(a,10)]);return o.Z.isArray(e)?u:u[0]}return 0},variance:function(t){var e,r,i,n=t.length;if(n>1){for(i=0,e=this.mean(t),r=0;i<n;i++)r+=(t[i]-e)*(t[i]-e);return r/(t.length-1)}return 0},sd:function(t){return Math.sqrt(this.variance(t))},weightedMean:function(t,e){if(t.length!==e.length)throw Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return t.length>0?this.mean(this.multiply(t,e)):0},max:function(t){return Math.max.apply(this,t)},min:function(t){return Math.min.apply(this,t)},range:function(t){return[this.min(t),this.max(t)]},abs:function(t){var e,r,i;if(o.Z.isArray(t)){if(t.map)i=t.map(Math.abs);else for(e=0,r=t.length,i=[];e<r;e++)i[e]=Math.abs(t[e])}else i=ArrayBuffer.isView(t)?t.map(Math.abs):Math.abs(t);return i},add:function(t,e){var r,i,n=[];if(t=o.Z.evalSlider(t),e=o.Z.evalSlider(e),o.Z.isArray(t)&&o.Z.isNumber(e))for(r=0,i=t.length;r<i;r++)n[r]=t[r]+e;else if(o.Z.isNumber(t)&&o.Z.isArray(e))for(r=0,i=e.length;r<i;r++)n[r]=t+e[r];else if(o.Z.isArray(t)&&o.Z.isArray(e))for(r=0,i=Math.min(t.length,e.length);r<i;r++)n[r]=t[r]+e[r];else n=t+e;return n},div:function(t,e){var r,i,n=[];if(t=o.Z.evalSlider(t),e=o.Z.evalSlider(e),o.Z.isArray(t)&&o.Z.isNumber(e))for(r=0,i=t.length;r<i;r++)n[r]=t[r]/e;else if(o.Z.isNumber(t)&&o.Z.isArray(e))for(r=0,i=e.length;r<i;r++)n[r]=t/e[r];else if(o.Z.isArray(t)&&o.Z.isArray(e))for(r=0,i=Math.min(t.length,e.length);r<i;r++)n[r]=t[r]/e[r];else n=t/e;return n},divide:function(){i.Z.deprecated("Statistics.divide()","Statistics.div()"),n.Z.Statistics.div.apply(n.Z.Statistics,arguments)},mod:function(t,e,r){var i,s,a=[],u=function(t,e){return t%e};if((r=o.Z.def(r,!1))&&(u=n.Z.mod),t=o.Z.evalSlider(t),e=o.Z.evalSlider(e),o.Z.isArray(t)&&o.Z.isNumber(e))for(i=0,s=t.length;i<s;i++)a[i]=u(t[i],e);else if(o.Z.isNumber(t)&&o.Z.isArray(e))for(i=0,s=e.length;i<s;i++)a[i]=u(t,e[i]);else if(o.Z.isArray(t)&&o.Z.isArray(e))for(i=0,s=Math.min(t.length,e.length);i<s;i++)a[i]=u(t[i],e[i]);else a=u(t,e);return a},multiply:function(t,e){var r,i,n=[];if(t=o.Z.evalSlider(t),e=o.Z.evalSlider(e),o.Z.isArray(t)&&o.Z.isNumber(e))for(r=0,i=t.length;r<i;r++)n[r]=t[r]*e;else if(o.Z.isNumber(t)&&o.Z.isArray(e))for(r=0,i=e.length;r<i;r++)n[r]=t*e[r];else if(o.Z.isArray(t)&&o.Z.isArray(e))for(r=0,i=Math.min(t.length,e.length);r<i;r++)n[r]=t[r]*e[r];else n=t*e;return n},subtract:function(t,e){var r,i,n=[];if(t=o.Z.evalSlider(t),e=o.Z.evalSlider(e),o.Z.isArray(t)&&o.Z.isNumber(e))for(r=0,i=t.length;r<i;r++)n[r]=t[r]-e;else if(o.Z.isNumber(t)&&o.Z.isArray(e))for(r=0,i=e.length;r<i;r++)n[r]=t-e[r];else if(o.Z.isArray(t)&&o.Z.isArray(e))for(r=0,i=Math.min(t.length,e.length);r<i;r++)n[r]=t[r]-e[r];else n=t-e;return n},TheilSenRegression:function(t){var e,r,i=[],o=[],s=[];for(e=0;e<t.length;e++){for(r=0,o.length=0;r<t.length;r++)Math.abs(t[r].usrCoords[1]-t[e].usrCoords[1])>n.Z.eps&&(o[r]=(t[r].usrCoords[2]-t[e].usrCoords[2])/(t[r].usrCoords[1]-t[e].usrCoords[1]));i[e]=this.median(o),s.push(t[e].usrCoords[2]-i[e]*t[e].usrCoords[1])}return[this.median(s),this.median(i),-1]},generateGaussian:function(t,e){var r,i,n;if(this.hasSpare)return this.hasSpare=!1,this.spare*e+t;do n=(r=2*Math.random()-1)*r+(i=2*Math.random()-1)*i;while(n>=1||0===n);return n=Math.sqrt(-2*Math.log(n)/n),this.spare=i*n,this.hasSpare=!0,t+e*r*n}},e.Z=n.Z.Statistics},2137:function(t,e,r){"use strict";var i=r(7901),n=r(2840),o=r(1013);i.Z.GeonextParser={replacePow:function(t){var e,r,i,n,o,s,a,u,h,l,c,d;for(l=(t=t.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),n=-1;l>=0&&l<t.length-1;){if(n===l)throw Error("JSXGraph: Error while parsing expression '"+t+"'");if(n=l,h=t.slice(0,l),c=t.slice(l+1),")"===h.charAt(h.length-1)){for(e=1,r=h.length-2;r>=0&&e>0;)")"===(i=h.charAt(r))?e++:"("===i&&(e-=1),r-=1;if(0===e){for(o="",a=h.substring(0,r+1),u=r;u>=0&&a.slice(u,u+1).match(/([\w.]+)/);)o=RegExp.$1+o,u-=1;o+=h.substring(r+1,h.length),o=o.replace(/([()+*%^\-/\][])/g,"\\$1")}else throw Error("JSXGraph: Missing '(' in expression")}else o="[\\w\\.]+";if(c.match(/^([\w.]*\()/)){for(e=1,r=RegExp.$1.length;r<c.length&&e>0;)")"===(i=c.charAt(r))?e-=1:"("===i&&(e+=1),r+=1;if(0===e)s=(s=c.substring(0,r)).replace(/([()+*%^\-/[\]])/g,"\\$1");else throw Error("JSXGraph: Missing ')' in expression")}else s="[\\w\\.]+";d=RegExp("("+o+")\\^("+s+")"),l=(t=t.replace(d,"pow($1,$2)")).indexOf("^")}return t},replaceIf:function(t){var e,r,i,n,o,s,a,u,h,l="",c=null,d=null,f=null;if((i=t.indexOf("If("))<0)return t;for(t=t.replace(/""/g,"0");i>=0;){for(e=t.slice(0,i),r=t.slice(i+3),o=1,n=0,s=-1,a=-1;n<r.length&&o>0;)")"===(u=r.charAt(n))?o-=1:"("===u?o+=1:","===u&&1===o&&(s<0?s=n:a=n),n+=1;if(h=r.slice(0,n-1),r=r.slice(n),s<0||a<0)return"";c=h.slice(0,s),d=h.slice(s+1,a),f=h.slice(a+1),l+=e+"(("+(c=this.replaceIf(c))+")?("+(d=this.replaceIf(d))+"):("+(f=this.replaceIf(f))+"))",c=null,d=null,i=(t=r).indexOf("If(")}return l+r},replaceNameById:function(t,e,r){var i,n,o,s,a=0,u=["X","Y","L","V"],h=function(t){return r?"$('"+t+"')":t};for(s=0;s<u.length;s++)for(a=t.indexOf(u[s]+"(");a>=0;)a>=0&&(i=t.indexOf(")",a+2))>=0&&(n=(n=t.slice(a+2,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+2)+(r?"$('":"")+h(o.id)+t.slice(i))),i=t.indexOf(")",a+2),a=t.indexOf(u[s]+"(",i);for(a=t.indexOf("Dist(");a>=0;)a>=0&&(i=t.indexOf(",",a+5))>=0&&(n=(n=t.slice(a+5,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+5)+h(o.id)+t.slice(i))),i=t.indexOf(",",a+5),a=t.indexOf(",",i),(i=t.indexOf(")",a+1))>=0&&(n=(n=t.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(o.id)+t.slice(i))),i=t.indexOf(")",a+1),a=t.indexOf("Dist(",i);for(s=0,u=["Deg","Rad"];s<u.length;s++)for(a=t.indexOf(u[s]+"(");a>=0;)a>=0&&(i=t.indexOf(",",a+4))>=0&&(n=(n=t.slice(a+4,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+4)+h(o.id)+t.slice(i))),i=t.indexOf(",",a+4),a=t.indexOf(",",i),(i=t.indexOf(",",a+1))>=0&&(n=(n=t.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(o.id)+t.slice(i))),i=t.indexOf(",",a+1),a=t.indexOf(",",i),(i=t.indexOf(")",a+1))>=0&&(n=(n=t.slice(a+1,i)).replace(/\\(['"])?/g,"$1"),(o=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(o.id)+t.slice(i))),i=t.indexOf(")",a+1),a=t.indexOf(u[s]+"(",i);return t},replaceIdByObj:function(t){var e=/(X|Y|L)\(([\w_]+)\)/g;return t=t.replace(e,"$('$2').$1()"),e=/(V)\(([\w_]+)\)/g,t=t.replace(e,"$('$2').Value()"),e=/(Dist)\(([\w_]+),([\w_]+)\)/g,t=t.replace(e,"dist($('$2'), $('$3'))"),e=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,t=t.replace(e,"deg($('$2'),$('$3'),$('$4'))"),e=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,t=t.replace(e,"rad($('$1'),$('$2'),$('$3'))"),e=/N\((.+)\)/g,t=t.replace(e,"($1)")},geonext2JS:function(t,e){var r,i,n,o=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],s=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(n=0,i=t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),i=this.replaceNameById(i,e),i=this.replaceIf(i),i=this.replacePow(i),i=this.replaceIdByObj(i);n<o.length;n++)r=RegExp(["(\\W|^)(",o[n],")"].join(""),"ig"),i=i.replace(r,["$1",s[n]].join(""));return(i=(i=(i=(i=i.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(t,e,r){var i,s,a;for(s in o.Z.exists(r)||(r=t.board),i=r.elementsByName)i.hasOwnProperty(s)&&s!==t.name&&(i[s].elementClass===n.Z.OBJECT_CLASS_TEXT?!o.Z.evaluate(i[s].visProp.islabel)&&(a=RegExp("\\(([\\w\\[\\]'_ ]+,)*("+s.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")(,[\\w\\[\\]'_ ]+)*\\)","g"),e.search(a)>=0&&i[s].addChild(t)):(a=RegExp("\\(([\\w\\[\\]'_ ]+,)*("+s.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")(,[\\w\\[\\]'_ ]+)*\\)","g"),e.search(a)>=0&&i[s].addChild(t)))},gxt2jc:function(t,e){var r;return r=t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),r=(r=(r=(r=this.replaceNameById(r,e,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}},e.Z=i.Z.GeonextParser},2141:function(t,e,r){"use strict";var i=r(7901),n=r(1013),o=r(4204),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},a=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];i.Z.rgbParser=function(t,e,r){var i,o,u,h,l,c,d,f,p,m,v=t;if(!n.Z.exists(t))return[];if(n.Z.exists(e)&&n.Z.exists(r)&&(v=[t,e,r]),i=v,m=!1,n.Z.isArray(i)){for(c=0;c<3;c++)m=m||/\./.test(v[c].toString());for(c=0;c<3;c++)m=m&&v[c]>=0&&v[c]<=1;return m?[Math.ceil(255*v[0]),Math.ceil(255*v[1]),Math.ceil(255*v[2])]:v}for("string"==typeof v&&(i=v),"#"===i.charAt(0)&&(i=i.slice(1,7)),i=s[i=i.replace(/ /g,"").toLowerCase()]||i,c=0;c<a.length;c++)u=a[c].re,h=a[c].process,(l=u.exec(i))&&(d=(o=h(l))[0],f=o[1],p=o[2]);return isNaN(d)||isNaN(f)||isNaN(p)?[]:[d=d<0||isNaN(d)?0:d>255?255:d,f=f<0||isNaN(f)?0:f>255?255:f,p=p<0||isNaN(p)?0:p>255?255:p]},i.Z.rgb2css=function(t,e,r){var n;return"rgb("+(n=i.Z.rgbParser(t,e,r))[0]+", "+n[1]+", "+n[2]+")"},i.Z.rgb2hex=function(t,e,r){var n,o,s;return o=(n=i.Z.rgbParser(t,e,r))[1],s=n[2],n=(n=n[0]).toString(16),o=o.toString(16),s=s.toString(16),1===n.length&&(n="0"+n),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),"#"+n+o+s},i.Z.hex2rgb=function(t){return i.Z.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),i.Z.rgb2css(t)},i.Z.hsv2rgb=function(t,e,r){var i,n,s,a,u,h,l,c,d;if(t=(t%360+360)%360,0===e){if(!isNaN(t)&&!(t<o.Z.eps))return"#ffffff";i=r,n=r,s=r}else switch(u=Math.floor(h=(t>=360?0:t)/60),a=h-u,l=r*(1-e),c=r*(1-e*a),d=r*(1-e*(1-a)),u){case 0:i=r,n=d,s=l;break;case 1:i=c,n=r,s=l;break;case 2:i=l,n=r,s=d;break;case 3:i=l,n=c,s=r;break;case 4:i=d,n=l,s=r;break;case 5:i=r,n=l,s=c}return["#",i=2===(i=Math.round(255*i).toString(16)).length?i:1===i.length?"0"+i:"00",n=2===(n=Math.round(255*n).toString(16)).length?n:1===n.length?"0"+n:"00",s=2===(s=Math.round(255*s).toString(16)).length?s:1===s.length?"0"+s:"00"].join("")},i.Z.rgb2hsv=function(t,e,r){var n,o,s,a,u,h,l,c,d,f,p,m;return o=(n=i.Z.rgbParser(t,e,r))[1],s=n[2],a=(n=n[0])/255,u=o/255,h=s/255,p=Math.max(n,o,s),m=Math.min(n,o,s),l=p/255,c=m/255,f=0,l>0&&(f=(l-c)/l),d=1/(l-c),f>0&&(d=p===n?(u-h)*d:p===o?2+(h-a)*d:4+(a-u)*d),(d*=60)<0&&(d+=360),p===m&&(d=0),[d,f,l]},i.Z.rgb2LMS=function(t,e,r){var n,o,s,a,u,h,l,c=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return o=(n=i.Z.rgbParser(t,e,r))[1],s=n[2],n=Math.pow(n=n[0],.476190476),o=Math.pow(o,.476190476),s=Math.pow(s,.476190476),(l=[a=n*c[0][0]+o*c[0][1]+s*c[0][2],u=n*c[1][0]+o*c[1][1]+s*c[1][2],h=n*c[2][0]+o*c[2][1]+s*c[2][2]]).l=a,l.m=u,l.s=h,l},i.Z.LMS2rgb=function(t,e,r){var i,n,o,s,a=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],u=function(t){for(var e=127,r=64;r>0;){if(Math.pow(e,.476190476)>t)e-=r;else{if(Math.pow(e+1,.476190476)>t)return e;e+=r}r/=2}return 254===e&&13.994955247<t?255:e};return i=t*a[0][0]+e*a[0][1]+r*a[0][2],n=t*a[1][0]+e*a[1][1]+r*a[1][2],o=t*a[2][0]+e*a[2][1]+r*a[2][2],(s=[i=u(i),n=u(n),o=u(o)]).r=i,s.g=n,s.b=o,s},i.Z.rgba2rgbo=function(t){var e;return 9===t.length&&"#"===t.charAt(0)?(e=parseInt(t.slice(7,9).toUpperCase(),16)/255,t=t.slice(0,7)):e=1,[t,e]},i.Z.rgbo2rgba=function(t,e){var r;return"none"===t?t:(1===(r=Math.round(255*e).toString(16)).length&&(r="0"+r),t+r)},i.Z.rgb2bw=function(t){var e,r,n,o="0123456789ABCDEF";return"none"===t?t:t="#"+(r=o.charAt((e=Math.floor(.3*(n=i.Z.rgbParser(t))[0]+.59*n[1]+.11*n[2]))>>4&15)+o.charAt(15&e))+r+r},i.Z.rgb2cb=function(t,e){var r,n,o,s,a,u,h,l,c,d,f,p,m,v="0123456789ABCDEF";if("none"===t)return t;switch(n=(a=i.Z.rgb2LMS(t))[0],o=a[1],s=a[2],e=e.toLowerCase()){case"protanopia":h=-.06150039994295001,l=.08277001656812001,c=-.013200141220000003,d=.05858939668799999,f=-.07934519995360001,p=.013289415272000003,n=s/o<(m=.6903216543277437)?-(l*o+c*s)/h:-(f*o+p*s)/d;break;case"tritanopia":h=-.00058973116217,l=.007690316482,c=-.01011703519052,d=.025495080838999994,f=-.0422740347,p=.017005316784,s=o/n<(m=.8349489908460004)?-(h*n+l*o)/c:-(d*n+f*o)/p;break;default:h=-.06150039994295001,l=.08277001656812001,c=-.013200141220000003,d=.05858939668799999,f=-.07934519995360001,p=.013289415272000003,o=s/n<(m=.5763833686400911)?-(h*n+c*s)/l:-(d*n+p*s)/f}return t="#"+(v.charAt((r=i.Z.LMS2rgb(n,o,s))[0]>>4&15)+v.charAt(15&r[0]))+(v.charAt(r[1]>>4&15)+v.charAt(15&r[1]))+(v.charAt(r[2]>>4&15)+v.charAt(15&r[2]))},i.Z.autoHighlight=function(t){var e=i.Z.rgba2rgbo(t),r=e[0],n=e[1];return"#"===t.charAt(0)?(n<.3?n*=1.8:n*=.4,i.Z.rgbo2rgba(r,n)):t},i.Z.contrast=function(t,e,r,n){var o,s,a,u;return(e=e||"#000000",r=r||"#ffffff",n=n||7,o=i.Z.rgbParser(t),s=i.Z.rgbParser("#000000"),((a=.2126*Math.pow(o[0]/255,2.2)+.7152*Math.pow(o[1]/255,2.2)+.0722*Math.pow(o[2]/255,2.2))>(u=.2126*Math.pow(s[0]/255,2.2)+.7152*Math.pow(s[1]/255,2.2)+.0722*Math.pow(s[2]/255,2.2))?Math.floor((a+.05)/(u+.05)):Math.floor((u+.05)/(a+.05)))-1>n)?e:r},i.Z.setClassicColors=function(){i.Z.Options.elements.strokeColor="blue",i.Z.Options.elements.fillColor="red",i.Z.Options.hatch.strokeColor="blue",i.Z.Options.angle.fillColor="#ff7f00",i.Z.Options.angle.highlightFillColor="#ff7f00",i.Z.Options.angle.strokeColor="#ff7f00",i.Z.Options.angle.label.strokeColor="blue",i.Z.Options.arc.strokeColor="blue",i.Z.Options.circle.center.fillColor="red",i.Z.Options.circle.center.strokeColor="blue",i.Z.Options.circumcircle.strokeColor="blue",i.Z.Options.circumcircle.center.fillColor="red",i.Z.Options.circumcircle.center.strokeColor="blue",i.Z.Options.circumcirclearc.strokeColor="blue",i.Z.Options.circumcirclesector.strokeColor="blue",i.Z.Options.circumcirclesector.fillColor="green",i.Z.Options.circumcirclesector.highlightFillColor="green",i.Z.Options.conic.strokeColor="blue",i.Z.Options.curve.strokeColor="blue",i.Z.Options.incircle.strokeColor="blue",i.Z.Options.incircle.center.fillColor="red",i.Z.Options.incircle.center.strokeColor="blue",i.Z.Options.inequality.fillColor="red",i.Z.Options.integral.fillColor="red",i.Z.Options.integral.curveLeft.color="red",i.Z.Options.integral.curveRight.color="red",i.Z.Options.line.strokeColor="blue",i.Z.Options.point.fillColor="red",i.Z.Options.point.strokeColor="red",i.Z.Options.polygon.fillColor="green",i.Z.Options.polygon.highlightFillColor="green",i.Z.Options.polygon.vertices.strokeColor="red",i.Z.Options.polygon.vertices.fillColor="red",i.Z.Options.regularpolygon.fillColor="green",i.Z.Options.regularpolygon.highlightFillColor="green",i.Z.Options.regularpolygon.vertices.strokeColor="red",i.Z.Options.regularpolygon.vertices.fillColor="red",i.Z.Options.riemannsum.fillColor="yellow",i.Z.Options.sector.fillColor="green",i.Z.Options.sector.highlightFillColor="green",i.Z.Options.semicircle.center.fillColor="red",i.Z.Options.semicircle.center.strokeColor="blue",i.Z.Options.slopetriangle.fillColor="red",i.Z.Options.slopetriangle.highlightFillColor="red",i.Z.Options.turtle.arrow.strokeColor="blue"},i.Z.extend(i.Z,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),i.Z.palette=i.Z.paletteWong,e.Z=i.Z},4735:function(t,e,r){"use strict";var i=r(7901),n=r(1013),o=r(9079);i.Z.extendConstants(i.Z,{touchProperty:"touches"}),i.Z.extend(i.Z,{isTouchEvent:function(t){return i.Z.exists(t[i.Z.touchProperty])},isPointerEvent:function(t){return i.Z.exists(t.pointerId)},isMouseEvent:function(t){return!i.Z.isTouchEvent(t)&&!i.Z.isPointerEvent(t)},getNumberOfTouchPoints:function(t){var e=-1;return i.Z.isTouchEvent(t)&&(e=t[i.Z.touchProperty].length),e},isFirstTouch:function(t){var e=i.Z.getNumberOfTouchPoints(t);return i.Z.isPointerEvent(t)?t.isPrimary:1===e},isBrowser:"object"==typeof document,supportsES6:function(){try{return Function("(a = 0) => a"),!0}catch(t){return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var t=!1;return this.isNode()&&(t=!0),t||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&void 0!==o&&-1!==o.release.name.search(/node|io.js/)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return n.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return n.Z.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return n.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return n.Z.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var t,e,r=3;if("object"!=typeof document)return 0;e=(t=document.createElement("div")).getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(e[0]);return r>4?r:void 0}(),getDimensions:function(t,e){var r,i,o,s,a,u,h,l,c,d=/\d+(\.\d*)?px/;if(!this.isBrowser||null===t)return{width:500,height:500};if(e=e||document,r=n.Z.isString(t)?e.getElementById(t):t,!n.Z.exists(r))throw Error("\nJSXGraph: HTML container element '"+t+"' not found.");return"none"!==(i=r.style.display)&&null!==i?r.clientWidth>0&&r.clientHeight>0?{width:r.clientWidth,height:r.clientHeight}:{width:d.test((c=window.getComputedStyle?window.getComputedStyle(r):r.style).width)?parseFloat(c.width):0,height:d.test(c.height)?parseFloat(c.height):0}:(s=(o=r.style).visibility,a=o.position,u=o.display,o.visibility="hidden",o.position="absolute",o.display="block",h=r.clientWidth,l=r.clientHeight,o.display=u,o.position=a,o.visibility=s,{width:h,height:l})},addEvent:function(t,e,r,i,o){var s=function(){return r.apply(i,arguments)};s.origin=r,"object"==typeof i&&n.Z.exists(i.BOARD_MODE_NONE)&&(i["x_internal"+e]=i["x_internal"+e]||[],i["x_internal"+e].push(s)),n.Z.exists(t)&&n.Z.exists(t.addEventListener)&&(o=o||!1,t.addEventListener(e,s,o)),n.Z.exists(t)&&n.Z.exists(t.attachEvent)&&t.attachEvent("on"+e,s)},removeEvent:function(t,e,r,o){var s;if(!n.Z.exists(o)){i.Z.debug("no such owner");return}if(!n.Z.exists(o["x_internal"+e])){i.Z.debug("no such type: "+e);return}if(!n.Z.isArray(o["x_internal"+e])){i.Z.debug("owner[x_internal + "+e+"] is not an array");return}if(-1===(s=n.Z.indexOf(o["x_internal"+e],r,"origin"))){i.Z.debug("removeEvent: no such event function in internal list: "+r);return}try{n.Z.exists(t)&&n.Z.exists(t.removeEventListener)&&t.removeEventListener(e,o["x_internal"+e][s],!1),n.Z.exists(t)&&n.Z.exists(t.detachEvent)&&t.detachEvent("on"+e,o["x_internal"+e][s])}catch(t){i.Z.debug("event not registered in browser: ("+e+" -- "+r+")")}o["x_internal"+e].splice(s,1)},removeAllEvents:function(t,e,r){var n;if(r["x_internal"+e]){for(n=r["x_internal"+e].length-1;n>=0;n--)i.Z.removeEvent(t,e,r["x_internal"+e][n].origin,r);r["x_internal"+e].length>0&&i.Z.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(t,e,r){var o,s,a,u=0,h=0;if(t||(t=window.event),r=r||document,a=t[i.Z.touchProperty],n.Z.exists(a)&&0===a.length&&(a=t.changedTouches),n.Z.exists(e)&&n.Z.exists(a)){if(-1===e){for(o=0,s=a.length;o<s;o++)if(a[o]){t=a[o];break}}else t=a[e]}return t.clientX&&(u=t.clientX,h=t.clientY),[u,h]},getOffset:function(t){var e,r=t,i=t,n=r.offsetLeft-r.scrollLeft,o=r.offsetTop-r.scrollTop;for(n=(e=this.getCSSTransform([n,o],r))[0],o=e[1],r=r.offsetParent;r;){for(n+=r.offsetLeft,o+=r.offsetTop,r.offsetParent&&(n+=r.clientLeft-r.scrollLeft,o+=r.clientTop-r.scrollTop),n=(e=this.getCSSTransform([n,o],r))[0],o=e[1],i=i.parentNode;i!==r;)n+=i.clientLeft-i.scrollLeft,o+=i.clientTop-i.scrollTop,n=(e=this.getCSSTransform([n,o],i))[0],o=e[1],i=i.parentNode;r=r.offsetParent}return[n,o]},getStyle:function(t,e){var r,n=t.ownerDocument;return n.defaultView&&n.defaultView.getComputedStyle?r=n.defaultView.getComputedStyle(t,null).getPropertyValue(e):t.currentStyle&&i.Z.ieVersion>=9?r=t.currentStyle[e]:t.style&&(e=e.replace(/-([a-z]|[0-9])/gi,function(t,e){return e.toUpperCase()}),r=t.style[e]),r},getProp:function(t,e){var r=parseInt(this.getStyle(t,e),10);return isNaN(r)?0:r},getCSSTransform:function(t,e){var r,i,o,s,a,u,h,l=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(r=0,a=l.length,o="";r<a;r++)if(n.Z.exists(e.style[l[r]])){o=e.style[l[r]];break}if(""!==o&&(s=o.indexOf("("))>0){for(i=0,a=o.length,u=(h=o.substring(s+1,a-1).split(",")).length;i<u;i++)h[i]=parseFloat(h[i]);0===o.indexOf("matrix")?(t[0]+=h[4],t[1]+=h[5]):0===o.indexOf("translateX")?t[0]+=h[0]:0===o.indexOf("translateY")?t[1]+=h[0]:0===o.indexOf("translate")&&(t[0]+=h[0],t[1]+=h[1])}return n.Z.exists(e.style.zoom)&&""!==(o=e.style.zoom)&&(t[0]*=parseFloat(o),t[1]*=parseFloat(o)),t},getCSSTransformMatrix:function(t){var e,r,i,o,s,a,u,h,l=t.ownerDocument,c=["transform","webkitTransform","MozTransform","msTransform","oTransform"],d=[[1,0,0],[0,1,0],[0,0,1]];if(l.defaultView&&l.defaultView.getComputedStyle)i=(h=l.defaultView.getComputedStyle(t,null)).getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");else for(e=0,a=c.length,i="";e<a;e++)if(n.Z.exists(t.style[c[e]])){i=t.style[c[e]];break}if(""!==i&&(s=i.indexOf("("))>0){for(r=0,a=i.length,u=(o=i.substring(s+1,a-1).split(",")).length;r<u;r++)o[r]=parseFloat(o[r]);0===i.indexOf("matrix")?d=[[1,0,0],[0,o[0],o[1]],[0,o[2],o[3]]]:0===i.indexOf("scaleX")?d[1][1]=o[0]:0===i.indexOf("scaleY")?d[2][2]=o[0]:0===i.indexOf("scale")&&(d[1][1]=o[0],d[2][2]=o[1])}return n.Z.exists(t.style.zoom)&&""!==(i=t.style.zoom)&&(d[1][1]*=parseFloat(i),d[2][2]*=parseFloat(i)),d},timedChunk:function(t,e,r,i){var n=t.concat(),o=function(){var s=+new Date;do e.call(r,n.shift());while(n.length>0&&+new Date-s<300);n.length>0?window.setTimeout(o,1):i(t)};window.setTimeout(o,1)},scaleJSXGraphDiv:function(t,e,r,n){var o,s,a,u,h,l,c,d,f,p,m,v;for(s=(a=r.getElementById(t).getBoundingClientRect()).height,o=a.width,l=(d=r.getElementById(e))._cssFullscreenStore.w,m=(c=d._cssFullscreenStore.h)/l,l>o*n&&(c=(l=o*n)*m),c>s*n&&(l=(c=s*n)/m),u=l,h=c,f=m<s/o?o*n/l:s*n/c,p=(s-h)*.5,v=0;v<4;v++)try{d.style.width=u+"px !important",d.style.height=h+"px !important",d.style.margin="0 auto",d.style.transform=d._cssFullscreenStore.transform+" matrix("+f+",0,0,"+f+",0,"+p+")";break}catch(t){i.Z.debug("JXG.scaleJSXGraphDiv:\n"+t)}4===v&&i.Z.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}}),e.Z=i.Z},6638:function(t,e,r){"use strict";var i=r(7901),n=r(1013);i.Z.EventEmitter={eventHandlers:{},suspended:{},trigger:function(t,e){var r,i,n,o,s,a;for(i=0,s=t.length;i<s;i++)if(o=this.eventHandlers[t[i]],!this.suspended[t[i]]){if(this.suspended[t[i]]=!0,o)for(r=0,a=o.length;r<a;r++)(n=o[r]).handler.apply(n.context,e);this.suspended[t[i]]=!1}return this},on:function(t,e,r){return n.Z.isArray(this.eventHandlers[t])||(this.eventHandlers[t]=[]),r=n.Z.def(r,this),this.eventHandlers[t].push({handler:e,context:r}),this},off:function(t,e){var r;return t&&n.Z.isArray(this.eventHandlers[t])&&(e?((r=n.Z.indexOf(this.eventHandlers[t],e,"handler"))>-1&&this.eventHandlers[t].splice(r,1),0===this.eventHandlers[t].length&&delete this.eventHandlers[t]):delete this.eventHandlers[t]),this},eventify:function(t){t.eventHandlers={},t.on=this.on,t.off=this.off,t.triggerEventHandlers=this.trigger,t.trigger=this.trigger,t.suspended={}}},e.Z=i.Z.EventEmitter},2285:function(t,e,r){"use strict";var i=r(7901),n=r(1013),o=r(2840),s=r(9401);i.Z.Expect={each:function(t,e,r){var i,o,s=[];if(n.Z.exists(t.length))for(i=0,o=t.length;i<o;i++)s.push(e.call(this,t[i],r));return s},coords:function(t,e){var r=t;return t&&t.elementClass===o.Z.OBJECT_CLASS_POINT?r=t.coords:t.usrCoords&&t.scrCoords&&t.usr2screen&&(r=t),e&&(r=new s.Z(o.Z.COORDS_BY_USER,r.usrCoords,r.board)),r},coordsArray:function(t,e){var r;return(r=n.Z.isArray(t)?t:this.coords(t).usrCoords).length<3&&r.unshift(1),e&&(r=[r[0],r[1],r[2]]),r}},e.Z=i.Z.Expect},1013:function(t,e,r){"use strict";var i=r(7901),n=r(2840);i.Z.extend(i.Z,{isBoard:function(t){return null!==t&&"object"==typeof t&&this.isNumber(t.BOARD_MODE_NONE)&&this.isObject(t.objects)&&this.isObject(t.jc)&&this.isFunction(t.update)&&!!t.containerObj&&this.isString(t.id)},isId:function(t,e){return"string"==typeof e&&!!t.objects[e]},isName:function(t,e){return"string"==typeof e&&!!t.elementsByName[e]},isGroup:function(t,e){return"string"==typeof e&&!!t.groups[e]},isString:function(t){return"string"==typeof t},isNumber:function(t,e,r){var i="number"==typeof t||"[Object Number]"===Object.prototype.toString.call(t);return r=void 0===r||r,(e=e||!1)&&(i=i||""+parseFloat(t)===t),r||(i=i&&!isNaN(t)),i},isFunction:function(t){return"function"==typeof t},isArray:function(t){return Array.isArray?Array.isArray(t):null!==t&&"object"==typeof t&&"function"==typeof t.splice&&"function"==typeof t.join},isObject:function(t){return"object"==typeof t&&!this.isArray(t)},isDocumentOrFragment:function(t){return this.isObject(t)&&(9===t.nodeType||11===t.nodeType)},isPoint:function(t){return!!(null!==t&&"object"==typeof t&&this.exists(t.elementClass))&&t.elementClass===n.Z.OBJECT_CLASS_POINT},isPoint3D:function(t){return!!(null!==t&&"object"==typeof t&&this.exists(t.elType))&&"point3d"===t.elType},isPointType:function(t,e){var r,i;return!!(this.isArray(e)||this.isFunction(e)&&(r=e(),this.isArray(r)&&r.length>1))||(i=t.select(e),this.isPoint(i))},isTransformationOrArray:function(t){if(null!==t){if(this.isArray(t)&&t.length>0)return this.isTransformationOrArray(t[0]);if("object"==typeof t)return t.type===n.Z.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(t){return 0===Object.keys(t).length},exists:function(t,e){var r=!(void 0==t||null===t);return(e=e||!1)?r&&""!==t:r},def:function(t,e){return this.exists(t)?t:e},str2Bool:function(t){return!this.exists(t)||("boolean"==typeof t?t:!!this.isString(t)&&"true"===t.toLowerCase())},createEvalFunction:function(t,e,r){var n,o,s,a=[],u={};for(o=0;o<r;o++)for(s in a[o]=i.Z.createFunction(e[o],t),a[o].deps)u[s]=a[o].deps;return(n=function(t){return a[t]()}).deps=u,n},createFunction:function(t,e,r,i){var n=null;return this.isString(t)?n=e.jc.snippet(t,!0,r,!1):this.isFunction(t)?(n=t).deps={}:this.isNumber(t)&&((n=function(){return t}).deps={}),null!==n&&(n.origin=t),n},providePoints:function(t,e,r,i,n){var o,s,a,u,h,l=0,c=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(n)&&(l=n.length),0===l&&(u=this.copyAttributes(r,t.options,i)),o=0;o<a;++o)if(l>0&&(s=Math.min(o,l-1),u=this.copyAttributes(r,t.options,i,n[s].toLowerCase())),this.isArray(e[o])&&e[o].length>1?(c.push(t.create("point",e[o],u)),c[c.length-1]._is_new=!0):this.isFunction(e[o])?(h=e[o](),this.isArray(h)&&h.length>1&&(c.push(t.create("point",[e[o]],u)),c[c.length-1]._is_new=!0)):c.push(t.select(e[o])),!this.isPoint(c[o]))return!1;return c},providePoints3D:function(t,e,r,i,n){var o,s,a,u,h,l=0,c=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(n)&&(l=n.length),0===l&&(u=this.copyAttributes(r,t.board.options,i)),o=0;o<a;++o)if(l>0&&(s=Math.min(o,l-1),u=this.copyAttributes(r,t.board.options,i,n[s])),this.isArray(e[o])&&e[o].length>1?(c.push(t.create("point3d",e[o],u)),c[c.length-1]._is_new=!0):this.isFunction(e[o])?(h=e[o](),this.isArray(h)&&h.length>1&&(c.push(t.create("point3d",[e[o]],u)),c[c.length-1]._is_new=!0)):c.push(t.select(e[o])),!this.isPoint3D(c[o]))return!1;return c},bind:function(t,e){return function(){return t.apply(e,arguments)}},evaluate:function(t){return this.isFunction(t)?t():t},indexOf:function(t,e,r){var i,n=this.exists(r);if(Array.indexOf&&!n)return t.indexOf(e);for(i=0;i<t.length;i++)if(n&&t[i][r]===e||!n&&t[i]===e)return i;return -1},eliminateDuplicates:function(t){var e,r=t.length,i=[],n={};for(e=0;e<r;e++)n[t[e]]=0;for(e in n)n.hasOwnProperty(e)&&i.push(e);return i},swap:function(t,e,r){var i;return i=t[e],t[e]=t[r],t[r]=i,t},uniqueArray:function(t){var e,r,n,o=[];if(0===t.length)return[];for(e=0;e<t.length;e++){if(n=this.isArray(t[e]),!this.exists(t[e])){t[e]="";continue}for(r=e+1;r<t.length;r++)n&&i.Z.cmpArrays(t[e],t[r])?t[e]=[]:n||t[e]!==t[r]||(t[e]="")}for(e=0,r=0;e<t.length;e++)(n=this.isArray(t[e]))||""===t[e]?n&&0!==t[e].length&&(o[r]=t[e].slice(0),r++):(o[r]=t[e],r++);return t=o,o},isInArray:function(t,e){return i.Z.indexOf(t,e)>-1},coordsArrayToMatrix:function(t,e){var r,i=[],n=[];for(r=0;r<t.length;r++)e?(i.push(t[r].usrCoords[1]),n.push(t[r].usrCoords[2])):n.push([t[r].usrCoords[1],t[r].usrCoords[2]]);return e&&(n=[i,n]),n},cmpArrays:function(t,e){var r;if(t===e)return!0;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(this.isArray(t[r])&&this.isArray(e[r])){if(!this.cmpArrays(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0},removeElementFromArray:function(t,e){var r;for(r=0;r<t.length;r++)if(t[r]===e){t.splice(r,1);break}return t},trunc:function(t,e){return e=i.Z.def(e,0),this.toFixed(t,e)},_decimalAdjust:function(t,e,r){return void 0===r||0==+r?Math[t](e):(r=+r,isNaN(e=+e)||!("number"==typeof r&&r%1==0))?NaN:+((e=(e=Math[t](+((e=e.toString().split("e"))[0]+"e"+(e[1]?+e[1]-r:-r)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+r:r))},_round10:function(t,e){return this._decimalAdjust("round",t,e)},_floor10:function(t,e){return this._decimalAdjust("floor",t,e)},_ceil10:function(t,e){return this._decimalAdjust("ceil",t,e)},toFixed:function(t,e){return this._round10(t,-e).toFixed(e)},autoDigits:function(t){var e=Math.abs(t);return e>=.1?this.toFixed(t,2):e>=.01?this.toFixed(t,4):e>=1e-4?this.toFixed(t,6):t},keys:function(t,e){var r,i=[];for(r in t)e?t.hasOwnProperty(r)&&i.push(r):i.push(r);return i},clone:function(t){var e={};return e.prototype=t,e},cloneAndCopy:function(t,e){var r,i=function(){};for(r in i.prototype=t,e)i[r]=e[r];return i},merge:function(t,e){var r,i,n,o;for(r in e)if(e.hasOwnProperty(r)){if(n=e[r],this.isArray(n))for(t[r]||(t[r]=[]),i=0;i<n.length;i++)o=e[r][i],"object"==typeof e[r][i]?t[r][i]=this.merge(t[r][i],o):t[r][i]=e[r][i];else"object"==typeof n?(t[r]||(t[r]={}),t[r]=this.merge(t[r],n)):("boolean"==typeof t&&(t={}),t[r]=n)}return t},deepCopy:function(t,e,r){var i,n,o,s;if(r=r||!1,"object"!=typeof t||null===t)return t;if(this.isArray(t))for(n=0,i=[];n<t.length;n++)null!==(o=t[n])&&"object"==typeof o?this.exists(o.board)?i[n]=o.id:i[n]=this.deepCopy(o,{},r):i[n]=o;else{for(n in i={},t)t.hasOwnProperty(n)&&(s=r?n.toLowerCase():n,null!==(o=t[n])&&"object"==typeof o?this.exists(o.board)?i[s]=o.id:i[s]=this.deepCopy(o,{},r):i[s]=o);for(n in e)e.hasOwnProperty(n)&&(s=r?n.toLowerCase():n,null!==(o=e[n])&&"object"==typeof o?this.isArray(o)||!this.exists(i[s])?i[s]=this.deepCopy(o,{},r):i[s]=this.deepCopy(i[s],o,r):i[s]=o)}return i},mergeAttr:function(t,e,r){var i,n,o;for(i in r=r||!0,e)e.hasOwnProperty(i)&&(n=r?i.toLowerCase():i,o=e[i],!this.isObject(o)||null===o||this.isDocumentOrFragment(o)||this.exists(o.board)||"string"==typeof o.valueOf()?t[n]=o:(void 0!==t[n]&&null!==t[n]&&this.isObject(t[n])||(t[n]={}),this.mergeAttr(t[n],o,r)))},copyAttributes:function(t,e,r){var n,o,s,a,u;for(s=arguments.length,n=s<3||({circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1})[r]?i.Z.deepCopy(e.elements,null,!0):{},s<4&&this.exists(r)&&this.exists(e.layer[r])&&(n.layer=e.layer[r]),a=e,u=!0,o=2;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}for(u&&(n=i.Z.deepCopy(n,a,!0)),a="object"==typeof t?t:{},u=!0,o=3;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}if(u&&this.mergeAttr(n,a,!0),"board"===arguments[2])return n;for(o=2,a=e,u=!0;o<s;o++)if(this.exists(a[arguments[o]]))a=a[arguments[o]];else{u=!1;break}return u&&this.exists(a.label)&&(n.label=i.Z.deepCopy(a.label,n.label)),n.label=i.Z.deepCopy(e.label,n.label),n},copyPrototypeMethods:function(t,e,r){var i;for(i in t.prototype[r]=e.prototype.constructor,e.prototype)e.prototype.hasOwnProperty(i)&&(t.prototype[i]=e.prototype[i])},toJSON:function(t,e){var r,n,o,s;if(e=i.Z.def(e,!1),void 0!==JSON&&JSON.stringify&&!e)try{return JSON.stringify(t)}catch(t){}switch(typeof t){case"object":if(t){if(r=[],this.isArray(t)){for(o=0;o<t.length;o++)r.push(i.Z.toJSON(t[o],e));return"["+r.join(",")+"]"}for(n in t)if(t.hasOwnProperty(n)){try{s=i.Z.toJSON(t[n],e)}catch(t){s=""}e?r.push(n+":"+s):r.push('"'+n+'":'+s)}return"{"+r.join(",")+"} "}return"null";case"string":return"'"+t.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString()}return"0"},clearVisPropOld:function(t){return t.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},t},isInObject:function(t,e){var r;for(r in t)if(t.hasOwnProperty(r)&&t[r]===e)return!0;return!1},escapeHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},trimNumber:function(t){return("."===(t=(t=t.replace(/^0+/,"")).replace(/0+$/,""))[t.length-1]||","===t[t.length-1])&&(t=t.slice(0,-1)),("."===t[0]||","===t[0])&&(t="0"+t),t},filterElements:function(t,e){var r,i,n,o,s,a,u,h=t.length,l=[];if("function"!=typeof e&&"object"!=typeof e)return l;for(r=0;r<h;r++){if(u=!0,n=t[r],"object"==typeof e){for(i in e)if(e.hasOwnProperty(i)&&(o=i.toLowerCase(),s="function"==typeof n[i]?n[i]():n[i],a=n.visProp&&"function"==typeof n.visProp[o]?n.visProp[o]():n.visProp&&n.visProp[o],!(u="function"==typeof e[i]?e[i](s)||e[i](a):s===e[i]||a===e[i])))break}else"function"==typeof e&&(u=e(n));u&&l.push(n)}return l},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(t,e){return"function"==typeof html_sanitize&&e?html_sanitize(t,function(){},function(t){return t}):(t&&"string"==typeof t&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t)},evalSlider:function(t){return t&&t.type===n.Z.OBJECT_TYPE_GLIDER&&"function"==typeof t.Value?t.Value():t},stack2jsxgraph:function(t){var e;return"["===(e=t.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim())[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1).split(/\s*,\s*/)),e}}),e.Z=i.Z},383:function(t){!/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/function(e){"use strict";var r={s:1,n:0,d:1};function i(t,e){if(isNaN(t=parseInt(t,10)))throw l();return t*e}function n(t,e){if(0===e)throw h();var r=Object.create(u.prototype);r.s=t<0?-1:1;var i=a(t=t<0?-t:t,e);return r.n=t/i,r.d=e/i,r}function o(t){for(var e={},r=t,i=2,n=4;n<=r;){for(;r%i==0;)r/=i,e[i]=(e[i]||0)+1;n+=1+2*i++}return r!==t?r>1&&(e[r]=(e[r]||0)+1):e[t]=(e[t]||0)+1,e}var s=function(t,e){var n,o=0,s=1,a=1,u=0,d=0,f=0,p=1,m=1,v=0,g=1,b=1,y=1;if(null==t);else if(void 0!==e){if(a=(o=t)*(s=e),o%1!=0||s%1!=0)throw c()}else switch(typeof t){case"object":if("d"in t&&"n"in t)o=t.n,s=t.d,"s"in t&&(o*=t.s);else if(0 in t)o=t[0],1 in t&&(s=t[1]);else throw l();a=o*s;break;case"number":if(t<0&&(a=t,t=-t),t%1==0)o=t;else if(t>0){for(t>=1&&(m=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=m);g<=1e7&&y<=1e7;){if(t===(n=(v+b)/(g+y))){g+y<=1e7?(o=v+b,s=g+y):y>g?(o=b,s=y):(o=v,s=g);break}t>n?(v+=b,g+=y):(b+=v,y+=g),g>1e7?(o=b,s=y):(o=v,s=g)}o*=m}else(isNaN(t)||isNaN(e))&&(s=o=NaN);break;case"string":if(null===(g=t.match(/\d+|./g)))throw l();if("-"===g[v]?(a=-1,v++):"+"===g[v]&&v++,g.length===v+1?d=i(g[v++],a):"."===g[v+1]||"."===g[v]?("."!==g[v]&&(u=i(g[v++],a)),(++v+1===g.length||"("===g[v+1]&&")"===g[v+3]||"'"===g[v+1]&&"'"===g[v+3])&&(d=i(g[v],a),p=Math.pow(10,g[v].length),v++),("("===g[v]&&")"===g[v+2]||"'"===g[v]&&"'"===g[v+2])&&(f=i(g[v+1],a),m=Math.pow(10,g[v+1].length)-1,v+=3)):"/"===g[v+1]||":"===g[v+1]?(d=i(g[v],a),p=i(g[v+2],1),v+=3):"/"===g[v+3]&&" "===g[v+1]&&(u=i(g[v],a),d=i(g[v+2],a),p=i(g[v+4],1),v+=5),g.length<=v){a=o=f+(s=p*m)*u+m*d;break}default:throw l()}if(0===s)throw h();r.s=a<0?-1:1,r.n=Math.abs(o),r.d=Math.abs(s)};function a(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function u(t,e){if(s(t,e),!(this instanceof u))return n(r.s*r.n,r.d);t=a(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t}var h=function(){return Error("Division by Zero")},l=function(){return Error("Invalid argument")},c=function(){return Error("Parameters must be integer")};u.prototype={s:1,n:0,d:1,abs:function(){return n(this.n,this.d)},neg:function(){return n(-this.s*this.n,this.d)},add:function(t,e){return s(t,e),n(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,e){return s(t,e),n(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,e){return s(t,e),n(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,e){return s(t,e),n(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return n(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new u(NaN);if(void 0===t)return n(this.s*this.n%this.d,1);if(s(t,e),0===r.n&&0===this.d)throw h();return n(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,e){return s(t,e),n(a(r.n,this.n)*a(r.d,this.d),r.d*this.d)},lcm:function(t,e){return(s(t,e),0===r.n&&0===this.n)?n(0,1):n(r.n*this.n,a(r.n,this.n)*a(r.d,this.d))},ceil:function(t){return(t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return(t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return(t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d))?new u(NaN):n(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return n(this.s*this.d,this.n)},pow:function(t,e){if(s(t,e),1===r.d)return r.s<0?n(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):n(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var i=o(this.n),a=o(this.d),u=1,h=1;for(var l in i)if("1"!==l){if("0"===l){u=0;break}if(i[l]*=r.n,i[l]%r.d!=0)return null;i[l]/=r.d,u*=Math.pow(l,i[l])}for(var l in a)if("1"!==l){if(a[l]*=r.n,a[l]%r.d!=0)return null;a[l]/=r.d,h*=Math.pow(l,a[l])}return r.s<0?n(h,u):n(u,h)},equals:function(t,e){return s(t,e),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(t,e){s(t,e);var i=this.s*this.n*r.d-r.s*r.n*this.d;return(0<i)-(i<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),r=e.toContinued(),i=1;i<r.length;i++){for(var o=n(r[i-1],1),s=i-2;s>=0;s--)o=o.inverse().add(r[s]);if(Math.abs(o.sub(e).valueOf())<t)return o.mul(this.s)}return this},divisible:function(t,e){return s(t,e),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,r="",i=this.n,n=this.d;return this.s<0&&(r+="-"),1===n?r+=i:(t&&(e=Math.floor(i/n))>0&&(r+=e+" ",i%=n),r+=i+"/"+n),r},toLatex:function(t){var e,r="",i=this.n,n=this.d;return this.s<0&&(r+="-"),1===n?r+=i:(t&&(e=Math.floor(i/n))>0&&(r+=e,i%=n),r+="\\frac{"+i+"}{"+n+"}"),r},toContinued:function(){var t,e=this.n,r=this.d,i=[];if(isNaN(e)||isNaN(r))return i;do i.push(Math.floor(e/r)),t=e%r,e=r,r=t;while(1!==e);return i},toString:function(t){var e=this.n,r=this.d;if(isNaN(e)||isNaN(r))return"NaN";t=t||15;var i=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var r=10%e,i=1;1!==r;i++)if(r=10*r%e,i>2e3)return 0;return i}(0,r),n=function(t,e,r){for(var i=1,n=function(t,e,r){for(var i=1;e>0;t=t*t%r,e>>=1)1&e&&(i=i*t%r);return i}(10,r,e),o=0;o<300;o++){if(i===n)return o;i=10*i%e,n=10*n%e}return 0}(0,r,i),o=this.s<0?"-":"";if(o+=e/r|0,e%=r,(e*=10)&&(o+="."),i){for(var s=n;s--;)o+=e/r|0,e%=r,e*=10;o+="(";for(var s=i;s--;)o+=e/r|0,e%=r,e*=10;o+=")"}else for(var s=t;e&&s--;)o+=e/r|0,e%=r,e*=10;return o}},Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Fraction=u,t.exports=u}(0)},9079:function(t,e,r){"use strict";var i,n;t.exports=(null==(i=r.g.process)?void 0:i.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(3127)},3127:function(t){"use strict";!function(){var e={229:function(t){var e,r,i,n=t.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u=[],h=!1,l=-1;function c(){h&&i&&(h=!1,i.length?u=i.concat(u):l=-1,u.length&&d())}function d(){if(!h){var t=a(c);h=!0;for(var e=u.length;e;){for(i=u,u=[];++l<e;)i&&i[l].run();l=-1,e=u.length}i=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new f(t,e)),1!==u.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function i(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}},s=!0;try{e[t](o,o.exports,i),s=!1}finally{s&&delete r[t]}return o.exports}i.ab="//";var n=i(229);t.exports=n}()},3718:function(t,e,r){"use strict";var i=r(6215),n=r(8200),o=r(5033),s=r(4072),a=r(7582),u=r(983),h=r(4911);h.alea=i,h.xor128=n,h.xorwow=o,h.xorshift7=s,h.xor4096=a,h.tychei=u,t.exports=h},6215:function(t,e,r){var i;!function(n,o,s){function a(t){var e,r=this,i=(e=4022871197,function(t){t=String(t);for(var r=0;r<t.length;r++){var i=.02519603282416938*(e+=t.charCodeAt(r));e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return(e>>>0)*23283064365386963e-26});r.next=function(){var t=2091639*r.s0+23283064365386963e-26*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=i(" "),r.s1=i(" "),r.s2=i(" "),r.s0-=i(t),r.s0<0&&(r.s0+=1),r.s1-=i(t),r.s1<0&&(r.s1+=1),r.s2-=i(t),r.s2<0&&(r.s2+=1)}function u(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function h(t,e){var r=new a(t),i=e&&e.state,n=r.next;return n.int32=function(){return 4294967296*r.next()|0},n.double=function(){return n()+(2097152*n()|0)*11102230246251565e-32},n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.alea=h}(0,t=r.nmd(t),r.amdD)},983:function(t,e,r){var i;!function(n,o,s){function a(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,i=e.d,n=e.a;return t=t<<25^t>>>7^r,r=r-i|0,i=i<<24^i>>>8^n,n=n-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-i|0,e.d=i<<16^r>>>16^n,e.a=n-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var i=0;i<r.length+20;i++)e.b^=0|r.charCodeAt(i),e.next()}function u(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function h(t,e){var r=new a(t),i=e&&e.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===t);return t},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.tychei=h}(0,t=r.nmd(t),r.amdD)},8200:function(t,e,r){var i;!function(n,o,s){function a(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var i=0;i<r.length+64;i++)e.x^=0|r.charCodeAt(i),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function h(t,e){var r=new a(t),i=e&&e.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===t);return t},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.xor128=h}(0,t=r.nmd(t),r.amdD)},7582:function(t,e,r){var i;!function(n,o,s){function a(t){var e=this;e.next=function(){var t,r,i=e.w,n=e.X,o=e.i;return e.w=i=i+1640531527|0,r=n[o+34&127],t=n[o=o+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=n[o]=r^t,e.i=o,r+(i^i>>>16)|0},function(t,e){var r,i,n,o,s,a=[],u=128;for(e===(0|e)?(i=e,e=null):(e+="\x00",i=0,u=Math.max(u,e.length)),n=0,o=-32;o<u;++o)e&&(i^=e.charCodeAt((o+32)%e.length)),0===o&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(s=s+1640531527|0,n=0==(r=a[127&o]^=i+s)?n+1:0);for(n>=128&&(a[127&(e&&e.length||0)]=-1),n=127,o=512;o>0;--o)i=a[n+34&127],r=a[n=n+1&127],i^=i<<13,r^=r<<17,i^=i>>>15,r^=r>>>12,a[n]=i^r;t.w=s,t.X=a,t.i=n}(e,t)}function u(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function h(t,e){null==t&&(t=+new Date);var r=new a(t),i=e&&e.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===t);return t},n.int32=r.next,n.quick=n,i&&(i.X&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.xor4096=h}(0,t=r.nmd(t),r.amdD)},4072:function(t,e,r){var i;!function(n,o,s){function a(t){var e=this;e.next=function(){var t,r,i=e.x,n=e.i;return t=i[n],t^=t>>>7,r=t^t<<24^((t=i[n+1&7])^t>>>10)^((t=i[n+3&7])^t>>>3)^((t=i[n+4&7])^t<<7),t=i[n+7&7],t^=t<<13,r^=t^t<<9,i[n]=r,e.i=n+1&7,r},function(t,e){var r,i=[];if(e===(0|e))i[0]=e;else for(r=0,e=""+e;r<e.length;++r)i[7&r]=i[7&r]<<15^e.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&0===i[r];++r);for(8==r?i[7]=-1:i[r],t.x=i,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function u(t,e){return e.x=t.x.slice(),e.i=t.i,e}function h(t,e){null==t&&(t=+new Date);var r=new a(t),i=e&&e.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===t);return t},n.int32=r.next,n.quick=n,i&&(i.x&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.xorshift7=h}(0,t=r.nmd(t),r.amdD)},5033:function(t,e,r){var i;!function(n,o,s){function a(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(t^t<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var i=0;i<r.length+64;i++)e.x^=0|r.charCodeAt(i),i==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function h(t,e){var r=new a(t),i=e&&e.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===t);return t},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&u(i,r),n.state=function(){return u(r,{})}),n}o&&o.exports?o.exports=h:r.amdD&&r.amdO?void 0!==(i=(function(){return h}).call(e,r,e,t))&&(t.exports=i):this.xorwow=h}(0,t=r.nmd(t),r.amdD)},4911:function(t,e,r){"use strict";var i;!function(n,o,s){var a,u=s.pow(256,6),h=s.pow(2,52),l=2*h;function c(t,e,r){var i=[],c=p(function t(e,r){var i,n=[],o=typeof e;if(r&&"object"==o)for(i in e)try{n.push(t(e[i],r-1))}catch(t){}return n.length?n:"string"==o?e:e+"\x00"}((e=!0==e?{entropy:!0}:e||{}).entropy?[t,m(o)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(256):(t=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(t)),m(t)}catch(t){var e=n.navigator,r=e&&e.plugins;return[+new Date,n,r,n.screen,m(o)]}}():t,3),i),v=new d(i),g=function(){for(var t=v.g(6),e=u,r=0;t<h;)t=(t+r)*256,e*=256,r=v.g(1);for(;t>=l;)t/=2,e/=2,r>>>=1;return(t+r)/e};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(m(v.S),o),(e.pass||r||function(t,e,r,i){return(i&&(i.S&&f(i,v),t.state=function(){return f(v,{})}),r)?(s.random=t,e):t})(g,c,"global"in e?e.global:this==s,e.state)}function d(t){var e,r=t.length,i=this,n=0,o=i.i=i.j=0,s=i.S=[];for(r||(t=[r++]);n<256;)s[n]=n++;for(n=0;n<256;n++)s[n]=s[o=255&o+t[n%r]+(e=s[n])],s[o]=e;(i.g=function(t){for(var e,r=0,n=i.i,o=i.j,s=i.S;t--;)e=s[n=255&n+1],r=256*r+s[255&(s[n]=s[o=255&o+e])+(s[o]=e)];return i.i=n,i.j=o,r})(256)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){for(var r,i=t+"",n=0;n<i.length;)e[255&n]=255&(r^=19*e[255&n])+i.charCodeAt(n++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(p(s.random(),o),t.exports){t.exports=c;try{a=r(5042)}catch(t){}}else void 0!==(i=(function(){return c}).call(e,r,e,t))&&(t.exports=i)}("undefined"!=typeof self?self:void 0,[],Math)},7425:function(t){"use strict";t.exports=function(){function t(){return!0}function e(){return!1}function r(){}let i="Argument is not a typed-function.";return function n(){let o,s;function a(t){return"object"==typeof t&&null!==t&&t.constructor===Object}let u=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],h={name:"any",test:t,isAny:!0},l=0,c={createCount:0};function d(t){let e;let r=o.get(t);if(r)return r;let i='Unknown type "'+t+'"',n=t.toLowerCase();for(e of s)if(e.toLowerCase()===n){i+='. Did you mean "'+e+'" ?';break}throw TypeError(i)}function f(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",r=e?d(e).index:s.length,i=[];for(let e=0;e<t.length;++e){if(!t[e]||"string"!=typeof t[e].name||"function"!=typeof t[e].test)throw TypeError("Object with properties {name: string, test: function} expected");let n=t[e].name;if(o.has(n))throw TypeError('Duplicate type name "'+n+'"');i.push(n),o.set(n,{name:n,test:t[e].test,isAny:t[e].isAny,index:r+e,conversionsTo:[]})}let n=s.slice(r);s=s.slice(0,r).concat(i).concat(n);for(let t=r+i.length;t<s.length;++t)o.get(s[t]).index=t}function p(){o=new Map,s=[],l=0,f([h],!1)}function m(t){let e=s.filter(e=>{let r=o.get(e);return!r.isAny&&r.test(t)});return e.length?e:["any"]}function v(t){return t&&"function"==typeof t&&"_typedFunctionData"in t}function g(t,e,r){let n,o;if(!v(t))throw TypeError(i);let s=r&&r.exact,a=Z(Array.isArray(e)?e.join(","):e),u=b(a);if(!s||u in t.signatures){let e=t._typedFunctionData.signatureMap.get(u);if(e)return e}let h=a.length;if(s){let e;for(e in n=[],t.signatures)n.push(t._typedFunctionData.signatureMap.get(e))}else n=t._typedFunctionData.signatures;for(let t=0;t<h;++t){let e;let r=a[t],i=[];for(e of n){let n=E(e.params,t);if(n&&(!r.restParam||n.restParam)){if(!n.hasAny){let t=C(n);if(r.types.some(e=>!t.has(e.name)))continue}i.push(e)}}if(0===(n=i).length)break}for(o of n)if(o.params.length<=h)return o;throw TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+b(a,", ")+"))")}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return t.map(t=>t.name).join(e)}function y(t){let e=function(t){if(0===t.length)return[];let e=t.map(d);t.length>1&&e.sort((t,e)=>t.index-e.index);let r=e[0].conversionsTo;if(1===t.length)return r;r=r.concat([]);let i=new Set(t);for(let t=1;t<e.length;++t){let n;for(n of e[t].conversionsTo)i.has(n.from)||(r.push(n),i.add(n.from))}return r}(t.types.map(t=>t.name)),r=t.hasAny,i=t.name,n=e.map(function(t){let e=d(t.from);return r=e.isAny||r,i+="|"+t.from,{name:t.from,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:t,conversionIndex:t.index}});return{types:t.types.concat(n),name:i,hasAny:r,hasConversion:n.length>0,restParam:t.restParam}}function C(t){return t.typeSet||(t.typeSet=new Set,t.types.forEach(e=>t.typeSet.add(e.name))),t.typeSet}function Z(t){let e=[];if("string"!=typeof t)throw TypeError("Signatures must be strings");let r=t.trim();if(""===r)return e;let i=r.split(",");for(let t=0;t<i.length;++t){let r=function(t){let e=0===t.indexOf("..."),r=(e?t.length>3?t.slice(3):"any":t).split("|").map(t=>d(t.trim())),i=!1,n=e?"...":"";return{types:r.map(function(t){return i=t.isAny||i,n+=t.name+"|",{name:t.name,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:null,conversionIndex:-1}}),name:n.slice(0,-1),hasAny:i,hasConversion:!1,restParam:e}}(i[t].trim());if(r.restParam&&t!==i.length-1)throw SyntaxError('Unexpected rest parameter "'+i[t]+'": only allowed for the last parameter');if(0===r.types.length)return null;e.push(r)}return e}function x(t){let e=F(t);return!!e&&e.restParam}function _(e){if(!e||0===e.types.length)return t;if(1===e.types.length)return d(e.types[0].name).test;if(2===e.types.length){let t=d(e.types[0].name).test,r=d(e.types[1].name).test;return function(e){return t(e)||r(e)}}{let t=e.types.map(function(t){return d(t.name).test});return function(e){for(let r=0;r<t.length;r++)if(t[r](e))return!0;return!1}}}function E(t,e){return e<t.length?t[e]:x(t)?F(t):null}function w(t,e){let r=E(t,e);return r?C(r):new Set}function N(t){return null===t.conversion||void 0===t.conversion}function S(t,e){let r=new Set;return t.forEach(t=>{let i;for(i of w(t.params,e))r.add(i)}),r.has("any")?["any"]:Array.from(r)}function A(t,e,r){let i,n,o;let s=t||"unnamed",a=r;for(o=0;o<e.length;o++){let t=[];if(a.forEach(r=>{let i=_(E(r.params,o));(o<r.params.length||x(r.params))&&i(e[o])&&t.push(r)}),0===t.length){if((n=S(a,o)).length>0){let t=m(e[o]);return(i=TypeError("Unexpected type of argument in function "+s+" (expected: "+n.join(" or ")+", actual: "+t.join(" | ")+", index: "+o+")")).data={category:"wrongType",fn:s,index:o,actual:t,expected:n},i}}else a=t}let u=a.map(function(t){return x(t.params)?1/0:t.params.length});if(e.length<Math.min.apply(null,u))return(i=TypeError("Too few arguments in function "+s+" (expected: "+(n=S(a,o)).join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:s,index:e.length,expected:n},i;let h=Math.max.apply(null,u);if(e.length>h)return(i=TypeError("Too many arguments in function "+s+" (expected: "+h+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:s,index:e.length,expectedLength:h},i;let l=[];for(let t=0;t<e.length;++t)l.push(m(e[t]).join("|"));return(i=TypeError('Arguments of type "'+l.join(", ")+'" do not match any of the defined signatures of function '+s+".")).data={category:"mismatch",actual:l},i}function P(t){let e=s.length+1;for(let r=0;r<t.types.length;r++)N(t.types[r])&&(e=Math.min(e,t.types[r].typeIndex));return e}function D(t){let e=l+1;for(let r=0;r<t.types.length;r++)N(t.types[r])||(e=Math.min(e,t.types[r].conversionIndex));return e}function M(t,e){let r,i;let n=t.params,o=e.params,s=F(n),a=F(o),u=x(n),h=x(o);if(u&&s.hasAny){if(!h||!a.hasAny)return 1}else if(h&&a.hasAny)return -1;let l=0,c=0;for(r of n)r.hasAny&&++l,r.hasConversion&&++c;let d=0,f=0;for(r of o)r.hasAny&&++d,r.hasConversion&&++f;if(l!==d)return l-d;if(u&&s.hasConversion){if(!h||!a.hasConversion)return 1}else if(h&&a.hasConversion)return -1;if(c!==f)return c-f;if(u){if(!h)return 1}else if(h)return -1;let p=(n.length-o.length)*(u?-1:1);if(0!==p)return p;let m=[],v=0;for(let t=0;t<n.length;++t){let e=function(t,e){if(t.hasAny){if(!e.hasAny)return 1}else if(e.hasAny)return -1;if(t.restParam){if(!e.restParam)return 1}else if(e.restParam)return -1;if(t.hasConversion){if(!e.hasConversion)return 1}else if(e.hasConversion)return -1;let r=P(t)-P(e);if(r<0)return -1;if(r>0)return 1;let i=D(t)-D(e);return i<0?-1:i>0?1:0}(n[t],o[t]);m.push(e),v+=e}if(0!==v)return v;for(i of m)if(0!==i)return i;return 0}function O(t){let e,r,i,n;let o=[],s=[];switch(t.types.forEach(function(t){t.conversion&&(o.push(d(t.conversion.from).test),s.push(t.conversion.convert))}),s.length){case 0:return function(t){return t};case 1:return e=o[0],i=s[0],function(t){return e(t)?i(t):t};case 2:return e=o[0],r=o[1],i=s[0],n=s[1],function(t){return e(t)?i(t):r(t)?n(t):t};default:return function(t){for(let e=0;e<s.length;e++)if(o[e](t))return s[e](t);return t}}}function T(t,e,r){throw A(t,e,r)}function B(t){return R(t,0,t.length-1)}function F(t){return t[t.length-1]}function R(t,e,r){return Array.prototype.slice.call(t,e,r)}function L(t,e){return{referTo:{references:t,callback:e}}}function k(t){if("function"!=typeof t)throw TypeError("Callback function expected as first argument");return{referToSelf:{callback:t}}}function I(t){return t&&"object"==typeof t.referTo&&Array.isArray(t.referTo.references)&&"function"==typeof t.referTo.callback}function Y(t){return t&&"object"==typeof t.referToSelf&&"function"==typeof t.referToSelf.callback}function U(t,e){if(!t)return e;if(e&&e!==t){let r=Error("Function names do not match (expected: "+t+", actual: "+e+")");throw r.data={actual:e,expected:t},r}return t}p(),f(u);let j=c;function z(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw TypeError("Object with properties {from: string, to: string, convert: function} expected");if(t.to===t.from)throw SyntaxError('Illegal to define conversion from "'+t.from+'" to itself.')}return(c=function(t){let i="string"==typeof t,n=i?1:0,o=i?t:"",s={};for(let t=n;t<arguments.length;++t){let e;let r=arguments[t],n={};if("function"==typeof r?(e=r.name,"string"==typeof r.signature?n[r.signature]=r:v(r)&&(n=r.signatures)):a(r)&&(n=r,i||(e=function(t){let e;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(v(t[r])||"string"==typeof t[r].signature)&&(e=U(e,t[r].name));return e}(r))),0===Object.keys(n).length){let e=TypeError("Argument to 'typed' at index "+t+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw e.data={index:t,argument:r},e}i||(o=U(o,e)),function(t,e){let r;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(r in t&&e[r]!==t[r]){let i=Error('Signature "'+r+'" is defined twice');throw i.data={signature:r,sourceFunction:e[r],destFunction:t[r]},i}t[r]=e[r]}}(s,n)}return function(t,i){let n,o;if(c.createCount++,0===Object.keys(i).length)throw SyntaxError("No signatures provided");c.warnAgainstDeprecatedThis&&function(t){let e=/\bthis(\(|\.signatures\b)/;Object.keys(t).forEach(r=>{let i=t[r];if(e.test(i.toString()))throw SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(i);let s=[],a=[],u={},h=[];for(n in i){let t;if(!Object.prototype.hasOwnProperty.call(i,n))continue;let e=Z(n);if(!e)continue;s.forEach(function(t){if(function(t,e){let r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r;let n=w(t,i),o=w(e,i),s=!1;for(r of o)if(n.has(r)){s=!0;break}if(!s)return!1}let i=t.length,n=e.length,o=x(t),s=x(e);return o?s?i===n:n>=i:s?i>=n:i===n}(t,e))throw TypeError('Conflicting signatures "'+b(t)+'" and "'+b(e)+'".')}),s.push(e);let r=a.length;for(t of(a.push(i[n]),function t(e,r,i){if(!(r<e.length))return[i];{var n,o;let s=e[r],a=[];if(s.restParam){let t=s.types.filter(N);t.length<s.types.length&&a.push({types:t,name:"..."+t.map(t=>t.name).join("|"),hasAny:t.some(t=>t.isAny),hasConversion:!1,restParam:!0}),a.push(s)}else a=s.types.map(function(t){return{types:[t],name:t.name,hasAny:t.isAny,hasConversion:t.conversion,restParam:!1}});return n=a,o=function(n){return t(e,r+1,i.concat([n]))},Array.prototype.concat.apply([],n.map(o))}}(e.map(y),0,[]))){let e=b(t);h.push({params:t,name:e,fn:r}),t.every(t=>!t.hasConversion)&&(u[e]=r)}}h.sort(M);let l=function(t,e,r){let i=t.map(t=>Y(t)?k(t.referToSelf.callback):I(t)?L(t.referTo.references,t.referTo.callback):t),n=Array(i.length).fill(!1),o=!0;for(;o;){o=!1;let t=!0;for(let s=0;s<i.length;++s){if(n[s])continue;let a=i[s];if(Y(a))i[s]=a.referToSelf.callback(r),i[s].referToSelf=a.referToSelf,n[s]=!0,t=!1;else if(I(a)){let r=function(t,e,r){let i;let n=[];for(i of t){let t=r[i];if("number"!=typeof t)throw TypeError('No definition for referenced signature "'+i+'"');if("function"!=typeof(t=e[t]))return!1;n.push(t)}return n}(a.referTo.references,i,e);r?(i[s]=a.referTo.callback.apply(this,r),i[s].referTo=a.referTo,n[s]=!0,t=!1):o=!0}}if(t&&o)throw SyntaxError("Circular reference detected in resolving typed.referTo")}return i}(a,u,tc);for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(u[o]=l[u[o]]);let d=[],f=new Map;for(o of h)f.has(o.name)||(o.fn=l[o.fn],d.push(o),f.set(o.name,o));let p=d[0]&&d[0].params.length<=2&&!x(d[0].params),m=d[1]&&d[1].params.length<=2&&!x(d[1].params),v=d[2]&&d[2].params.length<=2&&!x(d[2].params),g=d[3]&&d[3].params.length<=2&&!x(d[3].params),C=d[4]&&d[4].params.length<=2&&!x(d[4].params),E=d[5]&&d[5].params.length<=2&&!x(d[5].params);for(let t=0;t<d.length;++t)d[t].test=function(t){let e,r,i;if(x(t)){let r=(e=B(t).map(_)).length,i=_(F(t)),n=function(t){for(let e=r;e<t.length;e++)if(!i(t[e]))return!1;return!0};return function(t){for(let r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return n(t)&&t.length>=r+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(r=_(t[0]),function(t){return r(t[0])&&1===t.length}):2===t.length?(r=_(t[0]),i=_(t[1]),function(t){return r(t[0])&&i(t[1])&&2===t.length}):(e=t.map(_),function(t){for(let r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return t.length===e.length})}(d[t].params);let S=p?_(d[0].params[0]):e,A=m?_(d[1].params[0]):e,P=v?_(d[2].params[0]):e,D=g?_(d[3].params[0]):e,T=C?_(d[4].params[0]):e,U=E?_(d[5].params[0]):e,j=p?_(d[0].params[1]):e,z=m?_(d[1].params[1]):e,X=v?_(d[2].params[1]):e,J=g?_(d[3].params[1]):e,G=C?_(d[4].params[1]):e,H=E?_(d[5].params[1]):e;for(let t=0;t<d.length;++t)d[t].implementation=function(t,e){let r=e;if(t.some(t=>t.hasConversion)){let i=x(t),n=t.map(O);r=function(){let t=[],r=i?arguments.length-1:arguments.length;for(let e=0;e<r;e++)t[e]=n[e](arguments[e]);return i&&(t[r]=arguments[r].map(n[r])),e.apply(this,t)}}let i=r;if(x(t)){let e=t.length-1;i=function(){return r.apply(this,R(arguments,0,e).concat([R(arguments,e)]))}}return i}(d[t].params,d[t].fn);let V=p?d[0].implementation:r,q=m?d[1].implementation:r,W=v?d[2].implementation:r,Q=g?d[3].implementation:r,$=C?d[4].implementation:r,K=E?d[5].implementation:r,tt=p?d[0].params.length:-1,te=m?d[1].params.length:-1,tr=v?d[2].params.length:-1,ti=g?d[3].params.length:-1,tn=C?d[4].params.length:-1,to=E?d[5].params.length:-1,ts=p&&m&&v&&g&&C&&E?6:0,ta=d.length,tu=d.map(t=>t.test),th=d.map(t=>t.implementation),tl=function(){for(let t=ts;t<ta;t++)if(tu[t](arguments))return th[t].apply(this,arguments);return c.onMismatch(t,arguments,d)};function tc(t,e){return arguments.length===tt&&S(t)&&j(e)?V.apply(this,arguments):arguments.length===te&&A(t)&&z(e)?q.apply(this,arguments):arguments.length===tr&&P(t)&&X(e)?W.apply(this,arguments):arguments.length===ti&&D(t)&&J(e)?Q.apply(this,arguments):arguments.length===tn&&T(t)&&G(e)?$.apply(this,arguments):arguments.length===to&&U(t)&&H(e)?K.apply(this,arguments):tl.apply(this,arguments)}try{Object.defineProperty(tc,"name",{value:t})}catch(t){}return tc.signatures=u,tc._typedFunctionData={signatures:d,signatureMap:f},tc}(o||"",s)}).create=n,c.createCount=j.createCount,c.onMismatch=T,c.throwMismatchError=T,c.createError=A,c.clear=p,c.clearConversions=function(){let t;for(t of s)o.get(t).conversionsTo=[];l=0},c.addTypes=f,c._findType=d,c.referTo=function(){let t=B(arguments).map(t=>b(Z(t))),e=F(arguments);if("function"!=typeof e)throw TypeError("Callback function expected as last argument");return L(t,e)},c.referToSelf=k,c.convert=function(t,e){let r=d(e);if(r.test(t))return t;let i=r.conversionsTo;if(0===i.length)throw Error("There are no conversions to "+e+" defined.");for(let e=0;e<i.length;e++)if(d(i[e].from).test(t))return i[e].convert(t);throw Error("Cannot convert "+t+" to "+e)},c.findSignature=g,c.find=function(t,e,r){return g(t,e,r).implementation},c.isTypedFunction=v,c.warnAgainstDeprecatedThis=!0,c.addType=function(t,e){let r="any";!1!==e&&o.has("Object")&&(r="Object"),c.addTypes([t],r)},c.addConversion=function(t){z(t);let e=d(t.to);if(e.conversionsTo.every(function(e){return e.from!==t.from}))e.conversionsTo.push({from:t.from,convert:t.convert,index:l++});else throw Error('There is already a conversion from "'+t.from+'" to "'+e.name+'"')},c.addConversions=function(t){t.forEach(c.addConversion)},c.removeConversion=function(t){z(t);let e=d(t.to),r=function(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return t[r]}(e.conversionsTo,e=>e.from===t.from);if(!r)throw Error("Attempt to remove nonexistent conversion from "+t.from+" to "+t.to);if(r.convert!==t.convert)throw Error("Conversion to remove does not match existing conversion");let i=e.conversionsTo.indexOf(r);e.conversionsTo.splice(i,1)},c.resolve=function(t,e){if(!v(t))throw TypeError(i);let r=t._typedFunctionData.signatures;for(let t=0;t<r.length;++t)if(r[t].test(e))return r[t];return null},c}()}()},7632:function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,r){var n;return n=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==i(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return n}})},2110:function(t,e,r){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}r.d(e,{Z:function(){return i}})},1513:function(t,e,r){"use strict";r.d(e,{v:function(){return o}});var i=r(2110),n={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},o=function(t){if(t)throw Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(n)};(0,i.Z)(o,n,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]})},8183:function(t,e,r){"use strict";r.d(e,{O$v:function(){return h4},Zz9:function(){return h9},JfM:function(){return lg},Q3n:function(){return d4},iAi:function(){return le},MUK:function(){return dF},gmE:function(){return dR},cw7:function(){return ln},bZs:function(){return ly},doM:function(){return lo},wwJ:function(){return l9},y3G:function(){return ls},e6w:function(){return ll},Z0z:function(){return lc},PNl:function(){return ld},vNo:function(){return lx},HJh:function(){return fv},A7i:function(){return cf},fbc:function(){return fw},OvO:function(){return li},xOA:function(){return la},WJv:function(){return h7},OSG:function(){return lu},wcc:function(){return lm},WnP:function(){return lN},Khb:function(){return lS},__u:function(){return cC},C6L:function(){return lA},trc:function(){return cL},rcO:function(){return lP},KLC:function(){return cZ},IHx:function(){return db},scv:function(){return lD},xDy:function(){return fl},nnj:function(){return cx},R91:function(){return lM},PUJ:function(){return c_},lo8:function(){return lO},ZRM:function(){return c$},VfV:function(){return lT},z4N:function(){return lB},fvJ:function(){return dy},C80:function(){return lF},uzo:function(){return fA},_vz:function(){return f6},O7j:function(){return pb},edS:function(){return lR},Ly_:function(){return cE},hx9:function(){return dC},Pfe:function(){return lL},wKT:function(){return dZ},nNS:function(){return dx},Cl$:function(){return fP},tUn:function(){return f7},Rhk:function(){return fD},O72:function(){return lk},tjo:function(){return d_},eKn:function(){return cK},mDi:function(){return d0},_fe:function(){return pA},d9v:function(){return lI},$QP:function(){return fg},BjO:function(){return lY},d4C:function(){return cw},quX:function(){return dE},rn1:function(){return d1},cdM:function(){return dw},PYB:function(){return lU},ift:function(){return d2},zoF:function(){return c0},xk2:function(){return fM},ruJ:function(){return lj},O1K:function(){return pD},mCk:function(){return lz},f9Y:function(){return cN},oHe:function(){return lX},h6M:function(){return ck},JPg:function(){return fO},QXW:function(){return c1},JP7:function(){return pt},kCc:function(){return d3},QBQ:function(){return lJ},RhL:function(){return cS},NZC:function(){return c2},kOm:function(){return lG},zbp:function(){return dN},vZr:function(){return dS},Q8I:function(){return d5},dEt:function(){return fT},Ka3:function(){return c3},Hgg:function(){return dA},TE$:function(){return dP},csF:function(){return pe},QgA:function(){return c5},AKD:function(){return dD},yVo:function(){return c8},iOk:function(){return d8},qgo:function(){return fB},e:function(){return h6},dvW:function(){return lb},Gq_:function(){return py},dXo:function(){return fF},_G2:function(){return pr},iMQ:function(){return fR},DgJ:function(){return c4},kuq:function(){return lH},eZD:function(){return dM},qNN:function(){return lV},Qqt:function(){return lq},Ege:function(){return fL},t$B:function(){return lW},bLN:function(){return pi},Am2:function(){return fk},cIy:function(){return pC},kp_:function(){return fI},hXT:function(){return lQ},Oyo:function(){return lt},Vvs:function(){return pn},zG0:function(){return d9},xHg:function(){return c9},GWj:function(){return dO},Ed_:function(){return l$},WUZ:function(){return lK},Pj$:function(){return cI},Ltn:function(){return pM},yiU:function(){return fY},eOQ:function(){return pZ},thl:function(){return dT},mOi:function(){return l0},H9q:function(){return fU},QXX:function(){return po},HQL:function(){return fj},Hdk:function(){return c6},$v1:function(){return l1},_mT:function(){return dB},i:function(){return lr},yRu:function(){return c7},Sxn:function(){return fz},im:function(){return l2},KzB:function(){return d6},wfr:function(){return d7},JBn:function(){return fb},WSk:function(){return ps},QNt:function(){return ft},UaK:function(){return l3},i2d:function(){return cA},nMy:function(){return l5},kEn:function(){return cY},xPR:function(){return l8},e47:function(){return cP},Fr9:function(){return l4},mYz:function(){return px},$$$:function(){return fX},JvE:function(){return dt},TWx:function(){return dL},Cr4:function(){return de},uqG:function(){return fe},w57:function(){return dr},KF1:function(){return l6},cM7:function(){return dk},mvw:function(){return l7},Krr:function(){return fr},k3Q:function(){return ct},PUn:function(){return fJ},wtJ:function(){return di},ER9:function(){return dI},xly:function(){return fy},DU:function(){return pa},t6m:function(){return pU},UFs:function(){return pO},$nU:function(){return fG},oLv:function(){return pu},UID:function(){return ce},pIu:function(){return cU},ndY:function(){return dn},ZcA:function(){return cj},lPE:function(){return dY},Fp7:function(){return fi},J69:function(){return p_},C2o:function(){return pP},VV$:function(){return dU},wQq:function(){return dj},xJM:function(){return cz},ak$:function(){return fH},esS:function(){return ph},kEb:function(){return fV},n4B:function(){return pE},SJ_:function(){return pl},JpY:function(){return dz},cfl:function(){return cr},li8:function(){return fq},KOy:function(){return pF},ffD:function(){return ci},C7f:function(){return ds},$$R:function(){return dX},_A2:function(){return fW},Rxh:function(){return cn},uRn:function(){return cX},jfK:function(){return co},iUs:function(){return da},or:function(){return dJ},JeQ:function(){return dG},DW7:function(){return pc},Skb:function(){return lh},pi:function(){return lC},sDj:function(){return cs},mvk:function(){return fC},JaK:function(){return fQ},whQ:function(){return pw},gil:function(){return f$},kc5:function(){return pd},XAT:function(){return fK},oTb:function(){return pL},Qg6:function(){return pf},sQ3:function(){return fZ},S0v:function(){return ca},WVs:function(){return cJ},CxM:function(){return f0},qr:function(){return du},pAO:function(){return pN},TYM:function(){return f1},MXc:function(){return cu},Iyf:function(){return cD},w6H:function(){return fc},re:function(){return ch},vAu:function(){return f2},PHU:function(){return lZ},XLQ:function(){return cG},SIr:function(){return dh},nq0:function(){return dl},LdX:function(){return dH},U1s:function(){return pI},k8z:function(){return pR},NMM:function(){return dc},O7B:function(){return fd},rMB:function(){return f3},KO_:function(){return lf},U5j:function(){return pk},BEc:function(){return cl},Fbd:function(){return cM},ahj:function(){return f5},$ZK:function(){return fn},TVT:function(){return ff},Z41:function(){return fo},ff9:function(){return fx},TT1:function(){return fs},oNG:function(){return fp},ljT:function(){return fa},yk3:function(){return pp},V4s:function(){return fm},uyX:function(){return f_},Xxe:function(){return cc},O$l:function(){return cd},R_K:function(){return cO},dpJ:function(){return cH},cEy:function(){return dV},Nyh:function(){return dd},Sq_:function(){return fu},bBp:function(){return pm},DYV:function(){return fh},rVs:function(){return cT},bl5:function(){return f8},jLI:function(){return cp},_b3:function(){return cB},jXX:function(){return fE},h62:function(){return cm},L9e:function(){return cV},qoR:function(){return pT},yO5:function(){return f4},bAb:function(){return pv},Z_8:function(){return cv},P9L:function(){return dq},$XF:function(){return df},Hxc:function(){return cg},Smz:function(){return dW},rew:function(){return pY},ORZ:function(){return cb},AEp:function(){return cF},BZ_:function(){return lp},bej:function(){return f9},to:function(){return dp},g49:function(){return dQ},p4s:function(){return cq},kM2:function(){return cy},Gzl:function(){return l_},T8F:function(){return cR},uKN:function(){return lE},KPr:function(){return dm},bfT:function(){return pg},LDk:function(){return dv},bJ2:function(){return d$},tnB:function(){return fN},CAK:function(){return pS},i83:function(){return lv},Uud:function(){return lw},bGh:function(){return fS},NpV:function(){return cW},dlQ:function(){return dg},lls:function(){return cQ},Xcd:function(){return pB},kjZ:function(){return dK}});var i,n,o=r(1513),s="0123456789abcdef",a="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},l=!0,c="[DecimalError] ",d=c+"Invalid argument: ",f=c+"Precision limit exceeded",p=c+"crypto unavailable",m="[object Decimal]",v=Math.floor,g=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,C=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Z=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=a.length-1,_=u.length-1,E={toStringTag:m};function w(t){var e,r,i,n=t.length-1,o="",s=t[0];if(n>0){for(o+=s,e=1;e<n;e++)(r=7-(i=t[e]+"").length)&&(o+=R(r)),o+=i;(r=7-(i=(s=t[e])+"").length)&&(o+=R(r))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function N(t,e,r){if(t!==~~t||t<e||t>r)throw Error(d+t)}function S(t,e,r,i){var n,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=7,n=0):(n=Math.ceil((e+1)/7),e%=7),o=g(10,7-e),a=t[n]%o|0,null==i?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),s=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):s=(r<4&&a+1==o||r>3&&a+1==o/2)&&(t[n+1]/o/100|0)==g(10,e-2)-1||(a==o/2||0==a)&&(t[n+1]/o/100|0)==0:e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),s=(i||r<4)&&9999==a||!i&&r>3&&4999==a):s=((i||r<4)&&a+1==o||!i&&r>3&&a+1==o/2)&&(t[n+1]/o/1e3|0)==g(10,e-3)-1,s}function A(t,e,r){for(var i,n,o=[0],a=0,u=t.length;a<u;){for(n=o.length;n--;)o[n]*=e;for(o[0]+=s.indexOf(t.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(void 0===o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}E.absoluteValue=E.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),D(t)},E.ceil=function(){return D(new this.constructor(this),this.e+1,2)},E.clampedTo=E.clamp=function(t,e){var r=this.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(d+e);return 0>this.cmp(t)?t:this.cmp(e)>0?e:new r(this)},E.comparedTo=E.cmp=function(t){var e,r,i,n,o=this.d,s=(t=new this.constructor(t)).d,a=this.s,u=t.s;if(!o||!s)return a&&u?a!==u?a:o===s?0:!o^a<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?a:s[0]?-u:0;if(a!==u)return a;if(this.e!==t.e)return this.e>t.e^a<0?1:-1;for(e=0,r=(i=o.length)<(n=s.length)?i:n;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^a<0?1:-1;return i===n?0:i>n^a<0?1:-1},E.cosine=E.cos=function(){var t,e,r=this,i=r.constructor;return r.d?r.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(t,e){var r,i,n;if(e.isZero())return e;(i=e.d.length)<32?n=(1/J(4,r=Math.ceil(i/3))).toString():(r=16,n="2.3283064365386962890625e-10"),t.precision+=r,e=X(t,1,e.times(n),new t(1));for(var o=r;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}(i,G(i,r)),i.precision=t,i.rounding=e,D(2==n||3==n?r.neg():r,t,e,!0)):new i(1):new i(NaN)},E.cubeRoot=E.cbrt=function(){var t,e,r,i,n,o,s,a,u,h,c=this.constructor;if(!this.isFinite()||this.isZero())return new c(this);for(l=!1,(o=this.s*g(this.s*this,1/3))&&Math.abs(o)!=1/0?i=new c(o.toString()):(r=w(this.d),(o=((t=this.e)-r.length+1)%3)&&(r+=1==o||-2==o?"0":"00"),o=g(r,1/3),t=v((t+1)/3)-(t%3==(t<0?-1:2)),(i=new c(r=o==1/0?"5e"+t:(r=o.toExponential()).slice(0,r.indexOf("e")+1)+t)).s=this.s),s=(t=c.precision)+3;;)if(i=P((h=(u=(a=i).times(a).times(a)).plus(this)).plus(this).times(a),h.plus(u),s+2,1),w(a.d).slice(0,s)===(r=w(i.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(n||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(D(i,t+1,1),e=!i.times(i).times(i).eq(this));break}if(!n&&(D(a,t+1,0),a.times(a).times(a).eq(this))){i=a;break}s+=4,n=1}return l=!0,D(i,t,c.rounding,e)},E.decimalPlaces=E.dp=function(){var t,e=this.d,r=NaN;if(e){if(r=((t=e.length-1)-v(this.e/7))*7,t=e[t])for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r},E.dividedBy=E.div=function(t){return P(this,new this.constructor(t))},E.dividedToIntegerBy=E.divToInt=function(t){var e=this.constructor;return D(P(this,new e(t),0,1,1),e.precision,e.rounding)},E.equals=E.eq=function(t){return 0===this.cmp(t)},E.floor=function(){return D(new this.constructor(this),this.e+1,3)},E.greaterThan=E.gt=function(t){return this.cmp(t)>0},E.greaterThanOrEqualTo=E.gte=function(t){var e=this.cmp(t);return 1==e||0===e},E.hyperbolicCosine=E.cosh=function(){var t,e,r,i,n,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;r=s.precision,i=s.rounding,s.precision=r+Math.max(o.e,o.sd())+4,s.rounding=1,(n=o.d.length)<32?e=(1/J(4,t=Math.ceil(n/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=X(s,1,o.times(e),new s(1),!0);for(var u,h=t,l=new s(8);h--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return D(o,s.precision=r,s.rounding=i,!0)},E.hyperbolicSine=E.sinh=function(){var t,e,r,i,n=this,o=n.constructor;if(!n.isFinite()||n.isZero())return new o(n);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(n.e,n.sd())+4,o.rounding=1,(i=n.d.length)<3)n=X(o,2,n,n,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,n=X(o,2,n=n.times(1/J(5,t)),n,!0);for(var s,a=new o(5),u=new o(16),h=new o(20);t--;)s=n.times(n),n=n.times(a.plus(s.times(u.times(s).plus(h))))}return o.precision=e,o.rounding=r,D(n,e,r,!0)},E.hyperbolicTangent=E.tanh=function(){var t,e,r=this.constructor;return this.isFinite()?this.isZero()?new r(this):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,P(this.sinh(),this.cosh(),r.precision=t,r.rounding=e)):new r(this.s)},E.inverseCosine=E.acos=function(){var t,e=this,r=e.constructor,i=e.abs().cmp(1),n=r.precision,o=r.rounding;return -1!==i?0===i?e.isNeg()?B(r,n,o):new r(0):new r(NaN):e.isZero()?B(r,n+4,o).times(.5):(r.precision=n+6,r.rounding=1,e=e.asin(),t=B(r,n+4,o).times(.5),r.precision=n,r.rounding=o,t.minus(e))},E.inverseHyperbolicCosine=E.acosh=function(){var t,e,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,l=!1,r=r.times(r).minus(1).sqrt().plus(r),l=!0,i.precision=t,i.rounding=e,r.ln()):new i(r)},E.inverseHyperbolicSine=E.asinh=function(){var t,e,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,l=!1,r=r.times(r).plus(1).sqrt().plus(r),l=!0,i.precision=t,i.rounding=e,r.ln())},E.inverseHyperbolicTangent=E.atanh=function(){var t,e,r,i,n=this,o=n.constructor;return n.isFinite()?n.e>=0?new o(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(t=o.precision,e=o.rounding,Math.max(i=n.sd(),t)<-(2*n.e)-1)?D(new o(n),t,e,!0):(o.precision=r=i-n.e,n=P(n.plus(1),new o(1).minus(n),r+t,1),o.precision=t+4,o.rounding=1,n=n.ln(),o.precision=t,o.rounding=e,n.times(.5)):new o(NaN)},E.inverseSine=E.asin=function(){var t,e,r,i,n=this,o=n.constructor;return n.isZero()?new o(n):(e=n.abs().cmp(1),r=o.precision,i=o.rounding,-1!==e)?0===e?((t=B(o,r+4,i).times(.5)).s=n.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,n=n.div(new o(1).minus(n.times(n)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=i,n.times(2))},E.inverseTangent=E.atan=function(){var t,e,r,i,n,o,s,a,u,h=this,c=h.constructor,d=c.precision,f=c.rounding;if(h.isFinite()){if(h.isZero())return new c(h);if(h.abs().eq(1)&&d+4<=_)return(s=B(c,d+4,f).times(.25)).s=h.s,s}else{if(!h.s)return new c(NaN);if(d+4<=_)return(s=B(c,d+4,f).times(.5)).s=h.s,s}for(c.precision=a=d+10,c.rounding=1,t=r=Math.min(28,a/7+2|0);t;--t)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(l=!1,e=Math.ceil(a/7),i=1,u=h.times(h),s=new c(h),n=h;-1!==t;)if(n=n.times(u),o=s.minus(n.div(i+=2)),n=n.times(u),void 0!==(s=o.plus(n.div(i+=2))).d[e])for(t=e;s.d[t]===o.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),l=!0,D(s,c.precision=d,c.rounding=f,!0)},E.isFinite=function(){return!!this.d},E.isInteger=E.isInt=function(){return!!this.d&&v(this.e/7)>this.d.length-2},E.isNaN=function(){return!this.s},E.isNegative=E.isNeg=function(){return this.s<0},E.isPositive=E.isPos=function(){return this.s>0},E.isZero=function(){return!!this.d&&0===this.d[0]},E.lessThan=E.lt=function(t){return 0>this.cmp(t)},E.lessThanOrEqualTo=E.lte=function(t){return 1>this.cmp(t)},E.logarithm=E.log=function(t){var e,r,i,n,o,s,a,u=this.constructor,h=u.precision,c=u.rounding;if(null==t)t=new u(10),e=!0;else{if(r=(t=new u(t)).d,t.s<0||!r||!r[0]||t.eq(1))return new u(NaN);e=t.eq(10)}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new u(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(e){if(r.length>1)n=!0;else{for(i=r[0];i%10==0;)i/=10;n=1!==i}}if(l=!1,S((a=P(U(this,s=h+5),e?T(u,s+10):U(t,s),s,1)).d,i=h,c))do if(s+=10,a=P(U(this,s),e?T(u,s+10):U(t,s),s,1),!n){+w(a.d).slice(i+1,i+15)+1==1e14&&(a=D(a,h+1,0));break}while(S(a.d,i+=10,c));return l=!0,D(a,h,c)},E.minus=E.sub=function(t){var e,r,i,n,o,s,a,u,h,c,d,f,p=this.constructor;if(t=new p(t),!this.d||!t.d)return this.s&&t.s?this.d?t.s=-t.s:t=new p(t.d||this.s!==t.s?this:NaN):t=new p(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.plus(t);if(h=this.d,f=t.d,a=p.precision,u=p.rounding,!h[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!h[0])return new p(3===u?-0:0);t=new p(this)}return l?D(t,a,u):t}if(r=v(t.e/7),c=v(this.e/7),h=h.slice(),o=c-r){for((d=o<0)?(e=h,o=-o,s=f.length):(e=f,r=c,s=h.length),o>(i=Math.max(Math.ceil(a/7),s)+2)&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for((d=(i=h.length)<(s=f.length))&&(s=i),i=0;i<s;i++)if(h[i]!=f[i]){d=h[i]<f[i];break}o=0}for(d&&(e=h,h=f,f=e,t.s=-t.s),s=h.length,i=f.length-s;i>0;--i)h[s++]=0;for(i=f.length;i>o;){if(h[--i]<f[i]){for(n=i;n&&0===h[--n];)h[n]=1e7-1;--h[n],h[i]+=1e7}h[i]-=f[i]}for(;0===h[--s];)h.pop();for(;0===h[0];h.shift())--r;return h[0]?(t.d=h,t.e=O(h,r),l?D(t,a,u):t):new p(3===u?-0:0)},E.modulo=E.mod=function(t){var e,r=this.constructor;return(t=new r(t),this.d&&t.s&&(!t.d||t.d[0]))?t.d&&(!this.d||this.d[0])?(l=!1,9==r.modulo?(e=P(this,t.abs(),0,3,1),e.s*=t.s):e=P(this,t,0,r.modulo,1),e=e.times(t),l=!0,this.minus(e)):D(new r(this),r.precision,r.rounding):new r(NaN)},E.naturalExponential=E.exp=function(){return Y(this)},E.naturalLogarithm=E.ln=function(){return U(this)},E.negated=E.neg=function(){var t=new this.constructor(this);return t.s=-t.s,D(t)},E.plus=E.add=function(t){var e,r,i,n,o,s,a,u,h,c,d=this.constructor;if(t=new d(t),!this.d||!t.d)return this.s&&t.s?this.d||(t=new d(t.d||this.s===t.s?this:NaN)):t=new d(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.minus(t);if(h=this.d,c=t.d,a=d.precision,u=d.rounding,!h[0]||!c[0])return c[0]||(t=new d(this)),l?D(t,a,u):t;if(o=v(this.e/7),i=v(t.e/7),h=h.slice(),n=o-i){for(n<0?(r=h,n=-n,s=c.length):(r=c,i=o,s=h.length),n>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(n=s,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for((s=h.length)-(n=c.length)<0&&(n=s,r=c,c=h,h=r),e=0;n;)e=(h[--n]=h[n]+c[n]+e)/1e7|0,h[n]%=1e7;for(e&&(h.unshift(e),++i),s=h.length;0==h[--s];)h.pop();return t.d=h,t.e=O(h,i),l?D(t,a,u):t},E.precision=E.sd=function(t){var e;if(void 0!==t&&!!t!==t&&1!==t&&0!==t)throw Error(d+t);return this.d?(e=F(this.d),t&&this.e+1>e&&(e=this.e+1)):e=NaN,e},E.round=function(){var t=this.constructor;return D(new t(this),this.e+1,t.rounding)},E.sine=E.sin=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+7,i.rounding=1,r=function(t,e){var r,i=e.d.length;if(i<3)return e.isZero()?e:X(t,2,e,e);r=(r=1.4*Math.sqrt(i))>16?16:0|r,e=X(t,2,e=e.times(1/J(5,r)),e);for(var n,o=new t(5),s=new t(16),a=new t(20);r--;)n=e.times(e),e=e.times(o.plus(n.times(s.times(n).minus(a))));return e}(i,G(i,r)),i.precision=t,i.rounding=e,D(n>2?r.neg():r,t,e,!0)):new i(NaN)},E.squareRoot=E.sqrt=function(){var t,e,r,i,n,o,s=this.d,a=this.e,u=this.s,h=this.constructor;if(1!==u||!s||!s[0])return new h(!u||u<0&&(!s||s[0])?NaN:s?this:1/0);for(l=!1,0==(u=Math.sqrt(+this))||u==1/0?(((e=w(s)).length+a)%2==0&&(e+="0"),u=Math.sqrt(e),a=v((a+1)/2)-(a<0||a%2),i=new h(e=u==1/0?"5e"+a:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+a)):i=new h(u.toString()),r=(a=h.precision)+3;;)if(i=(o=i).plus(P(this,o,r+2,1)).times(.5),w(o.d).slice(0,r)===(e=w(i.d)).slice(0,r)){if("9999"!=(e=e.slice(r-3,r+1))&&(n||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(D(i,a+1,1),t=!i.times(i).eq(this));break}if(!n&&(D(o,a+1,0),o.times(o).eq(this))){i=o;break}r+=4,n=1}return l=!0,D(i,a,h.rounding,t)},E.tangent=E.tan=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(r=r.sin()).s=1,r=P(r,new i(1).minus(r.times(r)).sqrt(),t+10,0),i.precision=t,i.rounding=e,D(2==n||4==n?r.neg():r,t,e,!0)):new i(NaN)},E.times=E.mul=function(t){var e,r,i,n,o,s,a,u,h,c=this.constructor,d=this.d,f=(t=new c(t)).d;if(t.s*=this.s,!d||!d[0]||!f||!f[0])return new c(t.s&&(!d||d[0]||f)&&(!f||f[0]||d)?d&&f?0*t.s:t.s/0:NaN);for(r=v(this.e/7)+v(t.e/7),(u=d.length)<(h=f.length)&&(o=d,d=f,f=o,s=u,u=h,h=s),o=[],i=s=u+h;i--;)o.push(0);for(i=h;--i>=0;){for(e=0,n=u+i;n>i;)a=o[n]+f[i]*d[n-i-1]+e,o[n--]=a%1e7|0,e=a/1e7|0;o[n]=(o[n]+e)%1e7|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=O(o,r),l?D(t,c.precision,c.rounding):t},E.toBinary=function(t,e){return H(this,2,t,e)},E.toDecimalPlaces=E.toDP=function(t,e){var r=this,i=r.constructor;return(r=new i(r),void 0===t)?r:(N(t,0,1e9),void 0===e?e=i.rounding:N(e,0,8),D(r,t+r.e+1,e))},E.toExponential=function(t,e){var r,i=this,n=i.constructor;return void 0===t?r=M(i,!0):(N(t,0,1e9),void 0===e?e=n.rounding:N(e,0,8),r=M(i=D(new n(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+r:r},E.toFixed=function(t,e){var r,i,n=this.constructor;return void 0===t?r=M(this):(N(t,0,1e9),void 0===e?e=n.rounding:N(e,0,8),r=M(i=D(new n(this),t+this.e+1,e),!1,t+i.e+1)),this.isNeg()&&!this.isZero()?"-"+r:r},E.toFraction=function(t){var e,r,i,n,o,s,a,u,h,c,f,p,m=this.d,v=this.constructor;if(!m)return new v(this);if(h=r=new v(1),i=u=new v(0),s=(o=(e=new v(i)).e=F(m)-this.e-1)%7,e.d[0]=g(10,s<0?7+s:s),null==t)t=o>0?e:h;else{if(!(a=new v(t)).isInt()||a.lt(h))throw Error(d+a);t=a.gt(e)?o>0?e:h:a}for(l=!1,a=new v(w(m)),c=v.precision,v.precision=o=14*m.length;f=P(a,e,0,1,1),1!=(n=r.plus(f.times(i))).cmp(t);)r=i,i=n,n=h,h=u.plus(f.times(n)),u=n,n=e,e=a.minus(f.times(n)),a=n;return n=P(t.minus(r),i,0,1,1),u=u.plus(n.times(h)),r=r.plus(n.times(i)),u.s=h.s=this.s,p=1>P(h,i,o,1).minus(this).abs().cmp(P(u,r,o,1).minus(this).abs())?[h,i]:[u,r],v.precision=c,l=!0,p},E.toHexadecimal=E.toHex=function(t,e){return H(this,16,t,e)},E.toNearest=function(t,e){var r=this,i=r.constructor;if(r=new i(r),null==t){if(!r.d)return r;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:N(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(l=!1,r=P(r,t,0,e,1).times(t),l=!0,D(r)):(t.s=r.s,r=t),r},E.toNumber=function(){return+this},E.toOctal=function(t,e){return H(this,8,t,e)},E.toPower=E.pow=function(t){var e,r,i,n,o,s,a=this,u=a.constructor,h=+(t=new u(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new u(g(+a,h));if((a=new u(a)).eq(1))return a;if(i=u.precision,o=u.rounding,t.eq(1))return D(a,i,o);if((e=v(t.e/7))>=t.d.length-1&&(r=h<0?-h:h)<=9007199254740991)return n=L(u,a,r,i),t.s<0?new u(1).div(n):D(n,i,o);if((s=a.s)<0){if(e<t.d.length-1)return new u(NaN);if((1&t.d[e])==0&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(e=0!=(r=g(+a,h))&&isFinite(r)?new u(r+"").e:v(h*(Math.log("0."+w(a.d))/Math.LN10+a.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(l=!1,u.rounding=a.s=1,r=Math.min(12,(e+"").length),(n=Y(t.times(U(a,i+r)),i)).d&&S((n=D(n,i+5,1)).d,i,o)&&(e=i+10,+w((n=D(Y(t.times(U(a,e+r)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(n=D(n,i+1,0))),n.s=s,l=!0,u.rounding=o,D(n,i,o))},E.toPrecision=function(t,e){var r,i=this,n=i.constructor;return void 0===t?r=M(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(N(t,1,1e9),void 0===e?e=n.rounding:N(e,0,8),r=M(i=D(new n(i),t,e),t<=i.e||i.e<=n.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+r:r},E.toSignificantDigits=E.toSD=function(t,e){var r=this.constructor;return void 0===t?(t=r.precision,e=r.rounding):(N(t,1,1e9),void 0===e?e=r.rounding:N(e,0,8)),D(new r(this),t,e)},E.toString=function(){var t=this.constructor,e=M(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()&&!this.isZero()?"-"+e:e},E.truncated=E.trunc=function(){return D(new this.constructor(this),this.e+1,1)},E.valueOf=E.toJSON=function(){var t=this.constructor,e=M(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()?"-"+e:e};var P=function(){function t(t,e,r){var i,n=0,o=t.length;for(t=t.slice();o--;)i=t[o]*e+n,t[o]=i%r|0,n=i/r|0;return n&&t.unshift(n),t}function e(t,e,r,i){var n,o;if(r!=i)o=r>i?1:-1;else for(n=o=0;n<r;n++)if(t[n]!=e[n]){o=t[n]>e[n]?1:-1;break}return o}function r(t,e,r,i){for(var n=0;r--;)t[r]-=n,n=t[r]<e[r]?1:0,t[r]=n*i+t[r]-e[r];for(;!t[0]&&t.length>1;)t.shift()}return function(n,o,s,a,u,h){var l,c,d,f,p,m,g,b,y,C,Z,x,_,E,w,N,S,A,P,M,O=n.constructor,T=n.s==o.s?1:-1,B=n.d,F=o.d;if(!B||!B[0]||!F||!F[0])return new O(n.s&&o.s&&(B?!F||B[0]!=F[0]:F)?B&&0==B[0]||!F?0*T:T/0:NaN);for(h?(p=1,c=n.e-o.e):(h=1e7,p=7,c=v(n.e/p)-v(o.e/p)),P=F.length,S=B.length,C=(y=new O(T)).d=[],d=0;F[d]==(B[d]||0);d++);if(F[d]>(B[d]||0)&&c--,null==s?(E=s=O.precision,a=O.rounding):E=u?s+(n.e-o.e)+1:s,E<0)C.push(1),m=!0;else{if(E=E/p+2|0,d=0,1==P){for(f=0,F=F[0],E++;(d<S||f)&&E--;d++)w=f*h+(B[d]||0),C[d]=w/F|0,f=w%F|0;m=f||d<S}else{for((f=h/(F[0]+1)|0)>1&&(F=t(F,f,h),B=t(B,f,h),P=F.length,S=B.length),N=P,x=(Z=B.slice(0,P)).length;x<P;)Z[x++]=0;(M=F.slice()).unshift(0),A=F[0],F[1]>=h/2&&++A;do f=0,(l=e(F,Z,P,x))<0?(_=Z[0],P!=x&&(_=_*h+(Z[1]||0)),(f=_/A|0)>1?(f>=h&&(f=h-1),b=(g=t(F,f,h)).length,x=Z.length,1==(l=e(g,Z,b,x))&&(f--,r(g,P<b?M:F,b,h))):(0==f&&(l=f=1),g=F.slice()),(b=g.length)<x&&g.unshift(0),r(Z,g,x,h),-1==l&&(x=Z.length,(l=e(F,Z,P,x))<1&&(f++,r(Z,P<x?M:F,x,h))),x=Z.length):0===l&&(f++,Z=[0]),C[d++]=f,l&&Z[0]?Z[x++]=B[N]||0:(Z=[B[N]],x=1);while((N++<S||void 0!==Z[0])&&E--);m=void 0!==Z[0]}C[0]||C.shift()}if(1==p)y.e=c,i=m;else{for(d=1,f=C[0];f>=10;f/=10)d++;y.e=d+c*p-1,D(y,u?s+y.e+1:s,a,m)}return y}}();function D(t,e,r,i){var n,o,s,a,u,h,c,d,f,p=t.constructor;i:if(null!=e){if(!(d=t.d))return t;for(n=1,a=d[0];a>=10;a/=10)n++;if((o=e-n)<0)o+=7,s=e,u=(c=d[f=0])/g(10,n-s-1)%10|0;else if((f=Math.ceil((o+1)/7))>=(a=d.length)){if(i){for(;a++<=f;)d.push(0);c=u=0,n=1,o%=7,s=o-7+1}else break i}else{for(n=1,c=a=d[f];a>=10;a/=10)n++;o%=7,u=(s=o-7+n)<0?0:c/g(10,n-s-1)%10|0}if(i=i||e<0||void 0!==d[f+1]||(s<0?c:c%g(10,n-s-1)),h=r<4?(u||i)&&(0==r||r==(t.s<0?3:2)):u>5||5==u&&(4==r||i||6==r&&(o>0?s>0?c/g(10,n-s):0:d[f-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,h?(e-=t.e+1,d[0]=g(10,(7-e%7)%7),t.e=-e||0):d[0]=t.e=0,t;if(0==o?(d.length=f,a=1,f--):(d.length=f+1,a=g(10,7-o),d[f]=s>0?(c/g(10,n-s)%g(10,s)|0)*a:0),h)for(;;){if(0==f){for(o=1,s=d[0];s>=10;s/=10)o++;for(s=d[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,1e7==d[0]&&(d[0]=1));break}if(d[f]+=a,1e7!=d[f])break;d[f--]=0,a=1}for(o=d.length;0===d[--o];)d.pop()}return l&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function M(t,e,r){if(!t.isFinite())return j(t);var i,n=t.e,o=w(t.d),s=o.length;return e?(r&&(i=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+R(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):n<0?(o="0."+R(-n-1)+o,r&&(i=r-s)>0&&(o+=R(i))):n>=s?(o+=R(n+1-s),r&&(i=r-n-1)>0&&(o=o+"."+R(i))):((i=n+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),r&&(i=r-s)>0&&(n+1===s&&(o+="."),o+=R(i))),o}function O(t,e){var r=t[0];for(e*=7;r>=10;r/=10)e++;return e}function T(t,e,r){if(e>x)throw l=!0,r&&(t.precision=r),Error(f);return D(new t(a),e,1,!0)}function B(t,e,r){if(e>_)throw Error(f);return D(new t(u),e,r,!0)}function F(t){var e=t.length-1,r=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function R(t){for(var e="";t--;)e+="0";return e}function L(t,e,r,i){var n,o=new t(1),s=Math.ceil(i/7+4);for(l=!1;;){if(r%2&&V((o=o.times(e)).d,s)&&(n=!0),0===(r=v(r/2))){r=o.d.length-1,n&&0===o.d[r]&&++o.d[r];break}V((e=e.times(e)).d,s)}return l=!0,o}function k(t){return 1&t.d[t.d.length-1]}function I(t,e,r){for(var i,n=new t(e[0]),o=0;++o<e.length;)if((i=new t(e[o])).s)n[r](i)&&(n=i);else{n=i;break}return n}function Y(t,e){var r,i,n,o,s,a,u,h=0,c=0,d=0,f=t.constructor,p=f.rounding,m=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(null==e?(l=!1,u=m):u=e,a=new f(.03125);t.e>-2;)t=t.times(a),d+=5;for(u+=i=Math.log(g(2,d))/Math.LN10*2+5|0,r=o=s=new f(1),f.precision=u;;){if(o=D(o.times(t),u,1),r=r.times(++c),w((a=s.plus(P(o,r,u,1))).d).slice(0,u)===w(s.d).slice(0,u)){for(n=d;n--;)s=D(s.times(s),u,1);if(null!=e)return f.precision=m,s;if(!(h<3&&S(s.d,u-i,p,h)))return D(s,f.precision=m,p,l=!0);f.precision=u+=10,r=o=a=new f(1),c=0,h++}s=a}}function U(t,e){var r,i,n,o,s,a,u,h,c,d,f,p=1,m=t,v=m.d,g=m.constructor,b=g.rounding,y=g.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==e?(l=!1,c=y):c=e,g.precision=c+=10,i=(r=w(v)).charAt(0),!(15e14>Math.abs(o=m.e)))return h=T(g,c+2,y).times(o+""),m=U(new g(i+"."+r.slice(1)),c-10).plus(h),g.precision=y,null==e?D(m,y,b,l=!0):m;for(;i<7&&1!=i||1==i&&r.charAt(1)>3;)i=(r=w((m=m.times(t)).d)).charAt(0),p++;for(o=m.e,i>1?(m=new g("0."+r),o++):m=new g(i+"."+r.slice(1)),d=m,u=s=m=P(m.minus(1),m.plus(1),c,1),f=D(m.times(m),c,1),n=3;;){if(s=D(s.times(f),c,1),w((h=u.plus(P(s,new g(n),c,1))).d).slice(0,c)===w(u.d).slice(0,c)){if(u=u.times(2),0!==o&&(u=u.plus(T(g,c+2,y).times(o+""))),u=P(u,new g(p),c,1),null!=e)return g.precision=y,u;if(!S(u.d,c-10,b,a))return D(u,g.precision=y,b,l=!0);g.precision=c+=10,h=s=m=P(d.minus(1),d.plus(1),c,1),f=D(m.times(m),c,1),n=a=1}u=h,n+=2}}function j(t){return String(t.s*t.s/0)}function z(t,e){var r,i,n;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;48===e.charCodeAt(i);i++);for(n=e.length;48===e.charCodeAt(n-1);--n);if(e=e.slice(i,n)){if(n-=i,t.e=r=r-i-1,t.d=[],i=(r+1)%7,r<0&&(i+=7),i<n){for(i&&t.d.push(+e.slice(0,i)),n-=7;i<n;)t.d.push(+e.slice(i,i+=7));i=7-(e=e.slice(i)).length}else i-=n;for(;i--;)e+="0";t.d.push(+e),l&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function X(t,e,r,i,n){var o,s,a,u,h=t.precision,c=Math.ceil(h/7);for(l=!1,u=r.times(r),a=new t(i);;){if(s=P(a.times(u),new t(e++*e++),h,1),a=n?i.plus(s):i.minus(s),i=P(s.times(u),new t(e++*e++),h,1),void 0!==(s=a.plus(i)).d[c]){for(o=c;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=i,i=s,s=o}return l=!0,s.d.length=c+1,s}function J(t,e){for(var r=t;--e;)r*=t;return r}function G(t,e){var r,i=e.s<0,o=B(t,t.precision,1),s=o.times(.5);if((e=e.abs()).lte(s))return n=i?4:1,e;if((r=e.divToInt(o)).isZero())n=i?3:2;else{if((e=e.minus(r.times(o))).lte(s))return n=k(r)?i?2:3:i?4:1,e;n=k(r)?i?1:4:i?3:2}return e.minus(o).abs()}function H(t,e,r,n){var o,a,u,h,l,c,d,f,p,m=t.constructor,v=void 0!==r;if(v?(N(r,1,1e9),void 0===n?n=m.rounding:N(n,0,8)):(r=m.precision,n=m.rounding),t.isFinite()){for(u=(d=M(t)).indexOf("."),v?(o=2,16==e?r=4*r-3:8==e&&(r=3*r-2)):o=e,u>=0&&(d=d.replace(".",""),(p=new m(1)).e=d.length-u,p.d=A(M(p),10,o),p.e=p.d.length),a=l=(f=A(d,10,o)).length;0==f[--l];)f.pop();if(f[0]){if(u<0?a--:((t=new m(t)).d=f,t.e=a,f=(t=P(t,p,r,n,0,o)).d,a=t.e,c=i),u=f[r],h=o/2,c=c||void 0!==f[r+1],c=n<4?(void 0!==u||c)&&(0===n||n===(t.s<0?3:2)):u>h||u===h&&(4===n||c||6===n&&1&f[r-1]||n===(t.s<0?8:7)),f.length=r,c)for(;++f[--r]>o-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(u=0,d="";u<l;u++)d+=s.charAt(f[u]);if(v){if(l>1){if(16==e||8==e){for(u=16==e?4:3,--l;l%u;l++)d+="0";for(l=(f=A(d,o,e)).length;!f[l-1];--l);for(u=1,d="1.";u<l;u++)d+=s.charAt(f[u])}else d=d.charAt(0)+"."+d.slice(1)}d=d+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)d="0"+d;d="0."+d}else if(++a>l)for(a-=l;a--;)d+="0";else a<l&&(d=d.slice(0,a)+"."+d.slice(a))}else d=v?"0p+0":"0";d=(16==e?"0x":2==e?"0b":8==e?"0o":"")+d}else d=j(t);return t.s<0?"-"+d:d}function V(t,e){if(t.length>e)return t.length=e,!0}function q(t){return new this(t).abs()}function W(t){return new this(t).acos()}function Q(t){return new this(t).acosh()}function $(t,e){return new this(t).plus(e)}function K(t){return new this(t).asin()}function tt(t){return new this(t).asinh()}function te(t){return new this(t).atan()}function tr(t){return new this(t).atanh()}function ti(t,e){t=new this(t),e=new this(e);var r,i=this.precision,n=this.rounding,o=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(r=e.s<0?B(this,i,n):new this(0)).s=t.s:!t.d||e.isZero()?(r=B(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,r=this.atan(P(t,e,o,1)),e=B(this,o,1),this.precision=i,this.rounding=n,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(P(t,e,o,1)):(r=B(this,o,1).times(e.s>0?.25:.75)).s=t.s:r=new this(NaN),r}function tn(t){return new this(t).cbrt()}function to(t){return D(t=new this(t),t.e+1,2)}function ts(t,e,r){return new this(t).clamp(e,r)}function ta(t){if(!t||"object"!=typeof t)throw Error(c+"Object expected");var e,r,i,n=!0===t.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],n&&(this[r]=h[r]),void 0!==(i=t[r])){if(v(i)===i&&i>=o[e+1]&&i<=o[e+2])this[r]=i;else throw Error(d+r+": "+i)}if(r="crypto",n&&(this[r]=h[r]),void 0!==(i=t[r])){if(!0===i||!1===i||0===i||1===i){if(i){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(p)}else this[r]=!1}else throw Error(d+r+": "+i)}return this}function tu(t){return new this(t).cos()}function th(t){return new this(t).cosh()}function tl(t,e){return new this(t).div(e)}function tc(t){return new this(t).exp()}function td(t){return D(t=new this(t),t.e+1,3)}function tf(){var t,e,r=new this(0);for(t=0,l=!1;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return l=!0,new this(1/0);r=e}return l=!0,r.sqrt()}function tp(t){return t instanceof tF||t&&t.toStringTag===m||!1}function tm(t){return new this(t).ln()}function tv(t,e){return new this(t).log(e)}function tg(t){return new this(t).log(2)}function tb(t){return new this(t).log(10)}function ty(){return I(this,arguments,"lt")}function tC(){return I(this,arguments,"gt")}function tZ(t,e){return new this(t).mod(e)}function tx(t,e){return new this(t).mul(e)}function t_(t,e){return new this(t).pow(e)}function tE(t){var e,r,i,n,o=0,s=new this(1),a=[];if(void 0===t?t=this.precision:N(t,1,1e9),i=Math.ceil(t/7),this.crypto){if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)(n=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=n%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)(n=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(n%1e7),o+=4);o=i/4}else throw Error(p)}else for(;o<i;)a[o++]=1e7*Math.random()|0;for(i=a[--o],t%=7,i&&t&&(n=g(10,7-t),a[o]=(i/n|0)*n);0===a[o];o--)a.pop();if(o<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=7)a.shift();for(i=1,n=a[0];n>=10;n/=10)i++;i<7&&(r-=7-i)}return s.e=r,s.d=a,s}function tw(t){return D(t=new this(t),t.e+1,this.rounding)}function tN(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function tS(t){return new this(t).sin()}function tA(t){return new this(t).sinh()}function tP(t){return new this(t).sqrt()}function tD(t,e){return new this(t).sub(e)}function tM(){var t=0,e=arguments,r=new this(e[t]);for(l=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return l=!0,D(r,this.precision,this.rounding)}function tO(t){return new this(t).tan()}function tT(t){return new this(t).tanh()}function tB(t){return D(t=new this(t),t.e+1,1)}E[Symbol.for("nodejs.util.inspect.custom")]=E.toString,E[Symbol.toStringTag]="Decimal";var tF=E.constructor=function t(e){var r,i,n;function o(t){var e,r,i;if(!(this instanceof o))return new o(t);if(this.constructor=o,tp(t)){this.s=t.s,l?!t.d||t.e>o.maxE?(this.e=NaN,this.d=null):t.e<o.minE?(this.e=0,this.d=[0]):(this.e=t.e,this.d=t.d.slice()):(this.e=t.e,this.d=t.d?t.d.slice():t.d);return}if("number"==(i=typeof t)){if(0===t){this.s=1/t<0?-1:1,this.e=0,this.d=[0];return}if(t<0?(t=-t,this.s=-1):this.s=1,t===~~t&&t<1e7){for(e=0,r=t;r>=10;r/=10)e++;l?e>o.maxE?(this.e=NaN,this.d=null):e<o.minE?(this.e=0,this.d=[0]):(this.e=e,this.d=[t]):(this.e=e,this.d=[t]);return}if(0*t!=0){t||(this.s=NaN),this.e=NaN,this.d=null;return}return z(this,t.toString())}if("string"!==i)throw Error(d+t);return 45===(r=t.charCodeAt(0))?(t=t.slice(1),this.s=-1):(43===r&&(t=t.slice(1)),this.s=1),Z.test(t)?z(this,t):function(t,e){var r,i,n,o,s,a,u,h,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Z.test(e))return z(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(y.test(e))r=16,e=e.toLowerCase();else if(b.test(e))r=2;else if(C.test(e))r=8;else throw Error(d+e);for((o=e.search(/p/i))>0?(u=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),s=(o=e.indexOf("."))>=0,i=t.constructor,s&&(o=(a=(e=e.replace(".","")).length)-o,n=L(i,new i(r),o,2*o)),o=c=(h=A(e,r,1e7)).length-1;0===h[o];--o)h.pop();return o<0?new i(0*t.s):(t.e=O(h,c),t.d=h,l=!1,s&&(t=P(t,n,4*a)),u&&(t=t.times(54>Math.abs(u)?g(2,u):tF.pow(2,u))),l=!0,t)}(this,t)}if(o.prototype=E,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=ta,o.clone=t,o.isDecimal=tp,o.abs=q,o.acos=W,o.acosh=Q,o.add=$,o.asin=K,o.asinh=tt,o.atan=te,o.atanh=tr,o.atan2=ti,o.cbrt=tn,o.ceil=to,o.clamp=ts,o.cos=tu,o.cosh=th,o.div=tl,o.exp=tc,o.floor=td,o.hypot=tf,o.ln=tm,o.log=tv,o.log10=tb,o.log2=tg,o.max=ty,o.min=tC,o.mod=tZ,o.mul=tx,o.pow=t_,o.random=tE,o.round=tw,o.sign=tN,o.sin=tS,o.sinh=tA,o.sqrt=tP,o.sub=tD,o.sum=tM,o.tan=tO,o.tanh=tT,o.trunc=tB,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=0,n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];r<n.length;)e.hasOwnProperty(i=n[r++])||(e[i]=this[i]);return o.config(e),o}(h);a=new tF(a),u=new tF(u);var tR=r(5284),tL=(0,tR.d5)("BigNumber",["?on","config"],t=>{var{on:e,config:r}=t,i=tF.clone({precision:r.precision,modulo:tF.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(t){return new i(t.value)},e&&e("config",function(t,e){t.precision!==e.precision&&i.config({precision:t.precision})}),i},{isClass:!0}),tk=r(1239),tI=r(9737),tY=r(7694),tU=(0,tR.d5)("Complex",[],()=>(Object.defineProperty(tk,"name",{value:"Complex"}),tk.prototype.constructor=tk,tk.prototype.type="Complex",tk.prototype.isComplex=!0,tk.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},tk.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},tk.prototype.format=function(t){var e=this.im,r=this.re,i=(0,tI.WU)(this.re,t),n=(0,tI.WU)(this.im,t),o=(0,tY.hj)(t)?t:t?t.precision:null;if(null!==o){var s=Math.pow(10,-o);Math.abs(r/e)<s&&(r=0),Math.abs(e/r)<s&&(e=0)}return 0===e?i:0===r?1===e?"i":-1===e?"-i":n+"i":e<0?-1===e?i+" - i":i+" - "+n.substring(1)+"i":1===e?i+" + i":i+" + "+n+"i"},tk.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return tk(e);throw TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],i=arguments[1];if((0,tY.hj)(r)){if((0,tY.wr)(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),(0,tY.hj)(i))return new tk({r,phi:i});throw TypeError("Phi is not a number nor an angle unit.")}throw TypeError("Radius r is not a number.");default:throw SyntaxError("Wrong number of arguments in function fromPolar")}},tk.prototype.valueOf=tk.prototype.toString,tk.fromJSON=function(t){return new tk(t)},tk.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},tk),{isClass:!0});function tj(t){var{hasher:e,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,e=null==e?JSON.stringify:e,function i(){if("object"!=typeof i.cache){var n,o,s,a,u,h,l;i.cache={values:new Map,lru:(n=r||Number.POSITIVE_INFINITY,o=0,s=1,a=Object.create(null),u=Object.create(null),h=0,l=function(t){var e=u[t];if(e&&(delete a[e],delete u[t],--o,s===e)){if(!o){h=0,s=1;return}for(;!Object.prototype.hasOwnProperty.call(a,++s););}},n=Math.abs(n),{hit:function(t){var e=u[t],r=++h;if(a[r]=t,u[t]=r,!e){if(++o<=n)return;return l(t=a[s]),t}if(delete a[e],s===e)for(;!Object.prototype.hasOwnProperty.call(a,++s););},delete:l,clear:function(){o=h=0,s=1,a=Object.create(null),u=Object.create(null)}})}}for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f=e(c);if(i.cache.values.has(f))return i.cache.lru.hit(f),i.cache.values.get(f);var p=t.apply(t,c);return i.cache.values.set(f,p),i.cache.values.delete(i.cache.lru.hit(f)),p}}function tz(t){return Object.keys(t.signatures||{}).reduce(function(t,e){return Math.max(t,(e.match(/,/g)||[]).length+1)},-1)}var tX=tj(function(t){return new t(1).exp()},{hasher:tV}),tJ=tj(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:tV}),tG=tj(function(t){return t.acos(-1)},{hasher:tV}),tH=tj(function(t){return tG(t).times(2)},{hasher:tV});function tV(t){return t[0].precision}var tq=Math.PI,tW=2*Math.PI,tQ=Math.E,t$=(0,tR.d5)("true",[],()=>!0),tK=(0,tR.d5)("false",[],()=>!1),t0=(0,tR.d5)("null",[],()=>null),t1=eo("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1/0):1/0}),t2=eo("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(NaN):NaN}),t3=eo("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?tG(r):tq}),t5=eo("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?tH(r):tW}),t8=eo("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?tX(r):tQ}),t4=eo("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?tJ(r):1.618033988749895}),t9=eo("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(2).ln():Math.LN2}),t6=eo("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(10).ln():Math.LN10}),t7=eo("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1).div(new r(2).ln()):Math.LOG2E}),et=eo("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1).div(new r(10).ln()):Math.LOG10E}),ee=eo("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r("0.5").sqrt():Math.SQRT1_2}),er=eo("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(2).sqrt():Math.SQRT2}),ei=eo("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),en=(0,tR.d5)("version",[],()=>"12.3.2");function eo(t,e,r){return(0,tR.d5)(t,e,r,{recreateOnConfigChange:!0})}var es=e2("speedOfLight","299792458","m s^-1"),ea=e2("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),eu=e2("planckConstant","6.62607015e-34","J s"),eh=e2("reducedPlanckConstant","1.0545718176461565e-34","J s"),el=e2("magneticConstant","1.25663706212e-6","N A^-2"),ec=e2("electricConstant","8.8541878128e-12","F m^-1"),ed=e2("vacuumImpedance","376.730313667","ohm"),ef=e2("coulomb","8.987551792261171e9","N m^2 C^-2"),ep=e2("elementaryCharge","1.602176634e-19","C"),em=e2("bohrMagneton","9.2740100783e-24","J T^-1"),ev=e2("conductanceQuantum","7.748091729863649e-5","S"),eg=e2("inverseConductanceQuantum","12906.403729652257","ohm"),eb=e2("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ey=e2("nuclearMagneton","5.0507837461e-27","J T^-1"),eC=e2("klitzing","25812.807459304513","ohm"),eZ=e2("bohrRadius","5.29177210903e-11","m"),ex=e2("classicalElectronRadius","2.8179403262e-15","m"),e_=e2("electronMass","9.1093837015e-31","kg"),eE=e2("fermiCoupling","1.1663787e-5","GeV^-2"),ew=e3("fineStructure",.0072973525693),eN=e2("hartreeEnergy","4.3597447222071e-18","J"),eS=e2("protonMass","1.67262192369e-27","kg"),eA=e2("deuteronMass","3.3435830926e-27","kg"),eP=e2("neutronMass","1.6749271613e-27","kg"),eD=e2("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),eM=e2("rydberg","10973731.568160","m^-1"),eO=e2("thomsonCrossSection","6.6524587321e-29","m^2"),eT=e3("weakMixingAngle",.2229),eB=e3("efimovFactor",22.7),eF=e2("atomicMass","1.66053906660e-27","kg"),eR=e2("avogadro","6.02214076e23","mol^-1"),eL=e2("boltzmann","1.380649e-23","J K^-1"),ek=e2("faraday","96485.33212331001","C mol^-1"),eI=e2("firstRadiation","3.7417718521927573e-16","W m^2"),eY=e2("loschmidt","2.686780111798444e25","m^-3"),eU=e2("gasConstant","8.31446261815324","J K^-1 mol^-1"),ej=e2("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),ez=e2("molarVolume","0.022413969545014137","m^3 mol^-1"),eX=e3("sackurTetrode",-1.16487052358),eJ=e2("secondRadiation","0.014387768775039337","m K"),eG=e2("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),eH=e2("wienDisplacement","2.897771955e-3","m K"),eV=e2("molarMass","0.99999999965e-3","kg mol^-1"),eq=e2("molarMassC12","11.9999999958e-3","kg mol^-1"),eW=e2("gravity","9.80665","m s^-2"),eQ=e2("planckLength","1.616255e-35","m"),e$=e2("planckMass","2.176435e-8","kg"),eK=e2("planckTime","5.391245e-44","s"),e0=e2("planckCharge","1.87554603778e-18","C"),e1=e2("planckTemperature","1.416785e+32","K");function e2(t,e,r){return(0,tR.d5)(t,["config","Unit","BigNumber"],t=>{var{config:i,Unit:n,BigNumber:o}=t,s=new n("BigNumber"===i.number?new o(e):parseFloat(e),r);return s.fixPrefix=!0,s})}function e3(t,e){return(0,tR.d5)(t,["config","BigNumber"],t=>{var{config:r,BigNumber:i}=t;return"BigNumber"===r.number?new i(e):e})}var e5=r(383),e8=(0,tR.d5)("Fraction",[],()=>(Object.defineProperty(e5,"name",{value:"Fraction"}),e5.prototype.constructor=e5,e5.prototype.type="Fraction",e5.prototype.isFraction=!0,e5.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},e5.fromJSON=function(t){return new e5(t)},e5),{isClass:!0}),e4=(0,tR.d5)("Matrix",[],()=>{function t(){if(!(this instanceof t))throw SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,r){throw Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,r){throw Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0}),e9=(0,tR.d5)("Range",[],()=>{function t(e,r,i){if(!(this instanceof t))throw SyntaxError("Constructor must be called with the new operator");var n=null!=e,o=null!=r,s=null!=i;if(n){if((0,tY.l9)(e))e=e.toNumber();else if("number"!=typeof e)throw TypeError("Parameter start must be a number")}if(o){if((0,tY.l9)(r))r=r.toNumber();else if("number"!=typeof r)throw TypeError("Parameter end must be a number")}if(s){if((0,tY.l9)(i))i=i.toNumber();else if("number"!=typeof i)throw TypeError("Parameter step must be a number")}this.start=n?parseFloat(e):0,this.end=o?parseFloat(r):0,this.step=s?parseFloat(i):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if("string"!=typeof e)return null;var r=e.split(":").map(function(t){return parseFloat(t)});if(r.some(function(t){return isNaN(t)}))return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var t=0,e=this.start,r=this.step,i=this.end-e;return(0,tI.Xx)(r)===(0,tI.Xx)(i)?t=Math.ceil(i/r):0===i&&(t=0),isNaN(t)&&(t=0),[t]},t.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},t.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},t.prototype.forEach=function(t){var e=this.start,r=this.step,i=this.end,n=0;if(r>0)for(;e<i;)t(e,[n],this),e+=r,n++;else if(r<0)for(;e>i;)t(e,[n],this),e+=r,n++},t.prototype.map=function(t){var e=[];return this.forEach(function(r,i,n){e[i[0]]=t(r,i,n)}),e},t.prototype.toArray=function(){var t=[];return this.forEach(function(e,r){t[r[0]]=e}),t},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(t){var e=(0,tI.WU)(this.start,t);return 1!==this.step&&(e+=":"+(0,tI.WU)(this.step,t)),e+=":"+(0,tI.WU)(this.end,t)},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),e6=(0,tR.d5)("ResultSet",[],()=>{function t(e){if(!(this instanceof t))throw SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0}),e7=r(5836),rt=r(9790),re=r(6992),rr=r(2885),ri=(0,tR.d5)("DenseMatrix",["Matrix"],t=>{var{Matrix:e}=t;function r(t,e){if(!(this instanceof r))throw SyntaxError("Constructor must be called with the new operator");if(e&&!(0,tY.HD)(e))throw Error("Invalid datatype: "+e);if((0,tY.SW)(t))"DenseMatrix"===t.type?(this._data=(0,re.d9)(t._data),this._size=(0,re.d9)(t._size)):(this._data=t.toArray(),this._size=t.size()),this._datatype=e||t._datatype;else if(t&&(0,tY.kJ)(t.data)&&(0,tY.kJ)(t.size))this._data=t.data,this._size=t.size,(0,e7.Gu)(this._data,this._size),this._datatype=e||t.datatype;else if((0,tY.kJ)(t))this._data=function t(e){return(0,tY.SW)(e)?t(e.valueOf()):(0,tY.kJ)(e)?e.map(t):e}(t),this._size=(0,e7.aJ)(this._data),(0,e7.Gu)(this._data,this._size),this._datatype=e;else if(t)throw TypeError("Unsupported type of data ("+(0,tY.kM)(t)+")");else this._data=[],this._size=[0],this._datatype=e}function i(t,e,r){if(0===e.length){for(var i=t._data;(0,tY.kJ)(i);)i=i[0];return i}return t._size=e.slice(0),t._data=(0,e7.SI)(t._data,t._size,r),t}function n(t,e,r){for(var n=t._size.slice(0),o=!1;n.length<e.length;)n.push(0),o=!0;for(var s=0,a=e.length;s<a;s++)e[s]>n[s]&&(n[s]=e[s],o=!0);o&&i(t,n,r)}return r.prototype=new e,r.prototype.createDenseMatrix=function(t,e){return new r(t,e)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return(0,e7.$q)(this._data,tY.kM)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.subset=function(t,e,i){switch(arguments.length){case 1:return function(t,e){if(!(0,tY.dh)(e))throw TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var i=e.size();if(i.length!==t._size.length)throw new rr.m(i.length,t._size.length);for(var n=e.min(),o=e.max(),s=0,a=t._size.length;s<a;s++)(0,e7.Ls)(n[s],t._size[s]),(0,e7.Ls)(o[s],t._size[s]);return new r(function t(e,r,i,n){var o=n===i-1,s=r.dimension(n);return o?s.map(function(t){return(0,e7.Ls)(t,e.length),e[t]}).valueOf():s.map(function(o){return(0,e7.Ls)(o,e.length),t(e[o],r,i,n+1)}).valueOf()}(t._data,e,i.length,0),t._datatype)}(this,t);case 2:case 3:return function(t,e,r,i){if(!e||!0!==e.isIndex)throw TypeError("Invalid index");var o,s=e.size(),a=e.isScalar();if((0,tY.SW)(r)?(o=r.size(),r=r.valueOf()):o=(0,e7.aJ)(r),a){if(0!==o.length)throw TypeError("Scalar expected");t.set(e.min(),r,i)}else{if(!(0,re.J5)(o,s))try{r=0===o.length?(0,e7.UF)([r],s):(0,e7.UF)(r,s),o=(0,e7.aJ)(r)}catch(t){}if(s.length<t._size.length)throw new rr.m(s.length,t._size.length,"<");if(o.length<s.length){for(var u=0,h=0;1===s[u]&&1===o[u];)u++;for(;1===s[u];)h++,u++;r=(0,e7.f4)(r,s.length,h,o)}if(!(0,re.J5)(s,o))throw new rr.m(s,o,">");n(t,e.max().map(function(t){return t+1}),i);var l=s.length;(function t(e,r,i,n,o){var s=o===n-1,a=r.dimension(o);s?a.forEach(function(t,r){(0,e7.Ls)(t),e[t]=i[r[0]]}):a.forEach(function(s,a){(0,e7.Ls)(s),t(e[s],r,i[a[0]],n,o+1)})})(t._data,e,r,l,0)}return t}(this,t,e,i);default:throw SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!(0,tY.kJ)(t))throw TypeError("Array expected");if(t.length!==this._size.length)throw new rr.m(t.length,this._size.length);for(var e=0;e<t.length;e++)(0,e7.Ls)(t[e],this._size[e]);for(var r=this._data,i=0,n=t.length;i<n;i++){var o=t[i];(0,e7.Ls)(o,r.length),r=r[o]}return r},r.prototype.set=function(t,e,r){if(!(0,tY.kJ)(t))throw TypeError("Array expected");if(t.length<this._size.length)throw new rr.m(t.length,this._size.length,"<");n(this,t.map(function(t){return t+1}),r);var i,o,s,a=this._data;for(i=0,o=t.length-1;i<o;i++)s=t[i],(0,e7.Ls)(s,a.length),a=a[s];return s=t[t.length-1],(0,e7.Ls)(s,a.length),a[s]=e,this},r.prototype.resize=function(t,e,r){if(!(0,tY.uZ)(t))throw TypeError("Array or Matrix expected");var n=t.valueOf().map(t=>Array.isArray(t)&&1===t.length?t[0]:t);return i(r?this.clone():this,n,e)},r.prototype.reshape=function(t,e){var r=e?this.clone():this;r._data=(0,e7.XL)(r._data,t);var i=r._size.reduce((t,e)=>t*e);return r._size=(0,e7.eu)(t,i),r},r.prototype.clone=function(){return new r({data:(0,re.d9)(this._data),size:(0,re.d9)(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t){var e=this,i=tz(t),n=function r(n,o){return(0,tY.kJ)(n)?n.map(function(t,e){return r(t,o.concat(e))}):1===i?t(n):2===i?t(n,o):t(n,o,e)}(this._data,[]),o=void 0!==this._datatype?(0,e7.$q)(n,tY.kM):void 0;return new r(n,o)},r.prototype.forEach=function(t){var e=this;!function r(i,n){(0,tY.kJ)(i)?i.forEach(function(t,e){r(t,n.concat(e))}):t(i,n,e)}(this._data,[])},r.prototype[Symbol.iterator]=function*(){var t=function* t(e,r){if((0,tY.kJ)(e))for(var i=0;i<e.length;i++)yield*t(e[i],r.concat(i));else yield{value:e,index:r}};yield*t(this._data,[])},r.prototype.rows=function(){var t=[];if(2!==this.size().length)throw TypeError("Rows can only be returned for a 2D matrix.");for(var e of this._data)t.push(new r([e],this._datatype));return t},r.prototype.columns=function(){var t=this,e=[],i=this.size();if(2!==i.length)throw TypeError("Rows can only be returned for a 2D matrix.");for(var n=this._data,o=function(i){var o=n.map(t=>[t[i]]);e.push(new r(o,t._datatype))},s=0;s<i[1];s++)o(s);return e},r.prototype.toArray=function(){return(0,re.d9)(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(t){return(0,rt.WU)(this._data,t)},r.prototype.toString=function(){return(0,rt.WU)(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if((0,tY.l9)(t)&&(t=t.toNumber()),!(0,tY.hj)(t)||!(0,tI.U)(t))throw TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,i=t<0?-t:0,n=Math.min(this._size[0]-i,this._size[1]-e),o=[],s=0;s<n;s++)o[s]=this._data[s+i][s+e];return new r({data:o,size:[n],datatype:this._datatype})},r.diagonal=function(t,e,i,n){if(!(0,tY.kJ)(t))throw TypeError("Array expected, size parameter");if(2!==t.length)throw Error("Only two dimensions matrix are supported");if(t=t.map(function(t){if((0,tY.l9)(t)&&(t=t.toNumber()),!(0,tY.hj)(t)||!(0,tI.U)(t)||t<1)throw Error("Size values must be positive integers");return t}),i){if((0,tY.l9)(i)&&(i=i.toNumber()),!(0,tY.hj)(i)||!(0,tI.U)(i))throw TypeError("The parameter k must be an integer number")}else i=0;var o,s=i>0?i:0,a=i<0?-i:0,u=t[0],h=t[1],l=Math.min(u-a,h-s);if((0,tY.kJ)(e)){if(e.length!==l)throw Error("Invalid value array length");o=function(t){return e[t]}}else if((0,tY.SW)(e)){var c=e.size();if(1!==c.length||c[0]!==l)throw Error("Invalid matrix length");o=function(t){return e.get([t])}}else o=function(){return e};n||(n=(0,tY.l9)(o(0))?o(0).mul(0):0);var d=[];if(t.length>0){d=(0,e7.SI)(d,t,n);for(var f=0;f<l;f++)d[f+a][f+s]=o(f)}return new r({data:d,size:[u,h]})},r.fromJSON=function(t){return new r(t)},r.prototype.swapRows=function(t,e){if(!(0,tY.hj)(t)||!(0,tI.U)(t)||!(0,tY.hj)(e)||!(0,tI.U)(e))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");return(0,e7.Ls)(t,this._size[0]),(0,e7.Ls)(e,this._size[0]),r._swapRows(t,e,this._data),this},r._swapRows=function(t,e,r){var i=r[t];r[t]=r[e],r[e]=i},r},{isClass:!0}),rn=(0,tR.d5)("replacer",[],()=>function(t,e){return"number"==typeof e&&(!isFinite(e)||isNaN(e))?{mathjs:"number",value:String(e)}:e}),ro=r(7425),rs=r(2187),ra=function(){return ra=ro.create,ro},ru=(0,tR.d5)("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(t){var{BigNumber:e,Complex:r,DenseMatrix:i,Fraction:n}=t,o=ra();return o.clear(),o.addTypes([{name:"number",test:tY.hj},{name:"Complex",test:tY.Mc},{name:"BigNumber",test:tY.l9},{name:"Fraction",test:tY.yQ},{name:"Unit",test:tY.wr},{name:"identifier",test:t=>tY.HD&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(t)},{name:"string",test:tY.HD},{name:"Chain",test:tY.qg},{name:"Array",test:tY.kJ},{name:"Matrix",test:tY.SW},{name:"DenseMatrix",test:tY.jH},{name:"SparseMatrix",test:tY.sA},{name:"Range",test:tY.bR},{name:"Index",test:tY.dh},{name:"boolean",test:tY.jn},{name:"ResultSet",test:tY.cB},{name:"Help",test:tY.x1},{name:"function",test:tY.mf},{name:"Date",test:tY.J_},{name:"RegExp",test:tY.Kj},{name:"null",test:tY.Ft},{name:"undefined",test:tY.o8},{name:"AccessorNode",test:tY.Yz},{name:"ArrayNode",test:tY.j0},{name:"AssignmentNode",test:tY.Bp},{name:"BlockNode",test:tY.zh},{name:"ConditionalNode",test:tY.tS},{name:"ConstantNode",test:tY.nu},{name:"FunctionNode",test:tY.VO},{name:"FunctionAssignmentNode",test:tY.l7},{name:"IndexNode",test:tY.Cl},{name:"Node",test:tY.UG},{name:"ObjectNode",test:tY.Lr},{name:"OperatorNode",test:tY.bV},{name:"ParenthesisNode",test:tY.Ig},{name:"RangeNode",test:tY.ex},{name:"RelationalNode",test:tY.Zi},{name:"SymbolNode",test:tY.FG},{name:"Map",test:rs._N},{name:"Object",test:tY.Kn}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(t){if(e||rh(t),(0,tI.nz)(t)>15)throw TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return r||rl(t),new r(t,0)}},{from:"BigNumber",to:"Complex",convert:function(t){return r||rl(t),new r(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return r||rl(t),new r(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){n||rc(t);var e=new n(t);if(e.valueOf()!==t)throw TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||rh(t);try{return new e(t)}catch(e){throw Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){n||rc(t);try{return new n(t)}catch(e){throw Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){r||rl(t);try{return new r(t)}catch(e){throw Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||rh(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return n||rc(t),new n(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return i||function(){throw Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}]),o.onMismatch=(t,e,r)=>{var i=o.createError(t,e,r);if(["wrongType","mismatch"].includes(i.data.category)&&1===e.length&&(0,tY.uZ)(e[0])&&r.some(t=>!t.params.includes(","))){var n=TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw n.data=i.data,n}throw i},o.onMismatch=(t,e,r)=>{var i=o.createError(t,e,r);if(["wrongType","mismatch"].includes(i.data.category)&&1===e.length&&(0,tY.uZ)(e[0])&&r.some(t=>!t.params.includes(","))){var n=TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw n.data=i.data,n}throw i},o});function rh(t){throw Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function rl(t){throw Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function rc(t){throw Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var rd=r(2248),rf="number",rp="number, number";function rm(t){return Math.abs(t)}function rv(t,e){return t+e}function rg(t,e){return t-e}function rb(t,e){return t*e}function ry(t){return-t}function rC(t){return t}function rZ(t){return(0,tI.eK)(t)}function rx(t){return t*t*t}function r_(t){return Math.exp(t)}function rE(t){return(0,tI.t$)(t)}function rw(t,e){if(!(0,tI.U)(t)||!(0,tI.U)(e))throw Error("Parameters in function lcm must be integer numbers");if(0===t||0===e)return 0;for(var r,i=t*e;0!==e;)e=t%(r=e),t=r;return Math.abs(i/t)}function rN(t){return(0,tI.mv)(t)}function rS(t){return(0,tI.k3)(t)}function rA(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=e<0;if(r&&(e=-e),0===e)throw Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!=1)throw Error("Root must be odd when a is negative.");if(0===t)return r?1/0:0;if(!isFinite(t))return r?0:t;var i=Math.pow(Math.abs(t),1/e);return i=t<0?-i:i,r?1/i:i}function rP(t){return(0,tI.Xx)(t)}function rD(t){return t*t}function rM(t,e){var r,i,n,o=0,s=1,a=1,u=0;if(!(0,tI.U)(t)||!(0,tI.U)(e))throw Error("Parameters in function xgcd must be integer numbers");for(;e;)i=Math.floor(t/e),n=t-i*e,r=o,o=s-i*o,s=r,r=a,a=u-i*a,u=r,t=e,e=n;return t<0?[-t,-s,-u]:[t,t?s:0,u]}function rO(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}function rT(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(0,tI.U)(e)||e<0||e>15)throw Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat((0,tI.FH)(t,e))}rm.signature=rf,rv.signature=rp,rg.signature=rp,rb.signature=rp,ry.signature=rf,rC.signature=rf,rZ.signature=rf,rx.signature=rf,r_.signature=rf,rE.signature=rf,rw.signature=rp,rN.signature=rf,rS.signature=rf,rP.signature=rf,rD.signature=rf,rM.signature=rp,rO.signature=rp;var rB="unaryPlus",rF=(0,tR.d5)(rB,["typed","config","BigNumber"],t=>{var{typed:e,config:r,BigNumber:i}=t;return e(rB,{number:rC,Complex:function(t){return t},BigNumber:function(t){return t},Fraction:function(t){return t},Unit:function(t){return t.clone()},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),"boolean | string":function(t){return"BigNumber"===r.number?new i(+t):+t}})}),rR=(0,tR.d5)("abs",["typed"],t=>{var{typed:e}=t;return e("abs",{number:rm,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0))})}),rL="acos",rk=(0,tR.d5)(rL,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(rL,{number:function(t){return t>=-1&&t<=1||r.predictable?Math.acos(t):new i(t,0).acos()},Complex:function(t){return t.acos()},BigNumber:function(t){return t.acos()}})}),rI="number";function rY(t){return(0,tI.__)(t)}function rU(t){return Math.atan(1/t)}function rj(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}function rz(t){return Math.asin(1/t)}function rX(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}function rJ(t){return Math.acos(1/t)}function rG(t){var e=1/t;return Math.log(Math.sqrt(e*e-1)+e)}function rH(t){return(0,tI.Vf)(t)}function rV(t){return(0,tI.C8)(t)}function rq(t){return 1/Math.tan(t)}function rW(t){var e=Math.exp(2*t);return(e+1)/(e-1)}function rQ(t){return 1/Math.sin(t)}function r$(t){return 0===t?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*(0,tI.Xx)(t)}function rK(t){return 1/Math.cos(t)}function r0(t){return 2/(Math.exp(t)+Math.exp(-t))}function r1(t){return(0,tI.R_)(t)}rY.signature=rI,rU.signature=rI,rj.signature=rI,rz.signature=rI,rX.signature=rI,rJ.signature=rI,rG.signature=rI,rH.signature=rI,rV.signature=rI,rq.signature=rI,rW.signature=rI,rQ.signature=rI,r$.signature=rI,rK.signature=rI,r0.signature=rI,r1.signature=rI;var r2="acot",r3=(0,tR.d5)(r2,["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e(r2,{number:rU,Complex:function(t){return t.acot()},BigNumber:function(t){return new r(1).div(t).atan()}})}),r5="acsc",r8=(0,tR.d5)(r5,["typed","config","Complex","BigNumber"],t=>{var{typed:e,config:r,Complex:i,BigNumber:n}=t;return e(r5,{number:function(t){return t<=-1||t>=1||r.predictable?rz(t):new i(t,0).acsc()},Complex:function(t){return t.acsc()},BigNumber:function(t){return new n(1).div(t).asin()}})}),r4="addScalar",r9=(0,tR.d5)(r4,["typed"],t=>{var{typed:e}=t;return e(r4,{"number, number":rv,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(null===r.value||void 0===r.value)throw Error("Parameter x contains a unit with undefined value");if(null===i.value||void 0===i.value)throw Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw Error("Units do not match");var n=r.clone();return n.value=e.find(t,[n.valueType(),i.valueType()])(n.value,i.value),n.fixPrefix=!1,n})})}),r6=(0,tR.d5)("arg",["typed"],t=>{var{typed:e}=t;return e("arg",{number:function(t){return Math.atan2(0,t)},BigNumber:function(t){return t.constructor.atan2(0,t)},Complex:function(t){return t.arg()},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),r7="asech",it=(0,tR.d5)(r7,["typed","config","Complex","BigNumber"],t=>{var{typed:e,config:r,Complex:i,BigNumber:n}=t;return e(r7,{number:function(t){if(t<=1&&t>=-1||r.predictable){var e=1/t;return e>0||r.predictable?rG(t):new i(Math.log(Math.sqrt(e*e-1)-e),Math.PI)}return new i(t,0).asech()},Complex:function(t){return t.asech()},BigNumber:function(t){return new n(1).div(t).acosh()}})}),ie=(0,tR.d5)("asinh",["typed"],t=>{var{typed:e}=t;return e("asinh",{number:rH,Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()}})}),ir=(0,tR.d5)("atan",["typed"],t=>{var{typed:e}=t;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})}),ii="atanh",io=(0,tR.d5)(ii,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(ii,{number:function(t){return t<=1&&t>=-1||r.predictable?rV(t):new i(t,0).atanh()},Complex:function(t){return t.atanh()},BigNumber:function(t){return t.atanh()}})}),is=(0,tR.d5)("bignumber",["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(t){return new r(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var i=e[2],n=r(e[1]),o=new r(2).pow(Number(i));if(n.gt(o.sub(1)))throw SyntaxError('String "'.concat(t,'" is out of range'));var s=new r(2).pow(Number(i)-1);return n.gte(s)?n.sub(o):n}return new r(t)},BigNumber:function(t){return t},Unit:e.referToSelf(t=>e=>{var r=e.clone();return r.value=t(e.value),r}),Fraction:function(t){return new r(t.n).div(t.d).times(t.s)},null:function(t){return new r(0)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),ia=r(8385),iu=r(4189),ih="bitNot",il=(0,tR.d5)(ih,["typed"],t=>{var{typed:e}=t;return e(ih,{number:iu.NA,BigNumber:ia.Xc,"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),ic="boolean",id=(0,tR.d5)(ic,["typed"],t=>{var{typed:e}=t;return e(ic,{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},null:function(t){return!1},BigNumber:function(t){return!t.isZero()},string:function(t){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;var r=Number(t);if(""!==t&&!isNaN(r))return!!r;throw Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),ip="clone",im=(0,tR.d5)(ip,["typed"],t=>{var{typed:e}=t;return e(ip,{any:re.d9})});function iv(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return iv(t,r)*iv(r+1,e)}function ig(t,e){if(!(0,tI.U)(t)||t<0||!(0,tI.U)(e)||e<0)throw TypeError("Positive integer value expected in function combinations");if(e>t)throw TypeError("k must be less than or equal to n");for(var r=t-e,i=1,n=e<r?r+1:e+1,o=2,s=e<r?e:r,a=n;a<=t;++a)for(i*=a;o<=s&&i%o==0;)i/=o,++o;return o<=s&&(i/=iv(o,s)),i}ig.signature="number, number";var ib="combinations",iy=(0,tR.d5)(ib,["typed"],t=>{var{typed:e}=t;return e(ib,{"number, number":ig,"BigNumber, BigNumber":function(t,e){var r,i,n=t.constructor,o=t.minus(e),s=new n(1);if(!iC(t)||!iC(e))throw TypeError("Positive integer value expected in function combinations");if(e.gt(t))throw TypeError("k must be less than n in function combinations");if(r=s,e.lt(o))for(i=s;i.lte(o);i=i.plus(s))r=r.times(e.plus(i)).dividedBy(i);else for(i=s;i.lte(e);i=i.plus(s))r=r.times(o.plus(i)).dividedBy(i);return r}})});function iC(t){return t.isInteger()&&t.gte(0)}var iZ=(0,tR.d5)("complex",["typed","Complex"],t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(t){return new r(t,0)},"number, number":function(t,e){return new r(t,e)},"BigNumber, BigNumber":function(t,e){return new r(t.toNumber(),e.toNumber())},Fraction:function(t){return new r(t.valueOf(),0)},Complex:function(t){return t.clone()},string:function(t){return r(t)},null:function(t){return r(0)},Object:function(t){if("re"in t&&"im"in t)return new r(t.re,t.im);if("r"in t&&"phi"in t||"abs"in t&&"arg"in t)return new r(t);throw Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),ix="conj",i_=(0,tR.d5)(ix,["typed"],t=>{var{typed:e}=t;return e(ix,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),iE=(0,tR.d5)("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)})}}),iw=(0,tR.d5)("cos",["typed"],t=>{var{typed:e}=t,r=iE({typed:e});return e("cos",{number:Math.cos,"Complex | BigNumber":t=>t.cos()},r)}),iN=(0,tR.d5)("cot",["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t,i=iE({typed:e});return e("cot",{number:rq,Complex:t=>t.cot(),BigNumber:t=>new r(1).div(t.tan())},i)}),iS=(0,tR.d5)("csc",["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t,i=iE({typed:e});return e("csc",{number:rQ,Complex:t=>t.csc(),BigNumber:t=>new r(1).div(t.sin())},i)}),iA="cube",iP=(0,tR.d5)(iA,["typed"],t=>{var{typed:e}=t;return e(iA,{number:rx,Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},Unit:function(t){return t.pow(3)}})});function iD(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var i=t.minus(e).abs();if(i.isZero())return!0;var n=t.constructor.max(t.abs(),e.abs());return i.lte(n.times(r))}return!1}var iM=(0,tR.d5)("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),iO="equalScalar",iT=(0,tR.d5)(iO,["typed","config"],t=>{var{typed:e,config:r}=t,i=iM({typed:e});return e(iO,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return(0,tI.RI)(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||iD(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){var i;return i=r.epsilon,(0,tI.RI)(t.re,e.re,i)&&(0,tI.RI)(t.im,e.im,i)}},i)});(0,tR.d5)(iO,["typed","config"],t=>{var{typed:e,config:r}=t;return e(iO,{"number, number":function(t,e){return(0,tI.RI)(t,e,r.epsilon)}})});var iB=(0,tR.d5)("erf",["typed"],t=>{var{typed:e}=t;return e("name",{number:function(t){var e=Math.abs(t);return e>=iI?(0,tI.Xx)(t):e<=iF?(0,tI.Xx)(t)*function(t){var e,r=t*t,i=iL[0][4]*r,n=r;for(e=0;e<3;e+=1)i=(i+iL[0][e])*r,n=(n+ik[0][e])*r;return t*(i+iL[0][3])/(n+ik[0][3])}(e):e<=4?(0,tI.Xx)(t)*(1-function(t){var e,r=iL[1][8]*t,i=t;for(e=0;e<7;e+=1)r=(r+iL[1][e])*t,i=(i+ik[1][e])*t;var n=(r+iL[1][7])/(i+ik[1][7]),o=parseInt(16*t)/16;return Math.exp(-o*o)*Math.exp(-((t-o)*(t+o)))*n}(e)):(0,tI.Xx)(t)*(1-function(t){var e,r=1/(t*t),i=iL[2][5]*r,n=r;for(e=0;e<4;e+=1)i=(i+iL[2][e])*r,n=(n+ik[2][e])*r;var o=r*(i+iL[2][4])/(n+ik[2][4]);o=(iR-o)/t,r=parseInt(16*t)/16;var s=(t-r)*(t+r);return Math.exp(-r*r)*Math.exp(-s)*o}(e))},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),iF=.46875,iR=.5641895835477563,iL=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,6587491615298378e-19,.016315387137302097]],ik=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],iI=9007199254740992,iY=(0,tR.d5)("exp",["typed"],t=>{var{typed:e}=t;return e("exp",{number:r_,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()}})}),iU="expm1",ij=(0,tR.d5)(iU,["typed","Complex"],t=>{var{typed:e,Complex:r}=t;return e(iU,{number:rE,Complex:function(t){var e=Math.exp(t.re);return new r(e*Math.cos(t.im)-1,e*Math.sin(t.im))},BigNumber:function(t){return t.exp().minus(1)}})}),iz=r(2992),iX=(0,tR.d5)("filter",["typed"],t=>{var{typed:e}=t;return e("filter",{"Array, function":iJ,"Matrix, function":function(t,e){return t.create(iJ(t.toArray(),e))},"Array, RegExp":e7.U_,"Matrix, RegExp":function(t,e){return t.create((0,e7.U_)(t.toArray(),e))}})});function iJ(t,e){return(0,e7.hX)(t,function(t,r,i){return(0,iz.i)(e,t,[r],i,"filter")})}var iG="forEach",iH=(0,tR.d5)(iG,["typed"],t=>{var{typed:e}=t;return e(iG,{"Array, function":iV,"Matrix, function":function(t,e){t.forEach(e)}})});function iV(t,e){!function r(i,n){if(!Array.isArray(i))return(0,iz.i)(e,i,n,t,"forEach");(0,e7.Ed)(i,function(t,e){r(t,n.concat(e))})}(t,[])}var iq="format",iW=(0,tR.d5)(iq,["typed"],t=>{var{typed:e}=t;return e(iq,{any:rt.WU,"any, Object | function | number | BigNumber":rt.WU})}),iQ="getMatrixDataType",i$=(0,tR.d5)(iQ,["typed"],t=>{var{typed:e}=t;return e(iQ,{Array:function(t){return(0,e7.$q)(t,tY.kM)},Matrix:function(t){return t.getDataType()}})}),iK=(0,tR.d5)("hex",["typed","format"],t=>{var{typed:e,format:r}=t;return e("hex",{"number | BigNumber":function(t){return r(t,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"hex",wordSize:e})}})}),i0=(0,tR.d5)("im",["typed"],t=>{var{typed:e}=t;return e("im",{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),i1="isInteger",i2=(0,tR.d5)(i1,["typed"],t=>{var{typed:e}=t;return e(i1,{number:tI.U,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),i3="number";function i5(t){return t<0}function i8(t){return t>0}function i4(t){return 0===t}function i9(t){return Number.isNaN(t)}i5.signature=i3,i8.signature=i3,i4.signature=i3,i9.signature=i3;var i6="isNegative",i7=(0,tR.d5)(i6,["typed"],t=>{var{typed:e}=t;return e(i6,{number:i5,BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),nt="isPositive",ne=(0,tR.d5)(nt,["typed"],t=>{var{typed:e}=t;return e(nt,{number:i8,BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),nr="isZero",ni=(0,tR.d5)(nr,["typed"],t=>{var{typed:e}=t;return e(nr,{number:i4,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})});function nn(t){if((0,tI.U)(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:iv(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*nn(1-t));if(t>=171.35)return 1/0;if(t>85){var e,r=t*t,i=r*t,n=i*t,o=n*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*i)-571/(2488320*n)+163879/(209018880*o)+5246819/(75246796800*o*t))}--t,e=ns[0];for(var s=1;s<ns.length;++s)e+=ns[s]/(t+s);var a=t+no+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,t+.5)*Math.exp(-a)*e}nn.signature="number";var no=4.7421875,ns=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-.00009837447530487956,1580887032249125e-19,-.00021026444172410488,21743961811521265e-20,-.0001643181065367639,8441822398385275e-20,-.000026190838401581408,36899182659531625e-22],na=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-.000005395239384953];function nu(t){if(t<0)return NaN;if(0===t)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-nu(1-t);for(var e=(t-=1)+5+.5,r=1.000000000190015,i=6;i>=1;i--)r+=na[i]/(t+i);return .9189385332046728+(t+.5)*Math.log(e)-e+Math.log(r)}nu.signature="number";var nh="lgamma",nl=(0,tR.d5)(nh,["Complex","typed"],t=>{var{Complex:e,typed:r}=t,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,8417508417508417e-19,-.0005952380952380953,7936507936507937e-19,-.002777777777777778,.08333333333333333];return r(nh,{number:nu,Complex:function t(r){if(r.isNaN())return new e(NaN,NaN);if(0===r.im)return new e(nu(r.re),0);if(r.re>=7||Math.abs(r.im)>=7)return n(r);if(r.re<=.1){var i=(0,tI.JG)(6.283185307179586,r.im)*Math.floor(.5*r.re+.25),s=r.mul(Math.PI).sin().log(),a=t(new e(1-r.re,-r.im));return new e(1.1447298858494002,i).sub(s).sub(a)}return r.im>=0?o(r):o(r.conjugate()).conjugate()},BigNumber:function(){throw Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function n(t){for(var r=t.sub(.5).mul(t.log()).sub(t).add(.9189385332046728),n=new e(1,0).div(t),o=n.div(t),s=-.029550653594771242,a=.00641025641025641,u=2*o.re,h=o.re*o.re+o.im*o.im,l=2;l<8;l++){var c=a;a=-h*s+i[l],s=u*s+c}var d=n.mul(o.mul(s).add(a));return r.add(d)}function o(t){var r=0,i=0,o=t;for(t=t.add(1);t.re<=7;){var s=(o=o.mul(t)).im<0?1:0;0!==s&&0===i&&r++,i=s,t=t.add(1)}return n(t).sub(o.log()).sub(new e(0,2*r*Math.PI*1))}}),nc="log10",nd=(0,tR.d5)(nc,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(nc,{number:function(t){return t>=0||r.predictable?rN(t):new i(t,0).log().div(Math.LN10)},Complex:function(t){return new i(t).log().div(Math.LN10)},BigNumber:function(t){return!t.isNegative()||r.predictable?t.log():new i(t.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),nf="log2",np=(0,tR.d5)(nf,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(nf,{number:function(t){return t>=0||r.predictable?rS(t):n(new i(t,0))},Complex:n,BigNumber:function(t){return!t.isNegative()||r.predictable?t.log(2):n(new i(t.toNumber(),0))},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))});function n(t){var e=Math.sqrt(t.re*t.re+t.im*t.im);return new i(Math.log2?Math.log2(e):Math.log(e)/Math.LN2,Math.atan2(t.im,t.re)/Math.LN2)}}),nm=(0,tR.d5)("map",["typed"],t=>{var{typed:e}=t;return e("map",{"Array, function":nv,"Matrix, function":function(t,e){return t.map(e)}})});function nv(t,e){return function r(i,n){return Array.isArray(i)?i.map(function(t,e){return r(t,n.concat(e))}):(0,iz.i)(e,i,n,t,"map")}(t,[])}var ng=(0,tR.d5)("multiplyScalar",["typed"],t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":rb,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":(t,e)=>e.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,e)=>t.multiply(e)})}),nb=r(6350),ny=(0,tR.d5)("not",["typed"],t=>{var{typed:e}=t;return e("not",{"null | undefined":()=>!0,number:nb.xY,Complex:function(t){return 0===t.re&&0===t.im},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),nC=(0,tR.d5)("number",["typed"],t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,r,i=(r=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:({"0b":2,"0o":8,"0x":16})[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(i)return function(t){for(var e=parseInt(t.integerPart,t.radix),r=0,i=0;i<t.fractionalPart.length;i++)r+=parseInt(t.fractionalPart[i],t.radix)/Math.pow(t.radix,i+1);var n=e+r;if(isNaN(n))throw SyntaxError('String "'+t.input+'" is not a valid number');return n}(i);var n=0,o=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(n=Number(o[2]),t=o[1]);var s=Number(t);if(isNaN(s))throw SyntaxError('String "'+t+'" is not a valid number');if(o){if(s>2**n-1)throw SyntaxError('String "'.concat(t,'" is out of range'));s>=2**(n-1)&&(s-=2**n)}return s},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:e.referToSelf(t=>e=>{var r=e.clone();return r.value=t(e.value),r}),null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))});return r.fromJSON=function(t){return parseFloat(t.value)},r}),nZ=(0,tR.d5)("oct",["typed","format"],t=>{var{typed:e,format:r}=t;return e("oct",{"number | BigNumber":function(t){return r(t,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"oct",wordSize:e})}})}),nx=r(3718),n_=nx(Date.now());function nE(t){var e;return e=null===t?n_:nx(String(t)),function(){return e()}}var nw="pickRandom",nN=(0,tR.d5)(nw,["typed","config","?on"],t=>{var{typed:e,config:r,on:i}=t,n=nE(r.randomSeed);return i&&i("config",function(t,e){t.randomSeed!==e.randomSeed&&(n=nE(t.randomSeed))}),e(nw,{"Array | Matrix":function(t){return o(t,{})},"Array | Matrix, Object":function(t,e){return o(t,e)},"Array | Matrix, number":function(t,e){return o(t,{number:e})},"Array | Matrix, Array | Matrix":function(t,e){return o(t,{weights:e})},"Array | Matrix, Array | Matrix, number":function(t,e,r){return o(t,{number:r,weights:e})},"Array | Matrix, number, Array | Matrix":function(t,e,r){return o(t,{number:e,weights:r})}});function o(t,e){var r,{number:i,weights:o,elementWise:s=!0}=e,a=void 0===i;a&&(i=1);var u=(0,tY.SW)(t)?t.create:(0,tY.SW)(o)?o.create:null;t=t.valueOf(),o&&(o=o.valueOf()),!0===s&&(t=(0,e7.xH)(t),o=(0,e7.xH)(o));var h=0;if(void 0!==o){if(o.length!==t.length)throw Error("Weights must have the same length as possibles");for(var l=0,c=o.length;l<c;l++){if(!(0,tY.hj)(o[l])||o[l]<0)throw Error("Weights must be an array of positive numbers");h+=o[l]}}for(var d=t.length,f=[];f.length<i;){if(void 0===o)r=t[Math.floor(n()*d)];else for(var p=n()*h,m=0,v=t.length;m<v;m++)if((p-=o[m])<0){r=t[m];break}f.push(r)}return a?f[0]:u?u(f):f}}),nS=r(8289);function nA(t,e){var r=[];if((t=t.slice(0)).length>1)for(var i=0,n=t.shift();i<n;i++)r.push(nA(t,e));else for(var o=0,s=t.shift();o<s;o++)r.push(e());return r}var nP="random",nD=(0,tR.d5)(nP,["typed","config","?on"],t=>{var{typed:e,config:r,on:i}=t,n=nE(r.randomSeed);return i&&i("config",function(t,e){t.randomSeed!==e.randomSeed&&(n=nE(t.randomSeed))}),e(nP,{"":()=>0+1*n(),number:t=>0+n()*(t-0),"number, number":(t,e)=>t+n()*(e-t),"Array | Matrix":t=>o(t,0,1),"Array | Matrix, number":(t,e)=>o(t,0,e),"Array | Matrix, number, number":(t,e,r)=>o(t,e,r)});function o(t,e,r){var i=nA(t.valueOf(),()=>e+n()*(r-e));return(0,tY.SW)(t)?t.create(i):i}}),nM=(0,tR.d5)("re",["typed"],t=>{var{typed:e}=t;return e("re",{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),nO=(0,tR.d5)("sec",["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t,i=iE({typed:e});return e("sec",{number:rK,Complex:t=>t.sec(),BigNumber:t=>new r(1).div(t.cos())},i)}),nT="sign",nB=(0,tR.d5)(nT,["typed","BigNumber","Fraction","complex"],t=>{var{typed:e,BigNumber:r,complex:i,Fraction:n}=t;return e(nT,{number:rP,Complex:function(t){return 0===t.im?i(rP(t.re)):t.sign()},BigNumber:function(t){return new r(t.cmp(0))},Fraction:function(t){return new n(t.s,1)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),Unit:e.referToSelf(t=>r=>{if(!r._isDerived()&&0!==r.units[0].unit.offset)throw TypeError("sign is ambiguous for units with offset");return e.find(t,r.valueType())(r.value)})})}),nF=(0,tR.d5)("sin",["typed"],t=>{var{typed:e}=t,r=iE({typed:e});return e("sin",{number:Math.sin,"Complex | BigNumber":t=>t.sin()},r)}),nR=(0,tR.d5)("SparseMatrix",["typed","equalScalar","Matrix"],t=>{var{typed:e,equalScalar:r,Matrix:i}=t;function n(t,e){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");if(e&&!(0,tY.HD)(e))throw Error("Invalid datatype: "+e);if((0,tY.SW)(t))"SparseMatrix"===t.type?(this._values=t._values?(0,re.d9)(t._values):void 0,this._index=(0,re.d9)(t._index),this._ptr=(0,re.d9)(t._ptr),this._size=(0,re.d9)(t._size),this._datatype=e||t._datatype):o(this,t.valueOf(),e||t._datatype);else if(t&&(0,tY.kJ)(t.index)&&(0,tY.kJ)(t.ptr)&&(0,tY.kJ)(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if((0,tY.kJ)(t))o(this,t,e);else if(t)throw TypeError("Unsupported type of data ("+(0,tY.kM)(t)+")");else this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}function o(t,i,n){t._values=[],t._index=[],t._ptr=[],t._datatype=n;var o=i.length,s=0,a=r,u=0;if((0,tY.HD)(n)&&(a=e.find(r,[n,n])||r,u=e.convert(0,n)),o>0){var h=0;do{t._ptr.push(t._index.length);for(var l=0;l<o;l++){var c=i[l];if((0,tY.kJ)(c)){if(0===h&&s<c.length&&(s=c.length),h<c.length){var d=c[h];a(d,u)||(t._values.push(d),t._index.push(l))}}else 0===h&&s<1&&(s=1),a(c,u)||(t._values.push(c),t._index.push(l))}h++}while(h<s)}t._ptr.push(t._index.length),t._size=[o,s]}function s(t,e,r,i){if(r-e==0)return r;for(var n=e;n<r;n++)if(i[n]===t)return n;return e}function a(t,e,r,i,n,o,s){n.splice(t,0,i),o.splice(t,0,e);for(var a=r+1;a<s.length;a++)s[a]++}function u(t,i,n,o){var s,a,u,h=o||0,l=r,c=0;(0,tY.HD)(t._datatype)&&(l=e.find(r,[t._datatype,t._datatype])||r,c=e.convert(0,t._datatype),h=e.convert(h,t._datatype));var d=!l(h,c),f=t._size[0],p=t._size[1];if(n>p){for(a=p;a<n;a++)if(t._ptr[a]=t._values.length,d)for(s=0;s<f;s++)t._values.push(h),t._index.push(s);t._ptr[n]=t._values.length}else n<p&&(t._ptr.splice(n+1,p-n),t._values.splice(t._ptr[n],t._values.length),t._index.splice(t._ptr[n],t._index.length));if(p=n,i>f){if(d){var m=0;for(a=0;a<p;a++){t._ptr[a]=t._ptr[a]+m,u=t._ptr[a+1]+m;var v=0;for(s=f;s<i;s++,v++)t._values.splice(u+v,0,h),t._index.splice(u+v,0,s),m++}t._ptr[p]=t._values.length}}else if(i<f){var g=0;for(a=0;a<p;a++){t._ptr[a]=t._ptr[a]-g;var b=t._ptr[a],y=t._ptr[a+1]-g;for(u=b;u<y;u++)(s=t._index[u])>i-1&&(t._values.splice(u,1),t._index.splice(u,1),g++)}t._ptr[a]=t._values.length}return t._size[0]=i,t._size[1]=n,t}function h(t,e,r,i,n){var o,s,a=i[0],u=i[1],h=[];for(o=0;o<a;o++)for(s=0,h[o]=[];s<u;s++)h[o][s]=0;for(s=0;s<u;s++)for(var l=r[s],c=r[s+1],d=l;d<c;d++)h[o=e[d]][s]=t?n?(0,re.d9)(t[d]):t[d]:1;return h}return n.prototype=new i,n.prototype.createSparseMatrix=function(t,e){return new n(t,e)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return(0,e7.$q)(this._values,tY.kM)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(t,e){return new n(t,e)},n.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},n.prototype.subset=function(t,e,r){if(!this._values)throw Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(t,e){if(!(0,tY.dh)(e))throw TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var r,i,o,s,a=e.size();if(a.length!==t._size.length)throw new rr.m(a.length,t._size.length);var u=e.min(),h=e.max();for(r=0,i=t._size.length;r<i;r++)(0,e7.Ls)(u[r],t._size[r]),(0,e7.Ls)(h[r],t._size[r]);var l=t._values,c=t._index,d=t._ptr,f=e.dimension(0),p=e.dimension(1),m=[],v=[];f.forEach(function(t,e){v[t]=e[0],m[t]=!0});var g=l?[]:void 0,b=[],y=[];return p.forEach(function(t){for(y.push(b.length),o=d[t],s=d[t+1];o<s;o++)!0===m[r=c[o]]&&(b.push(v[r]),g&&g.push(l[o]))}),y.push(b.length),new n({values:g,index:b,ptr:y,size:a,datatype:t._datatype})}(this,t);case 2:case 3:return function(t,e,r,i){if(!e||!0!==e.isIndex)throw TypeError("Invalid index");var n,o=e.size(),s=e.isScalar();if((0,tY.SW)(r)?(n=r.size(),r=r.toArray()):n=(0,e7.aJ)(r),s){if(0!==n.length)throw TypeError("Scalar expected");t.set(e.min(),r,i)}else{if(1!==o.length&&2!==o.length)throw new rr.m(o.length,t._size.length,"<");if(n.length<o.length){for(var a=0,u=0;1===o[a]&&1===n[a];)a++;for(;1===o[a];)u++,a++;r=(0,e7.f4)(r,o.length,u,n)}if(!(0,re.J5)(o,n))throw new rr.m(o,n,">");if(1===o.length)e.dimension(0).forEach(function(e,n){(0,e7.Ls)(e),t.set([e,0],r[n[0]],i)});else{var h=e.dimension(0),l=e.dimension(1);h.forEach(function(e,n){(0,e7.Ls)(e),l.forEach(function(o,s){(0,e7.Ls)(o),t.set([e,o],r[n[0]][s[0]],i)})})}}return t}(this,t,e,r);default:throw SyntaxError("Wrong number of arguments")}},n.prototype.get=function(t){if(!(0,tY.kJ)(t))throw TypeError("Array expected");if(t.length!==this._size.length)throw new rr.m(t.length,this._size.length);if(!this._values)throw Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];(0,e7.Ls)(e,this._size[0]),(0,e7.Ls)(r,this._size[1]);var i=s(e,this._ptr[r],this._ptr[r+1],this._index);return i<this._ptr[r+1]&&this._index[i]===e?this._values[i]:0},n.prototype.set=function(t,i,n){if(!(0,tY.kJ)(t))throw TypeError("Array expected");if(t.length!==this._size.length)throw new rr.m(t.length,this._size.length);if(!this._values)throw Error("Cannot invoke set on a Pattern only matrix");var o=t[0],h=t[1],l=this._size[0],c=this._size[1],d=r,f=0;(0,tY.HD)(this._datatype)&&(d=e.find(r,[this._datatype,this._datatype])||r,f=e.convert(0,this._datatype)),(o>l-1||h>c-1)&&(u(this,Math.max(o+1,l),Math.max(h+1,c),n),l=this._size[0],c=this._size[1]),(0,e7.Ls)(o,l),(0,e7.Ls)(h,c);var p=s(o,this._ptr[h],this._ptr[h+1],this._index);return p<this._ptr[h+1]&&this._index[p]===o?d(i,f)?function(t,e,r,i,n){r.splice(t,1),i.splice(t,1);for(var o=e+1;o<n.length;o++)n[o]--}(p,h,this._values,this._index,this._ptr):this._values[p]=i:d(i,f)||a(p,o,h,i,this._values,this._index,this._ptr),this},n.prototype.resize=function(t,e,r){if(!(0,tY.uZ)(t))throw TypeError("Array or Matrix expected");var i=t.valueOf().map(t=>Array.isArray(t)&&1===t.length?t[0]:t);if(2!==i.length)throw Error("Only two dimensions matrix are supported");return i.forEach(function(t){if(!(0,tY.hj)(t)||!(0,tI.U)(t)||t<0)throw TypeError("Invalid size, must contain positive integers (size: "+(0,rt.WU)(i)+")")}),u(r?this.clone():this,i[0],i[1],e)},n.prototype.reshape=function(t,e){if(!(0,tY.kJ)(t))throw TypeError("Array expected");if(2!==t.length)throw Error("Sparse matrices can only be reshaped in two dimensions");t.forEach(function(e){if(!(0,tY.hj)(e)||!(0,tI.U)(e)||e<=-2||0===e)throw TypeError("Invalid size, must contain positive integers or -1 (size: "+(0,rt.WU)(t)+")")});var r=this._size[0]*this._size[1],i=(t=(0,e7.eu)(t,r))[0]*t[1];if(r!==i)throw Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var o=[],u=0;u<n._ptr.length;u++)for(var h=0;h<n._ptr[u+1]-n._ptr[u];h++)o.push(u);for(var l=n._values.slice(),c=n._index.slice(),d=0;d<n._index.length;d++){var f=c[d],p=o[d],m=f*n._size[1]+p;o[d]=m%t[1],c[d]=Math.floor(m/t[1])}n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice();for(var v=0;v<n._ptr.length;v++)n._ptr[v]=0;for(var g=0;g<l.length;g++){var b=c[g],y=o[g],C=l[g];a(s(b,n._ptr[y],n._ptr[y+1],n._index),b,y,C,n._values,n._index,n._ptr)}return n},n.prototype.clone=function(){return new n({values:this._values?(0,re.d9)(this._values):void 0,index:(0,re.d9)(this._index),ptr:(0,re.d9)(this._ptr),size:(0,re.d9)(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(t,i){if(!this._values)throw Error("Cannot invoke map on a Pattern only matrix");var o=this,s=this._size[0],a=this._size[1],u=tz(t);return function(t,i,o,s,a,u,h){var l=[],c=[],d=[],f=r,p=0;(0,tY.HD)(t._datatype)&&(f=e.find(r,[t._datatype,t._datatype])||r,p=e.convert(0,t._datatype));for(var m=function(t,e,r){t=u(t,e,r),f(t,p)||(l.push(t),c.push(e))},v=s;v<=a;v++){d.push(l.length);var g=t._ptr[v],b=t._ptr[v+1];if(h)for(var y=g;y<b;y++){var C=t._index[y];C>=i&&C<=o&&m(t._values[y],C-i,v-s)}else{for(var Z={},x=g;x<b;x++)Z[t._index[x]]=t._values[x];for(var _=i;_<=o;_++)m(_ in Z?Z[_]:0,_-i,v-s)}}return d.push(l.length),new n({values:l,index:c,ptr:d,size:[o-i+1,a-s+1]})}(this,0,s-1,0,a-1,function(e,r,i){return 1===u?t(e):2===u?t(e,[r,i]):t(e,[r,i],o)},i)},n.prototype.forEach=function(t,e){if(!this._values)throw Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],i=this._size[1],n=0;n<i;n++){var o=this._ptr[n],s=this._ptr[n+1];if(e)for(var a=o;a<s;a++){var u=this._index[a];t(this._values[a],[u,n],this)}else{for(var h={},l=o;l<s;l++)h[this._index[l]]=this._values[l];for(var c=0;c<r;c++)t(c in h?h[c]:0,[c,n],this)}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var r=this._ptr[e],i=this._ptr[e+1],n=r;n<i;n++){var o=this._index[n];yield{value:this._values[n],index:[o,e]}}},n.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)},n.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],i=this.density(),n="Sparse Matrix ["+(0,rt.WU)(e,t)+" x "+(0,rt.WU)(r,t)+"] density: "+(0,rt.WU)(i,t)+"\n",o=0;o<r;o++)for(var s=this._ptr[o],a=this._ptr[o+1],u=s;u<a;u++){var h=this._index[u];n+="\n    ("+(0,rt.WU)(h,t)+", "+(0,rt.WU)(o,t)+") ==> "+(this._values?(0,rt.WU)(this._values[u],t):"X")}return n},n.prototype.toString=function(){return(0,rt.WU)(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(t){if(t){if((0,tY.l9)(t)&&(t=t.toNumber()),!(0,tY.hj)(t)||!(0,tI.U)(t))throw TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,r=t<0?-t:0,i=this._size[0],o=this._size[1],s=Math.min(i-r,o-e),a=[],u=[],h=[];h[0]=0;for(var l=e;l<o&&a.length<s;l++)for(var c=this._ptr[l],d=this._ptr[l+1],f=c;f<d;f++){var p=this._index[f];if(p===l-e+r){a.push(this._values[f]),u[a.length-1]=p-r;break}}return h.push(a.length),new n({values:a,index:u,ptr:h,size:[s,1]})},n.fromJSON=function(t){return new n(t)},n.diagonal=function(t,i,o,s,a){if(!(0,tY.kJ)(t))throw TypeError("Array expected, size parameter");if(2!==t.length)throw Error("Only two dimensions matrix are supported");if(t=t.map(function(t){if((0,tY.l9)(t)&&(t=t.toNumber()),!(0,tY.hj)(t)||!(0,tI.U)(t)||t<1)throw Error("Size values must be positive integers");return t}),o){if((0,tY.l9)(o)&&(o=o.toNumber()),!(0,tY.hj)(o)||!(0,tI.U)(o))throw TypeError("The parameter k must be an integer number")}else o=0;var u,h=r,l=0;(0,tY.HD)(a)&&(h=e.find(r,[a,a])||r,l=e.convert(0,a));var c=o>0?o:0,d=o<0?-o:0,f=t[0],p=t[1],m=Math.min(f-d,p-c);if((0,tY.kJ)(i)){if(i.length!==m)throw Error("Invalid value array length");u=function(t){return i[t]}}else if((0,tY.SW)(i)){var v=i.size();if(1!==v.length||v[0]!==m)throw Error("Invalid matrix length");u=function(t){return i.get([t])}}else u=function(){return i};for(var g=[],b=[],y=[],C=0;C<p;C++){y.push(g.length);var Z=C-c;if(Z>=0&&Z<m){var x=u(Z);h(x,l)||(b.push(Z+d),g.push(x))}}return y.push(g.length),new n({values:g,index:b,ptr:y,size:[f,p]})},n.prototype.swapRows=function(t,e){if(!(0,tY.hj)(t)||!(0,tI.U)(t)||!(0,tY.hj)(e)||!(0,tI.U)(e))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");return(0,e7.Ls)(t,this._size[0]),(0,e7.Ls)(e,this._size[0]),n._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(t,e,r,i,n){for(var o=i[t],s=i[t+1],a=o;a<s;a++)n(r[a],e[a])},n._swapRows=function(t,e,r,i,n,o){for(var a=0;a<r;a++){var u=o[a],h=o[a+1],l=s(t,u,h,n),c=s(e,u,h,n);if(l<h&&c<h&&n[l]===t&&n[c]===e){if(i){var d=i[l];i[l]=i[c],i[c]=d}continue}if(l<h&&n[l]===t&&(c>=h||n[c]!==e)){var f=i?i[l]:void 0;n.splice(c,0,e),i&&i.splice(c,0,f),n.splice(c<=l?l+1:l,1),i&&i.splice(c<=l?l+1:l,1);continue}if(c<h&&n[c]===e&&(l>=h||n[l]!==t)){var p=i?i[c]:void 0;n.splice(l,0,t),i&&i.splice(l,0,p),n.splice(l<=c?c+1:c,1),i&&i.splice(l<=c?c+1:c,1)}}},n},{isClass:!0}),nL="splitUnit",nk=(0,tR.d5)(nL,["typed"],t=>{var{typed:e}=t;return e(nL,{"Unit, Array":function(t,e){return t.splitUnit(e)}})}),nI="square",nY=(0,tR.d5)(nI,["typed"],t=>{var{typed:e}=t;return e(nI,{number:rD,Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},Unit:function(t){return t.pow(2)}})}),nU="string",nj=(0,tR.d5)(nU,["typed"],t=>{var{typed:e}=t;return e(nU,{"":function(){return""},number:tI.WU,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t)),any:function(t){return String(t)}})}),nz="subtractScalar",nX=(0,tR.d5)(nz,["typed"],t=>{var{typed:e}=t;return e(nz,{"number, number":rg,"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(null===r.value||void 0===r.value)throw Error("Parameter x contains a unit with undefined value");if(null===i.value||void 0===i.value)throw Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw Error("Units do not match");var n=r.clone();return n.value=e.find(t,[n.valueType(),i.valueType()])(n.value,i.value),n.fixPrefix=!1,n})})}),nJ=(0,tR.d5)("tan",["typed"],t=>{var{typed:e}=t,r=iE({typed:e});return e("tan",{number:Math.tan,"Complex | BigNumber":t=>t.tan()},r)}),nG="typeOf",nH=(0,tR.d5)(nG,["typed"],t=>{var{typed:e}=t;return e(nG,{any:tY.kM})}),nV="acosh",nq=(0,tR.d5)(nV,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(nV,{number:function(t){return t>=1||r.predictable?rY(t):t<=-1?new i(Math.log(Math.sqrt(t*t-1)-t),Math.PI):new i(t,0).acosh()},Complex:function(t){return t.acosh()},BigNumber:function(t){return t.acosh()}})}),nW="acsch",nQ=(0,tR.d5)(nW,["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e(nW,{number:rX,Complex:function(t){return t.acsch()},BigNumber:function(t){return new r(1).div(t).asinh()}})}),n$=r(131),nK="asec",n0=(0,tR.d5)(nK,["typed","config","Complex","BigNumber"],t=>{var{typed:e,config:r,Complex:i,BigNumber:n}=t;return e(nK,{number:function(t){return t<=-1||t>=1||r.predictable?rJ(t):new i(t,0).asec()},Complex:function(t){return t.asec()},BigNumber:function(t){return new n(1).div(t).acos()}})}),n1=(0,tR.d5)("bin",["typed","format"],t=>{var{typed:e,format:r}=t;return e("bin",{"number | BigNumber":function(t){return r(t,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"bin",wordSize:e})}})}),n2="combinationsWithRep",n3=(0,tR.d5)(n2,["typed"],t=>{var{typed:e}=t;return e(n2,{"number, number":function(t,e){if(!(0,tI.U)(t)||t<0||!(0,tI.U)(e)||e<0)throw TypeError("Positive integer value expected in function combinationsWithRep");if(t<1)throw TypeError("k must be less than or equal to n + k - 1");return e<t-1?iv(t,t+e-1)/iv(1,e):iv(e+1,t+e-1)/iv(1,t-1)},"BigNumber, BigNumber":function(t,e){var r,i,n=new t.constructor(1),o=t.minus(n);if(!n5(t)||!n5(e))throw TypeError("Positive integer value expected in function combinationsWithRep");if(t.lt(n))throw TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(r=n,e.lt(o))for(i=n;i.lte(o);i=i.plus(n))r=r.times(e.plus(i)).dividedBy(i);else for(i=n;i.lte(e);i=i.plus(n))r=r.times(o.plus(i)).dividedBy(i);return r}})});function n5(t){return t.isInteger()&&t.gte(0)}var n8="cosh",n4=(0,tR.d5)(n8,["typed"],t=>{var{typed:e}=t;return e(n8,{number:tI.f9,"Complex | BigNumber":t=>t.cosh()})}),n9="csch",n6=(0,tR.d5)(n9,["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e(n9,{number:r$,Complex:t=>t.csch(),BigNumber:t=>new r(1).div(t.sinh())})}),n7="isNaN",ot=(0,tR.d5)(n7,["typed"],t=>{var{typed:e}=t;return e(n7,{number:i9,BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":function(t){return(0,rd.Fh)(t,Number.isNaN)}})}),oe="isPrime",or=(0,tR.d5)(oe,["typed"],t=>{var{typed:e}=t;return e(oe,{number:function(t){if(0*t!=0)return!1;if(t<=3)return t>1;if(t%2==0||t%3==0)return!1;for(var e=5;e*e<=t;e+=6)if(t%e==0||t%(e+2)==0)return!1;return!0},BigNumber:function(t){if(0*t.toNumber()!=0)return!1;if(t.lte(3))return t.gt(1);if(t.mod(2).eq(0)||t.mod(3).eq(0))return!1;if(t.lt(4294967296)){for(var e=t.toNumber(),r=5;r*r<=e;r+=6)if(e%r==0||e%(r+2)==0)return!1;return!0}t=new(t.constructor.clone({precision:2*t.toFixed(0).length}))(t);for(var i=0,n=t.sub(1);n.mod(2).eq(0);)n=n.div(2),i+=1;var o=null;if(t.lt("3317044064679887385961981"))o=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(e=>e<t);else{var s=Math.min(t.toNumber()-2,Math.floor(2*Math.pow(t.toFixed(0).length*Math.log(10),2)));o=[];for(var a=2;a<=s;a+=1)o.push(s)}for(var u=0;u<o.length;u+=1){var h=o[u],l=function(t,e,r){for(var i=1;!e.eq(0);)e.mod(2).eq(0)?(e=e.div(2),t=t.mul(t).mod(r)):(e=e.sub(1),i=t.mul(i).mod(r));return i}(t.sub(t).add(h),n,t);if(!l.eq(1)){for(var c=0,d=l;!d.eq(t.sub(1));c+=1,d=d.mul(d).mod(t))if(c===i-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),oi="randomInt",on=(0,tR.d5)(oi,["typed","config","?on"],t=>{var{typed:e,config:r,on:i}=t,n=nE(r.randomSeed);return i&&i("config",function(t,e){t.randomSeed!==e.randomSeed&&(n=nE(t.randomSeed))}),e(oi,{"":()=>s(0,1),number:t=>s(0,t),"number, number":(t,e)=>s(t,e),"Array | Matrix":t=>o(t,0,1),"Array | Matrix, number":(t,e)=>o(t,0,e),"Array | Matrix, number, number":(t,e,r)=>o(t,e,r)});function o(t,e,r){var i=nA(t.valueOf(),()=>s(e,r));return(0,tY.SW)(t)?t.create(i):i}function s(t,e){return Math.floor(t+n()*(e-t))}}),oo="sech",os=(0,tR.d5)(oo,["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e(oo,{number:r0,Complex:t=>t.sech(),BigNumber:t=>new r(1).div(t.cosh())})}),oa="sinh",ou=(0,tR.d5)(oa,["typed"],t=>{var{typed:e}=t;return e(oa,{number:r1,"Complex | BigNumber":t=>t.sinh()})}),oh="sparse",ol=(0,tR.d5)(oh,["typed","SparseMatrix"],t=>{var{typed:e,SparseMatrix:r}=t;return e(oh,{"":function(){return new r([])},string:function(t){return new r([],t)},"Array | Matrix":function(t){return new r(t)},"Array | Matrix, string":function(t,e){return new r(t,e)}})}),oc=(0,tR.d5)("sqrt",["config","typed","Complex"],t=>{var{config:e,typed:r,Complex:i}=t;return r("sqrt",{number:n,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():n(t.toNumber())},Unit:function(t){return t.pow(.5)}});function n(t){return isNaN(t)?NaN:t>=0||e.predictable?Math.sqrt(t):new i(t,0).sqrt()}}),od=(0,tR.d5)("tanh",["typed"],t=>{var{typed:e}=t;return e("tanh",{number:tI.AE,"Complex | BigNumber":t=>t.tanh()})}),of="unaryMinus",op=(0,tR.d5)(of,["typed"],t=>{var{typed:e}=t;return e(of,{number:ry,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0))})}),om="acoth",ov=(0,tR.d5)(om,["typed","config","Complex","BigNumber"],t=>{var{typed:e,config:r,Complex:i,BigNumber:n}=t;return e(om,{number:function(t){return t>=1||t<=-1||r.predictable?rj(t):new i(t,0).acoth()},Complex:function(t){return t.acoth()},BigNumber:function(t){return new n(1).div(t).atanh()}})}),og="coth",ob=(0,tR.d5)(og,["typed","BigNumber"],t=>{var{typed:e,BigNumber:r}=t;return e(og,{number:rW,Complex:t=>t.coth(),BigNumber:t=>new r(1).div(t.tanh())})}),oy=(0,tR.d5)("fraction",["typed","Fraction"],t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw Error(t+" cannot be represented as a fraction");return new r(t)},string:function(t){return new r(t)},"number, number":function(t,e){return new r(t,e)},null:function(t){return new r(0)},BigNumber:function(t){return new r(t.toString())},Fraction:function(t){return t},Unit:e.referToSelf(t=>e=>{var r=e.clone();return r.value=t(e.value),r}),Object:function(t){return new r(t)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),oC="isNumeric",oZ=(0,tR.d5)(oC,["typed"],t=>{var{typed:e}=t;return e(oC,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),ox="matrix",o_=(0,tR.d5)(ox,["typed","Matrix","DenseMatrix","SparseMatrix"],t=>{var{typed:e,Matrix:r,DenseMatrix:i,SparseMatrix:n}=t;return e(ox,{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(t,e,r){if("dense"===e||"default"===e||void 0===e)return new i(t,r);if("sparse"===e)return new n(t,r);throw TypeError("Unknown matrix type "+JSON.stringify(e)+".")}}),oE="matrixFromFunction",ow=(0,tR.d5)(oE,["typed","matrix","isZero"],t=>{var{typed:e,matrix:r,isZero:i}=t;return e(oE,{"Array | Matrix, function, string, string":function(t,e,r,i){return n(t,e,r,i)},"Array | Matrix, function, string":function(t,e,r){return n(t,e,r)},"Matrix, function":function(t,e){return n(t,e,"dense")},"Array, function":function(t,e){return n(t,e,"dense").toArray()},"Array | Matrix, string, function":function(t,e,r){return n(t,r,e)},"Array | Matrix, string, string, function":function(t,e,r,i){return n(t,i,e,r)}});function n(t,e,n,o){var s;return(s=void 0!==o?r(n,o):r(n)).resize(t),s.forEach(function(t,r){var n=e(r);i(n)||s.set(r,n)}),s}}),oN="mode",oS=(0,tR.d5)(oN,["typed","isNaN","isNumeric"],t=>{var{typed:e,isNaN:r,isNumeric:i}=t;return e(oN,{"Array | Matrix":n,"...":function(t){return n(t)}});function n(t){if(0===(t=(0,e7.xH)(t.valueOf())).length)throw Error("Cannot calculate mode of an empty array");for(var e={},n=[],o=0,s=0;s<t.length;s++){var a=t[s];if(i(a)&&r(a))throw Error("Cannot calculate mode of an array containing NaN values");a in e||(e[a]=0),e[a]++,e[a]===o?n.push(a):e[a]>o&&(o=e[a],n=[a])}return n}}),oA=r(4986),oP=(0,tR.d5)("numeric",["number","?bignumber","?fraction"],t=>{var{number:e,bignumber:r,fraction:i}=t,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:t=>e(t),BigNumber:r?t=>r(t):oA.R3,Fraction:i?t=>i(t):oA.nG};return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number",r=arguments.length>2?arguments[2]:void 0;if(void 0!==r)throw SyntaxError("numeric() takes one or two arguments");var i=(0,tY.kM)(t);if(!(i in n))throw TypeError("Cannot convert "+t+' of type "'+i+'"; valid input types are '+Object.keys(n).join(", "));if(!(e in o))throw TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(o).join(", "));return e===i?t:o[e](t)}}),oD=r(6183),oM="prod",oO=(0,tR.d5)(oM,["typed","config","multiplyScalar","numeric"],t=>{var{typed:e,config:r,multiplyScalar:i,numeric:n}=t;return e(oM,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(t,e){throw Error("prod(A, dim) is not yet supported")},"...":function(t){return o(t)}});function o(t){var e;if((0,rd.Et)(t,function(t){try{e=void 0===e?t:i(e,t)}catch(e){throw(0,oD.x)(e,"prod",t)}}),"string"==typeof e&&(e=n(e,r.number)),void 0===e)throw Error("Cannot calculate prod of an empty array");return e}}),oT="reshape",oB=(0,tR.d5)(oT,["typed","isInteger","matrix"],t=>{var{typed:e,isInteger:r}=t;return e(oT,{"Matrix, Array":function(t,e){return t.reshape(e,!0)},"Array, Array":function(t,e){return e.forEach(function(t){if(!r(t))throw TypeError("Invalid size for dimension: "+t)}),(0,e7.XL)(t,e)}})}),oF="size",oR=(0,tR.d5)(oF,["typed","config","?matrix"],t=>{var{typed:e,config:r,matrix:i}=t;return e(oF,{Matrix:function(t){return t.create(t.size())},Array:e7.aJ,string:function(t){return"Array"===r.matrix?[t.length]:i([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===r.matrix?[]:i?i([]):(0,oA.kX)()}})}),oL="squeeze",ok=(0,tR.d5)(oL,["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return e(oL,{Array:function(t){return(0,e7.L9)((0,re.d9)(t))},Matrix:function(t){var e=(0,e7.L9)(t.toArray());return Array.isArray(e)?r(e):e},any:function(t){return(0,re.d9)(t)}})}),oI="transpose",oY=(0,tR.d5)(oI,["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return e(oI,{Array:t=>i(r(t)).valueOf(),Matrix:i,any:re.d9});function i(t){var e,r=t.size();switch(r.length){case 1:e=t.clone();break;case 2:var i=r[0],n=r[1];if(0===n)throw RangeError("Cannot transpose a 2D matrix with no columns (size: "+(0,rt.WU)(r)+")");switch(t.storage()){case"dense":e=function(t,e,r){for(var i,n=t._data,o=[],s=0;s<r;s++){i=o[s]=[];for(var a=0;a<e;a++)i[a]=(0,re.d9)(n[a][s])}return t.createDenseMatrix({data:o,size:[r,e],datatype:t._datatype})}(t,i,n);break;case"sparse":e=function(t,e,r){for(var i,n,o,s=t._values,a=t._index,u=t._ptr,h=s?[]:void 0,l=[],c=[],d=[],f=0;f<e;f++)d[f]=0;for(i=0,n=a.length;i<n;i++)d[a[i]]++;for(var p=0,m=0;m<e;m++)c.push(p),p+=d[m],d[m]=c[m];for(c.push(p),o=0;o<r;o++)for(var v=u[o],g=u[o+1],b=v;b<g;b++){var y=d[a[b]]++;l[y]=o,s&&(h[y]=(0,re.d9)(s[b]))}return t.createSparseMatrix({values:h,index:l,ptr:c,size:[r,e],datatype:t._datatype})}(t,i,n)}break;default:throw RangeError("Matrix must be a vector or two dimensional (size: "+(0,rt.WU)(r)+")")}return e}}),oU="xgcd",oj=(0,tR.d5)(oU,["typed","config","matrix","BigNumber"],t=>{var{typed:e,config:r,matrix:i,BigNumber:n}=t;return e(oU,{"number, number":function(t,e){var n=rM(t,e);return"Array"===r.matrix?n:i(n)},"BigNumber, BigNumber":function(t,e){var o,s,a,u,h=new n(0),l=new n(1),c=h,d=l,f=l,p=h;if(!t.isInt()||!e.isInt())throw Error("Parameters in function xgcd must be integer numbers");for(;!e.isZero();)s=t.div(e).floor(),a=t.mod(e),o=c,c=d.minus(s.times(c)),d=o,o=f,f=p.minus(s.times(f)),p=o,t=e,e=a;return u=t.lt(h)?[t.neg(),d.neg(),p.neg()]:[t,t.isZero()?0:d,p],"Array"===r.matrix?u:i(u)}})}),oz="zeros",oX=(0,tR.d5)(oz,["typed","config","matrix","BigNumber"],t=>{var{typed:e,config:r,matrix:i,BigNumber:n}=t;return e(oz,{"":function(){return"Array"===r.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return o(t,e)}return"Array"===r.matrix?o(t):o(t,"default")},Array:o,Matrix:function(t){var e=t.storage();return o(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return o(t.valueOf(),e)}});function o(t,e){var r,o=(r=!1,t.forEach(function(t,e,i){(0,tY.l9)(t)&&(r=!0,i[e]=t.toNumber())}),r)?new n(0):0;if(function(t){t.forEach(function(t){if("number"!=typeof t||!(0,tI.U)(t)||t<0)throw Error("Parameters in function zeros must be positive integers")})}(t),e){var s=i(e);return t.length>0?s.resize(t,o):s}var a=[];return t.length>0?(0,e7.SI)(a,t,o):a}}),oJ="asin",oG=(0,tR.d5)(oJ,["typed","config","Complex"],t=>{var{typed:e,config:r,Complex:i}=t;return e(oJ,{number:function(t){return t>=-1&&t<=1||r.predictable?Math.asin(t):new i(t,0).asin()},Complex:function(t){return t.asin()},BigNumber:function(t){return t.asin()}})}),oH="cbrt",oV=(0,tR.d5)(oH,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],t=>{var{config:e,typed:r,isNegative:i,unaryMinus:n,matrix:o,Complex:s,BigNumber:a,Fraction:u}=t;return r(oH,{number:rZ,Complex:h,"Complex, boolean":h,BigNumber:function(t){return t.cbrt()},Unit:function(t){if(t.value&&(0,tY.Mc)(t.value)){var e=t.clone();return e.value=1,(e=e.pow(1/3)).value=h(t.value),e}var r,o=i(t.value);o&&(t.value=n(t.value)),r=(0,tY.l9)(t.value)?new a(1).div(3):(0,tY.yQ)(t.value)?new u(1,3):1/3;var s=t.pow(r);return o&&(s.value=n(s.value)),s}});function h(t,r){var i=t.arg()/3,n=t.abs(),a=new s(rZ(n),0).mul(new s(0,i).exp());if(!r)return a;var u=[a,new s(rZ(n),0).mul(new s(0,i+2*Math.PI/3).exp()),new s(rZ(n),0).mul(new s(0,i-2*Math.PI/3).exp())];return"Array"===e.matrix?u:o(u)}}),oq=r(9002),oW="count",oQ=(0,tR.d5)(oW,["typed","size","prod"],t=>{var{typed:e,size:r,prod:i}=t;return e(oW,{string:function(t){return t.length},"Matrix | Array":function(t){return i(r(t))}})}),o$="ctranspose",oK=(0,tR.d5)(o$,["typed","transpose","conj"],t=>{var{typed:e,transpose:r,conj:i}=t;return e(o$,{any:function(t){return i(r(t))}})}),o0="diag",o1=(0,tR.d5)(o0,["typed","matrix","DenseMatrix","SparseMatrix"],t=>{var{typed:e,matrix:r,DenseMatrix:i,SparseMatrix:n}=t;return e(o0,{Array:function(t){return o(t,0,(0,e7.aJ)(t),null)},"Array, number":function(t,e){return o(t,e,(0,e7.aJ)(t),null)},"Array, BigNumber":function(t,e){return o(t,e.toNumber(),(0,e7.aJ)(t),null)},"Array, string":function(t,e){return o(t,0,(0,e7.aJ)(t),e)},"Array, number, string":function(t,e,r){return o(t,e,(0,e7.aJ)(t),r)},"Array, BigNumber, string":function(t,e,r){return o(t,e.toNumber(),(0,e7.aJ)(t),r)},Matrix:function(t){return o(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return o(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return o(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return o(t,0,t.size(),e)},"Matrix, number, string":function(t,e,r){return o(t,e,t.size(),r)},"Matrix, BigNumber, string":function(t,e,r){return o(t,e.toNumber(),t.size(),r)}});function o(t,e,o,s){if(!(0,tI.U)(e))throw TypeError("Second parameter in function diag must be an integer");var a=e>0?e:0,u=e<0?-e:0;switch(o.length){case 1:return function(t,e,r,o,s,a){var u=[o+s,o+a];if(r&&"sparse"!==r&&"dense"!==r)throw TypeError("Unknown matrix type ".concat(r,'"'));var h="sparse"===r?n.diagonal(u,t,e):i.diagonal(u,t,e);return null!==r?h:h.valueOf()}(t,e,s,o[0],u,a);case 2:return function(t,e,i,n,o,s){if((0,tY.SW)(t)){var a=t.diagonal(e);return null!==i?i!==a.storage()?r(a,i):a:a.valueOf()}for(var u=Math.min(n[0]-o,n[1]-s),h=[],l=0;l<u;l++)h[l]=t[l+o][l+s];return null!==i?r(h):h}(t,e,s,o,u,a)}throw RangeError("Matrix for function diag must be 2 dimensional")}}),o2="divideScalar",o3=(0,tR.d5)(o2,["typed","numeric"],t=>{var{typed:e,numeric:r}=t;return e(o2,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,e)=>t.divide(e),"number | Fraction | Complex | BigNumber, Unit":(t,e)=>e.divideInto(t)})}),o5=r(6257),o8=r(2419),o4=(0,tR.d5)("matAlgo07xSSf",["typed","DenseMatrix"],t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,o){var s,a,u,h=t._size,l=t._datatype,c=n._size,d=n._datatype;if(h.length!==c.length)throw new rr.m(h.length,c.length);if(h[0]!==c[0]||h[1]!==c[1])throw RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");var f=h[0],p=h[1],m=0,v=o;"string"==typeof l&&l===d&&(s=l,m=e.convert(0,s),v=e.find(o,[s,s]));var g=[];for(a=0;a<f;a++)g[a]=[];var b=[],y=[],C=[],Z=[];for(u=0;u<p;u++){var x=u+1;for(i(t,u,C,b,x),i(n,u,Z,y,x),a=0;a<f;a++){var _=C[a]===x?b[a]:m,E=Z[a]===x?y[a]:m;g[a][u]=v(_,E)}}return new r({data:g,size:[f,p],datatype:s})};function i(t,e,r,i,n){for(var o=t._values,s=t._index,a=t._ptr,u=a[e],h=a[e+1];u<h;u++){var l=s[u];r[l]=n,i[l]=o[u]}}}),o9=r(6104),o6=r(6820),o7=r(506),st="dotDivide",se=(0,tR.d5)(st,["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,divideScalar:n,DenseMatrix:o,concat:s}=t,a=(0,o5.v)({typed:e,equalScalar:i}),u=(0,o8.$)({typed:e}),h=o4({typed:e,DenseMatrix:o}),l=(0,o9.e)({typed:e,equalScalar:i}),c=(0,o6.O)({typed:e,DenseMatrix:o}),d=(0,o7.L)({typed:e,matrix:r,concat:s});return e(st,d({elop:n,SS:h,DS:u,SD:a,Ss:l,sS:c}))}),sr="equal",si=(0,tR.d5)(sr,["typed","matrix","equalScalar","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,DenseMatrix:n,concat:o}=t,s=(0,o8.$)({typed:e}),a=o4({typed:e,DenseMatrix:n}),u=(0,o6.O)({typed:e,DenseMatrix:n}),h=(0,o7.L)({typed:e,matrix:r,concat:o});return e(sr,sn({typed:e,equalScalar:i}),h({elop:i,SS:a,DS:s,Ss:u}))}),sn=(0,tR.d5)(sr,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(sr,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:r(t,e)}})}),so="flatten",ss=(0,tR.d5)(so,["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return e(so,{Array:function(t){return(0,e7.xH)(t)},Matrix:function(t){return r((0,e7.xH)(t.toArray()))}})}),sa="hasNumericValue",su=(0,tR.d5)(sa,["typed","isNumeric"],t=>{var{typed:e,isNumeric:r}=t;return e(sa,{boolean:()=>!0,string:function(t){return t.trim().length>0&&!isNaN(Number(t))},any:function(t){return r(t)}})}),sh="identity",sl=(0,tR.d5)(sh,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],t=>{var{typed:e,config:r,matrix:i,BigNumber:n,DenseMatrix:o,SparseMatrix:s}=t;return e(sh,{"":function(){return"Matrix"===r.matrix?i([]):[]},string:function(t){return i(t)},"number | BigNumber":function(t){return u(t,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return u(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return u(t,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return u(t,e,r)},Array:function(t){return a(t)},"Array, string":function(t,e){return a(t,e)},Matrix:function(t){return a(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return a(t.valueOf(),e)}});function a(t,e){switch(t.length){case 0:return e?i(e):[];case 1:return u(t[0],t[0],e);case 2:return u(t[0],t[1],e);default:throw Error("Vector containing two values expected")}}function u(t,e,r){var i=(0,tY.l9)(t)||(0,tY.l9)(e)?n:null;if((0,tY.l9)(t)&&(t=t.toNumber()),(0,tY.l9)(e)&&(e=e.toNumber()),!(0,tI.U)(t)||t<1||!(0,tI.U)(e)||e<1)throw Error("Parameters in function identity must be positive integers");var a=i?new n(1):1,u=i?new i(0):0,h=[t,e];if(r){if("sparse"===r)return s.diagonal(h,a,0,u);if("dense"===r)return o.diagonal(h,a,0,u);throw TypeError('Unknown matrix type "'.concat(r,'"'))}for(var l=(0,e7.SI)([],h,u),c=t<e?t:e,d=0;d<c;d++)l[d][d]=a;return l}}),sc="kron",sd=(0,tR.d5)(sc,["typed","matrix","multiplyScalar"],t=>{var{typed:e,matrix:r,multiplyScalar:i}=t;return e(sc,{"Matrix, Matrix":function(t,e){return r(n(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return r(n(t.toArray(),e))},"Array, Matrix":function(t,e){return r(n(t,e.toArray()))},"Array, Array":n});function n(t,e){if(1===(0,e7.aJ)(t).length&&(t=[t]),1===(0,e7.aJ)(e).length&&(e=[e]),(0,e7.aJ)(t).length>2||(0,e7.aJ)(e).length>2)throw RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(t.length)+", y = "+JSON.stringify(e.length)+")");var r=[],n=[];return t.map(function(t){return e.map(function(e){return n=[],r.push(n),t.map(function(t){return e.map(function(e){return n.push(i(t,e))})})})})&&r}}),sf="largerEq",sp=(0,tR.d5)(sf,["typed","config","matrix","DenseMatrix","concat"],t=>{var{typed:e,config:r,matrix:i,DenseMatrix:n,concat:o}=t,s=(0,o8.$)({typed:e}),a=o4({typed:e,DenseMatrix:n}),u=(0,o6.O)({typed:e,DenseMatrix:n}),h=(0,o7.L)({typed:e,matrix:i,concat:o}),l=iM({typed:e});return e(sf,sm({typed:e,config:r}),{"boolean, boolean":(t,e)=>t>=e,"BigNumber, BigNumber":function(t,e){return t.gte(e)||iD(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>-1!==t.compare(e),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},l,h({SS:a,DS:s,Ss:u}))}),sm=(0,tR.d5)(sf,["typed","config"],t=>{var{typed:e,config:r}=t;return e(sf,{"number, number":function(t,e){return t>=e||(0,tI.RI)(t,e,r.epsilon)}})}),sv=r(2789),sg=r(6565),sb=r(2590),sy=(0,tR.d5)("matAlgo08xS0Sid",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,n){var o,s,a,u,h,l=t._values,c=t._index,d=t._ptr,f=t._size,p=t._datatype,m=i._values,v=i._index,g=i._ptr,b=i._size,y=i._datatype;if(f.length!==b.length)throw new rr.m(f.length,b.length);if(f[0]!==b[0]||f[1]!==b[1])throw RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+b+")");if(!l||!m)throw Error("Cannot perform operation on Pattern Sparse Matrices");var C=f[0],Z=f[1],x=r,_=0,E=n;"string"==typeof p&&p===y&&(o=p,x=e.find(r,[o,o]),_=e.convert(0,o),E=e.find(n,[o,o]));for(var w=[],N=[],S=[],A=[],P=[],D=0;D<Z;D++){S[D]=N.length;var M=D+1;for(a=d[D],u=d[D+1],s=a;s<u;s++)P[h=c[s]]=M,A[h]=l[s],N.push(h);for(a=g[D],u=g[D+1],s=a;s<u;s++)P[h=v[s]]===M&&(A[h]=E(A[h],m[s]));for(s=S[D];s<N.length;){var O=A[h=N[s]];x(O,_)?N.splice(s,1):(w.push(O),s++)}}return S[Z]=N.length,t.createSparseMatrix({values:w,index:N,ptr:S,size:[C,Z],datatype:o})}}),sC=(0,tR.d5)("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",t=>(e,i)=>t(r(e),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",t=>(e,i)=>t(r(e),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",t=>(e,i)=>t(e,r(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",t=>(e,i)=>t(e,r(i)).valueOf())}}),sZ="leftShift",sx=(0,tR.d5)(sZ,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=t,a=(0,sg.M)({typed:e}),u=(0,o5.v)({typed:e,equalScalar:i}),h=sy({typed:e,equalScalar:i}),l=(0,sb.H)({typed:e,DenseMatrix:o}),c=(0,o9.e)({typed:e,equalScalar:i}),d=(0,sv.R)({typed:e}),f=(0,o7.L)({typed:e,matrix:r,concat:s}),p=sC({typed:e,matrix:r});return e(sZ,{"number, number":iu.ZG,"BigNumber, BigNumber":ia.Mw,"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():c(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():d(e,r,t,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):l(r,e,t,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):d(r,e,t,!0))},p,f({SS:h,DS:a,SD:u}))});function s_(t){var{DenseMatrix:e}=t;return function(t,r,i){var n=t.size();if(2!==n.length)throw RangeError("Matrix must be two dimensional (size: "+(0,rt.WU)(n)+")");var o=n[0];if(o!==n[1])throw RangeError("Matrix must be square (size: "+(0,rt.WU)(n)+")");var s=[];if((0,tY.SW)(r)){var a=r.size(),u=r._data;if(1===a.length){if(a[0]!==o)throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)s[h]=[u[h]];return new e({data:s,size:[o,1],datatype:r._datatype})}if(2===a.length){if(a[0]!==o||1!==a[1])throw RangeError("Dimension mismatch. Matrix columns must match vector length.");if((0,tY.jH)(r)){if(i){s=[];for(var l=0;l<o;l++)s[l]=[u[l][0]];return new e({data:s,size:[o,1],datatype:r._datatype})}return r}if((0,tY.sA)(r)){for(var c=0;c<o;c++)s[c]=[0];for(var d=r._values,f=r._index,p=r._ptr,m=p[1],v=p[0];v<m;v++)s[f[v]][0]=d[v];return new e({data:s,size:[o,1],datatype:r._datatype})}}throw RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if((0,tY.kJ)(r)){var g=(0,e7.aJ)(r);if(1===g.length){if(g[0]!==o)throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<o;b++)s[b]=[r[b]];return new e({data:s,size:[o,1]})}if(2===g.length){if(g[0]!==o||1!==g[1])throw RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<o;y++)s[y]=[r[y][0]];return new e({data:s,size:[o,1]})}throw RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var sE="lsolve",sw=(0,tR.d5)(sE,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t=>{var{typed:e,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=t,u=s_({DenseMatrix:a});return e(sE,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=(e=u(t,e,!0))._data,h=t._size[0],l=t._size[1],c=t._values,d=t._index,f=t._ptr,p=[],m=0;m<l;m++){var v=r[m][0]||0;if(s(v,0))p[m]=[0];else{for(var g=0,b=[],y=[],C=f[m],Z=f[m+1],x=C;x<Z;x++){var _=d[x];_===m?g=c[x]:_>m&&(b.push(c[x]),y.push(_))}if(s(g,0))throw Error("Linear system cannot be solved since matrix is singular");for(var E=i(v,g),w=0,N=y.length;w<N;w++){var S=y[w];r[S]=[o(r[S][0]||0,n(E,b[w]))]}p[m]=[E]}}return new a({data:p,size:[h,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return h(t,e)},"Array, Array | Matrix":function(t,e){return h(r(t),e).valueOf()}});function h(t,e){for(var r=(e=u(t,e,!0))._data,h=t._size[0],l=t._size[1],c=[],d=t._data,f=0;f<l;f++){var p=r[f][0]||0,m=void 0;if(s(p,0))m=0;else{var v=d[f][f];if(s(v,0))throw Error("Linear system cannot be solved since matrix is singular");m=i(p,v);for(var g=f+1;g<h;g++)r[g]=[o(r[g][0]||0,n(m,d[g][f]))]}c[f]=[m]}return new a({data:c,size:[h,1]})}}),sN="matrixFromColumns",sS=(0,tR.d5)(sN,["typed","matrix","flatten","size"],t=>{var{typed:e,matrix:r,flatten:i,size:n}=t;return e(sN,{"...Array":function(t){return o(t)},"...Matrix":function(t){return r(o(t.map(t=>t.toArray())))}});function o(t){if(0===t.length)throw TypeError("At least one column is needed to construct a matrix.");for(var e=s(t[0]),r=[],n=0;n<e;n++)r[n]=[];for(var o of t){var a=s(o);if(a!==e)throw TypeError("The vectors had different length: "+(0|e)+"  "+(0|a));for(var u=i(o),h=0;h<e;h++)r[h].push(u[h])}return r}function s(t){var e=n(t);if(1===e.length)return e[0];if(2===e.length){if(1===e[0])return e[1];if(1===e[1])return e[0];throw TypeError("At least one of the arguments is not a vector.")}throw TypeError("Only one- or two-dimensional vectors are supported.")}}),sA=r(1418),sP="nthRoot",sD=(0,tR.d5)(sP,["typed","matrix","equalScalar","BigNumber","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,BigNumber:n,concat:o}=t,s=(0,sg.M)({typed:e}),a=(0,o5.v)({typed:e,equalScalar:i}),u=(0,sA.X)({typed:e,equalScalar:i}),h=(0,o9.e)({typed:e,equalScalar:i}),l=(0,o7.L)({typed:e,matrix:r,concat:o});function c(){throw Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(sP,{number:rA,"number, number":rA,BigNumber:t=>d(t,new n(2)),"BigNumber, BigNumber":d,Complex:c,"Complex, number":c,Array:e.referTo("DenseMatrix,number",t=>e=>t(r(e),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",t=>e=>t(e,2)),SparseMatrix:e.referTo("SparseMatrix,number",t=>e=>t(e,2)),"SparseMatrix, SparseMatrix":e.referToSelf(t=>(e,r)=>{if(1===r.density())return u(e,r,t);throw Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(t=>(e,r)=>{if(1===r.density())return s(e,r,t,!1);throw Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",t=>(e,i)=>t(r(e),i)),"number | BigNumber, SparseMatrix":e.referToSelf(t=>(e,r)=>{if(1===r.density())return h(r,e,t,!0);throw Error("Root must be non-zero")})},l({scalar:"number | BigNumber",SD:a,Ss:h,sS:!1}));function d(t,e){var r=n.precision,i=n.clone({precision:r+2}),o=new n(0),s=new i(1),a=e.isNegative();if(a&&(e=e.neg()),e.isZero())throw Error("Root must be non-zero");if(t.isNegative()&&!e.abs().mod(2).equals(1))throw Error("Root must be odd when a is negative.");if(t.isZero())return a?new i(1/0):0;if(!t.isFinite())return a?o:t;var u=t.abs().pow(s.div(e));return u=t.isNeg()?u.neg():u,new n((a?s.div(u):u).toPrecision(r))}}),sM=(0,tR.d5)("ones",["typed","config","matrix","BigNumber"],t=>{var{typed:e,config:r,matrix:i,BigNumber:n}=t;return e("ones",{"":function(){return"Array"===r.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return o(t,e)}return"Array"===r.matrix?o(t):o(t,"default")},Array:o,Matrix:function(t){var e=t.storage();return o(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return o(t.valueOf(),e)}});function o(t,e){var r,o=(r=!1,t.forEach(function(t,e,i){(0,tY.l9)(t)&&(r=!0,i[e]=t.toNumber())}),r)?new n(1):1;if(function(t){t.forEach(function(t){if("number"!=typeof t||!(0,tI.U)(t)||t<0)throw Error("Parameters in function ones must be positive integers")})}(t),e){var s=i(e);return t.length>0?s.resize(t,o):s}var a=[];return t.length>0?(0,e7.SI)(a,t,o):a}}),sO=r(2110),sT=(0,tR.d5)("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],t=>{var{typed:e,matrix:r,zeros:i,identity:n,isZero:o,equal:s,sign:a,sqrt:u,conj:h,unaryMinus:l,addScalar:c,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:m}=t;return(0,sO.Z)(e("qr",{DenseMatrix:function(t){return g(t)},SparseMatrix:function(t){return function(t){throw Error("qr not implemented for sparse matrices yet")}(0)},Array:function(t){var e=g(r(t));return{Q:e.Q.valueOf(),R:e.R.valueOf()}}}),{_denseQRimpl:v});function v(t){var e,r,m,v=t._size[0],g=t._size[1],b=n([v],"dense"),y=b._data,C=t.clone(),Z=C._data,x=i([v],"");for(m=0;m<Math.min(g,v);++m){var _=Z[m][m],E=l(s(_,0)?1:a(_)),w=h(E),N=0;for(e=m;e<v;e++)N=c(N,f(Z[e][m],h(Z[e][m])));var S=f(E,u(N));if(!o(S)){var A=p(_,S);for(x[m]=1,e=m+1;e<v;e++)x[e]=d(Z[e][m],A);var P=l(h(d(A,S))),D=void 0;for(r=m;r<g;r++){for(D=0,e=m;e<v;e++)D=c(D,f(h(x[e]),Z[e][r]));for(D=f(D,P),e=m;e<v;e++)Z[e][r]=f(p(Z[e][r],f(x[e],D)),w)}for(e=0;e<v;e++){for(D=0,r=m;r<v;r++)D=c(D,f(y[e][r],x[r]));for(D=f(D,P),r=m;r<v;++r)y[e][r]=d(p(y[e][r],f(D,h(x[r]))),w)}}}return{Q:b,R:C,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function g(t){var e=v(t),r=e.R._data;if(t._data.length>0)for(var i="Complex"===r[0][0].type?m(0):0,n=0;n<r.length;++n)for(var o=0;o<n&&o<(r[0]||[]).length;++o)r[n][o]=i;return e}});function sB(t,e,r,i){if(!(this instanceof sB))throw SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=i?"-"+i:"")+" expected)",this.stack=Error().stack}sB.prototype=Error(),sB.prototype.constructor=Error,sB.prototype.name="ArgumentsError",sB.prototype.isArgumentsError=!0;var sF=(0,tR.d5)("resize",["config","matrix"],t=>{var{config:e,matrix:r}=t;return function(t,i,n){if(2!=arguments.length&&3!=arguments.length)throw new sB("resize",arguments.length,2,3);if((0,tY.SW)(i)&&(i=i.valueOf()),(0,tY.l9)(i[0])&&(i=i.map(function(t){return(0,tY.l9)(t)?t.toNumber():t})),(0,tY.SW)(t))return t.resize(i,n,!0);if("string"==typeof t)return function(t,e,r){if(void 0!==r){if("string"!=typeof r||1!==r.length)throw TypeError("Single character expected as defaultValue")}else r=" ";if(1!==e.length)throw new rr.m(e.length,1);var i=e[0];if("number"!=typeof i||!(0,tI.U)(i))throw TypeError("Invalid size, must contain positive integers (size: "+(0,rt.WU)(e)+")");if(t.length>i)return t.substring(0,i);if(!(t.length<i))return t;for(var n=t,o=0,s=i-t.length;o<s;o++)n+=r;return n}(t,i,n);var o=!Array.isArray(t)&&"Array"!==e.matrix;if(0===i.length){for(;Array.isArray(t);)t=t[0];return(0,re.d9)(t)}Array.isArray(t)||(t=[t]),t=(0,re.d9)(t);var s=(0,e7.SI)(t,i,n);return o?r(s):s}}),sR="rightArithShift",sL=(0,tR.d5)(sR,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=t,a=(0,sg.M)({typed:e}),u=(0,o5.v)({typed:e,equalScalar:i}),h=sy({typed:e,equalScalar:i}),l=(0,sb.H)({typed:e,DenseMatrix:o}),c=(0,o9.e)({typed:e,equalScalar:i}),d=(0,sv.R)({typed:e}),f=(0,o7.L)({typed:e,matrix:r,concat:s}),p=sC({typed:e,matrix:r});return e(sR,{"number, number":iu.Lz,"BigNumber, BigNumber":ia.ti,"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():c(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():d(e,r,t,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):l(r,e,t,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):d(r,e,t,!0))},p,f({SS:h,DS:a,SD:u}))}),sk="Number of decimals in function round must be an integer",sI="round",sY=(0,tR.d5)(sI,["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],t=>{var{typed:e,matrix:r,equalScalar:i,zeros:n,BigNumber:o,DenseMatrix:s}=t,a=(0,o9.e)({typed:e,equalScalar:i}),u=(0,o6.O)({typed:e,DenseMatrix:s}),h=(0,sv.R)({typed:e});return e(sI,{number:rT,"number, number":rT,"number, BigNumber":function(t,e){if(!e.isInteger())throw TypeError(sk);return new o(t).toDecimalPlaces(e.toNumber())},Complex:function(t){return t.round()},"Complex, number":function(t,e){if(e%1)throw TypeError(sk);return t.round(e)},"Complex, BigNumber":function(t,e){if(!e.isInteger())throw TypeError(sk);var r=e.toNumber();return t.round(r)},BigNumber:function(t){return t.toDecimalPlaces(0)},"BigNumber, BigNumber":function(t,e){if(!e.isInteger())throw TypeError(sk);return t.toDecimalPlaces(e.toNumber())},Fraction:function(t){return t.round()},"Fraction, number":function(t,e){if(e%1)throw TypeError(sk);return t.round(e)},"Fraction, BigNumber":function(t,e){if(!e.isInteger())throw TypeError(sk);return t.round(e.toNumber())},"Unit, number, Unit":e.referToSelf(t=>function(e,r,i){var n=e.toNumeric(i);return i.multiply(t(n,r))}),"Unit, BigNumber, Unit":e.referToSelf(t=>(e,r,i)=>t(e,r.toNumber(),i)),"Unit, Unit":e.referToSelf(t=>(e,r)=>t(e,0,r)),"Array | Matrix, number, Unit":e.referToSelf(t=>(e,r,i)=>(0,rd.Fh)(e,e=>t(e,r,i),!0)),"Array | Matrix, BigNumber, Unit":e.referToSelf(t=>(e,r,i)=>t(e,r.toNumber(),i)),"Array | Matrix, Unit":e.referToSelf(t=>(e,r)=>t(e,0,r)),"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>a(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>h(e,r,t,!1)),"Array, number | BigNumber":e.referToSelf(t=>(e,i)=>h(r(e),i,t,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):u(r,e,t,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):h(r,e,t,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(t=>(e,i)=>h(r(i),e,t,!0).valueOf())})}),sU="smaller",sj=(0,tR.d5)(sU,["typed","config","matrix","DenseMatrix","concat"],t=>{var{typed:e,config:r,matrix:i,DenseMatrix:n,concat:o}=t,s=(0,o8.$)({typed:e}),a=o4({typed:e,DenseMatrix:n}),u=(0,o6.O)({typed:e,DenseMatrix:n}),h=(0,o7.L)({typed:e,matrix:i,concat:o}),l=iM({typed:e});return e(sU,sz({typed:e,config:r}),{"boolean, boolean":(t,e)=>t<e,"BigNumber, BigNumber":function(t,e){return t.lt(e)&&!iD(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>-1===t.compare(e),"Complex, Complex":function(t,e){throw TypeError("No ordering relation is defined for complex numbers")}},l,h({SS:a,DS:s,Ss:u}))}),sz=(0,tR.d5)(sU,["typed","config"],t=>{var{typed:e,config:r}=t;return e(sU,{"number, number":function(t,e){return t<e&&!(0,tI.RI)(t,e,r.epsilon)}})}),sX=r(9322),sJ="subtract",sG=(0,tR.d5)(sJ,["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,subtractScalar:n,unaryMinus:o,DenseMatrix:s,concat:a}=t,u=(0,sg.M)({typed:e}),h=(0,o8.$)({typed:e}),l=(0,sX.b)({typed:e,equalScalar:i}),c=(0,sb.H)({typed:e,DenseMatrix:s}),d=(0,o6.O)({typed:e,DenseMatrix:s}),f=(0,o7.L)({typed:e,matrix:r,concat:a});return e(sJ,{"any, any":n},f({elop:n,SS:l,DS:u,SD:h,Ss:d,sS:c}))}),sH=(0,tR.d5)("to",["typed","matrix","concat"],t=>{var{typed:e,matrix:r,concat:i}=t,n=(0,o7.L)({typed:e,matrix:r,concat:i});return e("to",{"Unit, Unit | string":(t,e)=>t.to(e)},n({Ds:!0}))}),sV="unequal",sq=(0,tR.d5)(sV,["typed","config","equalScalar","matrix","DenseMatrix","concat"],t=>{var{typed:e,config:r,equalScalar:i,matrix:n,DenseMatrix:o,concat:s}=t,a=(0,o8.$)({typed:e}),u=o4({typed:e,DenseMatrix:o}),h=(0,o6.O)({typed:e,DenseMatrix:o}),l=(0,o7.L)({typed:e,matrix:n,concat:s});return e(sV,sW({typed:e,equalScalar:i}),l({elop:function(t,e){return!i(t,e)},SS:u,DS:a,Ss:h}))}),sW=(0,tR.d5)(sV,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(sV,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!r(t,e)}})}),sQ="usolve",s$=(0,tR.d5)(sQ,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t=>{var{typed:e,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=t,u=s_({DenseMatrix:a});return e(sQ,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=(e=u(t,e,!0))._data,h=t._size[0],l=t._size[1],c=t._values,d=t._index,f=t._ptr,p=[],m=l-1;m>=0;m--){var v=r[m][0]||0;if(s(v,0))p[m]=[0];else{for(var g=0,b=[],y=[],C=f[m],Z=f[m+1],x=Z-1;x>=C;x--){var _=d[x];_===m?g=c[x]:_<m&&(b.push(c[x]),y.push(_))}if(s(g,0))throw Error("Linear system cannot be solved since matrix is singular");for(var E=i(v,g),w=0,N=y.length;w<N;w++){var S=y[w];r[S]=[o(r[S][0],n(E,b[w]))]}p[m]=[E]}}return new a({data:p,size:[h,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return h(t,e)},"Array, Array | Matrix":function(t,e){return h(r(t),e).valueOf()}});function h(t,e){for(var r=(e=u(t,e,!0))._data,h=t._size[0],l=t._size[1],c=[],d=t._data,f=l-1;f>=0;f--){var p=r[f][0]||0,m=void 0;if(s(p,0))m=0;else{var v=d[f][f];if(s(v,0))throw Error("Linear system cannot be solved since matrix is singular");m=i(p,v);for(var g=f-1;g>=0;g--)r[g]=[o(r[g][0]||0,n(m,d[g][f]))]}c[f]=[m]}return new a({data:c,size:[h,1]})}}),sK=(0,tR.d5)("xor",["typed","matrix","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,DenseMatrix:i,concat:n}=t,o=(0,o8.$)({typed:e}),s=o4({typed:e,DenseMatrix:i}),a=(0,o6.O)({typed:e,DenseMatrix:i}),u=(0,o7.L)({typed:e,matrix:r,concat:n});return e("xor",{"number, number":nb.kl,"Complex, Complex":function(t,e){return(0!==t.re||0!==t.im)!=(0!==e.re||0!==e.im)},"BigNumber, BigNumber":function(t,e){return(!t.isZero()&&!t.isNaN())!=(!e.isZero()&&!e.isNaN())},"Unit, Unit":e.referToSelf(t=>(e,r)=>t(e.value||0,r.value||0))},u({SS:s,DS:o,Ss:a}))}),s0=r(6101),s1=(0,tR.d5)("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],t=>{var{typed:e,matrix:r,addScalar:i,equalScalar:n,DenseMatrix:o,SparseMatrix:s,concat:a}=t,u=(0,sg.M)({typed:e}),h=(0,s0.v)({typed:e,equalScalar:n}),l=(0,sb.H)({typed:e,DenseMatrix:o}),c=(0,o7.L)({typed:e,matrix:r,concat:a});return e("add",{"any, any":i,"any, any, ...any":e.referToSelf(t=>(e,r,i)=>{for(var n=t(e,r),o=0;o<i.length;o++)n=t(n,i[o]);return n})},c({elop:i,DS:u,SS:h,Ss:l}))}),s2=(0,tR.d5)("matAlgo09xS0Sf",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,n){var o,s,a,u,h,l,c=t._values,d=t._index,f=t._ptr,p=t._size,m=t._datatype,v=i._values,g=i._index,b=i._ptr,y=i._size,C=i._datatype;if(p.length!==y.length)throw new rr.m(p.length,y.length);if(p[0]!==y[0]||p[1]!==y[1])throw RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+y+")");var Z=p[0],x=p[1],_=r,E=0,w=n;"string"==typeof m&&m===C&&(o=m,_=e.find(r,[o,o]),E=e.convert(0,o),w=e.find(n,[o,o]));var N=c&&v?[]:void 0,S=[],A=[],P=N?[]:void 0,D=[];for(a=0;a<x;a++){A[a]=S.length;var M=a+1;if(P)for(h=b[a],l=b[a+1],u=h;u<l;u++)D[s=g[u]]=M,P[s]=v[u];for(h=f[a],l=f[a+1],u=h;u<l;u++)if(s=d[u],P){var O=D[s]===M?P[s]:E,T=w(c[u],O);_(T,E)||(S.push(s),N.push(T))}else S.push(s)}return A[x]=S.length,t.createSparseMatrix({values:N,index:S,ptr:A,size:[Z,x],datatype:o})}}),s3="atan2",s5=(0,tR.d5)(s3,["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,BigNumber:n,DenseMatrix:o,concat:s}=t,a=(0,o5.v)({typed:e,equalScalar:i}),u=(0,o8.$)({typed:e}),h=s2({typed:e,equalScalar:i}),l=(0,o9.e)({typed:e,equalScalar:i}),c=(0,o6.O)({typed:e,DenseMatrix:o}),d=(0,o7.L)({typed:e,matrix:r,concat:s});return e(s3,{"number, number":Math.atan2,"BigNumber, BigNumber":(t,e)=>n.atan2(t,e)},d({scalar:"number | BigNumber",SS:h,DS:u,SD:a,Ss:l,sS:c}))}),s8=r(2614),s4=r(145),s9="bitXor",s6=(0,tR.d5)(s9,["typed","matrix","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,DenseMatrix:i,concat:n}=t,o=(0,o8.$)({typed:e}),s=o4({typed:e,DenseMatrix:i}),a=(0,o6.O)({typed:e,DenseMatrix:i}),u=(0,o7.L)({typed:e,matrix:r,concat:n});return e(s9,{"number, number":iu.xS,"BigNumber, BigNumber":ia.nN},u({SS:s,DS:o,Ss:a}))}),s7="catalan",at=(0,tR.d5)(s7,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],t=>{var{typed:e,addScalar:r,divideScalar:i,multiplyScalar:n,combinations:o,isNegative:s,isInteger:a}=t;return e(s7,{"number | BigNumber":function(t){if(!a(t)||s(t))throw TypeError("Non-negative integer value expected in function catalan");return i(o(n(t,2),t),r(t,1))}})}),ae="compare",ar=(0,tR.d5)(ae,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],t=>{var{typed:e,config:r,equalScalar:i,matrix:n,BigNumber:o,Fraction:s,DenseMatrix:a,concat:u}=t,h=(0,o8.$)({typed:e}),l=(0,sX.b)({typed:e,equalScalar:i}),c=(0,o6.O)({typed:e,DenseMatrix:a}),d=(0,o7.L)({typed:e,matrix:n,concat:u}),f=iM({typed:e});return e(ae,ai({typed:e,config:r}),{"boolean, boolean":function(t,e){return t===e?0:t>e?1:-1},"BigNumber, BigNumber":function(t,e){return new o(iD(t,e,r.epsilon)?0:t.cmp(e))},"Fraction, Fraction":function(t,e){return new s(t.compare(e))},"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:l,DS:h,Ss:c}))}),ai=(0,tR.d5)(ae,["typed","config"],t=>{var{typed:e,config:r}=t;return e(ae,{"number, number":function(t,e){return(0,tI.RI)(t,e,r.epsilon)?0:t>e?1:-1}})}),an="compareText";rt.cd.signature="any, any";var ao=(0,tR.d5)(an,["typed","matrix","concat"],t=>{var{typed:e,matrix:r,concat:i}=t,n=(0,o7.L)({typed:e,matrix:r,concat:i});return e(an,rt.cd,n({elop:rt.cd,Ds:!0}))}),as=r(6363),aa="deepEqual",au=(0,tR.d5)(aa,["typed","equal"],t=>{var{typed:e,equal:r}=t;return e(aa,{"any, any":function(t,e){return function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i))return!1;var n=e.length;if(n!==i.length)return!1;for(var o=0;o<n;o++)if(!t(e[o],i[o]))return!1;return!0}return!Array.isArray(i)&&r(e,i)}(t.valueOf(),e.valueOf())}})}),ah=r(3294),al="distance",ac=(0,tR.d5)(al,["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],t=>{var{typed:e,addScalar:r,subtractScalar:i,multiplyScalar:n,divideScalar:o,deepEqual:s,sqrt:a,abs:u}=t;return e(al,{"Array, Array, Array":function(t,e,r){if(2===t.length&&2===e.length&&2===r.length){if(!l(t))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!l(e))throw TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!l(r))throw TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(e,r))throw TypeError("LinePoint1 should not be same with LinePoint2");var o=i(r[1],e[1]),a=i(e[0],r[0]),u=i(n(r[0],e[1]),n(e[0],r[1]));return m(t[0],t[1],o,a,u)}throw TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(t,e,r){if(2===Object.keys(t).length&&2===Object.keys(e).length&&2===Object.keys(r).length){if(!l(t))throw TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!l(e))throw TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!l(r))throw TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(p(e),p(r)))throw TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in t&&"pointY"in t&&"lineOnePtX"in e&&"lineOnePtY"in e&&"lineTwoPtX"in r&&"lineTwoPtY"in r){var o=i(r.lineTwoPtY,e.lineOnePtY),a=i(e.lineOnePtX,r.lineTwoPtX),u=i(n(r.lineTwoPtX,e.lineOnePtY),n(e.lineOnePtX,r.lineTwoPtY));return m(t.pointX,t.pointY,o,a,u)}throw TypeError("Key names do not match")}throw TypeError("Invalid Arguments: Try again")},"Array, Array":function(t,e){if(2===t.length&&3===e.length){if(!l(t))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(e))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(t[0],t[1],e[0],e[1],e[2])}if(3===t.length&&6===e.length){if(!c(t))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(e))throw TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(t[0],t[1],t[2],e[0],e[1],e[2],e[3],e[4],e[5])}if(t.length===e.length&&t.length>0){if(!d(t)||!d(e))throw TypeError("All values of an array should be numbers or BigNumbers");return g(t,e)}throw TypeError("Invalid Arguments: Try again")},"Object, Object":function(t,e){if(2===Object.keys(t).length&&3===Object.keys(e).length){if(!l(t))throw TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(e))throw TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"xCoeffLine"in e&&"yCoeffLine"in e&&"constant"in e)return m(t.pointX,t.pointY,e.xCoeffLine,e.yCoeffLine,e.constant);throw TypeError("Key names do not match")}if(3===Object.keys(t).length&&6===Object.keys(e).length){if(!c(t))throw TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(e))throw TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"x0"in e&&"y0"in e&&"z0"in e&&"a"in e&&"b"in e&&"c"in e)return v(t.pointX,t.pointY,t.pointZ,e.x0,e.y0,e.z0,e.a,e.b,e.c);throw TypeError("Key names do not match")}if(2===Object.keys(t).length&&2===Object.keys(e).length){if(!l(t))throw TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!l(e))throw TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointTwoX"in e&&"pointTwoY"in e)return g([t.pointOneX,t.pointOneY],[e.pointTwoX,e.pointTwoY]);throw TypeError("Key names do not match")}if(3===Object.keys(t).length&&3===Object.keys(e).length){if(!c(t))throw TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!c(e))throw TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointOneZ"in t&&"pointTwoX"in e&&"pointTwoY"in e&&"pointTwoZ"in e)return g([t.pointOneX,t.pointOneY,t.pointOneZ],[e.pointTwoX,e.pointTwoY,e.pointTwoZ]);throw TypeError("Key names do not match")}throw TypeError("Invalid Arguments: Try again")},Array:function(t){if(!function(t){if(2===t[0].length&&h(t[0][0])&&h(t[0][1])){if(t.some(t=>2!==t.length||!h(t[0])||!h(t[1])))return!1}else if(!(3===t[0].length&&h(t[0][0])&&h(t[0][1])&&h(t[0][2])))return!1;else if(t.some(t=>3!==t.length||!h(t[0])||!h(t[1])||!h(t[2])))return!1;return!0}(t))throw TypeError("Incorrect array format entered for pairwise distance calculation");return function(t){for(var e=[],r=[],i=[],n=0;n<t.length-1;n++)for(var o=n+1;o<t.length;o++)2===t[0].length?(r=[t[n][0],t[n][1]],i=[t[o][0],t[o][1]]):3===t[0].length&&(r=[t[n][0],t[n][1],t[n][2]],i=[t[o][0],t[o][1],t[o][2]]),e.push(g(r,i));return e}(t)}});function h(t){return"number"==typeof t||(0,tY.l9)(t)}function l(t){return t.constructor!==Array&&(t=p(t)),h(t[0])&&h(t[1])}function c(t){return t.constructor!==Array&&(t=p(t)),h(t[0])&&h(t[1])&&h(t[2])}function d(t){return Array.isArray(t)||(t=p(t)),t.every(h)}function f(t){return t.constructor!==Array&&(t=p(t)),h(t[0])&&h(t[1])&&h(t[2])&&h(t[3])&&h(t[4])&&h(t[5])}function p(t){for(var e=Object.keys(t),r=[],i=0;i<e.length;i++)r.push(t[e[i]]);return r}function m(t,e,i,s,h){return o(u(r(r(n(i,t),n(s,e)),h)),a(r(n(i,i),n(s,s))))}function v(t,e,s,u,h,l,c,d,f){var p=[i(n(i(h,e),f),n(i(l,s),d)),i(n(i(l,s),c),n(i(u,t),f)),i(n(i(u,t),d),n(i(h,e),c))];return o(p=a(r(r(n(p[0],p[0]),n(p[1],p[1])),n(p[2],p[2]))),a(r(r(n(c,c),n(d,d)),n(f,f))))}function g(t,e){for(var o=t.length,s=0,u=0,h=0;h<o;h++)s=r(n(u=i(t[h],e[h]),u),s);return a(s)}}),ad=(0,tR.d5)("dot",["typed","addScalar","multiplyScalar","conj","size"],t=>{var{typed:e,addScalar:r,multiplyScalar:i,conj:n,size:o}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,o){var u=s(t,o),h=(0,tY.SW)(t)?t._data:t,l=(0,tY.SW)(t)?t._datatype:void 0,c=(0,tY.SW)(o)?o._data:o,d=(0,tY.SW)(o)?o._datatype:void 0,f=2===a(t).length,p=2===a(o).length,m=r,v=i;if(l&&d&&l===d&&"string"==typeof l&&(m=e.find(r,[l,l]),v=e.find(i,[l,l])),!f&&!p){for(var g=v(n(h[0]),c[0]),b=1;b<u;b++)g=m(g,v(n(h[b]),c[b]));return g}if(!f&&p){for(var y=v(n(h[0]),c[0][0]),C=1;C<u;C++)y=m(y,v(n(h[C]),c[C][0]));return y}if(f&&!p){for(var Z=v(n(h[0][0]),c[0]),x=1;x<u;x++)Z=m(Z,v(n(h[x][0]),c[x]));return Z}if(f&&p){for(var _=v(n(h[0][0]),c[0][0]),E=1;E<u;E++)_=m(_,v(n(h[E][0]),c[E][0]));return _}},"SparseMatrix, SparseMatrix":function(t,e){s(t,e);for(var n=t._index,o=t._values,a=e._index,u=e._values,h=0,l=0,c=0;l<n.length&&c<a.length;){var d=n[l],f=a[c];if(d<f){l++;continue}if(d>f){c++;continue}d===f&&(h=r(h,i(o[l],u[c])),l++,c++)}return h}});function s(t,e){var r,i,n=a(t),o=a(e);if(1===n.length)r=n[0];else if(2===n.length&&1===n[1])r=n[0];else throw RangeError("Expected a column vector, instead got a matrix of size ("+n.join(", ")+")");if(1===o.length)i=o[0];else if(2===o.length&&1===o[1])i=o[0];else throw RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");if(r!==i)throw RangeError("Vectors must have equal length ("+r+" != "+i+")");if(0===r)throw RangeError("Cannot calculate the dot product of empty vectors");return r}function a(t){return(0,tY.SW)(t)?t.size():o(t)}}),af="equalText",ap=(0,tR.d5)(af,["typed","compareText","isZero"],t=>{var{typed:e,compareText:r,isZero:i}=t;return e(af,{"any, any":function(t,e){return i(r(t,e))}})}),am="floor",av=(0,tR.d5)(am,["typed","config","round"],t=>{var{typed:e,config:r,round:i}=t;return e(am,{number:function(t){return(0,tI.RI)(t,i(t),r.epsilon)?i(t):Math.floor(t)},"number, number":function(t,e){if((0,tI.RI)(t,i(t,e),r.epsilon))return i(t,e);var[n,o]="".concat(t,"e").split("e"),s=Math.floor(Number("".concat(n,"e").concat(Number(o)+e)));return[n,o]="".concat(s,"e").split("e"),Number("".concat(n,"e").concat(Number(o)-e))}})}),ag=(0,tR.d5)(am,["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],t=>{var{typed:e,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}=t,u=(0,o9.e)({typed:e,equalScalar:o}),h=(0,o6.O)({typed:e,DenseMatrix:a}),l=(0,sv.R)({typed:e}),c=av({typed:e,config:r,round:i});return e("floor",{number:c.signatures.number,"number,number":c.signatures["number,number"],Complex:function(t){return t.floor()},"Complex, number":function(t,e){return t.floor(e)},"Complex, BigNumber":function(t,e){return t.floor(e.toNumber())},BigNumber:function(t){return iD(t,i(t),r.epsilon)?i(t):t.floor()},"BigNumber, BigNumber":function(t,e){return iD(t,i(t,e),r.epsilon)?i(t,e):t.toDecimalPlaces(e.toNumber(),tF.ROUND_FLOOR)},Fraction:function(t){return t.floor()},"Fraction, number":function(t,e){return t.floor(e)},"Fraction, BigNumber":function(t,e){return t.floor(e.toNumber())},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),"Array, number | BigNumber":e.referToSelf(t=>(e,r)=>(0,rd.Fh)(e,e=>t(e,r),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>u(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>l(e,r,t,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(t=>(e,r)=>l(n(r),e,t,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(t=>(e,r)=>o(e,0)?s(r.size(),r.storage()):"dense"===r.storage()?l(r,e,t,!0):h(r,e,t,!0))})}),ab=(0,tR.d5)("mod",["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],t=>{var{typed:e,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a,concat:u}=t,h=ag({typed:e,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}),l=(0,o5.v)({typed:e,equalScalar:o}),c=(0,o8.$)({typed:e}),d=(0,sX.b)({typed:e,equalScalar:o}),f=(0,o9.e)({typed:e,equalScalar:o}),p=(0,o6.O)({typed:e,DenseMatrix:a}),m=(0,o7.L)({typed:e,matrix:n,concat:u});return e("mod",{"number, number":function(t,e){return 0===e?t:t-e*h(t/e)},"BigNumber, BigNumber":function(t,e){return e.isZero()?t:t.sub(e.mul(h(t.div(e))))},"Fraction, Fraction":function(t,e){return e.equals(0)?t:t.sub(e.mul(h(t.div(e))))}},m({SS:d,DS:c,SD:l,Ss:f,sS:p}))}),ay="number | BigNumber | Fraction | Matrix | Array",aC="".concat(ay,", ").concat(ay,", ...").concat(ay);function aZ(t){return!t.some(t=>Array.isArray(t))}var ax=(0,tR.d5)("gcd",["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,config:i,round:n,equalScalar:o,zeros:s,BigNumber:a,DenseMatrix:u,concat:h}=t,l=ab({typed:e,config:i,round:n,matrix:r,equalScalar:o,zeros:s,DenseMatrix:u,concat:h}),c=(0,sg.M)({typed:e}),d=(0,s0.v)({typed:e,equalScalar:o}),f=(0,sb.H)({typed:e,DenseMatrix:u}),p=(0,o7.L)({typed:e,matrix:r,concat:h});return e("gcd",{"number, number":function(t,e){var r;if(!(0,tI.U)(t)||!(0,tI.U)(e))throw Error("Parameters in function gcd must be integer numbers");for(;0!==e;)r=l(t,e),t=e,e=r;return t<0?-t:t},"BigNumber, BigNumber":function(t,e){if(!t.isInt()||!e.isInt())throw Error("Parameters in function gcd must be integer numbers");for(var r=new a(0);!e.isZero();){var i=l(t,e);t=e,e=i}return t.lt(r)?t.neg():t},"Fraction, Fraction":(t,e)=>t.gcd(e)},p({SS:d,DS:c,Ss:f}),{[aC]:e.referToSelf(t=>(e,r,i)=>{for(var n=t(e,r),o=0;o<i.length;o++)n=t(n,i[o]);return n}),Array:e.referToSelf(t=>e=>{if(1===e.length&&Array.isArray(e[0])&&aZ(e[0]))return t(...e[0]);if(aZ(e))return t(...e);throw new sB("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(t=>e=>t(e.toArray()))})}),a_="hypot",aE=(0,tR.d5)(a_,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],t=>{var{typed:e,abs:r,addScalar:i,divideScalar:n,multiplyScalar:o,sqrt:s,smaller:a,isPositive:u}=t;return e(a_,{"... number | BigNumber":h,Array:h,Matrix:t=>h((0,e7.xH)(t.toArray()))});function h(t){for(var e=0,h=0,l=0;l<t.length;l++){if((0,tY.Mc)(t[l]))throw TypeError("Unexpected type of argument to hypot");var c=r(t[l]);a(h,c)?(e=i(e=o(e,o(n(h,c),n(h,c))),1),h=c):e=i(e,u(c)?o(n(c,h),n(c,h)):c)}return o(h,s(e))}}),aw=(0,tR.d5)("ImmutableDenseMatrix",["smaller","DenseMatrix"],t=>{var{smaller:e,DenseMatrix:r}=t;function i(t,e){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");if(e&&!(0,tY.HD)(e))throw Error("Invalid datatype: "+e);if((0,tY.SW)(t)||(0,tY.kJ)(t)){var n=new r(t,e);this._data=n._data,this._size=n._size,this._datatype=n._datatype,this._min=null,this._max=null}else if(t&&(0,tY.kJ)(t.data)&&(0,tY.kJ)(t.size))this._data=t.data,this._size=t.size,this._datatype=t.datatype,this._min=void 0!==t.min?t.min:null,this._max=void 0!==t.max?t.max:null;else if(t)throw TypeError("Unsupported type of data ("+(0,tY.kM)(t)+")");else this._data=[],this._size=[0],this._datatype=e,this._min=null,this._max=null}return i.prototype=new r,i.prototype.type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(t){switch(arguments.length){case 1:var e=r.prototype.subset.call(this,t);if((0,tY.SW)(e))return new i({data:e._data,size:e._size,datatype:e._datatype});return e;case 2:case 3:throw Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){return new i({data:(0,re.d9)(this._data),size:(0,re.d9)(this._size),datatype:this._datatype})},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(t){return new i(t)},i.prototype.swapRows=function(){throw Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(r){(null===t||e(r,t))&&(t=r)}),this._min=null!==t?t:void 0}return this._min},i.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(r){(null===t||e(t,r))&&(t=r)}),this._max=null!==t?t:void 0}return this._max},i},{isClass:!0}),aN=(0,tR.d5)("Index",["ImmutableDenseMatrix","getMatrixDataType"],t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function i(t){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var e=0,o=arguments.length;e<o;e++){var s=arguments[e],a=(0,tY.kJ)(s),u=(0,tY.SW)(s),h=null;if((0,tY.bR)(s))this._dimensions.push(s),this._isScalar=!1;else if(a||u){var l=void 0;"boolean"===r(s)?(a&&(l=n(aS(s).valueOf())),u&&(l=n(aS(s._data).valueOf())),h=s.valueOf().length):l=n(s.valueOf()),this._dimensions.push(l);var c=l.size();(1!==c.length||1!==c[0]||null!==h)&&(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else if("string"==typeof s)this._dimensions.push(s);else throw TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(h)}}function n(t){for(var r=0,i=t.length;r<i;r++)if("number"!=typeof t[r]||!(0,tI.U)(t[r]))throw TypeError("Index parameters must be positive integer numbers");return new e(t)}return i.prototype.type="Index",i.prototype.isIndex=!0,i.prototype.clone=function(){var t=new i;return t._dimensions=(0,re.d9)(this._dimensions),t._isScalar=this._isScalar,t._sourceSize=this._sourceSize,t},i.create=function(t){var e=new i;return i.apply(e,t),e},i.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var i=this._dimensions[e];t[e]="string"==typeof i?1:i.size()[0]}return t},i.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var i=this._dimensions[e];t[e]="string"==typeof i?i:i.max()}return t},i.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var i=this._dimensions[e];t[e]="string"==typeof i?i:i.min()}return t},i.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},i.prototype.dimension=function(t){return this._dimensions[t]||null},i.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},i.prototype.isScalar=function(){return this._isScalar},i.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var i=this._dimensions[e];t.push("string"==typeof i?i:i.toArray())}return t},i.prototype.valueOf=i.prototype.toArray,i.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var i=this._dimensions[e];"string"==typeof i?t.push(JSON.stringify(i)):t.push(i.toString())}return"["+t.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},i.fromJSON=function(t){return i.create(t.dimensions)},i},{isClass:!0});function aS(t){var e=[];return t.forEach((t,r)=>{t&&e.push(r)}),e}var aA="larger",aP=(0,tR.d5)(aA,["typed","config","matrix","DenseMatrix","concat"],t=>{var{typed:e,config:r,matrix:i,DenseMatrix:n,concat:o}=t,s=(0,o8.$)({typed:e}),a=o4({typed:e,DenseMatrix:n}),u=(0,o6.O)({typed:e,DenseMatrix:n}),h=(0,o7.L)({typed:e,matrix:i,concat:o}),l=iM({typed:e});return e(aA,aD({typed:e,config:r}),{"boolean, boolean":(t,e)=>t>e,"BigNumber, BigNumber":function(t,e){return t.gt(e)&&!iD(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>1===t.compare(e),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},l,h({SS:a,DS:s,Ss:u}))}),aD=(0,tR.d5)(aA,["typed","config"],t=>{var{typed:e,config:r}=t;return e(aA,{"number, number":function(t,e){return t>e&&!(0,tI.RI)(t,e,r.epsilon)}})}),aM=(0,tR.d5)("log",["config","typed","divideScalar","Complex"],t=>{var{typed:e,config:r,divideScalar:i,Complex:n}=t;return e("log",{number:function(t){var e;return t>=0||r.predictable?e?Math.log(t)/Math.log(e):Math.log(t):new n(t,0).log()},Complex:function(t){return t.log()},BigNumber:function(t){return!t.isNegative()||r.predictable?t.ln():new n(t.toNumber(),0).log()},"any, any":e.referToSelf(t=>(e,r)=>i(t(e),t(r)))})}),aO="lsolveAll",aT=(0,tR.d5)(aO,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t=>{var{typed:e,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=t,u=s_({DenseMatrix:a});return e(aO,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=[u(t,e,!0)._data.map(t=>t[0])],h=t._size[0],l=t._size[1],c=t._values,d=t._index,f=t._ptr,p=0;p<l;p++)for(var m=r.length,v=0;v<m;v++){for(var g=r[v],b=[],y=[],C=f[p],Z=f[p+1],x=0,_=C;_<Z;_++){var E=d[_];E===p?x=c[_]:E>p&&(b.push(c[_]),y.push(E))}if(s(x,0)){if(s(g[p],0)){if(0===v){var w=[...g];w[p]=1;for(var N=0,S=y.length;N<S;N++){var A=y[N];w[A]=o(w[A],b[N])}r.push(w)}}else{if(0===v)return[];r.splice(v,1),v-=1,m-=1}}else{g[p]=i(g[p],x);for(var P=0,D=y.length;P<D;P++){var M=y[P];g[M]=o(g[M],n(g[p],b[P]))}}}return r.map(t=>new a({data:t.map(t=>[t]),size:[h,1]}))}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return h(t,e)},"Array, Array | Matrix":function(t,e){return h(r(t),e).map(t=>t.valueOf())}});function h(t,e){for(var r=[u(t,e,!0)._data.map(t=>t[0])],h=t._data,l=t._size[0],c=t._size[1],d=0;d<c;d++)for(var f=r.length,p=0;p<f;p++){var m=r[p];if(s(h[d][d],0)){if(s(m[d],0)){if(0===p){var v=[...m];v[d]=1;for(var g=d+1;g<c;g++)v[g]=o(v[g],h[g][d]);r.push(v)}}else{if(0===p)return[];r.splice(p,1),p-=1,f-=1}}else{m[d]=i(m[d],h[d][d]);for(var b=d+1;b<c;b++)m[b]=o(m[b],n(m[d],h[b][d]))}}return r.map(t=>new a({data:t.map(t=>[t]),size:[l,1]}))}}),aB="matrixFromRows",aF=(0,tR.d5)(aB,["typed","matrix","flatten","size"],t=>{var{typed:e,matrix:r,flatten:i,size:n}=t;return e(aB,{"...Array":function(t){return o(t)},"...Matrix":function(t){return r(o(t.map(t=>t.toArray())))}});function o(t){if(0===t.length)throw TypeError("At least one row is needed to construct a matrix.");var e=s(t[0]),r=[];for(var n of t){var o=s(n);if(o!==e)throw TypeError("The vectors had different length: "+(0|e)+"  "+(0|o));r.push(i(n))}return r}function s(t){var e=n(t);if(1===e.length)return e[0];if(2===e.length){if(1===e[0])return e[1];if(1===e[1])return e[0];throw TypeError("At least one of the arguments is not a vector.")}throw TypeError("Only one- or two-dimensional vectors are supported.")}}),aR=r(7543),aL="multiply",ak=(0,tR.d5)(aL,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],t=>{var{typed:e,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:o,dot:s}=t,a=(0,o9.e)({typed:e,equalScalar:o}),u=(0,sv.R)({typed:e});function h(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}var l=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,r){var o,s=t._data,a=t._size,u=t._datatype,h=r._data,l=r._datatype,c=a[0],d=a[1],f=i,p=n;u&&l&&u===l&&"string"==typeof u&&(o=u,f=e.find(i,[o,o]),p=e.find(n,[o,o]));for(var m=[],v=0;v<c;v++){for(var g=s[v],b=p(g[0],h[0]),y=1;y<d;y++)b=f(b,p(g[y],h[y]));m[v]=b}return t.createDenseMatrix({data:m,size:[c],datatype:o})},"SparseMatrix, any":function(t,r){var s,a=t._values,u=t._index,h=t._ptr,l=t._datatype;if(!a)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c=r._data,d=r._datatype,f=t._size[0],p=r._size[0],m=[],v=[],g=[],b=i,y=n,C=o,Z=0;l&&d&&l===d&&"string"==typeof l&&(s=l,b=e.find(i,[s,s]),y=e.find(n,[s,s]),C=e.find(o,[s,s]),Z=e.convert(0,s));var x=[],_=[];g[0]=0;for(var E=0;E<p;E++){var w=c[E];if(!C(w,Z))for(var N=h[E],S=h[E+1],A=N;A<S;A++){var P=u[A];_[P]?x[P]=b(x[P],y(w,a[A])):(_[P]=!0,v.push(P),x[P]=y(w,a[A]))}}for(var D=v.length,M=0;M<D;M++){var O=v[M];m[M]=x[O]}return g[1]=v.length,t.createSparseMatrix({values:m,index:v,ptr:g,size:[f,1],datatype:s})}}),c=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,r){var o,s=t._data,a=t._size,u=t._datatype,h=r._data,l=r._size,c=r._datatype,d=a[0],f=a[1],p=l[1],m=i,v=n;u&&c&&u===c&&"string"==typeof u&&(o=u,m=e.find(i,[o,o]),v=e.find(n,[o,o]));for(var g=[],b=0;b<d;b++){var y=s[b];g[b]=[];for(var C=0;C<p;C++){for(var Z=v(y[0],h[0][C]),x=1;x<f;x++)Z=m(Z,v(y[x],h[x][C]));g[b][C]=Z}}return t.createDenseMatrix({data:g,size:[d,p],datatype:o})},"DenseMatrix, SparseMatrix":function(t,r){var s,a=t._data,u=t._size,h=t._datatype,l=r._values,c=r._index,d=r._ptr,f=r._size,p=r._datatype;if(!l)throw Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m=u[0],v=f[1],g=i,b=n,y=o,C=0;h&&p&&h===p&&"string"==typeof h&&(s=h,g=e.find(i,[s,s]),b=e.find(n,[s,s]),y=e.find(o,[s,s]),C=e.convert(0,s));for(var Z=[],x=[],_=[],E=r.createSparseMatrix({values:Z,index:x,ptr:_,size:[m,v],datatype:s}),w=0;w<v;w++){_[w]=x.length;var N=d[w],S=d[w+1];if(S>N)for(var A=0,P=0;P<m;P++){for(var D=P+1,M=void 0,O=N;O<S;O++){var T=c[O];A!==D?(M=b(a[P][T],l[O]),A=D):M=g(M,b(a[P][T],l[O]))}A!==D||y(M,C)||(x.push(P),Z.push(M))}}return _[v]=x.length,E},"SparseMatrix, DenseMatrix":function(t,r){var s,a=t._values,u=t._index,h=t._ptr,l=t._datatype;if(!a)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c=r._data,d=r._datatype,f=t._size[0],p=r._size[0],m=r._size[1],v=i,g=n,b=o,y=0;l&&d&&l===d&&"string"==typeof l&&(s=l,v=e.find(i,[s,s]),g=e.find(n,[s,s]),b=e.find(o,[s,s]),y=e.convert(0,s));for(var C=[],Z=[],x=[],_=t.createSparseMatrix({values:C,index:Z,ptr:x,size:[f,m],datatype:s}),E=[],w=[],N=0;N<m;N++){x[N]=Z.length;for(var S=N+1,A=0;A<p;A++){var P=c[A][N];if(!b(P,y))for(var D=h[A],M=h[A+1],O=D;O<M;O++){var T=u[O];w[T]!==S?(w[T]=S,Z.push(T),E[T]=g(P,a[O])):E[T]=v(E[T],g(P,a[O]))}}for(var B=x[N],F=Z.length,R=B;R<F;R++){var L=Z[R];C[R]=E[L]}}return x[m]=Z.length,_},"SparseMatrix, SparseMatrix":function(t,r){var o,s,a,u,h,l,c,d,f,p=t._values,m=t._index,v=t._ptr,g=t._datatype,b=r._values,y=r._index,C=r._ptr,Z=r._datatype,x=t._size[0],_=r._size[1],E=p&&b,w=i,N=n;g&&Z&&g===Z&&"string"==typeof g&&(o=g,w=e.find(i,[o,o]),N=e.find(n,[o,o]));for(var S=E?[]:void 0,A=[],P=[],D=t.createSparseMatrix({values:S,index:A,ptr:P,size:[x,_],datatype:o}),M=E?[]:void 0,O=[],T=0;T<_;T++){P[T]=A.length;var B=T+1;for(l=C[T],c=C[T+1],h=l;h<c;h++)if(f=y[h],E)for(a=v[f],u=v[f+1],s=a;s<u;s++)O[d=m[s]]!==B?(O[d]=B,A.push(d),M[d]=N(b[h],p[s])):M[d]=w(M[d],N(b[h],p[s]));else for(a=v[f],u=v[f+1],s=a;s<u;s++)O[d=m[s]]!==B&&(O[d]=B,A.push(d));if(E)for(var F=P[T],R=A.length,L=F;L<R;L++){var k=A[L];S[L]=M[k]}}return P[_]=A.length,D}});return e(aL,n,{"Array, Array":e.referTo("Matrix, Matrix",t=>(e,i)=>{h((0,e7.aJ)(e),(0,e7.aJ)(i));var n=t(r(e),r(i));return(0,tY.SW)(n)?n.valueOf():n}),"Matrix, Matrix":function(t,r){var o=t.size(),a=r.size();return(h(o,a),1===o.length)?1===a.length?function(t,e,r){if(0===r)throw Error("Cannot multiply two empty vectors");return s(t,e)}(t,r,o[0]):function(t,r){if("dense"!==r.storage())throw Error("Support for SparseMatrix not implemented");return function(t,r){var o,s=t._data,a=t._size,u=t._datatype,h=r._data,l=r._size,c=r._datatype,d=a[0],f=l[1],p=i,m=n;u&&c&&u===c&&"string"==typeof u&&(o=u,p=e.find(i,[o,o]),m=e.find(n,[o,o]));for(var v=[],g=0;g<f;g++){for(var b=m(s[0],h[0][g]),y=1;y<d;y++)b=p(b,m(s[y],h[y][g]));v[g]=b}return t.createDenseMatrix({data:v,size:[f],datatype:o})}(t,r)}(t,r):1===a.length?l(t,r):c(t,r)},"Matrix, Array":e.referTo("Matrix,Matrix",t=>(e,i)=>t(e,r(i))),"Array, Matrix":e.referToSelf(t=>(e,i)=>t(r(e,i.storage()),i)),"SparseMatrix, any":function(t,e){return a(t,e,n,!1)},"DenseMatrix, any":function(t,e){return u(t,e,n,!1)},"any, SparseMatrix":function(t,e){return a(e,t,n,!0)},"any, DenseMatrix":function(t,e){return u(e,t,n,!0)},"Array, any":function(t,e){return u(r(t),e,n,!1).valueOf()},"any, Array":function(t,e){return u(r(e),t,n,!0).valueOf()},"any, any":n,"any, any, ...any":e.referToSelf(t=>(e,r,i)=>{for(var n=t(e,r),o=0;o<i.length;o++)n=t(n,i[o]);return n})})}),aI="nthRoots",aY=(0,tR.d5)(aI,["config","typed","divideScalar","Complex"],t=>{var{typed:e,config:r,divideScalar:i,Complex:n}=t,o=[function(t){return new n(t,0)},function(t){return new n(0,t)},function(t){return new n(-t,0)},function(t){return new n(0,-t)}];function s(t,e){if(e<0)throw Error("Root must be greater than zero");if(0===e)throw Error("Root must be non-zero");if(e%1!=0)throw Error("Root must be an integer");if(0===t||0===t.abs())return[new n(0,0)];var r,i="number"==typeof t;(i||0===t.re||0===t.im)&&(r=i?2*+(t<0):0===t.im?2*+(t.re<0):2*+(t.im<0)+1);for(var s=t.arg(),a=t.abs(),u=[],h=Math.pow(a,1/e),l=0;l<e;l++){var c=(r+4*l)/e;if(c===Math.round(c)){u.push(o[c%4](h));continue}u.push(new n({r:h,phi:(s+2*Math.PI*l)/e}))}return u}return e(aI,{Complex:function(t){return s(t,2)},"Complex, number":s})}),aU=r(1845),aj="partitionSelect",az=(0,tR.d5)(aj,["typed","isNumeric","isNaN","compare"],t=>{var{typed:e,isNumeric:r,isNaN:i,compare:n}=t,o=(t,e)=>-n(t,e);return e(aj,{"Array | Matrix, number":function(t,e){return s(t,e,n)},"Array | Matrix, number, string":function(t,e,r){if("asc"===r)return s(t,e,n);if("desc"===r)return s(t,e,o);throw Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(t,e,r){if(!(0,tI.U)(e)||e<0)throw Error("k must be a non-negative integer");if((0,tY.SW)(t)){if(t.size().length>1)throw Error("Only one dimensional matrices supported");return a(t.valueOf(),e,r)}if(Array.isArray(t))return a(t,e,r)}function a(t,e,n){if(e>=t.length)throw Error("k out of bounds");for(var o=0;o<t.length;o++)if(r(t[o])&&i(t[o]))return t[o];for(var s=0,a=t.length-1;s<a;){for(var u=s,h=a,l=t[Math.floor(Math.random()*(a-s+1))+s];u<h;)if(n(t[u],l)>=0){var c=t[h];t[h]=t[u],t[u]=c,--h}else++u;n(t[u],l)>0&&--u,e<=u?a=u:s=u+1}return t[e]}}),aX="rightLogShift",aJ=(0,tR.d5)(aX,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,zeros:n,DenseMatrix:o,concat:s}=t,a=(0,sg.M)({typed:e}),u=(0,o5.v)({typed:e,equalScalar:i}),h=sy({typed:e,equalScalar:i}),l=(0,sb.H)({typed:e,DenseMatrix:o}),c=(0,o9.e)({typed:e,equalScalar:i}),d=(0,sv.R)({typed:e}),f=(0,o7.L)({typed:e,matrix:r,concat:s}),p=sC({typed:e,matrix:r});return e(aX,{"number, number":iu.ji,"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():c(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>i(r,0)?e.clone():d(e,r,t,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):l(r,e,t,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(t=>(e,r)=>i(e,0)?n(r.size(),r.storage()):d(r,e,t,!0))},p,f({SS:h,DS:a,SD:u}))});function aG(t,e,r,i,n,o,s){var a=0;for(r[s]=t;a>=0;){var u=r[s+a],h=r[i+u];-1===h?(a--,o[e++]=u):(r[i+u]=r[n+h],r[s+ ++a]=h)}return e}var aH=(0,tR.d5)("csAmd",["add","multiply","transpose"],t=>{var{add:e,multiply:r,transpose:i}=t;return function(t,s){if(!s||t<=0||t>3)return null;var a,u,h,l,c,d,f,p,m,v,g,b,y,C,Z,x,_=s._size,E=_[0],w=_[1],N=0,S=Math.max(16,10*Math.sqrt(w));S=Math.min(w-2,S);var A=function(t,n,o,s,a){var u=i(n);if(1===t&&s===o)return e(n,u);if(2===t){for(var h=u._index,l=u._ptr,c=0,d=0;d<o;d++){var f=l[d];if(l[d]=c,!(l[d+1]-f>a))for(var p=l[d+1];f<p;f++)h[c++]=h[f]}l[o]=c,n=i(u)}return r(u,n)}(t,s,E,w,S);!function(t,e,r){for(var i=t._values,n=t._index,o=t._ptr,s=t._size[1],a=0,u=0;u<s;u++){var h=o[u];for(o[u]=a;h<o[u+1];h++)e(n[h],u,i?i[h]:1,null)&&(n[a]=n[h],i&&(i[a]=i[h]),a++)}o[s]=a,n.splice(a,n.length-a),i&&i.splice(a,i.length-a)}(A,o,0);for(var P=A._index,D=A._ptr,M=D[w],O=[],T=[],B=w+1,F=2*(w+1),R=3*(w+1),L=4*(w+1),k=5*(w+1),I=6*(w+1),Y=7*(w+1),U=function(t,e,r,i,o,s,a,u,h,l,c,d){for(var f=0;f<t;f++)r[i+f]=e[f+1]-e[f];r[i+t]=0;for(var p=0;p<=t;p++)r[o+p]=-1,s[p]=-1,r[a+p]=-1,r[u+p]=-1,r[h+p]=1,r[l+p]=1,r[c+p]=0,r[d+p]=r[i+p];var m=n(0,0,r,l,t);return r[c+t]=-2,e[t]=-1,r[l+t]=0,m}(w,D,T,0,R,O,F,Y,B,I,L,k),j=function(t,e,r,i,n,o,s,a,u,h,l){for(var c=0,d=0;d<t;d++){var f=r[i+d];if(0===f)r[n+d]=-2,c++,e[d]=-1,r[o+d]=0;else if(f>s)r[a+d]=0,r[n+d]=-1,c++,e[d]=-t-2,r[a+t]++;else{var p=r[u+f];-1!==p&&(h[p]=d),r[l+d]=r[u+f],r[u+f]=d}}return c}(w,D,T,k,L,I,S,B,R,O,F),z=0;j<w;){for(h=-1;z<w&&-1===(h=T[R+z]);z++);-1!==T[F+h]&&(O[T[F+h]]=-1),T[R+z]=T[F+h];var X=T[L+h],J=T[B+h];j+=J;var G=0;T[B+h]=-J;var H=D[h],V=0===X?H:M,q=V;for(l=1;l<=X+1;l++){for(l>X?(d=h,f=H,p=T[0+h]-X):(f=D[d=P[H++]],p=T[0+d]),c=1;c<=p;c++)(m=T[B+(a=P[f++])])<=0||(G+=m,T[B+a]=-m,P[q++]=a,-1!==T[F+a]&&(O[T[F+a]]=O[a]),-1!==O[a]?T[F+O[a]]=T[F+a]:T[R+T[k+a]]=T[F+a]);d!==h&&(D[d]=-h-2,T[I+d]=0)}for(0!==X&&(M=q),T[k+h]=G,D[h]=V,T[0+h]=q-V,T[L+h]=-2,U=n(U,N,T,I,w),v=V;v<q;v++)if(!((g=T[L+(a=P[v])])<=0)){var W=U-(m=-T[B+a]);for(H=D[a],b=D[a]+g-1;H<=b;H++)T[I+(d=P[H])]>=U?T[I+d]-=m:0!==T[I+d]&&(T[I+d]=T[k+d]+W)}for(v=V;v<q;v++){for(Z=0,y=(b=D[a=P[v]])+T[L+a]-1,C=b,x=0,H=b;H<=y;H++)if(0!==T[I+(d=P[H])]){var Q=T[I+d]-U;Q>0?(x+=Q,P[C++]=d,Z+=d):(D[d]=-h-2,T[I+d]=0)}T[L+a]=C-b+1;var $=C,K=b+T[0+a];for(H=y+1;H<K;H++){var tt=T[B+(u=P[H])];tt<=0||(x+=tt,P[C++]=u,Z+=u)}0===x?(D[a]=-h-2,G-=m=-T[B+a],J+=m,j+=m,T[B+a]=0,T[L+a]=-1):(T[k+a]=Math.min(T[k+a],x),P[C]=P[$],P[$]=P[b],P[b]=h,T[0+a]=C-b+1,Z=(Z<0?-Z:Z)%w,T[F+a]=T[Y+Z],T[Y+Z]=a,O[a]=Z)}for(T[k+h]=G,U=n(U+(N=Math.max(N,G)),N,T,I,w),v=V;v<q;v++)if(!(T[B+(a=P[v])]>=0))for(a=T[Y+(Z=O[a])],T[Y+Z]=-1;-1!==a&&-1!==T[F+a];a=T[F+a],U++){for(p=T[0+a],g=T[L+a],H=D[a]+1;H<=D[a]+p-1;H++)T[I+P[H]]=U;var te=a;for(u=T[F+a];-1!==u;){var tr=T[0+u]===p&&T[L+u]===g;for(H=D[u]+1;tr&&H<=D[u]+p-1;H++)T[I+P[H]]!==U&&(tr=0);tr?(D[u]=-a-2,T[B+a]+=T[B+u],T[B+u]=0,T[L+u]=-1,u=T[F+u],T[F+te]=u):(te=u,u=T[F+u])}}for(H=V,v=V;v<q;v++)(m=-T[B+(a=P[v])])<=0||(T[B+a]=m,x=Math.min(x=T[k+a]+G-m,w-j-m),-1!==T[R+x]&&(O[T[R+x]]=a),T[F+a]=T[R+x],O[a]=-1,T[R+x]=a,z=Math.min(z,x),T[k+a]=x,P[H++]=a);T[B+h]=J,0==(T[0+h]=H-V)&&(D[h]=-1,T[I+h]=0),0!==X&&(M=H)}for(a=0;a<w;a++)D[a]=-D[a]-2;for(u=0;u<=w;u++)T[R+u]=-1;for(u=w;u>=0;u--)T[B+u]>0||(T[F+u]=T[R+D[u]],T[R+D[u]]=u);for(d=w;d>=0;d--)T[B+d]<=0||-1===D[d]||(T[F+d]=T[R+D[d]],T[R+D[d]]=d);for(h=0,a=0;a<=w;a++)-1===D[a]&&(h=aG(a,h,T,R,F,O,I));return O.splice(O.length-1,1),O};function n(t,e,r,i,n){if(t<2||t+e<0){for(var o=0;o<n;o++)0!==r[i+o]&&(r[i+o]=1);t=2}return t}function o(t,e){return t!==e}}),aV=(0,tR.d5)("csCounts",["transpose"],t=>{var{transpose:e}=t;return function(t,r,i,n){if(!t||!r||!i)return null;var o,s,a,u,h,l,c,d=t._size,f=d[0],p=d[1],m=4*p+(n?p+f+1:0),v=[],g=2*p,b=3*p,y=4*p,C=5*p+1;for(a=0;a<m;a++)v[a]=-1;var Z=[],x=e(t),_=x._index,E=x._ptr;for(a=0;a<p;a++)for(Z[s=i[a]]=-1===v[b+s]?1:0;-1!==s&&-1===v[b+s];s=r[s])v[b+s]=a;if(n){for(a=0;a<p;a++)v[i[a]]=a;for(o=0;o<f;o++){for(a=p,l=E[o],c=E[o+1],h=l;h<c;h++)a=Math.min(a,v[_[h]]);v[C+o]=v[y+a],v[y+a]=o}}for(o=0;o<p;o++)v[0+o]=o;for(a=0;a<p;a++){for(-1!==r[s=i[a]]&&Z[r[s]]--,u=n?v[y+a]:s;-1!==u;u=n?v[C+u]:-1)for(h=E[u];h<E[u+1];h++){var w=function(t,e,r,i,n,o,s){var a,u,h,l=0;if(t<=e||r[i+e]<=r[n+t])return -1;r[n+t]=r[i+e];var c=r[o+t];if(r[o+t]=e,-1===c)l=1,h=t;else{for(l=2,h=c;h!==r[s+h];h=r[s+h]);for(a=c;a!==h;a=u)u=r[s+a],r[s+a]=h}return{jleaf:l,q:h}}(o=_[h],s,v,b,p,g,0);w.jleaf>=1&&Z[s]++,2===w.jleaf&&Z[w.q]--}-1!==r[s]&&(v[0+s]=r[s])}for(s=0;s<p;s++)-1!==r[s]&&(Z[r[s]]+=Z[s]);return Z}}),aq=(0,tR.d5)("csSqr",["add","multiply","transpose"],t=>{var{add:e,multiply:r,transpose:i}=t,n=aH({add:e,multiply:r,transpose:i}),o=aV({transpose:i});return function(t,e,r){var i,s=e._ptr,a=e._size[1],u={};if(u.q=n(t,e),t&&!u.q)return null;if(r){var h=t?function(t,e,r,i){t._values;for(var n=t._index,o=t._ptr,s=t._size,a=t._datatype,u=s[0],h=s[1],l=[],c=[],d=0,f=0;f<h;f++){c[f]=d;for(var p=r?r[f]:f,m=o[p],v=o[p+1],g=m;g<v;g++){var b=e?e[n[g]]:n[g];l[d]=b,d++}}return c[h]=d,t.createSparseMatrix({values:null,index:l,ptr:c,size:[u,h],datatype:a})}(e,null,u.q,0):e;u.parent=function(t,e){if(!t)return null;var r,i,n=t._index,o=t._ptr,s=t._size,a=s[0],u=s[1],h=[],l=[];if(e)for(r=0;r<a;r++)l[u+r]=-1;for(var c=0;c<u;c++){h[c]=-1,l[0+c]=-1;for(var d=o[c],f=o[c+1],p=d;p<f;p++){var m=n[p];for(r=e?l[u+m]:m;-1!==r&&r<c;r=i)i=l[0+r],l[0+r]=c,-1===i&&(h[r]=c);e&&(l[u+m]=c)}}return h}(h,1);var l=function(t,e){if(!t)return null;var r,i=0,n=[],o=[],s=2*e;for(r=0;r<e;r++)o[0+r]=-1;for(r=e-1;r>=0;r--)-1!==t[r]&&(o[e+r]=o[0+t[r]],o[0+t[r]]=r);for(r=0;r<e;r++)-1===t[r]&&(i=aG(r,i,o,0,e,n,s));return n}(u.parent,a);if(u.cp=o(h,u.parent,l,1),h&&u.parent&&u.cp&&function(t,e){var r,i,n,o,s,a=t._ptr,u=t._index,h=t._size,l=h[0],c=h[1];e.pinv=[],e.leftmost=[];var d=e.parent,f=e.pinv,p=e.leftmost,m=[],v=l+c,g=l+2*c;for(i=0;i<c;i++)m[l+i]=-1,m[v+i]=-1,m[g+i]=0;for(r=0;r<l;r++)p[r]=-1;for(i=c-1;i>=0;i--)for(o=a[i],s=a[i+1],n=o;n<s;n++)p[u[n]]=i;for(r=l-1;r>=0;r--)f[r]=-1,-1!==(i=p[r])&&(0==m[g+i]++&&(m[v+i]=r),m[0+r]=m[l+i],m[l+i]=r);for(i=0,e.lnz=0,e.m2=l;i<c;i++)if(r=m[l+i],e.lnz++,r<0&&(r=e.m2++),f[r]=i,!(--g[i]<=0)){e.lnz+=m[g+i];var b=d[i];-1!==b&&(0===m[g+b]&&(m[v+b]=m[v+i]),m[0+m[v+i]]=m[l+b],m[l+b]=m[0+r],m[g+b]+=m[g+i])}for(r=0;r<l;r++)f[r]<0&&(f[r]=i++);return!0}(h,u))for(u.unz=0,i=0;i<a;i++)u.unz+=u.cp[i]}else u.unz=4*s[a]+a,u.lnz=u.unz;return u}});function aW(t,e){t[e]=-t[e]-2}function aQ(t){return t<0?-t-2:t}var a$=(0,tR.d5)("csSpsolve",["divideScalar","multiply","subtract"],t=>{var{divideScalar:e,multiply:r,subtract:i}=t;return function(t,n,o,s,a,u,h){var l,c,d,f,p=t._values,m=t._index,v=t._ptr,g=t._size[1],b=n._values,y=n._index,C=n._ptr,Z=function(t,e,r,i,n){var o,s,a,u=t._ptr,h=t._size,l=e._index,c=e._ptr,d=h[1],f=d;for(s=c[r],a=c[r+1],o=s;o<a;o++){var p=l[o];u[p]<0||(f=function(t,e,r,i,n){var o,s,a,u=e._index,h=e._ptr,l=e._size[1],c=0;for(i[0]=t;c>=0;){t=i[c];var d=n?n[t]:t;h[t]<0||(aW(h,t),i[l+c]=d<0?0:aQ(h[d]));var f=1;for(s=i[l+c],a=d<0?0:aQ(h[d+1]);s<a;s++)if(!(h[o=u[s]]<0)){i[l+c]=s,i[++c]=o,f=0;break}f&&(c--,i[--r]=t)}return r}(p,t,f,i,n))}for(o=f;o<d;o++)aW(u,i[o]);return f}(t,n,o,s,u);for(l=Z;l<g;l++)a[s[l]]=0;for(c=C[o],d=C[o+1],l=c;l<d;l++)a[y[l]]=b[l];for(var x=Z;x<g;x++){var _=s[x],E=u?u[_]:_;if(!(E<0))for(c=v[E],d=v[E+1],a[_]=e(a[_],p[h?c:d-1]),l=h?c+1:c,f=h?d:d-1;l<f;l++){var w=m[l];a[w]=i(a[w],r(p[l],a[_]))}}return Z}}),aK=(0,tR.d5)("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],t=>{var{abs:e,divideScalar:r,multiply:i,subtract:n,larger:o,largerEq:s,SparseMatrix:a}=t,u=a$({divideScalar:r,multiply:i,subtract:n});return function(t,n,h){if(!t)return null;var l,c,d,f=t._size[1],p=100,m=100;n&&(l=n.q,p=n.lnz||p,m=n.unz||m);var v=[],g=[],b=[],y=new a({values:v,index:g,ptr:b,size:[f,f]}),C=[],Z=[],x=[],_=new a({values:C,index:Z,ptr:x,size:[f,f]}),E=[],w=[],N=[];for(c=0;c<f;c++)w[c]=0,E[c]=-1,b[c+1]=0;p=0,m=0;for(var S=0;S<f;S++){b[S]=p,x[S]=m;var A=l?l[S]:S,P=u(y,t,A,N,w,E,1),D=-1,M=-1;for(d=P;d<f;d++)if(E[c=N[d]]<0){var O=e(w[c]);o(O,M)&&(M=O,D=c)}else Z[m]=E[c],C[m++]=w[c];if(-1===D||M<=0)return null;E[A]<0&&s(e(w[A]),i(M,h))&&(D=A);var T=w[D];for(Z[m]=S,C[m++]=T,E[D]=S,g[p]=D,v[p++]=1,d=P;d<f;d++)E[c=N[d]]<0&&(g[p]=c,v[p++]=r(w[c],T)),w[c]=0}for(d=0,b[f]=p,x[f]=m;d<p;d++)g[d]=E[g[d]];return v.splice(p,v.length-p),g.splice(p,g.length-p),C.splice(m,C.length-m),Z.splice(m,Z.length-m),{L:y,U:_,pinv:E}}}),a0=(0,tR.d5)("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],t=>{var{typed:e,abs:r,add:i,multiply:n,transpose:o,divideScalar:s,subtract:a,larger:u,largerEq:h,SparseMatrix:l}=t,c=aq({add:i,multiply:n,transpose:o}),d=aK({abs:r,divideScalar:s,multiply:n,subtract:a,larger:u,largerEq:h,SparseMatrix:l});return e("slu",{"SparseMatrix, number, number":function(t,e,r){if(!(0,tI.U)(e)||e<0||e>3)throw Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(r<0||r>1)throw Error("Partial pivoting threshold must be a number from 0 to 1");var i=c(e,t,!1),n=d(t,i,r);return{L:n.L,U:n.U,p:n.pinv,q:i.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}),a1=r(7061),a2=r(2296),a3=(0,tR.d5)("trace",["typed","matrix","add"],t=>{var{typed:e,matrix:r,add:i}=t;return e("trace",{Array:function(t){return n(r(t))},SparseMatrix:function(t){var e=t._values,r=t._index,n=t._ptr,o=t._size,s=o[0],a=o[1];if(s===a){var u=0;if(e.length>0)for(var h=0;h<a;h++)for(var l=n[h],c=n[h+1],d=l;d<c;d++){var f=r[d];if(f===h){u=i(u,e[d]);break}if(f>h)break}return u}throw RangeError("Matrix must be square (size: "+(0,rt.WU)(o)+")")},DenseMatrix:n,any:re.d9});function n(t){var e=t._size,r=t._data;switch(e.length){case 1:if(1===e[0])return(0,re.d9)(r[0]);throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");case 2:var n=e[0];if(n===e[1]){for(var o=0,s=0;s<n;s++)o=i(o,r[s][s]);return o}throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,rt.WU)(e)+")")}}}),a5="usolveAll",a8=(0,tR.d5)(a5,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t=>{var{typed:e,matrix:r,divideScalar:i,multiplyScalar:n,subtractScalar:o,equalScalar:s,DenseMatrix:a}=t,u=s_({DenseMatrix:a});return e(a5,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=[u(t,e,!0)._data.map(t=>t[0])],h=t._size[0],l=t._size[1],c=t._values,d=t._index,f=t._ptr,p=l-1;p>=0;p--)for(var m=r.length,v=0;v<m;v++){for(var g=r[v],b=[],y=[],C=f[p],Z=f[p+1],x=0,_=Z-1;_>=C;_--){var E=d[_];E===p?x=c[_]:E<p&&(b.push(c[_]),y.push(E))}if(s(x,0)){if(s(g[p],0)){if(0===v){var w=[...g];w[p]=1;for(var N=0,S=y.length;N<S;N++){var A=y[N];w[A]=o(w[A],b[N])}r.push(w)}}else{if(0===v)return[];r.splice(v,1),v-=1,m-=1}}else{g[p]=i(g[p],x);for(var P=0,D=y.length;P<D;P++){var M=y[P];g[M]=o(g[M],n(g[p],b[P]))}}}return r.map(t=>new a({data:t.map(t=>[t]),size:[h,1]}))}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return h(t,e)},"Array, Array | Matrix":function(t,e){return h(r(t),e).map(t=>t.valueOf())}});function h(t,e){for(var r=[u(t,e,!0)._data.map(t=>t[0])],h=t._data,l=t._size[0],c=t._size[1],d=c-1;d>=0;d--)for(var f=r.length,p=0;p<f;p++){var m=r[p];if(s(h[d][d],0)){if(s(m[d],0)){if(0===p){var v=[...m];v[d]=1;for(var g=d-1;g>=0;g--)v[g]=o(v[g],h[g][d]);r.push(v)}}else{if(0===p)return[];r.splice(p,1),p-=1,f-=1}}else{m[d]=i(m[d],h[d][d]);for(var b=d-1;b>=0;b--)m[b]=o(m[b],n(m[d],h[b][d]))}}return r.map(t=>new a({data:t.map(t=>[t]),size:[l,1]}))}}),a4="zpk2tf",a9=(0,tR.d5)(a4,["typed","add","multiply","Complex","number"],t=>{var{typed:e,add:r,multiply:i,Complex:n,number:o}=t;return e(a4,{"Array,Array,number":function(t,e,r){return s(t,e,r)},"Array,Array":function(t,e){return s(t,e,1)},"Matrix,Matrix,number":function(t,e,r){return s(t.valueOf(),e.valueOf(),r)},"Matrix,Matrix":function(t,e){return s(t.valueOf(),e.valueOf(),1)}});function s(t,e,r){t.some(t=>"BigNumber"===t.type)&&(t=t.map(t=>o(t))),e.some(t=>"BigNumber"===t.type)&&(e=e.map(t=>o(t)));for(var s=[n(1,0)],u=[n(1,0)],h=0;h<t.length;h++){var l=t[h];"number"==typeof l&&(l=n(l,0)),s=a(s,[n(1,0),n(-l.re,-l.im)])}for(var c=0;c<e.length;c++){var d=e[c];"number"==typeof d&&(d=n(d,0)),u=a(u,[n(1,0),n(-d.re,-d.im)])}for(var f=0;f<s.length;f++)s[f]=i(s[f],r);return[s,u]}function a(t,e){for(var o=[],s=0;s<t.length+e.length-1;s++){o[s]=n(0,0);for(var a=0;a<t.length;a++)s-a>=0&&s-a<e.length&&(o[s]=r(o[s],i(t[a],e[s-a])))}return o}}),a6="ceil",a7=(0,tR.d5)(a6,["typed","config","round"],t=>{var{typed:e,config:r,round:i}=t;return e(a6,{number:function(t){return(0,tI.RI)(t,i(t),r.epsilon)?i(t):Math.ceil(t)},"number, number":function(t,e){if((0,tI.RI)(t,i(t,e),r.epsilon))return i(t,e);var[n,o]="".concat(t,"e").split("e"),s=Math.ceil(Number("".concat(n,"e").concat(Number(o)+e)));return[n,o]="".concat(s,"e").split("e"),Number("".concat(n,"e").concat(Number(o)-e))}})}),ut=(0,tR.d5)(a6,["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],t=>{var{typed:e,config:r,round:i,matrix:n,equalScalar:o,zeros:s,DenseMatrix:a}=t,u=(0,o9.e)({typed:e,equalScalar:o}),h=(0,o6.O)({typed:e,DenseMatrix:a}),l=(0,sv.R)({typed:e}),c=a7({typed:e,config:r,round:i});return e("ceil",{number:c.signatures.number,"number,number":c.signatures["number,number"],Complex:function(t){return t.ceil()},"Complex, number":function(t,e){return t.ceil(e)},"Complex, BigNumber":function(t,e){return t.ceil(e.toNumber())},BigNumber:function(t){return iD(t,i(t),r.epsilon)?i(t):t.ceil()},"BigNumber, BigNumber":function(t,e){return iD(t,i(t,e),r.epsilon)?i(t,e):t.toDecimalPlaces(e.toNumber(),tF.ROUND_CEIL)},Fraction:function(t){return t.ceil()},"Fraction, number":function(t,e){return t.ceil(e)},"Fraction, BigNumber":function(t,e){return t.ceil(e.toNumber())},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),"Array, number | BigNumber":e.referToSelf(t=>(e,r)=>(0,rd.Fh)(e,e=>t(e,r),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>u(e,r,t,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(t=>(e,r)=>l(e,r,t,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(t=>(e,r)=>l(n(r),e,t,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(t=>(e,r)=>o(e,0)?s(r.size(),r.storage()):"dense"===r.storage()?l(r,e,t,!0):h(r,e,t,!0))})}),ue=r(7852),ur="compareNatural",ui=(0,tR.d5)(ur,["typed","compare"],t=>{var{typed:e,compare:r}=t,i=r.signatures["boolean,boolean"];return e(ur,{"any, any":function t(e,o){var s,a=(0,tY.kM)(e),u=(0,tY.kM)(o);if(("number"===a||"BigNumber"===a||"Fraction"===a)&&("number"===u||"BigNumber"===u||"Fraction"===u))return"0"!==(s=r(e,o)).toString()?s>0?1:-1:ue(a,u);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(a)||h.includes(u))return 0!==(s=function t(e,r,i){return(0,tY.sA)(r)&&(0,tY.sA)(i)?n(e,r.toJSON().values,i.toJSON().values):(0,tY.sA)(r)?t(e,r.toArray(),i):(0,tY.sA)(i)?t(e,r,i.toArray()):(0,tY.jH)(r)?t(e,r.toJSON().data,i):(0,tY.jH)(i)?t(e,r,i.toJSON().data):Array.isArray(r)?Array.isArray(i)?n(e,r,i):t(e,r,[i]):t(e,[r],i)}(t,e,o))?s:ue(a,u);if(a!==u)return ue(a,u);if("Complex"===a)return e.re>o.re?1:e.re<o.re?-1:e.im>o.im?1:e.im<o.im?-1:0;if("Unit"===a)return e.equalBase(o)?t(e.value,o.value):n(t,e.formatUnits(),o.formatUnits());if("boolean"===a)return i(e,o);if("string"===a)return ue(e,o);if("Object"===a)return function(t,e,r){var i=Object.keys(e),o=Object.keys(r);i.sort(ue),o.sort(ue);var s=n(t,i,o);if(0!==s)return s;for(var a=0;a<i.length;a++){var u=t(e[i[a]],r[o[a]]);if(0!==u)return u}return 0}(t,e,o);if("null"===a||"undefined"===a)return 0;throw TypeError('Unsupported type of value "'+a+'"')}});function n(t,e,r){for(var i=0,n=Math.min(e.length,r.length);i<n;i++){var o=t(e[i],r[i]);if(0!==o)return o}return e.length>r.length?1:e.length<r.length?-1:0}}),un="composition",uo=(0,tR.d5)(un,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],t=>{var{typed:e,addScalar:r,combinations:i,isPositive:n,isNegative:o,isInteger:s,larger:a}=t;return e(un,{"number | BigNumber, number | BigNumber":function(t,e){if(s(t)&&n(t)&&s(e)&&n(e)){if(a(e,t))throw TypeError("k must be less than or equal to n in function composition")}else throw TypeError("Positive integer value expected in function composition");return i(r(t,-1),r(e,-1))}})}),us="cross",ua=(0,tR.d5)(us,["typed","matrix","subtract","multiply"],t=>{var{typed:e,matrix:r,subtract:i,multiply:n}=t;return e(us,{"Matrix, Matrix":function(t,e){return r(o(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return r(o(t.toArray(),e))},"Array, Matrix":function(t,e){return r(o(t,e.toArray()))},"Array, Array":o});function o(t,e){var r=Math.max((0,e7.aJ)(t).length,(0,e7.aJ)(e).length);t=(0,e7.L9)(t),e=(0,e7.L9)(e);var o=(0,e7.aJ)(t),s=(0,e7.aJ)(e);if(1!==o.length||1!==s.length||3!==o[0]||3!==s[0])throw RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+s.join(", ")+"])");var a=[i(n(t[1],e[2]),n(t[2],e[1])),i(n(t[2],e[0]),n(t[0],e[2])),i(n(t[0],e[1]),n(t[1],e[0]))];return r>1?[a]:a}}),uu=(0,tR.d5)("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],t=>{var{typed:e,matrix:r,subtractScalar:i,multiply:n,divideScalar:o,isZero:s,unaryMinus:a}=t;return e("det",{any:function(t){return(0,re.d9)(t)},"Array | Matrix":function(t){var e;switch((e=(0,tY.SW)(t)?t.size():Array.isArray(t)?(t=r(t)).size():[]).length){case 0:return(0,re.d9)(t);case 1:if(1===e[0])return(0,re.d9)(t.valueOf()[0]);if(0===e[0])return 1;throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");case 2:var u=e[0],h=e[1];if(u===h)return function(t,e,r){if(1===e)return(0,re.d9)(t[0][0]);if(2===e)return i(n(t[0][0],t[1][1]),n(t[1][0],t[0][1]));for(var u=!1,h=Array(e).fill(0).map((t,e)=>e),l=0;l<e;l++){var c=h[l];if(s(t[c][l])){var d=void 0;for(d=l+1;d<e;d++)if(!s(t[h[d]][l])){c=h[d],h[d]=h[l],h[l]=c,u=!u;break}if(d===e)return t[c][l]}for(var f=t[c][l],p=0===l?1:t[h[l-1]][l-1],m=l+1;m<e;m++)for(var v=h[m],g=l+1;g<e;g++)t[v][g]=o(i(n(t[v][g],f),n(t[v][l],t[c][g])),p)}var b=t[h[e-1]][e-1];return u?a(b):b}(t.clone().valueOf(),u,0);if(0===h)return 1;throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,rt.WU)(e)+")")}}})}),uh="dotMultiply",ul=(0,tR.d5)(uh,["typed","matrix","equalScalar","multiplyScalar","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,multiplyScalar:n,concat:o}=t,s=(0,o5.v)({typed:e,equalScalar:i}),a=s2({typed:e,equalScalar:i}),u=(0,o9.e)({typed:e,equalScalar:i}),h=(0,o7.L)({typed:e,matrix:r,concat:o});return e(uh,h({elop:n,SS:a,DS:s,Ss:u}))}),uc=(0,tR.d5)("FibonacciHeap",["smaller","larger"],t=>{var{smaller:e,larger:r}=t,i=1/Math.log((1+Math.sqrt(5))/2);function n(){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function o(t,e,r){e.left.right=e.right,e.right.left=e.left,r.degree--,r.child===e&&(r.child=e.right),0===r.degree&&(r.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1}n.prototype.type="FibonacciHeap",n.prototype.isFibonacciHeap=!0,n.prototype.insert=function(t,r){var i={key:t,value:r,degree:0};if(this._minimum){var n=this._minimum;i.left=n,i.right=n.right,n.right=i,i.right.left=i,e(t,n.key)&&(this._minimum=i)}else i.left=i,i.right=i,this._minimum=i;return this._size++,i},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._minimum=null,this._size=0},n.prototype.isEmpty=function(){return 0===this._size},n.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var n=this._minimum,o=t.degree,a=t.child;o>0;){var u=a.right;a.left.right=a.right,a.right.left=a.left,a.left=n,a.right=n.right,n.right=a,a.right.left=a,a.parent=null,a=u,o--}return t.left.right=t.right,t.right.left=t.left,n=t===t.right?null:function(t,n){var o,a=Math.floor(Math.log(n)*i)+1,u=Array(a),h=0,l=t;if(l)for(h++,l=l.right;l!==t;)h++,l=l.right;for(;h>0;){for(var c=l.degree,d=l.right;o=u[c];){if(r(l.key,o.key)){var f=o;o=l,l=f}s(o,l),u[c]=null,c++}u[c]=l,l=d,h--}t=null;for(var p=0;p<a;p++)(o=u[p])&&(t?(o.left.right=o.right,o.right.left=o.left,o.left=t,o.right=t.right,t.right=o,o.right.left=o,e(o.key,t.key)&&(t=o)):t=o);return t}(n=t.right,this._size),this._size--,this._minimum=n,t},n.prototype.remove=function(t){var r,i;this._minimum=(r=this._minimum,t.key=-1,(i=t.parent)&&e(t.key,i.key)&&(o(r,t,i),function t(e,r){var i=r.parent;i&&(r.mark?(o(e,r,i),t(i)):r.mark=!0)}(r,i)),e(t.key,r.key)&&(r=t),r),this.extractMinimum()};var s=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1};return n},{isClass:!0}),ud=(0,tR.d5)("fix",["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:i}=t;return e("fix",{number:function(t){return t>0?i(t):r(t)},"number, number":function(t,e){return t>0?i(t,e):r(t,e)}})}),uf=(0,tR.d5)("fix",["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],t=>{var{typed:e,Complex:r,matrix:i,ceil:n,floor:o,equalScalar:s,zeros:a,DenseMatrix:u}=t,h=(0,o6.O)({typed:e,DenseMatrix:u}),l=(0,sv.R)({typed:e}),c=ud({typed:e,ceil:n,floor:o});return e("fix",{number:c.signatures.number,"number, number | BigNumber":c.signatures["number,number"],Complex:function(t){return new r(t.re>0?Math.floor(t.re):Math.ceil(t.re),t.im>0?Math.floor(t.im):Math.ceil(t.im))},"Complex, number":function(t,e){return new r(t.re>0?o(t.re,e):n(t.re,e),t.im>0?o(t.im,e):n(t.im,e))},"Complex, BigNumber":function(t,e){var i=e.toNumber();return new r(t.re>0?o(t.re,i):n(t.re,i),t.im>0?o(t.im,i):n(t.im,i))},BigNumber:function(t){return t.isNegative()?n(t):o(t)},"BigNumber, number | BigNumber":function(t,e){return t.isNegative()?n(t,e):o(t,e)},Fraction:function(t){return t.s<0?t.ceil():t.floor()},"Fraction, number | BigNumber":function(t,e){return t.s<0?n(t,e):o(t,e)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(t=>(e,r)=>(0,rd.Fh)(e,e=>t(e,r),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(t=>(e,r)=>l(i(r),e,t,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(t=>(e,r)=>s(e,0)?a(r.size(),r.storage()):"dense"===r.storage()?l(r,e,t,!0):h(r,e,t,!0))})}),up="index",um=(0,tR.d5)(up,["typed","Index"],t=>{var{typed:e,Index:r}=t;return e(up,{"...number | string | BigNumber | Range | Array | Matrix":function(t){var e=t.map(function(t){return(0,tY.l9)(t)?t.toNumber():(0,tY.kJ)(t)||(0,tY.SW)(t)?t.map(function(t){return(0,tY.l9)(t)?t.toNumber():t}):t}),i=new r;return r.apply(i,e),i}})}),uv=(0,tR.d5)("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],t=>{var{typed:e,config:r,abs:i,add:n,addScalar:o,matrix:s,multiply:a,multiplyScalar:u,divideScalar:h,subtract:l,smaller:c,equalScalar:d,flatten:f,isZero:p,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(t,e,r){var i=v(t.valueOf(),e.valueOf(),r.valueOf());return null===i?null:s(i)},"Matrix, Matrix, Matrix, Matrix":function(t,e,r,i){var n=g(t.valueOf(),e.valueOf(),r.valueOf(),i.valueOf());return null===n?null:s(n)}});function v(t,e,r){var i,n,s,a,c,d,f,p,v,g,y,Z,x,_,E,w,N,S;if(t=b(t),e=b(e),r=b(r),!C(t))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!C(e))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!(4===(i=r).length&&m(i[0])&&m(i[1])&&m(i[2])&&m(i[3])))throw TypeError("Array with 4 numbers expected as third argument");return n=t[0],s=t[1],a=t[2],c=e[0],d=e[1],f=e[2],p=r[0],v=r[1],g=r[2],y=r[3],Z=u(n,p),x=u(c,p),_=u(s,v),E=u(d,v),w=u(a,g),N=u(f,g),S=h(l(l(l(y,Z),_),w),l(l(l(o(o(x,E),N),Z),_),w)),[o(n,u(S,l(c,n))),o(s,u(S,l(d,s))),o(a,u(S,l(f,a)))]}function g(t,e,s,f){if(t=b(t),e=b(e),s=b(s),f=b(f),2===t.length){if(!y(t))throw TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(e))throw TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(s))throw TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(f))throw TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(t,e,s,d){var f=l(t,e),m=l(s,d),v=l(u(f[0],m[1]),u(m[0],f[1]));if(p(v)||c(i(v),r.epsilon))return null;var g=u(m[0],t[1]),b=u(m[1],t[0]),y=u(m[0],s[1]),C=u(m[1],s[0]);return n(a(f,h(o(l(l(g,b),y),C),v)),t)}(t,e,s,f)}if(3===t.length){if(!C(t))throw TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!C(e))throw TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!C(s))throw TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!C(f))throw TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(t,e,r,i,n,s,a,c,f,m,v,g){var b=Z(t,a,m,a,e,c,v,c,r,f,g,f),y=Z(m,a,i,t,v,c,n,e,g,f,s,r),C=Z(t,a,i,t,e,c,n,e,r,f,s,r),x=Z(m,a,m,a,v,c,v,c,g,f,g,f),_=Z(i,t,i,t,n,e,n,e,s,r,s,r),E=l(u(b,y),u(C,x)),w=l(u(_,x),u(y,y));if(p(w))return null;var N=h(E,w),S=h(o(b,u(N,y)),x),A=o(t,u(N,l(i,t))),P=o(e,u(N,l(n,e))),D=o(r,u(N,l(s,r))),M=o(a,u(S,l(m,a))),O=o(c,u(S,l(v,c))),T=o(f,u(S,l(g,f)));return d(A,M)&&d(P,O)&&d(D,T)?[A,P,D]:null}(t[0],t[1],t[2],e[0],e[1],e[2],s[0],s[1],s[2],f[0],f[1],f[2])}throw TypeError("Arrays with two or thee dimensional points expected")}function b(t){return 1===t.length?t[0]:t.length>1&&Array.isArray(t[0])&&t.every(t=>Array.isArray(t)&&1===t.length)?f(t):t}function y(t){return 2===t.length&&m(t[0])&&m(t[1])}function C(t){return 3===t.length&&m(t[0])&&m(t[1])&&m(t[2])}function Z(t,e,r,i,n,s,a,h,c,d,f,p){var m=u(l(t,e),l(r,i)),v=u(l(n,s),l(a,h)),g=u(l(c,d),l(f,p));return o(o(m,v),g)}}),ug="invmod",ub=(0,tR.d5)(ug,["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],t=>{var{typed:e,config:r,BigNumber:i,xgcd:n,equal:o,smaller:s,mod:a,add:u,isInteger:h}=t;return e(ug,{"number, number":l,"BigNumber, BigNumber":l});function l(t,e){if(!h(t)||!h(e))throw Error("Parameters in function invmod must be integer numbers");if(t=a(t,e),o(e,0))throw Error("Divisor must be non zero");var r=n(t,e),[l,c]=r=r.valueOf();return o(l,i(1))?(s(c=a(c,e),i(0))&&(c=u(c,e)),c):NaN}}),uy=(0,tR.d5)("lcm",["typed","matrix","equalScalar","concat"],t=>{var{typed:e,matrix:r,equalScalar:i,concat:n}=t,o=(0,o5.v)({typed:e,equalScalar:i}),s=(0,sA.X)({typed:e,equalScalar:i}),a=(0,o9.e)({typed:e,equalScalar:i}),u=(0,o7.L)({typed:e,matrix:r,concat:n}),h="number | BigNumber | Fraction | Matrix | Array",l={};return l["".concat(h,", ").concat(h,", ...").concat(h)]=e.referToSelf(t=>(e,r,i)=>{for(var n=t(e,r),o=0;o<i.length;o++)n=t(n,i[o]);return n}),e("lcm",{"number, number":rw,"BigNumber, BigNumber":function(t,e){if(!t.isInt()||!e.isInt())throw Error("Parameters in function lcm must be integer numbers");if(t.isZero())return t;if(e.isZero())return e;for(var r=t.times(e);!e.isZero();){var i=e;e=t.mod(i),t=i}return r.div(t).abs()},"Fraction, Fraction":(t,e)=>t.lcm(e)},u({SS:s,DS:o,Ss:a}),l)}),uC="log1p",uZ=(0,tR.d5)(uC,["typed","config","divideScalar","log","Complex"],t=>{var{typed:e,config:r,divideScalar:i,log:n,Complex:o}=t;return e(uC,{number:function(t){return t>=-1||r.predictable?(0,tI.Kr)(t):s(new o(t,0))},Complex:s,BigNumber:function(t){var e=t.plus(1);return!e.isNegative()||r.predictable?e.ln():s(new o(t.toNumber(),0))},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t)),"any, any":e.referToSelf(t=>(e,r)=>i(t(e),n(r)))});function s(t){var e=t.re+1;return new o(Math.log(Math.sqrt(e*e+t.im*t.im)),Math.atan2(t.im,e))}}),ux=r(3117),u_="setCartesian",uE=(0,tR.d5)(u_,["typed","size","subset","compareNatural","Index","DenseMatrix"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=t;return e(u_,{"Array | Matrix, Array | Matrix":function(t,e){var a=[];if(0!==i(r(t),new o(0))&&0!==i(r(e),new o(0))){var u=(0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n),h=(0,e7.xH)(Array.isArray(e)?e:e.toArray()).sort(n);a=[];for(var l=0;l<u.length;l++)for(var c=0;c<h.length;c++)a.push([u[l],h[c]])}return Array.isArray(t)&&Array.isArray(e)?a:new s(a)}})}),uw="setDistinct",uN=(0,tR.d5)(uw,["typed","size","subset","compareNatural","Index","DenseMatrix"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=t;return e(uw,{"Array | Matrix":function(t){var e;if(0===i(r(t),new o(0)))e=[];else{var a=(0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n);(e=[]).push(a[0]);for(var u=1;u<a.length;u++)0!==n(a[u],a[u-1])&&e.push(a[u])}return Array.isArray(t)?e:new s(e)}})}),uS="setIsSubset",uA=(0,tR.d5)(uS,["typed","size","subset","compareNatural","Index"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o}=t;return e(uS,{"Array | Matrix, Array | Matrix":function(t,e){if(0===i(r(t),new o(0)))return!0;if(0===i(r(e),new o(0)))return!1;for(var s,a=(0,e7.yV)((0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n)),u=(0,e7.yV)((0,e7.xH)(Array.isArray(e)?e:e.toArray()).sort(n)),h=0;h<a.length;h++){s=!1;for(var l=0;l<u.length;l++)if(0===n(a[h].value,u[l].value)&&a[h].identifier===u[l].identifier){s=!0;break}if(!1===s)return!1}return!0}})}),uP="setPowerset",uD=(0,tR.d5)(uP,["typed","size","subset","compareNatural","Index"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o}=t;return e(uP,{"Array | Matrix":function(t){if(0===i(r(t),new o(0)))return[];for(var e=(0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n),s=[],a=0;a.toString(2).length<=e.length;)s.push(function(t,e){for(var r=[],i=0;i<e.length;i++)"1"===e[i]&&r.push(t[i]);return r}(e,a.toString(2).split("").reverse())),a++;return function(t){for(var e=[],r=t.length-1;r>0;r--)for(var i=0;i<r;i++)t[i].length>t[i+1].length&&(e=t[i],t[i]=t[i+1],t[i+1]=e);return t}(s)}})}),uM="smallerEq",uO=(0,tR.d5)(uM,["typed","config","matrix","DenseMatrix","concat"],t=>{var{typed:e,config:r,matrix:i,DenseMatrix:n,concat:o}=t,s=(0,o8.$)({typed:e}),a=o4({typed:e,DenseMatrix:n}),u=(0,o6.O)({typed:e,DenseMatrix:n}),h=(0,o7.L)({typed:e,matrix:i,concat:o}),l=iM({typed:e});return e(uM,uT({typed:e,config:r}),{"boolean, boolean":(t,e)=>t<=e,"BigNumber, BigNumber":function(t,e){return t.lte(e)||iD(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>1!==t.compare(e),"Complex, Complex":function(){throw TypeError("No ordering relation is defined for complex numbers")}},l,h({SS:a,DS:s,Ss:u}))}),uT=(0,tR.d5)(uM,["typed","config"],t=>{var{typed:e,config:r}=t;return e(uM,{"number, number":function(t,e){return t<=e||(0,tI.RI)(t,e,r.epsilon)}})}),uB="sort",uF=(0,tR.d5)(uB,["typed","matrix","compare","compareNatural"],t=>{var{typed:e,matrix:r,compare:i,compareNatural:n}=t,o=(t,e)=>-i(t,e);return e(uB,{Array:function(t){return a(t),t.sort(i)},Matrix:function(t){return u(t),r(t.toArray().sort(i),t.storage())},"Array, function":function(t,e){return a(t),t.sort(e)},"Matrix, function":function(t,e){return u(t),r(t.toArray().sort(e),t.storage())},"Array, string":function(t,e){return a(t),t.sort(s(e))},"Matrix, string":function(t,e){return u(t),r(t.toArray().sort(s(e)),t.storage())}});function s(t){if("asc"===t)return i;if("desc"===t)return o;if("natural"===t)return n;throw Error('String "asc", "desc", or "natural" expected')}function a(t){if(1!==(0,e7.aJ)(t).length)throw Error("One dimensional array expected")}function u(t){if(1!==t.size().length)throw Error("One dimensional matrix expected")}}),uR=r(6949),uL=r(451),uk=r(8481),uI="setDifference",uY=(0,tR.d5)(uI,["typed","size","subset","compareNatural","Index","DenseMatrix"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=t;return e(uI,{"Array | Matrix, Array | Matrix":function(t,e){var a;if(0===i(r(t),new o(0)))a=[];else{if(0===i(r(e),new o(0)))return(0,e7.xH)(t.toArray());var u,h=(0,e7.yV)((0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n)),l=(0,e7.yV)((0,e7.xH)(Array.isArray(e)?e:e.toArray()).sort(n));a=[];for(var c=0;c<h.length;c++){u=!1;for(var d=0;d<l.length;d++)if(0===n(h[c].value,l[d].value)&&h[c].identifier===l[d].identifier){u=!0;break}u||a.push(h[c])}}return Array.isArray(t)&&Array.isArray(e)?(0,e7.D$)(a):new s((0,e7.D$)(a))}})}),uU="setMultiplicity",uj=(0,tR.d5)(uU,["typed","size","subset","compareNatural","Index"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o}=t;return e(uU,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(t,e){if(0===i(r(e),new o(0)))return 0;for(var s=(0,e7.xH)(Array.isArray(e)?e:e.toArray()),a=0,u=0;u<s.length;u++)0===n(s[u],t)&&a++;return a}})}),uz="setSymDifference",uX=(0,tR.d5)(uz,["typed","size","concat","subset","setDifference","Index"],t=>{var{typed:e,size:r,concat:i,subset:n,setDifference:o,Index:s}=t;return e(uz,{"Array | Matrix, Array | Matrix":function(t,e){if(0===n(r(t),new s(0)))return(0,e7.xH)(e);if(0===n(r(e),new s(0)))return(0,e7.xH)(t);var a=(0,e7.xH)(t),u=(0,e7.xH)(e);return i(o(a,u),o(u,a))}})}),uJ=(0,tR.d5)("Spa",["addScalar","equalScalar","FibonacciHeap"],t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:i}=t;function n(){if(!(this instanceof n))throw SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return n.prototype.type="Spa",n.prototype.isSpa=!0,n.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var r=this._heap.insert(t,e);this._values[t]=r}},n.prototype.get=function(t){var e=this._values[t];return e?e.value:0},n.prototype.accumulate=function(t,r){var i=this._values[t];i?i.value=e(i.value,r):(i=this._heap.insert(t,r),this._values[t]=i)},n.prototype.forEach=function(t,e,i){var n=this._heap,o=this._values,s=[],a=n.extractMinimum();for(a&&s.push(a);a&&a.key<=e;)a.key>=t&&!r(a.value,0)&&i(a.key,a.value,this),(a=n.extractMinimum())&&s.push(a);for(var u=0;u<s.length;u++){var h=s[u];o[(a=n.insert(h.key,h.value)).key]=a}},n.prototype.swap=function(t,e){var r=this._values[t],i=this._values[e];if(!r&&i)r=this._heap.insert(t,i.value),this._heap.remove(i),this._values[t]=r,this._values[e]=void 0;else if(r&&!i)i=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=i,this._values[t]=void 0;else if(r&&i){var n=r.value;r.value=i.value,i.value=n}},n},{isClass:!0}),uG=r(5052),uH=(0,tR.d5)("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],t=>{var{typed:e,matrix:r,divideScalar:i,addScalar:n,multiply:o,unaryMinus:s,det:a,identity:u,abs:h}=t;return e("inv",{"Array | Matrix":function(t){var e=(0,tY.SW)(t)?t.size():(0,e7.aJ)(t);switch(e.length){case 1:if(1===e[0]){if((0,tY.SW)(t))return r([i(1,t.valueOf()[0])]);return[i(1,t[0])]}throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");case 2:var n=e[0],o=e[1];if(n===o){if((0,tY.SW)(t))return r(l(t.valueOf(),n,o),t.storage());return l(t,n,o)}throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");default:throw RangeError("Matrix must be two dimensional (size: "+(0,rt.WU)(e)+")")}},any:function(t){return i(1,t)}});function l(t,e,r){if(1===e){if(0===(f=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,f)]]}if(2===e){var l,c,d,f,p,m=a(t);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[i(t[1][1],m),i(s(t[0][1]),m)],[i(s(t[1][0]),m),i(t[0][0],m)]]}var v=t.concat();for(l=0;l<e;l++)v[l]=v[l].concat();for(var g=u(e).valueOf(),b=0;b<r;b++){var y=h(v[b][b]),C=b;for(l=b+1;l<e;)h(v[l][b])>y&&(y=h(v[l][b]),C=l),l++;if(0===y)throw Error("Cannot calculate inverse, determinant is zero");(l=C)!==b&&(p=v[b],v[b]=v[l],v[l]=p,p=g[b],g[b]=g[l],g[l]=p);var Z=v[b],x=g[b];for(l=0;l<e;l++){var _=v[l],E=g[l];if(l!==b){if(0!==_[b]){for(d=i(s(_[b]),Z[b]),c=b;c<r;c++)_[c]=n(_[c],o(d,Z[c]));for(c=0;c<r;c++)E[c]=n(E[c],o(d,x[c]))}}else{for(d=Z[b],c=b;c<r;c++)_[c]=i(_[c],d);for(c=0;c<r;c++)E[c]=i(E[c],d)}}}return g}}),uV=(0,tR.d5)("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],t=>{var{typed:e,matrix:r,abs:i,addScalar:n,divideScalar:o,multiplyScalar:s,subtractScalar:a,larger:u,equalScalar:h,unaryMinus:l,DenseMatrix:c,SparseMatrix:d,Spa:f}=t;return e("lup",{DenseMatrix:function(t){return p(t)},SparseMatrix:function(t){return function(t){var e,r,n,a=t._size[0],c=t._size[1],p=Math.min(a,c),m=t._values,v=t._index,g=t._ptr,b=[],y=[],C=[],Z=[a,p],x=[],_=[],E=[],w=[p,c],N=[],S=[];for(e=0;e<a;e++)N[e]=e,S[e]=e;var A=function(t,e){var r=S[t],i=S[e];N[r]=e,N[i]=t,S[t]=i,S[e]=r};for(r=0;r<c;r++)!function(){var t=new f;r<a&&(C.push(b.length),b.push(1),y.push(r)),E.push(x.length);var c=g[r],p=g[r+1];for(n=c;n<p;n++)e=v[n],t.set(N[e],m[n]);r>0&&t.forEach(0,r-1,function(e,r){d._forEachRow(e,b,y,C,function(i,n){i>e&&t.accumulate(i,l(s(n,r)))})});var S=r,P=t.get(r),D=i(P);t.forEach(r+1,a-1,function(t,e){var r=i(e);u(r,D)&&(S=t,D=r,P=e)}),r!==S&&(d._swapRows(r,S,Z[1],b,y,C),d._swapRows(r,S,w[1],x,_,E),t.swap(r,S),A(r,S)),t.forEach(0,a-1,function(t,e){t<=r?(x.push(e),_.push(t)):h(e=o(e,P),0)||(b.push(e),y.push(t))})}();return E.push(x.length),C.push(b.length),{L:new d({values:b,index:y,ptr:C,size:Z}),U:new d({values:x,index:_,ptr:E,size:w}),p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(t)},Array:function(t){var e=p(r(t));return{L:e.L.valueOf(),U:e.U.valueOf(),p:e.p}}});function p(t){var e,r,l,d=t._size[0],f=t._size[1],p=Math.min(d,f),m=(0,re.d9)(t._data),v=[],g=[d,p],b=[],y=[p,f],C=[];for(e=0;e<d;e++)C[e]=e;for(r=0;r<f;r++){if(r>0)for(e=0;e<d;e++){var Z=Math.min(e,r),x=0;for(l=0;l<Z;l++)x=n(x,s(m[e][l],m[l][r]));m[e][r]=a(m[e][r],x)}var _=r,E=0,w=0;for(e=r;e<d;e++){var N=m[e][r],S=i(N);u(S,E)&&(_=e,E=S,w=N)}if(r!==_&&(C[r]=[C[_],C[_]=C[r]][0],c._swapRows(r,_,m)),r<d)for(e=r+1;e<d;e++)h(m[e][r],0)||(m[e][r]=o(m[e][r],w))}for(r=0;r<f;r++)for(e=0;e<d;e++){if(0===r&&(e<f&&(b[e]=[]),v[e]=[]),e<r){e<f&&(b[e][r]=m[e][r]),r<d&&(v[e][r]=0);continue}if(e===r){e<f&&(b[e][r]=m[e][r]),r<d&&(v[e][r]=1);continue}e<f&&(b[e][r]=0),r<d&&(v[e][r]=m[e][r])}var A=new c({data:v,size:g}),P=new c({data:b,size:y}),D=[];for(e=0,p=C.length;e<p;e++)D[C[e]]=e;return{L:A,U:P,p:D,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),uq="pinv",uW=(0,tR.d5)(uq,["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],t=>{var{typed:e,matrix:r,inv:i,deepEqual:n,equal:o,dotDivide:s,dot:a,ctranspose:u,divideScalar:h,multiply:l,add:c,Complex:d}=t;return e(uq,{"Array | Matrix":function(t){var e=(0,tY.SW)(t)?t.size():(0,e7.aJ)(t);switch(e.length){case 1:if(m(t))return u(t);if(1===e[0])return i(t);return s(u(t),a(t,t));case 2:if(m(t))return u(t);var n=e[0],o=e[1];if(n===o)try{return i(t)}catch(t){if(t instanceof Error&&t.message.match(/Cannot calculate inverse, determinant is zero/));else throw t}if((0,tY.SW)(t))return r(f(t.valueOf(),n,o),t.storage());return f(t,n,o);default:throw RangeError("Matrix must be two dimensional (size: "+(0,rt.WU)(e)+")")}},any:function(t){return o(t,0)?(0,re.d9)(t):h(1,t)}});function f(t,e,r){var n,{C:o,F:h}=(n=function(t,e,r){for(var i=(0,re.d9)(t),n=0,o=0;o<e&&!(r<=n);o++){for(var a=o;p(i[a][n]);)if(e===++a&&(a=o,r===++n))return i;[i[a],i[o]]=[i[o],i[a]];for(var u=i[o][n],h=0;h<r;h++)i[o][h]=s(i[o][h],u);for(var d=0;d<e;d++)if(d!==o){u=i[d][n];for(var f=0;f<r;f++)i[d][f]=c(i[d][f],l(-1,l(u,i[o][f])))}n++}return i}(t,e,r),{C:t.map((t,r)=>t.filter((t,r)=>r<e&&!p(a(n[r],n[r])))),F:n.filter((t,e)=>!p(a(n[e],n[e])))}),d=l(i(l(u(o),o)),u(o)),f=l(u(h),i(l(h,u(h))));return l(f,d)}function p(t){return o(c(t,d(1,1)),c(0,d(1,1)))}function m(t){return n(c(t,d(1,1)),c(l(t,0),d(1,1)))}}),uQ=(0,tR.d5)("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],t=>{var{typed:e,config:r,identity:i,multiply:n,matrix:o,inv:s,number:a,fraction:u,Complex:h}=t;return e("pow",{"number, number":l,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(t,e){return e.isInteger()||t>=0||r.predictable?t.pow(e):new h(t.toNumber(),0).pow(e.toNumber(),0)},"Fraction, Fraction":function(t,e){var i=t.pow(e);if(null!=i)return i;if(!r.predictable)return l(t.valueOf(),e.valueOf());throw Error("Result of pow is non-rational and cannot be expressed as a fraction")},"Array, number":c,"Array, BigNumber":function(t,e){return c(t,e.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(t,e){return d(t,e.toNumber())},"Unit, number | BigNumber":function(t,e){return t.pow(e)}});function l(t,e){if(r.predictable&&!(0,tI.U)(e)&&t<0)try{var i=u(e),n=a(i);if((e===n||1e-14>Math.abs((e-n)/e))&&i.d%2==1)return(i.n%2==0?1:-1)*Math.pow(-t,e)}catch(t){}return r.predictable&&(t<-1&&e===1/0||t>-1&&t<0&&e===-1/0)?NaN:(0,tI.U)(e)||t>=0||r.predictable?rO(t,e):t*t<1&&e===1/0||t*t>1&&e===-1/0?0:new h(t,0).pow(e,0)}function c(t,e){if(!(0,tI.U)(e))throw TypeError("For A^b, b must be an integer (value is "+e+")");var r=(0,e7.aJ)(t);if(2!==r.length)throw Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");if(e<0)try{return c(s(t),-e)}catch(t){if("Cannot calculate inverse, determinant is zero"===t.message)throw TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+e+")");throw t}for(var o=i(r[0]).valueOf(),a=t;e>=1;)(1&e)==1&&(o=n(a,o)),e>>=1,a=n(a,a);return o}function d(t,e){return o(c(t.valueOf(),e))}}),u$="setIntersect",uK=(0,tR.d5)(u$,["typed","size","subset","compareNatural","Index","DenseMatrix"],t=>{var{typed:e,size:r,subset:i,compareNatural:n,Index:o,DenseMatrix:s}=t;return e(u$,{"Array | Matrix, Array | Matrix":function(t,e){var a;if(0===i(r(t),new o(0))||0===i(r(e),new o(0)))a=[];else{var u=(0,e7.yV)((0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(n)),h=(0,e7.yV)((0,e7.xH)(Array.isArray(e)?e:e.toArray()).sort(n));a=[];for(var l=0;l<u.length;l++)for(var c=0;c<h.length;c++)if(0===n(u[l].value,h[c].value)&&u[l].identifier===h[c].identifier){a.push(u[l]);break}}return Array.isArray(t)&&Array.isArray(e)?(0,e7.D$)(a):new s((0,e7.D$)(a))}})}),u0="setUnion",u1=(0,tR.d5)(u0,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],t=>{var{typed:e,size:r,concat:i,subset:n,setIntersect:o,setSymDifference:s,Index:a}=t;return e(u0,{"Array | Matrix, Array | Matrix":function(t,e){if(0===n(r(t),new a(0)))return(0,e7.xH)(e);if(0===n(r(e),new a(0)))return(0,e7.xH)(t);var u=(0,e7.xH)(t),h=(0,e7.xH)(e);return i(s(u,h),o(u,h))}})}),u2="sqrtm",u3=(0,tR.d5)(u2,["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],t=>{var{typed:e,abs:r,add:i,multiply:n,map:o,sqrt:s,subtract:a,inv:u,size:h,max:l,identity:c}=t;return e(u2,{"Array | Matrix":function(t){var e=(0,tY.SW)(t)?t.size():(0,e7.aJ)(t);switch(e.length){case 1:if(1===e[0])return o(t,s);throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");case 2:if(e[0]===e[1])return function(t){var e,o=0,s=t,d=c(h(t));do{var f=s;if(s=n(.5,i(f,u(d))),d=n(.5,i(d,u(f))),(e=l(r(a(s,f))))>1e-6&&++o>1e3)throw Error("computing square root of matrix: iterative method could not converge")}while(e>1e-6);return s}(t);throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");default:throw RangeError("Matrix must be at most two dimensional (size: "+(0,rt.WU)(e)+")")}}})}),u5=r(7632);function u8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function u4(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u8(Object(r),!0).forEach(function(e){(0,u5.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u8(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var u9=(0,tR.d5)("Unit",["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],t=>{var e,r,i,{on:n,config:o,addScalar:s,subtractScalar:a,multiplyScalar:u,divideScalar:h,pow:l,abs:c,fix:d,round:f,equal:p,isNumeric:m,format:v,number:g,Complex:b,BigNumber:y,Fraction:C}=t;function Z(t,e){if(!(this instanceof Z))throw Error("Constructor must be called with the new operator");if(!(null==t||m(t)||(0,tY.Mc)(t)))throw TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===e)this.units=[],this.dimensions=M.map(t=>0);else if("string"==typeof e){var r=Z.parse(e);this.units=r.units,this.dimensions=r.dimensions}else if((0,tY.wr)(e)&&null===e.value)this.fixPrefix=e.fixPrefix,this.skipAutomaticSimplification=e.skipAutomaticSimplification,this.dimensions=e.dimensions.slice(0),this.units=e.units.map(t=>(0,sO.Z)({},t));else throw TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(t)}function x(){for(;" "===i||"	"===i;)E()}function _(t){return t>="0"&&t<="9"}function E(){r++,i=e.charAt(r)}function w(t){r=t,i=e.charAt(r)}function N(){var t,e="",n=r;if("+"===i?E():"-"===i&&(e+=i,E()),!((t=i)>="0"&&t<="9"||"."===t))return w(n),null;if("."===i){if(e+=i,E(),!_(i))return w(n),null}else{for(;_(i);)e+=i,E();"."===i&&(e+=i,E())}for(;_(i);)e+=i,E();if("E"===i||"e"===i){var o="",s=r;if(o+=i,E(),("+"===i||"-"===i)&&(o+=i,E()),!_(i))return w(s),e;for(e+=o;_(i);)e+=i,E()}return e}function S(t){return i===t?(E(),t):null}Object.defineProperty(Z,"name",{value:"Unit"}),Z.prototype.constructor=Z,Z.prototype.type="Unit",Z.prototype.isUnit=!0,Z.parse=function(t,n){if(n=n||{},r=-1,i="","string"!=typeof(e=t))throw TypeError("Invalid argument in Unit.parse, string expected");var s=new Z;s.units=[];var a=1,u=!1;E(),x();var h=N(),l=null;if(h){if("BigNumber"===o.number)l=new y(h);else if("Fraction"===o.number)try{l=new C(h)}catch(t){l=parseFloat(h)}else l=parseFloat(h);x(),S("*")?(a=1,u=!0):S("/")&&(a=-1,u=!0)}for(var c=[],d=1;;){for(x();"("===i;)c.push(a),d*=a,a=1,E(),x();var f=void 0;if(i){var p=i;if(null===(f=function(){for(var t="";_(i)||Z.isValidAlpha(i);)t+=i,E();var e=t.charAt(0);return Z.isValidAlpha(e)?t:null}()))throw SyntaxError('Unexpected "'+p+'" in "'+e+'" at index '+r.toString())}else break;var m=A(f);if(null===m)throw SyntaxError('Unit "'+f+'" not found.');var v=a*d;if(x(),S("^")){x();var g=N();if(null===g)throw SyntaxError('In "'+t+'", "^" must be followed by a floating-point number');v*=g}s.units.push({unit:m.unit,prefix:m.prefix,power:v});for(var b=0;b<M.length;b++)s.dimensions[b]+=(m.unit.dimensions[b]||0)*v;for(x();")"===i;){if(0===c.length)throw SyntaxError('Unmatched ")" in "'+e+'" at index '+r.toString());d/=c.pop(),E(),x()}if(u=!1,S("*")?(a=1,u=!0):S("/")?(a=-1,u=!0):a=1,m.unit.base){var w=m.unit.base.key;k.auto[w]={unit:m.unit,prefix:m.prefix}}}if(x(),i)throw SyntaxError('Could not parse: "'+t+'"');if(u)throw SyntaxError('Trailing characters: "'+t+'"');if(0!==c.length)throw SyntaxError('Unmatched "(" in "'+e+'"');if(0===s.units.length&&!n.allowNoUnits)throw SyntaxError('"'+t+'" contains no units');return s.value=void 0!==l?s._normalize(l):null,s},Z.prototype.clone=function(){var t=new Z;t.fixPrefix=this.fixPrefix,t.skipAutomaticSimplification=this.skipAutomaticSimplification,t.value=(0,re.d9)(this.value),t.dimensions=this.dimensions.slice(0),t.units=[];for(var e=0;e<this.units.length;e++)for(var r in t.units[e]={},this.units[e])(0,re.nr)(this.units[e],r)&&(t.units[e][r]=this.units[e][r]);return t},Z.prototype.valueType=function(){return(0,tY.kM)(this.value)},Z.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},Z.prototype._normalize=function(t){if(null==t||0===this.units.length)return t;for(var e=t,r=Z._getNumberConverter((0,tY.kM)(t)),i=0;i<this.units.length;i++){var n=r(this.units[i].unit.value),o=r(this.units[i].prefix.value),s=r(this.units[i].power);e=u(e,l(u(n,o),s))}return e},Z.prototype._denormalize=function(t,e){if(null==t||0===this.units.length)return t;for(var r=t,i=Z._getNumberConverter((0,tY.kM)(t)),n=0;n<this.units.length;n++){var o=i(this.units[n].unit.value),s=i(this.units[n].prefix.value),a=i(this.units[n].power);r=h(r,l(u(o,s),a))}return r};var A=tj(t=>{if((0,re.nr)(F,t)){var e=F[t],r=e.prefixes[""];return{unit:e,prefix:r}}for(var i in F)if((0,re.nr)(F,i)&&(0,rt.pn)(t,i)){var n=F[i],o=t.length-i.length,s=t.substring(0,o),a=(0,re.nr)(n.prefixes,s)?n.prefixes[s]:void 0;if(void 0!==a)return{unit:n,prefix:a}}return null},{hasher:t=>t[0],limit:100});function P(t){return t.equalBase(O.NONE)&&null!==t.value&&!o.predictable?t.value:t}Z.isValuelessUnit=function(t){return null!==A(t)},Z.prototype.hasBase=function(t){if("string"==typeof t&&(t=O[t]),!t)return!1;for(var e=0;e<M.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},Z.prototype.equalBase=function(t){for(var e=0;e<M.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},Z.prototype.equals=function(t){return this.equalBase(t)&&p(this.value,t.value)},Z.prototype.multiply=function(t){for(var e=this.clone(),r=(0,tY.wr)(t)?t:new Z(t),i=0;i<M.length;i++)e.dimensions[i]=(this.dimensions[i]||0)+(r.dimensions[i]||0);for(var n=0;n<r.units.length;n++){var o=u4({},r.units[n]);e.units.push(o)}if(null!==this.value||null!==r.value){var s=null===this.value?this._normalize(1):this.value,a=null===r.value?r._normalize(1):r.value;e.value=u(s,a)}else e.value=null;return(0,tY.wr)(t)&&(e.skipAutomaticSimplification=!1),P(e)},Z.prototype.divideInto=function(t){return new Z(t).divide(this)},Z.prototype.divide=function(t){for(var e=this.clone(),r=(0,tY.wr)(t)?t:new Z(t),i=0;i<M.length;i++)e.dimensions[i]=(this.dimensions[i]||0)-(r.dimensions[i]||0);for(var n=0;n<r.units.length;n++){var o=u4(u4({},r.units[n]),{},{power:-r.units[n].power});e.units.push(o)}if(null!==this.value||null!==r.value){var s=null===this.value?this._normalize(1):this.value,a=null===r.value?r._normalize(1):r.value;e.value=h(s,a)}else e.value=null;return(0,tY.wr)(t)&&(e.skipAutomaticSimplification=!1),P(e)},Z.prototype.pow=function(t){for(var e=this.clone(),r=0;r<M.length;r++)e.dimensions[r]=(this.dimensions[r]||0)*t;for(var i=0;i<e.units.length;i++)e.units[i].power*=t;return null!==e.value?e.value=l(e.value,t):e.value=null,e.skipAutomaticSimplification=!1,P(e)},Z.prototype.abs=function(){var t=this.clone();if(null!==t.value){if(t._isDerived()||0===t.units.length||0===t.units[0].unit.offset)t.value=c(t.value);else{var e=t._numberConverter(),r=u(e(t.units[0].unit.value),e(t.units[0].unit.offset));t.value=a(c(s(t.value,r)),r)}}for(var i in t.units)("VA"===t.units[i].unit.name||"VAR"===t.units[i].unit.name)&&(t.units[i].unit=F.W);return t},Z.prototype.to=function(t){var e,r=null===this.value?this._normalize(1):this.value;if("string"==typeof t)e=Z.parse(t);else if((0,tY.wr)(t))e=t.clone();else throw Error("String or Unit expected as parameter");if(!this.equalBase(e))throw Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw Error("Cannot convert to a unit with a value");if(null===this.value||this._isDerived()||0===this.units.length||0===e.units.length||this.units[0].unit.offset===e.units[0].unit.offset)e.value=(0,re.d9)(r);else{var i=Z._getNumberConverter((0,tY.kM)(r)),n=u(this.units[0].unit.value,this.units[0].unit.offset),o=u(e.units[0].unit.value,e.units[0].unit.offset);e.value=s(r,i(a(n,o)))}return e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},Z.prototype.toNumber=function(t){return g(this.toNumeric(t))},Z.prototype.toNumeric=function(t){var e;return(e=t?this.to(t):this.clone())._isDerived()||0===e.units.length?e._denormalize(e.value):e._denormalize(e.value,e.units[0].prefix.value)},Z.prototype.toString=function(){return this.format()},Z.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},Z.fromJSON=function(t){var e=new Z(t.value,t.unit);return e.fixPrefix=t.fixPrefix||!1,e},Z.prototype.valueOf=Z.prototype.toString,Z.prototype.simplify=function(){var t,e,r=this.clone(),i=[];for(var n in I)if((0,re.nr)(I,n)&&r.hasBase(O[n])){t=n;break}if("NONE"===t)r.units=[];else if(t&&(0,re.nr)(I,t)&&(e=I[t]),e)r.units=[{unit:e.unit,prefix:e.prefix,power:1}];else{for(var o=!1,s=0;s<M.length;s++){var a=M[s];Math.abs(r.dimensions[s]||0)>1e-12&&((0,re.nr)(I,a)?i.push({unit:I[a].unit,prefix:I[a].prefix,power:r.dimensions[s]||0}):o=!0)}i.length<r.units.length&&!o&&(r.units=i)}return r},Z.prototype.toSI=function(){for(var t=this.clone(),e=[],r=0;r<M.length;r++){var i=M[r];if(Math.abs(t.dimensions[r]||0)>1e-12){if((0,re.nr)(k.si,i))e.push({unit:k.si[i].unit,prefix:k.si[i].prefix,power:t.dimensions[r]||0});else throw Error("Cannot express custom unit "+i+" in SI units")}}return(t.units=e,t.fixPrefix=!0,t.skipAutomaticSimplification=!0,null!==this.value)?(t.value=null,this.to(t)):t},Z.prototype.formatUnits=function(){for(var t="",e="",r=0,i=0,n=0;n<this.units.length;n++)this.units[n].power>0?(r++,t+=" "+this.units[n].prefix.name+this.units[n].unit.name,Math.abs(this.units[n].power-1)>1e-15&&(t+="^"+this.units[n].power)):this.units[n].power<0&&i++;if(i>0)for(var o=0;o<this.units.length;o++)this.units[o].power<0&&(r>0?(e+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power+1)>1e-15&&(e+="^"+-this.units[o].power)):e+=" "+this.units[o].prefix.name+this.units[o].unit.name+"^"+this.units[o].power);t=t.substr(1),e=e.substr(1),r>1&&i>0&&(t="("+t+")"),i>1&&r>0&&(e="("+e+")");var s=t;return r>0&&i>0&&(s+=" / "),s+=e},Z.prototype.format=function(t){var e=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var i in void 0!==e.value&&null!==e.value&&(0,tY.Mc)(e.value)&&(r=1e-14>Math.abs(e.value.re)),e.units)(0,re.nr)(e.units,i)&&e.units[i].unit&&("VA"===e.units[i].unit.name&&r?e.units[i].unit=F.VAR:"VAR"!==e.units[i].unit.name||r||(e.units[i].unit=F.VA));1===e.units.length&&!e.fixPrefix&&1e-14>Math.abs(e.units[0].power-Math.round(e.units[0].power))&&(e.units[0].prefix=e._bestPrefix());var n=e._denormalize(e.value),o=null!==e.value?v(n,t||{}):"",s=e.formatUnits();return e.value&&(0,tY.Mc)(e.value)&&(o="("+o+")"),s.length>0&&o.length>0&&(o+=" "),o+=s},Z.prototype._bestPrefix=function(){if(1!==this.units.length||Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var t=null!==this.value?c(this.value):0,e=c(this.units[0].unit.value),r=this.units[0].prefix;if(0===t)return r;var i=this.units[0].power,n=Math.log(t/Math.pow(r.value*e,i))/Math.LN10-1.2;if(n>-2.200001&&n<1.800001)return r;n=Math.abs(n);var o=this.units[0].unit.prefixes;for(var s in o)if((0,re.nr)(o,s)){var a=o[s];if(a.scientific){var u=Math.abs(Math.log(t/Math.pow(a.value*e,i))/Math.LN10-1.2);(u<n||u===n&&a.name.length<r.name.length)&&(r=a,n=u)}}return r},Z.prototype.splitUnit=function(t){for(var e=this.clone(),r=[],i=0;i<t.length&&(e=e.to(t[i]),i!==t.length-1);i++){var n=e.toNumeric(),o=f(n),u=new Z(p(o,n)?o:d(e.toNumeric()),t[i].toString());r.push(u),e=a(e,u)}for(var h=0,l=0;l<r.length;l++)h=s(h,r[l].value);return p(h,this.value)&&(e.value=0),r.push(e),r};var D={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:1048576,scientific:!0},Gi:{name:"Gi",value:1073741824,scientific:!0},Ti:{name:"Ti",value:1099511627776,scientific:!0},Pi:{name:"Pi",value:0x4000000000000,scientific:!0},Ei:{name:"Ei",value:0x1000000000000000,scientific:!0},Zi:{name:"Zi",value:11805916207174113e5,scientific:!0},Yi:{name:"Yi",value:12089258196146292e8,scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:1048576,scientific:!0},gibi:{name:"gibi",value:1073741824,scientific:!0},tebi:{name:"tebi",value:1099511627776,scientific:!0},pebi:{name:"pebi",value:0x4000000000000,scientific:!0},exi:{name:"exi",value:0x1000000000000000,scientific:!0},zebi:{name:"zebi",value:11805916207174113e5,scientific:!0},yobi:{name:"yobi",value:12089258196146292e8,scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};D.SHORTLONG=(0,sO.Z)({},D.SHORT,D.LONG),D.BINARY_SHORT=(0,sO.Z)({},D.BINARY_SHORT_SI,D.BINARY_SHORT_IEC),D.BINARY_LONG=(0,sO.Z)({},D.BINARY_LONG_SI,D.BINARY_LONG_IEC);var M=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],O={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var T in O)(0,re.nr)(O,T)&&(O[T].key=T);var B={name:"",base:{},value:1,offset:0,dimensions:M.map(t=>0)},F={meter:{name:"meter",base:O.LENGTH,prefixes:D.LONG,value:1,offset:0},inch:{name:"inch",base:O.LENGTH,prefixes:D.NONE,value:.0254,offset:0},foot:{name:"foot",base:O.LENGTH,prefixes:D.NONE,value:.3048,offset:0},yard:{name:"yard",base:O.LENGTH,prefixes:D.NONE,value:.9144,offset:0},mile:{name:"mile",base:O.LENGTH,prefixes:D.NONE,value:1609.344,offset:0},link:{name:"link",base:O.LENGTH,prefixes:D.NONE,value:.201168,offset:0},rod:{name:"rod",base:O.LENGTH,prefixes:D.NONE,value:5.0292,offset:0},chain:{name:"chain",base:O.LENGTH,prefixes:D.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:O.LENGTH,prefixes:D.NONE,value:1e-10,offset:0},m:{name:"m",base:O.LENGTH,prefixes:D.SHORT,value:1,offset:0},in:{name:"in",base:O.LENGTH,prefixes:D.NONE,value:.0254,offset:0},ft:{name:"ft",base:O.LENGTH,prefixes:D.NONE,value:.3048,offset:0},yd:{name:"yd",base:O.LENGTH,prefixes:D.NONE,value:.9144,offset:0},mi:{name:"mi",base:O.LENGTH,prefixes:D.NONE,value:1609.344,offset:0},li:{name:"li",base:O.LENGTH,prefixes:D.NONE,value:.201168,offset:0},rd:{name:"rd",base:O.LENGTH,prefixes:D.NONE,value:5.02921,offset:0},ch:{name:"ch",base:O.LENGTH,prefixes:D.NONE,value:20.1168,offset:0},mil:{name:"mil",base:O.LENGTH,prefixes:D.NONE,value:254e-7,offset:0},m2:{name:"m2",base:O.SURFACE,prefixes:D.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:O.SURFACE,prefixes:D.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:O.SURFACE,prefixes:D.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:O.SURFACE,prefixes:D.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:O.SURFACE,prefixes:D.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:O.SURFACE,prefixes:D.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:O.SURFACE,prefixes:D.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:O.SURFACE,prefixes:D.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:O.SURFACE,prefixes:D.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:O.SURFACE,prefixes:D.NONE,value:1e4,offset:0},m3:{name:"m3",base:O.VOLUME,prefixes:D.CUBIC,value:1,offset:0},L:{name:"L",base:O.VOLUME,prefixes:D.SHORT,value:.001,offset:0},l:{name:"l",base:O.VOLUME,prefixes:D.SHORT,value:.001,offset:0},litre:{name:"litre",base:O.VOLUME,prefixes:D.LONG,value:.001,offset:0},cuin:{name:"cuin",base:O.VOLUME,prefixes:D.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:O.VOLUME,prefixes:D.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:O.VOLUME,prefixes:D.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:O.VOLUME,prefixes:D.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:O.VOLUME,prefixes:D.NONE,value:15e-6,offset:0},drop:{name:"drop",base:O.VOLUME,prefixes:D.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:O.VOLUME,prefixes:D.NONE,value:5e-8,offset:0},minim:{name:"minim",base:O.VOLUME,prefixes:D.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:O.VOLUME,prefixes:D.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:O.VOLUME,prefixes:D.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:O.VOLUME,prefixes:D.NONE,value:1182941e-10,offset:0},cc:{name:"cc",base:O.VOLUME,prefixes:D.NONE,value:1e-6,offset:0},cup:{name:"cup",base:O.VOLUME,prefixes:D.NONE,value:2365882e-10,offset:0},pint:{name:"pint",base:O.VOLUME,prefixes:D.NONE,value:4731765e-10,offset:0},quart:{name:"quart",base:O.VOLUME,prefixes:D.NONE,value:9463529e-10,offset:0},gallon:{name:"gallon",base:O.VOLUME,prefixes:D.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:O.VOLUME,prefixes:D.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:O.VOLUME,prefixes:D.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:O.VOLUME,prefixes:D.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:O.VOLUME,prefixes:D.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:O.VOLUME,prefixes:D.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:O.VOLUME,prefixes:D.NONE,value:1182941e-10,offset:0},cp:{name:"cp",base:O.VOLUME,prefixes:D.NONE,value:2365882e-10,offset:0},pt:{name:"pt",base:O.VOLUME,prefixes:D.NONE,value:4731765e-10,offset:0},qt:{name:"qt",base:O.VOLUME,prefixes:D.NONE,value:9463529e-10,offset:0},gal:{name:"gal",base:O.VOLUME,prefixes:D.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:O.VOLUME,prefixes:D.NONE,value:.1173478,offset:0},obl:{name:"obl",base:O.VOLUME,prefixes:D.NONE,value:.1589873,offset:0},g:{name:"g",base:O.MASS,prefixes:D.SHORT,value:.001,offset:0},gram:{name:"gram",base:O.MASS,prefixes:D.LONG,value:.001,offset:0},ton:{name:"ton",base:O.MASS,prefixes:D.SHORT,value:907.18474,offset:0},t:{name:"t",base:O.MASS,prefixes:D.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:O.MASS,prefixes:D.LONG,value:1e3,offset:0},grain:{name:"grain",base:O.MASS,prefixes:D.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:O.MASS,prefixes:D.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:O.MASS,prefixes:D.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:O.MASS,prefixes:D.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:O.MASS,prefixes:D.NONE,value:45.359237,offset:0},stick:{name:"stick",base:O.MASS,prefixes:D.NONE,value:.115,offset:0},stone:{name:"stone",base:O.MASS,prefixes:D.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:O.MASS,prefixes:D.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:O.MASS,prefixes:D.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:O.MASS,prefixes:D.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:O.MASS,prefixes:D.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:O.MASS,prefixes:D.NONE,value:45.359237,offset:0},s:{name:"s",base:O.TIME,prefixes:D.SHORT,value:1,offset:0},min:{name:"min",base:O.TIME,prefixes:D.NONE,value:60,offset:0},h:{name:"h",base:O.TIME,prefixes:D.NONE,value:3600,offset:0},second:{name:"second",base:O.TIME,prefixes:D.LONG,value:1,offset:0},sec:{name:"sec",base:O.TIME,prefixes:D.LONG,value:1,offset:0},minute:{name:"minute",base:O.TIME,prefixes:D.NONE,value:60,offset:0},hour:{name:"hour",base:O.TIME,prefixes:D.NONE,value:3600,offset:0},day:{name:"day",base:O.TIME,prefixes:D.NONE,value:86400,offset:0},week:{name:"week",base:O.TIME,prefixes:D.NONE,value:604800,offset:0},month:{name:"month",base:O.TIME,prefixes:D.NONE,value:2629800,offset:0},year:{name:"year",base:O.TIME,prefixes:D.NONE,value:31557600,offset:0},decade:{name:"decade",base:O.TIME,prefixes:D.NONE,value:315576e3,offset:0},century:{name:"century",base:O.TIME,prefixes:D.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:O.TIME,prefixes:D.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:O.FREQUENCY,prefixes:D.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:O.FREQUENCY,prefixes:D.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:O.ANGLE,prefixes:D.SHORT,value:1,offset:0},radian:{name:"radian",base:O.ANGLE,prefixes:D.LONG,value:1,offset:0},deg:{name:"deg",base:O.ANGLE,prefixes:D.SHORT,value:null,offset:0},degree:{name:"degree",base:O.ANGLE,prefixes:D.LONG,value:null,offset:0},grad:{name:"grad",base:O.ANGLE,prefixes:D.SHORT,value:null,offset:0},gradian:{name:"gradian",base:O.ANGLE,prefixes:D.LONG,value:null,offset:0},cycle:{name:"cycle",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:O.ANGLE,prefixes:D.NONE,value:null,offset:0},A:{name:"A",base:O.CURRENT,prefixes:D.SHORT,value:1,offset:0},ampere:{name:"ampere",base:O.CURRENT,prefixes:D.LONG,value:1,offset:0},K:{name:"K",base:O.TEMPERATURE,prefixes:D.SHORT,value:1,offset:0},degC:{name:"degC",base:O.TEMPERATURE,prefixes:D.SHORT,value:1,offset:273.15},degF:{name:"degF",base:O.TEMPERATURE,prefixes:D.SHORT,value:new C(5,9),offset:459.67},degR:{name:"degR",base:O.TEMPERATURE,prefixes:D.SHORT,value:new C(5,9),offset:0},kelvin:{name:"kelvin",base:O.TEMPERATURE,prefixes:D.LONG,value:1,offset:0},celsius:{name:"celsius",base:O.TEMPERATURE,prefixes:D.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:O.TEMPERATURE,prefixes:D.LONG,value:new C(5,9),offset:459.67},rankine:{name:"rankine",base:O.TEMPERATURE,prefixes:D.LONG,value:new C(5,9),offset:0},mol:{name:"mol",base:O.AMOUNT_OF_SUBSTANCE,prefixes:D.SHORT,value:1,offset:0},mole:{name:"mole",base:O.AMOUNT_OF_SUBSTANCE,prefixes:D.LONG,value:1,offset:0},cd:{name:"cd",base:O.LUMINOUS_INTENSITY,prefixes:D.SHORT,value:1,offset:0},candela:{name:"candela",base:O.LUMINOUS_INTENSITY,prefixes:D.LONG,value:1,offset:0},N:{name:"N",base:O.FORCE,prefixes:D.SHORT,value:1,offset:0},newton:{name:"newton",base:O.FORCE,prefixes:D.LONG,value:1,offset:0},dyn:{name:"dyn",base:O.FORCE,prefixes:D.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:O.FORCE,prefixes:D.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:O.FORCE,prefixes:D.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:O.FORCE,prefixes:D.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:O.FORCE,prefixes:D.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:O.FORCE,prefixes:D.NONE,value:9.80665,offset:0},J:{name:"J",base:O.ENERGY,prefixes:D.SHORT,value:1,offset:0},joule:{name:"joule",base:O.ENERGY,prefixes:D.LONG,value:1,offset:0},erg:{name:"erg",base:O.ENERGY,prefixes:D.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:O.ENERGY,prefixes:D.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:O.ENERGY,prefixes:D.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:O.ENERGY,prefixes:D.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:O.ENERGY,prefixes:D.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:O.POWER,prefixes:D.SHORT,value:1,offset:0},watt:{name:"watt",base:O.POWER,prefixes:D.LONG,value:1,offset:0},hp:{name:"hp",base:O.POWER,prefixes:D.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:O.POWER,prefixes:D.SHORT,value:b.I,offset:0},VA:{name:"VA",base:O.POWER,prefixes:D.SHORT,value:1,offset:0},Pa:{name:"Pa",base:O.PRESSURE,prefixes:D.SHORT,value:1,offset:0},psi:{name:"psi",base:O.PRESSURE,prefixes:D.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:O.PRESSURE,prefixes:D.NONE,value:101325,offset:0},bar:{name:"bar",base:O.PRESSURE,prefixes:D.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:O.PRESSURE,prefixes:D.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:O.PRESSURE,prefixes:D.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:O.PRESSURE,prefixes:D.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:O.PRESSURE,prefixes:D.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:O.ELECTRIC_CHARGE,prefixes:D.LONG,value:1,offset:0},C:{name:"C",base:O.ELECTRIC_CHARGE,prefixes:D.SHORT,value:1,offset:0},farad:{name:"farad",base:O.ELECTRIC_CAPACITANCE,prefixes:D.LONG,value:1,offset:0},F:{name:"F",base:O.ELECTRIC_CAPACITANCE,prefixes:D.SHORT,value:1,offset:0},volt:{name:"volt",base:O.ELECTRIC_POTENTIAL,prefixes:D.LONG,value:1,offset:0},V:{name:"V",base:O.ELECTRIC_POTENTIAL,prefixes:D.SHORT,value:1,offset:0},ohm:{name:"ohm",base:O.ELECTRIC_RESISTANCE,prefixes:D.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:O.ELECTRIC_INDUCTANCE,prefixes:D.LONG,value:1,offset:0},H:{name:"H",base:O.ELECTRIC_INDUCTANCE,prefixes:D.SHORT,value:1,offset:0},siemens:{name:"siemens",base:O.ELECTRIC_CONDUCTANCE,prefixes:D.LONG,value:1,offset:0},S:{name:"S",base:O.ELECTRIC_CONDUCTANCE,prefixes:D.SHORT,value:1,offset:0},weber:{name:"weber",base:O.MAGNETIC_FLUX,prefixes:D.LONG,value:1,offset:0},Wb:{name:"Wb",base:O.MAGNETIC_FLUX,prefixes:D.SHORT,value:1,offset:0},tesla:{name:"tesla",base:O.MAGNETIC_FLUX_DENSITY,prefixes:D.LONG,value:1,offset:0},T:{name:"T",base:O.MAGNETIC_FLUX_DENSITY,prefixes:D.SHORT,value:1,offset:0},b:{name:"b",base:O.BIT,prefixes:D.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:O.BIT,prefixes:D.BINARY_LONG,value:1,offset:0},B:{name:"B",base:O.BIT,prefixes:D.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:O.BIT,prefixes:D.BINARY_LONG,value:8,offset:0}},R={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function L(t){if("BigNumber"===t.number){var e=tG(y);F.rad.value=new y(1),F.deg.value=e.div(180),F.grad.value=e.div(200),F.cycle.value=e.times(2),F.arcsec.value=e.div(648e3),F.arcmin.value=e.div(10800)}else F.rad.value=1,F.deg.value=Math.PI/180,F.grad.value=Math.PI/200,F.cycle.value=2*Math.PI,F.arcsec.value=Math.PI/648e3,F.arcmin.value=Math.PI/10800;F.radian.value=F.rad.value,F.degree.value=F.deg.value,F.gradian.value=F.grad.value}L(o),n&&n("config",function(t,e){t.number!==e.number&&L(t)});var k={si:{NONE:{unit:B,prefix:D.NONE[""]},LENGTH:{unit:F.m,prefix:D.SHORT[""]},MASS:{unit:F.g,prefix:D.SHORT.k},TIME:{unit:F.s,prefix:D.SHORT[""]},CURRENT:{unit:F.A,prefix:D.SHORT[""]},TEMPERATURE:{unit:F.K,prefix:D.SHORT[""]},LUMINOUS_INTENSITY:{unit:F.cd,prefix:D.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:F.mol,prefix:D.SHORT[""]},ANGLE:{unit:F.rad,prefix:D.SHORT[""]},BIT:{unit:F.bits,prefix:D.SHORT[""]},FORCE:{unit:F.N,prefix:D.SHORT[""]},ENERGY:{unit:F.J,prefix:D.SHORT[""]},POWER:{unit:F.W,prefix:D.SHORT[""]},PRESSURE:{unit:F.Pa,prefix:D.SHORT[""]},ELECTRIC_CHARGE:{unit:F.C,prefix:D.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:F.F,prefix:D.SHORT[""]},ELECTRIC_POTENTIAL:{unit:F.V,prefix:D.SHORT[""]},ELECTRIC_RESISTANCE:{unit:F.ohm,prefix:D.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:F.H,prefix:D.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:F.S,prefix:D.SHORT[""]},MAGNETIC_FLUX:{unit:F.Wb,prefix:D.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:F.T,prefix:D.SHORT[""]},FREQUENCY:{unit:F.Hz,prefix:D.SHORT[""]}}};k.cgs=JSON.parse(JSON.stringify(k.si)),k.cgs.LENGTH={unit:F.m,prefix:D.SHORT.c},k.cgs.MASS={unit:F.g,prefix:D.SHORT[""]},k.cgs.FORCE={unit:F.dyn,prefix:D.SHORT[""]},k.cgs.ENERGY={unit:F.erg,prefix:D.NONE[""]},k.us=JSON.parse(JSON.stringify(k.si)),k.us.LENGTH={unit:F.ft,prefix:D.NONE[""]},k.us.MASS={unit:F.lbm,prefix:D.NONE[""]},k.us.TEMPERATURE={unit:F.degF,prefix:D.NONE[""]},k.us.FORCE={unit:F.lbf,prefix:D.NONE[""]},k.us.ENERGY={unit:F.BTU,prefix:D.BTU[""]},k.us.POWER={unit:F.hp,prefix:D.NONE[""]},k.us.PRESSURE={unit:F.psi,prefix:D.NONE[""]},k.auto=JSON.parse(JSON.stringify(k.si));var I=k.auto;for(var Y in Z.setUnitSystem=function(t){if((0,re.nr)(k,t))I=k[t];else throw Error("Unit system "+t+" does not exist. Choices are: "+Object.keys(k).join(", "))},Z.getUnitSystem=function(){for(var t in k)if((0,re.nr)(k,t)&&k[t]===I)return t},Z.typeConverters={BigNumber:function(t){return null!=t&&t.isFraction?new y(t.n).div(t.d).times(t.s):new y(t+"")},Fraction:function(t){return new C(t)},Complex:function(t){return t},number:function(t){return null!=t&&t.isFraction?g(t):t}},Z.prototype._numberConverter=function(){var t=Z.typeConverters[this.valueType()];if(t)return t;throw TypeError('Unsupported Unit value type "'+this.valueType()+'"')},Z._getNumberConverter=function(t){if(!Z.typeConverters[t])throw TypeError('Unsupported type "'+t+'"');return Z.typeConverters[t]},F)if((0,re.nr)(F,Y)){var U=F[Y];U.dimensions=U.base.dimensions}for(var j in R)if((0,re.nr)(R,j)){var z=F[R[j]],X={};for(var J in z)(0,re.nr)(z,J)&&(X[J]=z[J]);X.name=j,F[j]=X}return Z.isValidAlpha=function(t){return/^[a-zA-Z]$/.test(t)},Z.createUnit=function(t,e){if("object"!=typeof t)throw TypeError("createUnit expects first parameter to be of type 'Object'");if(e&&e.override){for(var r in t)if((0,re.nr)(t,r)&&Z.deleteUnit(r),t[r].aliases)for(var i,n=0;n<t[r].aliases.length;n++)Z.deleteUnit(t[r].aliases[n])}for(var o in t)(0,re.nr)(t,o)&&(i=Z.createUnitSingle(o,t[o]));return i},Z.createUnitSingle=function(t,e){if(null==e&&(e={}),"string"!=typeof t)throw TypeError("createUnitSingle expects first parameter to be of type 'string'");if((0,re.nr)(F,t))throw Error('Cannot create unit "'+t+'": a unit with that name already exists');!function(t){for(var e=0;e<t.length;e++){if(i=t.charAt(e),0===e&&!Z.isValidAlpha(i))throw Error('Invalid unit name (must begin with alpha character): "'+t+'"');if(e>0&&!(Z.isValidAlpha(i)||_(i)))throw Error('Invalid unit name (only alphanumeric characters are allowed): "'+t+'"')}}(t);var r,n,o,s=null,a=[],u=0;if(e&&"Unit"===e.type)s=e.clone();else if("string"==typeof e)""!==e&&(r=e);else if("object"==typeof e)r=e.definition,n=e.prefixes,u=e.offset,o=e.baseName,e.aliases&&(a=e.aliases.valueOf());else throw TypeError('Cannot create unit "'+t+'" from "'+e.toString()+'": expecting "string" or "Unit" or "Object"');if(a){for(var h=0;h<a.length;h++)if((0,re.nr)(F,a[h]))throw Error('Cannot create alias "'+a[h]+'": a unit with that name already exists')}if(r&&"string"==typeof r&&!s)try{s=Z.parse(r,{allowNoUnits:!0})}catch(e){throw e.message='Could not create unit "'+t+'" from "'+r+'": '+e.message,e}else r&&"Unit"===r.type&&(s=r.clone());a=a||[],u=u||0,n=n&&n.toUpperCase&&D[n.toUpperCase()]||D.NONE;var l={};if(s){l={name:t,value:s.value,dimensions:s.dimensions.slice(0),prefixes:n,offset:u};var c=!1;for(var d in O)if((0,re.nr)(O,d)){for(var f=!0,p=0;p<M.length;p++)if(Math.abs((l.dimensions[p]||0)-(O[d].dimensions[p]||0))>1e-12){f=!1;break}if(f){c=!0,l.base=O[d];break}}if(!c){o=o||t+"_STUFF";var m={dimensions:s.dimensions.slice(0)};m.key=o,O[o]=m,I[o]={unit:l,prefix:D.NONE[""]},l.base=O[o]}}else{if(o=o||t+"_STUFF",M.indexOf(o)>=0)throw Error('Cannot create new base unit "'+t+'": a base unit with that name already exists (and cannot be overridden)');for(var v in M.push(o),O)(0,re.nr)(O,v)&&(O[v].dimensions[M.length-1]=0);for(var g={dimensions:[]},b=0;b<M.length;b++)g.dimensions[b]=0;g.dimensions[M.length-1]=1,g.key=o,O[o]=g,l={name:t,value:1,dimensions:O[o].dimensions.slice(0),prefixes:n,offset:u,base:O[o]},I[o]={unit:l,prefix:D.NONE[""]}}Z.UNITS[t]=l;for(var y=0;y<a.length;y++){var C=a[y],x={};for(var E in l)(0,re.nr)(l,E)&&(x[E]=l[E]);x.name=C,Z.UNITS[C]=x}return delete A.cache,new Z(null,t)},Z.deleteUnit=function(t){delete Z.UNITS[t]},Z.PREFIXES=D,Z.BASE_DIMENSIONS=M,Z.BASE_UNITS=O,Z.UNIT_SYSTEMS=k,Z.UNITS=F,Z},{isClass:!0}),u6="dotPow",u7=(0,tR.d5)(u6,["typed","equalScalar","matrix","pow","DenseMatrix","concat"],t=>{var{typed:e,equalScalar:r,matrix:i,pow:n,DenseMatrix:o,concat:s}=t,a=(0,o8.$)({typed:e}),u=o4({typed:e,DenseMatrix:o}),h=(0,o9.e)({typed:e,equalScalar:r}),l=(0,o6.O)({typed:e,DenseMatrix:o}),c=(0,o7.L)({typed:e,matrix:i,concat:s}),d={};for(var f in n.signatures)!Object.prototype.hasOwnProperty.call(n.signatures,f)||f.includes("Matrix")||f.includes("Array")||(d[f]=n.signatures[f]);var p=e(d);return e(u6,c({elop:p,SS:u,DS:a,Ss:h,sS:l}))}),ht="expm",he=(0,tR.d5)(ht,["typed","abs","add","identity","inv","multiply"],t=>{var{typed:e,abs:r,add:i,identity:n,inv:o,multiply:s}=t;return e(ht,{Matrix:function(t){var e=t.size();if(2!==e.length||e[0]!==e[1])throw RangeError("Matrix must be square (size: "+(0,rt.WU)(e)+")");for(var a=e[0],u=function(t,e){for(var r=0;r<30;r++)for(var i=0;i<=r;i++){var n=r-i;if(1e-15>function(t,e,r){for(var i=1,n=2;n<=e;n++)i*=n;for(var o=i,s=e+1;s<=2*e;s++)o*=s;var a=o*(2*e+1);return 8*Math.pow(t/Math.pow(2,r),2*e)*i*i/(o*a)}(t,i,n))return{q:i,j:n}}throw Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(t){for(var e=t.size()[0],i=0,n=0;n<e;n++){for(var o=0,s=0;s<e;s++)o+=r(t.get([n,s]));i=Math.max(o,i)}return i}(t),0),h=u.q,l=u.j,c=s(t,Math.pow(2,-l)),d=n(a),f=n(a),p=1,m=c,v=-1,g=1;g<=h;g++)g>1&&(m=s(m,c),v=-v),d=i(d,s(p=p*(h-g+1)/((2*h-g+1)*g),m)),f=i(f,s(p*v,m));for(var b=s(o(f),d),y=0;y<l;y++)b=s(b,b);return(0,tY.sA)(t)?t.createSparseMatrix(b):b}})}),hr=(0,tR.d5)("fft",["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],t=>{var{typed:e,matrix:r,addScalar:i,multiplyScalar:n,divideScalar:o,exp:s,tau:a,i:u,dotDivide:h,conj:l,pow:c,ceil:d,log2:f}=t;return e("fft",{Array:p,Matrix:function(t){return t.create(p(t.toArray()))}});function p(t){var e=(0,e7.aJ)(t);return 1===e.length?m(t,e[0]):function t(e,r){var i=(0,e7.aJ)(e);if(0!==r)return Array(i[0]).fill(0).map((i,n)=>t(e[n],r-1));if(1===i.length)return m(e);function n(t){var e=(0,e7.aJ)(t);return Array(e[1]).fill(0).map((r,i)=>Array(e[0]).fill(0).map((e,r)=>t[r][i]))}return n(t(n(e),1))}(t.map(t=>p(t,e.slice(1))),0)}function m(t){var e=t.length;if(1===e)return[t[0]];if(e%2!=0)return function(t){for(var e=t.length,r=s(o(n(-1,n(u,a)),e)),i=[],v=1-e;v<e;v++)i.push(c(r,o(c(v,2),2)));for(var g=c(2,d(f(e+e-1))),b=[...Array(e).fill(0).map((r,o)=>n(t[o],i[e-1+o])),...Array(g-e).fill(0)],y=[...Array(e+e-1).fill(0).map((t,e)=>o(1,i[e])),...Array(g-(e+e-1)).fill(0)],C=m(b),Z=m(y),x=h(l(p(l(Array(g).fill(0).map((t,e)=>n(C[e],Z[e]))))),g),_=[],E=e-1;E<e+e-1;E++)_.push(n(x[E],i[E]));return _}(t);for(var r=[...m(t.filter((t,e)=>e%2==0),e/2),...m(t.filter((t,e)=>e%2==1),e/2)],v=0;v<e/2;v++){var g=r[v],b=n(r[v+e/2],s(n(n(a,u),o(-v,e))));r[v]=i(g,b),r[v+e/2]=i(g,n(-1,b))}return r}}),hi="gamma",hn=(0,tR.d5)(hi,["typed","config","multiplyScalar","pow","BigNumber","Complex"],t=>{var{typed:e,config:r,multiplyScalar:i,pow:n,BigNumber:o,Complex:s}=t;return e(hi,{number:nn,Complex:function t(e){if(0===e.im)return nn(e.re);if(e.re<.5){var r=new s(1-e.re,-e.im),i=new s(Math.PI*e.re,Math.PI*e.im);return new s(Math.PI).div(i.sin()).div(t(r))}e=new s(e.re-1,e.im);for(var n=new s(ns[0],0),o=1;o<ns.length;++o){var a=new s(ns[o],0);n=n.add(a.div(e.add(o)))}var u=new s(e.re+no+.5,e.im),h=u.pow(e.add(.5)),l=u.neg().exp();return n.mul(Math.sqrt(2*Math.PI)).mul(h).mul(l)},BigNumber:function(t){if(t.isInteger())return t.isNegative()||t.isZero()?new o(1/0):function t(e){if(e<8)return new o([1,1,2,6,24,120,720,5040][e]);var i=r.precision+(0|Math.log(e.toNumber())),n=o.clone({precision:i});if(e%2==1)return e.times(t(new o(e-1)));for(var s=e,a=new n(e),u=e.toNumber();s>2;)s-=2,u+=s,a=a.times(u);return new o(a.toPrecision(o.precision))}(t.minus(1));if(!t.isFinite())return new o(t.isNegative()?NaN:1/0);throw Error("Integer BigNumber expected")}})}),ho="ifft",hs=(0,tR.d5)(ho,["typed","fft","dotDivide","conj"],t=>{var{typed:e,fft:r,dotDivide:i,conj:n}=t;return e(ho,{"Array | Matrix":function(t){var e=(0,tY.SW)(t)?t.size():(0,e7.aJ)(t);return i(n(r(n(t))),e.reduce((t,e)=>t*e,1))}})}),ha="createUnit",hu=(0,tR.d5)(ha,["typed","Unit"],t=>{var{typed:e,Unit:r}=t;return e(ha,{"Object, Object":function(t,e){return r.createUnit(t,e)},Object:function(t){return r.createUnit(t,{})},"string, Unit | string | Object, Object":function(t,e,i){var n={};return n[t]=e,r.createUnit(n,i)},"string, Unit | string | Object":function(t,e){var i={};return i[t]=e,r.createUnit(i,{})},string:function(t){var e={};return e[t]={},r.createUnit(e,{})}})}),hh=(0,tR.d5)("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],t=>{var{typed:e,matrix:r,multiply:i,equalScalar:n,divideScalar:o,inv:s}=t,a=(0,o9.e)({typed:e,equalScalar:n}),u=(0,sv.R)({typed:e});return e("divide",(0,re.l7)({"Array | Matrix, Array | Matrix":function(t,e){return i(t,s(e))},"DenseMatrix, any":function(t,e){return u(t,e,o,!1)},"SparseMatrix, any":function(t,e){return a(t,e,o,!1)},"Array, any":function(t,e){return u(r(t),e,o,!1).valueOf()},"any, Array | Matrix":function(t,e){return i(t,s(e))}},o.signatures))}),hl="factorial",hc=(0,tR.d5)(hl,["typed","gamma"],t=>{var{typed:e,gamma:r}=t;return e(hl,{number:function(t){if(t<0)throw Error("Value must be non-negative");return r(t+1)},BigNumber:function(t){if(t.isNegative())throw Error("Value must be non-negative");return r(t.plus(1))},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})});function hd(t,e){var r,i=e.length,n=[];if(t)for(r=0;r<i;r++)n[t[r]]=e[r];else for(r=0;r<i;r++)n[r]=e[r];return n}var hf="lusolve",hp=(0,tR.d5)(hf,["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],t=>{var{typed:e,matrix:r,lup:i,slu:n,usolve:o,lsolve:s,DenseMatrix:a}=t,u=s_({DenseMatrix:a});return e(hf,{"Array, Array | Matrix":function(t,e){var n=i(t=r(t));return l(n.L,n.U,n.p,null,e).valueOf()},"DenseMatrix, Array | Matrix":function(t,e){var r=i(t);return l(r.L,r.U,r.p,null,e)},"SparseMatrix, Array | Matrix":function(t,e){var r=i(t);return l(r.L,r.U,r.p,null,e)},"SparseMatrix, Array | Matrix, number, number":function(t,e,r,i){var o=n(t,r,i);return l(o.L,o.U,o.p,o.q,e)},"Object, Array | Matrix":function(t,e){return l(t.L,t.U,t.p,t.q,e)}});function h(t){if((0,tY.SW)(t))return t;if((0,tY.kJ)(t))return r(t);throw TypeError("Invalid Matrix LU decomposition")}function l(t,e,r,i,n){t=h(t),e=h(e),r&&((n=u(t,n,!0))._data=hd(r,n._data));var a=o(e,s(t,n));return i&&(a._data=hd(i,a._data)),a}}),hm="multinomial",hv=(0,tR.d5)(hm,["typed","add","divide","multiply","factorial","isInteger","isPositive"],t=>{var{typed:e,add:r,divide:i,multiply:n,factorial:o,isInteger:s,isPositive:a}=t;return e(hm,{"Array | Matrix":function(t){var e=0,u=1;return(0,rd.Et)(t,function(t){if(!s(t)||!a(t))throw TypeError("Positive integer value expected in function multinomial");e=r(e,t),u=n(u,o(t))}),i(o(e),u)}})}),hg="permutations",hb=(0,tR.d5)(hg,["typed","factorial"],t=>{var{typed:e,factorial:r}=t;return e(hg,{"number | BigNumber":r,"number, number":function(t,e){if(!(0,tI.U)(t)||t<0||!(0,tI.U)(e)||e<0)throw TypeError("Positive integer value expected in function permutations");if(e>t)throw TypeError("second argument k must be less than or equal to first argument n");return iv(t-e+1,t)},"BigNumber, BigNumber":function(t,e){var r,i;if(!hy(t)||!hy(e))throw TypeError("Positive integer value expected in function permutations");if(e.gt(t))throw TypeError("second argument k must be less than or equal to first argument n");for(r=t.mul(0).add(1),i=t.minus(e).plus(1);i.lte(t);i=i.plus(1))r=r.times(i);return r}})});function hy(t){return t.isInteger()&&t.gte(0)}var hC="polynomialRoot",hZ=(0,tR.d5)(hC,["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],t=>{var{typed:e,isZero:r,equalScalar:i,add:n,subtract:o,multiply:s,divide:a,sqrt:u,unaryMinus:h,cbrt:l,typeOf:c,im:d,re:f}=t;return e(hC,{"number|Complex, ...number|Complex":(t,e)=>{for(var p=[t,...e];p.length>0&&r(p[p.length-1]);)p.pop();if(p.length<2)throw RangeError("Polynomial [".concat(t,", ").concat(e,"] must have a non-zero non-constant coefficient"));switch(p.length){case 2:return[h(a(p[0],p[1]))];case 3:var[m,v,g]=p,b=s(2,g),y=s(v,v),C=s(4,g,m);if(i(y,C))return[a(h(v),b)];var Z=u(o(y,C));return[a(o(Z,v),b),a(o(h(Z),v),b)];case 4:var[x,_,E,w]=p,N=h(s(3,w)),S=s(E,E),A=s(3,w,_),P=n(s(2,E,E,E),s(27,w,w,x)),D=s(9,w,E,_);if(i(S,A)&&i(P,D))return[a(E,N)];var M=o(S,A),O=o(P,D);if(i(n(s(18,w,E,_,x),s(E,E,_,_)),n(s(4,E,E,E,x),s(4,w,_,_,_),s(27,w,w,x,x))))return[a(o(s(4,w,E,_),n(s(9,w,w,x),s(E,E,E))),s(w,M)),a(o(s(9,w,x),s(E,_)),s(2,M))];return l(i(S,A)?O:a(n(O,u(o(s(O,O),s(4,M,M,M)))),2),!0).toArray().map(t=>a(n(E,t,a(M,t)),N)).map(t=>"Complex"===c(t)&&i(f(t),f(t)+d(t))?f(t):t);default:throw RangeError("only implemented for cubic or lower-order polynomials, not ".concat(p))}}})}),hx="setSize",h_=(0,tR.d5)(hx,["typed","compareNatural"],t=>{var{typed:e,compareNatural:r}=t;return e(hx,{"Array | Matrix":function(t){return Array.isArray(t)?(0,e7.xH)(t).length:(0,e7.xH)(t.toArray()).length},"Array | Matrix, boolean":function(t,e){if(!1===e||0===t.length)return Array.isArray(t)?(0,e7.xH)(t).length:(0,e7.xH)(t.toArray()).length;for(var i=(0,e7.xH)(Array.isArray(t)?t:t.toArray()).sort(r),n=1,o=1;o<i.length;o++)0!==r(i[o],i[o-1])&&n++;return n}})});function hE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}var hw=(0,tR.d5)("solveODE",["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],t=>{var{typed:e,add:r,subtract:i,multiply:n,divide:o,max:s,map:a,abs:u,isPositive:h,isNegative:l,larger:c,smaller:d,matrix:f,bignumber:p,unaryMinus:m}=t;function v(t){return function(e,f,v,g){if(!(2===f.length&&(f.every(C)||f.every(tY.wr))))throw Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var b,y=f[0],Z=f[1],x=c(Z,y),_=g.firstStep;if(void 0!==_&&!h(_))throw Error('"firstStep" must be positive');var E=g.maxStep;if(void 0!==E&&!h(E))throw Error('"maxStep" must be positive');var w=g.minStep;if(w&&l(w))throw Error('"minStep" must be positive or zero');var N=[y,Z,_,w,E].filter(t=>void 0!==t);if(!(N.every(C)||N.every(tY.wr)))throw Error('Inconsistent type of "t" dependant variables');for(var S=g.tol?g.tol:1e-4,A=g.minDelta?g.minDelta:.2,P=g.maxDelta?g.maxDelta:5,D=g.maxIter?g.maxIter:1e4,M=[y,Z,...v,E,w].some(tY.l9),[O,T,B,F]=M?[p(t.a),p(t.c),p(t.b),p(t.bp)]:[t.a,t.c,t.b,t.bp],R=_?x?_:m(_):o(i(Z,y),1),L=[y],k=[v],I=i(B,F),Y=0,U=0,j=x?d:c,z=(b=x?c:d,function(t,e,n){return b(r(t,n),e)?i(e,t):n});j(L[Y],Z);){var X=[];R=z(L[Y],Z,R),X.push(e(L[Y],k[Y]));for(var J=1;J<T.length;++J)X.push(e(r(L[Y],n(T[J],R)),r(k[Y],n(R,O[J],X))));var G=s(u(a(n(I,X),t=>(0,tY.wr)(t)?t.value:t)));G<S&&S/G>1/4&&(L.push(r(L[Y],R)),k.push(r(k[Y],n(R,B,X))),Y++);var H=.84*(S/G)**.2;if(d(H,A)?H=A:c(H,P)&&(H=P),R=n(R,H=M?p(H):H),E&&c(u(R),E)?R=x?E:m(E):w&&d(u(R),w)&&(R=x?w:m(w)),++U>D)throw Error("Maximum number of iterations reached, try changing options")}return{t:L,y:k}}}function g(t,e,r,i){return v({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(t,e,r,i)}function b(t,e,r,i){return v({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(t,e,r,i)}function y(t,e,r,i){var n=i.method?i.method:"RK45",o={RK23:g,RK45:b};if(n.toUpperCase() in o){var s=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hE(Object(r),!0).forEach(function(e){(0,u5.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},i);return delete s.method,o[n.toUpperCase()](t,e,r,s)}var a=Object.keys(o).map(t=>'"'.concat(t,'"')),u="".concat(a.slice(0,-1).join(", ")," and ").concat(a.slice(-1));throw Error('Unavailable method "'.concat(n,'". Available methods are ').concat(u))}function C(t){return(0,tY.l9)(t)||(0,tY.hj)(t)}function Z(t,e,r,i){var n=y(t,e.toArray(),r.toArray(),i);return{t:f(n.t),y:f(n.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":Z,"function, Array, Array":(t,e,r)=>y(t,e,r,{}),"function, Matrix, Matrix":(t,e,r)=>Z(t,e,r,{}),"function, Array, number | BigNumber | Unit":(t,e,r)=>{var i=y(t,e,[r],{});return{t:i.t,y:i.y.map(t=>t[0])}},"function, Matrix, number | BigNumber | Unit":(t,e,r)=>{var i=y(t,e.toArray(),[r],{});return{t:f(i.t),y:f(i.y.map(t=>t[0]))}},"function, Array, number | BigNumber | Unit, Object":(t,e,r,i)=>{var n=y(t,e,[r],i);return{t:n.t,y:n.y.map(t=>t[0])}},"function, Matrix, number | BigNumber | Unit, Object":(t,e,r,i)=>{var n=y(t,e.toArray(),[r],i);return{t:f(n.t),y:f(n.y.map(t=>t[0]))}}})}),hN="stirlingS2",hS=(0,tR.d5)(hN,["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],t=>{var{typed:e,addScalar:r,subtractScalar:i,multiplyScalar:n,divideScalar:o,pow:s,factorial:a,combinations:u,isNegative:h,isInteger:l,number:c,bignumber:d,larger:f}=t,p=[],m=[];return e(hN,{"number | BigNumber, number | BigNumber":function(t,e){if(!l(t)||h(t)||!l(e)||h(e))throw TypeError("Non-negative integer value expected in function stirlingS2");if(f(e,t))throw TypeError("k must be less than or equal to n in function stirlingS2");var i=!((0,tY.hj)(t)&&(0,tY.hj)(e)),o=i?m:p,s=i?d:c,a=c(t),u=c(e);if(o[a]&&o[a].length>u)return o[a][u];for(var v=0;v<=a;++v)if(o[v]||(o[v]=[s(0===v?1:0)]),0!==v)for(var g=o[v],b=o[v-1],y=g.length;y<=v&&y<=u;++y)y===v?g[y]=1:g[y]=r(n(s(y),b[y]),b[y-1]);return o[a][u]}})}),hA="unit",hP=(0,tR.d5)(hA,["typed","Unit"],t=>{var{typed:e,Unit:r}=t;return e(hA,{Unit:function(t){return t.clone()},string:function(t){return r.isValuelessUnit(t)?new r(null,t):r.parse(t,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(t,e){return new r(t,e)},"number | BigNumber | Fraction":function(t){return new r(t)},"Array | Matrix":e.referToSelf(t=>e=>(0,rd.Fh)(e,t))})}),hD="bellNumbers",hM=(0,tR.d5)(hD,["typed","addScalar","isNegative","isInteger","stirlingS2"],t=>{var{typed:e,addScalar:r,isNegative:i,isInteger:n,stirlingS2:o}=t;return e(hD,{"number | BigNumber":function(t){if(!n(t)||i(t))throw TypeError("Non-negative integer value expected in function bellNumbers");for(var e=0,s=0;s<=t;s++)e=r(e,o(t,s));return e}})}),hO=(0,tR.d5)("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],t=>{var{config:e,typed:r,matrix:i,addScalar:n,subtract:o,equal:s,abs:a,atan:u,cos:h,sin:l,multiplyScalar:c,divideScalar:d,inv:f,bignumber:p,multiply:m,add:v,larger:g,column:b,flatten:y,number:C,complex:Z,sqrt:x,diag:_,size:E,reshape:w,qr:N,usolve:S,usolveAll:A,im:P,re:D,smaller:M,matrixFromColumns:O,dot:T}=t,B=function(t){var{config:e,addScalar:r,subtract:i,abs:n,atan:o,cos:s,sin:a,multiplyScalar:u,inv:h,bignumber:l,multiply:c,add:d}=t;function f(t){for(var e=t.length,r=0,i=[0,1],n=0;n<e;n++)for(var o=n+1;o<e;o++)Math.abs(r)<Math.abs(t[n][o])&&(r=Math.abs(t[n][o]),i=[n,o]);return[i,r]}function p(t){for(var e=t.length,r=0,i=[0,1],o=0;o<e;o++)for(var s=o+1;s<e;s++)n(r)<n(t[o][s])&&(r=n(t[o][s]),i=[o,s]);return[i,r]}function m(t,e,r){var i,o=t.length,s=Array(o);if(r){i=Array(o);for(var a=0;a<o;a++)i[a]=Array(o)}for(var u=0;u<o;u++){for(var h=0,l=t[0],c=0;c<t.length;c++)n(t[c])<n(l)&&(l=t[h=c]);if(s[u]=t.splice(h,1)[0],r)for(var d=0;d<o;d++)i[u][d]=e[d][h],e[d].splice(h,1)}if(!r)return{values:s};var f=i.map((t,e)=>({value:s[e],vector:t}));return{values:s,eigenvectors:f}}return function(t,v){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.epsilon,b=arguments.length>3?arguments[3]:void 0,y=arguments.length>4?arguments[4]:void 0;if("number"===b)return function(t,r,i){var n,o,s=t.length,a=Math.abs(r/s);if(i){o=Array(s);for(var u=0;u<s;u++)o[u]=Array(s).fill(0),o[u][u]=1}for(var h=f(t);Math.abs(h[1])>=Math.abs(a);){var l,c,d,p=h[0][0],v=h[0][1];l=t[p][p],c=t[v][v],d=t[p][v],t=function(t,e,r,i){for(var n=t.length,o=Math.cos(e),s=Math.sin(e),a=o*o,u=s*s,h=Array(n).fill(0),l=Array(n).fill(0),c=a*t[r][r]-2*o*s*t[r][i]+u*t[i][i],d=u*t[r][r]+2*o*s*t[r][i]+a*t[i][i],f=0;f<n;f++)h[f]=o*t[r][f]-s*t[i][f],l[f]=s*t[r][f]+o*t[i][f];t[r][r]=c,t[i][i]=d,t[r][i]=0,t[i][r]=0;for(var p=0;p<n;p++)p!==r&&p!==i&&(t[r][p]=h[p],t[p][r]=h[p],t[i][p]=l[p],t[p][i]=l[p]);return t}(t,n=Math.abs(c-l)<=e.epsilon?Math.PI/4:.5*Math.atan(2*d/(c-l)),p,v),i&&(o=function(t,e,r,i){for(var n=t.length,o=Math.cos(e),s=Math.sin(e),a=Array(n).fill(0),u=Array(n).fill(0),h=0;h<n;h++)a[h]=o*t[h][r]-s*t[h][i],u[h]=s*t[h][r]+o*t[h][i];for(var l=0;l<n;l++)t[l][r]=a[l],t[l][i]=u[l];return t}(o,n,p,v)),h=f(t)}for(var g=Array(s).fill(0),b=0;b<s;b++)g[b]=t[b][b];return m((0,re.d9)(g),o,i)}(t,g,y);if("BigNumber"===b)return function(t,f,v){var g,b,y=t.length,C=n(f/y);if(v){b=Array(y);for(var Z=0;Z<y;Z++)b[Z]=Array(y).fill(0),b[Z][Z]=1}for(var x=p(t);n(x[1])>=n(C);){var _=x[0][0],E=x[0][1];g=function(t,r,s){var a=i(r,t);return n(a)<=e.epsilon?l(-1).acos().div(4):u(.5,o(c(2,s,h(a))))}(t[_][_],t[E][E],t[_][E]),t=function(t,e,n,o){for(var h=t.length,f=l(s(e)),p=l(a(e)),m=u(f,f),v=u(p,p),g=Array(h).fill(l(0)),b=Array(h).fill(l(0)),y=c(l(2),f,p,t[n][o]),C=r(i(u(m,t[n][n]),y),u(v,t[o][o])),Z=d(u(v,t[n][n]),y,u(m,t[o][o])),x=0;x<h;x++)g[x]=i(u(f,t[n][x]),u(p,t[o][x])),b[x]=r(u(p,t[n][x]),u(f,t[o][x]));t[n][n]=C,t[o][o]=Z,t[n][o]=l(0),t[o][n]=l(0);for(var _=0;_<h;_++)_!==n&&_!==o&&(t[n][_]=g[_],t[_][n]=g[_],t[o][_]=b[_],t[_][o]=b[_]);return t}(t,g,_,E),v&&(b=function(t,e,n,o){for(var h=t.length,c=s(e),d=a(e),f=Array(h).fill(l(0)),p=Array(h).fill(l(0)),m=0;m<h;m++)f[m]=i(u(c,t[m][n]),u(d,t[m][o])),p[m]=r(u(d,t[m][n]),u(c,t[m][o]));for(var v=0;v<h;v++)t[v][n]=f[v],t[v][o]=p[v];return t}(b,g,_,E)),x=p(t)}for(var w=Array(y).fill(0),N=0;N<y;N++)w[N]=t[N][N];return m((0,re.d9)(w),b,v)}(t,g,y);throw TypeError("Unsupported data type: "+b)}}({config:e,addScalar:n,subtract:o,column:b,flatten:y,equal:s,abs:a,atan:u,cos:h,sin:l,multiplyScalar:c,inv:f,bignumber:p,complex:Z,multiply:m,add:v}),F=function(t){var{addScalar:e,subtract:r,flatten:i,multiply:n,multiplyScalar:o,divideScalar:s,sqrt:a,abs:u,bignumber:h,diag:l,size:c,reshape:d,inv:f,qr:p,usolve:m,usolveAll:v,equal:g,complex:b,larger:y,smaller:C,matrixFromColumns:Z,dot:x}=t;function _(t,e){for(var r=0;r<t.length;r++)t[r].push(...Array(e-t[r].length).fill(0));for(var i=t.length;i<e;i++)t.push(Array(e).fill(0)),t[i][i]=1;return t}function E(t,e){var i=c(t);for(var o of e)t=r(t,n(s(x(o=d(o,i),t),x(o,o)),o));return t}function w(t){return u(a(x(t,t)))}function N(t,e){return n(s("BigNumber"===e?h(1):"Complex"===e?b(1):1,w(t)),t)}return function(t,c,d,Z){var x=!(arguments.length>4)||void 0===arguments[4]||arguments[4],S=function(t,r,i,n,a){var c,d="BigNumber"===n,f=d?h(0):0,p=d?h(1):"Complex"===n?b(1):1,m=d?h(1):1,v=d?h(10):2,Z=o(v,v);a&&(c=Array(r).fill(p));for(var x=!1;!x;){x=!0;for(var _=0;_<r;_++){for(var E=f,w=f,N=0;N<r;N++)_!==N&&(E=e(E,u(t[N][_])),w=e(w,u(t[_][N])));if(!g(E,0)&&!g(w,0)){for(var S=m,A=E,P=s(w,v),D=o(w,v);C(A,P);)A=o(A,Z),S=o(S,v);for(;y(A,D);)A=s(A,Z),S=s(S,v);if(C(s(e(A,w),S),o(e(E,w),.95))){x=!1;for(var M=s(1,S),O=0;O<r;O++)_!==O&&(t[_][O]=o(t[_][O],M),t[O][_]=o(t[O][_],S));a&&(c[_]=o(c[_],M))}}}}return a?l(c):null}(t,c,0,Z,x);!function(t,i,n,a,l,c){var d="BigNumber"===a,f=d?h(0):"Complex"===a?b(0):0;d&&(n=h(n));for(var p=0;p<i-2;p++){for(var m=0,v=f,g=p+1;g<i;g++){var y=t[g][p];C(u(v),u(y))&&(v=y,m=g)}if(!C(u(v),n)){if(m!==p+1){var Z=t[m];t[m]=t[p+1],t[p+1]=Z;for(var x=0;x<i;x++){var _=t[x][m];t[x][m]=t[x][p+1],t[x][p+1]=_}if(l){var E=c[m];c[m]=c[p+1],c[p+1]=E}}for(var w=p+2;w<i;w++){var N=s(t[w][p],v);if(0!==N){for(var S=0;S<i;S++)t[w][S]=r(t[w][S],o(N,t[p+1][S]));for(var A=0;A<i;A++)t[A][p+1]=e(t[A][p+1],o(N,t[A][w]));if(l)for(var P=0;P<i;P++)c[w][P]=r(c[w][P],o(N,c[p+1][P]))}}}}}(t,c,d,Z,x,S);var{values:A,C:P}=function(t,i,s,c,d){var f="BigNumber"===c,m="Complex"===c,v=f?h(1):m?b(1):1;f&&(s=h(s));for(var g=(0,re.d9)(t),Z=[],x=i,E=[],w=d?l(Array(i).fill(v)):void 0,N=d?l(Array(x).fill(v)):void 0,S=0;S<=100;){S+=1;for(var A=g[x-1][x-1],P=0;P<x;P++)g[P][P]=r(g[P][P],A);var{Q:D,R:M}=p(g);g=n(M,D);for(var O=0;O<x;O++)g[O][O]=e(g[O][O],A);if(d&&(N=n(N,D)),1===x||C(u(g[x-1][x-2]),s)){S=0,Z.push(g[x-1][x-1]),d&&(E.unshift([[1]]),_(N,i),w=n(w,N),x>1&&(N=l(Array(x-1).fill(v)))),x-=1,g.pop();for(var T=0;T<x;T++)g[T].pop()}else if(2===x||C(u(g[x-2][x-3]),s)){S=0;var B=function(t,i,n,s){var u=e(t,s),h=r(o(t,s),o(i,n)),l=o(u,.5),c=o(a(r(o(u,u),o(4,h))),.5);return[e(l,c),r(l,c)]}(g[x-2][x-2],g[x-2][x-1],g[x-1][x-2],g[x-1][x-1]);Z.push(...B),d&&(E.unshift(function(t,e,i,n,o,s,a,l){var c="BigNumber"===l,d="Complex"===l,f=c?h(0):d?b(0):0,p=c?h(1):d?b(1):1;if(C(u(i),a))return[[p,f],[f,p]];if(y(u(r(o,s)),a))return[[r(o,n),r(s,n)],[i,i]];var m=r(t,o),v=r(n,o);return C(u(e),a)&&C(u(v),a)?[[m,p],[i,f]]:[[e,f],[v,p]]}(g[x-2][x-2],g[x-2][x-1],g[x-1][x-2],g[x-1][x-1],B[0],B[1],s,c)),_(N,i),w=n(w,N),x>2&&(N=l(Array(x-2).fill(v)))),x-=2,g.pop(),g.pop();for(var F=0;F<x;F++)g[F].pop(),g[F].pop()}if(0===x)break}if(Z.sort((t,e)=>+r(u(t),u(e))),S>100){var R=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Z.join(", "));throw R.values=Z,R.vectors=[],R}return{values:Z,C:d?n(w,function(t,e){for(var r=[],i=0;i<e;i++)r[i]=Array(e).fill(0);var n=0;for(var o of t){for(var s=o.length,a=0;a<s;a++)for(var u=0;u<s;u++)r[n+a][n+u]=o[a][u];n+=s}return r}(E,i)):void 0}}(t,c,d,Z,x);if(x){var D=function(t,e,o,s,a,u,c){var d=n(f(o),t,o),p="BigNumber"===c,Z="Complex"===c,x=p?h(0):Z?b(0):0,_=p?h(1):Z?b(1):1,S=[],A=[];for(var P of a){var D=function(t,e,r){for(var i=0;i<t.length;i++)if(r(t[i],e))return i;return -1}(S,P,g);-1===D?(S.push(P),A.push(1)):A[D]+=1}for(var M=[],O=S.length,T=Array(e).fill(x),B=l(Array(e).fill(_)),F=0;F<O;F++)!function(){var t=S[F],a=r(d,n(t,B)),l=v(a,T);for(l.shift();l.length<A[F];){var p=function(t,e,r,i,n){for(var o,s="BigNumber"===n?h(1e3):1e3,a=0;a<5;++a){o=function(t,e,r){var i="BigNumber"===r,n="Complex"===r,o=Array(t).fill(0).map(t=>2*Math.random()-1);return i&&(o=o.map(t=>h(t))),n&&(o=o.map(t=>b(t))),N(o=E(o,e),r)}(e,r,n);try{o=m(t,o)}catch(t){continue}if(y(w(o),s))break}if(a>=5)return null;for(a=0;;){var u=m(t,o);if(C(w(E(o,[u])),i))break;if(++a>=10)return null;o=N(u)}return o}(a,e,l,u,c);if(null===p)break;l.push(p)}var g=n(f(s),o);l=l.map(t=>n(g,t)),M.push(...l.map(e=>({value:t,vector:i(e)})))}();return M}(t,c,P,S,A,d,Z);return{values:A,eigenvectors:D}}return{values:A}}}({config:e,addScalar:n,subtract:o,multiply:m,multiplyScalar:c,flatten:y,divideScalar:d,sqrt:x,abs:a,bignumber:p,diag:_,size:E,reshape:w,qr:N,inv:f,usolve:S,usolveAll:A,equal:s,complex:Z,larger:g,smaller:M,matrixFromColumns:O,dot:T});return r("eigs",{Array:function(t){return R(i(t))},"Array, number|BigNumber":function(t,e){return R(i(t),{precision:e})},"Array, Object":(t,e)=>R(i(t),e),Matrix:function(t){return R(t,{matricize:!0})},"Matrix, number|BigNumber":function(t,e){return R(t,{precision:e,matricize:!0})},"Matrix, Object":function(t,e){var r={matricize:!0};return(0,sO.Z)(r,e),R(t,r)}});function R(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!("eigenvectors"in n)||n.eigenvectors,u=function(t,e,r){var i=t.toArray(),n=t.size();if(2!==n.length||n[0]!==n[1])throw RangeError("Matrix must be square (size: ".concat((0,rt.WU)(n),")"));var s=n[0];if(function(t,e,r){for(var i=0;i<e;i++)for(var n=0;n<e;n++)if(g(p(a(P(t[i][n]))),r))return!1;return!0}(i,s,e)&&(function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)t[r][i]=D(t[r][i])}(i,s),function(t,e,r){for(var i=0;i<e;i++)for(var n=i;n<e;n++)if(g(p(a(o(t[i][n],t[n][i]))),r))return!1;return!0}(i,s,e))){var u=L(t,i,s);return B(i,s,e,u,r)}var h=L(t,i,s);return F(i,s,e,h,r)}(t,null!==(r=n.precision)&&void 0!==r?r:e.epsilon,s);return n.matricize&&(u.values=i(u.values),s&&(u.eigenvectors=u.eigenvectors.map(t=>{var{value:e,vector:r}=t;return{value:e,vector:i(r)}}))),s&&Object.defineProperty(u,"vectors",{enumerable:!1,get:()=>{throw Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),u}function L(t,e,r){var i=t.datatype();if("number"===i||"BigNumber"===i||"Complex"===i)return i;for(var n=!1,o=!1,s=!1,a=0;a<r;a++)for(var u=0;u<r;u++){var h=e[a][u];if((0,tY.hj)(h)||(0,tY.yQ)(h))n=!0;else if((0,tY.l9)(h))o=!0;else if((0,tY.Mc)(h))s=!0;else throw TypeError("Unsupported type in Matrix: "+(0,tY.kM)(h))}if(o&&s&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),s){for(var l=0;l<r;l++)for(var c=0;c<r;c++)e[l][c]=Z(e[l][c]);return"Complex"}if(o){for(var d=0;d<r;d++)for(var f=0;f<r;f++)e[d][f]=p(e[d][f]);return"BigNumber"}if(n){for(var m=0;m<r;m++)for(var v=0;v<r;v++)e[m][v]=C(e[m][v]);return"number"}throw TypeError("Matrix contains unsupported types only.")}}),hT="kldivergence",hB=(0,tR.d5)(hT,["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],t=>{var{typed:e,matrix:r,divide:i,sum:n,multiply:o,map:s,dotDivide:a,log:u,isNumeric:h}=t;return e(hT,{"Array, Array":function(t,e){return l(r(t),r(e))},"Matrix, Array":function(t,e){return l(t,r(e))},"Array, Matrix":function(t,e){return l(r(t),e)},"Matrix, Matrix":function(t,e){return l(t,e)}});function l(t,e){var r=e.size().length,l=t.size().length;if(r>1)throw Error("first object must be one dimensional");if(l>1)throw Error("second object must be one dimensional");if(r!==l)throw Error("Length of two vectors must be equal");if(0===n(t))throw Error("Sum of elements in first object must be non zero");if(0===n(e))throw Error("Sum of elements in second object must be non zero");var c=i(t,n(t)),d=i(e,n(e)),f=n(o(c,s(a(c,d),t=>u(t))));return h(f)?f:Number.NaN}}),hF=r(5222),hR=r(253),hL=r(2023),hk="median",hI=(0,tR.d5)(hk,["typed","add","divide","compare","partitionSelect"],t=>{var{typed:e,add:r,divide:i,compare:n,partitionSelect:o}=t;function s(t){try{var e=(t=(0,e7.xH)(t.valueOf())).length;if(0===e)throw Error("Cannot calculate median of an empty array");if(e%2==0){for(var r=e/2-1,i=o(t,r+1),s=t[r],h=0;h<r;++h)n(t[h],s)>0&&(s=t[h]);return u(s,i)}var l=o(t,(e-1)/2);return a(l)}catch(t){throw(0,oD.x)(t,"median")}}var a=e({"number | BigNumber | Complex | Unit":function(t){return t}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(t,e){return i(r(t,e),2)}});return e(hk,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(t,e){throw Error("median(A, dim) is not yet supported")},"...":function(t){if((0,rd.CQ)(t))throw TypeError("Scalar values expected in function median");return s(t)}})}),hY="corr",hU=(0,tR.d5)(hY,["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],t=>{var{typed:e,matrix:r,sqrt:i,sum:n,add:o,subtract:s,multiply:a,pow:u,divide:h}=t;return e(hY,{"Array, Array":function(t,e){return l(t,e)},"Matrix, Matrix":function(t,e){var i=l(t.toArray(),e.toArray());return Array.isArray(i)?r(i):i}});function l(t,e){var r=[];if(Array.isArray(t[0])&&Array.isArray(e[0])){if(t.length!==e.length)throw SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var i=0;i<t.length;i++){if(t[i].length!==e[i].length)throw SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");r.push(c(t[i],e[i]))}return r}if(t.length!==e.length)throw SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return c(t,e)}function c(t,e){var r=t.length,l=n(t),c=n(e),d=t.reduce((t,r,i)=>o(t,a(r,e[i])),0),f=n(t.map(t=>u(t,2))),p=n(e.map(t=>u(t,2)));return h(s(a(r,d),a(l,c)),i(a(s(a(r,f),u(l,2)),s(a(r,p),u(c,2)))))}}),hj="freqz",hz=(0,tR.d5)(hj,["typed","add","multiply","Complex","divide","matrix"],t=>{var{typed:e,add:r,multiply:i,Complex:n,divide:o,matrix:s}=t;return e(hj,{"Array, Array":function(t,e){return a(t,e,u(512))},"Array, Array, Array":function(t,e,r){return a(t,e,r)},"Array, Array, number":function(t,e,r){if(r<0)throw Error("w must be a positive number");return a(t,e,u(r))},"Matrix, Matrix":function(t,e){var r=u(512),{w:i,h:n}=a(t.valueOf(),e.valueOf(),r);return{w:s(i),h:s(n)}},"Matrix, Matrix, Matrix":function(t,e,r){var{h:i}=a(t.valueOf(),e.valueOf(),r.valueOf());return{h:s(i),w:s(r)}},"Matrix, Matrix, number":function(t,e,r){if(r<0)throw Error("w must be a positive number");var i=u(r),{h:n}=a(t.valueOf(),e.valueOf(),i);return{h:s(n),w:s(i)}}});function a(t,e,s){for(var a=[],u=[],h=0;h<s.length;h++){for(var l=n(0,0),c=n(0,0),d=0;d<t.length;d++)l=r(l,i(t[d],n(Math.cos(-d*s[h]),Math.sin(-d*s[h]))));for(var f=0;f<e.length;f++)c=r(c,i(e[f],n(Math.cos(-f*s[h]),Math.sin(-f*s[h]))));a.push(l),u.push(c)}for(var p=[],m=0;m<a.length;m++)p.push(o(a[m],u[m]));return{h:p,w:s}}function u(t){for(var e=[],r=0;r<t;r++)e.push(r/t*Math.PI);return e}}),hX=(0,tR.d5)("mad",["typed","abs","map","median","subtract"],t=>{var{typed:e,abs:r,map:i,median:n,subtract:o}=t;return e("mad",{"Array | Matrix":s,"...":function(t){return s(t)}});function s(t){if(0===(t=(0,e7.xH)(t.valueOf())).length)throw Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var e=n(t);return n(i(t,function(t){return r(o(t,e))}))}catch(t){if(t instanceof TypeError&&-1!==t.message.indexOf("median"))throw TypeError(t.message.replace("median","mad"));throw(0,oD.x)(t,"mad")}}}),hJ=r(1404),hG="zeta",hH=(0,tR.d5)(hG,["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],t=>{var{typed:e,config:r,multiply:i,pow:n,divide:o,factorial:s,equal:a,smallerEq:u,isNegative:h,gamma:l,sin:c,subtract:d,add:f,Complex:p,BigNumber:m,pi:v}=t;return e(hG,{number:t=>g(t,t=>t,()=>20),BigNumber:t=>g(t,t=>new m(t),()=>Math.abs(Math.log10(r.epsilon))),Complex:function(t){return 0===t.re&&0===t.im?new p(-.5):1===t.re?new p(NaN,NaN):t.re===1/0&&0===t.im?new p(1):t.im===1/0||t.re===-1/0?new p(NaN,NaN):b(t,t=>t,t=>Math.round(19.5+.9*Math.abs(t.im)),t=>t.re)}});function g(t,e,r){return a(t,0)?e(-.5):a(t,1)?e(NaN):isFinite(t)?b(t,e,r,t=>t):e(h(t)?NaN:1)}function b(t,e,r,s){var a=r(t);if(s(t)>-(a-1)/2)return function(t,e,r){for(var s=o(1,i(y(r(0),e),d(1,n(2,d(1,t))))),a=r(0),h=r(1);u(h,e);h=f(h,1))a=f(a,o(i((-1)**(h-1),y(h,e)),n(h,t)));return i(s,a)}(t,e(a),e);var h=i(n(2,t),n(e(v),d(t,1)));return h=i(h,c(i(o(e(v),2),t))),h=i(h,l(d(1,t))),i(h,b(d(1,t),e,r,s))}function y(t,e){for(var r=t,a=t;u(a,e);a=f(a,1)){var h=o(i(s(f(e,d(a,1))),n(4,a)),i(s(d(e,a)),s(i(2,a))));r=f(r,h)}return i(e,r)}}),hV="norm",hq=(0,tR.d5)(hV,["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],t=>{var{typed:e,abs:r,add:i,pow:n,conj:o,sqrt:s,multiply:a,equalScalar:u,larger:h,smaller:l,matrix:c,ctranspose:d,eigs:f}=t;return e(hV,{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},boolean:function(t){return Math.abs(t)},Array:function(t){return p(c(t),2)},Matrix:function(t){return p(t,2)},"Array, number | BigNumber | string":function(t,e){return p(c(t),e)},"Matrix, number | BigNumber | string":function(t,e){return p(t,e)}});function p(t,e){var c=t.size();if(1===c.length)return function(t,e){if(e===Number.POSITIVE_INFINITY||"inf"===e)return o=0,t.forEach(function(t){var e=r(t);h(e,o)&&(o=e)},!0),o;if(e===Number.NEGATIVE_INFINITY||"-inf"===e)return t.forEach(function(t){var e=r(t);(!s||l(e,s))&&(s=e)},!0),s||0;if("fro"===e)return p(t,2);if("number"==typeof e&&!isNaN(e)){if(!u(e,0)){var o,s,a=0;return t.forEach(function(t){a=i(n(r(t),e),a)},!0),n(a,1/e)}return Number.POSITIVE_INFINITY}throw Error("Unsupported parameter value")}(t,e);if(2===c.length){if(c[0]&&c[1])return function(t,e){var n,u,l,c,p;if(1===e)return n=[],u=0,t.forEach(function(t,e){var o=e[1],s=i(n[o]||0,r(t));h(s,u)&&(u=s),n[o]=s},!0),u;if(e===Number.POSITIVE_INFINITY||"inf"===e)return l=[],c=0,t.forEach(function(t,e){var n=e[0],o=i(l[n]||0,r(t));h(o,c)&&(c=o),l[n]=o},!0),c;if("fro"===e)return p=0,t.forEach(function(t,e){p=i(p,a(t,o(t)))}),r(s(p));if(2===e)return function(t){var e=t.size();if(e[0]!==e[1])throw RangeError("Invalid matrix dimensions");var i=f(a(d(t),t)).values.toArray();return r(s(i[i.length-1]))}(t);throw Error("Unsupported parameter value "+e)}(t,e);throw RangeError("Invalid matrix dimensions")}}}),hW="rotationMatrix",hQ=(0,tR.d5)(hW,["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],t=>{var{typed:e,config:r,multiplyScalar:i,addScalar:n,unaryMinus:o,norm:s,BigNumber:a,matrix:u,DenseMatrix:h,SparseMatrix:l,cos:c,sin:d}=t;return e(hW,{"":function(){return"Matrix"===r.matrix?u([]):[]},string:function(t){return u(t)},"number | BigNumber | Complex | Unit":function(t){return f(t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(t,e){return f(t,e)},"number | BigNumber | Complex | Unit, Array":function(t,e){var r=u(e);return p(r),g(t,r,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(t,e){p(e);var i=e.storage()||("Matrix"===r.matrix?"dense":void 0);return g(t,e,i)},"number | BigNumber | Complex | Unit, Array, string":function(t,e,r){var i=u(e);return p(i),g(t,i,r)},"number | BigNumber | Complex | Unit, Matrix, string":function(t,e,r){return p(e),g(t,e,r)}});function f(t,e){var r=(0,tY.l9)(t)?new a(-1):-1,n=c(t),o=d(t);return v([[n,i(r,o)],[o,n]],e)}function p(t){var e=t.size();if(e.length<1||3!==e[0])throw RangeError("Vector must be of dimensions 1x3")}function m(t){return t.reduce((t,e)=>i(t,e))}function v(t,e){if(e){if("sparse"===e)return new l(t);if("dense"===e)return new h(t);throw TypeError('Unknown matrix type "'.concat(e,'"'))}return t}function g(t,e,r){var i=s(e);if(0===i)throw RangeError("Rotation around zero vector");var u=(0,tY.l9)(t)?a:null,h=u?new u(1):1,l=u?new u(-1):-1,f=u?new u(e.get([0])/i):e.get([0])/i,p=u?new u(e.get([1])/i):e.get([1])/i,g=u?new u(e.get([2])/i):e.get([2])/i,b=c(t),y=n(h,o(b)),C=d(t);return v([[n(b,m([f,f,y])),n(m([f,p,y]),m([l,g,C])),n(m([f,g,y]),m([p,C]))],[n(m([f,p,y]),m([g,C])),n(b,m([p,p,y])),n(m([p,g,y]),m([l,f,C]))],[n(m([f,g,y]),m([l,p,C])),n(m([p,g,y]),m([f,C])),n(b,m([g,g,y]))]],r)}}),h$="schur",hK=(0,tR.d5)(h$,["typed","matrix","identity","multiply","qr","norm","subtract"],t=>{var{typed:e,matrix:r,identity:i,multiply:n,qr:o,norm:s,subtract:a}=t;return e(h$,{Array:function(t){var e=u(r(t));return{U:e.U.valueOf(),T:e.T.valueOf()}},Matrix:function(t){return u(t)}});function u(t){var e,r=t.size()[0],u=t,h=i(r),l=0;do{e=u;var c=o(u),d=c.Q;if(u=n(c.R,d),h=n(h,d),l++>100)break}while(s(a(u,e))>1e-4);return{U:h,T:u}}}),h0="rotate",h1=(0,tR.d5)(h0,["typed","multiply","rotationMatrix"],t=>{var{typed:e,multiply:r,rotationMatrix:i}=t;return e(h0,{"Array , number | BigNumber | Complex | Unit":function(t,e){return n(t,2),r(i(e),t).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(t,e){return n(t,2),r(i(e),t)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(t,e,o){return n(t,3),r(i(e,o),t)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(t,e,o){return n(t,3),r(i(e,o),t)}});function n(t,e){var r=Array.isArray(t)?(0,e7.aJ)(t):t.size();if(r.length>2||2===r.length&&1!==r[1]||r[0]!==e)throw RangeError("Vector must be of dimensions 1x".concat(e))}}),h2="sylvester",h3=(0,tR.d5)(h2,["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],t=>{var{typed:e,schur:r,matrixFromColumns:i,matrix:n,multiply:o,range:s,concat:a,transpose:u,index:h,subset:l,add:c,subtract:d,identity:f,lusolve:p,abs:m}=t;return e(h2,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(t,e,r){return v(n(t),e,r)},"Array, Array, Matrix":function(t,e,r){return v(n(t),n(e),r)},"Array, Matrix, Array":function(t,e,r){return v(n(t),e,n(r))},"Matrix, Array, Matrix":function(t,e,r){return v(t,n(e),r)},"Matrix, Array, Array":function(t,e,r){return v(t,n(e),n(r))},"Matrix, Matrix, Array":function(t,e,r){return v(t,e,n(r))},"Array, Array, Array":function(t,e,r){return v(n(t),n(e),n(r)).toArray()}});function v(t,e,v){for(var g=e.size()[0],b=t.size()[0],y=r(t),C=y.T,Z=y.U,x=r(o(-1,e)),_=x.T,E=x.U,w=o(o(u(Z),v),E),N=s(0,b),S=[],A=(t,e)=>a(t,e,1),P=(t,e)=>a(t,e,0),D=0;D<g;D++)if(D<g-1&&m(l(_,h(D+1,D)))>1e-5){for(var M=P(l(w,h(N,D)),l(w,h(N,D+1))),O=0;O<D;O++)M=c(M,P(o(S[O],l(_,h(O,D))),o(S[O],l(_,h(O,D+1)))));var T=o(f(b),o(-1,l(_,h(D,D)))),B=o(f(b),o(-1,l(_,h(D+1,D)))),F=o(f(b),o(-1,l(_,h(D,D+1)))),R=o(f(b),o(-1,l(_,h(D+1,D+1)))),L=p(P(A(c(C,T),B),A(F,c(C,R))),M);S[D]=L.subset(h(s(0,b),0)),S[D+1]=L.subset(h(s(b,2*b),0)),D++}else{for(var k=l(w,h(N,D)),I=0;I<D;I++)k=c(k,o(S[I],l(_,h(I,D))));var Y=d(C,o(l(_,h(D,D)),f(b)));S[D]=p(Y,k)}return o(Z,o(n(i(...S)),u(E)))}}),h5="lyap",h8=(0,tR.d5)(h5,["typed","matrix","sylvester","multiply","transpose"],t=>{var{typed:e,matrix:r,sylvester:i,multiply:n,transpose:o}=t;return e(h5,{"Matrix, Matrix":function(t,e){return i(t,o(t),n(-1,e))},"Array, Matrix":function(t,e){return i(r(t),o(r(t)),n(-1,e))},"Matrix, Array":function(t,e){return i(t,o(r(t)),r(n(-1,e)))},"Array, Array":function(t,e){return i(r(t),o(r(t)),r(n(-1,e))).toArray()}})}),h4=tL({config:o.v}),h9=tU({}),h6=t8({BigNumber:h4,config:o.v}),h7=tK({}),lt=ew({BigNumber:h4,config:o.v}),le=e8({}),lr=ei({Complex:h9}),li=t1({BigNumber:h4,config:o.v}),ln=t6({BigNumber:h4,config:o.v}),lo=et({BigNumber:h4,config:o.v}),ls=e4({}),la=t2({BigNumber:h4,config:o.v}),lu=t0({}),lh=t4({BigNumber:h4,config:o.v}),ll=e9({}),lc=e6({}),ld=ee({BigNumber:h4,config:o.v}),lf=eX({BigNumber:h4,config:o.v}),lp=t5({BigNumber:h4,config:o.v}),lm=t$({}),lv=en({}),lg=ri({Matrix:ls}),lb=eB({BigNumber:h4,config:o.v}),ly=t9({BigNumber:h4,config:o.v}),lC=t3({BigNumber:h4,config:o.v}),lZ=rn({}),lx=er({BigNumber:h4,config:o.v}),l_=ru({BigNumber:h4,Complex:h9,DenseMatrix:lg,Fraction:le}),lE=rF({BigNumber:h4,config:o.v,typed:l_}),lw=eT({BigNumber:h4,config:o.v}),lN=rR({typed:l_}),lS=rk({Complex:h9,config:o.v,typed:l_}),lA=r3({BigNumber:h4,typed:l_}),lP=r8({BigNumber:h4,Complex:h9,config:o.v,typed:l_}),lD=r9({typed:l_}),lM=r6({typed:l_}),lO=it({BigNumber:h4,Complex:h9,config:o.v,typed:l_}),lT=ie({typed:l_}),lB=ir({typed:l_}),lF=io({Complex:h9,config:o.v,typed:l_}),lR=is({BigNumber:h4,typed:l_}),lL=il({typed:l_}),lk=id({typed:l_}),lI=im({typed:l_}),lY=iy({typed:l_}),lU=iZ({Complex:h9,typed:l_}),lj=i_({typed:l_}),lz=iw({typed:l_}),lX=iN({BigNumber:h4,typed:l_}),lJ=iS({BigNumber:h4,typed:l_}),lG=iP({typed:l_}),lH=iT({config:o.v,typed:l_}),lV=iB({typed:l_}),lq=iY({typed:l_}),lW=ij({Complex:h9,typed:l_}),lQ=iX({typed:l_}),l$=iH({typed:l_}),lK=iW({typed:l_}),l0=i$({typed:l_}),l1=iK({format:lK,typed:l_}),l2=i0({typed:l_}),l3=i2({typed:l_}),l5=i7({typed:l_}),l8=ne({typed:l_}),l4=ni({typed:l_}),l9=t7({BigNumber:h4,config:o.v}),l6=nl({Complex:h9,typed:l_}),l7=nd({Complex:h9,config:o.v,typed:l_}),ct=np({Complex:h9,config:o.v,typed:l_}),ce=nm({typed:l_}),cr=ng({typed:l_}),ci=ny({typed:l_}),cn=nC({typed:l_}),co=nZ({format:lK,typed:l_}),cs=nN({config:o.v,typed:l_}),ca=(0,nS.P)({typed:l_}),cu=nD({config:o.v,typed:l_}),ch=nM({typed:l_}),cl=nO({BigNumber:h4,typed:l_}),cc=nB({BigNumber:h4,Fraction:le,complex:lU,typed:l_}),cd=nF({typed:l_}),cf=nR({Matrix:ls,equalScalar:lH,typed:l_}),cp=nk({typed:l_}),cm=nY({typed:l_}),cv=nj({typed:l_}),cg=nX({typed:l_}),cb=nJ({typed:l_}),cy=nH({typed:l_}),cC=nq({Complex:h9,config:o.v,typed:l_}),cZ=nQ({BigNumber:h4,typed:l_}),cx=(0,n$.j)({isInteger:l3,typed:l_}),c_=n0({BigNumber:h4,Complex:h9,config:o.v,typed:l_}),cE=n1({format:lK,typed:l_}),cw=n3({typed:l_}),cN=n4({typed:l_}),cS=n6({BigNumber:h4,typed:l_}),cA=ot({typed:l_}),cP=or({typed:l_}),cD=on({config:o.v,typed:l_}),cM=os({BigNumber:h4,typed:l_}),cO=ou({typed:l_}),cT=ol({SparseMatrix:cf,typed:l_}),cB=oc({Complex:h9,config:o.v,typed:l_}),cF=od({typed:l_}),cR=op({typed:l_}),cL=ov({BigNumber:h4,Complex:h9,config:o.v,typed:l_}),ck=ob({BigNumber:h4,typed:l_}),cI=oy({Fraction:le,typed:l_}),cY=oZ({typed:l_}),cU=o_({DenseMatrix:lg,Matrix:ls,SparseMatrix:cf,typed:l_}),cj=ow({isZero:l4,matrix:cU,typed:l_}),cz=oS({isNaN:cA,isNumeric:cY,typed:l_}),cX=oP({bignumber:lR,fraction:cI,number:cn}),cJ=oO({config:o.v,multiplyScalar:cr,numeric:cX,typed:l_}),cG=oB({isInteger:l3,matrix:cU,typed:l_}),cH=oR({matrix:cU,config:o.v,typed:l_}),cV=ok({matrix:cU,typed:l_}),cq=oY({matrix:cU,typed:l_}),cW=oj({BigNumber:h4,config:o.v,matrix:cU,typed:l_}),cQ=oX({BigNumber:h4,config:o.v,matrix:cU,typed:l_}),c$=oG({Complex:h9,config:o.v,typed:l_}),cK=oV({BigNumber:h4,Complex:h9,Fraction:le,config:o.v,isNegative:l5,matrix:cU,typed:l_,unaryMinus:cR}),c0=(0,oq.k)({isInteger:l3,matrix:cU,typed:l_}),c1=oQ({prod:cJ,size:cH,typed:l_}),c2=oK({conj:lj,transpose:cq,typed:l_}),c3=o1({DenseMatrix:lg,SparseMatrix:cf,matrix:cU,typed:l_}),c5=o3({numeric:cX,typed:l_}),c8=se({DenseMatrix:lg,concat:c0,divideScalar:c5,equalScalar:lH,matrix:cU,typed:l_}),c4=si({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),c9=ss({matrix:cU,typed:l_}),c6=su({isNumeric:cY,typed:l_}),c7=sl({BigNumber:h4,DenseMatrix:lg,SparseMatrix:cf,config:o.v,matrix:cU,typed:l_}),dt=sd({matrix:cU,multiplyScalar:cr,typed:l_}),de=sp({DenseMatrix:lg,concat:c0,config:o.v,matrix:cU,typed:l_}),dr=sx({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_,zeros:cQ}),di=sw({DenseMatrix:lg,divideScalar:c5,equalScalar:lH,matrix:cU,multiplyScalar:cr,subtractScalar:cg,typed:l_}),dn=sS({flatten:c9,matrix:cU,size:cH,typed:l_}),ds=sD({BigNumber:h4,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),da=sM({BigNumber:h4,config:o.v,matrix:cU,typed:l_}),du=sT({addScalar:lD,complex:lU,conj:lj,divideScalar:c5,equal:c4,identity:c7,isZero:l4,matrix:cU,multiplyScalar:cr,sign:cc,sqrt:cB,subtractScalar:cg,typed:l_,unaryMinus:cR,zeros:cQ}),dh=sF({config:o.v,matrix:cU}),dl=sL({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_,zeros:cQ}),dc=sY({BigNumber:h4,DenseMatrix:lg,equalScalar:lH,matrix:cU,typed:l_,zeros:cQ}),dd=sj({DenseMatrix:lg,concat:c0,config:o.v,matrix:cU,typed:l_}),df=sG({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,subtractScalar:cg,typed:l_,unaryMinus:cR}),dp=sH({concat:c0,matrix:cU,typed:l_}),dm=sq({DenseMatrix:lg,concat:c0,config:o.v,equalScalar:lH,matrix:cU,typed:l_}),dv=s$({DenseMatrix:lg,divideScalar:c5,equalScalar:lH,matrix:cU,multiplyScalar:cr,subtractScalar:cg,typed:l_}),dg=sK({DenseMatrix:lg,concat:c0,matrix:cU,typed:l_}),db=s1({DenseMatrix:lg,SparseMatrix:cf,addScalar:lD,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),dy=s5({BigNumber:h4,DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),dC=(0,s8.i)({concat:c0,equalScalar:lH,matrix:cU,typed:l_}),dZ=(0,s4.j)({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),dx=s6({DenseMatrix:lg,concat:c0,matrix:cU,typed:l_}),d_=at({addScalar:lD,combinations:lY,divideScalar:c5,isInteger:l3,isNegative:l5,multiplyScalar:cr,typed:l_}),dE=ar({BigNumber:h4,DenseMatrix:lg,Fraction:le,concat:c0,config:o.v,equalScalar:lH,matrix:cU,typed:l_}),dw=ao({concat:c0,matrix:cU,typed:l_}),dN=(0,as.o)({add:db,typed:l_,unaryPlus:lE}),dS=au({equal:c4,typed:l_}),dA=(0,ah.J)({matrix:cU,number:cn,subtract:df,typed:l_}),dP=ac({abs:lN,addScalar:lD,deepEqual:dS,divideScalar:c5,multiplyScalar:cr,sqrt:cB,subtractScalar:cg,typed:l_}),dD=ad({addScalar:lD,conj:lj,multiplyScalar:cr,size:cH,typed:l_}),dM=ap({compareText:dw,isZero:l4,typed:l_}),dO=ag({DenseMatrix:lg,config:o.v,equalScalar:lH,matrix:cU,round:dc,typed:l_,zeros:cQ}),dT=ax({BigNumber:h4,DenseMatrix:lg,concat:c0,config:o.v,equalScalar:lH,matrix:cU,round:dc,typed:l_,zeros:cQ}),dB=aE({abs:lN,addScalar:lD,divideScalar:c5,isPositive:l8,multiplyScalar:cr,smaller:dd,sqrt:cB,typed:l_}),dF=aw({DenseMatrix:lg,smaller:dd}),dR=aN({ImmutableDenseMatrix:dF,getMatrixDataType:l0}),dL=aP({DenseMatrix:lg,concat:c0,config:o.v,matrix:cU,typed:l_}),dk=aM({Complex:h9,config:o.v,divideScalar:c5,typed:l_}),dI=aT({DenseMatrix:lg,divideScalar:c5,equalScalar:lH,matrix:cU,multiplyScalar:cr,subtractScalar:cg,typed:l_}),dY=aF({flatten:c9,matrix:cU,size:cH,typed:l_}),dU=(0,aR.D)({config:o.v,numeric:cX,smaller:dd,typed:l_}),dj=ab({DenseMatrix:lg,concat:c0,config:o.v,equalScalar:lH,matrix:cU,round:dc,typed:l_,zeros:cQ}),dz=ak({addScalar:lD,dot:dD,equalScalar:lH,matrix:cU,multiplyScalar:cr,typed:l_}),dX=aY({Complex:h9,config:o.v,divideScalar:c5,typed:l_}),dJ=(0,aU.Z)({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_}),dG=az({compare:dE,isNaN:cA,isNumeric:cY,typed:l_}),dH=aJ({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,typed:l_,zeros:cQ}),dV=a0({SparseMatrix:cf,abs:lN,add:db,divideScalar:c5,larger:dL,largerEq:de,multiply:dz,subtract:df,transpose:cq,typed:l_}),dq=(0,a1.q)({add:db,matrix:cU,typed:l_,zeros:cQ}),dW=(0,a2.O)({add:db,config:o.v,numeric:cX,typed:l_}),dQ=a3({add:db,matrix:cU,typed:l_}),d$=a8({DenseMatrix:lg,divideScalar:c5,equalScalar:lH,matrix:cU,multiplyScalar:cr,subtractScalar:cg,typed:l_}),dK=a9({Complex:h9,add:db,multiply:dz,number:cn,typed:l_}),d0=ut({DenseMatrix:lg,config:o.v,equalScalar:lH,matrix:cU,round:dc,typed:l_,zeros:cQ}),d1=ui({compare:dE,typed:l_}),d2=uo({addScalar:lD,combinations:lY,isInteger:l3,isNegative:l5,isPositive:l8,larger:dL,typed:l_}),d3=ua({matrix:cU,multiply:dz,subtract:df,typed:l_}),d5=uu({divideScalar:c5,isZero:l4,matrix:cU,multiply:dz,subtractScalar:cg,typed:l_,unaryMinus:cR}),d8=ul({concat:c0,equalScalar:lH,matrix:cU,multiplyScalar:cr,typed:l_}),d4=uc({larger:dL,smaller:dd}),d9=uf({Complex:h9,DenseMatrix:lg,ceil:d0,equalScalar:lH,floor:dO,matrix:cU,typed:l_,zeros:cQ}),d6=um({Index:dR,typed:l_}),d7=uv({abs:lN,add:db,addScalar:lD,config:o.v,divideScalar:c5,equalScalar:lH,flatten:c9,isNumeric:cY,isZero:l4,matrix:cU,multiply:dz,multiplyScalar:cr,smaller:dd,subtract:df,typed:l_}),ft=ub({BigNumber:h4,add:db,config:o.v,equal:c4,isInteger:l3,mod:dj,smaller:dd,typed:l_,xgcd:cW}),fe=uy({concat:c0,equalScalar:lH,matrix:cU,typed:l_}),fr=uZ({Complex:h9,config:o.v,divideScalar:c5,log:dk,typed:l_}),fi=(0,ux.J)({config:o.v,larger:dL,numeric:cX,typed:l_}),fn=uE({DenseMatrix:lg,Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fo=uN({DenseMatrix:lg,Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fs=uA({Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fa=uD({Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fu=uO({DenseMatrix:lg,concat:c0,config:o.v,matrix:cU,typed:l_}),fh=uF({compare:dE,compareNatural:d1,matrix:cU,typed:l_}),fl=(0,uR.I)({concat:c0,equalScalar:lH,matrix:cU,not:ci,typed:l_,zeros:cQ}),fc=(0,uL.M)({bignumber:lR,matrix:cU,add:db,config:o.v,isPositive:l8,larger:dL,largerEq:de,smaller:dd,smallerEq:fu,typed:l_}),fd=(0,uk.v)({Index:dR,matrix:cU,range:fc,typed:l_}),ff=uY({DenseMatrix:lg,Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fp=uj({Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),fm=uX({Index:dR,concat:c0,setDifference:ff,size:cH,subset:dq,typed:l_}),fv=uJ({FibonacciHeap:d4,addScalar:lD,equalScalar:lH}),fg=(0,uG.w)({Index:dR,matrix:cU,range:fc,typed:l_}),fb=uH({abs:lN,addScalar:lD,det:d5,divideScalar:c5,identity:c7,matrix:cU,multiply:dz,typed:l_,unaryMinus:cR}),fy=uV({DenseMatrix:lg,Spa:fv,SparseMatrix:cf,abs:lN,addScalar:lD,divideScalar:c5,equalScalar:lH,larger:dL,matrix:cU,multiplyScalar:cr,subtractScalar:cg,typed:l_,unaryMinus:cR}),fC=uW({Complex:h9,add:db,ctranspose:c2,deepEqual:dS,divideScalar:c5,dot:dD,dotDivide:c8,equal:c4,inv:fb,matrix:cU,multiply:dz,typed:l_}),fZ=uQ({Complex:h9,config:o.v,fraction:cI,identity:c7,inv:fb,matrix:cU,multiply:dz,number:cn,typed:l_}),fx=uK({DenseMatrix:lg,Index:dR,compareNatural:d1,size:cH,subset:dq,typed:l_}),f_=u1({Index:dR,concat:c0,setIntersect:fx,setSymDifference:fm,size:cH,subset:dq,typed:l_}),fE=u3({abs:lN,add:db,identity:c7,inv:fb,map:ce,max:fi,multiply:dz,size:cH,sqrt:cB,subtract:df,typed:l_}),fw=u9({BigNumber:h4,Complex:h9,Fraction:le,abs:lN,addScalar:lD,config:o.v,divideScalar:c5,equal:c4,fix:d9,format:lK,isNumeric:cY,multiplyScalar:cr,number:cn,pow:fZ,round:dc,subtractScalar:cg}),fN=ed({BigNumber:h4,Unit:fw,config:o.v}),fS=eH({BigNumber:h4,Unit:fw,config:o.v}),fA=eF({BigNumber:h4,Unit:fw,config:o.v}),fP=em({BigNumber:h4,Unit:fw,config:o.v}),fD=eL({BigNumber:h4,Unit:fw,config:o.v}),fM=ev({BigNumber:h4,Unit:fw,config:o.v}),fO=ef({BigNumber:h4,Unit:fw,config:o.v}),fT=eA({BigNumber:h4,Unit:fw,config:o.v}),fB=u7({DenseMatrix:lg,concat:c0,equalScalar:lH,matrix:cU,pow:fZ,typed:l_}),fF=ec({BigNumber:h4,Unit:fw,config:o.v}),fR=ep({BigNumber:h4,Unit:fw,config:o.v}),fL=he({abs:lN,add:db,identity:c7,inv:fb,multiply:dz,typed:l_}),fk=ek({BigNumber:h4,Unit:fw,config:o.v}),fI=hr({addScalar:lD,ceil:d0,conj:lj,divideScalar:c5,dotDivide:c8,exp:lq,i:lr,log2:ct,matrix:cU,multiplyScalar:cr,pow:fZ,tau:lp,typed:l_}),fY=hn({BigNumber:h4,Complex:h9,config:o.v,multiplyScalar:cr,pow:fZ,typed:l_}),fU=ea({BigNumber:h4,Unit:fw,config:o.v}),fj=eN({BigNumber:h4,Unit:fw,config:o.v}),fz=hs({conj:lj,dotDivide:c8,fft:fI,typed:l_}),fX=eC({BigNumber:h4,Unit:fw,config:o.v}),fJ=eY({BigNumber:h4,Unit:fw,config:o.v}),fG=el({BigNumber:h4,Unit:fw,config:o.v}),fH=eV({BigNumber:h4,Unit:fw,config:o.v}),fV=ej({BigNumber:h4,Unit:fw,config:o.v}),fq=eP({BigNumber:h4,Unit:fw,config:o.v}),fW=ey({BigNumber:h4,Unit:fw,config:o.v}),fQ=e0({BigNumber:h4,Unit:fw,config:o.v}),f$=eQ({BigNumber:h4,Unit:fw,config:o.v}),fK=e1({BigNumber:h4,Unit:fw,config:o.v}),f0=eS({BigNumber:h4,Unit:fw,config:o.v}),f1=eD({BigNumber:h4,Unit:fw,config:o.v}),f2=eh({BigNumber:h4,Unit:fw,config:o.v}),f3=eM({BigNumber:h4,Unit:fw,config:o.v}),f5=eJ({BigNumber:h4,Unit:fw,config:o.v}),f8=es({BigNumber:h4,Unit:fw,config:o.v}),f4=eG({BigNumber:h4,Unit:fw,config:o.v}),f9=eO({BigNumber:h4,Unit:fw,config:o.v}),f6=eR({BigNumber:h4,Unit:fw,config:o.v}),f7=eZ({BigNumber:h4,Unit:fw,config:o.v}),pt=hu({Unit:fw,typed:l_}),pe=hh({divideScalar:c5,equalScalar:lH,inv:fb,matrix:cU,multiply:dz,typed:l_}),pr=e_({BigNumber:h4,Unit:fw,config:o.v}),pi=hc({gamma:fY,typed:l_}),pn=eI({BigNumber:h4,Unit:fw,config:o.v}),po=eW({BigNumber:h4,Unit:fw,config:o.v}),ps=eg({BigNumber:h4,Unit:fw,config:o.v}),pa=hp({DenseMatrix:lg,lsolve:di,lup:fy,matrix:cU,slu:dV,typed:l_,usolve:dv}),pu=eb({BigNumber:h4,Unit:fw,config:o.v}),ph=eq({BigNumber:h4,Unit:fw,config:o.v}),pl=hv({add:db,divide:pe,factorial:pi,isInteger:l3,isPositive:l8,multiply:dz,typed:l_}),pc=hb({factorial:pi,typed:l_}),pd=e$({BigNumber:h4,Unit:fw,config:o.v}),pf=hZ({add:db,cbrt:cK,divide:pe,equalScalar:lH,im:l2,isZero:l4,multiply:dz,re:ch,sqrt:cB,subtract:df,typeOf:cy,typed:l_,unaryMinus:cR}),pp=h_({compareNatural:d1,typed:l_}),pm=hw({abs:lN,add:db,bignumber:lR,divide:pe,isNegative:l5,isPositive:l8,larger:dL,map:ce,matrix:cU,max:fi,multiply:dz,smaller:dd,subtract:df,typed:l_,unaryMinus:cR}),pv=hS({bignumber:lR,addScalar:lD,combinations:lY,divideScalar:c5,factorial:pi,isInteger:l3,isNegative:l5,larger:dL,multiplyScalar:cr,number:cn,pow:fZ,subtractScalar:cg,typed:l_}),pg=hP({Unit:fw,typed:l_}),pb=hM({addScalar:lD,isInteger:l3,isNegative:l5,stirlingS2:pv,typed:l_}),py=hO({abs:lN,add:db,addScalar:lD,atan:lB,bignumber:lR,column:fg,complex:lU,config:o.v,cos:lz,diag:c3,divideScalar:c5,dot:dD,equal:c4,flatten:c9,im:l2,inv:fb,larger:dL,matrix:cU,matrixFromColumns:dn,multiply:dz,multiplyScalar:cr,number:cn,qr:du,re:ch,reshape:cG,sin:cd,size:cH,smaller:dd,sqrt:cB,subtract:df,typed:l_,usolve:dv,usolveAll:d$}),pC=eE({BigNumber:h4,Unit:fw,config:o.v}),pZ=eU({BigNumber:h4,Unit:fw,config:o.v}),px=hB({divide:pe,dotDivide:c8,isNumeric:cY,log:dk,map:ce,matrix:cU,multiply:dz,sum:dW,typed:l_}),p_=(0,hF.Q)({add:db,divide:pe,typed:l_}),pE=ez({BigNumber:h4,Unit:fw,config:o.v}),pw=eu({BigNumber:h4,Unit:fw,config:o.v}),pN=(0,hR.y)({bignumber:lR,add:db,compare:dE,divide:pe,isInteger:l3,larger:dL,multiply:dz,partitionSelect:dG,smaller:dd,smallerEq:fu,subtract:df,typed:l_}),pS=(0,hL.F)({add:db,apply:cx,divide:pe,isNaN:cA,multiply:dz,subtract:df,typed:l_}),pA=ex({BigNumber:h4,Unit:fw,config:o.v}),pP=hI({add:db,compare:dE,divide:pe,partitionSelect:dG,typed:l_}),pD=hU({add:db,divide:pe,matrix:cU,mean:p_,multiply:dz,pow:fZ,sqrt:cB,subtract:df,sum:dW,typed:l_}),pM=hz({Complex:h9,add:db,divide:pe,matrix:cU,multiply:dz,typed:l_}),pO=hX({abs:lN,map:ce,median:pP,subtract:df,typed:l_}),pT=(0,hJ.X)({map:ce,sqrt:cB,typed:l_,variance:pS}),pB=hH({BigNumber:h4,Complex:h9,add:db,config:o.v,divide:pe,equal:c4,factorial:pi,gamma:fY,isNegative:l5,multiply:dz,pi:lC,pow:fZ,sin:cd,smallerEq:fu,subtract:df,typed:l_}),pF=hq({abs:lN,add:db,conj:lj,ctranspose:c2,eigs:py,equalScalar:lH,larger:dL,matrix:cU,multiply:dz,pow:fZ,smaller:dd,sqrt:cB,typed:l_}),pR=hQ({BigNumber:h4,DenseMatrix:lg,SparseMatrix:cf,addScalar:lD,config:o.v,cos:lz,matrix:cU,multiplyScalar:cr,norm:pF,sin:cd,typed:l_,unaryMinus:cR}),pL=eK({BigNumber:h4,Unit:fw,config:o.v}),pk=hK({identity:c7,matrix:cU,multiply:dz,norm:pF,qr:du,subtract:df,typed:l_}),pI=h1({multiply:dz,rotationMatrix:pR,typed:l_}),pY=h3({abs:lN,add:db,concat:c0,identity:c7,index:d6,lusolve:pa,matrix:cU,matrixFromColumns:dn,multiply:dz,range:fc,schur:pk,subset:dq,subtract:df,transpose:cq,typed:l_}),pU=h8({matrix:cU,multiply:dz,sylvester:pY,transpose:cq,typed:l_})},2885:function(t,e,r){"use strict";function i(t,e,r){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=Error().stack}r.d(e,{m:function(){return i}}),i.prototype=RangeError(),i.prototype.constructor=RangeError,i.prototype.name="DimensionError",i.prototype.isDimensionError=!0},6896:function(t,e,r){"use strict";function i(t,e,r){if(!(this instanceof i))throw SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=Error().stack}r.d(e,{c:function(){return i}}),i.prototype=RangeError(),i.prototype.constructor=RangeError,i.prototype.name="IndexError",i.prototype.isIndexError=!0},2614:function(t,e,r){"use strict";r.d(e,{i:function(){return c}});var i=r(8385),n=r(6257),o=r(6104),s=r(1418),a=r(5284),u=r(506),h=r(4189),l="bitAnd",c=(0,a.d5)(l,["typed","matrix","equalScalar","concat"],t=>{var{typed:e,matrix:r,equalScalar:a,concat:c}=t,d=(0,n.v)({typed:e,equalScalar:a}),f=(0,s.X)({typed:e,equalScalar:a}),p=(0,o.e)({typed:e,equalScalar:a}),m=(0,u.L)({typed:e,matrix:r,concat:c});return e(l,{"number, number":h.qC,"BigNumber, BigNumber":i.hi},m({SS:f,DS:d,Ss:p}))})},145:function(t,e,r){"use strict";r.d(e,{j:function(){return c}});var i=r(8385),n=r(5284),o=r(2590),s=r(6101),a=r(6565),u=r(506),h=r(4189),l="bitOr",c=(0,n.d5)(l,["typed","matrix","equalScalar","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:c,concat:d}=t,f=(0,a.M)({typed:e}),p=(0,s.v)({typed:e,equalScalar:n}),m=(0,o.H)({typed:e,DenseMatrix:c}),v=(0,u.L)({typed:e,matrix:r,concat:d});return e(l,{"number, number":h.LE,"BigNumber, BigNumber":i.Vq},v({SS:p,DS:f,Ss:m}))})},6949:function(t,e,r){"use strict";r.d(e,{I:function(){return l}});var i=r(6257),n=r(6104),o=r(2789),s=r(1418),a=r(5284),u=r(506),h=r(6350),l=(0,a.d5)("and",["typed","matrix","equalScalar","zeros","not","concat"],t=>{var{typed:e,matrix:r,equalScalar:a,zeros:l,not:c,concat:d}=t,f=(0,i.v)({typed:e,equalScalar:a}),p=(0,s.X)({typed:e,equalScalar:a}),m=(0,n.e)({typed:e,equalScalar:a}),v=(0,o.R)({typed:e}),g=(0,u.L)({typed:e,matrix:r,concat:d});return e("and",{"number, number":h.FO,"Complex, Complex":function(t,e){return(0!==t.re||0!==t.im)&&(0!==e.re||0!==e.im)},"BigNumber, BigNumber":function(t,e){return!t.isZero()&&!e.isZero()&&!t.isNaN()&&!e.isNaN()},"Unit, Unit":e.referToSelf(t=>(e,r)=>t(e.value||0,r.value||0)),"SparseMatrix, any":e.referToSelf(t=>(e,r)=>c(r)?l(e.size(),e.storage()):m(e,r,t,!1)),"DenseMatrix, any":e.referToSelf(t=>(e,r)=>c(r)?l(e.size(),e.storage()):v(e,r,t,!1)),"any, SparseMatrix":e.referToSelf(t=>(e,r)=>c(e)?l(e.size(),e.storage()):m(r,e,t,!0)),"any, DenseMatrix":e.referToSelf(t=>(e,r)=>c(e)?l(e.size(),e.storage()):v(r,e,t,!0)),"Array, any":e.referToSelf(t=>(e,i)=>t(r(e),i).valueOf()),"any, Array":e.referToSelf(t=>(e,i)=>t(e,r(i)).valueOf())},g({SS:p,DS:f}))})},1845:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var i=r(2419),n=r(6820),o=r(9322),s=r(5284),a=r(506),u=r(6350),h=(0,s.d5)("or",["typed","matrix","equalScalar","DenseMatrix","concat"],t=>{var{typed:e,matrix:r,equalScalar:s,DenseMatrix:h,concat:l}=t,c=(0,i.$)({typed:e}),d=(0,o.b)({typed:e,equalScalar:s}),f=(0,n.O)({typed:e,DenseMatrix:h}),p=(0,a.L)({typed:e,matrix:r,concat:l});return e("or",{"number, number":u.RY,"Complex, Complex":function(t,e){return 0!==t.re||0!==t.im||0!==e.re||0!==e.im},"BigNumber, BigNumber":function(t,e){return!t.isZero()&&!t.isNaN()||!e.isZero()&&!e.isNaN()},"Unit, Unit":e.referToSelf(t=>(e,r)=>t(e.value||0,r.value||0))},p({SS:d,DS:c,Ss:f}))})},131:function(t,e,r){"use strict";r.d(e,{j:function(){return u}});var i=r(5284),n=r(5836),o=r(7694),s=r(6896),a="apply",u=(0,i.d5)(a,["typed","isInteger"],t=>{var{typed:e,isInteger:r}=t;return e(a,{"Array | Matrix, number | BigNumber, function":function(t,e,i){if(!r(e))throw TypeError("Integer number expected for dimension");var a=Array.isArray(t)?(0,n.aJ)(t):t.size();if(e<0||e>=a.length)throw new s.c(e,a.length);return(0,o.SW)(t)?t.create(h(t.valueOf(),e,i)):h(t,e,i)}})});function h(t,e,r){var i,n,o;if(e<=0){if(!Array.isArray(t[0]))return r(t);for(i=0,o=function(t){var e,r,i=t.length,n=t[0].length,o=[];for(r=0;r<n;r++){var s=[];for(e=0;e<i;e++)s.push(t[e][r]);o.push(s)}return o}(t),n=[];i<o.length;i++)n[i]=h(o[i],e-1,r);return n}for(i=0,n=[];i<t.length;i++)n[i]=h(t[i],e-1,r);return n}},5052:function(t,e,r){"use strict";r.d(e,{w:function(){return u}});var i=r(5284),n=r(7694),o=r(6992),s=r(5836),a="column",u=(0,i.d5)(a,["typed","Index","matrix","range"],t=>{var{typed:e,Index:r,matrix:i,range:u}=t;return e(a,{"Matrix, number":h,"Array, number":function(t,e){return h(i((0,o.d9)(t)),e).valueOf()}});function h(t,e){if(2!==t.size().length)throw Error("Only two dimensional matrix is supported");(0,s.Ls)(e,t.size()[1]);var o=new r(u(0,t.size()[0]),e),a=t.subset(o);return(0,n.SW)(a)?a:i([[a]])}})},9002:function(t,e,r){"use strict";r.d(e,{k:function(){return l}});var i=r(7694),n=r(6992),o=r(5836),s=r(6896),a=r(2885),u=r(5284),h="concat",l=(0,u.d5)(h,["typed","matrix","isInteger"],t=>{var{typed:e,matrix:r,isInteger:u}=t;return e(h,{"...Array | Matrix | number | BigNumber":function(t){var e,h,l=t.length,c=-1,d=!1,f=[];for(e=0;e<l;e++){var p=t[e];if((0,i.SW)(p)&&(d=!0),(0,i.hj)(p)||(0,i.l9)(p)){if(e!==l-1)throw Error("Dimension must be specified as last argument");if(h=c,!u(c=p.valueOf()))throw TypeError("Integer number expected for dimension");if(c<0||e>0&&c>h)throw new s.c(c,h+1)}else{var m=(0,n.d9)(p).valueOf(),v=(0,o.aJ)(m);if(f[e]=m,h=c,c=v.length-1,e>0&&c!==h)throw new a.m(h+1,c+1)}}if(0===f.length)throw SyntaxError("At least one matrix expected");for(var g=f.shift();f.length;)g=(0,o.zo)(g,f.shift(),c);return d?r(g):g},"...string":function(t){return t.join("")}})})},3294:function(t,e,r){"use strict";r.d(e,{J:function(){return a}});var i=r(5284),n=r(9737),o=r(7694),s="diff",a=(0,i.d5)(s,["typed","matrix","subtract","number"],t=>{var{typed:e,matrix:r,subtract:i,number:a}=t;return e(s,{"Array | Matrix":function(t){return(0,o.SW)(t)?r(h(t.toArray())):h(t)},"Array | Matrix, number":function(t,e){if(!(0,n.U)(e))throw RangeError("Dimension must be a whole number");return(0,o.SW)(t)?r(u(t.toArray(),e)):u(t,e)},"Array, BigNumber":e.referTo("Array,number",t=>(e,r)=>t(e,a(r))),"Matrix, BigNumber":e.referTo("Matrix,number",t=>(e,r)=>t(e,a(r)))});function u(t,e){if((0,o.SW)(t)&&(t=t.toArray()),!Array.isArray(t))throw RangeError("Array/Matrix does not have that many dimensions");if(e>0){var r=[];return t.forEach(t=>{r.push(u(t,e-1))}),r}if(0===e)return h(t);throw RangeError("Cannot have negative dimension")}function h(t){for(var e=[],r=t.length,n=1;n<r;n++)e.push(function t(e,r){(0,o.SW)(e)&&(e=e.toArray()),(0,o.SW)(r)&&(r=r.toArray());var n=Array.isArray(e),s=Array.isArray(r);if(n&&s)return function(e,r){if(e.length!==r.length)throw RangeError("Not all sub-arrays have the same length");for(var i=[],n=e.length,o=0;o<n;o++)i.push(t(e[o],r[o]));return i}(e,r);if(!n&&!s)return i(r,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}(t[n-1],t[n]));return e}})},451:function(t,e,r){"use strict";r.d(e,{M:function(){return s}});var i=r(5284),n=r(4986),o="range",s=(0,i.d5)(o,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],t=>{var{typed:e,config:r,matrix:i,bignumber:s,smaller:a,smallerEq:u,larger:h,largerEq:l,add:c,isPositive:d}=t;return e(o,{string:p,"string, boolean":p,"number, number":function(t,e){return f(m(t,e,1,!1))},"number, number, number":function(t,e,r){return f(m(t,e,r,!1))},"number, number, boolean":function(t,e,r){return f(m(t,e,1,r))},"number, number, number, boolean":function(t,e,r,i){return f(m(t,e,r,i))},"BigNumber, BigNumber":function(t,e){var r=t.constructor;return f(m(t,e,new r(1),!1))},"BigNumber, BigNumber, BigNumber":function(t,e,r){return f(m(t,e,r,!1))},"BigNumber, BigNumber, boolean":function(t,e,r){var i=t.constructor;return f(m(t,e,new i(1),r))},"BigNumber, BigNumber, BigNumber, boolean":function(t,e,r,i){return f(m(t,e,r,i))},"Unit, Unit, Unit":function(t,e,r){return f(m(t,e,r,!1))},"Unit, Unit, Unit, boolean":function(t,e,r,i){return f(m(t,e,r,i))}});function f(t){return"Matrix"===r.matrix?i?i(t):(0,n.kX)():t}function p(t,e){var i=function(t){var e=t.split(":").map(function(t){return Number(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return{start:e[0],end:e[1],step:1};case 3:return{start:e[0],end:e[2],step:e[1]};default:return null}}(t);if(!i)throw SyntaxError('String "'+t+'" is no valid range');return"BigNumber"===r.number?(void 0===s&&(0,n.R3)(),f(m(s(i.start),s(i.end),s(i.step)),e)):f(m(i.start,i.end,i.step,e))}function m(t,e,r,i){for(var n=[],o=d(r)?i?u:a:i?l:h,s=t;o(s,e);)n.push(s),s=c(s,r);return n}})},8481:function(t,e,r){"use strict";r.d(e,{v:function(){return a}});var i=r(5284),n=r(7694),o=r(6992),s=r(5836),a=(0,i.d5)("row",["typed","Index","matrix","range"],t=>{var{typed:e,Index:r,matrix:i,range:a}=t;return e("row",{"Matrix, number":u,"Array, number":function(t,e){return u(i((0,o.d9)(t)),e).valueOf()}});function u(t,e){if(2!==t.size().length)throw Error("Only two dimensional matrix is supported");(0,s.Ls)(e,t.size()[0]);var o=new r(e,a(0,t.size()[1])),u=t.subset(o);return(0,n.SW)(u)?u:i([[u]])}})},7061:function(t,e,r){"use strict";r.d(e,{q:function(){return l}});var i=r(7694),n=r(6992),o=r(5836),s=r(6886),a=r(2885),u=r(5284),h="subset",l=(0,u.d5)(h,["typed","matrix","zeros","add"],t=>{var{typed:e,matrix:r,zeros:i,add:n}=t;return e(h,{"Matrix, Index":function(t,e){return(0,o.JD)(e)?r():((0,o.bc)(t,e),t.subset(e))},"Array, Index":e.referTo("Matrix, Index",function(t){return function(e,i){var n=t(r(e),i);return i.isScalar()?n:n.valueOf()}}),"Object, Index":f,"string, Index":c,"Matrix, Index, any, any":function(t,e,r,s){return(0,o.JD)(e)?t:((0,o.bc)(t,e),t.clone().subset(e,function(t,e){if("string"==typeof t)throw Error("can't boradcast a string");if(e._isScalar)return t;var r=e.size();if(!r.every(t=>t>0))return t;try{return n(t,i(r))}catch(e){return t}}(r,e),s))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(t){return function(e,i,n,o){var s=t(r(e),i,n,o);return s.isMatrix?s.valueOf():s}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(t){return function(e,i,n){return t(r(e),i,n,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(t){return function(e,r,i){return t(e,r,i,void 0)}}),"string, Index, string":d,"string, Index, string, string":d,"Object, Index, any":p})});function c(t,e){if(!(0,i.dh)(e))throw TypeError("Index expected");if((0,o.JD)(e))return"";if((0,o.bc)(Array.from(t),e),1!==e.size().length)throw new a.m(e.size().length,1);var r=t.length;(0,o.Ls)(e.min()[0],r),(0,o.Ls)(e.max()[0],r);var n=e.dimension(0),s="";return n.forEach(function(e){s+=t.charAt(e)}),s}function d(t,e,r,i){if(!e||!0!==e.isIndex)throw TypeError("Index expected");if((0,o.JD)(e))return t;if((0,o.bc)(Array.from(t),e),1!==e.size().length)throw new a.m(e.size().length,1);if(void 0!==i){if("string"!=typeof i||1!==i.length)throw TypeError("Single character expected as defaultValue")}else i=" ";var n=e.dimension(0);if(n.size()[0]!==r.length)throw new a.m(n.size()[0],r.length);var s=t.length;(0,o.Ls)(e.min()[0]),(0,o.Ls)(e.max()[0]);for(var u=[],h=0;h<s;h++)u[h]=t.charAt(h);if(n.forEach(function(t,e){u[t]=r.charAt(e[0])}),u.length>s)for(var l=s-1,c=u.length;l<c;l++)u[l]||(u[l]=i);return u.join("")}function f(t,e){if(!(0,o.JD)(e)){if(1!==e.size().length)throw new a.m(e.size(),1);var r=e.dimension(0);if("string"!=typeof r)throw TypeError("String expected as index to retrieve an object property");return(0,s.YF)(t,r)}}function p(t,e,r){if((0,o.JD)(e))return t;if(1!==e.size().length)throw new a.m(e.size(),1);var i=e.dimension(0);if("string"!=typeof i)throw TypeError("String expected as index to retrieve an object property");var u=(0,n.d9)(t);return(0,s.nI)(u,i,r),u}},6363:function(t,e,r){"use strict";r.d(e,{o:function(){return l}});var i=r(2248),n=r(5284),o=r(3776),s=r(6183),a=r(5836),u=r(6896),h="cumsum",l=(0,n.d5)(h,["typed","add","unaryPlus"],t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(h,{Array:l,Matrix:function(t){return t.create(l(t.valueOf()))},"Array, number | BigNumber":d,"Matrix, number | BigNumber":function(t,e){return t.create(d(t.valueOf(),e))},"...":function(t){if((0,i.CQ)(t))throw TypeError("All values expected to be scalar in function cumsum");return l(t)}});function l(t){try{return c(t)}catch(t){throw(0,s.x)(t,h)}}function c(t){if(0===t.length)return[];for(var e=[n(t[0])],i=1;i<t.length;++i)e.push(r(e[i-1],t[i]));return e}function d(t,e){var r=(0,a.aJ)(t);if(e<0||e>=r.length)throw new u.c(e,r.length);try{return function t(e,r){var i,n,s;if(r<=0){if(!Array.isArray(e[0][0]))return c(e);for(i=0,s=(0,o.c)(e),n=[];i<s.length;i++)n[i]=t(s[i],r-1);return n}for(i=0,n=[];i<e.length;i++)n[i]=t(e[i],r-1);return n}(t,e)}catch(t){throw(0,s.x)(t,h)}}})},3117:function(t,e,r){"use strict";r.d(e,{J:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("max",["typed","config","numeric","larger"],t=>{var{typed:e,config:r,numeric:n,larger:s}=t;return e("max",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(t,e){return(0,i.u4)(t,e.valueOf(),a)},"...":function(t){if((0,i.CQ)(t))throw TypeError("Scalar values expected in function max");return u(t)}});function a(t,e){try{return s(t,e)?t:e}catch(t){throw(0,o.x)(t,"max",e)}}function u(t){var e;if((0,i.Et)(t,function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||s(t,e))&&(e=t)}catch(e){throw(0,o.x)(e,"max",t)}}),void 0===e)throw Error("Cannot calculate max of an empty array");return"string"==typeof e&&(e=n(e,r.number)),e}})},5222:function(t,e,r){"use strict";r.d(e,{Q:function(){return u}});var i=r(2248),n=r(5836),o=r(5284),s=r(6183),a="mean",u=(0,o.d5)(a,["typed","add","divide"],t=>{var{typed:e,add:r,divide:o}=t;return e(a,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(t,e){try{var a=(0,i.u4)(t,e,r),u=Array.isArray(t)?(0,n.aJ)(t):t.size();return o(a,u[e])}catch(t){throw(0,s.x)(t,"mean")}},"...":function(t){if((0,i.CQ)(t))throw TypeError("Scalar values expected in function mean");return u(t)}});function u(t){var e,n=0;if((0,i.Et)(t,function(t){try{e=void 0===e?t:r(e,t),n++}catch(e){throw(0,s.x)(e,"mean",t)}}),0===n)throw Error("Cannot calculate the mean of an empty array");return o(e,n)}})},7543:function(t,e,r){"use strict";r.d(e,{D:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("min",["typed","config","numeric","smaller"],t=>{var{typed:e,config:r,numeric:n,smaller:s}=t;return e("min",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(t,e){return(0,i.u4)(t,e.valueOf(),a)},"...":function(t){if((0,i.CQ)(t))throw TypeError("Scalar values expected in function min");return u(t)}});function a(t,e){try{return s(t,e)?t:e}catch(t){throw(0,o.x)(t,"min",e)}}function u(t){var e;if((0,i.Et)(t,function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||s(t,e))&&(e=t)}catch(e){throw(0,o.x)(e,"min",t)}}),void 0===e)throw Error("Cannot calculate min of an empty array");return"string"==typeof e&&(e=n(e,r.number)),e}})},253:function(t,e,r){"use strict";r.d(e,{y:function(){return u}});var i=r(7694),n=r(5836),o=r(5284),s=r(131),a="quantileSeq",u=(0,o.d5)(a,["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],t=>{var{typed:e,bignumber:r,add:o,subtract:u,divide:h,multiply:l,partitionSelect:c,compare:d,isInteger:f,smaller:p,smallerEq:m,larger:v}=t,g=(0,s.j)({typed:e,isInteger:f});return e(a,{"Array | Matrix, number | BigNumber":(t,e)=>y(t,e,!1),"Array | Matrix, number | BigNumber, number":(t,e,r)=>b(t,e,!1,r,y),"Array | Matrix, number | BigNumber, boolean":y,"Array | Matrix, number | BigNumber, boolean, number":(t,e,r,i)=>b(t,e,r,i,y),"Array | Matrix, Array | Matrix":(t,e)=>C(t,e,!1),"Array | Matrix, Array | Matrix, number":(t,e,r)=>b(t,e,!1,r,C),"Array | Matrix, Array | Matrix, boolean":C,"Array | Matrix, Array | Matrix, boolean, number":(t,e,r,i)=>b(t,e,r,i,C)});function b(t,e,r,i,n){return g(t,i,t=>n(t,e,r))}function y(t,e,n){var s,a=t.valueOf();if(p(e,0))throw Error("N/prob must be non-negative");if(m(e,1))return(0,i.hj)(e)?Z(a,e,n):r(Z(a,e,n));if(v(e,1)){if(!f(e))throw Error("N must be a positive integer");if(v(e,4294967295))throw Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var u=o(e,1);s=[];for(var l=0;p(l,e);l++){var c=h(l+1,u);s.push(Z(a,c,n))}return(0,i.hj)(e)?s:r(s)}}function C(t,e,r){for(var i=t.valueOf(),n=e.valueOf(),o=[],s=0;s<n.length;++s)o.push(Z(i,n[s],r));return o}function Z(t,e,r){var s,a,h=(0,n.xH)(t),p=h.length;if(0===p)throw Error("Cannot calculate quantile of an empty sequence");var m=(0,i.hj)(e)?e*(p-1):e.times(p-1),v=(0,i.hj)(e)?Math.floor(m):m.floor().toNumber(),g=(0,i.hj)(e)?m%1:m.minus(v);if(f(m))return r?h[m]:c(h,(0,i.hj)(e)?m:m.valueOf());if(r)s=h[v],a=h[v+1];else{a=c(h,v+1),s=h[v];for(var b=0;b<v;++b)d(h[b],s)>0&&(s=h[b])}return o(l(s,u(1,g)),l(a,g))}})},1404:function(t,e,r){"use strict";r.d(e,{X:function(){return o}});var i=r(5284),n=r(7694),o=(0,i.d5)("std",["typed","map","sqrt","variance"],t=>{var{typed:e,map:r,sqrt:i,variance:o}=t;return e("std",{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(t){return s(t)}});function s(t,e){if(0===t.length)throw SyntaxError("Function std requires one or more parameters (0 provided)");try{var s=o.apply(null,arguments);if((0,n.uZ)(s))return r(s,i);return i(s)}catch(t){if(t instanceof TypeError&&-1!==t.message.indexOf(" variance"))throw TypeError(t.message.replace(" variance"," std"));throw t}}})},2296:function(t,e,r){"use strict";r.d(e,{O:function(){return s}});var i=r(2248),n=r(5284),o=r(6183),s=(0,n.d5)("sum",["typed","config","add","numeric"],t=>{var{typed:e,config:r,add:n,numeric:s}=t;return e("sum",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(t,e){try{return(0,i.u4)(t,e,n)}catch(t){throw(0,o.x)(t,"sum")}},"...":function(t){if((0,i.CQ)(t))throw TypeError("Scalar values expected in function sum");return a(t)}});function a(t){var e;return(0,i.Et)(t,function(t){try{e=void 0===e?t:n(e,t)}catch(e){throw(0,o.x)(e,"sum",t)}}),void 0===e&&(e=s(0,r.number)),"string"==typeof e&&(e=s(e,r.number)),e}})},6183:function(t,e,r){"use strict";r.d(e,{x:function(){return n}});var i=r(7694);function n(t,e,r){var n;return -1!==String(t).indexOf("Unexpected type")?(n=arguments.length>2?" (type: "+(0,i.kM)(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):-1!==String(t).indexOf("complex numbers")?(n=arguments.length>2?" (type: "+(0,i.kM)(r)+", value: "+JSON.stringify(r)+")":"",TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}},2023:function(t,e,r){"use strict";r.d(e,{F:function(){return h}});var i=r(2248),n=r(7694),o=r(5284),s=r(6183),a="unbiased",u="variance",h=(0,o.d5)(u,["typed","add","subtract","multiply","divide","apply","isNaN"],t=>{var{typed:e,add:r,subtract:o,multiply:h,divide:l,apply:c,isNaN:d}=t;return e(u,{"Array | Matrix":function(t){return f(t,a)},"Array | Matrix, string":f,"Array | Matrix, number | BigNumber":function(t,e){return p(t,e,a)},"Array | Matrix, number | BigNumber, string":p,"...":function(t){return f(t,a)}});function f(t,e){var a,u=0;if(0===t.length)throw SyntaxError("Function variance requires one or more parameters (0 provided)");if((0,i.Et)(t,function(t){try{a=void 0===a?t:r(a,t),u++}catch(e){throw(0,s.x)(e,"variance",t)}}),0===u)throw Error("Cannot calculate variance of an empty array");var c=l(a,u);if(a=void 0,(0,i.Et)(t,function(t){var e=o(t,c);a=void 0===a?h(e,e):r(a,h(e,e))}),d(a))return a;switch(e){case"uncorrected":return l(a,u);case"biased":return l(a,u+1);case"unbiased":var f=(0,n.l9)(a)?a.mul(0):0;return 1===u?f:l(a,u-1);default:throw Error('Unknown normalization "'+e+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function p(t,e,r){try{if(0===t.length)throw SyntaxError("Function variance requires one or more parameters (0 provided)");return c(t,e,t=>f(t,r))}catch(t){throw(0,s.x)(t,"variance")}}})},8289:function(t,e,r){"use strict";r.d(e,{P:function(){return u}});var i=r(9790),n=r(7694),o=r(5284),s=r(732),a="print",u=(0,o.d5)(a,["typed"],t=>{var{typed:e}=t;return e(a,{"string, Object | Array":h,"string, Object | Array, number | Object":h})});function h(t,e,r){return t.replace(s.k,function(t,o){var s=o.split("."),a=e[s.shift()];for(void 0!==a&&a.isMatrix&&(a=a.toArray());s.length&&void 0!==a;){var u=s.shift();a=u?a[u]:a+"."}return void 0!==a?(0,n.HD)(a)?a:(0,i.WU)(a,r):t})}},4189:function(t,e,r){"use strict";r.d(e,{LE:function(){return a},Lz:function(){return l},NA:function(){return s},ZG:function(){return h},ji:function(){return c},qC:function(){return o},xS:function(){return u}});var i=r(9737),n="number, number";function o(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function bitAnd");return t&e}function s(t){if(!(0,i.U)(t))throw Error("Integer expected in function bitNot");return~t}function a(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function bitOr");return t|e}function u(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function bitXor");return t^e}function h(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function leftShift");return t<<e}function l(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function rightArithShift");return t>>e}function c(t,e){if(!(0,i.U)(t)||!(0,i.U)(e))throw Error("Integers expected in function rightLogShift");return t>>>e}o.signature=n,s.signature="number",a.signature=n,u.signature=n,h.signature=n,l.signature=n,c.signature=n},6350:function(t,e,r){"use strict";r.d(e,{FO:function(){return a},RY:function(){return o},kl:function(){return s},xY:function(){return n}});var i="number, number";function n(t){return!t}function o(t,e){return!!(t||e)}function s(t,e){return!!t!=!!e}function a(t,e){return!!(t&&e)}n.signature="number",o.signature=i,s.signature=i,a.signature=i},6565:function(t,e,r){"use strict";r.d(e,{M:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo01xDSid",["typed"],t=>{var{typed:e}=t;return function(t,r,i,o){var s,a,u=t._data,h=t._size,l=t._datatype,c=r._values,d=r._index,f=r._ptr,p=r._size,m=r._datatype;if(h.length!==p.length)throw new n.m(h.length,p.length);if(h[0]!==p[0]||h[1]!==p[1])throw RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+p+")");if(!c)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=h[0],g=h[1],b="string"==typeof l&&l===m?l:void 0,y=b?e.find(i,[b,b]):i,C=[];for(s=0;s<v;s++)C[s]=[];var Z=[],x=[];for(a=0;a<g;a++){for(var _=a+1,E=f[a],w=f[a+1],N=E;N<w;N++)Z[s=d[N]]=o?y(c[N],u[s][a]):y(u[s][a],c[N]),x[s]=_;for(s=0;s<v;s++)x[s]===_?C[s][a]=Z[s]:C[s][a]=u[s][a]}return t.createDenseMatrix({data:C,size:[v,g],datatype:b})}})},6257:function(t,e,r){"use strict";r.d(e,{v:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo02xDS0",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,o,s){var a,u=t._data,h=t._size,l=t._datatype,c=i._values,d=i._index,f=i._ptr,p=i._size,m=i._datatype;if(h.length!==p.length)throw new n.m(h.length,p.length);if(h[0]!==p[0]||h[1]!==p[1])throw RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+p+")");if(!c)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=h[0],g=h[1],b=r,y=0,C=o;"string"==typeof l&&l===m&&(a=l,b=e.find(r,[a,a]),y=e.convert(0,a),C=e.find(o,[a,a]));for(var Z=[],x=[],_=[],E=0;E<g;E++){_[E]=x.length;for(var w=f[E],N=f[E+1],S=w;S<N;S++){var A=d[S],P=s?C(c[S],u[A][E]):C(u[A][E],c[S]);b(P,y)||(x.push(A),Z.push(P))}}return _[g]=x.length,i.createSparseMatrix({values:Z,index:x,ptr:_,size:[v,g],datatype:a})}})},2419:function(t,e,r){"use strict";r.d(e,{$:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo03xDSf",["typed"],t=>{var{typed:e}=t;return function(t,r,i,o){var s,a=t._data,u=t._size,h=t._datatype,l=r._values,c=r._index,d=r._ptr,f=r._size,p=r._datatype;if(u.length!==f.length)throw new n.m(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");if(!l)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],v=u[1],g=0,b=i;"string"==typeof h&&h===p&&(s=h,g=e.convert(0,s),b=e.find(i,[s,s]));for(var y=[],C=0;C<m;C++)y[C]=[];for(var Z=[],x=[],_=0;_<v;_++){for(var E=_+1,w=d[_],N=d[_+1],S=w;S<N;S++){var A=c[S];Z[A]=o?b(l[S],a[A][_]):b(a[A][_],l[S]),x[A]=E}for(var P=0;P<m;P++)x[P]===E?y[P][_]=Z[P]:y[P][_]=o?b(g,a[P][_]):b(a[P][_],g)}return t.createDenseMatrix({data:y,size:[m,v],datatype:s})}})},6101:function(t,e,r){"use strict";r.d(e,{v:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo04xSidSid",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,o){var s,a,u,h,l,c,d=t._values,f=t._index,p=t._ptr,m=t._size,v=t._datatype,g=i._values,b=i._index,y=i._ptr,C=i._size,Z=i._datatype;if(m.length!==C.length)throw new n.m(m.length,C.length);if(m[0]!==C[0]||m[1]!==C[1])throw RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+C+")");var x=m[0],_=m[1],E=r,w=0,N=o;"string"==typeof v&&v===Z&&(s=v,E=e.find(r,[s,s]),w=e.convert(0,s),N=e.find(o,[s,s]));var S=d&&g?[]:void 0,A=[],P=[],D=d&&g?[]:void 0,M=d&&g?[]:void 0,O=[],T=[];for(u=0;u<_;u++){P[u]=A.length;var B=u+1;for(l=p[u],c=p[u+1],h=l;h<c;h++)a=f[h],A.push(a),O[a]=B,D&&(D[a]=d[h]);for(l=y[u],c=y[u+1],h=l;h<c;h++)if(O[a=b[h]]===B){if(D){var F=N(D[a],g[h]);E(F,w)?O[a]=null:D[a]=F}}else A.push(a),T[a]=B,M&&(M[a]=g[h]);if(D&&M)for(h=P[u];h<A.length;)O[a=A[h]]===B?(S[h]=D[a],h++):T[a]===B?(S[h]=M[a],h++):A.splice(h,1)}return P[_]=A.length,t.createSparseMatrix({values:S,index:A,ptr:P,size:[x,_],datatype:s})}})},9322:function(t,e,r){"use strict";r.d(e,{b:function(){return o}});var i=r(5284),n=r(2885),o=(0,i.d5)("matAlgo05xSfSf",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,o){var s,a,u,h,l,c=t._values,d=t._index,f=t._ptr,p=t._size,m=t._datatype,v=i._values,g=i._index,b=i._ptr,y=i._size,C=i._datatype;if(p.length!==y.length)throw new n.m(p.length,y.length);if(p[0]!==y[0]||p[1]!==y[1])throw RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+y+")");var Z=p[0],x=p[1],_=r,E=0,w=o;"string"==typeof m&&m===C&&(s=m,_=e.find(r,[s,s]),E=e.convert(0,s),w=e.find(o,[s,s]));var N=c&&v?[]:void 0,S=[],A=[],P=N?[]:void 0,D=N?[]:void 0,M=[],O=[];for(u=0;u<x;u++){A[u]=S.length;var T=u+1;for(h=f[u],l=f[u+1];h<l;h++)a=d[h],S.push(a),M[a]=T,P&&(P[a]=c[h]);for(h=b[u],l=b[u+1];h<l;h++)M[a=g[h]]!==T&&S.push(a),O[a]=T,D&&(D[a]=v[h]);if(N)for(h=A[u];h<S.length;){var B=M[a=S[h]],F=O[a];if(B===T||F===T){var R=w(B===T?P[a]:E,F===T?D[a]:E);_(R,E)?S.splice(h,1):(N.push(R),h++)}}}return A[x]=S.length,t.createSparseMatrix({values:N,index:S,ptr:A,size:[Z,x],datatype:s})}})},1418:function(t,e,r){"use strict";r.d(e,{X:function(){return s}});var i=r(5284),n=r(2885),o=r(2248),s=(0,i.d5)("matAlgo06xS0S0",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,s){var a,u=t._values,h=t._size,l=t._datatype,c=i._values,d=i._size,f=i._datatype;if(h.length!==d.length)throw new n.m(h.length,d.length);if(h[0]!==d[0]||h[1]!==d[1])throw RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+d+")");var p=h[0],m=h[1],v=r,g=0,b=s;"string"==typeof l&&l===f&&(a=l,v=e.find(r,[a,a]),g=e.convert(0,a),b=e.find(s,[a,a]));for(var y=u&&c?[]:void 0,C=[],Z=[],x=y?[]:void 0,_=[],E=[],w=0;w<m;w++){Z[w]=C.length;var N=w+1;if((0,o.U6)(t,w,_,x,E,N,C,b),(0,o.U6)(i,w,_,x,E,N,C,b),x)for(var S=Z[w];S<C.length;){var A=C[S];if(E[A]===N){var P=x[A];v(P,g)?C.splice(S,1):(y.push(P),S++)}else C.splice(S,1)}else for(var D=Z[w];D<C.length;)E[C[D]]!==N?C.splice(D,1):D++}return Z[m]=C.length,t.createSparseMatrix({values:y,index:C,ptr:Z,size:[p,m],datatype:a})}})},2590:function(t,e,r){"use strict";r.d(e,{H:function(){return i}});var i=(0,r(5284).d5)("matAlgo10xSids",["typed","DenseMatrix"],t=>{var{typed:e,DenseMatrix:r}=t;return function(t,i,n,o){var s,a=t._values,u=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=l[0],f=l[1],p=n;"string"==typeof c&&(s=c,i=e.convert(i,s),p=e.find(n,[s,s]));for(var m=[],v=[],g=[],b=0;b<f;b++){for(var y=b+1,C=h[b],Z=h[b+1],x=C;x<Z;x++){var _=u[x];v[_]=a[x],g[_]=y}for(var E=0;E<d;E++)0===b&&(m[E]=[]),g[E]===y?m[E][b]=o?p(i,v[E]):p(v[E],i):m[E][b]=i}return new r({data:m,size:[d,f],datatype:s})}})},6104:function(t,e,r){"use strict";r.d(e,{e:function(){return i}});var i=(0,r(5284).d5)("matAlgo11xS0s",["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return function(t,i,n,o){var s,a=t._values,u=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=l[0],f=l[1],p=r,m=0,v=n;"string"==typeof c&&(s=c,p=e.find(r,[s,s]),m=e.convert(0,s),i=e.convert(i,s),v=e.find(n,[s,s]));for(var g=[],b=[],y=[],C=0;C<f;C++){y[C]=b.length;for(var Z=h[C],x=h[C+1],_=Z;_<x;_++){var E=u[_],w=o?v(i,a[_]):v(a[_],i);p(w,m)||(b.push(E),g.push(w))}}return y[f]=b.length,t.createSparseMatrix({values:g,index:b,ptr:y,size:[d,f],datatype:s})}})},6820:function(t,e,r){"use strict";r.d(e,{O:function(){return i}});var i=(0,r(5284).d5)("matAlgo12xSfs",["typed","DenseMatrix"],t=>{var{typed:e,DenseMatrix:r}=t;return function(t,i,n,o){var s,a=t._values,u=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=l[0],f=l[1],p=n;"string"==typeof c&&(s=c,i=e.convert(i,s),p=e.find(n,[s,s]));for(var m=[],v=[],g=[],b=0;b<f;b++){for(var y=b+1,C=h[b],Z=h[b+1],x=C;x<Z;x++){var _=u[x];v[_]=a[x],g[_]=y}for(var E=0;E<d;E++)0===b&&(m[E]=[]),g[E]===y?m[E][b]=o?p(i,v[E]):p(v[E],i):m[E][b]=o?p(i,0):p(0,i)}return new r({data:m,size:[d,f],datatype:s})}})},2789:function(t,e,r){"use strict";r.d(e,{R:function(){return o}});var i=r(5284),n=r(6992),o=(0,i.d5)("matAlgo14xDs",["typed"],t=>{var{typed:e}=t;return function(t,r,i,o){var s,a=t._data,u=t._size,h=t._datatype,l=i;"string"==typeof h&&(s=h,r=e.convert(r,s),l=e.find(i,[s,s]));var c=u.length>0?function t(e,r,i,n,o,s,a){var u=[];if(r===i.length-1)for(var h=0;h<n;h++)u[h]=a?e(s,o[h]):e(o[h],s);else for(var l=0;l<n;l++)u[l]=t(e,r+1,i,i[r+1],o[l],s,a);return u}(l,0,u,u[0],a,r,o):[];return t.createDenseMatrix({data:c,size:(0,n.d9)(u),datatype:s})}})},506:function(t,e,r){"use strict";r.d(e,{L:function(){return l}});var i=r(5284),n=r(6992),o=r(2885),s=(0,i.d5)("matAlgo13xDD",["typed"],t=>{var{typed:e}=t;return function(t,r,i){var n,s=t._data,a=t._size,u=t._datatype,h=r._data,l=r._size,c=r._datatype,d=[];if(a.length!==l.length)throw new o.m(a.length,l.length);for(var f=0;f<a.length;f++){if(a[f]!==l[f])throw RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+l+")");d[f]=a[f]}var p=i;"string"==typeof u&&u===c&&(n=u,p=e.find(i,[n,n]));var m=d.length>0?function t(e,r,i,n,o,s){var a=[];if(r===i.length-1)for(var u=0;u<n;u++)a[u]=e(o[u],s[u]);else for(var h=0;h<n;h++)a[h]=t(e,r+1,i,i[r+1],o[h],s[h]);return a}(p,0,d,d[0],s,h):[];return t.createDenseMatrix({data:m,size:d,datatype:n})}}),a=r(2789),u=r(5836),h=(0,i.d5)("broadcast",["concat"],t=>{var{concat:e}=t;return function(t,e){var n=Math.max(t._size.length,e._size.length);if(t._size.length===e._size.length&&t._size.every((t,r)=>t===e._size[r]))return[t,e];for(var o=r(t._size,n,0),s=r(e._size,n,0),a=[],h=0;h<n;h++)a[h]=Math.max(o[h],s[h]);(0,u.cV)(o,a),(0,u.cV)(s,a);var l=t.clone(),c=e.clone();l._size.length<n?l.reshape(r(l._size,n,1)):c._size.length<n&&c.reshape(r(c._size,n,1));for(var d=0;d<n;d++)l._size[d]<a[d]&&(l=i(l,a[d],d)),c._size[d]<a[d]&&(c=i(c,a[d],d));return[l,c]};function r(t,e,r){return[...Array(e-t.length).fill(r),...t]}function i(t,r,i){return e(...Array(r).fill(t),i)}}),l=(0,i.d5)("matrixAlgorithmSuite",["typed","matrix","concat"],t=>{var{typed:e,matrix:r,concat:i}=t,o=s({typed:e}),u=(0,a.R)({typed:e}),l=h({concat:i});return function(t){var i,s=t.elop,a=t.SD||t.DS;s?(i={"DenseMatrix, DenseMatrix":(t,e)=>o(...l(t,e),s),"Array, Array":(t,e)=>o(...l(r(t),r(e)),s).valueOf(),"Array, DenseMatrix":(t,e)=>o(...l(r(t),e),s),"DenseMatrix, Array":(t,e)=>o(...l(t,r(e)),s)},t.SS&&(i["SparseMatrix, SparseMatrix"]=(e,r)=>t.SS(...l(e,r),s,!1)),t.DS&&(i["DenseMatrix, SparseMatrix"]=(e,r)=>t.DS(...l(e,r),s,!1),i["Array, SparseMatrix"]=(e,i)=>t.DS(...l(r(e),i),s,!1)),a&&(i["SparseMatrix, DenseMatrix"]=(t,e)=>a(...l(e,t),s,!0),i["SparseMatrix, Array"]=(t,e)=>a(...l(r(e),t),s,!0))):(i={"DenseMatrix, DenseMatrix":e.referToSelf(t=>(e,r)=>o(...l(e,r),t)),"Array, Array":e.referToSelf(t=>(e,i)=>o(...l(r(e),r(i)),t).valueOf()),"Array, DenseMatrix":e.referToSelf(t=>(e,i)=>o(...l(r(e),i),t)),"DenseMatrix, Array":e.referToSelf(t=>(e,i)=>o(...l(e,r(i)),t))},t.SS&&(i["SparseMatrix, SparseMatrix"]=e.referToSelf(e=>(r,i)=>t.SS(...l(r,i),e,!1))),t.DS&&(i["DenseMatrix, SparseMatrix"]=e.referToSelf(e=>(r,i)=>t.DS(...l(r,i),e,!1)),i["Array, SparseMatrix"]=e.referToSelf(e=>(i,n)=>t.DS(...l(r(i),n),e,!1))),a&&(i["SparseMatrix, DenseMatrix"]=e.referToSelf(t=>(e,r)=>a(...l(r,e),t,!0)),i["SparseMatrix, Array"]=e.referToSelf(t=>(e,i)=>a(...l(r(i),e),t,!0))));var h=t.scalar||"any";(t.Ds||t.Ss)&&(s?(i["DenseMatrix,"+h]=(t,e)=>u(t,e,s,!1),i[h+", DenseMatrix"]=(t,e)=>u(e,t,s,!0),i["Array,"+h]=(t,e)=>u(r(t),e,s,!1).valueOf(),i[h+", Array"]=(t,e)=>u(r(e),t,s,!0).valueOf()):(i["DenseMatrix,"+h]=e.referToSelf(t=>(e,r)=>u(e,r,t,!1)),i[h+", DenseMatrix"]=e.referToSelf(t=>(e,r)=>u(r,e,t,!0)),i["Array,"+h]=e.referToSelf(t=>(e,i)=>u(r(e),i,t,!1).valueOf()),i[h+", Array"]=e.referToSelf(t=>(e,i)=>u(r(i),e,t,!0).valueOf())));var c=void 0!==t.sS?t.sS:t.Ss;return s?(t.Ss&&(i["SparseMatrix,"+h]=(e,r)=>t.Ss(e,r,s,!1)),c&&(i[h+", SparseMatrix"]=(t,e)=>c(e,t,s,!0))):(t.Ss&&(i["SparseMatrix,"+h]=e.referToSelf(e=>(r,i)=>t.Ss(r,i,e,!1))),c&&(i[h+", SparseMatrix"]=e.referToSelf(t=>(e,r)=>c(r,e,t,!0)))),s&&s.signatures&&(0,n.l7)(i,s.signatures),i}})},2992:function(t,e,r){"use strict";r.d(e,{i:function(){return o}});var i=r(7425),n=r(7694);function o(t,e,r,o,s){if(!i.isTypedFunction(t))return t(e,r,o);var a=[e,r,o],u=i.resolve(t,a);if(u)return f(u.implementation,a);var h=[e,r],l=i.resolve(t,h);if(l)return f(l.implementation,h);var c=[e],d=i.resolve(t,c);return d?f(d.implementation,c):f(t,a);function f(i,a){try{return i.apply(i,a)}catch(i){var u;if(i instanceof TypeError&&(null===(u=i.data)||void 0===u?void 0:u.category)==="wrongType"){var h=[];throw h.push("value: ".concat((0,n.kM)(e))),a.length>=2&&h.push("index: ".concat((0,n.kM)(r))),a.length>=3&&h.push("array: ".concat((0,n.kM)(o))),TypeError("Function ".concat(s," cannot apply callback arguments ")+"".concat(t.name,"(").concat(h.join(", "),") at index ").concat(JSON.stringify(r)))}throw TypeError("Function ".concat(s," cannot apply callback arguments ")+"to function ".concat(t.name,": ").concat(i.message))}}}},5836:function(t,e,r){"use strict";r.d(e,{$q:function(){return function t(e,r){for(var i,n=0,o=0;o<e.length;o++){var s=e[o],a=Array.isArray(s);if(0===o&&a&&(n=s.length),a&&s.length!==n)return;var u=a?t(s,r):r(s);if(void 0===i)i=u;else if(i!==u)return"mixed"}return i}},D$:function(){return A},Ed:function(){return _},Gu:function(){return c},JD:function(){return p},L9:function(){return y},Ls:function(){return f},SI:function(){return m},UF:function(){return M},UI:function(){return x},U_:function(){return w},XL:function(){return v},aJ:function(){return l},bc:function(){return d},cV:function(){return D},eu:function(){return g},f4:function(){return C},hX:function(){return E},v_:function(){return N},xH:function(){return Z},yV:function(){return S},zo:function(){return P}});var i=r(2110),n=r(9737),o=r(7694),s=r(9790),a=r(2885),u=r(6896),h=r(6992);function l(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function c(t,e){if(0===e.length){if(Array.isArray(t))throw new a.m(t.length,0)}else!function t(e,r,i){var n,o=e.length;if(o!==r[i])throw new a.m(o,r[i]);if(i<r.length-1){var s=i+1;for(n=0;n<o;n++){if(!Array.isArray(e[n]))throw new a.m(r.length-1,r.length,"<");t(e[n],r,s)}}else for(n=0;n<o;n++)if(Array.isArray(e[n]))throw new a.m(r.length+1,r.length,">")}(t,e,0)}function d(t,e){var r=t.isMatrix?t._size:l(t);e._sourceSize.forEach((t,e)=>{if(null!==t&&t!==r[e])throw new a.m(t,r[e])})}function f(t,e){if(void 0!==t){if(!(0,o.hj)(t)||!(0,n.U)(t))throw TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new u.c(t,e)}}function p(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&(0,o.kJ)(r._data)){if(0===r._size[0])return!0}else if(r.isRange){if(r.start===r.end)return!0}else if((0,o.HD)(r)&&0===r.length)return!0}return!1}function m(t,e,r){if(!Array.isArray(e))throw TypeError("Array expected");if(0===e.length)throw Error("Resizing to scalar is not supported");return e.forEach(function(t){if(!(0,o.hj)(t)||!(0,n.U)(t)||t<0)throw TypeError("Invalid size, must contain positive integers (size: "+(0,s.WU)(e)+")")}),((0,o.hj)(t)||(0,o.l9)(t))&&(t=[t]),function t(e,r,i,n){var o,s,a=e.length,u=r[i],h=Math.min(a,u);if(e.length=u,i<r.length-1){var l=i+1;for(o=0;o<h;o++)Array.isArray(s=e[o])||(s=[s],e[o]=s),t(s,r,l,n);for(o=h;o<u;o++)s=[],e[o]=s,t(s,r,l,n)}else{for(o=0;o<h;o++)for(;Array.isArray(e[o]);)e[o]=e[o][0];for(o=h;o<u;o++)e[o]=n}}(t,e,0,void 0!==r?r:0),t}function v(t,e){var r=Z(t),i=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw TypeError("Array expected");if(0===e.length)throw new a.m(0,i,"!=");var n=b(e=g(e,i));if(i!==n)throw new a.m(n,i,"!=");try{return function(t,e){for(var r,i=t,n=e.length-1;n>0;n--){var o=e[n];r=[];for(var s=i.length/o,a=0;a<s;a++)r.push(i.slice(a*o,(a+1)*o));i=r}return i}(r,e)}catch(t){if(t instanceof a.m)throw new a.m(n,i,"!=");throw t}}function g(t,e){var r=b(t),i=t.slice(),n=t.indexOf(-1);if(t.indexOf(-1,n+1)>=0)throw Error("More than one wildcard in sizes");if(n>=0){if(e%r==0)i[n]=-e/r;else throw Error("Could not replace wildcard, since "+e+" is no multiple of "+-r)}return i}function b(t){return t.reduce((t,e)=>t*e,1)}function y(t,e){for(var r=e||l(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(t=function t(e,r,i){var n,o;if(i<r){var s=i+1;for(n=0,o=e.length;n<o;n++)e[n]=t(e[n],r,s)}else for(;Array.isArray(e);)e=e[0];return e}(t,i,0),r.length=i),t}function C(t,e,r,i){var n=i||l(t);if(r)for(var o=0;o<r;o++)t=[t],n.unshift(1);for(t=function t(e,r,i){var n,o;if(Array.isArray(e)){var s=i+1;for(n=0,o=e.length;n<o;n++)e[n]=t(e[n],r,s)}else for(var a=i;a<r;a++)e=[e];return e}(t,e,0);n.length<e;)n.push(1);return t}function Z(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}function x(t,e){return Array.prototype.map.call(t,e)}function _(t,e){Array.prototype.forEach.call(t,e)}function E(t,e){if(1!==l(t).length)throw Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function w(t,e){if(1!==l(t).length)throw Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,t=>e.test(t))}function N(t,e){return Array.prototype.join.call(t,e)}function S(t){if(!Array.isArray(t))throw TypeError("Array input expected");if(0===t.length)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var i=1;i<t.length;i++)t[i]===t[i-1]?r++:r=0,e.push({value:t[i],identifier:r});return e}function A(t){if(!Array.isArray(t))throw TypeError("Array input expected");if(0===t.length)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function P(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(1===t.length)return t[0];if(t.length>1)return t.slice(1).reduce(function(t,r){return function t(e,r,i,n){if(!(n<i))return e.concat(r);if(e.length!==r.length)throw new a.m(e.length,r.length);for(var o=[],s=0;s<e.length;s++)o[s]=t(e[s],r[s],i,n+1);return o}(t,r,e,0)},t[0]);throw Error("Wrong number of arguments in function concat")}function D(t,e){for(var r=e.length,i=t.length,n=0;n<i;n++){var o=r-i+n;if(t[n]<e[o]&&t[n]>1||t[n]>e[o])throw Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(i," with size ").concat(t[n]," to size ").concat(e[o]))}}function M(t,e){var r,n,o,s=l(t);if((0,h.J5)(s,e))return t;D(s,e);var a=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=e.map(t=>t.length),n=Math.max(...i),o=Array(n).fill(null),s=0;s<e.length;s++)for(var a=e[s],u=i[s],h=0;h<u;h++){var l=n-u+h;a[h]>o[l]&&(o[l]=a[h])}for(var c=0;c<e.length;c++)D(e[c],o);return o}(s,e),u=a.length,c=[...Array(u-s.length).fill(1),...s],d=(0,i.Z)([],t);s.length<u&&(s=l(d=v(d,c)));for(var f=0;f<u;f++)s[f]<a[f]&&(s=l((r=d,n=a[f],o=f,d=P(...Array(n).fill(r),o))));return d}},8385:function(t,e,r){"use strict";function i(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return s(t,e,function(t,e){return t&e})}function n(t){if(t.isFinite()&&!t.isInteger())throw Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var i=t.plus(new e(1));return i.s=-i.s||null,e.config({precision:r}),i}function o(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var i=new r(-1);return t.isZero()||e.eq(i)||t.eq(e)?e:e.isZero()||t.eq(i)?t:t.isFinite()&&e.isFinite()?s(t,e,function(t,e){return t|e}):!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?i:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t}function s(t,e,r){var i,o,s,u,h,l=t.constructor,c=+(t.s<0),d=+(e.s<0);if(c){i=a(n(t));for(var f=0;f<i.length;++f)i[f]^=1}else i=a(t);if(d){o=a(n(e));for(var p=0;p<o.length;++p)o[p]^=1}else o=a(e);i.length<=o.length?(s=i,u=o,h=c):(s=o,u=i,h=d);var m=s.length,v=u.length,g=1^r(c,d),b=new l(1^g),y=new l(1),C=new l(2),Z=l.precision;for(l.config({precision:1e9});m>0;)r(s[--m],u[--v])===g&&(b=b.plus(y)),y=y.times(C);for(;v>0;)r(h,u[--v])===g&&(b=b.plus(y)),y=y.times(C);return l.config({precision:Z}),0===g&&(b.s=-b.s),b}function a(t){for(var e=t.d,r=e[0]+"",i=1;i<e.length;++i){for(var n=e[i]+"",o=7-n.length;o--;)n="0"+n;r+=n}for(var s=r.length;"0"===r.charAt(s);)s--;var a=t.e,u=r.slice(0,s+1||1),h=u.length;if(a>0){if(++a>h)for(a-=h;a--;)u+="0";else a<h&&(u=u.slice(0,a)+"."+u.slice(a))}for(var l=[0],c=0;c<u.length;){for(var d=l.length;d--;)l[d]*=10;l[0]+=parseInt(u.charAt(c++));for(var f=0;f<l.length;++f)l[f]>1&&((null===l[f+1]||void 0===l[f+1])&&(l[f+1]=0),l[f+1]+=l[f]>>1,l[f]&=1)}return l.reverse()}function u(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var i=new r(-1);return t.eq(i)?n(e):e.eq(i)?n(t):t.isFinite()&&e.isFinite()?s(t,e,function(t,e){return t^e}):t.isFinite()||e.isFinite()?new r(t.isNegative()===e.isNegative()?1/0:-1/0):i}function h(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:t.isFinite()||e.isFinite()?e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e)):new r(NaN)}function l(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():new r(t.isNegative()?-1:t.isFinite()?0:NaN)}r.d(e,{Mw:function(){return h},Vq:function(){return o},Xc:function(){return n},hi:function(){return i},nN:function(){return u},ti:function(){return l}})},2248:function(t,e,r){"use strict";r.d(e,{CQ:function(){return a},Et:function(){return function t(e,r){(0,i.SW)(e)&&(e=e.valueOf());for(var n=0,o=e.length;n<o;n++){var s=e[n];Array.isArray(s)?t(s,r):r(s)}}},Fh:function(){return function t(e,r,i){return e&&"function"==typeof e.map?e.map(function(e){return t(e,r,i)}):r(e)}},U6:function(){return l},u4:function(){return u}});var i=r(7694),n=r(6896),o=r(5836),s=r(3776);function a(t){for(var e=0;e<t.length;e++)if((0,i.uZ)(t[e]))return!0;return!1}function u(t,e,r){var s=Array.isArray(t)?(0,o.aJ)(t):t.size();if(e<0||e>=s.length)throw new n.c(e,s.length);return(0,i.SW)(t)?t.create(h(t.valueOf(),e,r)):h(t,e,r)}function h(t,e,r){var i,n,o,a;if(e<=0){if(Array.isArray(t[0])){for(i=0,a=(0,s.c)(t),n=[];i<a.length;i++)n[i]=h(a[i],e-1,r);return n}for(i=1,o=t[0];i<t.length;i++)o=r(o,t[i]);return o}for(i=0,n=[];i<t.length;i++)n[i]=h(t[i],e-1,r);return n}function l(t,e,r,i,n,o,s,a,u,h,l){var c,d,f,p,m=t._values,v=t._index,g=t._ptr;if(i)for(d=g[e],f=g[e+1],c=d;c<f;c++)r[p=v[c]]!==o?(r[p]=o,s.push(p),h?(i[p]=u?a(m[c],l):a(l,m[c]),n[p]=o):i[p]=m[c]):(i[p]=u?a(m[c],i[p]):a(i[p],m[c]),n[p]=o);else for(d=g[e],f=g[e+1],c=d;c<f;c++)r[p=v[c]]!==o?(r[p]=o,s.push(p)):n[p]=o}},6886:function(t,e,r){"use strict";r.d(e,{OJ:function(){return h},YF:function(){return n},Z8:function(){return s},nI:function(){return o},rG:function(){return u}});var i=r(6992);function n(t,e){if(l(t)&&a(t,e))return t[e];if("function"==typeof t[e]&&h(t,e))throw Error('Cannot access method "'+e+'" as a property');throw Error('No access to property "'+e+'"')}function o(t,e,r){if(l(t)&&a(t,e))return t[e]=r,r;throw Error('No access to property "'+e+'"')}function s(t,e){return e in t}function a(t,e){return!!t&&"object"==typeof t&&(!!(0,i.nr)(c,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function u(t,e){if(!h(t,e))throw Error('No access to method "'+e+'"');return t[e]}function h(t,e){return!(null==t||"function"!=typeof t[e]||(0,i.nr)(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t))&&(!!(0,i.nr)(d,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function l(t){return"object"==typeof t&&t&&t.constructor===Object}var c={length:!0,name:!0},d={toString:!0,valueOf:!0,toLocaleString:!0}},5284:function(t,e,r){"use strict";r.d(e,{d5:function(){return n}});var i=r(6992);function n(t,e,r,n){function s(n){var s=(0,i.W6)(n,e.map(o));return function(t,e,r){if(!e.filter(t=>!(t&&"?"===t[0])).every(t=>void 0!==r[t])){var i=e.filter(t=>void 0===r[t]);throw Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(t=>'"'.concat(t,'"')).join(", "),"."))}}(t,e,n),r(s)}return s.isFactory=!0,s.fn=t,s.dependencies=e.slice().sort(),n&&(s.meta=n),s}function o(t){return t&&"?"===t[0]?t.slice(1):t}},7694:function(t,e,r){"use strict";function i(t){return"number"==typeof t}function n(t){return!!t&&"object"==typeof t&&"function"==typeof t.constructor&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function o(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function s(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function a(t){return t&&!0===t.constructor.prototype.isUnit||!1}function u(t){return"string"==typeof t}r.d(e,{Bp:function(){return S},Cl:function(){return B},FG:function(){return U},Ft:function(){return _},HD:function(){return u},Ig:function(){return k},J_:function(){return C},Kj:function(){return Z},Kn:function(){return x},Lr:function(){return R},Mc:function(){return o},SW:function(){return l},UG:function(){return F},VO:function(){return T},Yz:function(){return w},ZX:function(){return M},Zi:function(){return Y},bR:function(){return p},bV:function(){return L},cB:function(){return g},dh:function(){return m},ex:function(){return I},hj:function(){return i},j0:function(){return N},jH:function(){return d},jn:function(){return v},kJ:function(){return h},kM:function(){return z},l7:function(){return O},l9:function(){return n},mf:function(){return y},nu:function(){return D},o8:function(){return E},qg:function(){return j},sA:function(){return f},tS:function(){return P},uZ:function(){return c},wr:function(){return a},x1:function(){return b},yQ:function(){return s},zh:function(){return A}});var h=Array.isArray;function l(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function c(t){return Array.isArray(t)||l(t)}function d(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function f(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function p(t){return t&&!0===t.constructor.prototype.isRange||!1}function m(t){return t&&!0===t.constructor.prototype.isIndex||!1}function v(t){return"boolean"==typeof t}function g(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function b(t){return t&&!0===t.constructor.prototype.isHelp||!1}function y(t){return"function"==typeof t}function C(t){return t instanceof Date}function Z(t){return t instanceof RegExp}function x(t){return!!(t&&"object"==typeof t&&t.constructor===Object&&!o(t)&&!s(t))}function _(t){return null===t}function E(t){return void 0===t}function w(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function N(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function S(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function A(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function P(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function D(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function M(t){return D(t)||L(t)&&1===t.args.length&&D(t.args[0])&&"-+~".includes(t.op)}function O(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function T(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function B(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function F(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function R(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function L(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function k(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function I(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function Y(t){return t&&!0===t.isRelationalNode&&!0===t.constructor.prototype.isNode||!1}function U(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function j(t){return t&&!0===t.constructor.prototype.isChain||!1}function z(t){var e=typeof t;return"object"===e?null===t?"null":n(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}},2187:function(t,e,r){"use strict";r.d(e,{A3:function(){return s},_N:function(){return c},df:function(){return h},dg:function(){return u},hB:function(){return o},ru:function(){return l}});var i=r(6886),n=r(7694);class o{keys(){return Object.keys(this.wrappedObject).values()}get(t){return(0,i.YF)(this.wrappedObject,t)}set(t,e){return(0,i.nI)(this.wrappedObject,t,e),this}has(t){return(0,i.Z8)(this.wrappedObject,t)}entries(){return a(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var e of this.keys())t(this.get(e),e,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}constructor(t){this.wrappedObject=t}}class s{get(t){return this.bKeys.has(t)?this.b.get(t):this.a.get(t)}set(t,e){return this.bKeys.has(t)?this.b.set(t,e):this.a.set(t,e),this}has(t){return this.b.has(t)||this.a.has(t)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return a(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var e of this.keys())t(this.get(e),e,this)}delete(t){return this.bKeys.has(t)?this.b.delete(t):this.a.delete(t)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}constructor(t,e,r){this.a=t,this.b=e,this.bKeys=r}}function a(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function u(){return new Map}function h(t){if(!t)return u();if(c(t))return t;if((0,n.Kn)(t))return new o(t);throw Error("createMap can create maps from objects or Maps")}function l(t){if(t instanceof o)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);(0,i.nI)(e,r,n)}return e}function c(t){return!!t&&(t instanceof Map||t instanceof o||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}},4986:function(t,e,r){"use strict";function i(){throw Error('No "bignumber" implementation available')}function n(){throw Error('No "fraction" implementation available')}function o(){throw Error('No "matrix" implementation available')}r.d(e,{R3:function(){return i},kX:function(){return o},nG:function(){return n}})},9737:function(t,e,r){"use strict";r.d(e,{AE:function(){return S},C8:function(){return E},FH:function(){return m},JG:function(){return A},Kr:function(){return u},RI:function(){return Z},R_:function(){return N},U:function(){return n},Vf:function(){return _},WU:function(){return d},Xx:function(){return o},__:function(){return x},eK:function(){return h},f9:function(){return w},k3:function(){return s},mv:function(){return a},nz:function(){return y},t$:function(){return l},uR:function(){return f}});var i=r(7694);function n(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}var o=Math.sign||function(t){return t>0?1:t<0?-1:0},s=Math.log2||function(t){return Math.log(t)/Math.LN2},a=Math.log10||function(t){return Math.log(t)/Math.LN10},u=Math.log1p||function(t){return Math.log(t+1)},h=Math.cbrt||function(t){if(0===t)return t;var e,r=t<0;return r&&(t=-t),isFinite(t)?(e=Math.exp(Math.log(t)/3),e=(t/(e*e)+2*e)/3):e=t,r?-e:e},l=Math.expm1||function(t){return t>=2e-4||t<=-.0002?Math.exp(t)-1:t+t*t/2+t*t*t/6};function c(t,e,r){var i="";if(r){if(r<1)throw Error("size must be in greater than 0");if(!n(r))throw Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!n(t))throw Error("Value must be an integer");t<0&&(t+=2**r),i="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat({2:"0b",8:"0o",16:"0x"}[e]).concat(t.toString(e)).concat(i)}function d(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:o}=f(e);switch(r){case"fixed":return m(t,n);case"exponential":return v(t,n);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=g(p(t),e),n=r.exponent,o=r.coefficients,s=n%3==0?n:n<0?n-3-n%3:n-n%3;if((0,i.hj)(e))for(;e>o.length||n-s+1>o.length;)o.push(0);else for(var a=Math.abs(n-s)-(o.length-1),u=0;u<a;u++)o.push(0);for(var h=Math.abs(n-s),l=1;h>0;)l++,h--;var c=o.slice(l).join(""),d=(0,i.hj)(e)&&c.length||c.match(/[1-9]/)?"."+c:"",f=o.slice(0,l).join("")+d+"e"+(n>=0?"+":"")+s.toString();return r.sign+f}(t,n);case"bin":return c(t,2,o);case"oct":return c(t,8,o);case"hex":return c(t,16,o);case"auto":return(function(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var i=D(null==r?void 0:r.lowerExp,-3),n=D(null==r?void 0:r.upperExp,5),o=p(t),s=e?g(o,e):o;if(s.exponent<i||s.exponent>=n)return v(t,e);var a=s.coefficients,u=s.exponent;a.length<e&&(a=a.concat(b(e-a.length))),a=a.concat(b(u-a.length+1+(a.length<e?e-a.length:0))),a=b(-u).concat(a);var h=u>0?u:0;return h<a.length-1&&a.splice(h+1,0,"."),s.sign+a.join("")})(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function f(t){var e,r,n="auto";if(void 0!==t){if((0,i.hj)(t))e=t;else if((0,i.l9)(t))e=t.toNumber();else if((0,i.Kn)(t))void 0!==t.precision&&(e=P(t.precision,()=>{throw Error('Option "precision" must be a number or BigNumber')})),void 0!==t.wordSize&&(r=P(t.wordSize,()=>{throw Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(n=t.notation);else throw Error("Unsupported type of options, number, BigNumber, or object expected")}return{notation:n,precision:e,wordSize:r}}function p(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw SyntaxError("Invalid number "+t);var r=e[1],i=e[2],n=parseFloat(e[4]||"0"),o=i.indexOf(".");n+=-1!==o?o-1:i.length-1;var s=i.replace(".","").replace(/^0*/,function(t){return n-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===s.length&&(s.push(0),n++),{sign:r,coefficients:s,exponent:n}}function m(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=p(t),i="number"==typeof e?g(r,r.exponent+1+e):r,n=i.coefficients,o=i.exponent+1,s=o+(e||0);return n.length<s&&(n=n.concat(b(s-n.length))),o<0&&(n=b(-o+1).concat(n),o=1),o<n.length&&n.splice(o,0,0===o?"0.":"."),i.sign+n.join("")}function v(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=p(t),i=e?g(r,e):r,n=i.coefficients,o=i.exponent;n.length<e&&(n=n.concat(b(e-n.length)));var s=n.shift();return i.sign+s+(n.length>0?"."+n.join(""):"")+"e"+(o>=0?"+":"")+o}function g(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},i=r.coefficients;e<=0;)i.unshift(0),r.exponent++,e++;if(i.length>e&&i.splice(e,i.length-e)[0]>=5){var n=e-1;for(i[n]++;10===i[n];)i.pop(),0===n&&(i.unshift(0),r.exponent++,n++),n--,i[n]++}return r}function b(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function y(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var C=Number.EPSILON||2220446049250313e-31;function Z(t,e,r){if(null==r)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var i=Math.abs(t-e);return i<=C||i<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}var x=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},_=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},E=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},w=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},N=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},S=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function A(t,e){return(t>0||!(t<0)&&1/t==1/0)^(e>0||!(e<0)&&1/e==1/0)?-t:t}function P(t,e){return(0,i.hj)(t)?t:(0,i.l9)(t)?t.toNumber():void e()}function D(t,e){return(0,i.hj)(t)?t:(0,i.l9)(t)?t.toNumber():e}},6992:function(t,e,r){"use strict";r.d(e,{J5:function(){return function t(e,r){var i,n,o;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(n=0,o=e.length;n<o;n++)if(!t(e[n],r[n]))return!1;return!0}if("function"==typeof e||!(e instanceof Object))return e===r;if(Array.isArray(r)||!(r instanceof Object))return!1;for(i in e)if(!(i in r)||!t(e[i],r[i]))return!1;for(i in r)if(!(i in e))return!1;return!0}},Vo:function(){return o},W6:function(){return a},d9:function(){return function t(e){var r=typeof e;if("number"===r||"string"===r||"boolean"===r||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return t(e)});if(e instanceof Date)return new Date(e.valueOf());if((0,i.l9)(e))return e;if((0,i.Kn)(e))return function(t,e){var r={};for(var i in t)s(t,i)&&(r[i]=e(t[i]));return r}(e,t);throw TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}},l7:function(){return n},nr:function(){return s}});var i=r(7694);function n(t,e){for(var r in e)s(e,r)&&(t[r]=e[r]);return t}function o(t,e,r){var i,n=!0;Object.defineProperty(t,e,{get:function(){return n&&(i=r(),n=!1),i},set:function(t){i=t,n=!1},configurable:!0,enumerable:!0})}function s(t,e){return t&&Object.hasOwnProperty.call(t,e)}function a(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i],o=t[n];void 0!==o&&(r[n]=o)}return r}},732:function(t,e,r){"use strict";r.d(e,{k:function(){return i}});var i=/\$([\w.]+)/g},9790:function(t,e,r){"use strict";r.d(e,{cd:function(){return d},pn:function(){return u},YU:function(){return c},WU:function(){return function t(e,r){var u=function(e,r){return"number"==typeof e?(0,n.WU)(e,r):(0,i.l9)(e)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:i,wordSize:u}=(0,n.uR)(e);switch(r){case"fixed":return t.toFixed(i);case"exponential":return s(t,i);case"engineering":return l=(h=t.e)%3==0?h:h<0?h-3-h%3:h-h%3,-1!==(c=t.mul(Math.pow(10,-l)).toPrecision(i)).indexOf("e")&&(c=new t.constructor(c).toFixed()),c+"e"+(h>=0?"+":"")+l.toString();case"bin":return o(t,2,u);case"oct":return o(t,8,u);case"hex":return o(t,16,u);case"auto":var h,l,c,d=a(null==e?void 0:e.lowerExp,-3),f=a(null==e?void 0:e.upperExp,5);if(t.isZero())return"0";var p=t.toSignificantDigits(i),m=p.e;return(m>=d&&m<f?p.toFixed():s(t,i)).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,r):e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d?r&&"decimal"===r.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(r,i){if(!Array.isArray(r))return t(r,i);for(var n="[",o=r.length,s=0;s<o;s++)0!==s&&(n+=", "),n+=e(r[s],i);return n+"]"}(e,r):(0,i.HD)(e)?h(e):"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(r):e&&e.toString(r)!==({}).toString()?e.toString(r):"{"+Object.keys(e).map(i=>h(i)+": "+t(e[i],r)).join(", ")+"}":String(e)}(e,r);return r&&"object"==typeof r&&"truncate"in r&&u.length>r.truncate?u.substring(0,r.truncate-3)+"...":u}},Pz:function(){return h}});var i=r(7694),n=r(9737);function o(t,e,r){var i=new t.constructor(2),o="";if(r){if(r<1)throw Error("size must be in greater than 0");if(!(0,n.U)(r))throw Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),o="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw Error("Base ".concat(e," not supported "))}}function s(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function a(t,e){return(0,i.hj)(t)?t:(0,i.l9)(t)?t.toNumber():e}function u(t,e){var r=t.length-e.length,i=t.length;return t.substring(r,i)===e}function h(t){for(var e=String(t),r="",i=0;i<e.length;){var n=e.charAt(i);r+=n in l?l[n]:n,i++}return'"'+r+'"'}var l={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function c(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(t,e){if(!(0,i.HD)(t))throw TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,i.kM)(t)+", index: 0)");if(!(0,i.HD)(e))throw TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,i.kM)(e)+", index: 1)");return t===e?0:t>e?1:-1}},3776:function(t,e,r){"use strict";function i(t){var e,r,i=t.length,n=t[0].length,o=[];for(r=0;r<n;r++){var s=[];for(e=0;e<i;e++)s.push(t[e][r]);o.push(s)}return o}r.d(e,{c:function(){return i}})}}]);